var QT=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports);var ID=QT(ec=>{function ZT(o,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in o)){const i=Object.getOwnPropertyDescriptor(n,r);i&&Object.defineProperty(o,r,i.get?i:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();function fv(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Vg={exports:{}},wd={},Kg={exports:{}},gr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uy;function JT(){if(uy)return gr;uy=1;var o=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),p=Symbol.iterator;function y(Me){return Me===null||typeof Me!="object"?null:(Me=p&&Me[p]||Me["@@iterator"],typeof Me=="function"?Me:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function R(Me,$e,mt){this.props=Me,this.context=$e,this.refs=w,this.updater=mt||T}R.prototype.isReactComponent={},R.prototype.setState=function(Me,$e){if(typeof Me!="object"&&typeof Me!="function"&&Me!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Me,$e,"setState")},R.prototype.forceUpdate=function(Me){this.updater.enqueueForceUpdate(this,Me,"forceUpdate")};function M(){}M.prototype=R.prototype;function Y(Me,$e,mt){this.props=Me,this.context=$e,this.refs=w,this.updater=mt||T}var Z=Y.prototype=new M;Z.constructor=Y,b(Z,R.prototype),Z.isPureReactComponent=!0;var ye=Array.isArray,Re=Object.prototype.hasOwnProperty,F={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function j(Me,$e,mt){var Dt,Pe={},Fe=null,ut=null;if($e!=null)for(Dt in $e.ref!==void 0&&(ut=$e.ref),$e.key!==void 0&&(Fe=""+$e.key),$e)Re.call($e,Dt)&&!k.hasOwnProperty(Dt)&&(Pe[Dt]=$e[Dt]);var W=arguments.length-2;if(W===1)Pe.children=mt;else if(1<W){for(var Q=Array(W),P=0;P<W;P++)Q[P]=arguments[P+2];Pe.children=Q}if(Me&&Me.defaultProps)for(Dt in W=Me.defaultProps,W)Pe[Dt]===void 0&&(Pe[Dt]=W[Dt]);return{$$typeof:o,type:Me,key:Fe,ref:ut,props:Pe,_owner:F.current}}function oe(Me,$e){return{$$typeof:o,type:Me.type,key:$e,ref:Me.ref,props:Me.props,_owner:Me._owner}}function L(Me){return typeof Me=="object"&&Me!==null&&Me.$$typeof===o}function Ee(Me){var $e={"=":"=0",":":"=2"};return"$"+Me.replace(/[=:]/g,function(mt){return $e[mt]})}var Be=/\/+/g;function pe(Me,$e){return typeof Me=="object"&&Me!==null&&Me.key!=null?Ee(""+Me.key):$e.toString(36)}function ct(Me,$e,mt,Dt,Pe){var Fe=typeof Me;(Fe==="undefined"||Fe==="boolean")&&(Me=null);var ut=!1;if(Me===null)ut=!0;else switch(Fe){case"string":case"number":ut=!0;break;case"object":switch(Me.$$typeof){case o:case e:ut=!0}}if(ut)return ut=Me,Pe=Pe(ut),Me=Dt===""?"."+pe(ut,0):Dt,ye(Pe)?(mt="",Me!=null&&(mt=Me.replace(Be,"$&/")+"/"),ct(Pe,$e,mt,"",function(P){return P})):Pe!=null&&(L(Pe)&&(Pe=oe(Pe,mt+(!Pe.key||ut&&ut.key===Pe.key?"":(""+Pe.key).replace(Be,"$&/")+"/")+Me)),$e.push(Pe)),1;if(ut=0,Dt=Dt===""?".":Dt+":",ye(Me))for(var W=0;W<Me.length;W++){Fe=Me[W];var Q=Dt+pe(Fe,W);ut+=ct(Fe,$e,mt,Q,Pe)}else if(Q=y(Me),typeof Q=="function")for(Me=Q.call(Me),W=0;!(Fe=Me.next()).done;)Fe=Fe.value,Q=Dt+pe(Fe,W++),ut+=ct(Fe,$e,mt,Q,Pe);else if(Fe==="object")throw $e=String(Me),Error("Objects are not valid as a React child (found: "+($e==="[object Object]"?"object with keys {"+Object.keys(Me).join(", ")+"}":$e)+"). If you meant to render a collection of children, use an array instead.");return ut}function Ye(Me,$e,mt){if(Me==null)return Me;var Dt=[],Pe=0;return ct(Me,Dt,"","",function(Fe){return $e.call(mt,Fe,Pe++)}),Dt}function Le(Me){if(Me._status===-1){var $e=Me._result;$e=$e(),$e.then(function(mt){(Me._status===0||Me._status===-1)&&(Me._status=1,Me._result=mt)},function(mt){(Me._status===0||Me._status===-1)&&(Me._status=2,Me._result=mt)}),Me._status===-1&&(Me._status=0,Me._result=$e)}if(Me._status===1)return Me._result.default;throw Me._result}var Je={current:null},Ge={transition:null},tt={ReactCurrentDispatcher:Je,ReactCurrentBatchConfig:Ge,ReactCurrentOwner:F};function Ze(){throw Error("act(...) is not supported in production builds of React.")}return gr.Children={map:Ye,forEach:function(Me,$e,mt){Ye(Me,function(){$e.apply(this,arguments)},mt)},count:function(Me){var $e=0;return Ye(Me,function(){$e++}),$e},toArray:function(Me){return Ye(Me,function($e){return $e})||[]},only:function(Me){if(!L(Me))throw Error("React.Children.only expected to receive a single React element child.");return Me}},gr.Component=R,gr.Fragment=t,gr.Profiler=r,gr.PureComponent=Y,gr.StrictMode=n,gr.Suspense=f,gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tt,gr.act=Ze,gr.cloneElement=function(Me,$e,mt){if(Me==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Me+".");var Dt=b({},Me.props),Pe=Me.key,Fe=Me.ref,ut=Me._owner;if($e!=null){if($e.ref!==void 0&&(Fe=$e.ref,ut=F.current),$e.key!==void 0&&(Pe=""+$e.key),Me.type&&Me.type.defaultProps)var W=Me.type.defaultProps;for(Q in $e)Re.call($e,Q)&&!k.hasOwnProperty(Q)&&(Dt[Q]=$e[Q]===void 0&&W!==void 0?W[Q]:$e[Q])}var Q=arguments.length-2;if(Q===1)Dt.children=mt;else if(1<Q){W=Array(Q);for(var P=0;P<Q;P++)W[P]=arguments[P+2];Dt.children=W}return{$$typeof:o,type:Me.type,key:Pe,ref:Fe,props:Dt,_owner:ut}},gr.createContext=function(Me){return Me={$$typeof:l,_currentValue:Me,_currentValue2:Me,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Me.Provider={$$typeof:i,_context:Me},Me.Consumer=Me},gr.createElement=j,gr.createFactory=function(Me){var $e=j.bind(null,Me);return $e.type=Me,$e},gr.createRef=function(){return{current:null}},gr.forwardRef=function(Me){return{$$typeof:c,render:Me}},gr.isValidElement=L,gr.lazy=function(Me){return{$$typeof:g,_payload:{_status:-1,_result:Me},_init:Le}},gr.memo=function(Me,$e){return{$$typeof:h,type:Me,compare:$e===void 0?null:$e}},gr.startTransition=function(Me){var $e=Ge.transition;Ge.transition={};try{Me()}finally{Ge.transition=$e}},gr.unstable_act=Ze,gr.useCallback=function(Me,$e){return Je.current.useCallback(Me,$e)},gr.useContext=function(Me){return Je.current.useContext(Me)},gr.useDebugValue=function(){},gr.useDeferredValue=function(Me){return Je.current.useDeferredValue(Me)},gr.useEffect=function(Me,$e){return Je.current.useEffect(Me,$e)},gr.useId=function(){return Je.current.useId()},gr.useImperativeHandle=function(Me,$e,mt){return Je.current.useImperativeHandle(Me,$e,mt)},gr.useInsertionEffect=function(Me,$e){return Je.current.useInsertionEffect(Me,$e)},gr.useLayoutEffect=function(Me,$e){return Je.current.useLayoutEffect(Me,$e)},gr.useMemo=function(Me,$e){return Je.current.useMemo(Me,$e)},gr.useReducer=function(Me,$e,mt){return Je.current.useReducer(Me,$e,mt)},gr.useRef=function(Me){return Je.current.useRef(Me)},gr.useState=function(Me){return Je.current.useState(Me)},gr.useSyncExternalStore=function(Me,$e,mt){return Je.current.useSyncExternalStore(Me,$e,mt)},gr.useTransition=function(){return Je.current.useTransition()},gr.version="18.3.1",gr}var cy;function mp(){return cy||(cy=1,Kg.exports=JT()),Kg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy;function eS(){if(dy)return wd;dy=1;var o=mp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(c,f,h){var g,p={},y=null,T=null;h!==void 0&&(y=""+h),f.key!==void 0&&(y=""+f.key),f.ref!==void 0&&(T=f.ref);for(g in f)n.call(f,g)&&!i.hasOwnProperty(g)&&(p[g]=f[g]);if(c&&c.defaultProps)for(g in f=c.defaultProps,f)p[g]===void 0&&(p[g]=f[g]);return{$$typeof:e,type:c,key:y,ref:T,props:p,_owner:r.current}}return wd.Fragment=t,wd.jsx=l,wd.jsxs=l,wd}var fy;function tS(){return fy||(fy=1,Vg.exports=eS()),Vg.exports}var O=tS(),ze=mp();const ui=fv(ze),hv=ZT({__proto__:null,default:ui},[ze]);var dh={},Yg={exports:{}},aa={},Wg={exports:{}},Xg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hy;function nS(){return hy||(hy=1,function(o){function e(Ge,tt){var Ze=Ge.length;Ge.push(tt);e:for(;0<Ze;){var Me=Ze-1>>>1,$e=Ge[Me];if(0<r($e,tt))Ge[Me]=tt,Ge[Ze]=$e,Ze=Me;else break e}}function t(Ge){return Ge.length===0?null:Ge[0]}function n(Ge){if(Ge.length===0)return null;var tt=Ge[0],Ze=Ge.pop();if(Ze!==tt){Ge[0]=Ze;e:for(var Me=0,$e=Ge.length,mt=$e>>>1;Me<mt;){var Dt=2*(Me+1)-1,Pe=Ge[Dt],Fe=Dt+1,ut=Ge[Fe];if(0>r(Pe,Ze))Fe<$e&&0>r(ut,Pe)?(Ge[Me]=ut,Ge[Fe]=Ze,Me=Fe):(Ge[Me]=Pe,Ge[Dt]=Ze,Me=Dt);else if(Fe<$e&&0>r(ut,Ze))Ge[Me]=ut,Ge[Fe]=Ze,Me=Fe;else break e}}return tt}function r(Ge,tt){var Ze=Ge.sortIndex-tt.sortIndex;return Ze!==0?Ze:Ge.id-tt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;o.unstable_now=function(){return i.now()}}else{var l=Date,c=l.now();o.unstable_now=function(){return l.now()-c}}var f=[],h=[],g=1,p=null,y=3,T=!1,b=!1,w=!1,R=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(Ge){for(var tt=t(h);tt!==null;){if(tt.callback===null)n(h);else if(tt.startTime<=Ge)n(h),tt.sortIndex=tt.expirationTime,e(f,tt);else break;tt=t(h)}}function ye(Ge){if(w=!1,Z(Ge),!b)if(t(f)!==null)b=!0,Le(Re);else{var tt=t(h);tt!==null&&Je(ye,tt.startTime-Ge)}}function Re(Ge,tt){b=!1,w&&(w=!1,M(j),j=-1),T=!0;var Ze=y;try{for(Z(tt),p=t(f);p!==null&&(!(p.expirationTime>tt)||Ge&&!Ee());){var Me=p.callback;if(typeof Me=="function"){p.callback=null,y=p.priorityLevel;var $e=Me(p.expirationTime<=tt);tt=o.unstable_now(),typeof $e=="function"?p.callback=$e:p===t(f)&&n(f),Z(tt)}else n(f);p=t(f)}if(p!==null)var mt=!0;else{var Dt=t(h);Dt!==null&&Je(ye,Dt.startTime-tt),mt=!1}return mt}finally{p=null,y=Ze,T=!1}}var F=!1,k=null,j=-1,oe=5,L=-1;function Ee(){return!(o.unstable_now()-L<oe)}function Be(){if(k!==null){var Ge=o.unstable_now();L=Ge;var tt=!0;try{tt=k(!0,Ge)}finally{tt?pe():(F=!1,k=null)}}else F=!1}var pe;if(typeof Y=="function")pe=function(){Y(Be)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,Ye=ct.port2;ct.port1.onmessage=Be,pe=function(){Ye.postMessage(null)}}else pe=function(){R(Be,0)};function Le(Ge){k=Ge,F||(F=!0,pe())}function Je(Ge,tt){j=R(function(){Ge(o.unstable_now())},tt)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(Ge){Ge.callback=null},o.unstable_continueExecution=function(){b||T||(b=!0,Le(Re))},o.unstable_forceFrameRate=function(Ge){0>Ge||125<Ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<Ge?Math.floor(1e3/Ge):5},o.unstable_getCurrentPriorityLevel=function(){return y},o.unstable_getFirstCallbackNode=function(){return t(f)},o.unstable_next=function(Ge){switch(y){case 1:case 2:case 3:var tt=3;break;default:tt=y}var Ze=y;y=tt;try{return Ge()}finally{y=Ze}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(Ge,tt){switch(Ge){case 1:case 2:case 3:case 4:case 5:break;default:Ge=3}var Ze=y;y=Ge;try{return tt()}finally{y=Ze}},o.unstable_scheduleCallback=function(Ge,tt,Ze){var Me=o.unstable_now();switch(typeof Ze=="object"&&Ze!==null?(Ze=Ze.delay,Ze=typeof Ze=="number"&&0<Ze?Me+Ze:Me):Ze=Me,Ge){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=Ze+$e,Ge={id:g++,callback:tt,priorityLevel:Ge,startTime:Ze,expirationTime:$e,sortIndex:-1},Ze>Me?(Ge.sortIndex=Ze,e(h,Ge),t(f)===null&&Ge===t(h)&&(w?(M(j),j=-1):w=!0,Je(ye,Ze-Me))):(Ge.sortIndex=$e,e(f,Ge),b||T||(b=!0,Le(Re))),Ge},o.unstable_shouldYield=Ee,o.unstable_wrapCallback=function(Ge){var tt=y;return function(){var Ze=y;y=tt;try{return Ge.apply(this,arguments)}finally{y=Ze}}}}(Xg)),Xg}var gy;function rS(){return gy||(gy=1,Wg.exports=nS()),Wg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my;function iS(){if(my)return aa;my=1;var o=mp(),e=rS();function t(u){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+u,v=1;v<arguments.length;v++)d+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function i(u,d){l(u,d),l(u+"Capture",d)}function l(u,d){for(r[u]=d,u=0;u<d.length;u++)n.add(d[u])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},p={};function y(u){return f.call(p,u)?!0:f.call(g,u)?!1:h.test(u)?p[u]=!0:(g[u]=!0,!1)}function T(u,d,v,A){if(v!==null&&v.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return A?!1:v!==null?!v.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function b(u,d,v,A){if(d===null||typeof d>"u"||T(u,d,v,A))return!0;if(A)return!1;if(v!==null)switch(v.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function w(u,d,v,A,q,le,De){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=A,this.attributeNamespace=q,this.mustUseProperty=v,this.propertyName=u,this.type=d,this.sanitizeURL=le,this.removeEmptyString=De}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){R[u]=new w(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var d=u[0];R[d]=new w(d,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){R[u]=new w(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){R[u]=new w(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){R[u]=new w(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){R[u]=new w(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){R[u]=new w(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){R[u]=new w(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){R[u]=new w(u,5,!1,u.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function Y(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var d=u.replace(M,Y);R[d]=new w(d,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var d=u.replace(M,Y);R[d]=new w(d,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var d=u.replace(M,Y);R[d]=new w(d,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){R[u]=new w(u,1,!1,u.toLowerCase(),null,!1,!1)}),R.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){R[u]=new w(u,1,!1,u.toLowerCase(),null,!0,!0)});function Z(u,d,v,A){var q=R.hasOwnProperty(d)?R[d]:null;(q!==null?q.type!==0:A||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(b(d,v,q,A)&&(v=null),A||q===null?y(d)&&(v===null?u.removeAttribute(d):u.setAttribute(d,""+v)):q.mustUseProperty?u[q.propertyName]=v===null?q.type===3?!1:"":v:(d=q.attributeName,A=q.attributeNamespace,v===null?u.removeAttribute(d):(q=q.type,v=q===3||q===4&&v===!0?"":""+v,A?u.setAttributeNS(A,d,v):u.setAttribute(d,v))))}var ye=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Re=Symbol.for("react.element"),F=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),Ee=Symbol.for("react.context"),Be=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),ct=Symbol.for("react.suspense_list"),Ye=Symbol.for("react.memo"),Le=Symbol.for("react.lazy"),Je=Symbol.for("react.offscreen"),Ge=Symbol.iterator;function tt(u){return u===null||typeof u!="object"?null:(u=Ge&&u[Ge]||u["@@iterator"],typeof u=="function"?u:null)}var Ze=Object.assign,Me;function $e(u){if(Me===void 0)try{throw Error()}catch(v){var d=v.stack.trim().match(/\n( *(at )?)/);Me=d&&d[1]||""}return`
`+Me+u}var mt=!1;function Dt(u,d){if(!u||mt)return"";mt=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Mt){var A=Mt}Reflect.construct(u,[],d)}else{try{d.call()}catch(Mt){A=Mt}u.call(d.prototype)}else{try{throw Error()}catch(Mt){A=Mt}u()}}catch(Mt){if(Mt&&A&&typeof Mt.stack=="string"){for(var q=Mt.stack.split(`
`),le=A.stack.split(`
`),De=q.length-1,Qe=le.length-1;1<=De&&0<=Qe&&q[De]!==le[Qe];)Qe--;for(;1<=De&&0<=Qe;De--,Qe--)if(q[De]!==le[Qe]){if(De!==1||Qe!==1)do if(De--,Qe--,0>Qe||q[De]!==le[Qe]){var lt=`
`+q[De].replace(" at new "," at ");return u.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",u.displayName)),lt}while(1<=De&&0<=Qe);break}}}finally{mt=!1,Error.prepareStackTrace=v}return(u=u?u.displayName||u.name:"")?$e(u):""}function Pe(u){switch(u.tag){case 5:return $e(u.type);case 16:return $e("Lazy");case 13:return $e("Suspense");case 19:return $e("SuspenseList");case 0:case 2:case 15:return u=Dt(u.type,!1),u;case 11:return u=Dt(u.type.render,!1),u;case 1:return u=Dt(u.type,!0),u;default:return""}}function Fe(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case k:return"Fragment";case F:return"Portal";case oe:return"Profiler";case j:return"StrictMode";case pe:return"Suspense";case ct:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case Ee:return(u.displayName||"Context")+".Consumer";case L:return(u._context.displayName||"Context")+".Provider";case Be:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case Ye:return d=u.displayName||null,d!==null?d:Fe(u.type)||"Memo";case Le:d=u._payload,u=u._init;try{return Fe(u(d))}catch{}}return null}function ut(u){var d=u.type;switch(u.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=d.render,u=u.displayName||u.name||"",d.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fe(d);case 8:return d===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function W(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Q(u){var d=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function P(u){var d=Q(u)?"checked":"value",v=Object.getOwnPropertyDescriptor(u.constructor.prototype,d),A=""+u[d];if(!u.hasOwnProperty(d)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var q=v.get,le=v.set;return Object.defineProperty(u,d,{configurable:!0,get:function(){return q.call(this)},set:function(De){A=""+De,le.call(this,De)}}),Object.defineProperty(u,d,{enumerable:v.enumerable}),{getValue:function(){return A},setValue:function(De){A=""+De},stopTracking:function(){u._valueTracker=null,delete u[d]}}}}function H(u){u._valueTracker||(u._valueTracker=P(u))}function be(u){if(!u)return!1;var d=u._valueTracker;if(!d)return!0;var v=d.getValue(),A="";return u&&(A=Q(u)?u.checked?"true":"false":u.value),u=A,u!==v?(d.setValue(u),!0):!1}function ue(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function Ue(u,d){var v=d.checked;return Ze({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??u._wrapperState.initialChecked})}function et(u,d){var v=d.defaultValue==null?"":d.defaultValue,A=d.checked!=null?d.checked:d.defaultChecked;v=W(d.value!=null?d.value:v),u._wrapperState={initialChecked:A,initialValue:v,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function qe(u,d){d=d.checked,d!=null&&Z(u,"checked",d,!1)}function Xe(u,d){qe(u,d);var v=W(d.value),A=d.type;if(v!=null)A==="number"?(v===0&&u.value===""||u.value!=v)&&(u.value=""+v):u.value!==""+v&&(u.value=""+v);else if(A==="submit"||A==="reset"){u.removeAttribute("value");return}d.hasOwnProperty("value")?it(u,d.type,v):d.hasOwnProperty("defaultValue")&&it(u,d.type,W(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(u.defaultChecked=!!d.defaultChecked)}function He(u,d,v){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var A=d.type;if(!(A!=="submit"&&A!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+u._wrapperState.initialValue,v||d===u.value||(u.value=d),u.defaultValue=d}v=u.name,v!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,v!==""&&(u.name=v)}function it(u,d,v){(d!=="number"||ue(u.ownerDocument)!==u)&&(v==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+v&&(u.defaultValue=""+v))}var bt=Array.isArray;function ht(u,d,v,A){if(u=u.options,d){d={};for(var q=0;q<v.length;q++)d["$"+v[q]]=!0;for(v=0;v<u.length;v++)q=d.hasOwnProperty("$"+u[v].value),u[v].selected!==q&&(u[v].selected=q),q&&A&&(u[v].defaultSelected=!0)}else{for(v=""+W(v),d=null,q=0;q<u.length;q++){if(u[q].value===v){u[q].selected=!0,A&&(u[q].defaultSelected=!0);return}d!==null||u[q].disabled||(d=u[q])}d!==null&&(d.selected=!0)}}function Ct(u,d){if(d.dangerouslySetInnerHTML!=null)throw Error(t(91));return Ze({},d,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function pn(u,d){var v=d.value;if(v==null){if(v=d.children,d=d.defaultValue,v!=null){if(d!=null)throw Error(t(92));if(bt(v)){if(1<v.length)throw Error(t(93));v=v[0]}d=v}d==null&&(d=""),v=d}u._wrapperState={initialValue:W(v)}}function Xt(u,d){var v=W(d.value),A=W(d.defaultValue);v!=null&&(v=""+v,v!==u.value&&(u.value=v),d.defaultValue==null&&u.defaultValue!==v&&(u.defaultValue=v)),A!=null&&(u.defaultValue=""+A)}function fn(u){var d=u.textContent;d===u._wrapperState.initialValue&&d!==""&&d!==null&&(u.value=d)}function qt(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vn(u,d){return u==null||u==="http://www.w3.org/1999/xhtml"?qt(d):u==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var sr,wr=function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,v,A,q){MSApp.execUnsafeLocalFunction(function(){return u(d,v,A,q)})}:u}(function(u,d){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=d;else{for(sr=sr||document.createElement("div"),sr.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=sr.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;d.firstChild;)u.appendChild(d.firstChild)}});function Zr(u,d){if(d){var v=u.firstChild;if(v&&v===u.lastChild&&v.nodeType===3){v.nodeValue=d;return}}u.textContent=d}var Fr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ii=["Webkit","ms","Moz","O"];Object.keys(Fr).forEach(function(u){ii.forEach(function(d){d=d+u.charAt(0).toUpperCase()+u.substring(1),Fr[d]=Fr[u]})});function rn(u,d,v){return d==null||typeof d=="boolean"||d===""?"":v||typeof d!="number"||d===0||Fr.hasOwnProperty(u)&&Fr[u]?(""+d).trim():d+"px"}function Gt(u,d){u=u.style;for(var v in d)if(d.hasOwnProperty(v)){var A=v.indexOf("--")===0,q=rn(v,d[v],A);v==="float"&&(v="cssFloat"),A?u.setProperty(v,q):u[v]=q}}var zt=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kt(u,d){if(d){if(zt[u]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(t(137,u));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(t(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(t(61))}if(d.style!=null&&typeof d.style!="object")throw Error(t(62))}}function Jt(u,d){if(u.indexOf("-")===-1)return typeof d.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var en=null;function ln(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var dn=null,Pt=null,Lt=null;function un(u){if(u=_o(u)){if(typeof dn!="function")throw Error(t(280));var d=u.stateNode;d&&(d=Eu(d),dn(u.stateNode,u.type,d))}}function Kn(u){Pt?Lt?Lt.push(u):Lt=[u]:Pt=u}function Kt(){if(Pt){var u=Pt,d=Lt;if(Lt=Pt=null,un(u),d)for(u=0;u<d.length;u++)un(d[u])}}function Rn(u,d){return u(d)}function $n(){}var Pn=!1;function zn(u,d,v){if(Pn)return u(d,v);Pn=!0;try{return Rn(u,d,v)}finally{Pn=!1,(Pt!==null||Lt!==null)&&($n(),Kt())}}function er(u,d){var v=u.stateNode;if(v===null)return null;var A=Eu(v);if(A===null)return null;v=A[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(A=!A.disabled)||(u=u.type,A=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!A;break e;default:u=!1}if(u)return null;if(v&&typeof v!="function")throw Error(t(231,d,typeof v));return v}var wn=!1;if(c)try{var Nt={};Object.defineProperty(Nt,"passive",{get:function(){wn=!0}}),window.addEventListener("test",Nt,Nt),window.removeEventListener("test",Nt,Nt)}catch{wn=!1}function Tt(u,d,v,A,q,le,De,Qe,lt){var Mt=Array.prototype.slice.call(arguments,3);try{d.apply(v,Mt)}catch(vn){this.onError(vn)}}var an=!1,gn=null,Mn=!1,rr=null,Tr={onError:function(u){an=!0,gn=u}};function or(u,d,v,A,q,le,De,Qe,lt){an=!1,gn=null,Tt.apply(Tr,arguments)}function Ar(u,d,v,A,q,le,De,Qe,lt){if(or.apply(this,arguments),an){if(an){var Mt=gn;an=!1,gn=null}else throw Error(t(198));Mn||(Mn=!0,rr=Mt)}}function Rr(u){var d=u,v=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,(d.flags&4098)!==0&&(v=d.return),u=d.return;while(u)}return d.tag===3?v:null}function Lr(u){if(u.tag===13){var d=u.memoizedState;if(d===null&&(u=u.alternate,u!==null&&(d=u.memoizedState)),d!==null)return d.dehydrated}return null}function ji(u){if(Rr(u)!==u)throw Error(t(188))}function qi(u){var d=u.alternate;if(!d){if(d=Rr(u),d===null)throw Error(t(188));return d!==u?null:u}for(var v=u,A=d;;){var q=v.return;if(q===null)break;var le=q.alternate;if(le===null){if(A=q.return,A!==null){v=A;continue}break}if(q.child===le.child){for(le=q.child;le;){if(le===v)return ji(q),u;if(le===A)return ji(q),d;le=le.sibling}throw Error(t(188))}if(v.return!==A.return)v=q,A=le;else{for(var De=!1,Qe=q.child;Qe;){if(Qe===v){De=!0,v=q,A=le;break}if(Qe===A){De=!0,A=q,v=le;break}Qe=Qe.sibling}if(!De){for(Qe=le.child;Qe;){if(Qe===v){De=!0,v=le,A=q;break}if(Qe===A){De=!0,A=le,v=q;break}Qe=Qe.sibling}if(!De)throw Error(t(189))}}if(v.alternate!==A)throw Error(t(190))}if(v.tag!==3)throw Error(t(188));return v.stateNode.current===v?u:d}function wa(u){return u=qi(u),u!==null?ai(u):null}function ai(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var d=ai(u);if(d!==null)return d;u=u.sibling}return null}var mi=e.unstable_scheduleCallback,ci=e.unstable_cancelCallback,jl=e.unstable_shouldYield,ql=e.unstable_requestPaint,qr=e.unstable_now,Gl=e.unstable_getCurrentPriorityLevel,us=e.unstable_ImmediatePriority,oo=e.unstable_UserBlockingPriority,$t=e.unstable_NormalPriority,Sn=e.unstable_LowPriority,On=e.unstable_IdlePriority,ar=null,Wn=null;function Yr(u){if(Wn&&typeof Wn.onCommitFiberRoot=="function")try{Wn.onCommitFiberRoot(ar,u,void 0,(u.current.flags&128)===128)}catch{}}var lr=Math.clz32?Math.clz32:ur,fr=Math.log,hr=Math.LN2;function ur(u){return u>>>=0,u===0?32:31-(fr(u)/hr|0)|0}var Er=64,Gi=4194304;function Wr(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function ua(u,d){var v=u.pendingLanes;if(v===0)return 0;var A=0,q=u.suspendedLanes,le=u.pingedLanes,De=v&268435455;if(De!==0){var Qe=De&~q;Qe!==0?A=Wr(Qe):(le&=De,le!==0&&(A=Wr(le)))}else De=v&~q,De!==0?A=Wr(De):le!==0&&(A=Wr(le));if(A===0)return 0;if(d!==0&&d!==A&&(d&q)===0&&(q=A&-A,le=d&-d,q>=le||q===16&&(le&4194240)!==0))return d;if((A&4)!==0&&(A|=v&16),d=u.entangledLanes,d!==0)for(u=u.entanglements,d&=A;0<d;)v=31-lr(d),q=1<<v,A|=u[v],d&=~q;return A}function cs(u,d){switch(u){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $l(u,d){for(var v=u.suspendedLanes,A=u.pingedLanes,q=u.expirationTimes,le=u.pendingLanes;0<le;){var De=31-lr(le),Qe=1<<De,lt=q[De];lt===-1?((Qe&v)===0||(Qe&A)!==0)&&(q[De]=cs(Qe,d)):lt<=d&&(u.expiredLanes|=Qe),le&=~Qe}}function ds(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function Mi(){var u=Er;return Er<<=1,(Er&4194240)===0&&(Er=64),u}function Ia(u){for(var d=[],v=0;31>v;v++)d.push(u);return d}function fs(u,d,v){u.pendingLanes|=d,d!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,d=31-lr(d),u[d]=v}function Xi(u,d){var v=u.pendingLanes&~d;u.pendingLanes=d,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=d,u.mutableReadLanes&=d,u.entangledLanes&=d,d=u.entanglements;var A=u.eventTimes;for(u=u.expirationTimes;0<v;){var q=31-lr(v),le=1<<q;d[q]=0,A[q]=-1,u[q]=-1,v&=~le}}function lo(u,d){var v=u.entangledLanes|=d;for(u=u.entanglements;v;){var A=31-lr(v),q=1<<A;q&d|u[A]&d&&(u[A]|=d),v&=~q}}var br=0;function uo(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var co,fo,Xo,ho,Qo,Sr=!1,Aa=[],di=null,ki=null,ca=null,fi=new Map,hs=new Map,si=[],$d="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hl(u,d){switch(u){case"focusin":case"focusout":di=null;break;case"dragenter":case"dragleave":ki=null;break;case"mouseover":case"mouseout":ca=null;break;case"pointerover":case"pointerout":fi.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":hs.delete(d.pointerId)}}function Ps(u,d,v,A,q,le){return u===null||u.nativeEvent!==le?(u={blockedOn:d,domEventName:v,eventSystemFlags:A,nativeEvent:le,targetContainers:[q]},d!==null&&(d=_o(d),d!==null&&fo(d)),u):(u.eventSystemFlags|=A,d=u.targetContainers,q!==null&&d.indexOf(q)===-1&&d.push(q),u)}function Hd(u,d,v,A,q){switch(d){case"focusin":return di=Ps(di,u,d,v,A,q),!0;case"dragenter":return ki=Ps(ki,u,d,v,A,q),!0;case"mouseover":return ca=Ps(ca,u,d,v,A,q),!0;case"pointerover":var le=q.pointerId;return fi.set(le,Ps(fi.get(le)||null,u,d,v,A,q)),!0;case"gotpointercapture":return le=q.pointerId,hs.set(le,Ps(hs.get(le)||null,u,d,v,A,q)),!0}return!1}function Zo(u){var d=Hs(u.target);if(d!==null){var v=Rr(d);if(v!==null){if(d=v.tag,d===13){if(d=Lr(v),d!==null){u.blockedOn=d,Qo(u.priority,function(){Xo(v)});return}}else if(d===3&&v.stateNode.current.memoizedState.isDehydrated){u.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Ms(u){if(u.blockedOn!==null)return!1;for(var d=u.targetContainers;0<d.length;){var v=zs(u.domEventName,u.eventSystemFlags,d[0],u.nativeEvent);if(v===null){v=u.nativeEvent;var A=new v.constructor(v.type,v);en=A,v.target.dispatchEvent(A),en=null}else return d=_o(v),d!==null&&fo(d),u.blockedOn=v,!1;d.shift()}return!0}function Vd(u,d,v){Ms(u)&&v.delete(d)}function Kd(){Sr=!1,di!==null&&Ms(di)&&(di=null),ki!==null&&Ms(ki)&&(ki=null),ca!==null&&Ms(ca)&&(ca=null),fi.forEach(Vd),hs.forEach(Vd)}function Jo(u,d){u.blockedOn===d&&(u.blockedOn=null,Sr||(Sr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Kd)))}function Os(u){function d(q){return Jo(q,u)}if(0<Aa.length){Jo(Aa[0],u);for(var v=1;v<Aa.length;v++){var A=Aa[v];A.blockedOn===u&&(A.blockedOn=null)}}for(di!==null&&Jo(di,u),ki!==null&&Jo(ki,u),ca!==null&&Jo(ca,u),fi.forEach(d),hs.forEach(d),v=0;v<si.length;v++)A=si[v],A.blockedOn===u&&(A.blockedOn=null);for(;0<si.length&&(v=si[0],v.blockedOn===null);)Zo(v),v.blockedOn===null&&si.shift()}var Fs=ye.ReactCurrentBatchConfig,Vl=!0;function vg(u,d,v,A){var q=br,le=Fs.transition;Fs.transition=null;try{br=1,Kl(u,d,v,A)}finally{br=q,Fs.transition=le}}function Yd(u,d,v,A){var q=br,le=Fs.transition;Fs.transition=null;try{br=4,Kl(u,d,v,A)}finally{br=q,Fs.transition=le}}function Kl(u,d,v,A){if(Vl){var q=zs(u,d,v,A);if(q===null)ll(u,d,A,el,v),Hl(u,A);else if(Hd(q,u,d,v,A))A.stopPropagation();else if(Hl(u,A),d&4&&-1<$d.indexOf(u)){for(;q!==null;){var le=_o(q);if(le!==null&&co(le),le=zs(u,d,v,A),le===null&&ll(u,d,A,el,v),le===q)break;q=le}q!==null&&A.stopPropagation()}else ll(u,d,A,null,v)}}var el=null;function zs(u,d,v,A){if(el=null,u=ln(A),u=Hs(u),u!==null)if(d=Rr(u),d===null)u=null;else if(v=d.tag,v===13){if(u=Lr(d),u!==null)return u;u=null}else if(v===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;u=null}else d!==u&&(u=null);return el=u,null}function mc(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gl()){case us:return 1;case oo:return 4;case $t:case Sn:return 16;case On:return 536870912;default:return 16}default:return 16}}var da=null,kr=null,Us=null;function pi(){if(Us)return Us;var u,d=kr,v=d.length,A,q="value"in da?da.value:da.textContent,le=q.length;for(u=0;u<v&&d[u]===q[u];u++);var De=v-u;for(A=1;A<=De&&d[v-A]===q[le-A];A++);return Us=q.slice(u,1<A?1-A:void 0)}function go(u){var d=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&d===13&&(u=13)):u=d,u===10&&(u=13),32<=u||u===13?u:0}function tl(){return!0}function pc(){return!1}function Oi(u){function d(v,A,q,le,De){this._reactName=v,this._targetInst=q,this.type=A,this.nativeEvent=le,this.target=De,this.currentTarget=null;for(var Qe in u)u.hasOwnProperty(Qe)&&(v=u[Qe],this[Qe]=v?v(le):le[Qe]);return this.isDefaultPrevented=(le.defaultPrevented!=null?le.defaultPrevented:le.returnValue===!1)?tl:pc,this.isPropagationStopped=pc,this}return Ze(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=tl)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=tl)},persist:function(){},isPersistent:tl}),d}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yl=Oi(Bs),js=Ze({},Bs,{view:0,detail:0}),Wd=Oi(js),Wl,yc,nl,Xl=Ze({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jl,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==nl&&(nl&&u.type==="mousemove"?(Wl=u.screenX-nl.screenX,yc=u.screenY-nl.screenY):yc=Wl=0,nl=u),Wl)},movementY:function(u){return"movementY"in u?u.movementY:yc}}),Ql=Oi(Xl),Eg=Ze({},Xl,{dataTransfer:0}),Xd=Oi(Eg),Qd=Ze({},js,{relatedTarget:0}),Zl=Oi(Qd),Zd=Ze({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),bg=Oi(Zd),Jd=Ze({},Bs,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),ef=Oi(Jd),tf=Ze({},Bs,{data:0}),vc=Oi(tf),Ec={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tg(u){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(u):(u=nf[u])?!!d[u]:!1}function Jl(){return Tg}var rf=Ze({},js,{key:function(u){if(u.key){var d=Ec[u.key]||u.key;if(d!=="Unidentified")return d}return u.type==="keypress"?(u=go(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?bc[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jl,charCode:function(u){return u.type==="keypress"?go(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?go(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),af=Oi(rf),mo=Ze({},Xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sf=Oi(mo),of=Ze({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jl}),Sg=Oi(of),lf=Ze({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),_g=Oi(lf),xg=Ze({},Xl,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),wg=Oi(xg),Tc=[9,13,27,32],Sc=c&&"CompositionEvent"in window,po=null;c&&"documentMode"in document&&(po=document.documentMode);var Ig=c&&"TextEvent"in window&&!po,yo=c&&(!Sc||po&&8<po&&11>=po),eu=" ",_c=!1;function rl(u,d){switch(u){case"keyup":return Tc.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xc(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var vo=!1;function uf(u,d){switch(u){case"compositionend":return xc(d);case"keypress":return d.which!==32?null:(_c=!0,eu);case"textInput":return u=d.data,u===eu&&_c?null:u;default:return null}}function Ag(u,d){if(vo)return u==="compositionend"||!Sc&&rl(u,d)?(u=pi(),Us=kr=da=null,vo=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return yo&&d.locale!=="ko"?null:d.data;default:return null}}var cf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tu(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d==="input"?!!cf[u.type]:d==="textarea"}function df(u,d,v,A){Kn(A),d=ul(d,"onChange"),0<d.length&&(v=new Yl("onChange","change",null,v,A),u.push({event:v,listeners:d}))}var Eo=null,il=null;function kg(u){Ef(u,0)}function nu(u){var d=xo(u);if(be(d))return u}function ff(u,d){if(u==="change")return d}var ru=!1;if(c){var iu;if(c){var wc="oninput"in document;if(!wc){var Ic=document.createElement("div");Ic.setAttribute("oninput","return;"),wc=typeof Ic.oninput=="function"}iu=wc}else iu=!1;ru=iu&&(!document.documentMode||9<document.documentMode)}function Ac(){Eo&&(Eo.detachEvent("onpropertychange",au),il=Eo=null)}function au(u){if(u.propertyName==="value"&&nu(il)){var d=[];df(d,il,u,ln(u)),zn(kg,d)}}function kc(u,d,v){u==="focusin"?(Ac(),Eo=d,il=v,Eo.attachEvent("onpropertychange",au)):u==="focusout"&&Ac()}function Rg(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return nu(il)}function hf(u,d){if(u==="click")return nu(d)}function Cg(u,d){if(u==="input"||u==="change")return nu(d)}function gf(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var fa=typeof Object.is=="function"?Object.is:gf;function ka(u,d){if(fa(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var v=Object.keys(u),A=Object.keys(d);if(v.length!==A.length)return!1;for(A=0;A<v.length;A++){var q=v[A];if(!f.call(d,q)||!fa(u[q],d[q]))return!1}return!0}function Rc(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function Cc(u,d){var v=Rc(u);u=0;for(var A;v;){if(v.nodeType===3){if(A=u+v.textContent.length,u<=d&&A>=d)return{node:v,offset:d-u};u=A}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=Rc(v)}}function Nc(u,d){return u&&d?u===d?!0:u&&u.nodeType===3?!1:d&&d.nodeType===3?Nc(u,d.parentNode):"contains"in u?u.contains(d):u.compareDocumentPosition?!!(u.compareDocumentPosition(d)&16):!1:!1}function Dc(){for(var u=window,d=ue();d instanceof u.HTMLIFrameElement;){try{var v=typeof d.contentWindow.location.href=="string"}catch{v=!1}if(v)u=d.contentWindow;else break;d=ue(u.document)}return d}function su(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d&&(d==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||d==="textarea"||u.contentEditable==="true")}function Ng(u){var d=Dc(),v=u.focusedElem,A=u.selectionRange;if(d!==v&&v&&v.ownerDocument&&Nc(v.ownerDocument.documentElement,v)){if(A!==null&&su(v)){if(d=A.start,u=A.end,u===void 0&&(u=d),"selectionStart"in v)v.selectionStart=d,v.selectionEnd=Math.min(u,v.value.length);else if(u=(d=v.ownerDocument||document)&&d.defaultView||window,u.getSelection){u=u.getSelection();var q=v.textContent.length,le=Math.min(A.start,q);A=A.end===void 0?le:Math.min(A.end,q),!u.extend&&le>A&&(q=A,A=le,le=q),q=Cc(v,le);var De=Cc(v,A);q&&De&&(u.rangeCount!==1||u.anchorNode!==q.node||u.anchorOffset!==q.offset||u.focusNode!==De.node||u.focusOffset!==De.offset)&&(d=d.createRange(),d.setStart(q.node,q.offset),u.removeAllRanges(),le>A?(u.addRange(d),u.extend(De.node,De.offset)):(d.setEnd(De.node,De.offset),u.addRange(d)))}}for(d=[],u=v;u=u.parentNode;)u.nodeType===1&&d.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<d.length;v++)u=d[v],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var mf=c&&"documentMode"in document&&11>=document.documentMode,bo=null,Lc=null,To=null,ou=!1;function Pc(u,d,v){var A=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;ou||bo==null||bo!==ue(A)||(A=bo,"selectionStart"in A&&su(A)?A={start:A.selectionStart,end:A.selectionEnd}:(A=(A.ownerDocument&&A.ownerDocument.defaultView||window).getSelection(),A={anchorNode:A.anchorNode,anchorOffset:A.anchorOffset,focusNode:A.focusNode,focusOffset:A.focusOffset}),To&&ka(To,A)||(To=A,A=ul(Lc,"onSelect"),0<A.length&&(d=new Yl("onSelect","select",null,d,v),u.push({event:d,listeners:A}),d.target=bo)))}function lu(u,d){var v={};return v[u.toLowerCase()]=d.toLowerCase(),v["Webkit"+u]="webkit"+d,v["Moz"+u]="moz"+d,v}var Qi={animationend:lu("Animation","AnimationEnd"),animationiteration:lu("Animation","AnimationIteration"),animationstart:lu("Animation","AnimationStart"),transitionend:lu("Transition","TransitionEnd")},Ti={},qs={};c&&(qs=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function ha(u){if(Ti[u])return Ti[u];if(!Qi[u])return u;var d=Qi[u],v;for(v in d)if(d.hasOwnProperty(v)&&v in qs)return Ti[u]=d[v];return u}var pf=ha("animationend"),Mc=ha("animationiteration"),yf=ha("animationstart"),Ka=ha("transitionend"),vf=new Map,uu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ya(u,d){vf.set(u,d),i(d,[u])}for(var al=0;al<uu.length;al++){var Gs=uu[al],Oc=Gs.toLowerCase(),cu=Gs[0].toUpperCase()+Gs.slice(1);Ya(Oc,"on"+cu)}Ya(pf,"onAnimationEnd"),Ya(Mc,"onAnimationIteration"),Ya(yf,"onAnimationStart"),Ya("dblclick","onDoubleClick"),Ya("focusin","onFocus"),Ya("focusout","onBlur"),Ya(Ka,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),du=new Set("cancel close invalid load scroll toggle".split(" ").concat(gs));function sl(u,d,v){var A=u.type||"unknown-event";u.currentTarget=v,Ar(A,d,void 0,u),u.currentTarget=null}function Ef(u,d){d=(d&4)!==0;for(var v=0;v<u.length;v++){var A=u[v],q=A.event;A=A.listeners;e:{var le=void 0;if(d)for(var De=A.length-1;0<=De;De--){var Qe=A[De],lt=Qe.instance,Mt=Qe.currentTarget;if(Qe=Qe.listener,lt!==le&&q.isPropagationStopped())break e;sl(q,Qe,Mt),le=lt}else for(De=0;De<A.length;De++){if(Qe=A[De],lt=Qe.instance,Mt=Qe.currentTarget,Qe=Qe.listener,lt!==le&&q.isPropagationStopped())break e;sl(q,Qe,Mt),le=lt}}}if(Mn)throw u=rr,Mn=!1,rr=null,u}function Pr(u,d){var v=d[Bc];v===void 0&&(v=d[Bc]=new Set);var A=u+"__bubble";v.has(A)||(Fc(d,u,2,!1),v.add(A))}function fu(u,d,v){var A=0;d&&(A|=4),Fc(v,u,A,d)}var hu="_reactListening"+Math.random().toString(36).slice(2);function ol(u){if(!u[hu]){u[hu]=!0,n.forEach(function(v){v!=="selectionchange"&&(du.has(v)||fu(v,!1,u),fu(v,!0,u))});var d=u.nodeType===9?u:u.ownerDocument;d===null||d[hu]||(d[hu]=!0,fu("selectionchange",!1,d))}}function Fc(u,d,v,A){switch(mc(d)){case 1:var q=vg;break;case 4:q=Yd;break;default:q=Kl}v=q.bind(null,d,v,u),q=void 0,!wn||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(q=!0),A?q!==void 0?u.addEventListener(d,v,{capture:!0,passive:q}):u.addEventListener(d,v,!0):q!==void 0?u.addEventListener(d,v,{passive:q}):u.addEventListener(d,v,!1)}function ll(u,d,v,A,q){var le=A;if((d&1)===0&&(d&2)===0&&A!==null)e:for(;;){if(A===null)return;var De=A.tag;if(De===3||De===4){var Qe=A.stateNode.containerInfo;if(Qe===q||Qe.nodeType===8&&Qe.parentNode===q)break;if(De===4)for(De=A.return;De!==null;){var lt=De.tag;if((lt===3||lt===4)&&(lt=De.stateNode.containerInfo,lt===q||lt.nodeType===8&&lt.parentNode===q))return;De=De.return}for(;Qe!==null;){if(De=Hs(Qe),De===null)return;if(lt=De.tag,lt===5||lt===6){A=le=De;continue e}Qe=Qe.parentNode}}A=A.return}zn(function(){var Mt=le,vn=ln(v),En=[];e:{var mn=vf.get(u);if(mn!==void 0){var Ln=Yl,Un=u;switch(u){case"keypress":if(go(v)===0)break e;case"keydown":case"keyup":Ln=af;break;case"focusin":Un="focus",Ln=Zl;break;case"focusout":Un="blur",Ln=Zl;break;case"beforeblur":case"afterblur":Ln=Zl;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ln=Ql;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ln=Xd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ln=Sg;break;case pf:case Mc:case yf:Ln=bg;break;case Ka:Ln=_g;break;case"scroll":Ln=Wd;break;case"wheel":Ln=wg;break;case"copy":case"cut":case"paste":Ln=ef;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ln=sf}var qn=(d&4)!==0,li=!qn&&u==="scroll",It=qn?mn!==null?mn+"Capture":null:mn;qn=[];for(var dt=Mt,Rt;dt!==null;){Rt=dt;var xn=Rt.stateNode;if(Rt.tag===5&&xn!==null&&(Rt=xn,It!==null&&(xn=er(dt,It),xn!=null&&qn.push($s(dt,xn,Rt)))),li)break;dt=dt.return}0<qn.length&&(mn=new Ln(mn,Un,null,v,vn),En.push({event:mn,listeners:qn}))}}if((d&7)===0){e:{if(mn=u==="mouseover"||u==="pointerover",Ln=u==="mouseout"||u==="pointerout",mn&&v!==en&&(Un=v.relatedTarget||v.fromElement)&&(Hs(Un)||Un[Ra]))break e;if((Ln||mn)&&(mn=vn.window===vn?vn:(mn=vn.ownerDocument)?mn.defaultView||mn.parentWindow:window,Ln?(Un=v.relatedTarget||v.toElement,Ln=Mt,Un=Un?Hs(Un):null,Un!==null&&(li=Rr(Un),Un!==li||Un.tag!==5&&Un.tag!==6)&&(Un=null)):(Ln=null,Un=Mt),Ln!==Un)){if(qn=Ql,xn="onMouseLeave",It="onMouseEnter",dt="mouse",(u==="pointerout"||u==="pointerover")&&(qn=sf,xn="onPointerLeave",It="onPointerEnter",dt="pointer"),li=Ln==null?mn:xo(Ln),Rt=Un==null?mn:xo(Un),mn=new qn(xn,dt+"leave",Ln,v,vn),mn.target=li,mn.relatedTarget=Rt,xn=null,Hs(vn)===Mt&&(qn=new qn(It,dt+"enter",Un,v,vn),qn.target=Rt,qn.relatedTarget=li,xn=qn),li=xn,Ln&&Un)t:{for(qn=Ln,It=Un,dt=0,Rt=qn;Rt;Rt=So(Rt))dt++;for(Rt=0,xn=It;xn;xn=So(xn))Rt++;for(;0<dt-Rt;)qn=So(qn),dt--;for(;0<Rt-dt;)It=So(It),Rt--;for(;dt--;){if(qn===It||It!==null&&qn===It.alternate)break t;qn=So(qn),It=So(It)}qn=null}else qn=null;Ln!==null&&cl(En,mn,Ln,qn,!1),Un!==null&&li!==null&&cl(En,li,Un,qn,!0)}}e:{if(mn=Mt?xo(Mt):window,Ln=mn.nodeName&&mn.nodeName.toLowerCase(),Ln==="select"||Ln==="input"&&mn.type==="file")var Hn=ff;else if(tu(mn))if(ru)Hn=Cg;else{Hn=Rg;var Xn=kc}else(Ln=mn.nodeName)&&Ln.toLowerCase()==="input"&&(mn.type==="checkbox"||mn.type==="radio")&&(Hn=hf);if(Hn&&(Hn=Hn(u,Mt))){df(En,Hn,v,vn);break e}Xn&&Xn(u,mn,Mt),u==="focusout"&&(Xn=mn._wrapperState)&&Xn.controlled&&mn.type==="number"&&it(mn,"number",mn.value)}switch(Xn=Mt?xo(Mt):window,u){case"focusin":(tu(Xn)||Xn.contentEditable==="true")&&(bo=Xn,Lc=Mt,To=null);break;case"focusout":To=Lc=bo=null;break;case"mousedown":ou=!0;break;case"contextmenu":case"mouseup":case"dragend":ou=!1,Pc(En,v,vn);break;case"selectionchange":if(mf)break;case"keydown":case"keyup":Pc(En,v,vn)}var Qn;if(Sc)e:{switch(u){case"compositionstart":var Zn="onCompositionStart";break e;case"compositionend":Zn="onCompositionEnd";break e;case"compositionupdate":Zn="onCompositionUpdate";break e}Zn=void 0}else vo?rl(u,v)&&(Zn="onCompositionEnd"):u==="keydown"&&v.keyCode===229&&(Zn="onCompositionStart");Zn&&(yo&&v.locale!=="ko"&&(vo||Zn!=="onCompositionStart"?Zn==="onCompositionEnd"&&vo&&(Qn=pi()):(da=vn,kr="value"in da?da.value:da.textContent,vo=!0)),Xn=ul(Mt,Zn),0<Xn.length&&(Zn=new vc(Zn,u,null,v,vn),En.push({event:Zn,listeners:Xn}),Qn?Zn.data=Qn:(Qn=xc(v),Qn!==null&&(Zn.data=Qn)))),(Qn=Ig?uf(u,v):Ag(u,v))&&(Mt=ul(Mt,"onBeforeInput"),0<Mt.length&&(vn=new vc("onBeforeInput","beforeinput",null,v,vn),En.push({event:vn,listeners:Mt}),vn.data=Qn))}Ef(En,d)})}function $s(u,d,v){return{instance:u,listener:d,currentTarget:v}}function ul(u,d){for(var v=d+"Capture",A=[];u!==null;){var q=u,le=q.stateNode;q.tag===5&&le!==null&&(q=le,le=er(u,v),le!=null&&A.unshift($s(u,le,q)),le=er(u,d),le!=null&&A.push($s(u,le,q))),u=u.return}return A}function So(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function cl(u,d,v,A,q){for(var le=d._reactName,De=[];v!==null&&v!==A;){var Qe=v,lt=Qe.alternate,Mt=Qe.stateNode;if(lt!==null&&lt===A)break;Qe.tag===5&&Mt!==null&&(Qe=Mt,q?(lt=er(v,le),lt!=null&&De.unshift($s(v,lt,Qe))):q||(lt=er(v,le),lt!=null&&De.push($s(v,lt,Qe)))),v=v.return}De.length!==0&&u.push({event:d,listeners:De})}var bf=/\r\n?/g,Tf=/\u0000|\uFFFD/g;function Sf(u){return(typeof u=="string"?u:""+u).replace(bf,`
`).replace(Tf,"")}function dl(u,d,v){if(d=Sf(d),Sf(u)!==d&&v)throw Error(t(425))}function gu(){}var mu=null,zc=null;function pu(u,d){return u==="textarea"||u==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Uc=typeof setTimeout=="function"?setTimeout:void 0,_f=typeof clearTimeout=="function"?clearTimeout:void 0,xf=typeof Promise=="function"?Promise:void 0,wf=typeof queueMicrotask=="function"?queueMicrotask:typeof xf<"u"?function(u){return xf.resolve(null).then(u).catch(Dg)}:Uc;function Dg(u){setTimeout(function(){throw u})}function yu(u,d){var v=d,A=0;do{var q=v.nextSibling;if(u.removeChild(v),q&&q.nodeType===8)if(v=q.data,v==="/$"){if(A===0){u.removeChild(q),Os(d);return}A--}else v!=="$"&&v!=="$?"&&v!=="$!"||A++;v=q}while(v);Os(d)}function Wa(u){for(;u!=null;u=u.nextSibling){var d=u.nodeType;if(d===1||d===3)break;if(d===8){if(d=u.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return u}function If(u){u=u.previousSibling;for(var d=0;u;){if(u.nodeType===8){var v=u.data;if(v==="$"||v==="$!"||v==="$?"){if(d===0)return u;d--}else v==="/$"&&d++}u=u.previousSibling}return null}var ga=Math.random().toString(36).slice(2),ma="__reactFiber$"+ga,fl="__reactProps$"+ga,Ra="__reactContainer$"+ga,Bc="__reactEvents$"+ga,vu="__reactListeners$"+ga,Af="__reactHandles$"+ga;function Hs(u){var d=u[ma];if(d)return d;for(var v=u.parentNode;v;){if(d=v[Ra]||v[ma]){if(v=d.alternate,d.child!==null||v!==null&&v.child!==null)for(u=If(u);u!==null;){if(v=u[ma])return v;u=If(u)}return d}u=v,v=u.parentNode}return null}function _o(u){return u=u[ma]||u[Ra],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function xo(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(t(33))}function Eu(u){return u[fl]||null}var jc=[],wo=-1;function ms(u){return{current:u}}function zr(u){0>wo||(u.current=jc[wo],jc[wo]=null,wo--)}function _r(u,d){wo++,jc[wo]=u.current,u.current=d}var ps={},Si=ms(ps),Ri=ms(!1),ys=ps;function Io(u,d){var v=u.type.contextTypes;if(!v)return ps;var A=u.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===d)return A.__reactInternalMemoizedMaskedChildContext;var q={},le;for(le in v)q[le]=d[le];return A&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=d,u.__reactInternalMemoizedMaskedChildContext=q),q}function Ci(u){return u=u.childContextTypes,u!=null}function hl(){zr(Ri),zr(Si)}function kf(u,d,v){if(Si.current!==ps)throw Error(t(168));_r(Si,d),_r(Ri,v)}function qc(u,d,v){var A=u.stateNode;if(d=d.childContextTypes,typeof A.getChildContext!="function")return v;A=A.getChildContext();for(var q in A)if(!(q in d))throw Error(t(108,ut(u)||"Unknown",q));return Ze({},v,A)}function bu(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||ps,ys=Si.current,_r(Si,u),_r(Ri,Ri.current),!0}function Gc(u,d,v){var A=u.stateNode;if(!A)throw Error(t(169));v?(u=qc(u,d,ys),A.__reactInternalMemoizedMergedChildContext=u,zr(Ri),zr(Si),_r(Si,u)):zr(Ri),_r(Ri,v)}var Xa=null,gl=!1,$c=!1;function Hc(u){Xa===null?Xa=[u]:Xa.push(u)}function Rf(u){gl=!0,Hc(u)}function vs(){if(!$c&&Xa!==null){$c=!0;var u=0,d=br;try{var v=Xa;for(br=1;u<v.length;u++){var A=v[u];do A=A(!0);while(A!==null)}Xa=null,gl=!1}catch(q){throw Xa!==null&&(Xa=Xa.slice(u+1)),mi(us,vs),q}finally{br=d,$c=!1}}return null}var Ao=[],Vs=0,Tu=null,ml=0,Zi=[],$i=0,Ks=null,Hi=1,pa="";function Ca(u,d){Ao[Vs++]=ml,Ao[Vs++]=Tu,Tu=u,ml=d}function pr(u,d,v){Zi[$i++]=Hi,Zi[$i++]=pa,Zi[$i++]=Ks,Ks=u;var A=Hi;u=pa;var q=32-lr(A)-1;A&=~(1<<q),v+=1;var le=32-lr(d)+q;if(30<le){var De=q-q%5;le=(A&(1<<De)-1).toString(32),A>>=De,q-=De,Hi=1<<32-lr(d)+q|v<<q|A,pa=le+u}else Hi=1<<le|v<<q|A,pa=u}function Su(u){u.return!==null&&(Ca(u,1),pr(u,1,0))}function _u(u){for(;u===Tu;)Tu=Ao[--Vs],Ao[Vs]=null,ml=Ao[--Vs],Ao[Vs]=null;for(;u===Ks;)Ks=Zi[--$i],Zi[$i]=null,pa=Zi[--$i],Zi[$i]=null,Hi=Zi[--$i],Zi[$i]=null}var Fi=null,Vi=null,Ur=!1,ya=null;function Vc(u,d){var v=za(5,null,null,0);v.elementType="DELETED",v.stateNode=d,v.return=u,d=u.deletions,d===null?(u.deletions=[v],u.flags|=16):d.push(v)}function Cf(u,d){switch(u.tag){case 5:var v=u.type;return d=d.nodeType!==1||v.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(u.stateNode=d,Fi=u,Vi=Wa(d.firstChild),!0):!1;case 6:return d=u.pendingProps===""||d.nodeType!==3?null:d,d!==null?(u.stateNode=d,Fi=u,Vi=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(v=Ks!==null?{id:Hi,overflow:pa}:null,u.memoizedState={dehydrated:d,treeContext:v,retryLane:1073741824},v=za(18,null,null,0),v.stateNode=d,v.return=u,u.child=v,Fi=u,Vi=null,!0):!1;default:return!1}}function xu(u){return(u.mode&1)!==0&&(u.flags&128)===0}function Kc(u){if(Ur){var d=Vi;if(d){var v=d;if(!Cf(u,d)){if(xu(u))throw Error(t(418));d=Wa(v.nextSibling);var A=Fi;d&&Cf(u,d)?Vc(A,v):(u.flags=u.flags&-4097|2,Ur=!1,Fi=u)}}else{if(xu(u))throw Error(t(418));u.flags=u.flags&-4097|2,Ur=!1,Fi=u}}}function Qa(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Fi=u}function Ys(u){if(u!==Fi)return!1;if(!Ur)return Qa(u),Ur=!0,!1;var d;if((d=u.tag!==3)&&!(d=u.tag!==5)&&(d=u.type,d=d!=="head"&&d!=="body"&&!pu(u.type,u.memoizedProps)),d&&(d=Vi)){if(xu(u))throw wu(),Error(t(418));for(;d;)Vc(u,d),d=Wa(d.nextSibling)}if(Qa(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(t(317));e:{for(u=u.nextSibling,d=0;u;){if(u.nodeType===8){var v=u.data;if(v==="/$"){if(d===0){Vi=Wa(u.nextSibling);break e}d--}else v!=="$"&&v!=="$!"&&v!=="$?"||d++}u=u.nextSibling}Vi=null}}else Vi=Fi?Wa(u.stateNode.nextSibling):null;return!0}function wu(){for(var u=Vi;u;)u=Wa(u.nextSibling)}function va(){Vi=Fi=null,Ur=!1}function Iu(u){ya===null?ya=[u]:ya.push(u)}var Nf=ye.ReactCurrentBatchConfig;function Es(u,d,v){if(u=v.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(t(309));var A=v.stateNode}if(!A)throw Error(t(147,u));var q=A,le=""+u;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===le?d.ref:(d=function(De){var Qe=q.refs;De===null?delete Qe[le]:Qe[le]=De},d._stringRef=le,d)}if(typeof u!="string")throw Error(t(284));if(!v._owner)throw Error(t(290,u))}return u}function Ws(u,d){throw u=Object.prototype.toString.call(d),Error(t(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u))}function Yc(u){var d=u._init;return d(u._payload)}function pl(u){function d(It,dt){if(u){var Rt=It.deletions;Rt===null?(It.deletions=[dt],It.flags|=16):Rt.push(dt)}}function v(It,dt){if(!u)return null;for(;dt!==null;)d(It,dt),dt=dt.sibling;return null}function A(It,dt){for(It=new Map;dt!==null;)dt.key!==null?It.set(dt.key,dt):It.set(dt.index,dt),dt=dt.sibling;return It}function q(It,dt){return It=zo(It,dt),It.index=0,It.sibling=null,It}function le(It,dt,Rt){return It.index=Rt,u?(Rt=It.alternate,Rt!==null?(Rt=Rt.index,Rt<dt?(It.flags|=2,dt):Rt):(It.flags|=2,dt)):(It.flags|=1048576,dt)}function De(It){return u&&It.alternate===null&&(It.flags|=2),It}function Qe(It,dt,Rt,xn){return dt===null||dt.tag!==6?(dt=Bg(Rt,It.mode,xn),dt.return=It,dt):(dt=q(dt,Rt),dt.return=It,dt)}function lt(It,dt,Rt,xn){var Hn=Rt.type;return Hn===k?vn(It,dt,Rt.props.children,xn,Rt.key):dt!==null&&(dt.elementType===Hn||typeof Hn=="object"&&Hn!==null&&Hn.$$typeof===Le&&Yc(Hn)===dt.type)?(xn=q(dt,Rt.props),xn.ref=Es(It,dt,Rt),xn.return=It,xn):(xn=rh(Rt.type,Rt.key,Rt.props,null,It.mode,xn),xn.ref=Es(It,dt,Rt),xn.return=It,xn)}function Mt(It,dt,Rt,xn){return dt===null||dt.tag!==4||dt.stateNode.containerInfo!==Rt.containerInfo||dt.stateNode.implementation!==Rt.implementation?(dt=jg(Rt,It.mode,xn),dt.return=It,dt):(dt=q(dt,Rt.children||[]),dt.return=It,dt)}function vn(It,dt,Rt,xn,Hn){return dt===null||dt.tag!==7?(dt=Nl(Rt,It.mode,xn,Hn),dt.return=It,dt):(dt=q(dt,Rt),dt.return=It,dt)}function En(It,dt,Rt){if(typeof dt=="string"&&dt!==""||typeof dt=="number")return dt=Bg(""+dt,It.mode,Rt),dt.return=It,dt;if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case Re:return Rt=rh(dt.type,dt.key,dt.props,null,It.mode,Rt),Rt.ref=Es(It,null,dt),Rt.return=It,Rt;case F:return dt=jg(dt,It.mode,Rt),dt.return=It,dt;case Le:var xn=dt._init;return En(It,xn(dt._payload),Rt)}if(bt(dt)||tt(dt))return dt=Nl(dt,It.mode,Rt,null),dt.return=It,dt;Ws(It,dt)}return null}function mn(It,dt,Rt,xn){var Hn=dt!==null?dt.key:null;if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number")return Hn!==null?null:Qe(It,dt,""+Rt,xn);if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case Re:return Rt.key===Hn?lt(It,dt,Rt,xn):null;case F:return Rt.key===Hn?Mt(It,dt,Rt,xn):null;case Le:return Hn=Rt._init,mn(It,dt,Hn(Rt._payload),xn)}if(bt(Rt)||tt(Rt))return Hn!==null?null:vn(It,dt,Rt,xn,null);Ws(It,Rt)}return null}function Ln(It,dt,Rt,xn,Hn){if(typeof xn=="string"&&xn!==""||typeof xn=="number")return It=It.get(Rt)||null,Qe(dt,It,""+xn,Hn);if(typeof xn=="object"&&xn!==null){switch(xn.$$typeof){case Re:return It=It.get(xn.key===null?Rt:xn.key)||null,lt(dt,It,xn,Hn);case F:return It=It.get(xn.key===null?Rt:xn.key)||null,Mt(dt,It,xn,Hn);case Le:var Xn=xn._init;return Ln(It,dt,Rt,Xn(xn._payload),Hn)}if(bt(xn)||tt(xn))return It=It.get(Rt)||null,vn(dt,It,xn,Hn,null);Ws(dt,xn)}return null}function Un(It,dt,Rt,xn){for(var Hn=null,Xn=null,Qn=dt,Zn=dt=0,xi=null;Qn!==null&&Zn<Rt.length;Zn++){Qn.index>Zn?(xi=Qn,Qn=null):xi=Qn.sibling;var Ir=mn(It,Qn,Rt[Zn],xn);if(Ir===null){Qn===null&&(Qn=xi);break}u&&Qn&&Ir.alternate===null&&d(It,Qn),dt=le(Ir,dt,Zn),Xn===null?Hn=Ir:Xn.sibling=Ir,Xn=Ir,Qn=xi}if(Zn===Rt.length)return v(It,Qn),Ur&&Ca(It,Zn),Hn;if(Qn===null){for(;Zn<Rt.length;Zn++)Qn=En(It,Rt[Zn],xn),Qn!==null&&(dt=le(Qn,dt,Zn),Xn===null?Hn=Qn:Xn.sibling=Qn,Xn=Qn);return Ur&&Ca(It,Zn),Hn}for(Qn=A(It,Qn);Zn<Rt.length;Zn++)xi=Ln(Qn,It,Zn,Rt[Zn],xn),xi!==null&&(u&&xi.alternate!==null&&Qn.delete(xi.key===null?Zn:xi.key),dt=le(xi,dt,Zn),Xn===null?Hn=xi:Xn.sibling=xi,Xn=xi);return u&&Qn.forEach(function(Uo){return d(It,Uo)}),Ur&&Ca(It,Zn),Hn}function qn(It,dt,Rt,xn){var Hn=tt(Rt);if(typeof Hn!="function")throw Error(t(150));if(Rt=Hn.call(Rt),Rt==null)throw Error(t(151));for(var Xn=Hn=null,Qn=dt,Zn=dt=0,xi=null,Ir=Rt.next();Qn!==null&&!Ir.done;Zn++,Ir=Rt.next()){Qn.index>Zn?(xi=Qn,Qn=null):xi=Qn.sibling;var Uo=mn(It,Qn,Ir.value,xn);if(Uo===null){Qn===null&&(Qn=xi);break}u&&Qn&&Uo.alternate===null&&d(It,Qn),dt=le(Uo,dt,Zn),Xn===null?Hn=Uo:Xn.sibling=Uo,Xn=Uo,Qn=xi}if(Ir.done)return v(It,Qn),Ur&&Ca(It,Zn),Hn;if(Qn===null){for(;!Ir.done;Zn++,Ir=Rt.next())Ir=En(It,Ir.value,xn),Ir!==null&&(dt=le(Ir,dt,Zn),Xn===null?Hn=Ir:Xn.sibling=Ir,Xn=Ir);return Ur&&Ca(It,Zn),Hn}for(Qn=A(It,Qn);!Ir.done;Zn++,Ir=Rt.next())Ir=Ln(Qn,It,Zn,Ir.value,xn),Ir!==null&&(u&&Ir.alternate!==null&&Qn.delete(Ir.key===null?Zn:Ir.key),dt=le(Ir,dt,Zn),Xn===null?Hn=Ir:Xn.sibling=Ir,Xn=Ir);return u&&Qn.forEach(function(XT){return d(It,XT)}),Ur&&Ca(It,Zn),Hn}function li(It,dt,Rt,xn){if(typeof Rt=="object"&&Rt!==null&&Rt.type===k&&Rt.key===null&&(Rt=Rt.props.children),typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case Re:e:{for(var Hn=Rt.key,Xn=dt;Xn!==null;){if(Xn.key===Hn){if(Hn=Rt.type,Hn===k){if(Xn.tag===7){v(It,Xn.sibling),dt=q(Xn,Rt.props.children),dt.return=It,It=dt;break e}}else if(Xn.elementType===Hn||typeof Hn=="object"&&Hn!==null&&Hn.$$typeof===Le&&Yc(Hn)===Xn.type){v(It,Xn.sibling),dt=q(Xn,Rt.props),dt.ref=Es(It,Xn,Rt),dt.return=It,It=dt;break e}v(It,Xn);break}else d(It,Xn);Xn=Xn.sibling}Rt.type===k?(dt=Nl(Rt.props.children,It.mode,xn,Rt.key),dt.return=It,It=dt):(xn=rh(Rt.type,Rt.key,Rt.props,null,It.mode,xn),xn.ref=Es(It,dt,Rt),xn.return=It,It=xn)}return De(It);case F:e:{for(Xn=Rt.key;dt!==null;){if(dt.key===Xn)if(dt.tag===4&&dt.stateNode.containerInfo===Rt.containerInfo&&dt.stateNode.implementation===Rt.implementation){v(It,dt.sibling),dt=q(dt,Rt.children||[]),dt.return=It,It=dt;break e}else{v(It,dt);break}else d(It,dt);dt=dt.sibling}dt=jg(Rt,It.mode,xn),dt.return=It,It=dt}return De(It);case Le:return Xn=Rt._init,li(It,dt,Xn(Rt._payload),xn)}if(bt(Rt))return Un(It,dt,Rt,xn);if(tt(Rt))return qn(It,dt,Rt,xn);Ws(It,Rt)}return typeof Rt=="string"&&Rt!==""||typeof Rt=="number"?(Rt=""+Rt,dt!==null&&dt.tag===6?(v(It,dt.sibling),dt=q(dt,Rt),dt.return=It,It=dt):(v(It,dt),dt=Bg(Rt,It.mode,xn),dt.return=It,It=dt),De(It)):v(It,dt)}return li}var Xs=pl(!0),Df=pl(!1),yl=ms(null),Au=null,ko=null,ku=null;function Wc(){ku=ko=Au=null}function Ru(u){var d=yl.current;zr(yl),u._currentValue=d}function Xc(u,d,v){for(;u!==null;){var A=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,A!==null&&(A.childLanes|=d)):A!==null&&(A.childLanes&d)!==d&&(A.childLanes|=d),u===v)break;u=u.return}}function Qs(u,d){Au=u,ku=ko=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&d)!==0&&(Ni=!0),u.firstContext=null)}function Ji(u){var d=u._currentValue;if(ku!==u)if(u={context:u,memoizedValue:d,next:null},ko===null){if(Au===null)throw Error(t(308));ko=u,Au.dependencies={lanes:0,firstContext:u}}else ko=ko.next=u;return d}var Za=null;function Cu(u){Za===null?Za=[u]:Za.push(u)}function Lf(u,d,v,A){var q=d.interleaved;return q===null?(v.next=v,Cu(d)):(v.next=q.next,q.next=v),d.interleaved=v,Na(u,A)}function Na(u,d){u.lanes|=d;var v=u.alternate;for(v!==null&&(v.lanes|=d),v=u,u=u.return;u!==null;)u.childLanes|=d,v=u.alternate,v!==null&&(v.childLanes|=d),v=u,u=u.return;return v.tag===3?v.stateNode:null}var Ja=!1;function Nu(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pf(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Da(u,d){return{eventTime:u,lane:d,tag:0,payload:null,callback:null,next:null}}function bs(u,d,v){var A=u.updateQueue;if(A===null)return null;if(A=A.shared,(cn&2)!==0){var q=A.pending;return q===null?d.next=d:(d.next=q.next,q.next=d),A.pending=d,Na(u,v)}return q=A.interleaved,q===null?(d.next=d,Cu(A)):(d.next=q.next,q.next=d),A.interleaved=d,Na(u,v)}function Ro(u,d,v){if(d=d.updateQueue,d!==null&&(d=d.shared,(v&4194240)!==0)){var A=d.lanes;A&=u.pendingLanes,v|=A,d.lanes=v,lo(u,v)}}function Qc(u,d){var v=u.updateQueue,A=u.alternate;if(A!==null&&(A=A.updateQueue,v===A)){var q=null,le=null;if(v=v.firstBaseUpdate,v!==null){do{var De={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};le===null?q=le=De:le=le.next=De,v=v.next}while(v!==null);le===null?q=le=d:le=le.next=d}else q=le=d;v={baseState:A.baseState,firstBaseUpdate:q,lastBaseUpdate:le,shared:A.shared,effects:A.effects},u.updateQueue=v;return}u=v.lastBaseUpdate,u===null?v.firstBaseUpdate=d:u.next=d,v.lastBaseUpdate=d}function vl(u,d,v,A){var q=u.updateQueue;Ja=!1;var le=q.firstBaseUpdate,De=q.lastBaseUpdate,Qe=q.shared.pending;if(Qe!==null){q.shared.pending=null;var lt=Qe,Mt=lt.next;lt.next=null,De===null?le=Mt:De.next=Mt,De=lt;var vn=u.alternate;vn!==null&&(vn=vn.updateQueue,Qe=vn.lastBaseUpdate,Qe!==De&&(Qe===null?vn.firstBaseUpdate=Mt:Qe.next=Mt,vn.lastBaseUpdate=lt))}if(le!==null){var En=q.baseState;De=0,vn=Mt=lt=null,Qe=le;do{var mn=Qe.lane,Ln=Qe.eventTime;if((A&mn)===mn){vn!==null&&(vn=vn.next={eventTime:Ln,lane:0,tag:Qe.tag,payload:Qe.payload,callback:Qe.callback,next:null});e:{var Un=u,qn=Qe;switch(mn=d,Ln=v,qn.tag){case 1:if(Un=qn.payload,typeof Un=="function"){En=Un.call(Ln,En,mn);break e}En=Un;break e;case 3:Un.flags=Un.flags&-65537|128;case 0:if(Un=qn.payload,mn=typeof Un=="function"?Un.call(Ln,En,mn):Un,mn==null)break e;En=Ze({},En,mn);break e;case 2:Ja=!0}}Qe.callback!==null&&Qe.lane!==0&&(u.flags|=64,mn=q.effects,mn===null?q.effects=[Qe]:mn.push(Qe))}else Ln={eventTime:Ln,lane:mn,tag:Qe.tag,payload:Qe.payload,callback:Qe.callback,next:null},vn===null?(Mt=vn=Ln,lt=En):vn=vn.next=Ln,De|=mn;if(Qe=Qe.next,Qe===null){if(Qe=q.shared.pending,Qe===null)break;mn=Qe,Qe=mn.next,mn.next=null,q.lastBaseUpdate=mn,q.shared.pending=null}}while(!0);if(vn===null&&(lt=En),q.baseState=lt,q.firstBaseUpdate=Mt,q.lastBaseUpdate=vn,d=q.shared.interleaved,d!==null){q=d;do De|=q.lane,q=q.next;while(q!==d)}else le===null&&(q.shared.lanes=0);Tn|=De,u.lanes=De,u.memoizedState=En}}function Mf(u,d,v){if(u=d.effects,d.effects=null,u!==null)for(d=0;d<u.length;d++){var A=u[d],q=A.callback;if(q!==null){if(A.callback=null,A=v,typeof q!="function")throw Error(t(191,q));q.call(A)}}}var Co={},La=ms(Co),El=ms(Co),No=ms(Co);function Ts(u){if(u===Co)throw Error(t(174));return u}function Ss(u,d){switch(_r(No,d),_r(El,u),_r(La,Co),u=d.nodeType,u){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:Vn(null,"");break;default:u=u===8?d.parentNode:d,d=u.namespaceURI||null,u=u.tagName,d=Vn(d,u)}zr(La),_r(La,d)}function Zs(){zr(La),zr(El),zr(No)}function Zc(u){Ts(No.current);var d=Ts(La.current),v=Vn(d,u.type);d!==v&&(_r(El,u),_r(La,v))}function Du(u){El.current===u&&(zr(La),zr(El))}var $r=ms(0);function Lu(u){for(var d=u;d!==null;){if(d.tag===13){var v=d.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Pu=[];function Jc(){for(var u=0;u<Pu.length;u++)Pu[u]._workInProgressVersionPrimary=null;Pu.length=0}var bl=ye.ReactCurrentDispatcher,Mu=ye.ReactCurrentBatchConfig,_s=0,Hr=null,ei=null,hi=null,Do=!1,Lo=!1,Tl=0,Lg=0;function _i(){throw Error(t(321))}function Ou(u,d){if(d===null)return!1;for(var v=0;v<d.length&&v<u.length;v++)if(!fa(u[v],d[v]))return!1;return!0}function ed(u,d,v,A,q,le){if(_s=le,Hr=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,bl.current=u===null||u.memoizedState===null?Mg:Og,u=v(A,q),Lo){le=0;do{if(Lo=!1,Tl=0,25<=le)throw Error(t(301));le+=1,hi=ei=null,d.updateQueue=null,bl.current=Wf,u=v(A,q)}while(Lo)}if(bl.current=Mo,d=ei!==null&&ei.next!==null,_s=0,hi=ei=Hr=null,Do=!1,d)throw Error(t(300));return u}function ea(){var u=Tl!==0;return Tl=0,u}function ta(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hi===null?Hr.memoizedState=hi=u:hi=hi.next=u,hi}function na(){if(ei===null){var u=Hr.alternate;u=u!==null?u.memoizedState:null}else u=ei.next;var d=hi===null?Hr.memoizedState:hi.next;if(d!==null)hi=d,ei=u;else{if(u===null)throw Error(t(310));ei=u,u={memoizedState:ei.memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},hi===null?Hr.memoizedState=hi=u:hi=hi.next=u}return hi}function Po(u,d){return typeof d=="function"?d(u):d}function td(u){var d=na(),v=d.queue;if(v===null)throw Error(t(311));v.lastRenderedReducer=u;var A=ei,q=A.baseQueue,le=v.pending;if(le!==null){if(q!==null){var De=q.next;q.next=le.next,le.next=De}A.baseQueue=q=le,v.pending=null}if(q!==null){le=q.next,A=A.baseState;var Qe=De=null,lt=null,Mt=le;do{var vn=Mt.lane;if((_s&vn)===vn)lt!==null&&(lt=lt.next={lane:0,action:Mt.action,hasEagerState:Mt.hasEagerState,eagerState:Mt.eagerState,next:null}),A=Mt.hasEagerState?Mt.eagerState:u(A,Mt.action);else{var En={lane:vn,action:Mt.action,hasEagerState:Mt.hasEagerState,eagerState:Mt.eagerState,next:null};lt===null?(Qe=lt=En,De=A):lt=lt.next=En,Hr.lanes|=vn,Tn|=vn}Mt=Mt.next}while(Mt!==null&&Mt!==le);lt===null?De=A:lt.next=Qe,fa(A,d.memoizedState)||(Ni=!0),d.memoizedState=A,d.baseState=De,d.baseQueue=lt,v.lastRenderedState=A}if(u=v.interleaved,u!==null){q=u;do le=q.lane,Hr.lanes|=le,Tn|=le,q=q.next;while(q!==u)}else q===null&&(v.lanes=0);return[d.memoizedState,v.dispatch]}function nd(u){var d=na(),v=d.queue;if(v===null)throw Error(t(311));v.lastRenderedReducer=u;var A=v.dispatch,q=v.pending,le=d.memoizedState;if(q!==null){v.pending=null;var De=q=q.next;do le=u(le,De.action),De=De.next;while(De!==q);fa(le,d.memoizedState)||(Ni=!0),d.memoizedState=le,d.baseQueue===null&&(d.baseState=le),v.lastRenderedState=le}return[le,A]}function Of(){}function rd(u,d){var v=Hr,A=na(),q=d(),le=!fa(A.memoizedState,q);if(le&&(A.memoizedState=q,Ni=!0),A=A.queue,id(Uf.bind(null,v,A,u),[u]),A.getSnapshot!==d||le||hi!==null&&hi.memoizedState.tag&1){if(v.flags|=2048,Sl(9,zf.bind(null,v,A,q,d),void 0,null),Nn===null)throw Error(t(349));(_s&30)!==0||Ff(v,d,q)}return q}function Ff(u,d,v){u.flags|=16384,u={getSnapshot:d,value:v},d=Hr.updateQueue,d===null?(d={lastEffect:null,stores:null},Hr.updateQueue=d,d.stores=[u]):(v=d.stores,v===null?d.stores=[u]:v.push(u))}function zf(u,d,v,A){d.value=v,d.getSnapshot=A,Bf(d)&&jf(u)}function Uf(u,d,v){return v(function(){Bf(d)&&jf(u)})}function Bf(u){var d=u.getSnapshot;u=u.value;try{var v=d();return!fa(u,v)}catch{return!0}}function jf(u){var d=Na(u,1);d!==null&&nr(d,u,1,-1)}function qf(u){var d=ta();return typeof u=="function"&&(u=u()),d.memoizedState=d.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:u},d.queue=u,u=u.dispatch=Pg.bind(null,Hr,u),[d.memoizedState,u]}function Sl(u,d,v,A){return u={tag:u,create:d,destroy:v,deps:A,next:null},d=Hr.updateQueue,d===null?(d={lastEffect:null,stores:null},Hr.updateQueue=d,d.lastEffect=u.next=u):(v=d.lastEffect,v===null?d.lastEffect=u.next=u:(A=v.next,v.next=u,u.next=A,d.lastEffect=u)),u}function Gf(){return na().memoizedState}function Fu(u,d,v,A){var q=ta();Hr.flags|=u,q.memoizedState=Sl(1|d,v,void 0,A===void 0?null:A)}function zu(u,d,v,A){var q=na();A=A===void 0?null:A;var le=void 0;if(ei!==null){var De=ei.memoizedState;if(le=De.destroy,A!==null&&Ou(A,De.deps)){q.memoizedState=Sl(d,v,le,A);return}}Hr.flags|=u,q.memoizedState=Sl(1|d,v,le,A)}function $f(u,d){return Fu(8390656,8,u,d)}function id(u,d){return zu(2048,8,u,d)}function Hf(u,d){return zu(4,2,u,d)}function ad(u,d){return zu(4,4,u,d)}function Vf(u,d){if(typeof d=="function")return u=u(),d(u),function(){d(null)};if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function sd(u,d,v){return v=v!=null?v.concat([u]):null,zu(4,4,Vf.bind(null,d,u),v)}function od(){}function ld(u,d){var v=na();d=d===void 0?null:d;var A=v.memoizedState;return A!==null&&d!==null&&Ou(d,A[1])?A[0]:(v.memoizedState=[u,d],u)}function ra(u,d){var v=na();d=d===void 0?null:d;var A=v.memoizedState;return A!==null&&d!==null&&Ou(d,A[1])?A[0]:(u=u(),v.memoizedState=[u,d],u)}function Uu(u,d,v){return(_s&21)===0?(u.baseState&&(u.baseState=!1,Ni=!0),u.memoizedState=v):(fa(v,d)||(v=Mi(),Hr.lanes|=v,Tn|=v,u.baseState=!0),d)}function _l(u,d){var v=br;br=v!==0&&4>v?v:4,u(!0);var A=Mu.transition;Mu.transition={};try{u(!1),d()}finally{br=v,Mu.transition=A}}function xl(){return na().memoizedState}function ud(u,d,v){var A=kn(u);if(v={lane:A,action:v,hasEagerState:!1,eagerState:null,next:null},Kf(u))Yf(d,v);else if(v=Lf(u,d,v,A),v!==null){var q=An();nr(v,u,A,q),Ea(v,d,A)}}function Pg(u,d,v){var A=kn(u),q={lane:A,action:v,hasEagerState:!1,eagerState:null,next:null};if(Kf(u))Yf(d,q);else{var le=u.alternate;if(u.lanes===0&&(le===null||le.lanes===0)&&(le=d.lastRenderedReducer,le!==null))try{var De=d.lastRenderedState,Qe=le(De,v);if(q.hasEagerState=!0,q.eagerState=Qe,fa(Qe,De)){var lt=d.interleaved;lt===null?(q.next=q,Cu(d)):(q.next=lt.next,lt.next=q),d.interleaved=q;return}}catch{}finally{}v=Lf(u,d,q,A),v!==null&&(q=An(),nr(v,u,A,q),Ea(v,d,A))}}function Kf(u){var d=u.alternate;return u===Hr||d!==null&&d===Hr}function Yf(u,d){Lo=Do=!0;var v=u.pending;v===null?d.next=d:(d.next=v.next,v.next=d),u.pending=d}function Ea(u,d,v){if((v&4194240)!==0){var A=d.lanes;A&=u.pendingLanes,v|=A,d.lanes=v,lo(u,v)}}var Mo={readContext:Ji,useCallback:_i,useContext:_i,useEffect:_i,useImperativeHandle:_i,useInsertionEffect:_i,useLayoutEffect:_i,useMemo:_i,useReducer:_i,useRef:_i,useState:_i,useDebugValue:_i,useDeferredValue:_i,useTransition:_i,useMutableSource:_i,useSyncExternalStore:_i,useId:_i,unstable_isNewReconciler:!1},Mg={readContext:Ji,useCallback:function(u,d){return ta().memoizedState=[u,d===void 0?null:d],u},useContext:Ji,useEffect:$f,useImperativeHandle:function(u,d,v){return v=v!=null?v.concat([u]):null,Fu(4194308,4,Vf.bind(null,d,u),v)},useLayoutEffect:function(u,d){return Fu(4194308,4,u,d)},useInsertionEffect:function(u,d){return Fu(4,2,u,d)},useMemo:function(u,d){var v=ta();return d=d===void 0?null:d,u=u(),v.memoizedState=[u,d],u},useReducer:function(u,d,v){var A=ta();return d=v!==void 0?v(d):d,A.memoizedState=A.baseState=d,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:d},A.queue=u,u=u.dispatch=ud.bind(null,Hr,u),[A.memoizedState,u]},useRef:function(u){var d=ta();return u={current:u},d.memoizedState=u},useState:qf,useDebugValue:od,useDeferredValue:function(u){return ta().memoizedState=u},useTransition:function(){var u=qf(!1),d=u[0];return u=_l.bind(null,u[1]),ta().memoizedState=u,[d,u]},useMutableSource:function(){},useSyncExternalStore:function(u,d,v){var A=Hr,q=ta();if(Ur){if(v===void 0)throw Error(t(407));v=v()}else{if(v=d(),Nn===null)throw Error(t(349));(_s&30)!==0||Ff(A,d,v)}q.memoizedState=v;var le={value:v,getSnapshot:d};return q.queue=le,$f(Uf.bind(null,A,le,u),[u]),A.flags|=2048,Sl(9,zf.bind(null,A,le,v,d),void 0,null),v},useId:function(){var u=ta(),d=Nn.identifierPrefix;if(Ur){var v=pa,A=Hi;v=(A&~(1<<32-lr(A)-1)).toString(32)+v,d=":"+d+"R"+v,v=Tl++,0<v&&(d+="H"+v.toString(32)),d+=":"}else v=Lg++,d=":"+d+"r"+v.toString(32)+":";return u.memoizedState=d},unstable_isNewReconciler:!1},Og={readContext:Ji,useCallback:ld,useContext:Ji,useEffect:id,useImperativeHandle:sd,useInsertionEffect:Hf,useLayoutEffect:ad,useMemo:ra,useReducer:td,useRef:Gf,useState:function(){return td(Po)},useDebugValue:od,useDeferredValue:function(u){var d=na();return Uu(d,ei.memoizedState,u)},useTransition:function(){var u=td(Po)[0],d=na().memoizedState;return[u,d]},useMutableSource:Of,useSyncExternalStore:rd,useId:xl,unstable_isNewReconciler:!1},Wf={readContext:Ji,useCallback:ld,useContext:Ji,useEffect:id,useImperativeHandle:sd,useInsertionEffect:Hf,useLayoutEffect:ad,useMemo:ra,useReducer:nd,useRef:Gf,useState:function(){return nd(Po)},useDebugValue:od,useDeferredValue:function(u){var d=na();return ei===null?d.memoizedState=u:Uu(d,ei.memoizedState,u)},useTransition:function(){var u=nd(Po)[0],d=na().memoizedState;return[u,d]},useMutableSource:Of,useSyncExternalStore:rd,useId:xl,unstable_isNewReconciler:!1};function ba(u,d){if(u&&u.defaultProps){d=Ze({},d),u=u.defaultProps;for(var v in u)d[v]===void 0&&(d[v]=u[v]);return d}return d}function cd(u,d,v,A){d=u.memoizedState,v=v(A,d),v=v==null?d:Ze({},d,v),u.memoizedState=v,u.lanes===0&&(u.updateQueue.baseState=v)}var Bu={isMounted:function(u){return(u=u._reactInternals)?Rr(u)===u:!1},enqueueSetState:function(u,d,v){u=u._reactInternals;var A=An(),q=kn(u),le=Da(A,q);le.payload=d,v!=null&&(le.callback=v),d=bs(u,le,q),d!==null&&(nr(d,u,q,A),Ro(d,u,q))},enqueueReplaceState:function(u,d,v){u=u._reactInternals;var A=An(),q=kn(u),le=Da(A,q);le.tag=1,le.payload=d,v!=null&&(le.callback=v),d=bs(u,le,q),d!==null&&(nr(d,u,q,A),Ro(d,u,q))},enqueueForceUpdate:function(u,d){u=u._reactInternals;var v=An(),A=kn(u),q=Da(v,A);q.tag=2,d!=null&&(q.callback=d),d=bs(u,q,A),d!==null&&(nr(d,u,A,v),Ro(d,u,A))}};function Xf(u,d,v,A,q,le,De){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(A,le,De):d.prototype&&d.prototype.isPureReactComponent?!ka(v,A)||!ka(q,le):!0}function Qf(u,d,v){var A=!1,q=ps,le=d.contextType;return typeof le=="object"&&le!==null?le=Ji(le):(q=Ci(d)?ys:Si.current,A=d.contextTypes,le=(A=A!=null)?Io(u,q):ps),d=new d(v,le),u.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Bu,u.stateNode=d,d._reactInternals=u,A&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=q,u.__reactInternalMemoizedMaskedChildContext=le),d}function Zf(u,d,v,A){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(v,A),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(v,A),d.state!==u&&Bu.enqueueReplaceState(d,d.state,null)}function ju(u,d,v,A){var q=u.stateNode;q.props=v,q.state=u.memoizedState,q.refs={},Nu(u);var le=d.contextType;typeof le=="object"&&le!==null?q.context=Ji(le):(le=Ci(d)?ys:Si.current,q.context=Io(u,le)),q.state=u.memoizedState,le=d.getDerivedStateFromProps,typeof le=="function"&&(cd(u,d,le,v),q.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(d=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),d!==q.state&&Bu.enqueueReplaceState(q,q.state,null),vl(u,v,q,A),q.state=u.memoizedState),typeof q.componentDidMount=="function"&&(u.flags|=4194308)}function Oo(u,d){try{var v="",A=d;do v+=Pe(A),A=A.return;while(A);var q=v}catch(le){q=`
Error generating stack: `+le.message+`
`+le.stack}return{value:u,source:d,stack:q,digest:null}}function dd(u,d,v){return{value:u,source:null,stack:v??null,digest:d??null}}function wl(u,d){try{console.error(d.value)}catch(v){setTimeout(function(){throw v})}}var Fg=typeof WeakMap=="function"?WeakMap:Map;function fd(u,d,v){v=Da(-1,v),v.tag=3,v.payload={element:null};var A=d.value;return v.callback=function(){Qt||(Qt=!0,nn=A),wl(u,d)},v}function Jf(u,d,v){v=Da(-1,v),v.tag=3;var A=u.type.getDerivedStateFromError;if(typeof A=="function"){var q=d.value;v.payload=function(){return A(q)},v.callback=function(){wl(u,d)}}var le=u.stateNode;return le!==null&&typeof le.componentDidCatch=="function"&&(v.callback=function(){wl(u,d),typeof A!="function"&&(Et===null?Et=new Set([this]):Et.add(this));var De=d.stack;this.componentDidCatch(d.value,{componentStack:De!==null?De:""})}),v}function hd(u,d,v){var A=u.pingCache;if(A===null){A=u.pingCache=new Fg;var q=new Set;A.set(d,q)}else q=A.get(d),q===void 0&&(q=new Set,A.set(d,q));q.has(v)||(q.add(v),u=Yn.bind(null,u,d,v),d.then(u,u))}function eh(u){do{var d;if((d=u.tag===13)&&(d=u.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return u;u=u.return}while(u!==null);return null}function gd(u,d,v,A,q){return(u.mode&1)===0?(u===d?u.flags|=65536:(u.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(d=Da(-1,1),d.tag=2,bs(v,d,1))),v.lanes|=1),u):(u.flags|=65536,u.lanes=q,u)}var zg=ye.ReactCurrentOwner,Ni=!1;function Di(u,d,v,A){d.child=u===null?Df(d,null,v,A):Xs(d,u.child,v,A)}function md(u,d,v,A,q){v=v.render;var le=d.ref;return Qs(d,q),A=ed(u,d,v,A,le,q),v=ea(),u!==null&&!Ni?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~q,K(u,d,q)):(Ur&&v&&Su(d),d.flags|=1,Di(u,d,A,q),d.child)}function th(u,d,v,A,q){if(u===null){var le=v.type;return typeof le=="function"&&!Ug(le)&&le.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(d.tag=15,d.type=le,pd(u,d,le,A,q)):(u=rh(v.type,null,A,d,d.mode,q),u.ref=d.ref,u.return=d,d.child=u)}if(le=u.child,(u.lanes&q)===0){var De=le.memoizedProps;if(v=v.compare,v=v!==null?v:ka,v(De,A)&&u.ref===d.ref)return K(u,d,q)}return d.flags|=1,u=zo(le,A),u.ref=d.ref,u.return=d,d.child=u}function pd(u,d,v,A,q){if(u!==null){var le=u.memoizedProps;if(ka(le,A)&&u.ref===d.ref)if(Ni=!1,d.pendingProps=A=le,(u.lanes&q)!==0)(u.flags&131072)!==0&&(Ni=!0);else return d.lanes=u.lanes,K(u,d,q)}return vd(u,d,v,A,q)}function nh(u,d,v){var A=d.pendingProps,q=A.children,le=u!==null?u.memoizedState:null;if(A.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},_r(gt,pt),pt|=v;else{if((v&1073741824)===0)return u=le!==null?le.baseLanes|v:v,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:u,cachePool:null,transitions:null},d.updateQueue=null,_r(gt,pt),pt|=u,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},A=le!==null?le.baseLanes:v,_r(gt,pt),pt|=A}else le!==null?(A=le.baseLanes|v,d.memoizedState=null):A=v,_r(gt,pt),pt|=A;return Di(u,d,q,v),d.child}function yd(u,d){var v=d.ref;(u===null&&v!==null||u!==null&&u.ref!==v)&&(d.flags|=512,d.flags|=2097152)}function vd(u,d,v,A,q){var le=Ci(v)?ys:Si.current;return le=Io(d,le),Qs(d,q),v=ed(u,d,v,A,le,q),A=ea(),u!==null&&!Ni?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~q,K(u,d,q)):(Ur&&A&&Su(d),d.flags|=1,Di(u,d,v,q),d.child)}function Ed(u,d,v,A,q){if(Ci(v)){var le=!0;bu(d)}else le=!1;if(Qs(d,q),d.stateNode===null)C(u,d),Qf(d,v,A),ju(d,v,A,q),A=!0;else if(u===null){var De=d.stateNode,Qe=d.memoizedProps;De.props=Qe;var lt=De.context,Mt=v.contextType;typeof Mt=="object"&&Mt!==null?Mt=Ji(Mt):(Mt=Ci(v)?ys:Si.current,Mt=Io(d,Mt));var vn=v.getDerivedStateFromProps,En=typeof vn=="function"||typeof De.getSnapshotBeforeUpdate=="function";En||typeof De.UNSAFE_componentWillReceiveProps!="function"&&typeof De.componentWillReceiveProps!="function"||(Qe!==A||lt!==Mt)&&Zf(d,De,A,Mt),Ja=!1;var mn=d.memoizedState;De.state=mn,vl(d,A,De,q),lt=d.memoizedState,Qe!==A||mn!==lt||Ri.current||Ja?(typeof vn=="function"&&(cd(d,v,vn,A),lt=d.memoizedState),(Qe=Ja||Xf(d,v,Qe,A,mn,lt,Mt))?(En||typeof De.UNSAFE_componentWillMount!="function"&&typeof De.componentWillMount!="function"||(typeof De.componentWillMount=="function"&&De.componentWillMount(),typeof De.UNSAFE_componentWillMount=="function"&&De.UNSAFE_componentWillMount()),typeof De.componentDidMount=="function"&&(d.flags|=4194308)):(typeof De.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=A,d.memoizedState=lt),De.props=A,De.state=lt,De.context=Mt,A=Qe):(typeof De.componentDidMount=="function"&&(d.flags|=4194308),A=!1)}else{De=d.stateNode,Pf(u,d),Qe=d.memoizedProps,Mt=d.type===d.elementType?Qe:ba(d.type,Qe),De.props=Mt,En=d.pendingProps,mn=De.context,lt=v.contextType,typeof lt=="object"&&lt!==null?lt=Ji(lt):(lt=Ci(v)?ys:Si.current,lt=Io(d,lt));var Ln=v.getDerivedStateFromProps;(vn=typeof Ln=="function"||typeof De.getSnapshotBeforeUpdate=="function")||typeof De.UNSAFE_componentWillReceiveProps!="function"&&typeof De.componentWillReceiveProps!="function"||(Qe!==En||mn!==lt)&&Zf(d,De,A,lt),Ja=!1,mn=d.memoizedState,De.state=mn,vl(d,A,De,q);var Un=d.memoizedState;Qe!==En||mn!==Un||Ri.current||Ja?(typeof Ln=="function"&&(cd(d,v,Ln,A),Un=d.memoizedState),(Mt=Ja||Xf(d,v,Mt,A,mn,Un,lt)||!1)?(vn||typeof De.UNSAFE_componentWillUpdate!="function"&&typeof De.componentWillUpdate!="function"||(typeof De.componentWillUpdate=="function"&&De.componentWillUpdate(A,Un,lt),typeof De.UNSAFE_componentWillUpdate=="function"&&De.UNSAFE_componentWillUpdate(A,Un,lt)),typeof De.componentDidUpdate=="function"&&(d.flags|=4),typeof De.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof De.componentDidUpdate!="function"||Qe===u.memoizedProps&&mn===u.memoizedState||(d.flags|=4),typeof De.getSnapshotBeforeUpdate!="function"||Qe===u.memoizedProps&&mn===u.memoizedState||(d.flags|=1024),d.memoizedProps=A,d.memoizedState=Un),De.props=A,De.state=Un,De.context=lt,A=Mt):(typeof De.componentDidUpdate!="function"||Qe===u.memoizedProps&&mn===u.memoizedState||(d.flags|=4),typeof De.getSnapshotBeforeUpdate!="function"||Qe===u.memoizedProps&&mn===u.memoizedState||(d.flags|=1024),A=!1)}return bd(u,d,v,A,le,q)}function bd(u,d,v,A,q,le){yd(u,d);var De=(d.flags&128)!==0;if(!A&&!De)return q&&Gc(d,v,!1),K(u,d,le);A=d.stateNode,zg.current=d;var Qe=De&&typeof v.getDerivedStateFromError!="function"?null:A.render();return d.flags|=1,u!==null&&De?(d.child=Xs(d,u.child,null,le),d.child=Xs(d,null,Qe,le)):Di(u,d,Qe,le),d.memoizedState=A.state,q&&Gc(d,v,!0),d.child}function qu(u){var d=u.stateNode;d.pendingContext?kf(u,d.pendingContext,d.pendingContext!==d.context):d.context&&kf(u,d.context,!1),Ss(u,d.containerInfo)}function Il(u,d,v,A,q){return va(),Iu(q),d.flags|=256,Di(u,d,v,A),d.child}var Td={dehydrated:null,treeContext:null,retryLane:0};function _(u){return{baseLanes:u,cachePool:null,transitions:null}}function E(u,d,v){var A=d.pendingProps,q=$r.current,le=!1,De=(d.flags&128)!==0,Qe;if((Qe=De)||(Qe=u!==null&&u.memoizedState===null?!1:(q&2)!==0),Qe?(le=!0,d.flags&=-129):(u===null||u.memoizedState!==null)&&(q|=1),_r($r,q&1),u===null)return Kc(d),u=d.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((d.mode&1)===0?d.lanes=1:u.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(De=A.children,u=A.fallback,le?(A=d.mode,le=d.child,De={mode:"hidden",children:De},(A&1)===0&&le!==null?(le.childLanes=0,le.pendingProps=De):le=ih(De,A,0,null),u=Nl(u,A,v,null),le.return=d,u.return=d,le.sibling=u,d.child=le,d.child.memoizedState=_(v),d.memoizedState=Td,u):S(d,De));if(q=u.memoizedState,q!==null&&(Qe=q.dehydrated,Qe!==null))return I(u,d,De,A,Qe,q,v);if(le){le=A.fallback,De=d.mode,q=u.child,Qe=q.sibling;var lt={mode:"hidden",children:A.children};return(De&1)===0&&d.child!==q?(A=d.child,A.childLanes=0,A.pendingProps=lt,d.deletions=null):(A=zo(q,lt),A.subtreeFlags=q.subtreeFlags&14680064),Qe!==null?le=zo(Qe,le):(le=Nl(le,De,v,null),le.flags|=2),le.return=d,A.return=d,A.sibling=le,d.child=A,A=le,le=d.child,De=u.child.memoizedState,De=De===null?_(v):{baseLanes:De.baseLanes|v,cachePool:null,transitions:De.transitions},le.memoizedState=De,le.childLanes=u.childLanes&~v,d.memoizedState=Td,A}return le=u.child,u=le.sibling,A=zo(le,{mode:"visible",children:A.children}),(d.mode&1)===0&&(A.lanes=v),A.return=d,A.sibling=null,u!==null&&(v=d.deletions,v===null?(d.deletions=[u],d.flags|=16):v.push(u)),d.child=A,d.memoizedState=null,A}function S(u,d){return d=ih({mode:"visible",children:d},u.mode,0,null),d.return=u,u.child=d}function x(u,d,v,A){return A!==null&&Iu(A),Xs(d,u.child,null,v),u=S(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function I(u,d,v,A,q,le,De){if(v)return d.flags&256?(d.flags&=-257,A=dd(Error(t(422))),x(u,d,De,A)):d.memoizedState!==null?(d.child=u.child,d.flags|=128,null):(le=A.fallback,q=d.mode,A=ih({mode:"visible",children:A.children},q,0,null),le=Nl(le,q,De,null),le.flags|=2,A.return=d,le.return=d,A.sibling=le,d.child=A,(d.mode&1)!==0&&Xs(d,u.child,null,De),d.child.memoizedState=_(De),d.memoizedState=Td,le);if((d.mode&1)===0)return x(u,d,De,null);if(q.data==="$!"){if(A=q.nextSibling&&q.nextSibling.dataset,A)var Qe=A.dgst;return A=Qe,le=Error(t(419)),A=dd(le,A,void 0),x(u,d,De,A)}if(Qe=(De&u.childLanes)!==0,Ni||Qe){if(A=Nn,A!==null){switch(De&-De){case 4:q=2;break;case 16:q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:q=32;break;case 536870912:q=268435456;break;default:q=0}q=(q&(A.suspendedLanes|De))!==0?0:q,q!==0&&q!==le.retryLane&&(le.retryLane=q,Na(u,q),nr(A,u,q,-1))}return Oa(),A=dd(Error(t(421))),x(u,d,De,A)}return q.data==="$?"?(d.flags|=128,d.child=u.child,d=Vr.bind(null,u),q._reactRetry=d,null):(u=le.treeContext,Vi=Wa(q.nextSibling),Fi=d,Ur=!0,ya=null,u!==null&&(Zi[$i++]=Hi,Zi[$i++]=pa,Zi[$i++]=Ks,Hi=u.id,pa=u.overflow,Ks=d),d=S(d,A.children),d.flags|=4096,d)}function N(u,d,v){u.lanes|=d;var A=u.alternate;A!==null&&(A.lanes|=d),Xc(u.return,d,v)}function B(u,d,v,A,q){var le=u.memoizedState;le===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:A,tail:v,tailMode:q}:(le.isBackwards=d,le.rendering=null,le.renderingStartTime=0,le.last=A,le.tail=v,le.tailMode=q)}function G(u,d,v){var A=d.pendingProps,q=A.revealOrder,le=A.tail;if(Di(u,d,A.children,v),A=$r.current,(A&2)!==0)A=A&1|2,d.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&N(u,v,d);else if(u.tag===19)N(u,v,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}A&=1}if(_r($r,A),(d.mode&1)===0)d.memoizedState=null;else switch(q){case"forwards":for(v=d.child,q=null;v!==null;)u=v.alternate,u!==null&&Lu(u)===null&&(q=v),v=v.sibling;v=q,v===null?(q=d.child,d.child=null):(q=v.sibling,v.sibling=null),B(d,!1,q,v,le);break;case"backwards":for(v=null,q=d.child,d.child=null;q!==null;){if(u=q.alternate,u!==null&&Lu(u)===null){d.child=q;break}u=q.sibling,q.sibling=v,v=q,q=u}B(d,!0,v,null,le);break;case"together":B(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function C(u,d){(d.mode&1)===0&&u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2)}function K(u,d,v){if(u!==null&&(d.dependencies=u.dependencies),Tn|=d.lanes,(v&d.childLanes)===0)return null;if(u!==null&&d.child!==u.child)throw Error(t(153));if(d.child!==null){for(u=d.child,v=zo(u,u.pendingProps),d.child=v,v.return=d;u.sibling!==null;)u=u.sibling,v=v.sibling=zo(u,u.pendingProps),v.return=d;v.sibling=null}return d.child}function V(u,d,v){switch(d.tag){case 3:qu(d),va();break;case 5:Zc(d);break;case 1:Ci(d.type)&&bu(d);break;case 4:Ss(d,d.stateNode.containerInfo);break;case 10:var A=d.type._context,q=d.memoizedProps.value;_r(yl,A._currentValue),A._currentValue=q;break;case 13:if(A=d.memoizedState,A!==null)return A.dehydrated!==null?(_r($r,$r.current&1),d.flags|=128,null):(v&d.child.childLanes)!==0?E(u,d,v):(_r($r,$r.current&1),u=K(u,d,v),u!==null?u.sibling:null);_r($r,$r.current&1);break;case 19:if(A=(v&d.childLanes)!==0,(u.flags&128)!==0){if(A)return G(u,d,v);d.flags|=128}if(q=d.memoizedState,q!==null&&(q.rendering=null,q.tail=null,q.lastEffect=null),_r($r,$r.current),A)break;return null;case 22:case 23:return d.lanes=0,nh(u,d,v)}return K(u,d,v)}var D,z,$,ie;D=function(u,d){for(var v=d.child;v!==null;){if(v.tag===5||v.tag===6)u.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===d)break;for(;v.sibling===null;){if(v.return===null||v.return===d)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},z=function(){},$=function(u,d,v,A){var q=u.memoizedProps;if(q!==A){u=d.stateNode,Ts(La.current);var le=null;switch(v){case"input":q=Ue(u,q),A=Ue(u,A),le=[];break;case"select":q=Ze({},q,{value:void 0}),A=Ze({},A,{value:void 0}),le=[];break;case"textarea":q=Ct(u,q),A=Ct(u,A),le=[];break;default:typeof q.onClick!="function"&&typeof A.onClick=="function"&&(u.onclick=gu)}kt(v,A);var De;v=null;for(Mt in q)if(!A.hasOwnProperty(Mt)&&q.hasOwnProperty(Mt)&&q[Mt]!=null)if(Mt==="style"){var Qe=q[Mt];for(De in Qe)Qe.hasOwnProperty(De)&&(v||(v={}),v[De]="")}else Mt!=="dangerouslySetInnerHTML"&&Mt!=="children"&&Mt!=="suppressContentEditableWarning"&&Mt!=="suppressHydrationWarning"&&Mt!=="autoFocus"&&(r.hasOwnProperty(Mt)?le||(le=[]):(le=le||[]).push(Mt,null));for(Mt in A){var lt=A[Mt];if(Qe=q!=null?q[Mt]:void 0,A.hasOwnProperty(Mt)&&lt!==Qe&&(lt!=null||Qe!=null))if(Mt==="style")if(Qe){for(De in Qe)!Qe.hasOwnProperty(De)||lt&&lt.hasOwnProperty(De)||(v||(v={}),v[De]="");for(De in lt)lt.hasOwnProperty(De)&&Qe[De]!==lt[De]&&(v||(v={}),v[De]=lt[De])}else v||(le||(le=[]),le.push(Mt,v)),v=lt;else Mt==="dangerouslySetInnerHTML"?(lt=lt?lt.__html:void 0,Qe=Qe?Qe.__html:void 0,lt!=null&&Qe!==lt&&(le=le||[]).push(Mt,lt)):Mt==="children"?typeof lt!="string"&&typeof lt!="number"||(le=le||[]).push(Mt,""+lt):Mt!=="suppressContentEditableWarning"&&Mt!=="suppressHydrationWarning"&&(r.hasOwnProperty(Mt)?(lt!=null&&Mt==="onScroll"&&Pr("scroll",u),le||Qe===lt||(le=[])):(le=le||[]).push(Mt,lt))}v&&(le=le||[]).push("style",v);var Mt=le;(d.updateQueue=Mt)&&(d.flags|=4)}},ie=function(u,d,v,A){v!==A&&(d.flags|=4)};function se(u,d){if(!Ur)switch(u.tailMode){case"hidden":d=u.tail;for(var v=null;d!==null;)d.alternate!==null&&(v=d),d=d.sibling;v===null?u.tail=null:v.sibling=null;break;case"collapsed":v=u.tail;for(var A=null;v!==null;)v.alternate!==null&&(A=v),v=v.sibling;A===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:A.sibling=null}}function ae(u){var d=u.alternate!==null&&u.alternate.child===u.child,v=0,A=0;if(d)for(var q=u.child;q!==null;)v|=q.lanes|q.childLanes,A|=q.subtreeFlags&14680064,A|=q.flags&14680064,q.return=u,q=q.sibling;else for(q=u.child;q!==null;)v|=q.lanes|q.childLanes,A|=q.subtreeFlags,A|=q.flags,q.return=u,q=q.sibling;return u.subtreeFlags|=A,u.childLanes=v,d}function ce(u,d,v){var A=d.pendingProps;switch(_u(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ae(d),null;case 1:return Ci(d.type)&&hl(),ae(d),null;case 3:return A=d.stateNode,Zs(),zr(Ri),zr(Si),Jc(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(u===null||u.child===null)&&(Ys(d)?d.flags|=4:u===null||u.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,ya!==null&&(Pa(ya),ya=null))),z(u,d),ae(d),null;case 5:Du(d);var q=Ts(No.current);if(v=d.type,u!==null&&d.stateNode!=null)$(u,d,v,A,q),u.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!A){if(d.stateNode===null)throw Error(t(166));return ae(d),null}if(u=Ts(La.current),Ys(d)){A=d.stateNode,v=d.type;var le=d.memoizedProps;switch(A[ma]=d,A[fl]=le,u=(d.mode&1)!==0,v){case"dialog":Pr("cancel",A),Pr("close",A);break;case"iframe":case"object":case"embed":Pr("load",A);break;case"video":case"audio":for(q=0;q<gs.length;q++)Pr(gs[q],A);break;case"source":Pr("error",A);break;case"img":case"image":case"link":Pr("error",A),Pr("load",A);break;case"details":Pr("toggle",A);break;case"input":et(A,le),Pr("invalid",A);break;case"select":A._wrapperState={wasMultiple:!!le.multiple},Pr("invalid",A);break;case"textarea":pn(A,le),Pr("invalid",A)}kt(v,le),q=null;for(var De in le)if(le.hasOwnProperty(De)){var Qe=le[De];De==="children"?typeof Qe=="string"?A.textContent!==Qe&&(le.suppressHydrationWarning!==!0&&dl(A.textContent,Qe,u),q=["children",Qe]):typeof Qe=="number"&&A.textContent!==""+Qe&&(le.suppressHydrationWarning!==!0&&dl(A.textContent,Qe,u),q=["children",""+Qe]):r.hasOwnProperty(De)&&Qe!=null&&De==="onScroll"&&Pr("scroll",A)}switch(v){case"input":H(A),He(A,le,!0);break;case"textarea":H(A),fn(A);break;case"select":case"option":break;default:typeof le.onClick=="function"&&(A.onclick=gu)}A=q,d.updateQueue=A,A!==null&&(d.flags|=4)}else{De=q.nodeType===9?q:q.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=qt(v)),u==="http://www.w3.org/1999/xhtml"?v==="script"?(u=De.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof A.is=="string"?u=De.createElement(v,{is:A.is}):(u=De.createElement(v),v==="select"&&(De=u,A.multiple?De.multiple=!0:A.size&&(De.size=A.size))):u=De.createElementNS(u,v),u[ma]=d,u[fl]=A,D(u,d,!1,!1),d.stateNode=u;e:{switch(De=Jt(v,A),v){case"dialog":Pr("cancel",u),Pr("close",u),q=A;break;case"iframe":case"object":case"embed":Pr("load",u),q=A;break;case"video":case"audio":for(q=0;q<gs.length;q++)Pr(gs[q],u);q=A;break;case"source":Pr("error",u),q=A;break;case"img":case"image":case"link":Pr("error",u),Pr("load",u),q=A;break;case"details":Pr("toggle",u),q=A;break;case"input":et(u,A),q=Ue(u,A),Pr("invalid",u);break;case"option":q=A;break;case"select":u._wrapperState={wasMultiple:!!A.multiple},q=Ze({},A,{value:void 0}),Pr("invalid",u);break;case"textarea":pn(u,A),q=Ct(u,A),Pr("invalid",u);break;default:q=A}kt(v,q),Qe=q;for(le in Qe)if(Qe.hasOwnProperty(le)){var lt=Qe[le];le==="style"?Gt(u,lt):le==="dangerouslySetInnerHTML"?(lt=lt?lt.__html:void 0,lt!=null&&wr(u,lt)):le==="children"?typeof lt=="string"?(v!=="textarea"||lt!=="")&&Zr(u,lt):typeof lt=="number"&&Zr(u,""+lt):le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&le!=="autoFocus"&&(r.hasOwnProperty(le)?lt!=null&&le==="onScroll"&&Pr("scroll",u):lt!=null&&Z(u,le,lt,De))}switch(v){case"input":H(u),He(u,A,!1);break;case"textarea":H(u),fn(u);break;case"option":A.value!=null&&u.setAttribute("value",""+W(A.value));break;case"select":u.multiple=!!A.multiple,le=A.value,le!=null?ht(u,!!A.multiple,le,!1):A.defaultValue!=null&&ht(u,!!A.multiple,A.defaultValue,!0);break;default:typeof q.onClick=="function"&&(u.onclick=gu)}switch(v){case"button":case"input":case"select":case"textarea":A=!!A.autoFocus;break e;case"img":A=!0;break e;default:A=!1}}A&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return ae(d),null;case 6:if(u&&d.stateNode!=null)ie(u,d,u.memoizedProps,A);else{if(typeof A!="string"&&d.stateNode===null)throw Error(t(166));if(v=Ts(No.current),Ts(La.current),Ys(d)){if(A=d.stateNode,v=d.memoizedProps,A[ma]=d,(le=A.nodeValue!==v)&&(u=Fi,u!==null))switch(u.tag){case 3:dl(A.nodeValue,v,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&dl(A.nodeValue,v,(u.mode&1)!==0)}le&&(d.flags|=4)}else A=(v.nodeType===9?v:v.ownerDocument).createTextNode(A),A[ma]=d,d.stateNode=A}return ae(d),null;case 13:if(zr($r),A=d.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(Ur&&Vi!==null&&(d.mode&1)!==0&&(d.flags&128)===0)wu(),va(),d.flags|=98560,le=!1;else if(le=Ys(d),A!==null&&A.dehydrated!==null){if(u===null){if(!le)throw Error(t(318));if(le=d.memoizedState,le=le!==null?le.dehydrated:null,!le)throw Error(t(317));le[ma]=d}else va(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;ae(d),le=!1}else ya!==null&&(Pa(ya),ya=null),le=!0;if(!le)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=v,d):(A=A!==null,A!==(u!==null&&u.memoizedState!==null)&&A&&(d.child.flags|=8192,(d.mode&1)!==0&&(u===null||($r.current&1)!==0?vt===0&&(vt=3):Oa())),d.updateQueue!==null&&(d.flags|=4),ae(d),null);case 4:return Zs(),z(u,d),u===null&&ol(d.stateNode.containerInfo),ae(d),null;case 10:return Ru(d.type._context),ae(d),null;case 17:return Ci(d.type)&&hl(),ae(d),null;case 19:if(zr($r),le=d.memoizedState,le===null)return ae(d),null;if(A=(d.flags&128)!==0,De=le.rendering,De===null)if(A)se(le,!1);else{if(vt!==0||u!==null&&(u.flags&128)!==0)for(u=d.child;u!==null;){if(De=Lu(u),De!==null){for(d.flags|=128,se(le,!1),A=De.updateQueue,A!==null&&(d.updateQueue=A,d.flags|=4),d.subtreeFlags=0,A=v,v=d.child;v!==null;)le=v,u=A,le.flags&=14680066,De=le.alternate,De===null?(le.childLanes=0,le.lanes=u,le.child=null,le.subtreeFlags=0,le.memoizedProps=null,le.memoizedState=null,le.updateQueue=null,le.dependencies=null,le.stateNode=null):(le.childLanes=De.childLanes,le.lanes=De.lanes,le.child=De.child,le.subtreeFlags=0,le.deletions=null,le.memoizedProps=De.memoizedProps,le.memoizedState=De.memoizedState,le.updateQueue=De.updateQueue,le.type=De.type,u=De.dependencies,le.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),v=v.sibling;return _r($r,$r.current&1|2),d.child}u=u.sibling}le.tail!==null&&qr()>at&&(d.flags|=128,A=!0,se(le,!1),d.lanes=4194304)}else{if(!A)if(u=Lu(De),u!==null){if(d.flags|=128,A=!0,v=u.updateQueue,v!==null&&(d.updateQueue=v,d.flags|=4),se(le,!0),le.tail===null&&le.tailMode==="hidden"&&!De.alternate&&!Ur)return ae(d),null}else 2*qr()-le.renderingStartTime>at&&v!==1073741824&&(d.flags|=128,A=!0,se(le,!1),d.lanes=4194304);le.isBackwards?(De.sibling=d.child,d.child=De):(v=le.last,v!==null?v.sibling=De:d.child=De,le.last=De)}return le.tail!==null?(d=le.tail,le.rendering=d,le.tail=d.sibling,le.renderingStartTime=qr(),d.sibling=null,v=$r.current,_r($r,A?v&1|2:v&1),d):(ae(d),null);case 22:case 23:return zi(),A=d.memoizedState!==null,u!==null&&u.memoizedState!==null!==A&&(d.flags|=8192),A&&(d.mode&1)!==0?(pt&1073741824)!==0&&(ae(d),d.subtreeFlags&6&&(d.flags|=8192)):ae(d),null;case 24:return null;case 25:return null}throw Error(t(156,d.tag))}function de(u,d){switch(_u(d),d.tag){case 1:return Ci(d.type)&&hl(),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return Zs(),zr(Ri),zr(Si),Jc(),u=d.flags,(u&65536)!==0&&(u&128)===0?(d.flags=u&-65537|128,d):null;case 5:return Du(d),null;case 13:if(zr($r),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(t(340));va()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return zr($r),null;case 4:return Zs(),null;case 10:return Ru(d.type._context),null;case 22:case 23:return zi(),null;case 24:return null;default:return null}}var ge=!1,we=!1,ne=typeof WeakSet=="function"?WeakSet:Set,U=null;function X(u,d){var v=u.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(A){yn(u,d,A)}else v.current=null}function J(u,d,v){try{v()}catch(A){yn(u,d,A)}}var me=!1;function Ie(u,d){if(mu=Vl,u=Dc(),su(u)){if("selectionStart"in u)var v={start:u.selectionStart,end:u.selectionEnd};else e:{v=(v=u.ownerDocument)&&v.defaultView||window;var A=v.getSelection&&v.getSelection();if(A&&A.rangeCount!==0){v=A.anchorNode;var q=A.anchorOffset,le=A.focusNode;A=A.focusOffset;try{v.nodeType,le.nodeType}catch{v=null;break e}var De=0,Qe=-1,lt=-1,Mt=0,vn=0,En=u,mn=null;t:for(;;){for(var Ln;En!==v||q!==0&&En.nodeType!==3||(Qe=De+q),En!==le||A!==0&&En.nodeType!==3||(lt=De+A),En.nodeType===3&&(De+=En.nodeValue.length),(Ln=En.firstChild)!==null;)mn=En,En=Ln;for(;;){if(En===u)break t;if(mn===v&&++Mt===q&&(Qe=De),mn===le&&++vn===A&&(lt=De),(Ln=En.nextSibling)!==null)break;En=mn,mn=En.parentNode}En=Ln}v=Qe===-1||lt===-1?null:{start:Qe,end:lt}}else v=null}v=v||{start:0,end:0}}else v=null;for(zc={focusedElem:u,selectionRange:v},Vl=!1,U=d;U!==null;)if(d=U,u=d.child,(d.subtreeFlags&1028)!==0&&u!==null)u.return=d,U=u;else for(;U!==null;){d=U;try{var Un=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(Un!==null){var qn=Un.memoizedProps,li=Un.memoizedState,It=d.stateNode,dt=It.getSnapshotBeforeUpdate(d.elementType===d.type?qn:ba(d.type,qn),li);It.__reactInternalSnapshotBeforeUpdate=dt}break;case 3:var Rt=d.stateNode.containerInfo;Rt.nodeType===1?Rt.textContent="":Rt.nodeType===9&&Rt.documentElement&&Rt.removeChild(Rt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(xn){yn(d,d.return,xn)}if(u=d.sibling,u!==null){u.return=d.return,U=u;break}U=d.return}return Un=me,me=!1,Un}function Te(u,d,v){var A=d.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var q=A=A.next;do{if((q.tag&u)===u){var le=q.destroy;q.destroy=void 0,le!==void 0&&J(d,v,le)}q=q.next}while(q!==A)}}function xe(u,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var v=d=d.next;do{if((v.tag&u)===u){var A=v.create;v.destroy=A()}v=v.next}while(v!==d)}}function Oe(u){var d=u.ref;if(d!==null){var v=u.stateNode;switch(u.tag){case 5:u=v;break;default:u=v}typeof d=="function"?d(u):d.current=u}}function je(u){var d=u.alternate;d!==null&&(u.alternate=null,je(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&(delete d[ma],delete d[fl],delete d[Bc],delete d[vu],delete d[Af])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function ee(u){return u.tag===5||u.tag===3||u.tag===4}function te(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||ee(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Ae(u,d,v){var A=u.tag;if(A===5||A===6)u=u.stateNode,d?v.nodeType===8?v.parentNode.insertBefore(u,d):v.insertBefore(u,d):(v.nodeType===8?(d=v.parentNode,d.insertBefore(u,v)):(d=v,d.appendChild(u)),v=v._reactRootContainer,v!=null||d.onclick!==null||(d.onclick=gu));else if(A!==4&&(u=u.child,u!==null))for(Ae(u,d,v),u=u.sibling;u!==null;)Ae(u,d,v),u=u.sibling}function _e(u,d,v){var A=u.tag;if(A===5||A===6)u=u.stateNode,d?v.insertBefore(u,d):v.appendChild(u);else if(A!==4&&(u=u.child,u!==null))for(_e(u,d,v),u=u.sibling;u!==null;)_e(u,d,v),u=u.sibling}var re=null,he=!1;function ve(u,d,v){for(v=v.child;v!==null;)fe(u,d,v),v=v.sibling}function fe(u,d,v){if(Wn&&typeof Wn.onCommitFiberUnmount=="function")try{Wn.onCommitFiberUnmount(ar,v)}catch{}switch(v.tag){case 5:we||X(v,d);case 6:var A=re,q=he;re=null,ve(u,d,v),re=A,he=q,re!==null&&(he?(u=re,v=v.stateNode,u.nodeType===8?u.parentNode.removeChild(v):u.removeChild(v)):re.removeChild(v.stateNode));break;case 18:re!==null&&(he?(u=re,v=v.stateNode,u.nodeType===8?yu(u.parentNode,v):u.nodeType===1&&yu(u,v),Os(u)):yu(re,v.stateNode));break;case 4:A=re,q=he,re=v.stateNode.containerInfo,he=!0,ve(u,d,v),re=A,he=q;break;case 0:case 11:case 14:case 15:if(!we&&(A=v.updateQueue,A!==null&&(A=A.lastEffect,A!==null))){q=A=A.next;do{var le=q,De=le.destroy;le=le.tag,De!==void 0&&((le&2)!==0||(le&4)!==0)&&J(v,d,De),q=q.next}while(q!==A)}ve(u,d,v);break;case 1:if(!we&&(X(v,d),A=v.stateNode,typeof A.componentWillUnmount=="function"))try{A.props=v.memoizedProps,A.state=v.memoizedState,A.componentWillUnmount()}catch(Qe){yn(v,d,Qe)}ve(u,d,v);break;case 21:ve(u,d,v);break;case 22:v.mode&1?(we=(A=we)||v.memoizedState!==null,ve(u,d,v),we=A):ve(u,d,v);break;default:ve(u,d,v)}}function ke(u){var d=u.updateQueue;if(d!==null){u.updateQueue=null;var v=u.stateNode;v===null&&(v=u.stateNode=new ne),d.forEach(function(A){var q=Bi.bind(null,u,A);v.has(A)||(v.add(A),A.then(q,q))})}}function Ce(u,d){var v=d.deletions;if(v!==null)for(var A=0;A<v.length;A++){var q=v[A];try{var le=u,De=d,Qe=De;e:for(;Qe!==null;){switch(Qe.tag){case 5:re=Qe.stateNode,he=!1;break e;case 3:re=Qe.stateNode.containerInfo,he=!0;break e;case 4:re=Qe.stateNode.containerInfo,he=!0;break e}Qe=Qe.return}if(re===null)throw Error(t(160));fe(le,De,q),re=null,he=!1;var lt=q.alternate;lt!==null&&(lt.return=null),q.return=null}catch(Mt){yn(q,d,Mt)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)Ve(d,u),d=d.sibling}function Ve(u,d){var v=u.alternate,A=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(Ce(d,u),Ke(u),A&4){try{Te(3,u,u.return),xe(3,u)}catch(qn){yn(u,u.return,qn)}try{Te(5,u,u.return)}catch(qn){yn(u,u.return,qn)}}break;case 1:Ce(d,u),Ke(u),A&512&&v!==null&&X(v,v.return);break;case 5:if(Ce(d,u),Ke(u),A&512&&v!==null&&X(v,v.return),u.flags&32){var q=u.stateNode;try{Zr(q,"")}catch(qn){yn(u,u.return,qn)}}if(A&4&&(q=u.stateNode,q!=null)){var le=u.memoizedProps,De=v!==null?v.memoizedProps:le,Qe=u.type,lt=u.updateQueue;if(u.updateQueue=null,lt!==null)try{Qe==="input"&&le.type==="radio"&&le.name!=null&&qe(q,le),Jt(Qe,De);var Mt=Jt(Qe,le);for(De=0;De<lt.length;De+=2){var vn=lt[De],En=lt[De+1];vn==="style"?Gt(q,En):vn==="dangerouslySetInnerHTML"?wr(q,En):vn==="children"?Zr(q,En):Z(q,vn,En,Mt)}switch(Qe){case"input":Xe(q,le);break;case"textarea":Xt(q,le);break;case"select":var mn=q._wrapperState.wasMultiple;q._wrapperState.wasMultiple=!!le.multiple;var Ln=le.value;Ln!=null?ht(q,!!le.multiple,Ln,!1):mn!==!!le.multiple&&(le.defaultValue!=null?ht(q,!!le.multiple,le.defaultValue,!0):ht(q,!!le.multiple,le.multiple?[]:"",!1))}q[fl]=le}catch(qn){yn(u,u.return,qn)}}break;case 6:if(Ce(d,u),Ke(u),A&4){if(u.stateNode===null)throw Error(t(162));q=u.stateNode,le=u.memoizedProps;try{q.nodeValue=le}catch(qn){yn(u,u.return,qn)}}break;case 3:if(Ce(d,u),Ke(u),A&4&&v!==null&&v.memoizedState.isDehydrated)try{Os(d.containerInfo)}catch(qn){yn(u,u.return,qn)}break;case 4:Ce(d,u),Ke(u);break;case 13:Ce(d,u),Ke(u),q=u.child,q.flags&8192&&(le=q.memoizedState!==null,q.stateNode.isHidden=le,!le||q.alternate!==null&&q.alternate.memoizedState!==null||(on=qr())),A&4&&ke(u);break;case 22:if(vn=v!==null&&v.memoizedState!==null,u.mode&1?(we=(Mt=we)||vn,Ce(d,u),we=Mt):Ce(d,u),Ke(u),A&8192){if(Mt=u.memoizedState!==null,(u.stateNode.isHidden=Mt)&&!vn&&(u.mode&1)!==0)for(U=u,vn=u.child;vn!==null;){for(En=U=vn;U!==null;){switch(mn=U,Ln=mn.child,mn.tag){case 0:case 11:case 14:case 15:Te(4,mn,mn.return);break;case 1:X(mn,mn.return);var Un=mn.stateNode;if(typeof Un.componentWillUnmount=="function"){A=mn,v=mn.return;try{d=A,Un.props=d.memoizedProps,Un.state=d.memoizedState,Un.componentWillUnmount()}catch(qn){yn(A,v,qn)}}break;case 5:X(mn,mn.return);break;case 22:if(mn.memoizedState!==null){Bt(En);continue}}Ln!==null?(Ln.return=mn,U=Ln):Bt(En)}vn=vn.sibling}e:for(vn=null,En=u;;){if(En.tag===5){if(vn===null){vn=En;try{q=En.stateNode,Mt?(le=q.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none"):(Qe=En.stateNode,lt=En.memoizedProps.style,De=lt!=null&&lt.hasOwnProperty("display")?lt.display:null,Qe.style.display=rn("display",De))}catch(qn){yn(u,u.return,qn)}}}else if(En.tag===6){if(vn===null)try{En.stateNode.nodeValue=Mt?"":En.memoizedProps}catch(qn){yn(u,u.return,qn)}}else if((En.tag!==22&&En.tag!==23||En.memoizedState===null||En===u)&&En.child!==null){En.child.return=En,En=En.child;continue}if(En===u)break e;for(;En.sibling===null;){if(En.return===null||En.return===u)break e;vn===En&&(vn=null),En=En.return}vn===En&&(vn=null),En.sibling.return=En.return,En=En.sibling}}break;case 19:Ce(d,u),Ke(u),A&4&&ke(u);break;case 21:break;default:Ce(d,u),Ke(u)}}function Ke(u){var d=u.flags;if(d&2){try{e:{for(var v=u.return;v!==null;){if(ee(v)){var A=v;break e}v=v.return}throw Error(t(160))}switch(A.tag){case 5:var q=A.stateNode;A.flags&32&&(Zr(q,""),A.flags&=-33);var le=te(u);_e(u,le,q);break;case 3:case 4:var De=A.stateNode.containerInfo,Qe=te(u);Ae(u,Qe,De);break;default:throw Error(t(161))}}catch(lt){yn(u,u.return,lt)}u.flags&=-3}d&4096&&(u.flags&=-4097)}function st(u,d,v){U=u,ft(u)}function ft(u,d,v){for(var A=(u.mode&1)!==0;U!==null;){var q=U,le=q.child;if(q.tag===22&&A){var De=q.memoizedState!==null||ge;if(!De){var Qe=q.alternate,lt=Qe!==null&&Qe.memoizedState!==null||we;Qe=ge;var Mt=we;if(ge=De,(we=lt)&&!Mt)for(U=q;U!==null;)De=U,lt=De.child,De.tag===22&&De.memoizedState!==null?Ht(q):lt!==null?(lt.return=De,U=lt):Ht(q);for(;le!==null;)U=le,ft(le),le=le.sibling;U=q,ge=Qe,we=Mt}St(u)}else(q.subtreeFlags&8772)!==0&&le!==null?(le.return=q,U=le):St(u)}}function St(u){for(;U!==null;){var d=U;if((d.flags&8772)!==0){var v=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:we||xe(5,d);break;case 1:var A=d.stateNode;if(d.flags&4&&!we)if(v===null)A.componentDidMount();else{var q=d.elementType===d.type?v.memoizedProps:ba(d.type,v.memoizedProps);A.componentDidUpdate(q,v.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var le=d.updateQueue;le!==null&&Mf(d,le,A);break;case 3:var De=d.updateQueue;if(De!==null){if(v=null,d.child!==null)switch(d.child.tag){case 5:v=d.child.stateNode;break;case 1:v=d.child.stateNode}Mf(d,De,v)}break;case 5:var Qe=d.stateNode;if(v===null&&d.flags&4){v=Qe;var lt=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":lt.autoFocus&&v.focus();break;case"img":lt.src&&(v.src=lt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var Mt=d.alternate;if(Mt!==null){var vn=Mt.memoizedState;if(vn!==null){var En=vn.dehydrated;En!==null&&Os(En)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}we||d.flags&512&&Oe(d)}catch(mn){yn(d,d.return,mn)}}if(d===u){U=null;break}if(v=d.sibling,v!==null){v.return=d.return,U=v;break}U=d.return}}function Bt(u){for(;U!==null;){var d=U;if(d===u){U=null;break}var v=d.sibling;if(v!==null){v.return=d.return,U=v;break}U=d.return}}function Ht(u){for(;U!==null;){var d=U;try{switch(d.tag){case 0:case 11:case 15:var v=d.return;try{xe(4,d)}catch(lt){yn(d,v,lt)}break;case 1:var A=d.stateNode;if(typeof A.componentDidMount=="function"){var q=d.return;try{A.componentDidMount()}catch(lt){yn(d,q,lt)}}var le=d.return;try{Oe(d)}catch(lt){yn(d,le,lt)}break;case 5:var De=d.return;try{Oe(d)}catch(lt){yn(d,De,lt)}}}catch(lt){yn(d,d.return,lt)}if(d===u){U=null;break}var Qe=d.sibling;if(Qe!==null){Qe.return=d.return,U=Qe;break}U=d.return}}var hn=Math.ceil,In=ye.ReactCurrentDispatcher,Ot=ye.ReactCurrentOwner,Zt=ye.ReactCurrentBatchConfig,cn=0,Nn=null,Cn=null,We=0,pt=0,gt=ms(0),vt=0,sn=null,Tn=0,yt=0,Yt=0,tn=null,jt=null,on=0,at=1/0,At=null,Qt=!1,nn=null,Et=null,Ne=!1,nt=null,_t=0,rt=0,Ft=null,Vt=-1,_n=0;function An(){return(cn&6)!==0?qr():Vt!==-1?Vt:Vt=qr()}function kn(u){return(u.mode&1)===0?1:(cn&2)!==0&&We!==0?We&-We:Nf.transition!==null?(_n===0&&(_n=Mi()),_n):(u=br,u!==0||(u=window.event,u=u===void 0?16:mc(u.type)),u)}function nr(u,d,v,A){if(50<rt)throw rt=0,Ft=null,Error(t(185));fs(u,v,A),((cn&2)===0||u!==Nn)&&(u===Nn&&((cn&2)===0&&(yt|=v),vt===4&&Yi(u,We)),yr(u,A),v===1&&cn===0&&(d.mode&1)===0&&(at=qr()+500,gl&&vs()))}function yr(u,d){var v=u.callbackNode;$l(u,d);var A=ua(u,u===Nn?We:0);if(A===0)v!==null&&ci(v),u.callbackNode=null,u.callbackPriority=0;else if(d=A&-A,u.callbackPriority!==d){if(v!=null&&ci(v),d===1)u.tag===0?Rf(ia.bind(null,u)):Hc(ia.bind(null,u)),wf(function(){(cn&6)===0&&vs()}),v=null;else{switch(uo(A)){case 1:v=us;break;case 4:v=oo;break;case 16:v=$t;break;case 536870912:v=On;break;default:v=$t}v=Gu(v,Ki.bind(null,u))}u.callbackPriority=d,u.callbackNode=v}}function Ki(u,d){if(Vt=-1,_n=0,(cn&6)!==0)throw Error(t(327));var v=u.callbackNode;if(Ut()&&u.callbackNode!==v)return null;var A=ua(u,u===Nn?We:0);if(A===0)return null;if((A&30)!==0||(A&u.expiredLanes)!==0||d)d=yi(u,A);else{d=A;var q=cn;cn|=2;var le=kl();(Nn!==u||We!==d)&&(At=null,at=qr()+500,Ui(u,d));do try{Rl();break}catch(Qe){Al(u,Qe)}while(!0);Wc(),In.current=le,cn=q,Cn!==null?d=0:(Nn=null,We=0,d=vt)}if(d!==0){if(d===2&&(q=ds(u),q!==0&&(A=q,d=oi(u,q))),d===1)throw v=sn,Ui(u,0),Yi(u,A),yr(u,qr()),v;if(d===6)Yi(u,A);else{if(q=u.current.alternate,(A&30)===0&&!Js(q)&&(d=yi(u,A),d===2&&(le=ds(u),le!==0&&(A=le,d=oi(u,le))),d===1))throw v=sn,Ui(u,0),Yi(u,A),yr(u,qr()),v;switch(u.finishedWork=q,u.finishedLanes=A,d){case 0:case 1:throw Error(t(345));case 2:Fa(u,jt,At);break;case 3:if(Yi(u,A),(A&130023424)===A&&(d=on+500-qr(),10<d)){if(ua(u,0)!==0)break;if(q=u.suspendedLanes,(q&A)!==A){An(),u.pingedLanes|=u.suspendedLanes&q;break}u.timeoutHandle=Uc(Fa.bind(null,u,jt,At),d);break}Fa(u,jt,At);break;case 4:if(Yi(u,A),(A&4194240)===A)break;for(d=u.eventTimes,q=-1;0<A;){var De=31-lr(A);le=1<<De,De=d[De],De>q&&(q=De),A&=~le}if(A=q,A=qr()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*hn(A/1960))-A,10<A){u.timeoutHandle=Uc(Fa.bind(null,u,jt,At),A);break}Fa(u,jt,At);break;case 5:Fa(u,jt,At);break;default:throw Error(t(329))}}}return yr(u,qr()),u.callbackNode===v?Ki.bind(null,u):null}function oi(u,d){var v=tn;return u.current.memoizedState.isDehydrated&&(Ui(u,d).flags|=256),u=yi(u,d),u!==2&&(d=jt,jt=v,d!==null&&Pa(d)),u}function Pa(u){jt===null?jt=u:jt.push.apply(jt,u)}function Js(u){for(var d=u;;){if(d.flags&16384){var v=d.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var A=0;A<v.length;A++){var q=v[A],le=q.getSnapshot;q=q.value;try{if(!fa(le(),q))return!1}catch{return!1}}}if(v=d.child,d.subtreeFlags&16384&&v!==null)v.return=d,d=v;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Yi(u,d){for(d&=~Yt,d&=~yt,u.suspendedLanes|=d,u.pingedLanes&=~d,u=u.expirationTimes;0<d;){var v=31-lr(d),A=1<<v;u[v]=-1,d&=~A}}function ia(u){if((cn&6)!==0)throw Error(t(327));Ut();var d=ua(u,0);if((d&1)===0)return yr(u,qr()),null;var v=yi(u,d);if(u.tag!==0&&v===2){var A=ds(u);A!==0&&(d=A,v=oi(u,A))}if(v===1)throw v=sn,Ui(u,0),Yi(u,d),yr(u,qr()),v;if(v===6)throw Error(t(345));return u.finishedWork=u.current.alternate,u.finishedLanes=d,Fa(u,jt,At),yr(u,qr()),null}function Ma(u,d){var v=cn;cn|=1;try{return u(d)}finally{cn=v,cn===0&&(at=qr()+500,gl&&vs())}}function ti(u){nt!==null&&nt.tag===0&&(cn&6)===0&&Ut();var d=cn;cn|=1;var v=Zt.transition,A=br;try{if(Zt.transition=null,br=1,u)return u()}finally{br=A,Zt.transition=v,cn=d,(cn&6)===0&&vs()}}function zi(){pt=gt.current,zr(gt)}function Ui(u,d){u.finishedWork=null,u.finishedLanes=0;var v=u.timeoutHandle;if(v!==-1&&(u.timeoutHandle=-1,_f(v)),Cn!==null)for(v=Cn.return;v!==null;){var A=v;switch(_u(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&hl();break;case 3:Zs(),zr(Ri),zr(Si),Jc();break;case 5:Du(A);break;case 4:Zs();break;case 13:zr($r);break;case 19:zr($r);break;case 10:Ru(A.type._context);break;case 22:case 23:zi()}v=v.return}if(Nn=u,Cn=u=zo(u.current,null),We=pt=d,vt=0,sn=null,Yt=yt=Tn=0,jt=tn=null,Za!==null){for(d=0;d<Za.length;d++)if(v=Za[d],A=v.interleaved,A!==null){v.interleaved=null;var q=A.next,le=v.pending;if(le!==null){var De=le.next;le.next=q,A.next=De}v.pending=A}Za=null}return u}function Al(u,d){do{var v=Cn;try{if(Wc(),bl.current=Mo,Do){for(var A=Hr.memoizedState;A!==null;){var q=A.queue;q!==null&&(q.pending=null),A=A.next}Do=!1}if(_s=0,hi=ei=Hr=null,Lo=!1,Tl=0,Ot.current=null,v===null||v.return===null){vt=1,sn=d,Cn=null;break}e:{var le=u,De=v.return,Qe=v,lt=d;if(d=We,Qe.flags|=32768,lt!==null&&typeof lt=="object"&&typeof lt.then=="function"){var Mt=lt,vn=Qe,En=vn.tag;if((vn.mode&1)===0&&(En===0||En===11||En===15)){var mn=vn.alternate;mn?(vn.updateQueue=mn.updateQueue,vn.memoizedState=mn.memoizedState,vn.lanes=mn.lanes):(vn.updateQueue=null,vn.memoizedState=null)}var Ln=eh(De);if(Ln!==null){Ln.flags&=-257,gd(Ln,De,Qe,le,d),Ln.mode&1&&hd(le,Mt,d),d=Ln,lt=Mt;var Un=d.updateQueue;if(Un===null){var qn=new Set;qn.add(lt),d.updateQueue=qn}else Un.add(lt);break e}else{if((d&1)===0){hd(le,Mt,d),Oa();break e}lt=Error(t(426))}}else if(Ur&&Qe.mode&1){var li=eh(De);if(li!==null){(li.flags&65536)===0&&(li.flags|=256),gd(li,De,Qe,le,d),Iu(Oo(lt,Qe));break e}}le=lt=Oo(lt,Qe),vt!==4&&(vt=2),tn===null?tn=[le]:tn.push(le),le=De;do{switch(le.tag){case 3:le.flags|=65536,d&=-d,le.lanes|=d;var It=fd(le,lt,d);Qc(le,It);break e;case 1:Qe=lt;var dt=le.type,Rt=le.stateNode;if((le.flags&128)===0&&(typeof dt.getDerivedStateFromError=="function"||Rt!==null&&typeof Rt.componentDidCatch=="function"&&(Et===null||!Et.has(Rt)))){le.flags|=65536,d&=-d,le.lanes|=d;var xn=Jf(le,Qe,d);Qc(le,xn);break e}}le=le.return}while(le!==null)}Sd(v)}catch(Hn){d=Hn,Cn===v&&v!==null&&(Cn=v=v.return);continue}break}while(!0)}function kl(){var u=In.current;return In.current=Mo,u===null?Mo:u}function Oa(){(vt===0||vt===3||vt===2)&&(vt=4),Nn===null||(Tn&268435455)===0&&(yt&268435455)===0||Yi(Nn,We)}function yi(u,d){var v=cn;cn|=2;var A=kl();(Nn!==u||We!==d)&&(At=null,Ui(u,d));do try{Fo();break}catch(q){Al(u,q)}while(!0);if(Wc(),cn=v,In.current=A,Cn!==null)throw Error(t(261));return Nn=null,We=0,vt}function Fo(){for(;Cn!==null;)Cl(Cn)}function Rl(){for(;Cn!==null&&!jl();)Cl(Cn)}function Cl(u){var d=_d(u.alternate,u,pt);u.memoizedProps=u.pendingProps,d===null?Sd(u):Cn=d,Ot.current=null}function Sd(u){var d=u;do{var v=d.alternate;if(u=d.return,(d.flags&32768)===0){if(v=ce(v,d,pt),v!==null){Cn=v;return}}else{if(v=de(v,d),v!==null){v.flags&=32767,Cn=v;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{vt=6,Cn=null;return}}if(d=d.sibling,d!==null){Cn=d;return}Cn=d=u}while(d!==null);vt===0&&(vt=5)}function Fa(u,d,v){var A=br,q=Zt.transition;try{Zt.transition=null,br=1,ot(u,d,v,A)}finally{Zt.transition=q,br=A}return null}function ot(u,d,v,A){do Ut();while(nt!==null);if((cn&6)!==0)throw Error(t(327));v=u.finishedWork;var q=u.finishedLanes;if(v===null)return null;if(u.finishedWork=null,u.finishedLanes=0,v===u.current)throw Error(t(177));u.callbackNode=null,u.callbackPriority=0;var le=v.lanes|v.childLanes;if(Xi(u,le),u===Nn&&(Cn=Nn=null,We=0),(v.subtreeFlags&2064)===0&&(v.flags&2064)===0||Ne||(Ne=!0,Gu($t,function(){return Ut(),null})),le=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||le){le=Zt.transition,Zt.transition=null;var De=br;br=1;var Qe=cn;cn|=4,Ot.current=null,Ie(u,v),Ve(v,u),Ng(zc),Vl=!!mu,zc=mu=null,u.current=v,st(v),ql(),cn=Qe,br=De,Zt.transition=le}else u.current=v;if(Ne&&(Ne=!1,nt=u,_t=q),le=u.pendingLanes,le===0&&(Et=null),Yr(v.stateNode),yr(u,qr()),d!==null)for(A=u.onRecoverableError,v=0;v<d.length;v++)q=d[v],A(q.value,{componentStack:q.stack,digest:q.digest});if(Qt)throw Qt=!1,u=nn,nn=null,u;return(_t&1)!==0&&u.tag!==0&&Ut(),le=u.pendingLanes,(le&1)!==0?u===Ft?rt++:(rt=0,Ft=u):rt=0,vs(),null}function Ut(){if(nt!==null){var u=uo(_t),d=Zt.transition,v=br;try{if(Zt.transition=null,br=16>u?16:u,nt===null)var A=!1;else{if(u=nt,nt=null,_t=0,(cn&6)!==0)throw Error(t(331));var q=cn;for(cn|=4,U=u.current;U!==null;){var le=U,De=le.child;if((U.flags&16)!==0){var Qe=le.deletions;if(Qe!==null){for(var lt=0;lt<Qe.length;lt++){var Mt=Qe[lt];for(U=Mt;U!==null;){var vn=U;switch(vn.tag){case 0:case 11:case 15:Te(8,vn,le)}var En=vn.child;if(En!==null)En.return=vn,U=En;else for(;U!==null;){vn=U;var mn=vn.sibling,Ln=vn.return;if(je(vn),vn===Mt){U=null;break}if(mn!==null){mn.return=Ln,U=mn;break}U=Ln}}}var Un=le.alternate;if(Un!==null){var qn=Un.child;if(qn!==null){Un.child=null;do{var li=qn.sibling;qn.sibling=null,qn=li}while(qn!==null)}}U=le}}if((le.subtreeFlags&2064)!==0&&De!==null)De.return=le,U=De;else e:for(;U!==null;){if(le=U,(le.flags&2048)!==0)switch(le.tag){case 0:case 11:case 15:Te(9,le,le.return)}var It=le.sibling;if(It!==null){It.return=le.return,U=It;break e}U=le.return}}var dt=u.current;for(U=dt;U!==null;){De=U;var Rt=De.child;if((De.subtreeFlags&2064)!==0&&Rt!==null)Rt.return=De,U=Rt;else e:for(De=dt;U!==null;){if(Qe=U,(Qe.flags&2048)!==0)try{switch(Qe.tag){case 0:case 11:case 15:xe(9,Qe)}}catch(Hn){yn(Qe,Qe.return,Hn)}if(Qe===De){U=null;break e}var xn=Qe.sibling;if(xn!==null){xn.return=Qe.return,U=xn;break e}U=Qe.return}}if(cn=q,vs(),Wn&&typeof Wn.onPostCommitFiberRoot=="function")try{Wn.onPostCommitFiberRoot(ar,u)}catch{}A=!0}return A}finally{br=v,Zt.transition=d}}return!1}function bn(u,d,v){d=Oo(v,d),d=fd(u,d,1),u=bs(u,d,1),d=An(),u!==null&&(fs(u,1,d),yr(u,d))}function yn(u,d,v){if(u.tag===3)bn(u,u,v);else for(;d!==null;){if(d.tag===3){bn(d,u,v);break}else if(d.tag===1){var A=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(Et===null||!Et.has(A))){u=Oo(v,u),u=Jf(d,u,1),d=bs(d,u,1),u=An(),d!==null&&(fs(d,1,u),yr(d,u));break}}d=d.return}}function Yn(u,d,v){var A=u.pingCache;A!==null&&A.delete(d),d=An(),u.pingedLanes|=u.suspendedLanes&v,Nn===u&&(We&v)===v&&(vt===4||vt===3&&(We&130023424)===We&&500>qr()-on?Ui(u,0):Yt|=v),yr(u,d)}function ir(u,d){d===0&&((u.mode&1)===0?d=1:(d=Gi,Gi<<=1,(Gi&130023424)===0&&(Gi=4194304)));var v=An();u=Na(u,d),u!==null&&(fs(u,d,v),yr(u,v))}function Vr(u){var d=u.memoizedState,v=0;d!==null&&(v=d.retryLane),ir(u,v)}function Bi(u,d){var v=0;switch(u.tag){case 13:var A=u.stateNode,q=u.memoizedState;q!==null&&(v=q.retryLane);break;case 19:A=u.stateNode;break;default:throw Error(t(314))}A!==null&&A.delete(d),ir(u,v)}var _d;_d=function(u,d,v){if(u!==null)if(u.memoizedProps!==d.pendingProps||Ri.current)Ni=!0;else{if((u.lanes&v)===0&&(d.flags&128)===0)return Ni=!1,V(u,d,v);Ni=(u.flags&131072)!==0}else Ni=!1,Ur&&(d.flags&1048576)!==0&&pr(d,ml,d.index);switch(d.lanes=0,d.tag){case 2:var A=d.type;C(u,d),u=d.pendingProps;var q=Io(d,Si.current);Qs(d,v),q=ed(null,d,A,u,q,v);var le=ea();return d.flags|=1,typeof q=="object"&&q!==null&&typeof q.render=="function"&&q.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Ci(A)?(le=!0,bu(d)):le=!1,d.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,Nu(d),q.updater=Bu,d.stateNode=q,q._reactInternals=d,ju(d,A,u,v),d=bd(null,d,A,!0,le,v)):(d.tag=0,Ur&&le&&Su(d),Di(null,d,q,v),d=d.child),d;case 16:A=d.elementType;e:{switch(C(u,d),u=d.pendingProps,q=A._init,A=q(A._payload),d.type=A,q=d.tag=GT(A),u=ba(A,u),q){case 0:d=vd(null,d,A,u,v);break e;case 1:d=Ed(null,d,A,u,v);break e;case 11:d=md(null,d,A,u,v);break e;case 14:d=th(null,d,A,ba(A.type,u),v);break e}throw Error(t(306,A,""))}return d;case 0:return A=d.type,q=d.pendingProps,q=d.elementType===A?q:ba(A,q),vd(u,d,A,q,v);case 1:return A=d.type,q=d.pendingProps,q=d.elementType===A?q:ba(A,q),Ed(u,d,A,q,v);case 3:e:{if(qu(d),u===null)throw Error(t(387));A=d.pendingProps,le=d.memoizedState,q=le.element,Pf(u,d),vl(d,A,null,v);var De=d.memoizedState;if(A=De.element,le.isDehydrated)if(le={element:A,isDehydrated:!1,cache:De.cache,pendingSuspenseBoundaries:De.pendingSuspenseBoundaries,transitions:De.transitions},d.updateQueue.baseState=le,d.memoizedState=le,d.flags&256){q=Oo(Error(t(423)),d),d=Il(u,d,A,v,q);break e}else if(A!==q){q=Oo(Error(t(424)),d),d=Il(u,d,A,v,q);break e}else for(Vi=Wa(d.stateNode.containerInfo.firstChild),Fi=d,Ur=!0,ya=null,v=Df(d,null,A,v),d.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(va(),A===q){d=K(u,d,v);break e}Di(u,d,A,v)}d=d.child}return d;case 5:return Zc(d),u===null&&Kc(d),A=d.type,q=d.pendingProps,le=u!==null?u.memoizedProps:null,De=q.children,pu(A,q)?De=null:le!==null&&pu(A,le)&&(d.flags|=32),yd(u,d),Di(u,d,De,v),d.child;case 6:return u===null&&Kc(d),null;case 13:return E(u,d,v);case 4:return Ss(d,d.stateNode.containerInfo),A=d.pendingProps,u===null?d.child=Xs(d,null,A,v):Di(u,d,A,v),d.child;case 11:return A=d.type,q=d.pendingProps,q=d.elementType===A?q:ba(A,q),md(u,d,A,q,v);case 7:return Di(u,d,d.pendingProps,v),d.child;case 8:return Di(u,d,d.pendingProps.children,v),d.child;case 12:return Di(u,d,d.pendingProps.children,v),d.child;case 10:e:{if(A=d.type._context,q=d.pendingProps,le=d.memoizedProps,De=q.value,_r(yl,A._currentValue),A._currentValue=De,le!==null)if(fa(le.value,De)){if(le.children===q.children&&!Ri.current){d=K(u,d,v);break e}}else for(le=d.child,le!==null&&(le.return=d);le!==null;){var Qe=le.dependencies;if(Qe!==null){De=le.child;for(var lt=Qe.firstContext;lt!==null;){if(lt.context===A){if(le.tag===1){lt=Da(-1,v&-v),lt.tag=2;var Mt=le.updateQueue;if(Mt!==null){Mt=Mt.shared;var vn=Mt.pending;vn===null?lt.next=lt:(lt.next=vn.next,vn.next=lt),Mt.pending=lt}}le.lanes|=v,lt=le.alternate,lt!==null&&(lt.lanes|=v),Xc(le.return,v,d),Qe.lanes|=v;break}lt=lt.next}}else if(le.tag===10)De=le.type===d.type?null:le.child;else if(le.tag===18){if(De=le.return,De===null)throw Error(t(341));De.lanes|=v,Qe=De.alternate,Qe!==null&&(Qe.lanes|=v),Xc(De,v,d),De=le.sibling}else De=le.child;if(De!==null)De.return=le;else for(De=le;De!==null;){if(De===d){De=null;break}if(le=De.sibling,le!==null){le.return=De.return,De=le;break}De=De.return}le=De}Di(u,d,q.children,v),d=d.child}return d;case 9:return q=d.type,A=d.pendingProps.children,Qs(d,v),q=Ji(q),A=A(q),d.flags|=1,Di(u,d,A,v),d.child;case 14:return A=d.type,q=ba(A,d.pendingProps),q=ba(A.type,q),th(u,d,A,q,v);case 15:return pd(u,d,d.type,d.pendingProps,v);case 17:return A=d.type,q=d.pendingProps,q=d.elementType===A?q:ba(A,q),C(u,d),d.tag=1,Ci(A)?(u=!0,bu(d)):u=!1,Qs(d,v),Qf(d,A,q),ju(d,A,q,v),bd(null,d,A,!0,u,v);case 19:return G(u,d,v);case 22:return nh(u,d,v)}throw Error(t(156,d.tag))};function Gu(u,d){return mi(u,d)}function qT(u,d,v,A){this.tag=u,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function za(u,d,v,A){return new qT(u,d,v,A)}function Ug(u){return u=u.prototype,!(!u||!u.isReactComponent)}function GT(u){if(typeof u=="function")return Ug(u)?1:0;if(u!=null){if(u=u.$$typeof,u===Be)return 11;if(u===Ye)return 14}return 2}function zo(u,d){var v=u.alternate;return v===null?(v=za(u.tag,d,u.key,u.mode),v.elementType=u.elementType,v.type=u.type,v.stateNode=u.stateNode,v.alternate=u,u.alternate=v):(v.pendingProps=d,v.type=u.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=u.flags&14680064,v.childLanes=u.childLanes,v.lanes=u.lanes,v.child=u.child,v.memoizedProps=u.memoizedProps,v.memoizedState=u.memoizedState,v.updateQueue=u.updateQueue,d=u.dependencies,v.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},v.sibling=u.sibling,v.index=u.index,v.ref=u.ref,v}function rh(u,d,v,A,q,le){var De=2;if(A=u,typeof u=="function")Ug(u)&&(De=1);else if(typeof u=="string")De=5;else e:switch(u){case k:return Nl(v.children,q,le,d);case j:De=8,q|=8;break;case oe:return u=za(12,v,d,q|2),u.elementType=oe,u.lanes=le,u;case pe:return u=za(13,v,d,q),u.elementType=pe,u.lanes=le,u;case ct:return u=za(19,v,d,q),u.elementType=ct,u.lanes=le,u;case Je:return ih(v,q,le,d);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case L:De=10;break e;case Ee:De=9;break e;case Be:De=11;break e;case Ye:De=14;break e;case Le:De=16,A=null;break e}throw Error(t(130,u==null?u:typeof u,""))}return d=za(De,v,d,q),d.elementType=u,d.type=A,d.lanes=le,d}function Nl(u,d,v,A){return u=za(7,u,A,d),u.lanes=v,u}function ih(u,d,v,A){return u=za(22,u,A,d),u.elementType=Je,u.lanes=v,u.stateNode={isHidden:!1},u}function Bg(u,d,v){return u=za(6,u,null,d),u.lanes=v,u}function jg(u,d,v){return d=za(4,u.children!==null?u.children:[],u.key,d),d.lanes=v,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}function $T(u,d,v,A,q){this.tag=d,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ia(0),this.expirationTimes=Ia(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ia(0),this.identifierPrefix=A,this.onRecoverableError=q,this.mutableSourceEagerHydrationData=null}function qg(u,d,v,A,q,le,De,Qe,lt){return u=new $T(u,d,v,Qe,lt),d===1?(d=1,le===!0&&(d|=8)):d=0,le=za(3,null,null,d),u.current=le,le.stateNode=u,le.memoizedState={element:A,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nu(le),u}function HT(u,d,v){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:A==null?null:""+A,children:u,containerInfo:d,implementation:v}}function iy(u){if(!u)return ps;u=u._reactInternals;e:{if(Rr(u)!==u||u.tag!==1)throw Error(t(170));var d=u;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Ci(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(t(171))}if(u.tag===1){var v=u.type;if(Ci(v))return qc(u,v,d)}return d}function ay(u,d,v,A,q,le,De,Qe,lt){return u=qg(v,A,!0,u,q,le,De,Qe,lt),u.context=iy(null),v=u.current,A=An(),q=kn(v),le=Da(A,q),le.callback=d??null,bs(v,le,q),u.current.lanes=q,fs(u,q,A),yr(u,A),u}function ah(u,d,v,A){var q=d.current,le=An(),De=kn(q);return v=iy(v),d.context===null?d.context=v:d.pendingContext=v,d=Da(le,De),d.payload={element:u},A=A===void 0?null:A,A!==null&&(d.callback=A),u=bs(q,d,De),u!==null&&(nr(u,q,De,le),Ro(u,q,De)),De}function sh(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function sy(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var v=u.retryLane;u.retryLane=v!==0&&v<d?v:d}}function Gg(u,d){sy(u,d),(u=u.alternate)&&sy(u,d)}function VT(){return null}var oy=typeof reportError=="function"?reportError:function(u){console.error(u)};function $g(u){this._internalRoot=u}oh.prototype.render=$g.prototype.render=function(u){var d=this._internalRoot;if(d===null)throw Error(t(409));ah(u,d,null,null)},oh.prototype.unmount=$g.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var d=u.containerInfo;ti(function(){ah(null,u,null,null)}),d[Ra]=null}};function oh(u){this._internalRoot=u}oh.prototype.unstable_scheduleHydration=function(u){if(u){var d=ho();u={blockedOn:null,target:u,priority:d};for(var v=0;v<si.length&&d!==0&&d<si[v].priority;v++);si.splice(v,0,u),v===0&&Zo(u)}};function Hg(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function lh(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function ly(){}function KT(u,d,v,A,q){if(q){if(typeof A=="function"){var le=A;A=function(){var Mt=sh(De);le.call(Mt)}}var De=ay(d,A,u,0,null,!1,!1,"",ly);return u._reactRootContainer=De,u[Ra]=De.current,ol(u.nodeType===8?u.parentNode:u),ti(),De}for(;q=u.lastChild;)u.removeChild(q);if(typeof A=="function"){var Qe=A;A=function(){var Mt=sh(lt);Qe.call(Mt)}}var lt=qg(u,0,!1,null,null,!1,!1,"",ly);return u._reactRootContainer=lt,u[Ra]=lt.current,ol(u.nodeType===8?u.parentNode:u),ti(function(){ah(d,lt,v,A)}),lt}function uh(u,d,v,A,q){var le=v._reactRootContainer;if(le){var De=le;if(typeof q=="function"){var Qe=q;q=function(){var lt=sh(De);Qe.call(lt)}}ah(d,De,u,q)}else De=KT(v,d,u,q,A);return sh(De)}co=function(u){switch(u.tag){case 3:var d=u.stateNode;if(d.current.memoizedState.isDehydrated){var v=Wr(d.pendingLanes);v!==0&&(lo(d,v|1),yr(d,qr()),(cn&6)===0&&(at=qr()+500,vs()))}break;case 13:ti(function(){var A=Na(u,1);if(A!==null){var q=An();nr(A,u,1,q)}}),Gg(u,1)}},fo=function(u){if(u.tag===13){var d=Na(u,134217728);if(d!==null){var v=An();nr(d,u,134217728,v)}Gg(u,134217728)}},Xo=function(u){if(u.tag===13){var d=kn(u),v=Na(u,d);if(v!==null){var A=An();nr(v,u,d,A)}Gg(u,d)}},ho=function(){return br},Qo=function(u,d){var v=br;try{return br=u,d()}finally{br=v}},dn=function(u,d,v){switch(d){case"input":if(Xe(u,v),d=v.name,v.type==="radio"&&d!=null){for(v=u;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<v.length;d++){var A=v[d];if(A!==u&&A.form===u.form){var q=Eu(A);if(!q)throw Error(t(90));be(A),Xe(A,q)}}}break;case"textarea":Xt(u,v);break;case"select":d=v.value,d!=null&&ht(u,!!v.multiple,d,!1)}},Rn=Ma,$n=ti;var YT={usingClientEntryPoint:!1,Events:[_o,xo,Eu,Kn,Kt,Ma]},xd={findFiberByHostInstance:Hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WT={bundleType:xd.bundleType,version:xd.version,rendererPackageName:xd.rendererPackageName,rendererConfig:xd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ye.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=wa(u),u===null?null:u.stateNode},findFiberByHostInstance:xd.findFiberByHostInstance||VT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ch.isDisabled&&ch.supportsFiber)try{ar=ch.inject(WT),Wn=ch}catch{}}return aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YT,aa.createPortal=function(u,d){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hg(d))throw Error(t(200));return HT(u,d,null,v)},aa.createRoot=function(u,d){if(!Hg(u))throw Error(t(299));var v=!1,A="",q=oy;return d!=null&&(d.unstable_strictMode===!0&&(v=!0),d.identifierPrefix!==void 0&&(A=d.identifierPrefix),d.onRecoverableError!==void 0&&(q=d.onRecoverableError)),d=qg(u,1,!1,null,null,v,!1,A,q),u[Ra]=d.current,ol(u.nodeType===8?u.parentNode:u),new $g(d)},aa.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(t(188)):(u=Object.keys(u).join(","),Error(t(268,u)));return u=wa(d),u=u===null?null:u.stateNode,u},aa.flushSync=function(u){return ti(u)},aa.hydrate=function(u,d,v){if(!lh(d))throw Error(t(200));return uh(null,u,d,!0,v)},aa.hydrateRoot=function(u,d,v){if(!Hg(u))throw Error(t(405));var A=v!=null&&v.hydratedSources||null,q=!1,le="",De=oy;if(v!=null&&(v.unstable_strictMode===!0&&(q=!0),v.identifierPrefix!==void 0&&(le=v.identifierPrefix),v.onRecoverableError!==void 0&&(De=v.onRecoverableError)),d=ay(d,null,u,1,v??null,q,!1,le,De),u[Ra]=d.current,ol(u),A)for(u=0;u<A.length;u++)v=A[u],q=v._getVersion,q=q(v._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[v,q]:d.mutableSourceEagerHydrationData.push(v,q);return new oh(d)},aa.render=function(u,d,v){if(!lh(d))throw Error(t(200));return uh(null,u,d,!1,v)},aa.unmountComponentAtNode=function(u){if(!lh(u))throw Error(t(40));return u._reactRootContainer?(ti(function(){uh(null,null,u,!1,function(){u._reactRootContainer=null,u[Ra]=null})}),!0):!1},aa.unstable_batchedUpdates=Ma,aa.unstable_renderSubtreeIntoContainer=function(u,d,v,A){if(!lh(v))throw Error(t(200));if(u==null||u._reactInternals===void 0)throw Error(t(38));return uh(u,d,v,!1,A)},aa.version="18.3.1-next-f1338f8080-20240426",aa}var py;function gv(){if(py)return Yg.exports;py=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(e){console.error(e)}}return o(),Yg.exports=iS(),Yg.exports}var yy;function aS(){if(yy)return dh;yy=1;var o=gv();return dh.createRoot=o.createRoot,dh.hydrateRoot=o.hydrateRoot,dh}var sS=aS();/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lS=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),vy=o=>{const e=lS(o);return e.charAt(0).toUpperCase()+e.slice(1)},mv=(...o)=>o.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),uS=o=>{for(const e in o)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=ze.forwardRef(({color:o="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:r="",children:i,iconNode:l,...c},f)=>ze.createElement("svg",{ref:f,...cS,width:e,height:e,stroke:o,strokeWidth:n?Number(t)*24/Number(e):t,className:mv("lucide",r),...!i&&!uS(c)&&{"aria-hidden":"true"},...c},[...l.map(([h,g])=>ze.createElement(h,g)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=(o,e)=>{const t=ze.forwardRef(({className:n,...r},i)=>ze.createElement(dS,{ref:i,iconNode:e,className:mv(`lucide-${oS(vy(o))}`,`lucide-${o}`,n),...r}));return t.displayName=vy(o),t};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],cc=xr("arrow-left",fS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],pv=xr("calendar",hS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=[["rect",{width:"18",height:"14",x:"3",y:"5",rx:"2",ry:"2",key:"12ruh7"}],["path",{d:"M7 15h4M15 15h2M7 11h2M13 11h4",key:"1ueiar"}]],mS=xr("captions",gS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],yS=xr("chevron-down",pS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],yv=xr("chevron-left",vS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],vv=xr("chevron-right",ES);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],TS=xr("circle-alert",bS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Pd=xr("clock",SS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],xS=xr("database",_S);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],Md=xr("film",wS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],AS=xr("folder",IS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],RS=xr("funnel",kS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Ev=xr("grid-3x3",CS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],DS=xr("info",NS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],bv=xr("list",LS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ao=xr("loader-circle",PS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]],Od=xr("monitor-play",MS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],FS=xr("monitor",OS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],is=xr("play",zS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],BS=xr("refresh-cw",US);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],qS=xr("rotate-ccw",jS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],$S=xr("save",GS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ol=xr("search",HS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Mm=xr("settings",VS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Vo=xr("star",KS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]],WS=xr("terminal",YS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ey=xr("trash-2",XS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]],as=xr("tv",QS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],JS=xr("user",ZS);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],t_=xr("users",e_);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],r_=xr("volume-2",n_);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],pp=xr("wifi",i_);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Tv=xr("x",a_);function by(o,e){if(typeof o=="function")return o(e);o!=null&&(o.current=e)}function s_(...o){return e=>{let t=!1;const n=o.map(r=>{const i=by(r,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let r=0;r<n.length;r++){const i=n[r];typeof i=="function"?i():by(o[r],null)}}}}function Gr(...o){return ze.useCallback(s_(...o),o)}function Fd(o){const e=o_(o),t=ze.forwardRef((n,r)=>{const{children:i,...l}=n,c=ze.Children.toArray(i),f=c.find(u_);if(f){const h=f.props.children,g=c.map(p=>p===f?ze.Children.count(h)>1?ze.Children.only(null):ze.isValidElement(h)?h.props.children:null:p);return O.jsx(e,{...l,ref:r,children:ze.isValidElement(h)?ze.cloneElement(h,void 0,g):null})}return O.jsx(e,{...l,ref:r,children:i})});return t.displayName=`${o}.Slot`,t}var Sv=Fd("Slot");function o_(o){const e=ze.forwardRef((t,n)=>{const{children:r,...i}=t,l=ze.isValidElement(r)?d_(r):void 0,c=Gr(l,n);if(ze.isValidElement(r)){const f=c_(i,r.props);return r.type!==ze.Fragment&&(f.ref=c),ze.cloneElement(r,f)}return ze.Children.count(r)>1?ze.Children.only(null):null});return e.displayName=`${o}.SlotClone`,e}var l_=Symbol("radix.slottable");function u_(o){return ze.isValidElement(o)&&typeof o.type=="function"&&"__radixId"in o.type&&o.type.__radixId===l_}function c_(o,e){const t={...e};for(const n in e){const r=o[n],i=e[n];/^on[A-Z]/.test(n)?r&&i?t[n]=(...c)=>{const f=i(...c);return r(...c),f}:r&&(t[n]=r):n==="style"?t[n]={...r,...i}:n==="className"&&(t[n]=[r,i].filter(Boolean).join(" "))}return{...o,...t}}function d_(o){var n,r;let e=(n=Object.getOwnPropertyDescriptor(o.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?o.ref:(e=(r=Object.getOwnPropertyDescriptor(o,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?o.props.ref:o.props.ref||o.ref)}function _v(o){var e,t,n="";if(typeof o=="string"||typeof o=="number")n+=o;else if(typeof o=="object")if(Array.isArray(o)){var r=o.length;for(e=0;e<r;e++)o[e]&&(t=_v(o[e]))&&(n&&(n+=" "),n+=t)}else for(t in o)o[t]&&(n&&(n+=" "),n+=t);return n}function xv(){for(var o,e,t=0,n="",r=arguments.length;t<r;t++)(o=arguments[t])&&(e=_v(o))&&(n&&(n+=" "),n+=e);return n}const Ty=o=>typeof o=="boolean"?`${o}`:o===0?"0":o,Sy=xv,yp=(o,e)=>t=>{var n;if((e==null?void 0:e.variants)==null)return Sy(o,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:i}=e,l=Object.keys(r).map(h=>{const g=t==null?void 0:t[h],p=i==null?void 0:i[h];if(g===null)return null;const y=Ty(g)||Ty(p);return r[h][y]}),c=t&&Object.entries(t).reduce((h,g)=>{let[p,y]=g;return y===void 0||(h[p]=y),h},{}),f=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((h,g)=>{let{class:p,className:y,...T}=g;return Object.entries(T).every(b=>{let[w,R]=b;return Array.isArray(R)?R.includes({...i,...c}[w]):{...i,...c}[w]===R})?[...h,p,y]:h},[]);return Sy(o,l,f,t==null?void 0:t.class,t==null?void 0:t.className)},vp="-",f_=o=>{const e=g_(o),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=o;return{getClassGroupId:l=>{const c=l.split(vp);return c[0]===""&&c.length!==1&&c.shift(),wv(c,e)||h_(l)},getConflictingClassGroupIds:(l,c)=>{const f=t[l]||[];return c&&n[l]?[...f,...n[l]]:f}}},wv=(o,e)=>{var l;if(o.length===0)return e.classGroupId;const t=o[0],n=e.nextPart.get(t),r=n?wv(o.slice(1),n):void 0;if(r)return r;if(e.validators.length===0)return;const i=o.join(vp);return(l=e.validators.find(({validator:c})=>c(i)))==null?void 0:l.classGroupId},_y=/^\[(.+)\]$/,h_=o=>{if(_y.test(o)){const e=_y.exec(o)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},g_=o=>{const{theme:e,classGroups:t}=o,n={nextPart:new Map,validators:[]};for(const r in t)Om(t[r],n,r,e);return n},Om=(o,e,t,n)=>{o.forEach(r=>{if(typeof r=="string"){const i=r===""?e:xy(e,r);i.classGroupId=t;return}if(typeof r=="function"){if(m_(r)){Om(r(n),e,t,n);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([i,l])=>{Om(l,xy(e,i),t,n)})})},xy=(o,e)=>{let t=o;return e.split(vp).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},m_=o=>o.isThemeGetter,p_=o=>{if(o<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const r=(i,l)=>{t.set(i,l),e++,e>o&&(e=0,n=t,t=new Map)};return{get(i){let l=t.get(i);if(l!==void 0)return l;if((l=n.get(i))!==void 0)return r(i,l),l},set(i,l){t.has(i)?t.set(i,l):r(i,l)}}},Fm="!",zm=":",y_=zm.length,v_=o=>{const{prefix:e,experimentalParseClassName:t}=o;let n=r=>{const i=[];let l=0,c=0,f=0,h;for(let b=0;b<r.length;b++){let w=r[b];if(l===0&&c===0){if(w===zm){i.push(r.slice(f,b)),f=b+y_;continue}if(w==="/"){h=b;continue}}w==="["?l++:w==="]"?l--:w==="("?c++:w===")"&&c--}const g=i.length===0?r:r.substring(f),p=E_(g),y=p!==g,T=h&&h>f?h-f:void 0;return{modifiers:i,hasImportantModifier:y,baseClassName:p,maybePostfixModifierPosition:T}};if(e){const r=e+zm,i=n;n=l=>l.startsWith(r)?i(l.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(t){const r=n;n=i=>t({className:i,parseClassName:r})}return n},E_=o=>o.endsWith(Fm)?o.substring(0,o.length-1):o.startsWith(Fm)?o.substring(1):o,b_=o=>{const e=Object.fromEntries(o.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const r=[];let i=[];return n.forEach(l=>{l[0]==="["||e[l]?(r.push(...i.sort(),l),i=[]):i.push(l)}),r.push(...i.sort()),r}},T_=o=>({cache:p_(o.cacheSize),parseClassName:v_(o),sortModifiers:b_(o),...f_(o)}),S_=/\s+/,__=(o,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:r,sortModifiers:i}=e,l=[],c=o.trim().split(S_);let f="";for(let h=c.length-1;h>=0;h-=1){const g=c[h],{isExternal:p,modifiers:y,hasImportantModifier:T,baseClassName:b,maybePostfixModifierPosition:w}=t(g);if(p){f=g+(f.length>0?" "+f:f);continue}let R=!!w,M=n(R?b.substring(0,w):b);if(!M){if(!R){f=g+(f.length>0?" "+f:f);continue}if(M=n(b),!M){f=g+(f.length>0?" "+f:f);continue}R=!1}const Y=i(y).join(":"),Z=T?Y+Fm:Y,ye=Z+M;if(l.includes(ye))continue;l.push(ye);const Re=r(M,R);for(let F=0;F<Re.length;++F){const k=Re[F];l.push(Z+k)}f=g+(f.length>0?" "+f:f)}return f};function x_(){let o=0,e,t,n="";for(;o<arguments.length;)(e=arguments[o++])&&(t=Iv(e))&&(n&&(n+=" "),n+=t);return n}const Iv=o=>{if(typeof o=="string")return o;let e,t="";for(let n=0;n<o.length;n++)o[n]&&(e=Iv(o[n]))&&(t&&(t+=" "),t+=e);return t};function w_(o,...e){let t,n,r,i=l;function l(f){const h=e.reduce((g,p)=>p(g),o());return t=T_(h),n=t.cache.get,r=t.cache.set,i=c,c(f)}function c(f){const h=n(f);if(h)return h;const g=__(f,t);return r(f,g),g}return function(){return i(x_.apply(null,arguments))}}const vi=o=>{const e=t=>t[o]||[];return e.isThemeGetter=!0,e},Av=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,kv=/^\((?:(\w[\w-]*):)?(.+)\)$/i,I_=/^\d+\/\d+$/,A_=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,k_=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,R_=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,C_=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,N_=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,$u=o=>I_.test(o),cr=o=>!!o&&!Number.isNaN(Number(o)),Bo=o=>!!o&&Number.isInteger(Number(o)),Qg=o=>o.endsWith("%")&&cr(o.slice(0,-1)),eo=o=>A_.test(o),D_=()=>!0,L_=o=>k_.test(o)&&!R_.test(o),Rv=()=>!1,P_=o=>C_.test(o),M_=o=>N_.test(o),O_=o=>!Bn(o)&&!jn(o),F_=o=>dc(o,Dv,Rv),Bn=o=>Av.test(o),Dl=o=>dc(o,Lv,L_),Zg=o=>dc(o,q_,cr),wy=o=>dc(o,Cv,Rv),z_=o=>dc(o,Nv,M_),fh=o=>dc(o,Pv,P_),jn=o=>kv.test(o),Id=o=>fc(o,Lv),U_=o=>fc(o,G_),Iy=o=>fc(o,Cv),B_=o=>fc(o,Dv),j_=o=>fc(o,Nv),hh=o=>fc(o,Pv,!0),dc=(o,e,t)=>{const n=Av.exec(o);return n?n[1]?e(n[1]):t(n[2]):!1},fc=(o,e,t=!1)=>{const n=kv.exec(o);return n?n[1]?e(n[1]):t:!1},Cv=o=>o==="position"||o==="percentage",Nv=o=>o==="image"||o==="url",Dv=o=>o==="length"||o==="size"||o==="bg-size",Lv=o=>o==="length",q_=o=>o==="number",G_=o=>o==="family-name",Pv=o=>o==="shadow",$_=()=>{const o=vi("color"),e=vi("font"),t=vi("text"),n=vi("font-weight"),r=vi("tracking"),i=vi("leading"),l=vi("breakpoint"),c=vi("container"),f=vi("spacing"),h=vi("radius"),g=vi("shadow"),p=vi("inset-shadow"),y=vi("text-shadow"),T=vi("drop-shadow"),b=vi("blur"),w=vi("perspective"),R=vi("aspect"),M=vi("ease"),Y=vi("animate"),Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ye=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Re=()=>[...ye(),jn,Bn],F=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],j=()=>[jn,Bn,f],oe=()=>[$u,"full","auto",...j()],L=()=>[Bo,"none","subgrid",jn,Bn],Ee=()=>["auto",{span:["full",Bo,jn,Bn]},Bo,jn,Bn],Be=()=>[Bo,"auto",jn,Bn],pe=()=>["auto","min","max","fr",jn,Bn],ct=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ye=()=>["start","end","center","stretch","center-safe","end-safe"],Le=()=>["auto",...j()],Je=()=>[$u,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...j()],Ge=()=>[o,jn,Bn],tt=()=>[...ye(),Iy,wy,{position:[jn,Bn]}],Ze=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Me=()=>["auto","cover","contain",B_,F_,{size:[jn,Bn]}],$e=()=>[Qg,Id,Dl],mt=()=>["","none","full",h,jn,Bn],Dt=()=>["",cr,Id,Dl],Pe=()=>["solid","dashed","dotted","double"],Fe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ut=()=>[cr,Qg,Iy,wy],W=()=>["","none",b,jn,Bn],Q=()=>["none",cr,jn,Bn],P=()=>["none",cr,jn,Bn],H=()=>[cr,jn,Bn],be=()=>[$u,"full",...j()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[eo],breakpoint:[eo],color:[D_],container:[eo],"drop-shadow":[eo],ease:["in","out","in-out"],font:[O_],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[eo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[eo],shadow:[eo],spacing:["px",cr],text:[eo],"text-shadow":[eo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",$u,Bn,jn,R]}],container:["container"],columns:[{columns:[cr,Bn,jn,c]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Re()}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:oe()}],"inset-x":[{"inset-x":oe()}],"inset-y":[{"inset-y":oe()}],start:[{start:oe()}],end:[{end:oe()}],top:[{top:oe()}],right:[{right:oe()}],bottom:[{bottom:oe()}],left:[{left:oe()}],visibility:["visible","invisible","collapse"],z:[{z:[Bo,"auto",jn,Bn]}],basis:[{basis:[$u,"full","auto",c,...j()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[cr,$u,"auto","initial","none",Bn]}],grow:[{grow:["",cr,jn,Bn]}],shrink:[{shrink:["",cr,jn,Bn]}],order:[{order:[Bo,"first","last","none",jn,Bn]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:Ee()}],"col-start":[{"col-start":Be()}],"col-end":[{"col-end":Be()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:Ee()}],"row-start":[{"row-start":Be()}],"row-end":[{"row-end":Be()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":pe()}],"auto-rows":[{"auto-rows":pe()}],gap:[{gap:j()}],"gap-x":[{"gap-x":j()}],"gap-y":[{"gap-y":j()}],"justify-content":[{justify:[...ct(),"normal"]}],"justify-items":[{"justify-items":[...Ye(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ye()]}],"align-content":[{content:["normal",...ct()]}],"align-items":[{items:[...Ye(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ye(),{baseline:["","last"]}]}],"place-content":[{"place-content":ct()}],"place-items":[{"place-items":[...Ye(),"baseline"]}],"place-self":[{"place-self":["auto",...Ye()]}],p:[{p:j()}],px:[{px:j()}],py:[{py:j()}],ps:[{ps:j()}],pe:[{pe:j()}],pt:[{pt:j()}],pr:[{pr:j()}],pb:[{pb:j()}],pl:[{pl:j()}],m:[{m:Le()}],mx:[{mx:Le()}],my:[{my:Le()}],ms:[{ms:Le()}],me:[{me:Le()}],mt:[{mt:Le()}],mr:[{mr:Le()}],mb:[{mb:Le()}],ml:[{ml:Le()}],"space-x":[{"space-x":j()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":j()}],"space-y-reverse":["space-y-reverse"],size:[{size:Je()}],w:[{w:[c,"screen",...Je()]}],"min-w":[{"min-w":[c,"screen","none",...Je()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[l]},...Je()]}],h:[{h:["screen","lh",...Je()]}],"min-h":[{"min-h":["screen","lh","none",...Je()]}],"max-h":[{"max-h":["screen","lh",...Je()]}],"font-size":[{text:["base",t,Id,Dl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,jn,Zg]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Qg,Bn]}],"font-family":[{font:[U_,Bn,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,jn,Bn]}],"line-clamp":[{"line-clamp":[cr,"none",jn,Zg]}],leading:[{leading:[i,...j()]}],"list-image":[{"list-image":["none",jn,Bn]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",jn,Bn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Ge()}],"text-color":[{text:Ge()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Pe(),"wavy"]}],"text-decoration-thickness":[{decoration:[cr,"from-font","auto",jn,Dl]}],"text-decoration-color":[{decoration:Ge()}],"underline-offset":[{"underline-offset":[cr,"auto",jn,Bn]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",jn,Bn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",jn,Bn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:tt()}],"bg-repeat":[{bg:Ze()}],"bg-size":[{bg:Me()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Bo,jn,Bn],radial:["",jn,Bn],conic:[Bo,jn,Bn]},j_,z_]}],"bg-color":[{bg:Ge()}],"gradient-from-pos":[{from:$e()}],"gradient-via-pos":[{via:$e()}],"gradient-to-pos":[{to:$e()}],"gradient-from":[{from:Ge()}],"gradient-via":[{via:Ge()}],"gradient-to":[{to:Ge()}],rounded:[{rounded:mt()}],"rounded-s":[{"rounded-s":mt()}],"rounded-e":[{"rounded-e":mt()}],"rounded-t":[{"rounded-t":mt()}],"rounded-r":[{"rounded-r":mt()}],"rounded-b":[{"rounded-b":mt()}],"rounded-l":[{"rounded-l":mt()}],"rounded-ss":[{"rounded-ss":mt()}],"rounded-se":[{"rounded-se":mt()}],"rounded-ee":[{"rounded-ee":mt()}],"rounded-es":[{"rounded-es":mt()}],"rounded-tl":[{"rounded-tl":mt()}],"rounded-tr":[{"rounded-tr":mt()}],"rounded-br":[{"rounded-br":mt()}],"rounded-bl":[{"rounded-bl":mt()}],"border-w":[{border:Dt()}],"border-w-x":[{"border-x":Dt()}],"border-w-y":[{"border-y":Dt()}],"border-w-s":[{"border-s":Dt()}],"border-w-e":[{"border-e":Dt()}],"border-w-t":[{"border-t":Dt()}],"border-w-r":[{"border-r":Dt()}],"border-w-b":[{"border-b":Dt()}],"border-w-l":[{"border-l":Dt()}],"divide-x":[{"divide-x":Dt()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Dt()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Pe(),"hidden","none"]}],"divide-style":[{divide:[...Pe(),"hidden","none"]}],"border-color":[{border:Ge()}],"border-color-x":[{"border-x":Ge()}],"border-color-y":[{"border-y":Ge()}],"border-color-s":[{"border-s":Ge()}],"border-color-e":[{"border-e":Ge()}],"border-color-t":[{"border-t":Ge()}],"border-color-r":[{"border-r":Ge()}],"border-color-b":[{"border-b":Ge()}],"border-color-l":[{"border-l":Ge()}],"divide-color":[{divide:Ge()}],"outline-style":[{outline:[...Pe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[cr,jn,Bn]}],"outline-w":[{outline:["",cr,Id,Dl]}],"outline-color":[{outline:Ge()}],shadow:[{shadow:["","none",g,hh,fh]}],"shadow-color":[{shadow:Ge()}],"inset-shadow":[{"inset-shadow":["none",p,hh,fh]}],"inset-shadow-color":[{"inset-shadow":Ge()}],"ring-w":[{ring:Dt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Ge()}],"ring-offset-w":[{"ring-offset":[cr,Dl]}],"ring-offset-color":[{"ring-offset":Ge()}],"inset-ring-w":[{"inset-ring":Dt()}],"inset-ring-color":[{"inset-ring":Ge()}],"text-shadow":[{"text-shadow":["none",y,hh,fh]}],"text-shadow-color":[{"text-shadow":Ge()}],opacity:[{opacity:[cr,jn,Bn]}],"mix-blend":[{"mix-blend":[...Fe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Fe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[cr]}],"mask-image-linear-from-pos":[{"mask-linear-from":ut()}],"mask-image-linear-to-pos":[{"mask-linear-to":ut()}],"mask-image-linear-from-color":[{"mask-linear-from":Ge()}],"mask-image-linear-to-color":[{"mask-linear-to":Ge()}],"mask-image-t-from-pos":[{"mask-t-from":ut()}],"mask-image-t-to-pos":[{"mask-t-to":ut()}],"mask-image-t-from-color":[{"mask-t-from":Ge()}],"mask-image-t-to-color":[{"mask-t-to":Ge()}],"mask-image-r-from-pos":[{"mask-r-from":ut()}],"mask-image-r-to-pos":[{"mask-r-to":ut()}],"mask-image-r-from-color":[{"mask-r-from":Ge()}],"mask-image-r-to-color":[{"mask-r-to":Ge()}],"mask-image-b-from-pos":[{"mask-b-from":ut()}],"mask-image-b-to-pos":[{"mask-b-to":ut()}],"mask-image-b-from-color":[{"mask-b-from":Ge()}],"mask-image-b-to-color":[{"mask-b-to":Ge()}],"mask-image-l-from-pos":[{"mask-l-from":ut()}],"mask-image-l-to-pos":[{"mask-l-to":ut()}],"mask-image-l-from-color":[{"mask-l-from":Ge()}],"mask-image-l-to-color":[{"mask-l-to":Ge()}],"mask-image-x-from-pos":[{"mask-x-from":ut()}],"mask-image-x-to-pos":[{"mask-x-to":ut()}],"mask-image-x-from-color":[{"mask-x-from":Ge()}],"mask-image-x-to-color":[{"mask-x-to":Ge()}],"mask-image-y-from-pos":[{"mask-y-from":ut()}],"mask-image-y-to-pos":[{"mask-y-to":ut()}],"mask-image-y-from-color":[{"mask-y-from":Ge()}],"mask-image-y-to-color":[{"mask-y-to":Ge()}],"mask-image-radial":[{"mask-radial":[jn,Bn]}],"mask-image-radial-from-pos":[{"mask-radial-from":ut()}],"mask-image-radial-to-pos":[{"mask-radial-to":ut()}],"mask-image-radial-from-color":[{"mask-radial-from":Ge()}],"mask-image-radial-to-color":[{"mask-radial-to":Ge()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":ye()}],"mask-image-conic-pos":[{"mask-conic":[cr]}],"mask-image-conic-from-pos":[{"mask-conic-from":ut()}],"mask-image-conic-to-pos":[{"mask-conic-to":ut()}],"mask-image-conic-from-color":[{"mask-conic-from":Ge()}],"mask-image-conic-to-color":[{"mask-conic-to":Ge()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:tt()}],"mask-repeat":[{mask:Ze()}],"mask-size":[{mask:Me()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",jn,Bn]}],filter:[{filter:["","none",jn,Bn]}],blur:[{blur:W()}],brightness:[{brightness:[cr,jn,Bn]}],contrast:[{contrast:[cr,jn,Bn]}],"drop-shadow":[{"drop-shadow":["","none",T,hh,fh]}],"drop-shadow-color":[{"drop-shadow":Ge()}],grayscale:[{grayscale:["",cr,jn,Bn]}],"hue-rotate":[{"hue-rotate":[cr,jn,Bn]}],invert:[{invert:["",cr,jn,Bn]}],saturate:[{saturate:[cr,jn,Bn]}],sepia:[{sepia:["",cr,jn,Bn]}],"backdrop-filter":[{"backdrop-filter":["","none",jn,Bn]}],"backdrop-blur":[{"backdrop-blur":W()}],"backdrop-brightness":[{"backdrop-brightness":[cr,jn,Bn]}],"backdrop-contrast":[{"backdrop-contrast":[cr,jn,Bn]}],"backdrop-grayscale":[{"backdrop-grayscale":["",cr,jn,Bn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[cr,jn,Bn]}],"backdrop-invert":[{"backdrop-invert":["",cr,jn,Bn]}],"backdrop-opacity":[{"backdrop-opacity":[cr,jn,Bn]}],"backdrop-saturate":[{"backdrop-saturate":[cr,jn,Bn]}],"backdrop-sepia":[{"backdrop-sepia":["",cr,jn,Bn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":j()}],"border-spacing-x":[{"border-spacing-x":j()}],"border-spacing-y":[{"border-spacing-y":j()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",jn,Bn]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[cr,"initial",jn,Bn]}],ease:[{ease:["linear","initial",M,jn,Bn]}],delay:[{delay:[cr,jn,Bn]}],animate:[{animate:["none",Y,jn,Bn]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,jn,Bn]}],"perspective-origin":[{"perspective-origin":Re()}],rotate:[{rotate:Q()}],"rotate-x":[{"rotate-x":Q()}],"rotate-y":[{"rotate-y":Q()}],"rotate-z":[{"rotate-z":Q()}],scale:[{scale:P()}],"scale-x":[{"scale-x":P()}],"scale-y":[{"scale-y":P()}],"scale-z":[{"scale-z":P()}],"scale-3d":["scale-3d"],skew:[{skew:H()}],"skew-x":[{"skew-x":H()}],"skew-y":[{"skew-y":H()}],transform:[{transform:[jn,Bn,"","none","gpu","cpu"]}],"transform-origin":[{origin:Re()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:be()}],"translate-x":[{"translate-x":be()}],"translate-y":[{"translate-y":be()}],"translate-z":[{"translate-z":be()}],"translate-none":["translate-none"],accent:[{accent:Ge()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Ge()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",jn,Bn]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",jn,Bn]}],fill:[{fill:["none",...Ge()]}],"stroke-w":[{stroke:[cr,Id,Dl,Zg]}],stroke:[{stroke:["none",...Ge()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},H_=w_($_);function Qr(...o){return H_(xv(o))}const V_=yp("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function vr({className:o,variant:e,size:t,asChild:n=!1,...r}){const i=n?Sv:"button";return O.jsx(i,{"data-slot":"button",className:Qr(V_({variant:e,size:t,className:o})),...r})}function Rd({className:o,type:e,...t}){return O.jsx("input",{type:e,"data-slot":"input",className:Qr("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",o),...t})}function Cr({className:o,...e}){return O.jsx("div",{"data-slot":"card",className:Qr("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",o),...e})}function Ii({className:o,...e}){return O.jsx("div",{"data-slot":"card-header",className:Qr("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",o),...e})}function Ai({className:o,...e}){return O.jsx("div",{"data-slot":"card-title",className:Qr("leading-none font-semibold",o),...e})}function K_({className:o,...e}){return O.jsx("div",{"data-slot":"card-description",className:Qr("text-muted-foreground text-sm",o),...e})}function Nr({className:o,...e}){return O.jsx("div",{"data-slot":"card-content",className:Qr("px-6",o),...e})}var Mv=gv();const Y_=fv(Mv);var W_=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],jr=W_.reduce((o,e)=>{const t=Fd(`Primitive.${e}`),n=ze.forwardRef((r,i)=>{const{asChild:l,...c}=r,f=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),O.jsx(f,{...c,ref:i})});return n.displayName=`Primitive.${e}`,{...o,[e]:n}},{});function X_(o,e){o&&Mv.flushSync(()=>o.dispatchEvent(e))}var Q_="Label",Ov=ze.forwardRef((o,e)=>O.jsx(jr.label,{...o,ref:e,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||((r=o.onMouseDown)==null||r.call(o,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Ov.displayName=Q_;var Z_=Ov;function rs({className:o,...e}){return O.jsx(Z_,{"data-slot":"label",className:Qr("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",o),...e})}const J_=yp("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Fv({className:o,variant:e,...t}){return O.jsx("div",{"data-slot":"alert",role:"alert",className:Qr(J_({variant:e}),o),...t})}function ex({className:o,...e}){return O.jsx("div",{"data-slot":"alert-title",className:Qr("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",o),...e})}function zv({className:o,...e}){return O.jsx("div",{"data-slot":"alert-description",className:Qr("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",o),...e})}function tx({onLogin:o,isLoading:e,error:t}){const[n,r]=ze.useState({server_url:"",username:"",password:""}),i=c=>{c.preventDefault(),o(n)},l=(c,f)=>{r(h=>({...h,[c]:f}))};return O.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4",children:[O.jsx("div",{className:"absolute inset-0 opacity-10",children:O.jsx("div",{className:"grid grid-cols-12 gap-1 h-full",children:Array.from({length:144}).map((c,f)=>O.jsx("div",{className:"bg-white/5 animate-pulse",style:{animationDelay:`${Math.random()*2}s`,animationDuration:`${2+Math.random()*3}s`}},f))})}),O.jsxs(Cr,{className:"w-full max-w-md bg-black/80 border-purple-500/30 backdrop-blur-sm",children:[O.jsxs(Ii,{className:"text-center space-y-4",children:[O.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-600 rounded-full flex items-center justify-center",children:O.jsx(as,{className:"w-8 h-8 text-white"})}),O.jsx(Ai,{className:"text-2xl font-bold text-white",children:"IPTV System"}),O.jsx(K_,{className:"text-gray-300",children:"Conecte-se ao seu servidor Xtream para começar"})]}),O.jsxs(Nr,{className:"space-y-4",children:[t&&O.jsxs(Fv,{className:"border-red-500/50 bg-red-500/10",children:[O.jsx(TS,{className:"h-4 w-4 text-red-400"}),O.jsx(zv,{className:"text-red-300",children:t})]}),O.jsxs("form",{onSubmit:i,className:"space-y-4",children:[O.jsxs("div",{className:"space-y-2",children:[O.jsx(rs,{htmlFor:"server_url",className:"text-gray-300",children:"URL do Servidor"}),O.jsx(Rd,{id:"server_url",type:"url",placeholder:"http://exemplo.com:8080",value:n.server_url,onChange:c=>l("server_url",c.target.value),className:"bg-gray-800/50 border-gray-600 text-white placeholder-gray-400 focus:border-purple-500",required:!0,disabled:e})]}),O.jsxs("div",{className:"space-y-2",children:[O.jsx(rs,{htmlFor:"username",className:"text-gray-300",children:"Usuário"}),O.jsx(Rd,{id:"username",type:"text",placeholder:"Seu usuário",value:n.username,onChange:c=>l("username",c.target.value),className:"bg-gray-800/50 border-gray-600 text-white placeholder-gray-400 focus:border-purple-500",required:!0,disabled:e})]}),O.jsxs("div",{className:"space-y-2",children:[O.jsx(rs,{htmlFor:"password",className:"text-gray-300",children:"Senha"}),O.jsx(Rd,{id:"password",type:"password",placeholder:"Sua senha",value:n.password,onChange:c=>l("password",c.target.value),className:"bg-gray-800/50 border-gray-600 text-white placeholder-gray-400 focus:border-purple-500",required:!0,disabled:e})]}),O.jsx(vr,{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-semibold py-3",disabled:e,children:e?O.jsxs(O.Fragment,{children:[O.jsx(ao,{className:"mr-2 h-4 w-4 animate-spin"}),"Conectando..."]}):O.jsxs(O.Fragment,{children:[O.jsx(pp,{className:"mr-2 h-4 w-4"}),"Conectar"]})})]}),O.jsxs("div",{className:"text-center text-sm text-gray-400 mt-6",children:[O.jsx("p",{children:"Sistema IPTV com interface Smart TV"}),O.jsx("p",{className:"text-xs mt-1",children:"Suporte a streams TS, HLS e qualidade adaptativa"})]})]})]})]})}const nx=yp("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function qa({className:o,variant:e,asChild:t=!1,...n}){const r=t?Sv:"span";return O.jsx(r,{"data-slot":"badge",className:Qr(nx({variant:e}),o),...n})}function rx({dashboardData:o,connectionData:e,onNavigate:t,onSearch:n,onPlayChannel:r,onManageConnection:i,connectionStatus:l="active"}){const[c,f]=ze.useState(new Date),[h,g]=ze.useState(!1);ze.useEffect(()=>{const M=setInterval(()=>{f(new Date)},1e3);return()=>clearInterval(M)},[]);const p=async()=>{if(!e){alert("Dados de conexão não encontrados.");return}g(!0);try{const M="http://localhost:5000/api/iptv",Y=e.id||e.connection_id,ye=await(await fetch(`${M}/sync/${Y}`,{method:"POST"})).json();ye.success?alert("Sincronização iniciada com sucesso! Os dados serão atualizados em breve."):alert(`Erro ao iniciar a sincronização: ${ye.error}`)}catch(M){alert(`Erro de conexão ao tentar sincronizar: ${M.message}`)}finally{g(!1)}},y=M=>M.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),T=M=>M.toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),b=(o==null?void 0:o.statistics)||{},w=(o==null?void 0:o.recent_channels)||[];o!=null&&o.server_info;const R=(o==null?void 0:o.user_info)||{};return O.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white",children:[O.jsx("header",{className:"bg-black/50 backdrop-blur-sm border-b border-purple-500/30 p-4",children:O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center space-x-4",children:[O.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-blue-600 rounded-full flex items-center justify-center",children:O.jsx(as,{className:"w-6 h-6 text-white"})}),O.jsxs("div",{children:[O.jsx("h1",{className:"text-xl font-bold",children:"IPTV System"}),O.jsx("p",{className:"text-sm text-gray-300",children:"Smart TV Experience"})]})]}),O.jsxs("div",{className:"flex items-center space-x-6",children:[O.jsxs("div",{className:"flex items-center space-x-2",children:[O.jsx(pp,{className:`w-4 h-4 ${l==="active"?"text-green-400":"text-red-400"}`}),O.jsx("span",{className:"text-sm",children:l==="active"?"Conectado":"Desconectado"})]}),O.jsxs("div",{className:"text-right",children:[O.jsx("div",{className:"text-lg font-mono",children:y(c)}),O.jsx("div",{className:"text-xs text-gray-300",children:T(c)})]}),O.jsxs(vr,{variant:"outline",size:"sm",onClick:i,className:"border-purple-500/50 text-purple-300 hover:bg-purple-500/20 flex items-center",children:[O.jsx(t_,{className:"w-4 h-4 mr-2"}),O.jsx("span",{children:"Conexão"})]}),O.jsxs(vr,{variant:"outline",size:"sm",onClick:()=>t("settings"),className:"border-purple-500/50 text-purple-300 hover:bg-purple-500/20 flex items-center",children:[O.jsx(Mm,{className:"w-4 h-4 mr-2"}),O.jsx("span",{children:"Configurações"})]})]})]})}),O.jsxs("div",{className:"p-6 space-y-6",children:[O.jsxs("div",{className:"text-center space-y-2",children:[O.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:"Bem-vindo ao seu IPTV"}),O.jsxs("p",{className:"text-gray-300",children:[R.username&&`Olá, ${R.username}!`," Aproveite sua experiência de TV."]})]}),o?O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[O.jsxs(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm",children:[O.jsxs(Ii,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[O.jsx(Ai,{className:"text-sm font-medium text-gray-300",children:"Canais ao Vivo"}),O.jsx(as,{className:"h-4 w-4 text-purple-400"})]}),O.jsxs(Nr,{children:[O.jsx("div",{className:"text-2xl font-bold text-white",children:b.total_live_channels||0}),O.jsx("p",{className:"text-xs text-gray-400",children:"Disponíveis para assistir"})]})]}),O.jsxs(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm",children:[O.jsxs(Ii,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[O.jsx(Ai,{className:"text-sm font-medium text-gray-300",children:"Filmes VOD"}),O.jsx(Md,{className:"h-4 w-4 text-blue-400"})]}),O.jsxs(Nr,{children:[O.jsx("div",{className:"text-2xl font-bold text-white",children:b.total_vod||0}),O.jsx("p",{className:"text-xs text-gray-400",children:"Filmes disponíveis"})]})]}),O.jsxs(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm",children:[O.jsxs(Ii,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[O.jsx(Ai,{className:"text-sm font-medium text-gray-300",children:"Séries"}),O.jsx(Od,{className:"h-4 w-4 text-green-400"})]}),O.jsxs(Nr,{children:[O.jsx("div",{className:"text-2xl font-bold text-white",children:b.total_series||0}),O.jsx("p",{className:"text-xs text-gray-400",children:"Séries disponíveis"})]})]}),O.jsxs(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm",children:[O.jsxs(Ii,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[O.jsx(Ai,{className:"text-sm font-medium text-gray-300",children:"Categorias"}),O.jsx(AS,{className:"h-4 w-4 text-yellow-400"})]}),O.jsxs(Nr,{children:[O.jsx("div",{className:"text-2xl font-bold text-white",children:b.total_categories||0}),O.jsx("p",{className:"text-xs text-gray-400",children:"Organizadas por tipo"})]})]})]}):O.jsxs("div",{className:"flex items-center justify-center py-12",children:[O.jsx(ao,{className:"w-8 h-8 animate-spin text-purple-400"}),O.jsx("span",{className:"ml-2 text-gray-300",children:"Carregando estatísticas..."})]}),O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[O.jsx(Cr,{className:"bg-gradient-to-br from-purple-600/20 to-purple-800/20 border-purple-500/50 backdrop-blur-sm cursor-pointer hover:from-purple-600/30 hover:to-purple-800/30 transition-all duration-300 transform hover:scale-105",onClick:()=>t("live"),children:O.jsxs(Nr,{className:"p-6 text-center space-y-4",children:[O.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-purple-500 to-purple-700 rounded-full flex items-center justify-center",children:O.jsx(as,{className:"w-8 h-8 text-white"})}),O.jsxs("div",{children:[O.jsx("h3",{className:"text-xl font-bold text-white",children:"TV ao Vivo"}),O.jsx("p",{className:"text-gray-300",children:"Assista canais em tempo real"})]}),O.jsxs(qa,{variant:"secondary",className:"bg-purple-500/20 text-purple-300",children:[b.total_live_channels||0," canais"]})]})}),O.jsx(Cr,{className:"bg-gradient-to-br from-blue-600/20 to-blue-800/20 border-blue-500/50 backdrop-blur-sm cursor-pointer hover:from-blue-600/30 hover:to-blue-800/30 transition-all duration-300 transform hover:scale-105",onClick:()=>t("movies"),children:O.jsxs(Nr,{className:"p-6 text-center space-y-4",children:[O.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center",children:O.jsx(Md,{className:"w-8 h-8 text-white"})}),O.jsxs("div",{children:[O.jsx("h3",{className:"text-xl font-bold text-white",children:"Filmes"}),O.jsx("p",{className:"text-gray-300",children:"Catálogo de filmes VOD"})]}),O.jsxs(qa,{variant:"secondary",className:"bg-blue-500/20 text-blue-300",children:[b.total_vod||0," filmes"]})]})}),O.jsx(Cr,{className:"bg-gradient-to-br from-green-600/20 to-green-800/20 border-green-500/50 backdrop-blur-sm cursor-pointer hover:from-green-600/30 hover:to-green-800/30 transition-all duration-300 transform hover:scale-105",onClick:()=>t("series"),children:O.jsxs(Nr,{className:"p-6 text-center space-y-4",children:[O.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-green-500 to-green-700 rounded-full flex items-center justify-center",children:O.jsx(Od,{className:"w-8 h-8 text-white"})}),O.jsxs("div",{children:[O.jsx("h3",{className:"text-xl font-bold text-white",children:"Séries"}),O.jsx("p",{className:"text-gray-300",children:"Episódios e temporadas"})]}),O.jsxs(qa,{variant:"secondary",className:"bg-green-500/20 text-green-300",children:[b.total_series||0," séries"]})]})})]}),o?w.length>0&&O.jsxs(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm",children:[O.jsx(Ii,{children:O.jsxs(Ai,{className:"flex items-center space-x-2 text-white",children:[O.jsx(Pd,{className:"w-5 h-5 text-purple-400"}),O.jsx("span",{children:"Canais Recentes"})]})}),O.jsx(Nr,{children:O.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.slice(0,6).map((M,Y)=>O.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/50 rounded-lg hover:bg-gray-700/50 cursor-pointer transition-colors",onClick:()=>r(M),children:[M.stream_icon?O.jsx("img",{src:M.stream_icon,alt:M.name,className:"w-10 h-10 rounded object-cover",onError:Z=>{Z.target.style.display="none"}}):O.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-blue-600 rounded flex items-center justify-center",children:O.jsx(as,{className:"w-5 h-5 text-white"})}),O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsx("p",{className:"text-sm font-medium text-white truncate",children:M.name}),O.jsx("p",{className:"text-xs text-gray-400",children:M.stream_type==="live"?"TV ao Vivo":M.stream_type==="movie"?"Filme":"Série"})]}),O.jsx(is,{className:"w-4 h-4 text-purple-400"})]},Y))})})]}):O.jsxs("div",{className:"flex items-center justify-center py-12",children:[O.jsx(ao,{className:"w-8 h-8 animate-spin text-purple-400"}),O.jsx("span",{className:"ml-2 text-gray-300",children:"Carregando canais recentes..."})]}),O.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[O.jsxs(vr,{onClick:()=>n(),className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:[O.jsx(Ol,{className:"w-4 h-4 mr-2"}),"Buscar Conteúdo"]}),O.jsxs(vr,{variant:"outline",onClick:p,disabled:h,className:"border-purple-500/50 text-purple-300 hover:bg-purple-500/20",children:[h?O.jsx(ao,{className:"w-4 h-4 mr-2 animate-spin"}):O.jsx(BS,{className:"w-4 h-4 mr-2"}),h?"Sincronizando...":"Sincronizar Dados"]}),O.jsxs(vr,{variant:"outline",onClick:()=>t("epg"),className:"border-purple-500/50 text-purple-300 hover:bg-purple-500/20",children:[O.jsx(pv,{className:"w-4 h-4 mr-2"}),"Guia EPG"]}),O.jsxs(vr,{variant:"outline",onClick:()=>t("favorites"),className:"border-purple-500/50 text-purple-300 hover:bg-purple-500/20",children:[O.jsx(Vo,{className:"w-4 h-4 mr-2"}),"Favoritos"]}),O.jsxs(vr,{variant:"outline",onClick:()=>t("settings"),className:"border-purple-500/50 text-purple-300 hover:bg-purple-500/20",children:[O.jsx(Mm,{className:"w-4 h-4 mr-2"}),"Configurações"]})]})]})]})}function Um(){return Um=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Um.apply(null,arguments)}function Ay(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function Bm(o,e){return Bm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Bm(o,e)}function ix(o,e){o.prototype=Object.create(e.prototype),o.prototype.constructor=o,Bm(o,e)}var ky=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function ax(o,e){return!!(o===e||ky(o)&&ky(e))}function sx(o,e){if(o.length!==e.length)return!1;for(var t=0;t<o.length;t++)if(!ax(o[t],e[t]))return!1;return!0}function Jg(o,e){e===void 0&&(e=sx);var t,n=[],r,i=!1;function l(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];return i&&t===this&&e(c,n)||(r=o.apply(this,c),i=!0,t=this,n=c),r}return l}var ox=typeof performance=="object"&&typeof performance.now=="function",Ry=ox?function(){return performance.now()}:function(){return Date.now()};function Cy(o){cancelAnimationFrame(o.id)}function lx(o,e){var t=Ry();function n(){Ry()-t>=e?o.call(null):r.id=requestAnimationFrame(n)}var r={id:requestAnimationFrame(n)};return r}var em=-1;function Ny(o){if(o===void 0&&(o=!1),em===-1||o){var e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",document.body.appendChild(e),em=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return em}var Hu=null;function Dy(o){if(o===void 0&&(o=!1),Hu===null||o){var e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";var n=document.createElement("div"),r=n.style;return r.width="100px",r.height="100px",e.appendChild(n),document.body.appendChild(e),e.scrollLeft>0?Hu="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?Hu="negative":Hu="positive-ascending"),document.body.removeChild(e),Hu}return Hu}var ux=150,cx=function(e,t){return e};function dx(o){var e,t=o.getItemOffset,n=o.getEstimatedTotalSize,r=o.getItemSize,i=o.getOffsetForIndexAndAlignment,l=o.getStartIndexForOffset,c=o.getStopIndexForStartIndex,f=o.initInstanceProps,h=o.shouldResetStyleCacheOnItemSizeChange,g=o.validateProps;return e=function(p){ix(y,p);function y(b){var w;return w=p.call(this,b)||this,w._instanceProps=f(w.props,Ay(w)),w._outerRef=void 0,w._resetIsScrollingTimeoutId=null,w.state={instance:Ay(w),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof w.props.initialScrollOffset=="number"?w.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},w._callOnItemsRendered=void 0,w._callOnItemsRendered=Jg(function(R,M,Y,Z){return w.props.onItemsRendered({overscanStartIndex:R,overscanStopIndex:M,visibleStartIndex:Y,visibleStopIndex:Z})}),w._callOnScroll=void 0,w._callOnScroll=Jg(function(R,M,Y){return w.props.onScroll({scrollDirection:R,scrollOffset:M,scrollUpdateWasRequested:Y})}),w._getItemStyle=void 0,w._getItemStyle=function(R){var M=w.props,Y=M.direction,Z=M.itemSize,ye=M.layout,Re=w._getItemStyleCache(h&&Z,h&&ye,h&&Y),F;if(Re.hasOwnProperty(R))F=Re[R];else{var k=t(w.props,R,w._instanceProps),j=r(w.props,R,w._instanceProps),oe=Y==="horizontal"||ye==="horizontal",L=Y==="rtl",Ee=oe?k:0;Re[R]=F={position:"absolute",left:L?void 0:Ee,right:L?Ee:void 0,top:oe?0:k,height:oe?"100%":j,width:oe?j:"100%"}}return F},w._getItemStyleCache=void 0,w._getItemStyleCache=Jg(function(R,M,Y){return{}}),w._onScrollHorizontal=function(R){var M=R.currentTarget,Y=M.clientWidth,Z=M.scrollLeft,ye=M.scrollWidth;w.setState(function(Re){if(Re.scrollOffset===Z)return null;var F=w.props.direction,k=Z;if(F==="rtl")switch(Dy()){case"negative":k=-Z;break;case"positive-descending":k=ye-Y-Z;break}return k=Math.max(0,Math.min(k,ye-Y)),{isScrolling:!0,scrollDirection:Re.scrollOffset<k?"forward":"backward",scrollOffset:k,scrollUpdateWasRequested:!1}},w._resetIsScrollingDebounced)},w._onScrollVertical=function(R){var M=R.currentTarget,Y=M.clientHeight,Z=M.scrollHeight,ye=M.scrollTop;w.setState(function(Re){if(Re.scrollOffset===ye)return null;var F=Math.max(0,Math.min(ye,Z-Y));return{isScrolling:!0,scrollDirection:Re.scrollOffset<F?"forward":"backward",scrollOffset:F,scrollUpdateWasRequested:!1}},w._resetIsScrollingDebounced)},w._outerRefSetter=function(R){var M=w.props.outerRef;w._outerRef=R,typeof M=="function"?M(R):M!=null&&typeof M=="object"&&M.hasOwnProperty("current")&&(M.current=R)},w._resetIsScrollingDebounced=function(){w._resetIsScrollingTimeoutId!==null&&Cy(w._resetIsScrollingTimeoutId),w._resetIsScrollingTimeoutId=lx(w._resetIsScrolling,ux)},w._resetIsScrolling=function(){w._resetIsScrollingTimeoutId=null,w.setState({isScrolling:!1},function(){w._getItemStyleCache(-1,null)})},w}y.getDerivedStateFromProps=function(w,R){return fx(w,R),g(w),null};var T=y.prototype;return T.scrollTo=function(w){w=Math.max(0,w),this.setState(function(R){return R.scrollOffset===w?null:{scrollDirection:R.scrollOffset<w?"forward":"backward",scrollOffset:w,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},T.scrollToItem=function(w,R){R===void 0&&(R="auto");var M=this.props,Y=M.itemCount,Z=M.layout,ye=this.state.scrollOffset;w=Math.max(0,Math.min(w,Y-1));var Re=0;if(this._outerRef){var F=this._outerRef;Z==="vertical"?Re=F.scrollWidth>F.clientWidth?Ny():0:Re=F.scrollHeight>F.clientHeight?Ny():0}this.scrollTo(i(this.props,w,R,ye,this._instanceProps,Re))},T.componentDidMount=function(){var w=this.props,R=w.direction,M=w.initialScrollOffset,Y=w.layout;if(typeof M=="number"&&this._outerRef!=null){var Z=this._outerRef;R==="horizontal"||Y==="horizontal"?Z.scrollLeft=M:Z.scrollTop=M}this._callPropsCallbacks()},T.componentDidUpdate=function(){var w=this.props,R=w.direction,M=w.layout,Y=this.state,Z=Y.scrollOffset,ye=Y.scrollUpdateWasRequested;if(ye&&this._outerRef!=null){var Re=this._outerRef;if(R==="horizontal"||M==="horizontal")if(R==="rtl")switch(Dy()){case"negative":Re.scrollLeft=-Z;break;case"positive-ascending":Re.scrollLeft=Z;break;default:var F=Re.clientWidth,k=Re.scrollWidth;Re.scrollLeft=k-F-Z;break}else Re.scrollLeft=Z;else Re.scrollTop=Z}this._callPropsCallbacks()},T.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&Cy(this._resetIsScrollingTimeoutId)},T.render=function(){var w=this.props,R=w.children,M=w.className,Y=w.direction,Z=w.height,ye=w.innerRef,Re=w.innerElementType,F=w.innerTagName,k=w.itemCount,j=w.itemData,oe=w.itemKey,L=oe===void 0?cx:oe,Ee=w.layout,Be=w.outerElementType,pe=w.outerTagName,ct=w.style,Ye=w.useIsScrolling,Le=w.width,Je=this.state.isScrolling,Ge=Y==="horizontal"||Ee==="horizontal",tt=Ge?this._onScrollHorizontal:this._onScrollVertical,Ze=this._getRangeToRender(),Me=Ze[0],$e=Ze[1],mt=[];if(k>0)for(var Dt=Me;Dt<=$e;Dt++)mt.push(ze.createElement(R,{data:j,key:L(Dt,j),index:Dt,isScrolling:Ye?Je:void 0,style:this._getItemStyle(Dt)}));var Pe=n(this.props,this._instanceProps);return ze.createElement(Be||pe||"div",{className:M,onScroll:tt,ref:this._outerRefSetter,style:Um({position:"relative",height:Z,width:Le,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:Y},ct)},ze.createElement(Re||F||"div",{children:mt,ref:ye,style:{height:Ge?"100%":Pe,pointerEvents:Je?"none":void 0,width:Ge?Pe:"100%"}}))},T._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var w=this.props.itemCount;if(w>0){var R=this._getRangeToRender(),M=R[0],Y=R[1],Z=R[2],ye=R[3];this._callOnItemsRendered(M,Y,Z,ye)}}if(typeof this.props.onScroll=="function"){var Re=this.state,F=Re.scrollDirection,k=Re.scrollOffset,j=Re.scrollUpdateWasRequested;this._callOnScroll(F,k,j)}},T._getRangeToRender=function(){var w=this.props,R=w.itemCount,M=w.overscanCount,Y=this.state,Z=Y.isScrolling,ye=Y.scrollDirection,Re=Y.scrollOffset;if(R===0)return[0,0,0,0];var F=l(this.props,Re,this._instanceProps),k=c(this.props,F,Re,this._instanceProps),j=!Z||ye==="backward"?Math.max(1,M):1,oe=!Z||ye==="forward"?Math.max(1,M):1;return[Math.max(0,F-j),Math.max(0,Math.min(R-1,k+oe)),F,k]},y}(ze.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var fx=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},hx=dx({getItemOffset:function(e,t){var n=e.itemSize;return t*n},getItemSize:function(e,t){var n=e.itemSize;return n},getEstimatedTotalSize:function(e){var t=e.itemCount,n=e.itemSize;return n*t},getOffsetForIndexAndAlignment:function(e,t,n,r,i,l){var c=e.direction,f=e.height,h=e.itemCount,g=e.itemSize,p=e.layout,y=e.width,T=c==="horizontal"||p==="horizontal",b=T?y:f,w=Math.max(0,h*g-b),R=Math.min(w,t*g),M=Math.max(0,t*g-b+g+l);switch(n==="smart"&&(r>=M-b&&r<=R+b?n="auto":n="center"),n){case"start":return R;case"end":return M;case"center":{var Y=Math.round(M+(R-M)/2);return Y<Math.ceil(b/2)?0:Y>w+Math.floor(b/2)?w:Y}case"auto":default:return r>=M&&r<=R?r:r<M?M:R}},getStartIndexForOffset:function(e,t){var n=e.itemCount,r=e.itemSize;return Math.max(0,Math.min(n-1,Math.floor(t/r)))},getStopIndexForStartIndex:function(e,t,n){var r=e.direction,i=e.height,l=e.itemCount,c=e.itemSize,f=e.layout,h=e.width,g=r==="horizontal"||f==="horizontal",p=t*c,y=g?h:i,T=Math.ceil((y+n-p)/c);return Math.max(0,Math.min(l-1,t+T-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});let Ga;typeof window<"u"?Ga=window:typeof self<"u"?Ga=self:Ga=global;let jm=null,qm=null;const Ly=20,tm=Ga.clearTimeout,Py=Ga.setTimeout,nm=Ga.cancelAnimationFrame||Ga.mozCancelAnimationFrame||Ga.webkitCancelAnimationFrame,My=Ga.requestAnimationFrame||Ga.mozRequestAnimationFrame||Ga.webkitRequestAnimationFrame;nm==null||My==null?(jm=tm,qm=function(e){return Py(e,Ly)}):(jm=function([e,t]){nm(e),tm(t)},qm=function(e){const t=My(function(){tm(n),e()}),n=Py(function(){nm(t),e()},Ly);return[t,n]});function gx(o){let e,t,n,r,i,l,c;const f=typeof document<"u"&&document.attachEvent;if(!f){l=function(M){const Y=M.__resizeTriggers__,Z=Y.firstElementChild,ye=Y.lastElementChild,Re=Z.firstElementChild;ye.scrollLeft=ye.scrollWidth,ye.scrollTop=ye.scrollHeight,Re.style.width=Z.offsetWidth+1+"px",Re.style.height=Z.offsetHeight+1+"px",Z.scrollLeft=Z.scrollWidth,Z.scrollTop=Z.scrollHeight},i=function(M){return M.offsetWidth!==M.__resizeLast__.width||M.offsetHeight!==M.__resizeLast__.height},c=function(M){if(M.target.className&&typeof M.target.className.indexOf=="function"&&M.target.className.indexOf("contract-trigger")<0&&M.target.className.indexOf("expand-trigger")<0)return;const Y=this;l(this),this.__resizeRAF__&&jm(this.__resizeRAF__),this.__resizeRAF__=qm(function(){i(Y)&&(Y.__resizeLast__.width=Y.offsetWidth,Y.__resizeLast__.height=Y.offsetHeight,Y.__resizeListeners__.forEach(function(Re){Re.call(Y,M)}))})};let y=!1,T="";n="animationstart";const b="Webkit Moz O ms".split(" ");let w="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),R="";{const M=document.createElement("fakeelement");if(M.style.animationName!==void 0&&(y=!0),y===!1){for(let Y=0;Y<b.length;Y++)if(M.style[b[Y]+"AnimationName"]!==void 0){R=b[Y],T="-"+R.toLowerCase()+"-",n=w[Y],y=!0;break}}}t="resizeanim",e="@"+T+"keyframes "+t+" { from { opacity: 0; } to { opacity: 0; } } ",r=T+"animation: 1ms "+t+"; "}const h=function(y){if(!y.getElementById("detectElementResize")){const T=(e||"")+".resize-triggers { "+(r||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',b=y.head||y.getElementsByTagName("head")[0],w=y.createElement("style");w.id="detectElementResize",w.type="text/css",o!=null&&w.setAttribute("nonce",o),w.styleSheet?w.styleSheet.cssText=T:w.appendChild(y.createTextNode(T)),b.appendChild(w)}};return{addResizeListener:function(y,T){if(f)y.attachEvent("onresize",T);else{if(!y.__resizeTriggers__){const b=y.ownerDocument,w=Ga.getComputedStyle(y);w&&w.position==="static"&&(y.style.position="relative"),h(b),y.__resizeLast__={},y.__resizeListeners__=[],(y.__resizeTriggers__=b.createElement("div")).className="resize-triggers";const R=b.createElement("div");R.className="expand-trigger",R.appendChild(b.createElement("div"));const M=b.createElement("div");M.className="contract-trigger",y.__resizeTriggers__.appendChild(R),y.__resizeTriggers__.appendChild(M),y.appendChild(y.__resizeTriggers__),l(y),y.addEventListener("scroll",c,!0),n&&(y.__resizeTriggers__.__animationListener__=function(Z){Z.animationName===t&&l(y)},y.__resizeTriggers__.addEventListener(n,y.__resizeTriggers__.__animationListener__))}y.__resizeListeners__.push(T)}},removeResizeListener:function(y,T){if(f)y.detachEvent("onresize",T);else if(y.__resizeListeners__.splice(y.__resizeListeners__.indexOf(T),1),!y.__resizeListeners__.length){y.removeEventListener("scroll",c,!0),y.__resizeTriggers__.__animationListener__&&(y.__resizeTriggers__.removeEventListener(n,y.__resizeTriggers__.__animationListener__),y.__resizeTriggers__.__animationListener__=null);try{y.__resizeTriggers__=!y.removeChild(y.__resizeTriggers__)}catch{}}}}}class mx extends ze.Component{constructor(...e){super(...e),this.state={height:this.props.defaultHeight||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._didLogDeprecationWarning=!1,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:t,disableWidth:n,onResize:r}=this.props;if(this._parentNode){const i=window.getComputedStyle(this._parentNode)||{},l=parseFloat(i.paddingLeft||"0"),c=parseFloat(i.paddingRight||"0"),f=parseFloat(i.paddingTop||"0"),h=parseFloat(i.paddingBottom||"0"),g=this._parentNode.getBoundingClientRect(),p=g.height-f-h,y=g.width-l-c;if(!t&&this.state.height!==p||!n&&this.state.width!==y){this.setState({height:p,width:y});const T=()=>{this._didLogDeprecationWarning||(this._didLogDeprecationWarning=!0,console.warn("scaledWidth and scaledHeight parameters have been deprecated; use width and height instead"))};typeof r=="function"&&r({height:p,width:y,get scaledHeight(){return T(),p},get scaledWidth(){return T(),y}})}}},this._setRef=t=>{this._autoSizer=t}}componentDidMount(){const{nonce:e}=this.props,t=this._autoSizer?this._autoSizer.parentNode:null;if(t!=null&&t.ownerDocument&&t.ownerDocument.defaultView&&t instanceof t.ownerDocument.defaultView.HTMLElement){this._parentNode=t;const n=t.ownerDocument.defaultView.ResizeObserver;n!=null?(this._resizeObserver=new n(()=>{this._timeoutId=setTimeout(this._onResize,0)}),this._resizeObserver.observe(t)):(this._detectElementResize=gx(e),this._detectElementResize.addResizeListener(t,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),this._timeoutId!==null&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:e,defaultHeight:t,defaultWidth:n,disableHeight:r=!1,disableWidth:i=!1,doNotBailOutOnEmptyChildren:l=!1,nonce:c,onResize:f,style:h={},tagName:g="div",...p}=this.props,{height:y,width:T}=this.state,b={overflow:"visible"},w={};let R=!1;return r||(y===0&&(R=!0),b.height=0,w.height=y,w.scaledHeight=y),i||(T===0&&(R=!0),b.width=0,w.width=T,w.scaledWidth=T),l&&(R=!1),ze.createElement(g,{ref:this._setRef,style:{...b,...h},...p},!R&&e(w))}}const px=async(o,e,t,n)=>{try{const r=await fetch(`/api/iptv/streams/${o}/${e}?category_id=${t}&page=${n}`);if(!r.ok)throw new Error(`HTTP error! status: ${r.status_code}`);return await r.json()}catch(r){return console.error("Error fetching streams page:",r),{success:!1,streams:[],pagination:{has_more:!1}}}};function yx({connectionData:o,contentType:e,categories:t,onBack:n,onSelectCategory:r,onPlayStream:i,onToggleFavorite:l,isLoading:c,favorites:f=[]}){const[h,g]=ze.useState(""),[p,y]=ze.useState(""),[T,b]=ze.useState("grid"),[w,R]=ze.useState(null),[M,Y]=ze.useState([]),[Z,ye]=ze.useState(1),[Re,F]=ze.useState(!0),[k,j]=ze.useState(!1),[oe,L]=ze.useState([]),Ee=ze.useRef(null),Be=ze.useRef(null);ze.useEffect(()=>{const Ze=setTimeout(()=>{y(h)},500);return()=>{clearTimeout(Ze)}},[h]),ze.useEffect(()=>{Y([]),ye(1),F(!0),w&&pe(w.category_id,1,!0)},[w,e]),ze.useEffect(()=>{if(!p.trim())L(M);else{const Ze=p.toLowerCase(),Me=M.filter($e=>$e.n&&$e.n.toLowerCase().includes(Ze));L(Me)}},[p,M]);const pe=ze.useCallback(async(Ze,Me,$e=!1)=>{if(!(!o||!o.id||!Ze)&&!(k&&!$e)&&!(!Re&&!$e)){j(!0);try{const mt=await px(o.id,e,Ze,Me);mt.success?(Y(Dt=>$e?mt.streams:[...Dt,...mt.streams]),ye(Me),F(mt.pagination.has_more)):(console.error("Failed to fetch streams:",mt.error),F(!1))}catch(mt){console.error("Error in fetchAndSetStreams:",mt),F(!1)}finally{j(!1)}}},[o,e,k,Re]);ze.useEffect(()=>{w&&M.length===0&&!k&&pe(w.category_id,1,!0)},[w,M.length,k,pe]);const ct=Ze=>{g(""),R(Ze),r(Ze.category_id)},Ye=Ze=>{Ee.current&&Ee.current.scrollBy({left:Ze==="left"?-300:300,behavior:"smooth"})},Le=()=>{switch(e){case"live":return"TV ao Vivo";case"vod":return"Filmes";case"series":return"Séries";default:return"Conteúdo"}},Je=()=>{switch(e){case"live":return"📺";case"vod":return"🎬";case"series":return"📺";default:return"📁"}},Ge=Ze=>f.includes(Ze),tt=ze.useCallback(({index:Ze,style:Me})=>{const $e=oe[Ze];return Re&&!k&&Ze>=oe.length-10&&pe(w.category_id,Z+1),$e?O.jsx("div",{style:Me,children:T==="grid"?O.jsx(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm hover:bg-black/60 transition-all duration-300 cursor-pointer group",onClick:()=>{console.log("Stream object passed to onPlayStream:",JSON.stringify($e,null,2)),i($e)},children:O.jsxs(Nr,{className:"p-3 space-y-3",children:[O.jsxs("div",{className:"relative aspect-video bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-lg overflow-hidden",children:[$e.ic?O.jsx("img",{src:$e.ic,alt:$e.n,className:"w-full h-full object-cover",loading:"lazy",onError:mt=>{mt.target.style.display="none"}}):O.jsx("div",{className:"w-full h-full flex items-center justify-center",children:O.jsx(is,{className:"w-8 h-8 text-purple-400"})}),O.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:O.jsx(is,{className:"w-8 h-8 text-white"})}),O.jsx(vr,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 w-8 h-8 p-0 bg-black/50 hover:bg-black/70",onClick:mt=>{mt.stopPropagation(),l($e.si)},children:O.jsx(Vo,{className:`w-4 h-4 ${Ge($e.si)?"text-yellow-400 fill-yellow-400":"text-white"}`})})]}),O.jsxs("div",{className:"space-y-1",children:[O.jsxs("h4",{className:"text-sm font-medium text-white truncate",children:[$e.n," // Usando a chave otimizada"]}),O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx(qa,{variant:"secondary",className:"text-xs bg-purple-500/20 text-purple-300",children:e==="live"?"AO VIVO":e==="vod"?"FILME":"SÉRIE"}),$e.a&&O.jsxs("span",{className:"text-xs text-gray-400",children:[O.jsx(Pd,{className:"w-3 h-3 inline mr-1"}),$e.a&&!isNaN($e.a)?new Date($e.a*1e3).toLocaleDateString("pt-BR"):$e.a||""]})]})]})]})},$e.i):O.jsx(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm hover:bg-black/60 transition-all duration-300 cursor-pointer",onClick:()=>{console.log("Stream object passed to onPlayStream:",JSON.stringify($e,null,2)),i($e)},children:O.jsx(Nr,{className:"p-4",children:O.jsxs("div",{className:"flex items-center space-x-4",children:[O.jsx("div",{className:"w-16 h-12 bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded overflow-hidden flex-shrink-0",children:$e.ic?O.jsx("img",{src:$e.ic,alt:$e.n,className:"w-full h-full object-cover",loading:"lazy",onError:mt=>{mt.target.style.display="none"}}):O.jsx("div",{className:"w-full h-full flex items-center justify-center",children:O.jsx(is,{className:"w-4 h-4 text-purple-400"})})}),O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsxs("h4",{className:"text-sm font-medium text-white truncate",children:[$e.n," // Usando a chave otimizada"]}),O.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[O.jsx(qa,{variant:"secondary",className:"text-xs bg-purple-500/20 text-purple-300",children:e==="live"?"AO VIVO":e==="vod"?"FILME":"SÉRIE"}),$e.a&&O.jsxs("span",{className:"text-xs text-gray-400",children:[O.jsx(Pd,{className:"w-3 h-3 inline mr-1"}),$e.a&&!isNaN($e.a)?new Date($e.a*1e3).toLocaleDateString("pt-BR"):$e.a||""]})]})]}),O.jsxs("div",{className:"flex items-center space-x-2",children:[O.jsx(vr,{variant:"ghost",size:"sm",onClick:mt=>{mt.stopPropagation(),l($e.si)},className:"w-8 h-8 p-0",children:O.jsx(Vo,{className:`w-4 h-4 ${Ge($e.si)?"text-yellow-400 fill-yellow-400":"text-gray-400"}`})}),O.jsx(is,{className:"w-5 h-5 text-purple-400"})]})]})})},$e.i)}):null},[oe,T,Ge,i,l,Re,k,pe,w,Z,e]);return O.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white",children:[O.jsx("header",{className:"bg-black/50 backdrop-blur-sm border-b border-purple-500/30 p-4",children:O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center space-x-4",children:[O.jsxs(vr,{variant:"ghost",size:"sm",onClick:n,className:"text-purple-300 hover:bg-purple-500/20",children:[O.jsx(cc,{className:"w-4 h-4 mr-2"}),"Voltar"]}),O.jsxs("div",{className:"flex items-center space-x-2",children:[O.jsx("span",{className:"text-2xl",children:Je()}),O.jsx("h1",{className:"text-xl font-bold",children:Le()})]})]}),O.jsxs("div",{className:"flex items-center space-x-4",children:[O.jsxs("div",{className:"relative flex items-center",children:[O.jsx(Ol,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),O.jsx(Rd,{placeholder:"Buscar...",value:h,onChange:Ze=>g(Ze.target.value),className:"pl-10 bg-gray-800/50 border-gray-600 text-white placeholder-gray-400 focus:border-purple-500 w-64"}),k&&O.jsx(ao,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 animate-spin"})]}),O.jsxs("div",{className:"flex bg-gray-800/50 rounded-lg p-1",children:[O.jsx(vr,{variant:T==="grid"?"default":"ghost",size:"sm",onClick:()=>b("grid"),className:T==="grid"?"bg-purple-600":"text-gray-400",children:O.jsx(Ev,{className:"w-4 h-4"})}),O.jsx(vr,{variant:T==="list"?"default":"ghost",size:"sm",onClick:()=>b("list"),className:T==="list"?"bg-purple-600":"text-gray-400",children:O.jsx(bv,{className:"w-4 h-4"})})]})]})]})}),O.jsxs("div",{className:"p-6 space-y-6 flex-1 flex flex-col",children:[t&&t.length>0&&O.jsxs("div",{className:"space-y-4",children:[O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center",children:[O.jsx(RS,{className:"w-5 h-5 mr-2 text-purple-400"}),"Categorias"]}),O.jsxs("div",{className:"flex space-x-2",children:[O.jsx(vr,{variant:"ghost",size:"sm",onClick:()=>Ye("left"),className:"text-purple-300 hover:bg-purple-500/20",children:O.jsx(yv,{className:"w-4 h-4"})}),O.jsx(vr,{variant:"ghost",size:"sm",onClick:()=>Ye("right"),className:"text-purple-300 hover:bg-purple-500/20",children:O.jsx(vv,{className:"w-4 h-4"})})]})]}),O.jsx("div",{ref:Ee,className:"flex space-x-3 overflow-x-auto scrollbar-hide pb-2",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:t.map(Ze=>O.jsx(vr,{variant:(w==null?void 0:w.category_id)===Ze.category_id?"default":"outline",onClick:()=>ct(Ze),className:`whitespace-nowrap ${(w==null?void 0:w.category_id)===Ze.category_id?"bg-purple-600 text-white":"border-purple-500/50 text-purple-300 hover:bg-purple-500/20"}`,children:Ze.category_name},Ze.category_id))})]}),c||k&&M.length===0?O.jsxs("div",{className:"flex items-center justify-center py-12 flex-1",children:[O.jsx(ao,{className:"w-8 h-8 animate-spin text-purple-400"}),O.jsx("span",{className:"ml-2 text-gray-300",children:"Carregando conteúdo..."})]}):oe.length>0?O.jsxs("div",{className:"space-y-4 flex-1 flex flex-col",children:[O.jsx("div",{className:"flex items-center justify-between",children:O.jsxs("h3",{className:"text-lg font-semibold text-white",children:[w?w.category_name:"Todo o Conteúdo",O.jsxs(qa,{variant:"secondary",className:"ml-2 bg-purple-500/20 text-purple-300",children:[oe.length," itens"]})]})}),O.jsx("div",{className:"flex-1",children:O.jsx(mx,{children:({height:Ze,width:Me})=>O.jsx(hx,{ref:Be,height:Ze,itemCount:oe.length,itemSize:T==="grid"?250:100,width:Me,overscanRowCount:5,children:tt})})}),k&&oe.length>0&&O.jsx("div",{className:"flex justify-center py-4",children:O.jsx(ao,{className:"w-6 h-6 animate-spin text-purple-400"})})]}):O.jsxs("div",{className:"text-center py-12 flex-1 flex flex-col justify-center items-center",children:[O.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-purple-500/20 to-blue-500/20 rounded-full flex items-center justify-center mb-4",children:O.jsx(Ol,{className:"w-8 h-8 text-purple-400"})}),O.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Nenhum conteúdo encontrado"}),O.jsx("p",{className:"text-gray-400",children:h?`Nenhum resultado para "${h}"`:"Selecione uma categoria para ver o conteúdo"})]})]})]})}const Dn=Number.isFinite||function(o){return typeof o=="number"&&isFinite(o)},vx=Number.isSafeInteger||function(o){return typeof o=="number"&&Math.abs(o)<=Ex},Ex=Number.MAX_SAFE_INTEGER||9007199254740991;let Gn=function(o){return o.NETWORK_ERROR="networkError",o.MEDIA_ERROR="mediaError",o.KEY_SYSTEM_ERROR="keySystemError",o.MUX_ERROR="muxError",o.OTHER_ERROR="otherError",o}({}),wt=function(o){return o.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",o.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",o.KEY_SYSTEM_NO_SESSION="keySystemNoSession",o.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",o.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",o.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",o.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",o.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",o.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",o.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",o.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",o.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",o.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",o.MANIFEST_LOAD_ERROR="manifestLoadError",o.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",o.MANIFEST_PARSING_ERROR="manifestParsingError",o.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",o.LEVEL_EMPTY_ERROR="levelEmptyError",o.LEVEL_LOAD_ERROR="levelLoadError",o.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",o.LEVEL_PARSING_ERROR="levelParsingError",o.LEVEL_SWITCH_ERROR="levelSwitchError",o.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",o.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",o.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",o.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",o.FRAG_LOAD_ERROR="fragLoadError",o.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",o.FRAG_DECRYPT_ERROR="fragDecryptError",o.FRAG_PARSING_ERROR="fragParsingError",o.FRAG_GAP="fragGap",o.REMUX_ALLOC_ERROR="remuxAllocError",o.KEY_LOAD_ERROR="keyLoadError",o.KEY_LOAD_TIMEOUT="keyLoadTimeOut",o.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",o.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",o.BUFFER_APPEND_ERROR="bufferAppendError",o.BUFFER_APPENDING_ERROR="bufferAppendingError",o.BUFFER_STALLED_ERROR="bufferStalledError",o.BUFFER_FULL_ERROR="bufferFullError",o.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",o.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",o.ASSET_LIST_LOAD_ERROR="assetListLoadError",o.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",o.ASSET_LIST_PARSING_ERROR="assetListParsingError",o.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",o.INTERNAL_EXCEPTION="internalException",o.INTERNAL_ABORTED="aborted",o.ATTACH_MEDIA_ERROR="attachMediaError",o.UNKNOWN="unknown",o}({}),Se=function(o){return o.MEDIA_ATTACHING="hlsMediaAttaching",o.MEDIA_ATTACHED="hlsMediaAttached",o.MEDIA_DETACHING="hlsMediaDetaching",o.MEDIA_DETACHED="hlsMediaDetached",o.MEDIA_ENDED="hlsMediaEnded",o.STALL_RESOLVED="hlsStallResolved",o.BUFFER_RESET="hlsBufferReset",o.BUFFER_CODECS="hlsBufferCodecs",o.BUFFER_CREATED="hlsBufferCreated",o.BUFFER_APPENDING="hlsBufferAppending",o.BUFFER_APPENDED="hlsBufferAppended",o.BUFFER_EOS="hlsBufferEos",o.BUFFERED_TO_END="hlsBufferedToEnd",o.BUFFER_FLUSHING="hlsBufferFlushing",o.BUFFER_FLUSHED="hlsBufferFlushed",o.MANIFEST_LOADING="hlsManifestLoading",o.MANIFEST_LOADED="hlsManifestLoaded",o.MANIFEST_PARSED="hlsManifestParsed",o.LEVEL_SWITCHING="hlsLevelSwitching",o.LEVEL_SWITCHED="hlsLevelSwitched",o.LEVEL_LOADING="hlsLevelLoading",o.LEVEL_LOADED="hlsLevelLoaded",o.LEVEL_UPDATED="hlsLevelUpdated",o.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",o.LEVELS_UPDATED="hlsLevelsUpdated",o.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",o.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",o.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",o.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",o.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",o.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",o.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",o.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",o.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",o.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",o.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",o.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",o.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",o.CUES_PARSED="hlsCuesParsed",o.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",o.INIT_PTS_FOUND="hlsInitPtsFound",o.FRAG_LOADING="hlsFragLoading",o.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",o.FRAG_LOADED="hlsFragLoaded",o.FRAG_DECRYPTED="hlsFragDecrypted",o.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",o.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",o.FRAG_PARSING_METADATA="hlsFragParsingMetadata",o.FRAG_PARSED="hlsFragParsed",o.FRAG_BUFFERED="hlsFragBuffered",o.FRAG_CHANGED="hlsFragChanged",o.FPS_DROP="hlsFpsDrop",o.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",o.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",o.ERROR="hlsError",o.DESTROYING="hlsDestroying",o.KEY_LOADING="hlsKeyLoading",o.KEY_LOADED="hlsKeyLoaded",o.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",o.BACK_BUFFER_REACHED="hlsBackBufferReached",o.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",o.ASSET_LIST_LOADING="hlsAssetListLoading",o.ASSET_LIST_LOADED="hlsAssetListLoaded",o.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",o.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",o.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",o.INTERSTITIAL_STARTED="hlsInterstitialStarted",o.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",o.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",o.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",o.INTERSTITIAL_ENDED="hlsInterstitialEnded",o.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",o.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",o.EVENT_CUE_ENTER="hlsEventCueEnter",o}({});var mr={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Fn={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class Vu{constructor(e,t=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class bx{constructor(e,t,n,r=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Vu(e),this.fast_=new Vu(t),this.defaultTTFB_=r,this.ttfb_=new Vu(e)}update(e,t){const{slow_:n,fast_:r,ttfb_:i}=this;n.halfLife!==e&&(this.slow_=new Vu(e,n.getEstimate(),n.getTotalWeight())),r.halfLife!==t&&(this.fast_=new Vu(t,r.getEstimate(),r.getTotalWeight())),i.halfLife!==e&&(this.ttfb_=new Vu(e,i.getEstimate(),i.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const n=8*t,r=e/1e3,i=n/r;this.fast_.sample(r,i),this.slow_.sample(r,i)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function Tx(o,e,t){return(e=_x(e))in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function Or(){return Or=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Or.apply(null,arguments)}function Oy(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable})),t.push.apply(t,n)}return t}function Mr(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Oy(Object(t),!0).forEach(function(n){Tx(o,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):Oy(Object(t)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(t,n))})}return o}function Sx(o,e){if(typeof o!="object"||!o)return o;var t=o[Symbol.toPrimitive];if(t!==void 0){var n=t.call(o,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(o)}function _x(o){var e=Sx(o,"string");return typeof e=="symbol"?e:e+""}class Ha{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n=`[${e}]:`;this.trace=$o,this.debug=t.debug.bind(null,n),this.log=t.log.bind(null,n),this.warn=t.warn.bind(null,n),this.info=t.info.bind(null,n),this.error=t.error.bind(null,n)}}const $o=function(){},xx={trace:$o,debug:$o,log:$o,warn:$o,info:$o,error:$o};function Gm(){return Or({},xx)}function wx(o,e){const t=self.console[o];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${o}] >`):$o}function Fy(o,e,t){return e[o]?e[o].bind(e):wx(o,t)}const $m=Gm();function Ix(o,e,t){const n=Gm();if(typeof console=="object"&&o===!0||typeof o=="object"){const r=["debug","log","info","warn","error"];r.forEach(i=>{n[i]=Fy(i,o,t)});try{n.log(`Debug logs enabled for "${e}" in hls.js version 1.6.11`)}catch{return Gm()}r.forEach(i=>{$m[i]=Fy(i,o)})}else Or($m,n);return n}const Dr=$m;function Ko(o=!0){return typeof self>"u"?void 0:(o||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function Ax(o){return typeof self<"u"&&o===self.ManagedMediaSource}function Uv(o,e){const t=Object.keys(o),n=Object.keys(e),r=t.length,i=n.length;return!r||!i||r===i&&!t.some(l=>n.indexOf(l)===-1)}function xa(o,e=!1){if(typeof TextDecoder<"u"){const h=new TextDecoder("utf-8").decode(o);if(e){const g=h.indexOf("\0");return g!==-1?h.substring(0,g):h}return h.replace(/\0/g,"")}const t=o.length;let n,r,i,l="",c=0;for(;c<t;){if(n=o[c++],n===0&&e)return l;if(n===0||n===3)continue;switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(n);break;case 12:case 13:r=o[c++],l+=String.fromCharCode((n&31)<<6|r&63);break;case 14:r=o[c++],i=o[c++],l+=String.fromCharCode((n&15)<<12|(r&63)<<6|(i&63)<<0);break}}return l}function Sa(o){let e="";for(let t=0;t<o.length;t++){let n=o[t].toString(16);n.length<2&&(n="0"+n),e+=n}return e}function Bv(o){return Uint8Array.from(o.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function kx(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var rm={exports:{}},zy;function Rx(){return zy||(zy=1,function(o,e){(function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,l=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,c={buildAbsoluteURL:function(f,h,g){if(g=g||{},f=f.trim(),h=h.trim(),!h){if(!g.alwaysNormalize)return f;var p=c.parseURL(f);if(!p)throw new Error("Error trying to parse base URL.");return p.path=c.normalizePath(p.path),c.buildURLFromParts(p)}var y=c.parseURL(h);if(!y)throw new Error("Error trying to parse relative URL.");if(y.scheme)return g.alwaysNormalize?(y.path=c.normalizePath(y.path),c.buildURLFromParts(y)):h;var T=c.parseURL(f);if(!T)throw new Error("Error trying to parse base URL.");if(!T.netLoc&&T.path&&T.path[0]!=="/"){var b=r.exec(T.path);T.netLoc=b[1],T.path=b[2]}T.netLoc&&!T.path&&(T.path="/");var w={scheme:T.scheme,netLoc:y.netLoc,path:null,params:y.params,query:y.query,fragment:y.fragment};if(!y.netLoc&&(w.netLoc=T.netLoc,y.path[0]!=="/"))if(!y.path)w.path=T.path,y.params||(w.params=T.params,y.query||(w.query=T.query));else{var R=T.path,M=R.substring(0,R.lastIndexOf("/")+1)+y.path;w.path=c.normalizePath(M)}return w.path===null&&(w.path=g.alwaysNormalize?c.normalizePath(y.path):y.path),c.buildURLFromParts(w)},parseURL:function(f){var h=n.exec(f);return h?{scheme:h[1]||"",netLoc:h[2]||"",path:h[3]||"",params:h[4]||"",query:h[5]||"",fragment:h[6]||""}:null},normalizePath:function(f){for(f=f.split("").reverse().join("").replace(i,"");f.length!==(f=f.replace(l,"")).length;);return f.split("").reverse().join("")},buildURLFromParts:function(f){return f.scheme+f.netLoc+f.path+f.params+f.query+f.fragment}};o.exports=c})()}(rm)),rm.exports}var Ep=Rx();class bp{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Br={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class jv{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,Nx(this,"stats")}setByteRange(e,t){const n=e.split("@",2);let r;n.length===1?r=(t==null?void 0:t.byteRangeEndOffset)||0:r=parseInt(n[1]),this._byteRange=[r,parseInt(n[0])+r]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[Br.AUDIO]:null,[Br.VIDEO]:null,[Br.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new bp),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Ep.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Br.AUDIO]=null,e[Br.VIDEO]=null,e[Br.AUDIOVIDEO]=null}}function gi(o){return o.sn!=="initSegment"}class im extends jv{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],t=this.byteRange[1];if(Dn(e)&&Dn(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const n=Object.keys(this.levelkeys);if(n.length===1){const r=this._decryptdata=this.levelkeys[n[0]]||null;if(r)return r.getDecryptData(this.sn)}}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=Dn(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var t;const n=Object.keys(this.levelkeys),r=n.length;if(r>1||r===1&&(t=this.levelkeys[n[0]])!=null&&t.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!Dn(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return gi(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,n,r,i,l=!1){const{elementaryStreams:c}=this,f=c[e];if(!f){c[e]={startPTS:t,endPTS:n,startDTS:r,endDTS:i,partial:l};return}f.startPTS=Math.min(f.startPTS,t),f.endPTS=Math.max(f.endPTS,n),f.startDTS=Math.min(f.startDTS,r),f.endDTS=Math.max(f.endDTS,i)}}class Cx extends jv{constructor(e,t,n,r,i){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=r;const l=e.enumeratedString("BYTERANGE");l&&this.setByteRange(l,i),i&&(this.fragOffset=i.fragOffset+i.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function qv(o,e){const t=Object.getPrototypeOf(o);if(t){const n=Object.getOwnPropertyDescriptor(t,e);return n||qv(t,e)}}function Nx(o,e){const t=qv(o,e);t&&(t.enumerable=!0,Object.defineProperty(o,e,t))}const Uy=Math.pow(2,32)-1,Dx=[].push,Gv={video:1,audio:2,id3:3,text:4};function Ei(o){return String.fromCharCode.apply(null,o)}function $v(o,e){const t=o[e]<<8|o[e+1];return t<0?65536+t:t}function Jn(o,e){const t=Hv(o,e);return t<0?4294967296+t:t}function By(o,e){let t=Jn(o,e);return t*=Math.pow(2,32),t+=Jn(o,e+4),t}function Hv(o,e){return o[e]<<24|o[e+1]<<16|o[e+2]<<8|o[e+3]}function Lx(o){const e=o.byteLength;for(let t=0;t<e;){const n=Jn(o,t);if(n>8&&o[t+4]===109&&o[t+5]===111&&o[t+6]===111&&o[t+7]===102)return!0;t=n>1?t+n:e}return!1}function dr(o,e){const t=[];if(!e.length)return t;const n=o.byteLength;for(let r=0;r<n;){const i=Jn(o,r),l=Ei(o.subarray(r+4,r+8)),c=i>1?r+i:n;if(l===e[0])if(e.length===1)t.push(o.subarray(r+8,c));else{const f=dr(o.subarray(r+8,c),e.slice(1));f.length&&Dx.apply(t,f)}r=c}return t}function Px(o){const e=[],t=o[0];let n=8;const r=Jn(o,n);n+=4;let i=0,l=0;t===0?(i=Jn(o,n),l=Jn(o,n+4),n+=8):(i=By(o,n),l=By(o,n+8),n+=16),n+=2;let c=o.length+l;const f=$v(o,n);n+=2;for(let h=0;h<f;h++){let g=n;const p=Jn(o,g);g+=4;const y=p&2147483647;if((p&2147483648)>>>31===1)return Dr.warn("SIDX has hierarchical references (not supported)"),null;const b=Jn(o,g);g+=4,e.push({referenceSize:y,subsegmentDuration:b,info:{duration:b/r,start:c,end:c+y-1}}),c+=y,g+=4,n=g}return{earliestPresentationTime:i,timescale:r,version:t,referencesCount:f,references:e}}function Vv(o){const e=[],t=dr(o,["moov","trak"]);for(let r=0;r<t.length;r++){const i=t[r],l=dr(i,["tkhd"])[0];if(l){let c=l[0];const f=Jn(l,c===0?12:20),h=dr(i,["mdia","mdhd"])[0];if(h){c=h[0];const g=Jn(h,c===0?12:20),p=dr(i,["mdia","hdlr"])[0];if(p){const y=Ei(p.subarray(8,12)),T={soun:Br.AUDIO,vide:Br.VIDEO}[y],b=dr(i,["mdia","minf","stbl","stsd"])[0],w=Mx(b);T?(e[f]={timescale:g,type:T,stsd:w},e[T]=Mr({timescale:g,id:f},w)):e[f]={timescale:g,type:y,stsd:w}}}}}return dr(o,["moov","mvex","trex"]).forEach(r=>{const i=Jn(r,4),l=e[i];l&&(l.default={duration:Jn(r,12),flags:Jn(r,20)})}),e}function Mx(o){const e=o.subarray(8),t=e.subarray(86),n=Ei(e.subarray(4,8));let r=n,i;const l=n==="enca"||n==="encv";if(l){const h=dr(e,[n])[0].subarray(n==="enca"?28:78);dr(h,["sinf"]).forEach(p=>{const y=dr(p,["schm"])[0];if(y){const T=Ei(y.subarray(4,8));if(T==="cbcs"||T==="cenc"){const b=dr(p,["frma"])[0];b&&(r=Ei(b))}}})}const c=r;switch(r){case"avc1":case"avc2":case"avc3":case"avc4":{const f=dr(t,["avcC"])[0];f&&f.length>3&&(r+="."+mh(f[1])+mh(f[2])+mh(f[3]),i=gh(c==="avc1"?"dva1":"dvav",t));break}case"mp4a":{const f=dr(e,[n])[0],h=dr(f.subarray(28),["esds"])[0];if(h&&h.length>7){let g=4;if(h[g++]!==3)break;g=am(h,g),g+=2;const p=h[g++];if(p&128&&(g+=2),p&64&&(g+=h[g++]),h[g++]!==4)break;g=am(h,g);const y=h[g++];if(y===64)r+="."+mh(y);else break;if(g+=12,h[g++]!==5)break;g=am(h,g);const T=h[g++];let b=(T&248)>>3;b===31&&(b+=1+((T&7)<<3)+((h[g]&224)>>5)),r+="."+b}break}case"hvc1":case"hev1":{const f=dr(t,["hvcC"])[0];if(f&&f.length>12){const h=f[1],g=["","A","B","C"][h>>6],p=h&31,y=Jn(f,2),T=(h&32)>>5?"H":"L",b=f[12],w=f.subarray(6,12);r+="."+g+p,r+="."+Ox(y).toString(16).toUpperCase(),r+="."+T+b;let R="";for(let M=w.length;M--;){const Y=w[M];(Y||R)&&(R="."+Y.toString(16).toUpperCase()+R)}r+=R}i=gh(c=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{r=gh(r,t)||r;break}case"vp09":{const f=dr(t,["vpcC"])[0];if(f&&f.length>6){const h=f[4],g=f[5],p=f[6]>>4&15;r+="."+Is(h)+"."+Is(g)+"."+Is(p)}break}case"av01":{const f=dr(t,["av1C"])[0];if(f&&f.length>2){const h=f[1]>>>5,g=f[1]&31,p=f[2]>>>7?"H":"M",y=(f[2]&64)>>6,T=(f[2]&32)>>5,b=h===2&&y?T?12:10:y?10:8,w=(f[2]&16)>>4,R=(f[2]&8)>>3,M=(f[2]&4)>>2,Y=f[2]&3;r+="."+h+"."+Is(g)+p+"."+Is(b)+"."+w+"."+R+M+Y+"."+Is(1)+"."+Is(1)+"."+Is(1)+"."+0,i=gh("dav1",t)}break}}return{codec:r,encrypted:l,supplemental:i}}function gh(o,e){const t=dr(e,["dvvC"]),n=t.length?t[0]:dr(e,["dvcC"])[0];if(n){const r=n[2]>>1&127,i=n[2]<<5&32|n[3]>>3&31;return o+"."+Is(r)+"."+Is(i)}}function Ox(o){let e=0;for(let t=0;t<32;t++)e|=(o>>t&1)<<31-t;return e>>>0}function am(o,e){const t=e+5;for(;o[e++]&128&&e<t;);return e}function mh(o){return("0"+o.toString(16).toUpperCase()).slice(-2)}function Is(o){return(o<10?"0":"")+o}function Fx(o,e){if(!o||!e)return;const t=e.keyId;t&&e.isCommonEncryption&&dr(o,["moov","trak"]).forEach(r=>{const l=dr(r,["mdia","minf","stbl","stsd"])[0].subarray(8);let c=dr(l,["enca"]);const f=c.length>0;f||(c=dr(l,["encv"])),c.forEach(h=>{const g=f?h.subarray(28):h.subarray(78);dr(g,["sinf"]).forEach(y=>{const T=Kv(y);if(T){const b=T.subarray(8,24);b.some(w=>w!==0)||(Dr.log(`[eme] Patching keyId in 'enc${f?"a":"v"}>sinf>>tenc' box: ${Sa(b)} -> ${Sa(t)}`),T.set(t,8))}})})})}function Kv(o){const e=dr(o,["schm"])[0];if(e){const t=Ei(e.subarray(4,8));if(t==="cbcs"||t==="cenc")return dr(o,["schi","tenc"])[0]}return null}function zx(o,e,t){const n={},r=dr(o,["moof","traf"]);for(let i=0;i<r.length;i++){const l=r[i],c=dr(l,["tfhd"])[0],f=Jn(c,4),h=e[f];if(!h)continue;n[f]||(n[f]={start:NaN,duration:0,sampleCount:0,timescale:h.timescale,type:h.type});const g=n[f],p=dr(l,["tfdt"])[0];if(p){const Z=p[0];let ye=Jn(p,4);Z===1&&(ye===Uy?t.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(ye*=Uy+1,ye+=Jn(p,8))),Dn(ye)&&(!Dn(g.start)||ye<g.start)&&(g.start=ye)}const y=h.default,T=Jn(c,0)|(y==null?void 0:y.flags);let b=(y==null?void 0:y.duration)||0;T&8&&(T&2?b=Jn(c,12):b=Jn(c,8));const w=dr(l,["trun"]);let R=g.start||0,M=0,Y=b;for(let Z=0;Z<w.length;Z++){const ye=w[Z],Re=Jn(ye,4),F=g.sampleCount;g.sampleCount+=Re;const k=ye[3]&1,j=ye[3]&4,oe=ye[2]&1,L=ye[2]&2,Ee=ye[2]&4,Be=ye[2]&8;let pe=8,ct=Re;for(k&&(pe+=4),j&&Re&&(!(ye[pe+1]&1)&&g.keyFrameIndex===void 0&&(g.keyFrameIndex=F),pe+=4,oe?(Y=Jn(ye,pe),pe+=4):Y=b,L&&(pe+=4),Be&&(pe+=4),R+=Y,M+=Y,ct--);ct--;)oe?(Y=Jn(ye,pe),pe+=4):Y=b,L&&(pe+=4),Ee&&(ye[pe+1]&1||g.keyFrameIndex===void 0&&(g.keyFrameIndex=g.sampleCount-(ct+1),g.keyFrameStart=R),pe+=4),Be&&(pe+=4),R+=Y,M+=Y;!M&&b&&(M+=b*Re)}g.duration+=M}if(!Object.keys(n).some(i=>n[i].duration)){let i=1/0,l=0;const c=dr(o,["sidx"]);for(let f=0;f<c.length;f++){const h=Px(c[f]);if(h!=null&&h.references){i=Math.min(i,h.earliestPresentationTime/h.timescale);const g=h.references.reduce((p,y)=>p+y.info.duration||0,0);l=Math.max(l,g+h.earliestPresentationTime/h.timescale)}}l&&Dn(l)&&Object.keys(n).forEach(f=>{n[f].duration||(n[f].duration=l*n[f].timescale-n[f].start)})}return n}function Ux(o){const e={valid:null,remainder:null},t=dr(o,["moof"]);if(t.length<2)return e.remainder=o,e;const n=t[t.length-1];return e.valid=o.slice(0,n.byteOffset-8),e.remainder=o.slice(n.byteOffset-8),e}function $a(o,e){const t=new Uint8Array(o.length+e.length);return t.set(o),t.set(e,o.length),t}function jy(o,e){const t=[],n=e.samples,r=e.timescale,i=e.id;let l=!1;return dr(n,["moof"]).map(f=>{const h=f.byteOffset-8;dr(f,["traf"]).map(p=>{const y=dr(p,["tfdt"]).map(T=>{const b=T[0];let w=Jn(T,4);return b===1&&(w*=Math.pow(2,32),w+=Jn(T,8)),w/r})[0];return y!==void 0&&(o=y),dr(p,["tfhd"]).map(T=>{const b=Jn(T,4),w=Jn(T,0)&16777215,R=(w&1)!==0,M=(w&2)!==0,Y=(w&8)!==0;let Z=0;const ye=(w&16)!==0;let Re=0;const F=(w&32)!==0;let k=8;b===i&&(R&&(k+=8),M&&(k+=4),Y&&(Z=Jn(T,k),k+=4),ye&&(Re=Jn(T,k),k+=4),F&&(k+=4),e.type==="video"&&(l=ag(e.codec)),dr(p,["trun"]).map(j=>{const oe=j[0],L=Jn(j,0)&16777215,Ee=(L&1)!==0;let Be=0;const pe=(L&4)!==0,ct=(L&256)!==0;let Ye=0;const Le=(L&512)!==0;let Je=0;const Ge=(L&1024)!==0,tt=(L&2048)!==0;let Ze=0;const Me=Jn(j,4);let $e=8;Ee&&(Be=Jn(j,$e),$e+=4),pe&&($e+=4);let mt=Be+h;for(let Dt=0;Dt<Me;Dt++){if(ct?(Ye=Jn(j,$e),$e+=4):Ye=Z,Le?(Je=Jn(j,$e),$e+=4):Je=Re,Ge&&($e+=4),tt&&(oe===0?Ze=Jn(j,$e):Ze=Hv(j,$e),$e+=4),e.type===Br.VIDEO){let Pe=0;for(;Pe<Je;){const Fe=Jn(n,mt);if(mt+=4,Bx(l,n[mt])){const ut=n.subarray(mt,mt+Fe);Tp(ut,l?2:1,o+Ze/r,t)}mt+=Fe,Pe+=Fe+4}}o+=Ye/r}}))})})}),t}function ag(o){if(!o)return!1;const e=o.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function Bx(o,e){if(o){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function Tp(o,e,t,n){const r=Yv(o);let i=0;i+=e;let l=0,c=0,f=0;for(;i<r.length;){l=0;do{if(i>=r.length)break;f=r[i++],l+=f}while(f===255);c=0;do{if(i>=r.length)break;f=r[i++],c+=f}while(f===255);const h=r.length-i;let g=i;if(c<h)i+=c;else if(c>h){Dr.error(`Malformed SEI payload. ${c} is too small, only ${h} bytes left to parse.`);break}if(l===4){if(r[g++]===181){const y=$v(r,g);if(g+=2,y===49){const T=Jn(r,g);if(g+=4,T===1195456820){const b=r[g++];if(b===3){const w=r[g++],R=31&w,M=64&w,Y=M?2+R*3:0,Z=new Uint8Array(Y);if(M){Z[0]=w;for(let ye=1;ye<Y;ye++)Z[ye]=r[g++]}n.push({type:b,payloadType:l,pts:t,bytes:Z})}}}}}else if(l===5&&c>16){const p=[];for(let b=0;b<16;b++){const w=r[g++].toString(16);p.push(w.length==1?"0"+w:w),(b===3||b===5||b===7||b===9)&&p.push("-")}const y=c-16,T=new Uint8Array(y);for(let b=0;b<y;b++)T[b]=r[g++];n.push({payloadType:l,pts:t,uuid:p.join(""),userData:xa(T),userDataBytes:T})}}}function Yv(o){const e=o.byteLength,t=[];let n=1;for(;n<e-2;)o[n]===0&&o[n+1]===0&&o[n+2]===3?(t.push(n+2),n+=2):n++;if(t.length===0)return o;const r=e-t.length,i=new Uint8Array(r);let l=0;for(n=0;n<r;l++,n++)l===t[0]&&(l++,t.shift()),i[n]=o[l];return i}function jx(o){const e=o[0];let t="",n="",r=0,i=0,l=0,c=0,f=0,h=0;if(e===0){for(;Ei(o.subarray(h,h+1))!=="\0";)t+=Ei(o.subarray(h,h+1)),h+=1;for(t+=Ei(o.subarray(h,h+1)),h+=1;Ei(o.subarray(h,h+1))!=="\0";)n+=Ei(o.subarray(h,h+1)),h+=1;n+=Ei(o.subarray(h,h+1)),h+=1,r=Jn(o,12),i=Jn(o,16),c=Jn(o,20),f=Jn(o,24),h=28}else if(e===1){h+=4,r=Jn(o,h),h+=4;const p=Jn(o,h);h+=4;const y=Jn(o,h);for(h+=4,l=2**32*p+y,vx(l)||(l=Number.MAX_SAFE_INTEGER,Dr.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),c=Jn(o,h),h+=4,f=Jn(o,h),h+=4;Ei(o.subarray(h,h+1))!=="\0";)t+=Ei(o.subarray(h,h+1)),h+=1;for(t+=Ei(o.subarray(h,h+1)),h+=1;Ei(o.subarray(h,h+1))!=="\0";)n+=Ei(o.subarray(h,h+1)),h+=1;n+=Ei(o.subarray(h,h+1)),h+=1}const g=o.subarray(h,o.byteLength);return{schemeIdUri:t,value:n,timeScale:r,presentationTime:l,presentationTimeDelta:i,eventDuration:c,id:f,payload:g}}function qx(o,...e){const t=e.length;let n=8,r=t;for(;r--;)n+=e[r].byteLength;const i=new Uint8Array(n);for(i[0]=n>>24&255,i[1]=n>>16&255,i[2]=n>>8&255,i[3]=n&255,i.set(o,4),r=0,n=8;r<t;r++)i.set(e[r],n),n+=e[r].byteLength;return i}function Gx(o,e,t){if(o.byteLength!==16)throw new RangeError("Invalid system id");let n,r;n=0,r=new Uint8Array;let i;n>0?(i=new Uint8Array(4),e.length>0&&new DataView(i.buffer).setUint32(0,e.length,!1)):i=new Uint8Array;const l=new Uint8Array(4);return t.byteLength>0&&new DataView(l.buffer).setUint32(0,t.byteLength,!1),qx([112,115,115,104],new Uint8Array([n,0,0,0]),o,i,r,l,t)}const Wv=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),oc={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Sp(o,e){const t=oc[e];return!!t&&!!t[o.slice(0,4)]}function Hm(o,e,t=!0){return!o.split(",").some(n=>!_p(n,e,t))}function _p(o,e,t=!0){var n;const r=Ko(t);return(n=r==null?void 0:r.isTypeSupported(zd(o,e)))!=null?n:!1}function zd(o,e){return`${e}/mp4;codecs=${o}`}function qy(o){if(o){const e=o.substring(0,4);return oc.video[e]}return 2}function Hh(o){const e=Wv();return o.split(",").reduce((t,n)=>{const i=e&&ag(n)?9:oc.video[n];return i?(i*2+t)/(t?3:2):(oc.audio[n]+t)/(t?2:1)},0)}const sm={};function $x(o,e=!0){if(sm[o])return sm[o];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[o];for(let r=0;r<t.length;r++){var n;if(_p(t[r],"audio",e))return sm[o]=t[r],t[r];if(t[r]==="mp3"&&(n=Ko(e))!=null&&n.isTypeSupported("audio/mpeg"))return""}return o}const Hx=/flac|opus|mp4a\.40\.34/i;function Vh(o,e=!0){return o.replace(Hx,t=>$x(t.toLowerCase(),e))}function Vx(o,e){const t=[];if(o){const n=o.split(",");for(let r=0;r<n.length;r++)Sp(n[r],"video")||t.push(n[r])}return e&&t.push(e),t.join(",")}function Ph(o,e){if(o&&(o.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(o)!==-1)&&(Gy(o,"audio")||Gy(o,"video")))return o;if(e){const t=e.split(",");if(t.length>1){if(o){for(let n=t.length;n--;)if(t[n].substring(0,4)===o.substring(0,4))return t[n]}return t[0]}}return e||o}function Gy(o,e){return Sp(o,e)&&_p(o,e)}function Kx(o){const e=o.split(",");for(let t=0;t<e.length;t++){const n=e[t].split(".");n.length>2&&n[0]==="avc1"&&(e[t]=`avc1.${parseInt(n[1]).toString(16)}${("000"+parseInt(n[2]).toString(16)).slice(-4)}`)}return e.join(",")}function Yx(o){if(o.startsWith("av01.")){const e=o.split("."),t=["0","111","01","01","01","0"];for(let n=e.length;n>4&&n<10;n++)e[n]=t[n-4];return e.join(".")}return o}function $y(o){const e=Ko(o)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function Vm(o){return o.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const Wx={supported:!0,powerEfficient:!0,smooth:!0},Xx={supported:!1,smooth:!1,powerEfficient:!1},Xv={supported:!0,configurations:[],decodingInfoResults:[Wx]};function Qv(o,e){return{supported:!1,configurations:e,decodingInfoResults:[Xx],error:o}}function Qx(o,e,t,n,r,i){const l=o.videoCodec,c=o.audioCodec?o.audioGroups:null,f=i==null?void 0:i.audioCodec,h=i==null?void 0:i.channels,g=h?parseInt(h):f?1/0:2;let p=null;if(c!=null&&c.length)try{c.length===1&&c[0]?p=e.groups[c[0]].channels:p=c.reduce((y,T)=>{if(T){const b=e.groups[T];if(!b)throw new Error(`Audio track group ${T} not found`);Object.keys(b.channels).forEach(w=>{y[w]=(y[w]||0)+b.channels[w]})}return y},{2:0})}catch{return!0}return l!==void 0&&(l.split(",").some(y=>ag(y))||o.width>1920&&o.height>1088||o.height>1920&&o.width>1088||o.frameRate>Math.max(n,30)||o.videoRange!=="SDR"&&o.videoRange!==t||o.bitrate>Math.max(r,8e6))||!!p&&Dn(g)&&Object.keys(p).some(y=>parseInt(y)>g)}function Zv(o,e,t,n={}){const r=o.videoCodec;if(!r&&!o.audioCodec||!t)return Promise.resolve(Xv);const i=[],l=Zx(o),c=l.length,f=Jx(o,e,c>0),h=f.length;for(let g=c||1*h||1;g--;){const p={type:"media-source"};if(c&&(p.video=l[g%c]),h){p.audio=f[g%h];const y=p.audio.bitrate;p.video&&y&&(p.video.bitrate-=y)}i.push(p)}if(r){const g=navigator.userAgent;if(r.split(",").some(p=>ag(p))&&Wv())return Promise.resolve(Qv(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${g})`),i))}return Promise.all(i.map(g=>{const p=tw(g);return n[p]||(n[p]=t.decodingInfo(g))})).then(g=>({supported:!g.some(p=>!p.supported),configurations:i,decodingInfoResults:g})).catch(g=>({supported:!1,configurations:i,decodingInfoResults:[],error:g}))}function Zx(o){var e;const t=(e=o.videoCodec)==null?void 0:e.split(","),n=Jv(o),r=o.width||640,i=o.height||480,l=o.frameRate||30,c=o.videoRange.toLowerCase();return t?t.map(f=>{const h={contentType:zd(Yx(f),"video"),width:r,height:i,bitrate:n,framerate:l};return c!=="sdr"&&(h.transferFunction=c),h}):[]}function Jx(o,e,t){var n;const r=(n=o.audioCodec)==null?void 0:n.split(","),i=Jv(o);return r&&o.audioGroups?o.audioGroups.reduce((l,c)=>{var f;const h=c?(f=e.groups[c])==null?void 0:f.tracks:null;return h?h.reduce((g,p)=>{if(p.groupId===c){const y=parseFloat(p.channels||"");r.forEach(T=>{const b={contentType:zd(T,"audio"),bitrate:t?ew(T,i):i};y&&(b.channels=""+y),g.push(b)})}return g},l):l},[]):[]}function ew(o,e){if(e<=1)return 1;let t=128e3;return o==="ec-3"?t=768e3:o==="ac-3"&&(t=64e4),Math.min(e/2,t)}function Jv(o){return Math.ceil(Math.max(o.bitrate*.9,o.averageBitrate)/1e3)*1e3||1}function tw(o){let e="";const{audio:t,video:n}=o;if(n){const r=Vm(n.contentType);e+=`${r}_r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${Math.ceil(n.bitrate/1e5)}`}if(t){const r=Vm(t.contentType);e+=`${n?"_":""}${r}_c${t.channels}`}return e}const Km=["NONE","TYPE-0","TYPE-1",null];function nw(o){return Km.indexOf(o)>-1}const Kh=["SDR","PQ","HLG"];function rw(o){return!!o&&Kh.indexOf(o)>-1}var Mh={No:"",Yes:"YES",v2:"v2"};function Hy(o){const{canSkipUntil:e,canSkipDateRanges:t,age:n}=o,r=n<e/2;return e&&r?t?Mh.v2:Mh.Yes:Mh.No}class Vy{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Ud{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const n=(t=e.supplemental)==null?void 0:t.videoCodec;n&&n!==e.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return Ky(this._audioGroups,e)}hasSubtitleGroup(e){return Ky(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(t)===-1&&n.push(t)}else if(e==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(t)===-1&&n.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function Ky(o,e){return!e||!o?!1:o.indexOf(e)!==-1}function iw(){if(typeof matchMedia=="function"){const o=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(o.media!==e.media)return o.matches===!0}return!1}function aw(o,e){let t=!1,n=[];if(o&&(t=o!=="SDR",n=[o]),e){n=e.allowedVideoRanges||Kh.slice(0);const r=n.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:r&&iw(),t||(n=["SDR"])}return{preferHDR:t,allowedVideoRanges:n}}const sw=o=>{const e=new WeakSet;return(t,n)=>{if(o&&(n=o(t,n)),typeof n=="object"&&n!==null){if(e.has(n))return;e.add(n)}return n}},Kr=(o,e)=>JSON.stringify(o,sw(e));function ow(o,e,t,n,r){const i=Object.keys(o),l=n==null?void 0:n.channels,c=n==null?void 0:n.audioCodec,f=r==null?void 0:r.videoCodec,h=l&&parseInt(l)===2;let g=!1,p=!1,y=1/0,T=1/0,b=1/0,w=1/0,R=0,M=[];const{preferHDR:Y,allowedVideoRanges:Z}=aw(e,r);for(let j=i.length;j--;){const oe=o[i[j]];g||(g=oe.channels[2]>0),y=Math.min(y,oe.minHeight),T=Math.min(T,oe.minFramerate),b=Math.min(b,oe.minBitrate),Z.filter(Ee=>oe.videoRanges[Ee]>0).length>0&&(p=!0)}y=Dn(y)?y:0,T=Dn(T)?T:0;const ye=Math.max(1080,y),Re=Math.max(30,T);b=Dn(b)?b:t,t=Math.max(b,t),p||(e=void 0);const F=i.length>1;return{codecSet:i.reduce((j,oe)=>{const L=o[oe];if(oe===j)return j;if(M=p?Z.filter(Ee=>L.videoRanges[Ee]>0):[],F){if(L.minBitrate>t)return xs(oe,`min bitrate of ${L.minBitrate} > current estimate of ${t}`),j;if(!L.hasDefaultAudio)return xs(oe,"no renditions with default or auto-select sound found"),j;if(c&&oe.indexOf(c.substring(0,4))%5!==0)return xs(oe,`audio codec preference "${c}" not found`),j;if(l&&!h){if(!L.channels[l])return xs(oe,`no renditions with ${l} channel sound found (channels options: ${Object.keys(L.channels)})`),j}else if((!c||h)&&g&&L.channels[2]===0)return xs(oe,"no renditions with stereo sound found"),j;if(L.minHeight>ye)return xs(oe,`min resolution of ${L.minHeight} > maximum of ${ye}`),j;if(L.minFramerate>Re)return xs(oe,`min framerate of ${L.minFramerate} > maximum of ${Re}`),j;if(!M.some(Ee=>L.videoRanges[Ee]>0))return xs(oe,`no variants with VIDEO-RANGE of ${Kr(M)} found`),j;if(f&&oe.indexOf(f.substring(0,4))%5!==0)return xs(oe,`video codec preference "${f}" not found`),j;if(L.maxScore<R)return xs(oe,`max score of ${L.maxScore} < selected max of ${R}`),j}return j&&(Hh(oe)>=Hh(j)||L.fragmentError>o[j].fragmentError)?j:(w=L.minIndex,R=L.maxScore,oe)},void 0),videoRanges:M,preferHDR:Y,minFramerate:T,minBitrate:b,minIndex:w}}function xs(o,e){Dr.log(`[abr] start candidates with "${o}" ignored because ${e}`)}function eE(o){return o.reduce((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const r=t.channels||"2";return n.channels[r]=(n.channels[r]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function lw(o,e,t,n){return o.slice(t,n+1).reduce((r,i,l)=>{if(!i.codecSet)return r;const c=i.audioGroups;let f=r[i.codecSet];f||(r[i.codecSet]=f={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:l,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!c,fragmentError:0}),f.minBitrate=Math.min(f.minBitrate,i.bitrate);const h=Math.min(i.height,i.width);return f.minHeight=Math.min(f.minHeight,h),f.minFramerate=Math.min(f.minFramerate,i.frameRate),f.minIndex=Math.min(f.minIndex,l),f.maxScore=Math.max(f.maxScore,i.score),f.fragmentError+=i.fragmentError,f.videoRanges[i.videoRange]=(f.videoRanges[i.videoRange]||0)+1,c&&c.forEach(g=>{if(!g)return;const p=e.groups[g];p&&(f.hasDefaultAudio=f.hasDefaultAudio||e.hasDefaultAudio?p.hasDefault:p.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(p.channels).forEach(y=>{f.channels[y]=(f.channels[y]||0)+p.channels[y]}))}),r},{})}function Yy(o){if(!o)return o;const{lang:e,assocLang:t,characteristics:n,channels:r,audioCodec:i}=o;return{lang:e,assocLang:t,characteristics:n,channels:r,audioCodec:i}}function Rs(o,e,t){if("attrs"in o){const n=e.indexOf(o);if(n!==-1)return n}for(let n=0;n<e.length;n++){const r=e[n];if(Fl(o,r,t))return n}return-1}function Fl(o,e,t){const{groupId:n,name:r,lang:i,assocLang:l,default:c}=o,f=o.forced;return(n===void 0||e.groupId===n)&&(r===void 0||e.name===r)&&(i===void 0||uw(i,e.lang))&&(i===void 0||e.assocLang===l)&&(c===void 0||e.default===c)&&(f===void 0||e.forced===f)&&(!("characteristics"in o)||cw(o.characteristics||"",e.characteristics))&&(t===void 0||t(o,e))}function uw(o,e="--"){return o.length===e.length?o===e:o.startsWith(e)||e.startsWith(o)}function cw(o,e=""){const t=o.split(","),n=e.split(",");return t.length===n.length&&!t.some(r=>n.indexOf(r)===-1)}function Ml(o,e){const{audioCodec:t,channels:n}=o;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(n===void 0||n===(e.channels||"2"))}function dw(o,e,t,n,r){const i=e[n],c=e.reduce((y,T,b)=>{const w=T.uri;return(y[w]||(y[w]=[])).push(b),y},{})[i.uri];c.length>1&&(n=Math.max.apply(Math,c));const f=i.videoRange,h=i.frameRate,g=i.codecSet.substring(0,4),p=Wy(e,n,y=>{if(y.videoRange!==f||y.frameRate!==h||y.codecSet.substring(0,4)!==g)return!1;const T=y.audioGroups,b=t.filter(w=>!T||T.indexOf(w.groupId)!==-1);return Rs(o,b,r)>-1});return p>-1?p:Wy(e,n,y=>{const T=y.audioGroups,b=t.filter(w=>!T||T.indexOf(w.groupId)!==-1);return Rs(o,b,r)>-1})}function Wy(o,e,t){for(let n=e;n>-1;n--)if(t(o[n]))return n;for(let n=e+1;n<o.length;n++)if(t(o[n]))return n;return-1}function Yh(o,e){var t;return!!o&&o!==((t=e.loadLevelObj)==null?void 0:t.uri)}class fw extends Ha{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var n;const{fragCurrent:r,partCurrent:i,hls:l}=this,{autoLevelEnabled:c,media:f}=l;if(!r||!f)return;const h=performance.now(),g=i?i.stats:r.stats,p=i?i.duration:r.duration,y=h-g.loading.start,T=l.minAutoLevel,b=r.level,w=this._nextAutoLevel;if(g.aborted||g.loaded&&g.loaded===g.total||b<=T){this.clearTimer(),this._nextAutoLevel=-1;return}if(!c)return;const R=w>-1&&w!==b,M=!!t||R;if(!M&&(f.paused||!f.playbackRate||!f.readyState))return;const Y=l.mainForwardBufferInfo;if(!M&&Y===null)return;const Z=this.bwEstimator.getEstimateTTFB(),ye=Math.abs(f.playbackRate);if(y<=Math.max(Z,1e3*(p/(ye*2))))return;const Re=Y?Y.len/ye:0,F=g.loading.first?g.loading.first-g.loading.start:-1,k=g.loaded&&F>-1,j=this.getBwEstimate(),oe=l.levels,L=oe[b],Ee=Math.max(g.loaded,Math.round(p*(r.bitrate||L.averageBitrate)/8));let Be=k?y-F:y;Be<1&&k&&(Be=Math.min(y,g.loaded*8/j));const pe=k?g.loaded*1e3/Be:0,ct=Z/1e3,Ye=pe?(Ee-g.loaded)/pe:Ee*8/j+ct;if(Ye<=Re)return;const Le=pe?pe*8:j,Je=((n=(t==null?void 0:t.details)||this.hls.latestLevelDetails)==null?void 0:n.live)===!0,Ge=this.hls.config.abrBandWidthUpFactor;let tt=Number.POSITIVE_INFINITY,Ze;for(Ze=b-1;Ze>T;Ze--){const Dt=oe[Ze].maxBitrate,Pe=!oe[Ze].details||Je;if(tt=this.getTimeToLoadFrag(ct,Le,p*Dt,Pe),tt<Math.min(Re,p+ct))break}if(tt>=Ye||tt>p*10)return;k?this.bwEstimator.sample(y-Math.min(Z,F),g.loaded):this.bwEstimator.sampleTTFB(y);const Me=oe[Ze].maxBitrate;this.getBwEstimate()*Ge>Me&&this.resetEstimator(Me);const $e=this.findBestLevel(Me,T,Ze,0,Re,1,1);$e>-1&&(Ze=$e),this.warn(`Fragment ${r.sn}${i?" part "+i.index:""} of level ${b} is loading too slowly;
      Fragment duration: ${r.duration.toFixed(3)}
      Time to underbuffer: ${Re.toFixed(3)} s
      Estimated load time for current fragment: ${Ye.toFixed(3)} s
      Estimated load time for down switch fragment: ${tt.toFixed(3)} s
      TTFB estimate: ${F|0} ms
      Current BW estimate: ${Dn(j)?j|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${Ze} @ ${Me|0} bps`),l.nextLoadLevel=l.nextAutoLevel=Ze,this.clearTimer();const mt=()=>{if(this.clearTimer(),this.fragCurrent===r&&this.hls.loadLevel===Ze&&Ze>0){const Dt=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${Ze>0?"and switching down":""}
      Fragment duration: ${r.duration.toFixed(3)} s
      Time to underbuffer: ${Dt.toFixed(3)} s`),r.abortRequests(),this.fragCurrent=this.partCurrent=null,Ze>T){let Pe=this.findBestLevel(this.hls.levels[T].bitrate,T,Ze,0,Dt,1,1);Pe===-1&&(Pe=T),this.hls.nextLoadLevel=this.hls.nextAutoLevel=Pe,this.resetEstimator(this.hls.levels[Pe].bitrate)}}};R||Ye>tt*2?mt():this.timer=self.setInterval(mt,tt*1e3),l.trigger(Se.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,part:i,stats:g})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new bx(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Se.FRAG_LOADING,this.onFragLoading,this),e.on(Se.FRAG_LOADED,this.onFragLoaded,this),e.on(Se.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Se.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Se.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Se.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Se.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(Se.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Se.FRAG_LOADING,this.onFragLoading,this),e.off(Se.FRAG_LOADED,this.onFragLoaded,this),e.off(Se.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Se.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Se.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Se.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Se.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(Se.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var r;this.fragCurrent=n,this.partCurrent=(r=t.part)!=null?r:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case wt.BUFFER_ADD_CODEC_ERROR:case wt.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case wt.FRAG_LOAD_TIMEOUT:{const n=t.frag,{fragCurrent:r,partCurrent:i}=this;if(n&&r&&n.sn===r.sn&&n.level===r.level){const l=performance.now(),c=i?i.stats:n.stats,f=l-c.loading.start,h=c.loading.first?c.loading.first-c.loading.start:-1;if(c.loaded&&h>-1){const p=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(f-Math.min(p,h),c.loaded)}else this.bwEstimator.sampleTTFB(f)}break}}}getTimeToLoadFrag(e,t,n,r){const i=e+n/t,l=r?e+this.lastLevelLoadSec:0;return i+l}onLevelLoaded(e,t){const n=this.hls.config,{loading:r}=t.stats,i=r.end-r.first;Dn(i)&&(this.lastLevelLoadSec=i/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:n}){const r=n?n.stats:t.stats;if(t.type===Fn.MAIN&&this.bwEstimator.sampleTTFB(r.loading.first-r.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const i=n?n.duration:t.duration,l=this.hls.levels[t.level],c=(l.loaded?l.loaded.bytes:0)+r.loaded,f=(l.loaded?l.loaded.duration:0)+i;l.loaded={bytes:c,duration:f},l.realBitrate=Math.round(8*c/f)}if(t.bitrateTest){const i={stats:r,frag:t,part:n,id:t.type};this.onFragBuffered(Se.FRAG_BUFFERED,i),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:n,part:r}=t,i=r!=null&&r.stats.loaded?r.stats:n.stats;if(i.aborted||this.ignoreFragment(n))return;const l=i.parsing.end-i.loading.start-Math.min(i.loading.first-i.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(l,i.loaded),i.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=l/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Fn.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,i=this.findBestLevel(n,t,e,0,r,1,1);if(i>-1)return i;const l=this.hls.firstLevel,c=Math.min(Math.max(l,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${l} clamped to ${c}`),c}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),r=this.lastLoadedFragLevel>-1;if(e!==-1&&(!n||!r||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const i=n&&r?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const l=this.hls.levels;if(l.length>Math.max(e,i)&&l[e].loadError<=l[i].loadError)return e}return this._nextAutoLevel=i,this.nextAutoLevelKey=this.getAutoLevelKey(),i}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:r,config:i,minAutoLevel:l}=n,c=t?t.duration:e?e.duration:0,f=this.getBwEstimate(),h=this.getStarvationDelay();let g=i.abrBandWidthFactor,p=i.abrBandWidthUpFactor;if(h){const R=this.findBestLevel(f,l,r,h,0,g,p);if(R>=0)return this.rebufferNotice=-1,R}let y=c?Math.min(c,i.maxStarvationDelay):i.maxStarvationDelay;if(!h){const R=this.bitrateTestDelay;R&&(y=(c?Math.min(c,i.maxLoadingDelay):i.maxLoadingDelay)-R,this.info(`bitrate test took ${Math.round(1e3*R)}ms, set first fragment max fetchDuration to ${Math.round(1e3*y)} ms`),g=p=1)}const T=this.findBestLevel(f,l,r,h,y,g,p);if(this.rebufferNotice!==T&&(this.rebufferNotice=T,this.info(`${h?"rebuffering expected":"buffer is empty"}, optimal quality level ${T}`)),T>-1)return T;const b=n.levels[l],w=n.loadLevelObj;return w&&(b==null?void 0:b.bitrate)<w.bitrate?l:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,r=e.mainForwardBufferInfo;return(r?r.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,r,i,l,c){var f;const h=r+i,g=this.lastLoadedFragLevel,p=g===-1?this.hls.firstLevel:g,{fragCurrent:y,partCurrent:T}=this,{levels:b,allAudioTracks:w,loadLevel:R,config:M}=this.hls;if(b.length===1)return 0;const Y=b[p],Z=!!((f=this.hls.latestLevelDetails)!=null&&f.live),ye=R===-1||g===-1;let Re,F="SDR",k=(Y==null?void 0:Y.frameRate)||0;const{audioPreference:j,videoPreference:oe}=M,L=this.audioTracksByGroup||(this.audioTracksByGroup=eE(w));let Ee=-1;if(ye){if(this.firstSelection!==-1)return this.firstSelection;const Le=this.codecTiers||(this.codecTiers=lw(b,L,t,n)),Je=ow(Le,F,e,j,oe),{codecSet:Ge,videoRanges:tt,minFramerate:Ze,minBitrate:Me,minIndex:$e,preferHDR:mt}=Je;Ee=$e,Re=Ge,F=mt?tt[tt.length-1]:tt[0],k=Ze,e=Math.max(e,Me),this.log(`picked start tier ${Kr(Je)}`)}else Re=Y==null?void 0:Y.codecSet,F=Y==null?void 0:Y.videoRange;const Be=T?T.duration:y?y.duration:0,pe=this.bwEstimator.getEstimateTTFB()/1e3,ct=[];for(let Le=n;Le>=t;Le--){var Ye;const Je=b[Le],Ge=Le>p;if(!Je)continue;if(M.useMediaCapabilities&&!Je.supportedResult&&!Je.supportedPromise){const Pe=navigator.mediaCapabilities;typeof(Pe==null?void 0:Pe.decodingInfo)=="function"&&Qx(Je,L,F,k,e,j)?(Je.supportedPromise=Zv(Je,L,Pe,this.supportedCache),Je.supportedPromise.then(Fe=>{if(!this.hls)return;Je.supportedResult=Fe;const ut=this.hls.levels,W=ut.indexOf(Je);Fe.error?this.warn(`MediaCapabilities decodingInfo error: "${Fe.error}" for level ${W} ${Kr(Fe)}`):Fe.supported?Fe.decodingInfoResults.some(Q=>Q.smooth===!1||Q.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${W} not smooth or powerEfficient: ${Kr(Fe)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${W} ${Kr(Fe)}`),W>-1&&ut.length>1&&(this.log(`Removing unsupported level ${W}`),this.hls.removeLevel(W),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(Fe=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${Fe}`)})):Je.supportedResult=Xv}if((Re&&Je.codecSet!==Re||F&&Je.videoRange!==F||Ge&&k>Je.frameRate||!Ge&&k>0&&k<Je.frameRate||(Ye=Je.supportedResult)!=null&&(Ye=Ye.decodingInfoResults)!=null&&Ye.some(Pe=>Pe.smooth===!1))&&(!ye||Le!==Ee)){ct.push(Le);continue}const tt=Je.details,Ze=(T?tt==null?void 0:tt.partTarget:tt==null?void 0:tt.averagetargetduration)||Be;let Me;Ge?Me=c*e:Me=l*e;const $e=Be&&r>=Be*2&&i===0?Je.averageBitrate:Je.maxBitrate,mt=this.getTimeToLoadFrag(pe,Me,$e*Ze,tt===void 0);if(Me>=$e&&(Le===g||Je.loadError===0&&Je.fragmentError===0)&&(mt<=pe||!Dn(mt)||Z&&!this.bitrateTestDelay||mt<h)){const Pe=this.forcedAutoLevel;return Le!==R&&(Pe===-1||Pe!==R)&&(ct.length&&this.trace(`Skipped level(s) ${ct.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${b[ct[0]].codecs}" ${b[ct[0]].videoRange}; not compatible with "${Re}" ${F}`),this.info(`switch candidate:${p}->${Le} adjustedbw(${Math.round(Me)})-bitrate=${Math.round(Me-$e)} ttfb:${pe.toFixed(1)} avgDuration:${Ze.toFixed(1)} maxFetchDuration:${h.toFixed(1)} fetchDuration:${mt.toFixed(1)} firstSelection:${ye} codecSet:${Je.codecSet} videoRange:${Je.videoRange} hls.loadLevel:${R}`)),ye&&(this.firstSelection=Le),Le}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls;return Math.min(Math.max(e,n),t)}}const tE={search:function(o,e){let t=0,n=o.length-1,r=null,i=null;for(;t<=n;){r=(t+n)/2|0,i=o[r];const l=e(i);if(l>0)t=r+1;else if(l<0)n=r-1;else return i}return null}};function hw(o,e,t){if(e===null||!Array.isArray(o)||!o.length||!Dn(e))return null;const n=o[0].programDateTime;if(e<(n||0))return null;const r=o[o.length-1].endProgramDateTime;if(e>=(r||0))return null;for(let i=0;i<o.length;++i){const l=o[i];if(mw(e,t,l))return l}return null}function zl(o,e,t=0,n=0,r=.005){let i=null;if(o){i=e[1+o.sn-e[0].sn]||null;const c=o.endDTS-t;c>0&&c<15e-7&&(t+=15e-7),i&&o.level!==i.level&&i.end<=o.end&&(i=e[2+o.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(i=e[0]);if(i&&((!o||o.level===i.level)&&Xy(t,n,i)===0||gw(i,o,Math.min(r,n))))return i;const l=tE.search(e,Xy.bind(null,t,n));return l&&(l!==o||!i)?l:i}function gw(o,e,t){if(e&&e.start===0&&e.level<o.level&&(e.endPTS||0)>0){const n=e.tagList.reduce((r,i)=>(i[0]==="INF"&&(r+=parseFloat(i[1])),r),t);return o.start<=n}return!1}function Xy(o=0,e=0,t){if(t.start<=o&&t.start+t.duration>o)return 0;const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-n<=o?1:t.start-n>o&&t.start?-1:0}function mw(o,e,t){const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-n>o}function nE(o,e,t){if(o&&o.startCC<=e&&o.endCC>=e){let n=o.fragments;const{fragmentHint:r}=o;r&&(n=n.concat(r));let i;return tE.search(n,l=>l.cc<e?1:l.cc>e?-1:(i=l,l.end<=t?1:l.start>t?-1:0)),i||null}return null}function Wh(o){switch(o.details){case wt.FRAG_LOAD_TIMEOUT:case wt.KEY_LOAD_TIMEOUT:case wt.LEVEL_LOAD_TIMEOUT:case wt.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Qy(o,e){const t=Wh(e);return o.default[`${t?"timeout":"error"}Retry`]}function xp(o,e){const t=o.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*o.retryDelayMs,o.maxRetryDelayMs)}function Zy(o){return Mr(Mr({},o),{errorRetry:null,timeoutRetry:null})}function Xh(o,e,t,n){if(!o)return!1;const r=n==null?void 0:n.code,i=e<o.maxNumRetry&&(pw(r)||!!t);return o.shouldRetry?o.shouldRetry(o,e,t,n,i):i}function pw(o){return Ym(o)||!!o&&(o<400||o>499)}function Ym(o){return o===0&&navigator.onLine===!1}var Li={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},Ta={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4};class yw extends Ha{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(Se.ERROR,this.onError,this),e.on(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Se.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Se.ERROR,this.onError,this),e.off(Se.ERROR,this.onErrorOut,this),e.off(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Se.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===Fn.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;const t=this.hls,n=t.currentLevel;return(e=t.loadLevelObj)!=null&&e.details||n===-1?t.loadLevel:n}variantHasKey(e,t){if(e){var n;if((n=e.details)!=null&&n.hasKey(t))return!0;const r=e.audioGroups;if(r)return this.hls.allAudioTracks.filter(l=>r.indexOf(l.groupId)>=0).some(l=>{var c;return(c=l.details)==null?void 0:c.hasKey(t)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,t){var n;if(t.fatal)return;const r=this.hls,i=t.context;switch(t.details){case wt.FRAG_LOAD_ERROR:case wt.FRAG_LOAD_TIMEOUT:case wt.KEY_LOAD_ERROR:case wt.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case wt.FRAG_PARSING_ERROR:if((n=t.frag)!=null&&n.gap){t.errorAction=nc();return}case wt.FRAG_GAP:case wt.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=Li.SendAlternateToPenaltyBox;return}case wt.LEVEL_EMPTY_ERROR:case wt.LEVEL_PARSING_ERROR:{var l;const f=t.parent===Fn.MAIN?t.level:r.loadLevel;t.details===wt.LEVEL_EMPTY_ERROR&&((l=t.context)!=null&&(l=l.levelDetails)!=null&&l.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,f):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,f))}return;case wt.LEVEL_LOAD_ERROR:case wt.LEVEL_LOAD_TIMEOUT:typeof(i==null?void 0:i.level)=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.level));return;case wt.AUDIO_TRACK_LOAD_ERROR:case wt.AUDIO_TRACK_LOAD_TIMEOUT:case wt.SUBTITLE_LOAD_ERROR:case wt.SUBTITLE_TRACK_LOAD_TIMEOUT:if(i){const f=r.loadLevelObj;if(f&&(i.type===mr.AUDIO_TRACK&&f.hasAudioGroup(i.groupId)||i.type===mr.SUBTITLE_TRACK&&f.hasSubtitleGroup(i.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.loadLevel),t.errorAction.action=Li.SendAlternateToPenaltyBox,t.errorAction.flags=Ta.MoveAllAlternatesMatchingHost;return}}return;case wt.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:t.errorAction={action:Li.SendAlternateToPenaltyBox,flags:Ta.MoveAllAlternatesMatchingHDCP};return;case wt.KEY_SYSTEM_SESSION_UPDATE_FAILED:case wt.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case wt.KEY_SYSTEM_NO_SESSION:t.errorAction={action:Li.SendAlternateToPenaltyBox,flags:Ta.MoveAllAlternatesMatchingKey};return;case wt.BUFFER_ADD_CODEC_ERROR:case wt.REMUX_ALLOC_ERROR:case wt.BUFFER_APPEND_ERROR:if(!t.errorAction){var c;t.errorAction=this.getLevelSwitchAction(t,(c=t.level)!=null?c:r.loadLevel)}return;case wt.INTERNAL_EXCEPTION:case wt.BUFFER_APPENDING_ERROR:case wt.BUFFER_FULL_ERROR:case wt.LEVEL_SWITCH_ERROR:case wt.BUFFER_STALLED_ERROR:case wt.BUFFER_SEEK_OVER_HOLE:case wt.BUFFER_NUDGE_ON_STALL:t.errorAction=nc();return}t.type===Gn.KEY_SYSTEM_ERROR&&(t.levelRetry=!1,t.errorAction=nc())}getPlaylistRetryOrSwitchAction(e,t){const n=this.hls,r=Qy(n.config.playlistLoadPolicy,e),i=this.playlistError++;if(Xh(r,i,Wh(e),e.response))return{action:Li.RetryRequest,flags:Ta.None,retryConfig:r,retryCount:i};const c=this.getLevelSwitchAction(e,t);return r&&(c.retryConfig=r,c.retryCount=i),c}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),r=t.levels[n],{fragLoadPolicy:i,keyLoadPolicy:l}=t.config,c=Qy(e.details.startsWith("key")?l:i,e),f=t.levels.reduce((g,p)=>g+p.fragmentError,0);if(r&&(e.details!==wt.FRAG_GAP&&r.fragmentError++,Xh(c,f,Wh(e),e.response)))return{action:Li.RetryRequest,flags:Ta.None,retryConfig:c,retryCount:f};const h=this.getLevelSwitchAction(e,n);return c&&(h.retryConfig=c,h.retryCount=f),h}getLevelSwitchAction(e,t){const n=this.hls;t==null&&(t=n.loadLevel);const r=this.hls.levels[t];if(r){var i,l;const h=e.details;r.loadError++,h===wt.BUFFER_APPEND_ERROR&&r.fragmentError++;let g=-1;const{levels:p,loadLevel:y,minAutoLevel:T,maxAutoLevel:b}=n;!n.autoLevelEnabled&&!n.config.preserveManualLevelOnError&&(n.loadLevel=-1);const w=(i=e.frag)==null?void 0:i.type,M=(w===Fn.AUDIO&&h===wt.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(h===wt.BUFFER_ADD_CODEC_ERROR||h===wt.BUFFER_APPEND_ERROR))&&p.some(({audioCodec:F})=>r.audioCodec!==F),Z=e.sourceBufferName==="video"&&(h===wt.BUFFER_ADD_CODEC_ERROR||h===wt.BUFFER_APPEND_ERROR)&&p.some(({codecSet:F,audioCodec:k})=>r.codecSet!==F&&r.audioCodec===k),{type:ye,groupId:Re}=(l=e.context)!=null?l:{};for(let F=p.length;F--;){const k=(F+y)%p.length;if(k!==y&&k>=T&&k<=b&&p[k].loadError===0){var c,f;const j=p[k];if(h===wt.FRAG_GAP&&w===Fn.MAIN&&e.frag){const oe=p[k].details;if(oe){const L=zl(e.frag,oe.fragments,e.frag.start);if(L!=null&&L.gap)continue}}else{if(ye===mr.AUDIO_TRACK&&j.hasAudioGroup(Re)||ye===mr.SUBTITLE_TRACK&&j.hasSubtitleGroup(Re))continue;if(w===Fn.AUDIO&&(c=r.audioGroups)!=null&&c.some(oe=>j.hasAudioGroup(oe))||w===Fn.SUBTITLE&&(f=r.subtitleGroups)!=null&&f.some(oe=>j.hasSubtitleGroup(oe))||M&&r.audioCodec===j.audioCodec||Z&&r.codecSet===j.codecSet||!M&&r.codecSet!==j.codecSet)continue}g=k;break}}if(g>-1&&n.loadLevel!==g)return e.levelRetry=!0,this.playlistError=0,{action:Li.SendAlternateToPenaltyBox,flags:Ta.None,nextAutoLevel:g}}return{action:Li.SendAlternateToPenaltyBox,flags:Ta.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var n;switch((n=t.errorAction)==null?void 0:n.action){case Li.DoNothing:break;case Li.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==wt.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:r}=n,i=n.nextAutoLevel;switch(r){case Ta.None:this.switchLevel(e,i);break;case Ta.MoveAllAlternatesMatchingHDCP:{const f=this.getVariantLevelIndex(e.frag),h=t.levels[f],g=h==null?void 0:h.attrs["HDCP-LEVEL"];if(n.hdcpLevel=g,g){t.maxHdcpLevel=Km[Km.indexOf(g)-1],n.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}}case Ta.MoveAllAlternatesMatchingKey:{const f=e.decryptdata;if(f){const h=this.hls.levels;for(let g=h.length;g--;)if(this.variantHasKey(h[g],f)){var l,c;this.log(`Banned key found in level ${g} (${h[g].bitrate}bps) or audio group "${(l=h[g].audioGroups)==null?void 0:l.join(",")}" (${(c=e.frag)==null?void 0:c.type} fragment) ${Sa(f.keyId||[])}`),h[g].fragmentError++,h[g].loadError++,this.log(`Removing level ${g} with key error (${e.error})`),this.hls.removeLevel(g)}h.length&&(n.resolved=!0)}break}}n.resolved||this.switchLevel(e,i)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===wt.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const n=Vm(e.mimeType),r=this.hls.levels;for(let i=r.length;i--;)r[i][`${e.sourceBufferName}Codec`]===n&&(this.log(`Removing level ${i} for ${e.details} ("${n}" not supported)`),this.hls.removeLevel(i))}}}function nc(o){const e={action:Li.DoNothing,flags:Ta.None};return o&&(e.resolved=!0),e}var bi={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class vw{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Se.BUFFER_APPENDED,this.onBufferAppended,this),e.on(Se.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Se.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Se.BUFFER_APPENDED,this.onBufferAppended,this),e.off(Se.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Se.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let r=n.length;r--;){const i=n[r];if(!i)break;if(i.start<=e&&e<=i.end&&i.loaded)return i}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,n){const{fragments:r}=this,i=Object.keys(r);for(let l=i.length;l--;){const c=r[i[l]];if((c==null?void 0:c.body.type)===t&&(!n||c.buffered)){const f=c.body;if(f.start<=e&&e<=f.end)return f}}return null}detectEvictedFragments(e,t,n,r,i){this.timeRanges&&(this.timeRanges[e]=t);const l=(r==null?void 0:r.fragment.sn)||-1;Object.keys(this.fragments).forEach(c=>{const f=this.fragments[c];if(!f||l>=f.body.sn)return;if(!f.buffered&&(!f.loaded||i)){f.body.type===n&&this.removeFragment(f.body);return}const h=f.range[e];if(h){if(h.time.length===0){this.removeFragment(f.body);return}h.time.some(g=>{const p=!this.isTimeBuffered(g.startPTS,g.endPTS,t);return p&&this.removeFragment(f.body),p})}})}detectPartialFragments(e){const t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;const n=e.frag,r=Ku(n),i=this.fragments[r];if(!i||i.buffered&&n.gap)return;const l=!n.relurl;Object.keys(t).forEach(c=>{const f=n.elementaryStreams[c];if(!f)return;const h=t[c],g=l||f.partial===!0;i.range[c]=this.getBufferedTimes(n,e.part,g,h)}),i.loaded=null,Object.keys(i.range).length?(i.buffered=!0,(i.body.endList=n.endList||i.body.endList)&&(this.endListFragments[i.body.type]=i),ph(i)||this.removeParts(n.sn-1,n.type)):this.removeFragment(i.body)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=Jy(n,r=>r.fragment.sn>=e))}fragBuffered(e,t){const n=Ku(e);let r=this.fragments[n];!r&&t&&(r=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),r&&(r.loaded=null,r.buffered=!0)}getBufferedTimes(e,t,n,r){const i={time:[],partial:n},l=e.start,c=e.end,f=e.minEndPTS||c,h=e.maxStartPTS||l;for(let g=0;g<r.length;g++){const p=r.start(g)-this.bufferPadding,y=r.end(g)+this.bufferPadding;if(h>=p&&f<=y){i.time.push({startPTS:Math.max(l,r.start(g)),endPTS:Math.min(c,r.end(g))});break}else if(l<y&&c>p){const T=Math.max(l,r.start(g)),b=Math.min(c,r.end(g));b>T&&(i.partial=!0,i.time.push({startPTS:T,endPTS:b}))}else if(c<=p)break}return i}getPartialFragment(e){let t=null,n,r,i,l=0;const{bufferPadding:c,fragments:f}=this;return Object.keys(f).forEach(h=>{const g=f[h];g&&ph(g)&&(r=g.body.start-c,i=g.body.end+c,e>=r&&e<=i&&(n=Math.min(e-r,i-e),l<=n&&(t=g.body,l=n)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||ph(t))}getState(e){const t=Ku(e),n=this.fragments[t];return n?n.buffered?ph(n)?bi.PARTIAL:bi.OK:bi.APPENDING:bi.NOT_LOADED}isTimeBuffered(e,t,n){let r,i;for(let l=0;l<n.length;l++){if(r=n.start(l)-this.bufferPadding,i=n.end(l)+this.bufferPadding,e>=r&&t<=i)return!0;if(t<=r)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;const n=t.frag,r=t.part?null:t,i=Ku(n);this.fragments[i]={body:n,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:r,timeRanges:i,type:l}=t;if(n.sn==="initSegment")return;const c=n.type;if(r){let h=this.activePartLists[c];h||(this.activePartLists[c]=h=[]),h.push(r)}this.timeRanges=i;const f=i[l];this.detectEvictedFragments(l,f,c,r)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=Ku(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,n=Object.keys(t);if(!e)return n.length>0;for(let r=n.length;r--;){const i=t[n[r]];if((i==null?void 0:i.body.type)===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,n,r,i){r&&!this.hasGaps||Object.keys(this.fragments).forEach(l=>{const c=this.fragments[l];if(!c)return;const f=c.body;f.type!==n||r&&!f.gap||f.start<t&&f.end>e&&(c.buffered||i)&&this.removeFragment(f)})}removeFragment(e){const t=Ku(e);e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const r=e.sn;this.activePartLists[e.type]=Jy(n,i=>i.fragment.sn!==r)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const t=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;t&&t.forEach(n=>n.clearElementaryStreamInfo())}}function ph(o){var e,t,n;return o.buffered&&!!(o.body.gap||(e=o.range.video)!=null&&e.partial||(t=o.range.audio)!=null&&t.partial||(n=o.range.audiovideo)!=null&&n.partial)}function Ku(o){return`${o.type}_${o.level}_${o.sn}`}function Jy(o,e){return o.filter(t=>{const n=e(t);return n||t.clearElementaryStreamInfo(),n})}var Yo={cbc:0,ctr:1};class Ew{constructor(e,t,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=n}decrypt(e,t){switch(this.aesMode){case Yo.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case Yo.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function bw(o){const e=o.byteLength,t=e&&new DataView(o.buffer).getUint8(e-1);return t?o.slice(0,e-t):o}class Tw{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let r=0;r<4;r++)n[r]=t.getUint32(r*4);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],l=n[2],c=n[3],f=this.invSubMix,h=f[0],g=f[1],p=f[2],y=f[3],T=new Uint32Array(256);let b=0,w=0,R=0;for(R=0;R<256;R++)R<128?T[R]=R<<1:T[R]=R<<1^283;for(R=0;R<256;R++){let M=w^w<<1^w<<2^w<<3^w<<4;M=M>>>8^M&255^99,e[b]=M,t[M]=b;const Y=T[b],Z=T[Y],ye=T[Z];let Re=T[M]*257^M*16843008;r[b]=Re<<24|Re>>>8,i[b]=Re<<16|Re>>>16,l[b]=Re<<8|Re>>>24,c[b]=Re,Re=ye*16843009^Z*65537^Y*257^b*16843008,h[M]=Re<<24|Re>>>8,g[M]=Re<<16|Re>>>16,p[M]=Re<<8|Re>>>24,y[M]=Re,b?(b=Y^T[T[T[ye^Y]]],w^=T[T[w]]):b=w=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,r=0;for(;r<t.length&&n;)n=t[r]===this.key[r],r++;if(n)return;this.key=t;const i=this.keySize=t.length;if(i!==4&&i!==6&&i!==8)throw new Error("Invalid aes key size="+i);const l=this.ksRows=(i+6+1)*4;let c,f;const h=this.keySchedule=new Uint32Array(l),g=this.invKeySchedule=new Uint32Array(l),p=this.sBox,y=this.rcon,T=this.invSubMix,b=T[0],w=T[1],R=T[2],M=T[3];let Y,Z;for(c=0;c<l;c++){if(c<i){Y=h[c]=t[c];continue}Z=Y,c%i===0?(Z=Z<<8|Z>>>24,Z=p[Z>>>24]<<24|p[Z>>>16&255]<<16|p[Z>>>8&255]<<8|p[Z&255],Z^=y[c/i|0]<<24):i>6&&c%i===4&&(Z=p[Z>>>24]<<24|p[Z>>>16&255]<<16|p[Z>>>8&255]<<8|p[Z&255]),h[c]=Y=(h[c-i]^Z)>>>0}for(f=0;f<l;f++)c=l-f,f&3?Z=h[c]:Z=h[c-4],f<4||c<=4?g[f]=Z:g[f]=b[p[Z>>>24]]^w[p[Z>>>16&255]]^R[p[Z>>>8&255]]^M[p[Z&255]],g[f]=g[f]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,n){const r=this.keySize+6,i=this.invKeySchedule,l=this.invSBox,c=this.invSubMix,f=c[0],h=c[1],g=c[2],p=c[3],y=this.uint8ArrayToUint32Array_(n);let T=y[0],b=y[1],w=y[2],R=y[3];const M=new Int32Array(e),Y=new Int32Array(M.length);let Z,ye,Re,F,k,j,oe,L,Ee,Be,pe,ct,Ye,Le;const Je=this.networkToHostOrderSwap;for(;t<M.length;){for(Ee=Je(M[t]),Be=Je(M[t+1]),pe=Je(M[t+2]),ct=Je(M[t+3]),k=Ee^i[0],j=ct^i[1],oe=pe^i[2],L=Be^i[3],Ye=4,Le=1;Le<r;Le++)Z=f[k>>>24]^h[j>>16&255]^g[oe>>8&255]^p[L&255]^i[Ye],ye=f[j>>>24]^h[oe>>16&255]^g[L>>8&255]^p[k&255]^i[Ye+1],Re=f[oe>>>24]^h[L>>16&255]^g[k>>8&255]^p[j&255]^i[Ye+2],F=f[L>>>24]^h[k>>16&255]^g[j>>8&255]^p[oe&255]^i[Ye+3],k=Z,j=ye,oe=Re,L=F,Ye=Ye+4;Z=l[k>>>24]<<24^l[j>>16&255]<<16^l[oe>>8&255]<<8^l[L&255]^i[Ye],ye=l[j>>>24]<<24^l[oe>>16&255]<<16^l[L>>8&255]<<8^l[k&255]^i[Ye+1],Re=l[oe>>>24]<<24^l[L>>16&255]<<16^l[k>>8&255]<<8^l[j&255]^i[Ye+2],F=l[L>>>24]<<24^l[k>>16&255]<<16^l[j>>8&255]<<8^l[oe&255]^i[Ye+3],Y[t]=Je(Z^T),Y[t+1]=Je(F^b),Y[t+2]=Je(Re^w),Y[t+3]=Je(ye^R),T=Ee,b=Be,w=pe,R=ct,t=t+4}return Y.buffer}}class Sw{constructor(e,t,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=n}expandKey(){const e=_w(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function _w(o){switch(o){case Yo.cbc:return"AES-CBC";case Yo.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${o}`)}}const xw=16;class wp{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?bw(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n,r){return this.useSoftware?new Promise((i,l)=>{const c=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(c,t,n,r);const f=this.flush();f?i(f.buffer):l(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,n,r)}softwareDecrypt(e,t,n,r){const{currentIV:i,currentResult:l,remainderData:c}=this;if(r!==Yo.cbc||t.byteLength!==16)return Dr.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),c&&(e=$a(c,e),this.remainderData=null);const f=this.getValidChunk(e);if(!f.length)return null;i&&(n=i);let h=this.softwareDecrypter;h||(h=this.softwareDecrypter=new Tw),h.expandKey(t);const g=l;return this.currentResult=h.decrypt(f.buffer,0,n),this.currentIV=f.slice(-16).buffer,g||null}webCryptoDecrypt(e,t,n,r){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n,r));this.key=t,this.fastAesKey=new Sw(this.subtle,t,r)}return this.fastAesKey.expandKey().then(i=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new Ew(this.subtle,new Uint8Array(n),r).decrypt(e.buffer,i)):Promise.reject(new Error("web crypto not initialized"))).catch(i=>(Dr.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${i.name}: ${i.message}`),this.onWebCryptoError(e,t,n,r)))}onWebCryptoError(e,t,n,r){const i=this.enableSoftwareAES;if(i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n,r);const l=this.flush();if(l)return l.buffer}throw new Error("WebCrypto"+(i?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%xw;return n!==e.length&&(t=e.slice(0,n),this.remainderData=e.slice(n)),t}logOnce(e){this.logEnabled&&(Dr.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const e0=Math.pow(2,17);class ww{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new ro({type:Gn.NETWORK_ERROR,details:wt.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const r=this.config,i=r.fLoader,l=r.loader;return new Promise((c,f)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(b=>b[0]==="GAP")){f(n0(e));return}else e.gap=!1;const h=this.loader=i?new i(r):new l(r),g=t0(e);e.loader=h;const p=Zy(r.fragLoadPolicy.default),y={loadPolicy:p,timeout:p.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:e0};e.stats=h.stats;const T={onSuccess:(b,w,R,M)=>{this.resetLoader(e,h);let Y=b.data;R.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(Y.slice(0,16)),Y=Y.slice(16)),c({frag:e,part:null,payload:Y,networkDetails:M})},onError:(b,w,R,M)=>{this.resetLoader(e,h),f(new ro({type:Gn.NETWORK_ERROR,details:wt.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Mr({url:n,data:void 0},b),error:new Error(`HTTP Error ${b.code} ${b.text}`),networkDetails:R,stats:M}))},onAbort:(b,w,R)=>{this.resetLoader(e,h),f(new ro({type:Gn.NETWORK_ERROR,details:wt.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:R,stats:b}))},onTimeout:(b,w,R)=>{this.resetLoader(e,h),f(new ro({type:Gn.NETWORK_ERROR,details:wt.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${y.timeout}ms`),networkDetails:R,stats:b}))}};t&&(T.onProgress=(b,w,R,M)=>t({frag:e,part:null,payload:R,networkDetails:M})),h.load(g,y,T)})}loadPart(e,t,n){this.abort();const r=this.config,i=r.fLoader,l=r.loader;return new Promise((c,f)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){f(n0(e,t));return}const h=this.loader=i?new i(r):new l(r),g=t0(e,t);e.loader=h;const p=Zy(r.fragLoadPolicy.default),y={loadPolicy:p,timeout:p.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e0};t.stats=h.stats,h.load(g,y,{onSuccess:(T,b,w,R)=>{this.resetLoader(e,h),this.updateStatsFromPart(e,t);const M={frag:e,part:t,payload:T.data,networkDetails:R};n(M),c(M)},onError:(T,b,w,R)=>{this.resetLoader(e,h),f(new ro({type:Gn.NETWORK_ERROR,details:wt.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:Mr({url:g.url,data:void 0},T),error:new Error(`HTTP Error ${T.code} ${T.text}`),networkDetails:w,stats:R}))},onAbort:(T,b,w)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,h),f(new ro({type:Gn.NETWORK_ERROR,details:wt.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:w,stats:T}))},onTimeout:(T,b,w)=>{this.resetLoader(e,h),f(new ro({type:Gn.NETWORK_ERROR,details:wt.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${y.timeout}ms`),networkDetails:w,stats:T}))}})})}updateStatsFromPart(e,t){const n=e.stats,r=t.stats,i=r.total;if(n.loaded+=r.loaded,i){const f=Math.round(e.duration/t.duration),h=Math.min(Math.round(n.loaded/i),f),p=(f-h)*Math.round(n.loaded/h);n.total=n.loaded+p}else n.total=Math.max(n.loaded,n.total);const l=n.loading,c=r.loading;l.start?l.first+=c.first-c.start:(l.start=c.start,l.first=c.first),l.end=c.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function t0(o,e=null){const t=e||o,n={frag:o,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},r=t.byteRangeStartOffset,i=t.byteRangeEndOffset;if(Dn(r)&&Dn(i)){var l;let c=r,f=i;if(o.sn==="initSegment"&&Iw((l=o.decryptdata)==null?void 0:l.method)){const h=i-r;h%16&&(f=i+(16-h%16)),r!==0&&(n.resetIV=!0,c=r-16)}n.rangeStart=c,n.rangeEnd=f}return n}function n0(o,e){const t=new Error(`GAP ${o.gap?"tag":"attribute"} found`),n={type:Gn.MEDIA_ERROR,details:wt.FRAG_GAP,fatal:!1,frag:o,error:t,networkDetails:null};return e&&(n.part=e),(e||o).stats.aborted=!0,new ro(n)}function Iw(o){return o==="AES-128"||o==="AES-256"}class ro extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class rE extends Ha{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class Ip{constructor(e,t,n,r=0,i=-1,l=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=yh(),this.buffering={audio:yh(),video:yh(),audiovideo:yh()},this.level=e,this.sn=t,this.id=n,this.size=r,this.part=i,this.partial=l}}function yh(){return{start:0,executeStart:0,executeEnd:0,end:0}}const r0={length:0,start:()=>0,end:()=>0};class tr{static isBuffered(e,t){if(e){const n=tr.getBuffered(e);for(let r=n.length;r--;)if(t>=n.start(r)&&t<=n.end(r))return!0}return!1}static bufferedRanges(e){if(e){const t=tr.getBuffered(e);return tr.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}static bufferInfo(e,t,n){if(e){const r=tr.bufferedRanges(e);if(r.length)return tr.bufferedInfo(r,t,n)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.length>1&&e.sort((g,p)=>g.start-p.start||p.end-g.end);let r=-1,i=[];if(n)for(let g=0;g<e.length;g++){t>=e[g].start&&t<=e[g].end&&(r=g);const p=i.length;if(p){const y=i[p-1].end;e[g].start-y<n?e[g].end>y&&(i[p-1].end=e[g].end):i.push(e[g])}else i.push(e[g])}else i=e;let l=0,c,f=t,h=t;for(let g=0;g<i.length;g++){const p=i[g].start,y=i[g].end;if(r===-1&&t>=p&&t<=y&&(r=g),t+n>=p&&t<y)f=p,h=y,l=h-t;else if(t+n<p){c=p;break}}return{len:l,start:f||0,end:h||0,nextStart:c,buffered:e,bufferedIndex:r}}static getBuffered(e){try{return e.buffered||r0}catch(t){return Dr.log("failed to get media.buffered",t),r0}}}const iE=/\{\$([a-zA-Z0-9-_]+)\}/g;function i0(o){return iE.test(o)}function Wm(o,e){if(o.variableList!==null||o.hasVariableRefs){const t=o.variableList;return e.replace(iE,n=>{const r=n.substring(2,n.length-1),i=t==null?void 0:t[r];return i===void 0?(o.playlistParsingError||(o.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${r}"`)),n):i})}return e}function a0(o,e,t){let n=o.variableList;n||(o.variableList=n={});let r,i;if("QUERYPARAM"in e){r=e.QUERYPARAM;try{const l=new self.URL(t).searchParams;if(l.has(r))i=l.get(r);else throw new Error(`"${r}" does not match any query parameter in URI: "${t}"`)}catch(l){o.playlistParsingError||(o.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${l.message}`))}}else r=e.NAME,i=e.VALUE;r in n?o.playlistParsingError||(o.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${r}"`)):n[r]=i||""}function Aw(o,e,t){const n=e.IMPORT;if(t&&n in t){let r=o.variableList;r||(o.variableList=r={}),r[n]=t[n]}else o.playlistParsingError||(o.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}const kw=/^(\d+)x(\d+)$/,s0=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Jr{constructor(e,t){typeof e=="string"&&(e=Jr.parseAttrList(e,t)),Or(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const n=new Uint8Array(t.length/2);for(let r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(r*2,r*2+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const n=this[e];return(n?n.split(/[ ,]+/):[]).reduce((r,i)=>(r[i.toLowerCase()]=!0,r),t)}bool(e){return this[e]==="YES"}decimalResolution(e){const t=kw.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let n;const r={},i='"';for(s0.lastIndex=0;(n=s0.exec(e))!==null;){const l=n[1].trim();let c=n[2];const f=c.indexOf(i)===0&&c.lastIndexOf(i)===c.length-1;let h=!1;if(f)c=c.slice(1,-1);else switch(l){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":h=!0}if(t&&(f||h))c=Wm(t,c);else if(!h&&!f)switch(l){case"CLOSED-CAPTIONS":if(c==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Dr.warn(`${e}: attribute ${l} is missing quotes`)}r[l]=c}return r}}const Rw="com.apple.hls.interstitial";function Cw(o){return o!=="ID"&&o!=="CLASS"&&o!=="CUE"&&o!=="START-DATE"&&o!=="DURATION"&&o!=="END-DATE"&&o!=="END-ON-NEXT"}function Nw(o){return o==="SCTE35-OUT"||o==="SCTE35-IN"||o==="SCTE35-CMD"}class aE{constructor(e,t,n=0){var r;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(t==null?void 0:t.tagAnchor)||null,this.tagOrder=(r=t==null?void 0:t.tagOrder)!=null?r:n,t){const i=t.attr;for(const l in i)if(Object.prototype.hasOwnProperty.call(e,l)&&e[l]!==i[l]){Dr.warn(`DATERANGE tag attribute: "${l}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=l;break}e=Or(new Jr({}),i,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const i=(t==null?void 0:t.endDate)||new Date(this.attr["END-DATE"]);Dn(i.getTime())&&(this._endDate=i)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(Dr.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Dn(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===Rw}get isValid(){return!!this.id&&!this._badValueForSameId&&Dn(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const Dw=10;class Lw{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(t=>{let n=t.decryptdata;return n||(t.setKeyFormat(e.keyFormat),n=t.decryptdata),!!n&&e.matches(n)})}get hasProgramDateTime(){return this.fragments.length?Dn(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||Dw}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(t!==-1){for(let n=e.length;n--;)if(e[n].index>t)return e[n].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function sE(o,e){return o.length===e.length?!o.some((t,n)=>t!==e[n]):!1}function o0(o,e){return!o&&!e?!0:!o||!e?!1:sE(o,e)}function rc(o){return o==="AES-128"||o==="AES-256"||o==="AES-256-CTR"}function Ap(o){switch(o){case"AES-128":case"AES-256":return Yo.cbc;case"AES-256-CTR":return Yo.ctr;default:throw new Error(`invalid full segment method ${o}`)}}function kp(o){return Uint8Array.from(atob(o),e=>e.charCodeAt(0))}function Xm(o){return Uint8Array.from(unescape(encodeURIComponent(o)),e=>e.charCodeAt(0))}function Pw(o){const e=Xm(o).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function Mw(o){const e=function(n,r,i){const l=n[r];n[r]=n[i],n[i]=l};e(o,0,3),e(o,1,2),e(o,4,5),e(o,6,7)}function Ow(o){const e=o.split(":");let t=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),r=n[n.length-1].split(",");if(r.length===2){const i=r[0]==="base64",l=r[1];i?(n.splice(-1,1),t=kp(l)):t=Pw(l)}}return t}const Qh=typeof self<"u"?self:void 0;var ri={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},oa={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function Oh(o){switch(o){case oa.FAIRPLAY:return ri.FAIRPLAY;case oa.PLAYREADY:return ri.PLAYREADY;case oa.WIDEVINE:return ri.WIDEVINE;case oa.CLEARKEY:return ri.CLEARKEY}}function om(o){switch(o){case ri.FAIRPLAY:return oa.FAIRPLAY;case ri.PLAYREADY:return oa.PLAYREADY;case ri.WIDEVINE:return oa.WIDEVINE;case ri.CLEARKEY:return oa.CLEARKEY}}function kd(o){const{drmSystems:e,widevineLicenseUrl:t}=o,n=e?[ri.FAIRPLAY,ri.WIDEVINE,ri.PLAYREADY,ri.CLEARKEY].filter(r=>!!e[r]):[];return!n[ri.WIDEVINE]&&t&&n.push(ri.WIDEVINE),n}const oE=function(o){return Qh!=null&&(o=Qh.navigator)!=null&&o.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function Fw(o,e,t,n){let r;switch(o){case ri.FAIRPLAY:r=["cenc","sinf"];break;case ri.WIDEVINE:case ri.PLAYREADY:r=["cenc"];break;case ri.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${o}`)}return zw(r,e,t,n)}function zw(o,e,t,n){return[{initDataTypes:o,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(i=>({contentType:`audio/mp4; codecs=${i}`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:t.map(i=>({contentType:`video/mp4; codecs=${i}`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function Uw(o){var e;return!!o&&(o.sessionType==="persistent-license"||!!((e=o.sessionTypes)!=null&&e.some(t=>t==="persistent-license")))}function Bw(o){const e=new Uint16Array(o.buffer,o.byteOffset,o.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),n=t.substring(t.indexOf("<"),t.length),l=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(l){const c=l.childNodes[0]?l.childNodes[0].nodeValue:l.getAttribute("VALUE");if(c){const f=kp(c).subarray(0,16);return Mw(f),f}}return null}let vh={};class sg{static clearKeyUriToKeyIdMap(){vh={}}constructor(e,t,n,r=[1],i=null,l){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=r,this.iv=i,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!rc(e),l!=null&&l.startsWith("0x")&&(this.keyId=new Uint8Array(Bv(l)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&sE(e.keyFormatVersions,this.keyFormatVersions)&&o0(e.iv,this.iv)&&o0(e.keyId,this.keyId)}isSupported(){if(this.method){if(rc(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case oa.FAIRPLAY:case oa.WIDEVINE:case oa.PLAYREADY:case oa.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(rc(this.method)&&this.uri&&!this.iv){typeof e!="number"&&(Dr.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const n=jw(e);return new sg(this.method,this.uri,"identity",this.keyFormatVersions,n)}if(this.pssh&&this.keyId)return this;const t=Ow(this.uri);if(t)switch(this.keyFormat){case oa.WIDEVINE:if(this.pssh=t,!this.keyId&&t.length>=22){const n=t.length-22;this.keyId=t.subarray(n,n+16)}break;case oa.PLAYREADY:{const n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=Gx(n,null,t),this.keyId=Bw(t);break}default:{let n=t.subarray(0,16);if(n.length!==16){const r=new Uint8Array(16);r.set(n,16-n.length),n=r}this.keyId=n;break}}if(!this.keyId||this.keyId.byteLength!==16){let n=vh[this.uri];if(!n){const r=Object.keys(vh).length%Number.MAX_SAFE_INTEGER;n=new Uint8Array(16),new DataView(n.buffer,12,4).setUint32(0,r),vh[this.uri]=n}this.keyId=n}return this}}function jw(o){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=o>>8*(15-t)&255;return e}const l0=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,u0=/#EXT-X-MEDIA:(.*)/g,qw=/^#EXT(?:INF|-X-TARGETDURATION):/m,lm=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),Gw=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Cs{static findGroup(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.id===t)return r}}static resolve(e,t){return Ep.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return qw.test(e)}static parseMasterPlaylist(e,t){const n=i0(e),r={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},i=[];l0.lastIndex=0;let l;for(;(l=l0.exec(e))!=null;)if(l[1]){var c;const h=new Jr(l[1],r),g=Wm(r,l[2]),p={attrs:h,bitrate:h.decimalInteger("BANDWIDTH")||h.decimalInteger("AVERAGE-BANDWIDTH"),name:h.NAME,url:Cs.resolve(g,t)},y=h.decimalResolution("RESOLUTION");y&&(p.width=y.width,p.height=y.height),f0(h.CODECS,p);const T=h["SUPPLEMENTAL-CODECS"];T&&(p.supplemental={},f0(T,p.supplemental)),(c=p.unknownCodecs)!=null&&c.length||i.push(p),r.levels.push(p)}else if(l[3]){const h=l[3],g=l[4];switch(h){case"SESSION-DATA":{const p=new Jr(g,r),y=p["DATA-ID"];y&&(r.sessionData===null&&(r.sessionData={}),r.sessionData[y]=p);break}case"SESSION-KEY":{const p=c0(g,t,r);p.encrypted&&p.isSupported()?(r.sessionKeys===null&&(r.sessionKeys=[]),r.sessionKeys.push(p)):Dr.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${g}"`);break}case"DEFINE":{{const p=new Jr(g,r);a0(r,p,t)}break}case"CONTENT-STEERING":{const p=new Jr(g,r);r.contentSteering={uri:Cs.resolve(p["SERVER-URI"],t),pathwayId:p["PATHWAY-ID"]||"."};break}case"START":{r.startTimeOffset=d0(g);break}}}const f=i.length>0&&i.length<r.levels.length;return r.levels=f?i:r.levels,r.levels.length===0&&(r.playlistParsingError=new Error("no levels found in manifest")),r}static parseMasterPlaylistMedia(e,t,n){let r;const i={},l=n.levels,c={AUDIO:l.map(h=>({id:h.attrs.AUDIO,audioCodec:h.audioCodec})),SUBTITLES:l.map(h=>({id:h.attrs.SUBTITLES,textCodec:h.textCodec})),"CLOSED-CAPTIONS":[]};let f=0;for(u0.lastIndex=0;(r=u0.exec(e))!==null;){const h=new Jr(r[1],n),g=h.TYPE;if(g){const p=c[g],y=i[g]||[];i[g]=y;const T=h.LANGUAGE,b=h["ASSOC-LANGUAGE"],w=h.CHANNELS,R=h.CHARACTERISTICS,M=h["INSTREAM-ID"],Y={attrs:h,bitrate:0,id:f++,groupId:h["GROUP-ID"]||"",name:h.NAME||T||"",type:g,default:h.bool("DEFAULT"),autoselect:h.bool("AUTOSELECT"),forced:h.bool("FORCED"),lang:T,url:h.URI?Cs.resolve(h.URI,t):""};if(b&&(Y.assocLang=b),w&&(Y.channels=w),R&&(Y.characteristics=R),M&&(Y.instreamId=M),p!=null&&p.length){const Z=Cs.findGroup(p,Y.groupId)||p[0];h0(Y,Z,"audioCodec"),h0(Y,Z,"textCodec")}y.push(Y)}}return i}static parseLevelPlaylist(e,t,n,r,i,l){var c;const f={url:t},h=new Lw(t),g=h.fragments,p=[];let y=null,T=0,b=0,w=0,R=0,M=0,Y=null,Z=new im(r,f),ye,Re,F,k=-1,j=!1,oe=null,L;if(lm.lastIndex=0,h.m3u8=e,h.hasVariableRefs=i0(e),((c=lm.exec(e))==null?void 0:c[0])!=="#EXTM3U")return h.playlistParsingError=new Error("Missing format identifier #EXTM3U"),h;for(;(ye=lm.exec(e))!==null;){j&&(j=!1,Z=new im(r,f),Z.playlistOffset=w,Z.setStart(w),Z.sn=T,Z.cc=R,M&&(Z.bitrate=M),Z.level=n,y&&(Z.initSegment=y,y.rawProgramDateTime&&(Z.rawProgramDateTime=y.rawProgramDateTime,y.rawProgramDateTime=null),oe&&(Z.setByteRange(oe),oe=null)));const ct=ye[1];if(ct){Z.duration=parseFloat(ct);const Ye=(" "+ye[2]).slice(1);Z.title=Ye||null,Z.tagList.push(Ye?["INF",ct,Ye]:["INF",ct])}else if(ye[3]){if(Dn(Z.duration)){Z.playlistOffset=w,Z.setStart(w),F&&m0(Z,F,h),Z.sn=T,Z.level=n,Z.cc=R,g.push(Z);const Ye=(" "+ye[3]).slice(1);Z.relurl=Wm(h,Ye),Qm(Z,Y,p),Y=Z,w+=Z.duration,T++,b=0,j=!0}}else{if(ye=ye[0].match(Gw),!ye){Dr.warn("No matches on slow regex match for level playlist!");continue}for(Re=1;Re<ye.length&&ye[Re]===void 0;Re++);const Ye=(" "+ye[Re]).slice(1),Le=(" "+ye[Re+1]).slice(1),Je=ye[Re+2]?(" "+ye[Re+2]).slice(1):null;switch(Ye){case"BYTERANGE":Y?Z.setByteRange(Le,Y):Z.setByteRange(Le);break;case"PROGRAM-DATE-TIME":Z.rawProgramDateTime=Le,Z.tagList.push(["PROGRAM-DATE-TIME",Le]),k===-1&&(k=g.length);break;case"PLAYLIST-TYPE":h.type&&to(h,Ye,ye),h.type=Le.toUpperCase();break;case"MEDIA-SEQUENCE":h.startSN!==0?to(h,Ye,ye):g.length>0&&p0(h,Ye,ye),T=h.startSN=parseInt(Le);break;case"SKIP":{h.skippedSegments&&to(h,Ye,ye);const Ge=new Jr(Le,h),tt=Ge.decimalInteger("SKIPPED-SEGMENTS");if(Dn(tt)){h.skippedSegments+=tt;for(let Me=tt;Me--;)g.push(null);T+=tt}const Ze=Ge.enumeratedString("RECENTLY-REMOVED-DATERANGES");Ze&&(h.recentlyRemovedDateranges=(h.recentlyRemovedDateranges||[]).concat(Ze.split("	")));break}case"TARGETDURATION":h.targetduration!==0&&to(h,Ye,ye),h.targetduration=Math.max(parseInt(Le),1);break;case"VERSION":h.version!==null&&to(h,Ye,ye),h.version=parseInt(Le);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":h.live||to(h,Ye,ye),h.live=!1;break;case"#":(Le||Je)&&Z.tagList.push(Je?[Le,Je]:[Le]);break;case"DISCONTINUITY":R++,Z.tagList.push(["DIS"]);break;case"GAP":Z.gap=!0,Z.tagList.push([Ye]);break;case"BITRATE":Z.tagList.push([Ye,Le]),M=parseInt(Le)*1e3,Dn(M)?Z.bitrate=M:M=0;break;case"DATERANGE":{const Ge=new Jr(Le,h),tt=new aE(Ge,h.dateRanges[Ge.ID],h.dateRangeTagCount);h.dateRangeTagCount++,tt.isValid||h.skippedSegments?h.dateRanges[tt.id]=tt:Dr.warn(`Ignoring invalid DATERANGE tag: "${Le}"`),Z.tagList.push(["EXT-X-DATERANGE",Le]);break}case"DEFINE":{{const Ge=new Jr(Le,h);"IMPORT"in Ge?Aw(h,Ge,l):a0(h,Ge,t)}break}case"DISCONTINUITY-SEQUENCE":h.startCC!==0?to(h,Ye,ye):g.length>0&&p0(h,Ye,ye),h.startCC=R=parseInt(Le);break;case"KEY":{const Ge=c0(Le,t,h);if(Ge.isSupported()){if(Ge.method==="NONE"){F=void 0;break}F||(F={});const tt=F[Ge.keyFormat];tt!=null&&tt.matches(Ge)||(tt&&(F=Or({},F)),F[Ge.keyFormat]=Ge)}else Dr.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${Le}"`);break}case"START":h.startTimeOffset=d0(Le);break;case"MAP":{const Ge=new Jr(Le,h);if(Z.duration){const tt=new im(r,f);g0(tt,Ge,n,F),y=tt,Z.initSegment=y,y.rawProgramDateTime&&!Z.rawProgramDateTime&&(Z.rawProgramDateTime=y.rawProgramDateTime)}else{const tt=Z.byteRangeEndOffset;if(tt){const Ze=Z.byteRangeStartOffset;oe=`${tt-Ze}@${Ze}`}else oe=null;g0(Z,Ge,n,F),y=Z,j=!0}y.cc=R;break}case"SERVER-CONTROL":{L&&to(h,Ye,ye),L=new Jr(Le),h.canBlockReload=L.bool("CAN-BLOCK-RELOAD"),h.canSkipUntil=L.optionalFloat("CAN-SKIP-UNTIL",0),h.canSkipDateRanges=h.canSkipUntil>0&&L.bool("CAN-SKIP-DATERANGES"),h.partHoldBack=L.optionalFloat("PART-HOLD-BACK",0),h.holdBack=L.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{h.partTarget&&to(h,Ye,ye);const Ge=new Jr(Le);h.partTarget=Ge.decimalFloatingPoint("PART-TARGET");break}case"PART":{let Ge=h.partList;Ge||(Ge=h.partList=[]);const tt=b>0?Ge[Ge.length-1]:void 0,Ze=b++,Me=new Jr(Le,h),$e=new Cx(Me,Z,f,Ze,tt);Ge.push($e),Z.duration+=$e.duration;break}case"PRELOAD-HINT":{const Ge=new Jr(Le,h);h.preloadHint=Ge;break}case"RENDITION-REPORT":{const Ge=new Jr(Le,h);h.renditionReports=h.renditionReports||[],h.renditionReports.push(Ge);break}default:Dr.warn(`line parsed but not handled: ${ye}`);break}}}Y&&!Y.relurl?(g.pop(),w-=Y.duration,h.partList&&(h.fragmentHint=Y)):h.partList&&(Qm(Z,Y,p),Z.cc=R,h.fragmentHint=Z,F&&m0(Z,F,h)),h.targetduration||(h.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const Ee=g.length,Be=g[0],pe=g[Ee-1];if(w+=h.skippedSegments*h.targetduration,w>0&&Ee&&pe){h.averagetargetduration=w/Ee;const ct=pe.sn;h.endSN=ct!=="initSegment"?ct:0,h.live||(pe.endList=!0),k>0&&(Hw(g,k),Be&&p.unshift(Be))}return h.fragmentHint&&(w+=h.fragmentHint.duration),h.totalduration=w,p.length&&h.dateRangeTagCount&&Be&&lE(p,h),h.endCC=R,h}}function lE(o,e){let t=o.length;if(!t)if(e.hasProgramDateTime){const c=e.fragments[e.fragments.length-1];o.push(c),t++}else return;const n=o[t-1],r=e.live?1/0:e.totalduration,i=Object.keys(e.dateRanges);for(let c=i.length;c--;){const f=e.dateRanges[i[c]],h=f.startDate.getTime();f.tagAnchor=n.ref;for(let g=t;g--;){var l;if(((l=o[g])==null?void 0:l.sn)<e.startSN)break;const p=$w(e,h,o,g,r);if(p!==-1){f.tagAnchor=e.fragments[p].ref;break}}}}function $w(o,e,t,n,r){const i=t[n];if(i){const c=i.programDateTime;if(e>=c||n===0){var l;const f=(((l=t[n+1])==null?void 0:l.start)||r)-i.start;if(e<=c+f*1e3){const h=t[n].sn-o.startSN;if(h<0)return-1;const g=o.fragments;if(g.length>t.length){const y=(t[n+1]||g[g.length-1]).sn-o.startSN;for(let T=y;T>h;T--){const b=g[T].programDateTime;if(e>=b&&e<b+g[T].duration*1e3)return T}}return h}}}return-1}function c0(o,e,t){var n,r;const i=new Jr(o,t),l=(n=i.METHOD)!=null?n:"",c=i.URI,f=i.hexadecimalInteger("IV"),h=i.KEYFORMATVERSIONS,g=(r=i.KEYFORMAT)!=null?r:"identity";c&&i.IV&&!f&&Dr.error(`Invalid IV: ${i.IV}`);const p=c?Cs.resolve(c,e):"",y=(h||"1").split("/").map(Number).filter(Number.isFinite);return new sg(l,p,g,y,f,i.KEYID)}function d0(o){const t=new Jr(o).decimalFloatingPoint("TIME-OFFSET");return Dn(t)?t:null}function f0(o,e){let t=(o||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const r=t.filter(i=>Sp(i,n));r.length&&(e[`${n}Codec`]=r.map(i=>i.split("/")[0]).join(","),t=t.filter(i=>r.indexOf(i)===-1))}),e.unknownCodecs=t}function h0(o,e,t){const n=e[t];n&&(o[t]=n)}function Hw(o,e){let t=o[e];for(let n=e;n--;){const r=o[n];if(!r)return;r.programDateTime=t.programDateTime-r.duration*1e3,t=r}}function Qm(o,e,t){o.rawProgramDateTime?t.push(o):e!=null&&e.programDateTime&&(o.programDateTime=e.endProgramDateTime)}function g0(o,e,t,n){o.relurl=e.URI,e.BYTERANGE&&o.setByteRange(e.BYTERANGE),o.level=t,o.sn="initSegment",n&&(o.levelkeys=n),o.initSegment=null}function m0(o,e,t){o.levelkeys=e;const{encryptedFragments:n}=t;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(r=>e[r].isCommonEncryption)&&n.push(o)}function to(o,e,t){o.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function p0(o,e,t){o.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function um(o,e){const t=e.startPTS;if(Dn(t)){let n=0,r;e.sn>o.sn?(n=t-o.start,r=o):(n=o.start-t,r=e),r.duration!==n&&r.setDuration(n)}else e.sn>o.sn?o.cc===e.cc&&o.minEndPTS?e.setStart(o.start+(o.minEndPTS-o.start)):e.setStart(o.start+o.duration):e.setStart(Math.max(o.start-e.duration,0))}function uE(o,e,t,n,r,i,l){n-t<=0&&(l.warn("Fragment should have a positive duration",e),n=t+e.duration,i=r+e.duration);let f=t,h=n;const g=e.startPTS,p=e.endPTS;if(Dn(g)){const M=Math.abs(g-t);o&&M>o.totalduration?l.warn(`media timestamps and playlist times differ by ${M}s for level ${e.level} ${o.url}`):Dn(e.deltaPTS)?e.deltaPTS=Math.max(M,e.deltaPTS):e.deltaPTS=M,f=Math.max(t,g),t=Math.min(t,g),r=e.startDTS!==void 0?Math.min(r,e.startDTS):r,h=Math.min(n,p),n=Math.max(n,p),i=e.endDTS!==void 0?Math.max(i,e.endDTS):i}const y=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(n-e.start),e.startPTS=t,e.maxStartPTS=f,e.startDTS=r,e.endPTS=n,e.minEndPTS=h,e.endDTS=i;const T=e.sn;if(!o||T<o.startSN||T>o.endSN)return 0;let b;const w=T-o.startSN,R=o.fragments;for(R[w]=e,b=w;b>0;b--)um(R[b],R[b-1]);for(b=w;b<R.length-1;b++)um(R[b],R[b+1]);return o.fragmentHint&&um(R[R.length-1],o.fragmentHint),o.PTSKnown=o.alignedSliding=!0,y}function Vw(o,e,t){if(o===e)return;let n=null;const r=o.fragments;for(let g=r.length-1;g>=0;g--){const p=r[g].initSegment;if(p){n=p;break}}o.fragmentHint&&delete o.fragmentHint.endPTS;let i;Ww(o,e,(g,p,y,T)=>{if((!e.startCC||e.skippedSegments)&&p.cc!==g.cc){const b=g.cc-p.cc;for(let w=y;w<T.length;w++)T[w].cc+=b;e.endCC=T[T.length-1].cc}Dn(g.startPTS)&&Dn(g.endPTS)&&(p.setStart(p.startPTS=g.startPTS),p.startDTS=g.startDTS,p.maxStartPTS=g.maxStartPTS,p.endPTS=g.endPTS,p.endDTS=g.endDTS,p.minEndPTS=g.minEndPTS,p.setDuration(g.endPTS-g.startPTS),p.duration&&(i=p),e.PTSKnown=e.alignedSliding=!0),g.hasStreams&&(p.elementaryStreams=g.elementaryStreams),p.loader=g.loader,g.hasStats&&(p.stats=g.stats),g.initSegment&&(p.initSegment=g.initSegment,n=g.initSegment)});const l=e.fragments,c=e.fragmentHint?l.concat(e.fragmentHint):l;if(n&&c.forEach(g=>{var p;g&&(!g.initSegment||g.initSegment.relurl===((p=n)==null?void 0:p.relurl))&&(g.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=l.some(g=>!g),e.deltaUpdateFailed){t.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let g=e.skippedSegments;g--;)l.shift();e.startSN=l[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=Kw(o.dateRanges,e,t));const g=o.fragments.filter(p=>p.rawProgramDateTime);if(o.hasProgramDateTime&&!e.hasProgramDateTime)for(let p=1;p<c.length;p++)c[p].programDateTime===null&&Qm(c[p],c[p-1],g);lE(g,e)}e.endCC=l[l.length-1].cc}if(!e.startCC){var f;const g=fE(o,e.startSN-1);e.startCC=(f=g==null?void 0:g.cc)!=null?f:l[0].cc}Yw(o.partList,e.partList,(g,p)=>{p.elementaryStreams=g.elementaryStreams,p.stats=g.stats}),i?uE(e,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS,t):cE(o,e),l.length&&(e.totalduration=e.edge-l[0].start),e.driftStartTime=o.driftStartTime,e.driftStart=o.driftStart;const h=e.advancedDateTime;if(e.advanced&&h){const g=e.edge;e.driftStart||(e.driftStartTime=h,e.driftStart=g),e.driftEndTime=h,e.driftEnd=g}else e.driftEndTime=o.driftEndTime,e.driftEnd=o.driftEnd,e.advancedDateTime=o.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=o.requestScheduled)}function Kw(o,e,t){const{dateRanges:n,recentlyRemovedDateranges:r}=e,i=Or({},o);r&&r.forEach(f=>{delete i[f]});const c=Object.keys(i).length;return c?(Object.keys(n).forEach(f=>{const h=i[f],g=new aE(n[f].attr,h);g.isValid?(i[f]=g,h||(g.tagOrder+=c)):t.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Kr(n[f].attr)}"`)}),i):n}function Yw(o,e,t){if(o&&e){let n=0;for(let r=0,i=o.length;r<=i;r++){const l=o[r],c=e[r+n];l&&c&&l.index===c.index&&l.fragment.sn===c.fragment.sn?t(l,c):n--}}}function Ww(o,e,t){const n=e.skippedSegments,r=Math.max(o.startSN,e.startSN)-e.startSN,i=(o.fragmentHint?1:0)+(n?e.endSN:Math.min(o.endSN,e.endSN))-e.startSN,l=e.startSN-o.startSN,c=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,f=o.fragmentHint?o.fragments.concat(o.fragmentHint):o.fragments;for(let h=r;h<=i;h++){const g=f[l+h];let p=c[h];if(n&&!p&&g&&(p=e.fragments[h]=g),g&&p){t(g,p,h,c);const y=g.relurl,T=p.relurl;if(y&&Xw(y,T)){e.playlistParsingError=y0(`media sequence mismatch ${p.sn}:`,o,e,g,p);return}else if(g.cc!==p.cc){e.playlistParsingError=y0(`discontinuity sequence mismatch (${g.cc}!=${p.cc})`,o,e,g,p);return}}}}function y0(o,e,t,n,r){return new Error(`${o} ${r.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function cE(o,e,t=!0){const n=e.startSN+e.skippedSegments-o.startSN,r=o.fragments,i=n>=0;let l=0;if(i&&n<r.length)l=r[n].start;else if(i&&e.startSN===o.endSN+1)l=o.fragmentEnd;else if(i&&t)l=o.fragmentStart+n*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)l=o.fragmentStart;else return;Zm(e,l)}function Zm(o,e){if(e){const t=o.fragments;for(let n=o.skippedSegments;n<t.length;n++)t[n].addStart(e);o.fragmentHint&&o.fragmentHint.addStart(e)}}function dE(o,e=1/0){let t=1e3*o.targetduration;if(o.updated){const n=o.fragments;if(n.length&&t*4>e){const i=n[n.length-1].duration*1e3;i<t&&(t=i)}}else t/=2;return Math.round(t)}function fE(o,e,t){if(!o)return null;let n=o.fragments[e-o.startSN];return n||(n=o.fragmentHint,n&&n.sn===e)?n:e<o.startSN&&t&&t.sn===e?t:null}function v0(o,e,t){return o?hE(o.partList,e,t):null}function hE(o,e,t){if(o)for(let n=o.length;n--;){const r=o[n];if(r.index===t&&r.fragment.sn===e)return r}return null}function gE(o){o.forEach((e,t)=>{var n;(n=e.details)==null||n.fragments.forEach(r=>{r.level=t,r.initSegment&&(r.initSegment.level=t)})})}function Xw(o,e){return o!==e&&e?E0(o)!==E0(e):!1}function E0(o){return o.replace(/\?[^?]*$/,"")}function Cd(o,e){for(let n=0,r=o.length;n<r;n++){var t;if(((t=o[n])==null?void 0:t.cc)===e)return o[n]}return null}function Qw(o,e){return!!(o&&e.startCC<o.endCC&&e.endCC>o.startCC)}function b0(o,e){const t=o.start+e;o.startPTS=t,o.setStart(t),o.endPTS=t+o.duration}function mE(o,e){const t=e.fragments;for(let n=0,r=t.length;n<r;n++)b0(t[n],o);e.fragmentHint&&b0(e.fragmentHint,o),e.alignedSliding=!0}function Zw(o,e){o&&(pE(e,o),e.alignedSliding||Zh(e,o),!e.alignedSliding&&!e.skippedSegments&&cE(o,e,!1))}function pE(o,e){if(!Qw(e,o))return;const t=Math.min(e.endCC,o.endCC),n=Cd(e.fragments,t),r=Cd(o.fragments,t);if(!n||!r)return;Dr.log(`Aligning playlist at start of dicontinuity sequence ${t}`);const i=n.start-r.start;mE(i,o)}function Zh(o,e){if(!o.hasProgramDateTime||!e.hasProgramDateTime)return;const t=o.fragments,n=e.fragments;if(!t.length||!n.length)return;let r,i;const l=Math.min(e.endCC,o.endCC);e.startCC<l&&o.startCC<l&&(r=Cd(n,l),i=Cd(t,l)),(!r||!i)&&(r=n[Math.floor(n.length/2)],i=Cd(t,r.cc)||t[Math.floor(t.length/2)]);const c=r.programDateTime,f=i.programDateTime;if(!c||!f)return;const h=(f-c)/1e3-(i.start-r.start);mE(h,o)}function Wi(o,e,t){la(o,e,t),o.addEventListener(e,t)}function la(o,e,t){o.removeEventListener(e,t)}const Jw={toString:function(o){let e="";const t=o.length;for(let n=0;n<t;n++)e+=`[${o.start(n).toFixed(3)}-${o.end(n).toFixed(3)}]`;return e}},Wt={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class Rp extends rE{constructor(e,t,n,r,i){super(r,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=Wt.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:l,fragCurrent:c,media:f,mediaBuffer:h,state:g}=this,p=f?f.currentTime:0,y=tr.bufferInfo(h||f,p,l.maxBufferHole),T=!y.len;if(this.log(`Media seeking to ${Dn(p)?p.toFixed(3):p}, state: ${g}, ${T?"out of":"in"} buffer`),this.state===Wt.ENDED)this.resetLoadingState();else if(c){const b=l.maxFragLookUpTolerance,w=c.start-b,R=c.start+c.duration+b;if(T||R<y.start||w>y.end){const M=p>R;(p<w||M)&&(M&&c.loader&&(this.log(`Cancelling fragment load for seek (sn: ${c.sn})`),c.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(f){this.fragmentTracker.removeFragmentsInRange(p,1/0,this.playlistType,!0);const b=this.lastCurrentTime;if(p>b&&(this.lastCurrentTime=p),!this.loadingParts){const w=Math.max(y.end,p),R=this.shouldLoadParts(this.getLevelDetails(),w);R&&(this.log(`LL-Part loading ON after seeking to ${p.toFixed(2)} with buffer @${w.toFixed(2)}`),this.loadingParts=R)}}this.hls.hasEnoughToStart||(this.log(`Setting ${T?"startPosition":"nextLoadPosition"} to ${p} for seek without enough to start`),this.nextLoadPosition=p,T&&(this.startPosition=p)),T&&this.state===Wt.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=i,this.hls=e,this.fragmentLoader=new ww(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new wp(e.config)}registerListeners(){const{hls:e}=this;e.on(Se.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Se.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Se.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Se.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Se.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Se.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Se.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Se.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===Wt.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Wt.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const n=e.end||0,r=this.config.timelineOffset||0;if(n<=r)return!1;const i=e.buffered;this.config.maxBufferHole&&i&&i.length>1&&(e=tr.bufferedInfo(i,e.start,0));const l=e.nextStart;if(l&&l>r&&l<t.edge||this.media.currentTime<e.start)return!1;const f=t.partList;if(f!=null&&f.length){const g=f[f.length-1];return tr.isBuffered(this.media,g.start+g.duration/2)}const h=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(h)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;Wi(n,"seeking",this.onMediaSeeking),Wi(n,"ended",this.onMediaEnded);const r=this.config;this.levels&&r.autoStartLoad&&this.state===Wt.STOPPED&&this.startLoad(r.startPosition)}onMediaDetaching(e,t){const n=!!t.transferMedia,r=this.media;if(r!==null){if(r.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),la(r,"seeking",this.onMediaSeeking),la(r,"ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=Wt.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this.startFragRequested=!0,this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){const r=i=>{const l=i.frag;if(this.fragContextChanged(l)){this.warn(`${l.type} sn: ${l.sn}${i.part?" part: "+i.part.index:""} of ${this.fragInfo(l,!1,i.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(l);return}l.stats.chunkCount++,this._handleFragmentLoadProgress(i)};this._doFragLoad(e,t,n,r).then(i=>{if(!i)return;const l=this.state,c=i.frag;if(this.fragContextChanged(c)){(l===Wt.FRAG_LOADING||!this.fragCurrent&&l===Wt.PARSING)&&(this.fragmentTracker.removeFragment(c),this.state=Wt.IDLE);return}"payload"in i&&(this.log(`Loaded ${c.type} sn: ${c.sn} of ${this.playlistLabel()} ${c.level}`),this.hls.trigger(Se.FRAG_LOADED,i)),this._handleFragmentLoadComplete(i)}).catch(i=>{this.state===Wt.STOPPED||this.state===Wt.ERROR||(this.warn(`Frag error: ${(i==null?void 0:i.message)||i}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===bi.APPENDING){const i=e.type,l=this.getFwdBufferInfo(this.mediaBuffer,i),c=Math.max(e.duration,l?l.len:this.config.maxBufferLength),f=this.backtrackFragment;((f?e.sn-f.sn:0)===1||this.reduceMaxBufferLength(c,e.duration))&&n.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===bi.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return(t==null?void 0:t.live)&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,n=null){if(!(e-t))return;const r={startOffset:e,endOffset:t,type:n};this.hls.trigger(Se.BUFFER_FLUSHING,r)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(n=>{const r=n==null?void 0:n.frag;if(!r||this.fragContextChanged(r)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:r}=this,{frag:i,payload:l}=n,c=i.decryptdata;if(l&&l.byteLength>0&&c!=null&&c.key&&c.iv&&rc(c.method)){const f=self.performance.now();return this.decrypter.decrypt(new Uint8Array(l),c.key.buffer,c.iv.buffer,Ap(c.method)).catch(h=>{throw r.trigger(Se.ERROR,{type:Gn.MEDIA_ERROR,details:wt.FRAG_DECRYPT_ERROR,fatal:!1,error:h,reason:h.message,frag:i}),h}).then(h=>{const g=self.performance.now();return r.trigger(Se.FRAG_DECRYPTED,{frag:i,payload:h,stats:{tstart:f,tdecrypt:g}}),n.payload=h,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===Wt.STOPPED||this.state===Wt.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state!==Wt.STOPPED&&(this.state=Wt.IDLE),e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var n,r;const i=e.tracks;if(i&&!t.encrypted&&((n=i.audio)!=null&&n.encrypted||(r=i.video)!=null&&r.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const l=this.media,c=new Error(`Encrypted track with no key in ${this.fragInfo(t)} (media ${l?"attached mediaKeys: "+l.mediaKeys:"detached"})`);return this.warn(c.message),!l||l.mediaKeys?!1:(this.hls.trigger(Se.ERROR,{type:Gn.KEY_SYSTEM_ERROR,details:wt.KEY_SYSTEM_NO_KEYS,fatal:!1,error:c,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${n?Jw.toString(tr.getBuffered(n)):"(detached)"})`),gi(e)){var r;if(e.type!==Fn.SUBTITLE){const l=e.elementaryStreams;if(!Object.keys(l).some(c=>!!l[c])){this.state=Wt.IDLE;return}}const i=(r=this.levels)==null?void 0:r[e.level];i!=null&&i.fragmentError&&(this.log(`Resetting level fragment error count of ${i.fragmentError} on frag buffered`),i.fragmentError=0)}this.state=Wt.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:r,partsLoaded:i}=e,l=!i||i.length===0||i.some(f=>!f),c=new Ip(n.level,n.sn,n.stats.chunkCount+1,0,r?r.index:-1,!l);t.flush(c)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,n=null,r){var i;this.fragCurrent=e;const l=t.details;if(!this.levels||!l)throw new Error(`frag load aborted, missing level${l?"":" detail"}s`);let c=null;if(e.encrypted&&!((i=e.decryptdata)!=null&&i.key)){if(this.log(`Loading key for ${e.sn} of [${l.startSN}-${l.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=Wt.KEY_LOADING,this.fragCurrent=e,c=this.keyLoader.load(e).then(y=>{if(!this.fragContextChanged(y.frag))return this.hls.trigger(Se.KEY_LOADED,y),this.state===Wt.KEY_LOADING&&(this.state=Wt.IDLE),y}),this.hls.trigger(Se.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(c=this.keyLoader.loadClear(e,l.encryptedFragments,this.startFragRequested),c&&this.log("[eme] blocking frag load until media-keys acquired"));const f=this.fragPrevious;if(gi(e)&&(!f||e.sn!==f.sn)){const y=this.shouldLoadParts(t.details,e.end);y!==this.loadingParts&&(this.log(`LL-Part loading ${y?"ON":"OFF"} loading sn ${f==null?void 0:f.sn}->${e.sn}`),this.loadingParts=y)}if(n=Math.max(e.start,n||0),this.loadingParts&&gi(e)){const y=l.partList;if(y&&r){n>l.fragmentEnd&&l.fragmentHint&&(e=l.fragmentHint);const T=this.getNextPart(y,e,n);if(T>-1){const b=y[T];e=this.fragCurrent=b.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${b.index} (${T}/${y.length-1}) of ${this.fragInfo(e,!1,b)}) cc: ${e.cc} [${l.startSN}-${l.endSN}], target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=b.start+b.duration,this.state=Wt.FRAG_LOADING;let w;return c?w=c.then(R=>!R||this.fragContextChanged(R.frag)?null:this.doFragPartsLoad(e,b,t,r)).catch(R=>this.handleFragLoadError(R)):w=this.doFragPartsLoad(e,b,t,r).catch(R=>this.handleFragLoadError(R)),this.hls.trigger(Se.FRAG_LOADING,{frag:e,part:b,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):w}else if(!e.url||this.loadedEndOfParts(y,n))return Promise.resolve(null)}}if(gi(e)&&this.loadingParts){var h;this.log(`LL-Part loading OFF after next part miss @${n.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(h=l.partList)==null?void 0:h.filter(y=>y.loaded).map(y=>`[${y.start}-${y.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+l.startSN+"-"+l.endSN+"]"}, target: ${parseFloat(n.toFixed(3))}`),Dn(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Wt.FRAG_LOADING;const g=this.config.progressive;let p;return g&&c?p=c.then(y=>!y||this.fragContextChanged(y.frag)?null:this.fragmentLoader.load(e,r)).catch(y=>this.handleFragLoadError(y)):p=Promise.all([this.fragmentLoader.load(e,g?r:void 0),c]).then(([y])=>(!g&&r&&r(y),y)).catch(y=>this.handleFragLoadError(y)),this.hls.trigger(Se.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):p}doFragPartsLoad(e,t,n,r){return new Promise((i,l)=>{var c;const f=[],h=(c=n.details)==null?void 0:c.partList,g=p=>{this.fragmentLoader.loadPart(e,p,r).then(y=>{f[p.index]=y;const T=y.part;this.hls.trigger(Se.FRAG_LOADED,y);const b=v0(n.details,e.sn,p.index+1)||hE(h,e.sn,p.index+1);if(b)g(b);else return i({frag:e,part:T,partsLoaded:f})}).catch(l)};g(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;t.frag&&t.details===wt.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):t.frag&&t.type===Gn.KEY_SYSTEM_ERROR?(t.frag.abortRequests(),this.resetFragmentLoading(t.frag)):this.hls.trigger(Se.ERROR,t)}else this.hls.trigger(Se.ERROR,{type:Gn.OTHER_ERROR,details:wt.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==Wt.PARSING){!this.fragCurrent&&this.state!==Wt.STOPPED&&this.state!==Wt.ERROR&&(this.state=Wt.IDLE);return}const{frag:n,part:r,level:i}=t,l=self.performance.now();n.stats.parsing.end=l,r&&(r.stats.parsing.end=l);const c=this.getLevelDetails(),h=c&&n.sn>c.endSN||this.shouldLoadParts(c,n.end);h!==this.loadingParts&&(this.log(`LL-Part loading ${h?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=h),this.updateLevelTiming(n,r,i,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var n;const i=e.partList[0];if(i.fragment.type===Fn.SUBTITLE)return!1;const l=i.end+(((n=e.fragmentHint)==null?void 0:n.duration)||0);if(t>=l){var r;if((this.hls.hasEnoughToStart?((r=this.media)==null?void 0:r.currentTime)||this.lastCurrentTime:this.getLoadPosition())>i.start-i.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:r,sn:i,part:l}=e;if(!(t!=null&&t[r]))return this.warn(`Levels object was unset while buffering fragment ${i} of ${this.playlistLabel()} ${r}. The current chunk will not be buffered.`),null;const c=t[r],f=c.details,h=l>-1?v0(f,i,l):null,g=h?h.fragment:fE(f,i,n);return g?(n&&n!==g&&(g.stats=n.stats),{frag:g,part:h,level:c}):null}bufferFragmentData(e,t,n,r,i){if(this.state!==Wt.PARSING)return;const{data1:l,data2:c}=e;let f=l;if(c&&(f=$a(l,c)),!f.length)return;const h=this.initPTS[t.cc],g=h?-h.baseTime/h.timescale:void 0,p={type:e.type,frag:t,part:n,chunkMeta:r,offset:g,parent:t.type,data:f};if(this.hls.trigger(Se.BUFFER_APPENDING,p),e.dropped&&e.independent&&!n){if(i)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!tr.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const n=t.currentTime,r=tr.bufferInfo(t,n,0),i=e.duration,l=Math.min(this.config.maxFragLookUpTolerance*2,i*.25),c=Math.max(Math.min(e.start-l,r.end-l),n+l);e.start-c>l&&this.flushMainBuffer(c,e.start)}getFwdBufferInfo(e,t){var n;const r=this.getLoadPosition();if(!Dn(r))return null;const l=this.lastCurrentTime>r||(n=this.media)!=null&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,r,t,l)}getFwdBufferInfoAtPos(e,t,n,r){const i=tr.bufferInfo(e,t,r);if(i.len===0&&i.nextStart!==void 0){const l=this.fragmentTracker.getBufferedFrag(t,n);if(l&&(i.nextStart<=l.end||l.gap)){const c=Math.max(Math.min(i.nextStart,l.end)-t,r);return tr.bufferInfo(e,t,c)}}return i}getMaxBufferLength(e){const{config:t}=this;let n;return e?n=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):n=t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,r=Math.max(Math.min(e-t,n.maxBufferLength),t),i=Math.max(e-t*3,n.maxMaxBufferLength/2,r);return i>=r?(n.maxMaxBufferLength=i,this.warn(`Reduce max buffer length to ${i}s`),!0):!1}getAppendedFrag(e,t=Fn.MAIN){const n=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return n&&"fragment"in n?n.fragment:n}getNextFragment(e,t){const n=t.fragments,r=n.length;if(!r)return null;const{config:i}=this,l=n[0].start,c=i.lowLatencyMode&&!!t.partList;let f=null;if(t.live){const p=i.initialLiveManifestSize;if(r<p)return this.warn(`Not enough fragments to start playback (have: ${r}, need: ${p})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<l){var h;c&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),f=this.getInitialLiveFragment(t);const y=this.hls.startPosition,T=this.hls.liveSyncPosition,b=f?(y!==-1&&y>=l?y:T)||f.start:e;this.log(`Setting startPosition to ${b} to match start frag at live edge. mainStart: ${y} liveSyncPosition: ${T} frag.start: ${(h=f)==null?void 0:h.start}`),this.startPosition=this.nextLoadPosition=b}}else e<=l&&(f=n[0]);if(!f){const p=this.loadingParts?t.partEnd:t.fragmentEnd;f=this.getFragmentAtPosition(e,p,t)}let g=this.filterReplacedPrimary(f,t);if(!g&&f){const p=f.sn-t.startSN;g=this.filterReplacedPrimary(n[p+1]||null,t)}return this.mapToInitFragWhenRequired(g)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===bi.OK||n===bi.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,r,i){let l=null;if(e.gap&&(l=this.getNextFragment(this.nextLoadPosition,t),l&&!l.gap&&n.nextStart)){const c=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,r,0);if(c!==null&&n.len+c.len>=i){const f=l.sn;return this.loopSn!==f&&(this.log(`buffer full after gaps in "${r}" playlist starting at sn: ${f}`),this.loopSn=f),null}}return this.loopSn=void 0,l}get primaryPrefetch(){if(T0(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(T0(this.config)&&e.type!==Fn.SUBTITLE){const n=this.hls.interstitialsManager,r=n==null?void 0:n.bufferingItem;if(r){const l=r.event;if(l){if(l.appendInPlace||Math.abs(e.start-r.start)>1||r.start===0)return null}else if(e.end<=r.start&&(t==null?void 0:t.live)===!1||e.start>r.end&&r.nextEvent&&(r.nextEvent.appendInPlace||e.start-r.end>1))return null}const i=n==null?void 0:n.playerQueue;if(i)for(let l=i.length;l--;){const c=i[l].interstitial;if(c.appendInPlace&&e.start>=c.startTime&&e.end<=c.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,n){let r=-1,i=!1,l=!0;for(let c=0,f=e.length;c<f;c++){const h=e[c];if(l=l&&!h.independent,r>-1&&n<h.start)break;const g=h.loaded;g?r=-1:(i||(h.independent||l)&&h.fragment===t)&&(h.fragment!==t&&this.warn(`Need buffer at ${n} but next unloaded part starts at ${h.start}`),r=c),i=g}return r}loadedEndOfParts(e,t){let n;for(let r=e.length;r--;){if(n=e[r],!n.loaded)return!1;if(t>n.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,n=this.fragPrevious;let r=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),r=hw(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){const i=n.sn+1;if(i>=e.startSN&&i<=e.endSN){const l=t[i-e.startSN];n.cc===l.cc&&(r=l,this.log(`Live playlist, switching playlist, load frag with next SN: ${r.sn}`))}r||(r=nE(e,n.cc,n.end),r&&this.log(`Live playlist, switching playlist, load frag with same CC: ${r.sn}`))}}else{const i=this.hls.liveSyncPosition;i!==null&&(r=this.getFragmentAtPosition(i,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r}getFragmentAtPosition(e,t,n){const{config:r}=this;let{fragPrevious:i}=this,{fragments:l,endSN:c}=n;const{fragmentHint:f}=n,{maxFragLookUpTolerance:h}=r,g=n.partList,p=!!(this.loadingParts&&g!=null&&g.length&&f);p&&!this.bitrateTest&&g[g.length-1].fragment.sn===f.sn&&(l=l.concat(f),c=f.sn);let y;if(e<t){var T;const w=e<this.lastCurrentTime||e>t-h||(T=this.media)!=null&&T.paused||!this.startFragRequested?0:h;y=zl(i,l,e,w)}else y=l[l.length-1];if(y){const b=y.sn-n.startSN,w=this.fragmentTracker.getState(y);if((w===bi.OK||w===bi.PARTIAL&&y.gap)&&(i=y),i&&y.sn===i.sn&&(!p||g[0].fragment.sn>y.sn||!n.live)&&y.level===i.level){const M=l[b+1];y.sn<c&&this.fragmentTracker.getState(M)!==bi.OK?y=M:y=null}}return y}alignPlaylists(e,t,n){const r=e.fragments.length;if(!r)return this.warn("No fragments in live playlist"),0;const i=e.fragmentStart,l=!t,c=e.alignedSliding&&Dn(i);if(l||!c&&!i){Zw(n,e);const f=e.fragmentStart;return this.log(`Live playlist sliding: ${f.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${r}`),f}return i}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let n=this.startPosition;n<t&&(n=-1);const r=this.timelineOffset;if(n===-1){const i=this.startTimeOffset!==null,l=i?this.startTimeOffset:e.startTimeOffset;l!==null&&Dn(l)?(n=t+l,l<0&&(n+=e.edge),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Setting startPosition to ${n} for start time offset ${l} found in ${i?"multivariant":"media"} playlist`),this.startPosition=n):e.live?(n=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${n}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+r}this.nextLoadPosition=n+r}getLoadPosition(){var e;const{media:t}=this;let n=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?n=t.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&gi(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==Wt.FRAG_LOADING_WAITING_RETRY)&&(this.state=Wt.IDLE)}onFragmentOrKeyLoadError(e,t){var n;if(t.chunkMeta&&!t.frag){const M=this.getCurrentContext(t.chunkMeta);M&&(t.frag=M.frag)}const r=t.frag;if(!r||r.type!==e||!this.levels)return;if(this.fragContextChanged(r)){var i;this.warn(`Frag load error must match current frag to retry ${r.url} > ${(i=this.fragCurrent)==null?void 0:i.url}`);return}const l=t.details===wt.FRAG_GAP;l&&this.fragmentTracker.fragBuffered(r,!0);const c=t.errorAction;if(!c){this.state=Wt.ERROR;return}const{action:f,flags:h,retryCount:g=0,retryConfig:p}=c,y=!!p,T=y&&f===Li.RetryRequest,b=y&&!c.resolved&&h===Ta.MoveAllAlternatesMatchingHost,w=(n=this.hls.latestLevelDetails)==null?void 0:n.live;if(!T&&b&&gi(r)&&!r.endList&&w)this.resetFragmentErrors(e),this.treatAsGap(r),c.resolved=!0;else if((T||b)&&g<p.maxNumRetry){var R;const M=Ym((R=t.response)==null?void 0:R.code),Y=xp(p,g);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+Y,this.state=Wt.FRAG_LOADING_WAITING_RETRY,c.resolved=!0,M){this.log("Waiting for connection (offline)"),this.retryDate=1/0,t.reason="offline";return}this.warn(`Fragment ${r.sn} of ${e} ${r.level} errored with ${t.details}, retrying loading ${g+1}/${p.maxNumRetry} in ${Y}ms`)}else if(p)if(this.resetFragmentErrors(e),g<p.maxNumRetry)!l&&f!==Li.RemoveAlternatePermanently&&(c.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${g})`);return}else f===Li.SendAlternateToPenaltyBox?this.state=Wt.WAITING_LEVEL:this.state=Wt.ERROR;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),t=this.retryDate,n=t===1/0;(!t||e>=t||n&&!Ym(0))&&(n&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=Wt.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===Wt.PARSING||this.state===Wt.PARSED){const t=e.frag,n=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,n),i=r&&r.len>.5;i&&this.reduceMaxBufferLength(r.len,(t==null?void 0:t.duration)||10);const l=!i;return l&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${n} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),l}return!1}resetFragmentErrors(e){e===Fn.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==Wt.STOPPED&&(this.state=Wt.IDLE)}afterBufferFlushed(e,t,n){if(!e)return;const r=tr.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,r,n),this.state===Wt.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==Wt.STOPPED&&(this.state=Wt.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,r){const i=n.details;if(!i){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((f,h)=>{const g=e.elementaryStreams[h];if(g){const p=g.endPTS-g.startPTS;if(p<=0)return this.warn(`Could not parse fragment ${e.sn} ${h} duration reliably (${p})`),f||!1;const y=r?0:uE(i,e,g.startPTS,g.endPTS,g.startDTS,g.endDTS,this);return this.hls.trigger(Se.LEVEL_PTS_UPDATED,{details:i,level:n,drift:y,type:h,frag:e,start:g.startPTS,end:g.endPTS}),!0}return f},!1)){var c;if(n.fragmentError===0&&this.treatAsGap(e,n),((c=this.transmuxer)==null?void 0:c.error)===null){const f=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(f.message),this.hls.trigger(Se.ERROR,{type:Gn.MEDIA_ERROR,details:wt.FRAG_PARSING_ERROR,fatal:!1,error:f,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=Wt.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(Se.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===Fn.MAIN?"level":"track"}fragInfo(e,t=!0,n){var r,i;return`${this.playlistLabel()} ${e.level} (${n?"part":"frag"}:[${((r=t&&!n?e.startPTS:(n||e).start)!=null?r:NaN).toFixed(3)}-${((i=t&&!n?e.endPTS:(n||e).end)!=null?i:NaN).toFixed(3)}]${n&&e.type==="main"?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function T0(o){return!!o.interstitialsController&&o.enableInterstitialPlayback!==!1}class yE{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;if(e.length)e.length===1?n=e[0]:n=eI(e,t);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function eI(o,e){const t=new Uint8Array(e);let n=0;for(let r=0;r<o.length;r++){const i=o[r];t.set(i,n),n+=i.length}return t}var cm={exports:{}},S0;function tI(){return S0||(S0=1,function(o){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function r(f,h,g){this.fn=f,this.context=h,this.once=g||!1}function i(f,h,g,p,y){if(typeof g!="function")throw new TypeError("The listener must be a function");var T=new r(g,p||f,y),b=t?t+h:h;return f._events[b]?f._events[b].fn?f._events[b]=[f._events[b],T]:f._events[b].push(T):(f._events[b]=T,f._eventsCount++),f}function l(f,h){--f._eventsCount===0?f._events=new n:delete f._events[h]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],g,p;if(this._eventsCount===0)return h;for(p in g=this._events)e.call(g,p)&&h.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(g)):h},c.prototype.listeners=function(h){var g=t?t+h:h,p=this._events[g];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,T=p.length,b=new Array(T);y<T;y++)b[y]=p[y].fn;return b},c.prototype.listenerCount=function(h){var g=t?t+h:h,p=this._events[g];return p?p.fn?1:p.length:0},c.prototype.emit=function(h,g,p,y,T,b){var w=t?t+h:h;if(!this._events[w])return!1;var R=this._events[w],M=arguments.length,Y,Z;if(R.fn){switch(R.once&&this.removeListener(h,R.fn,void 0,!0),M){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,g),!0;case 3:return R.fn.call(R.context,g,p),!0;case 4:return R.fn.call(R.context,g,p,y),!0;case 5:return R.fn.call(R.context,g,p,y,T),!0;case 6:return R.fn.call(R.context,g,p,y,T,b),!0}for(Z=1,Y=new Array(M-1);Z<M;Z++)Y[Z-1]=arguments[Z];R.fn.apply(R.context,Y)}else{var ye=R.length,Re;for(Z=0;Z<ye;Z++)switch(R[Z].once&&this.removeListener(h,R[Z].fn,void 0,!0),M){case 1:R[Z].fn.call(R[Z].context);break;case 2:R[Z].fn.call(R[Z].context,g);break;case 3:R[Z].fn.call(R[Z].context,g,p);break;case 4:R[Z].fn.call(R[Z].context,g,p,y);break;default:if(!Y)for(Re=1,Y=new Array(M-1);Re<M;Re++)Y[Re-1]=arguments[Re];R[Z].fn.apply(R[Z].context,Y)}}return!0},c.prototype.on=function(h,g,p){return i(this,h,g,p,!1)},c.prototype.once=function(h,g,p){return i(this,h,g,p,!0)},c.prototype.removeListener=function(h,g,p,y){var T=t?t+h:h;if(!this._events[T])return this;if(!g)return l(this,T),this;var b=this._events[T];if(b.fn)b.fn===g&&(!y||b.once)&&(!p||b.context===p)&&l(this,T);else{for(var w=0,R=[],M=b.length;w<M;w++)(b[w].fn!==g||y&&!b[w].once||p&&b[w].context!==p)&&R.push(b[w]);R.length?this._events[T]=R.length===1?R[0]:R:l(this,T)}return this},c.prototype.removeAllListeners=function(h){var g;return h?(g=t?t+h:h,this._events[g]&&l(this,g)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,o.exports=c}(cm)),cm.exports}var nI=tI(),Cp=kx(nI);const Bd="1.6.11",lc={};function rI(){return typeof __HLS_WORKER_BUNDLE__=="function"}function iI(){const o=lc[Bd];if(o)return o.clientCount++,o;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),r={worker:new self.Worker(t),objectURL:t,clientCount:1};return lc[Bd]=r,r}function aI(o){const e=lc[o];if(e)return e.clientCount++,e;const t=new self.URL(o,self.location.href).href,r={worker:new self.Worker(t),scriptURL:t,clientCount:1};return lc[o]=r,r}function sI(o){const e=lc[o||Bd];if(e&&e.clientCount--===1){const{worker:n,objectURL:r}=e;delete lc[o||Bd],r&&self.URL.revokeObjectURL(r),n.terminate()}}function vE(o,e){return e+10<=o.length&&o[e]===51&&o[e+1]===68&&o[e+2]===73&&o[e+3]<255&&o[e+4]<255&&o[e+6]<128&&o[e+7]<128&&o[e+8]<128&&o[e+9]<128}function Np(o,e){return e+10<=o.length&&o[e]===73&&o[e+1]===68&&o[e+2]===51&&o[e+3]<255&&o[e+4]<255&&o[e+6]<128&&o[e+7]<128&&o[e+8]<128&&o[e+9]<128}function og(o,e){let t=0;return t=(o[e]&127)<<21,t|=(o[e+1]&127)<<14,t|=(o[e+2]&127)<<7,t|=o[e+3]&127,t}function jd(o,e){const t=e;let n=0;for(;Np(o,e);){n+=10;const r=og(o,e+6);n+=r,vE(o,e+10)&&(n+=10),e+=n}if(n>0)return o.subarray(t,t+n)}function oI(o,e,t,n){const r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=e[t+2],l=i>>2&15;if(l>12){const T=new Error(`invalid ADTS sampling index:${l}`);o.emit(Se.ERROR,Se.ERROR,{type:Gn.MEDIA_ERROR,details:wt.FRAG_PARSING_ERROR,fatal:!0,error:T,reason:T.message});return}const c=(i>>6&3)+1,f=e[t+3]>>6&3|(i&1)<<2,h="mp4a.40."+c,g=r[l];let p=l;(c===5||c===29)&&(p-=3);const y=[c<<3|(p&14)>>1,(p&1)<<7|f<<3];return Dr.log(`manifest codec:${n}, parsed codec:${h}, channels:${f}, rate:${g} (ADTS object type:${c} sampling index:${l})`),{config:y,samplerate:g,channelCount:f,codec:h,parsedCodec:h,manifestCodec:n}}function EE(o,e){return o[e]===255&&(o[e+1]&246)===240}function bE(o,e){return o[e+1]&1?7:9}function Dp(o,e){return(o[e+3]&3)<<11|o[e+4]<<3|(o[e+5]&224)>>>5}function lI(o,e){return e+5<o.length}function Jh(o,e){return e+1<o.length&&EE(o,e)}function uI(o,e){return lI(o,e)&&EE(o,e)&&Dp(o,e)<=o.length-e}function cI(o,e){if(Jh(o,e)){const t=bE(o,e);if(e+t>=o.length)return!1;const n=Dp(o,e);if(n<=t)return!1;const r=e+n;return r===o.length||Jh(o,r)}return!1}function TE(o,e,t,n,r){if(!o.samplerate){const i=oI(e,t,n,r);if(!i)return;Or(o,i)}}function SE(o){return 1024*9e4/o}function dI(o,e){const t=bE(o,e);if(e+t<=o.length){const n=Dp(o,e)-t;if(n>0)return{headerLength:t,frameLength:n}}}function _E(o,e,t,n,r){const i=SE(o.samplerate),l=n+r*i,c=dI(e,t);let f;if(c){const{frameLength:p,headerLength:y}=c,T=y+p,b=Math.max(0,t+T-e.length);b?(f=new Uint8Array(T-y),f.set(e.subarray(t+y,e.length),0)):f=e.subarray(t+y,t+T);const w={unit:f,pts:l};return b||o.samples.push(w),{sample:w,length:T,missing:b}}const h=e.length-t;return f=new Uint8Array(h),f.set(e.subarray(t,e.length),0),{sample:{unit:f,pts:l},length:h,missing:-1}}function fI(o,e){return Np(o,e)&&og(o,e+6)+10<=o.length-e}function hI(o){return o instanceof ArrayBuffer?o:o.byteOffset==0&&o.byteLength==o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer}function dm(o,e=0,t=1/0){return gI(o,e,t,Uint8Array)}function gI(o,e,t,n){const r=mI(o);let i=1;"BYTES_PER_ELEMENT"in n&&(i=n.BYTES_PER_ELEMENT);const l=pI(o)?o.byteOffset:0,c=(l+o.byteLength)/i,f=(l+e)/i,h=Math.floor(Math.max(0,Math.min(f,c))),g=Math.floor(Math.min(h+Math.max(t,0),c));return new n(r,h,g-h)}function mI(o){return o instanceof ArrayBuffer?o:o.buffer}function pI(o){return o&&o.buffer instanceof ArrayBuffer&&o.byteLength!==void 0&&o.byteOffset!==void 0}function yI(o){const e={key:o.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(o.size<2)return;if(o.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}const n=o.data.subarray(1).indexOf(0);if(n===-1)return;const r=xa(dm(o.data,1,n)),i=o.data[2+n],l=o.data.subarray(3+n).indexOf(0);if(l===-1)return;const c=xa(dm(o.data,3+n,l));let f;return r==="-->"?f=xa(dm(o.data,4+n+l)):f=hI(o.data.subarray(4+n+l)),e.mimeType=r,e.pictureType=i,e.description=c,e.data=f,e}function vI(o){if(o.size<2)return;const e=xa(o.data,!0),t=new Uint8Array(o.data.subarray(e.length+1));return{key:o.type,info:e,data:t.buffer}}function EI(o){if(o.size<2)return;if(o.type==="TXXX"){let t=1;const n=xa(o.data.subarray(t),!0);t+=n.length+1;const r=xa(o.data.subarray(t));return{key:o.type,info:n,data:r}}const e=xa(o.data.subarray(1));return{key:o.type,info:"",data:e}}function bI(o){if(o.type==="WXXX"){if(o.size<2)return;let t=1;const n=xa(o.data.subarray(t),!0);t+=n.length+1;const r=xa(o.data.subarray(t));return{key:o.type,info:n,data:r}}const e=xa(o.data);return{key:o.type,info:"",data:e}}function TI(o){return o.type==="PRIV"?vI(o):o.type[0]==="W"?bI(o):o.type==="APIC"?yI(o):EI(o)}function SI(o){const e=String.fromCharCode(o[0],o[1],o[2],o[3]),t=og(o,4),n=10;return{type:e,size:t,data:o.subarray(n,n+t)}}const Eh=10,_I=10;function xE(o){let e=0;const t=[];for(;Np(o,e);){const n=og(o,e+6);o[e+5]>>6&1&&(e+=Eh),e+=Eh;const r=e+n;for(;e+_I<r;){const i=SI(o.subarray(e)),l=TI(i);l&&t.push(l),e+=i.size+Eh}vE(o,e)&&(e+=Eh)}return t}function wE(o){return o&&o.key==="PRIV"&&o.info==="com.apple.streaming.transportStreamTimestamp"}function xI(o){if(o.data.byteLength===8){const e=new Uint8Array(o.data),t=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,t&&(n+=4772185884e-2),Math.round(n)}}function Lp(o){const e=xE(o);for(let t=0;t<e.length;t++){const n=e[t];if(wE(n))return xI(n)}}let _a=function(o){return o.audioId3="org.id3",o.dateRange="com.apple.quicktime.HLS",o.emsg="https://aomedia.org/emsg/ID3",o.misbklv="urn:misb:KLV:bin:1910.1",o}({});function As(o="",e=9e4){return{type:o,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Pp{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=$a(this.cachedData,e),this.cachedData=null);let n=jd(e,0),r=n?n.length:0,i;const l=this._audioTrack,c=this._id3Track,f=n?Lp(n):void 0,h=e.length;for((this.basePTS===null||this.frameIndex===0&&Dn(f))&&(this.basePTS=wI(f,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&c.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:_a.audioId3,duration:Number.POSITIVE_INFINITY});r<h;){if(this.canParse(e,r)){const g=this.appendFrame(l,e,r);g?(this.frameIndex++,this.lastPTS=g.sample.pts,r+=g.length,i=r):r=h}else fI(e,r)?(n=jd(e,r),c.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:_a.audioId3,duration:Number.POSITIVE_INFINITY}),r+=n.length,i=r):r++;if(r===h&&i!==h){const g=e.slice(i);this.cachedData?this.cachedData=$a(this.cachedData,g):this.cachedData=g}}return{audioTrack:l,videoTrack:As(),id3Track:c,textTrack:As()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:As(),id3Track:this._id3Track,textTrack:As()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const wI=(o,e,t)=>{if(Dn(o))return o*90;const n=t?t.baseTime*9e4/t.timescale:0;return e*9e4+n};let bh=null;const II=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],AI=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],kI=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],RI=[0,1,1,4];function IE(o,e,t,n,r){if(t+24>e.length)return;const i=AE(e,t);if(i&&t+i.frameLength<=e.length){const l=i.samplesPerFrame*9e4/i.sampleRate,c=n+r*l,f={unit:e.subarray(t,t+i.frameLength),pts:c,dts:c};return o.config=[],o.channelCount=i.channelCount,o.samplerate=i.sampleRate,o.samples.push(f),{sample:f,length:i.frameLength,missing:0}}}function AE(o,e){const t=o[e+1]>>3&3,n=o[e+1]>>1&3,r=o[e+2]>>4&15,i=o[e+2]>>2&3;if(t!==1&&r!==0&&r!==15&&i!==3){const l=o[e+2]>>1&1,c=o[e+3]>>6,f=t===3?3-n:n===3?3:4,h=II[f*14+r-1]*1e3,p=AI[(t===3?0:t===2?1:2)*3+i],y=c===3?1:2,T=kI[t][n],b=RI[n],w=T*8*b,R=Math.floor(T*h/p+l)*b;if(bh===null){const Z=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);bh=Z?parseInt(Z[1]):0}return!!bh&&bh<=87&&n===2&&h>=224e3&&c===0&&(o[e+3]=o[e+3]|128),{sampleRate:p,channelCount:y,frameLength:R,samplesPerFrame:w}}}function Mp(o,e){return o[e]===255&&(o[e+1]&224)===224&&(o[e+1]&6)!==0}function kE(o,e){return e+1<o.length&&Mp(o,e)}function CI(o,e){return Mp(o,e)&&4<=o.length-e}function RE(o,e){if(e+1<o.length&&Mp(o,e)){const n=AE(o,e);let r=4;n!=null&&n.frameLength&&(r=n.frameLength);const i=e+r;return i===o.length||kE(o,i)}return!1}class NI extends Pp{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const n=jd(e,0);let r=(n==null?void 0:n.length)||0;if(RE(e,r))return!1;for(let i=e.length;r<i;r++)if(cI(e,r))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return uI(e,t)}appendFrame(e,t,n){TE(e,this.observer,t,n,e.manifestCodec);const r=_E(e,t,n,this.basePTS,this.frameIndex);if(r&&r.missing===0)return r}}const CE=(o,e)=>{let t=0,n=5;e+=n;const r=new Uint32Array(1),i=new Uint32Array(1),l=new Uint8Array(1);for(;n>0;){l[0]=o[e];const c=Math.min(n,8),f=8-c;i[0]=4278190080>>>24+f<<f,r[0]=(l[0]&i[0])>>f,t=t?t<<c|r[0]:r[0],e+=1,n-=c}return t};class DI extends Pp{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const r=NE(e,t,n,this.basePTS,this.frameIndex);if(r!==-1)return{sample:e.samples[e.samples.length-1],length:r,missing:0}}static probe(e){if(!e)return!1;const t=jd(e,0);if(!t)return!1;const n=t.length;return e[n]===11&&e[n+1]===119&&Lp(t)!==void 0&&CE(e,n)<16}}function NE(o,e,t,n,r){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const i=e[t+4]>>6;if(i>=3)return-1;const c=[48e3,44100,32e3][i],f=e[t+4]&63,g=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][f*3+i]*2;if(t+g>e.length)return-1;const p=e[t+6]>>5;let y=0;p===2?y+=2:(p&1&&p!==1&&(y+=2),p&4&&(y+=2));const T=(e[t+6]<<8|e[t+7])>>12-y&1,w=[2,1,2,3,3,4,4,5][p]+T,R=e[t+5]>>3,M=e[t+5]&7,Y=new Uint8Array([i<<6|R<<1|M>>2,(M&3)<<6|p<<3|T<<2|f>>4,f<<4&224]),Z=1536/c*9e4,ye=n+r*Z,Re=e.subarray(t,t+g);return o.config=Y,o.channelCount=w,o.samplerate=c,o.samples.push({unit:Re,pts:ye}),g}class LI extends Pp{resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=jd(e,0);let n=(t==null?void 0:t.length)||0;if(t&&e[n]===11&&e[n+1]===119&&Lp(t)!==void 0&&CE(e,n)<=16)return!1;for(let r=e.length;n<r;n++)if(RE(e,n))return Dr.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return CI(e,t)}appendFrame(e,t,n){if(this.basePTS!==null)return IE(e,t,n,this.basePTS,this.frameIndex)}}const PI=/\/emsg[-/]ID3/i;class MI{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,r){const i=this.videoTrack=As("video",1),l=this.audioTrack=As("audio",1),c=this.txtTrack=As("text",1);if(this.id3Track=As("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const f=Vv(e);if(f.video){const{id:h,timescale:g,codec:p,supplemental:y}=f.video;i.id=h,i.timescale=c.timescale=g,i.codec=p,i.supplemental=y}if(f.audio){const{id:h,timescale:g,codec:p}=f.audio;l.id=h,l.timescale=g,l.codec=p}c.id=Gv.text,i.sampleDuration=0,i.duration=l.duration=r}resetContiguity(){this.remainderData=null}static probe(e){return Lx(e)}demux(e,t){this.timeOffset=t;let n=e;const r=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=$a(this.remainderData,e));const c=Ux(n);this.remainderData=c.remainder,r.samples=c.valid||new Uint8Array}else r.samples=n;const l=this.extractID3Track(r,t);return i.samples=jy(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:l,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const r=this.extractID3Track(t,this.timeOffset);return n.samples=jy(e,t),{videoTrack:t,audioTrack:As(),id3Track:r,textTrack:As()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const r=dr(e.samples,["emsg"]);r&&r.forEach(i=>{const l=jx(i);if(PI.test(l.schemeIdUri)){const c=_0(l,t);let f=l.eventDuration===4294967295?Number.POSITIVE_INFINITY:l.eventDuration/l.timeScale;f<=.001&&(f=Number.POSITIVE_INFINITY);const h=l.payload;n.samples.push({data:h,len:h.byteLength,dts:c,pts:c,type:_a.emsg,duration:f})}else if(this.config.enableEmsgKLVMetadata&&l.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const c=_0(l,t);n.samples.push({data:l.payload,len:l.payload.byteLength,dts:c,pts:c,type:_a.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function _0(o,e){return Dn(o.presentationTime)?o.presentationTime/o.timeScale:e+o.presentationTimeDelta/o.timeScale}class OI{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new wp(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,Yo.cbc)}decryptAacSample(e,t,n){const r=e[t].unit;if(r.length<=16)return;const i=r.subarray(16,r.length-r.length%16),l=i.buffer.slice(i.byteOffset,i.byteOffset+i.length);this.decryptBuffer(l).then(c=>{const f=new Uint8Array(c);r.set(f,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)}).catch(n)}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length){n();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(t);let r=0;for(let i=32;i<e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let r=0;for(let i=32;i<e.length-16;i+=160,r+=16)e.set(n.subarray(r,r+16),i);return e}decryptAvcSample(e,t,n,r,i){const l=Yv(i.data),c=this.getAvcEncryptedData(l);this.decryptBuffer(c.buffer).then(f=>{i.data=this.getAvcDecryptedUnit(l,f),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,r)}).catch(r)}decryptAvcSamples(e,t,n,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length){r();return}const i=e[t].units;for(;!(n>=i.length);n++){const l=i[n];if(!(l.data.length<=48||l.type!==1&&l.type!==5)&&(this.decryptAvcSample(e,t,n,r,l),!this.decrypter.isSync()))return}}}}class DE{constructor(){this.VideoSample=null}createVideoSample(e,t,n){return{key:e,frame:!1,pts:t,dts:n,units:[],length:0}}getLastNalUnit(e){var t;let n=this.VideoSample,r;if((!n||n.units.length===0)&&(n=e[e.length-1]),(t=n)!=null&&t.units){const i=n.units;r=i[i.length-1]}return r}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const n=t.samples,r=n.length;if(r){const i=n[r-1];e.pts=i.pts,e.dts=i.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,n){const r=t.byteLength;let i=e.naluState||0;const l=i,c=[];let f=0,h,g,p,y=-1,T=0;for(i===-1&&(y=0,T=this.getNALuType(t,0),i=0,f=1);f<r;){if(h=t[f++],!i){i=h?0:1;continue}if(i===1){i=h?0:2;continue}if(!h)i=3;else if(h===1){if(g=f-i-1,y>=0){const b={data:t.subarray(y,g),type:T};c.push(b)}else{const b=this.getLastNalUnit(e.samples);b&&(l&&f<=4-l&&b.state&&(b.data=b.data.subarray(0,b.data.byteLength-l)),g>0&&(b.data=$a(b.data,t.subarray(0,g)),b.state=0))}f<r?(p=this.getNALuType(t,f),y=f,T=p,i=0):i=-1}else i=0}if(y>=0&&i>=0){const b={data:t.subarray(y,r),type:T,state:i};c.push(b)}if(c.length===0){const b=this.getLastNalUnit(e.samples);b&&(b.data=$a(b.data,t))}return e.naluState=i,c}}class Nd{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(i===0)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=i*8,this.bytesAvailable-=i}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&Dr.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class FI extends DE{parsePES(e,t,n,r){const i=this.parseNALu(e,n.data,r);let l=this.VideoSample,c,f=!1;n.data=null,l&&i.length&&!e.audFound&&(this.pushAccessUnit(l,e),l=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),i.forEach(h=>{var g,p;switch(h.type){case 1:{let w=!1;c=!0;const R=h.data;if(f&&R.length>4){const M=this.readSliceType(R);(M===2||M===4||M===7||M===9)&&(w=!0)}if(w){var y;(y=l)!=null&&y.frame&&!l.key&&(this.pushAccessUnit(l,e),l=this.VideoSample=null)}l||(l=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),l.frame=!0,l.key=w;break}case 5:c=!0,(g=l)!=null&&g.frame&&!l.key&&(this.pushAccessUnit(l,e),l=this.VideoSample=null),l||(l=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),l.key=!0,l.frame=!0;break;case 6:{c=!0,Tp(h.data,1,n.pts,t.samples);break}case 7:{var T,b;c=!0,f=!0;const w=h.data,R=this.readSPS(w);if(!e.sps||e.width!==R.width||e.height!==R.height||((T=e.pixelRatio)==null?void 0:T[0])!==R.pixelRatio[0]||((b=e.pixelRatio)==null?void 0:b[1])!==R.pixelRatio[1]){e.width=R.width,e.height=R.height,e.pixelRatio=R.pixelRatio,e.sps=[w];const M=w.subarray(1,4);let Y="avc1.";for(let Z=0;Z<3;Z++){let ye=M[Z].toString(16);ye.length<2&&(ye="0"+ye),Y+=ye}e.codec=Y}break}case 8:c=!0,e.pps=[h.data];break;case 9:c=!0,e.audFound=!0,(p=l)!=null&&p.frame&&(this.pushAccessUnit(l,e),l=null),l||(l=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:c=!0;break;default:c=!1;break}l&&c&&l.units.push(h)}),r&&l&&(this.pushAccessUnit(l,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){const t=new Nd(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let n=8,r=8,i;for(let l=0;l<e;l++)r!==0&&(i=t.readEG(),r=(n+i+256)%256),n=r===0?n:r}readSPS(e){const t=new Nd(e);let n=0,r=0,i=0,l=0,c,f,h;const g=t.readUByte.bind(t),p=t.readBits.bind(t),y=t.readUEG.bind(t),T=t.readBoolean.bind(t),b=t.skipBits.bind(t),w=t.skipEG.bind(t),R=t.skipUEG.bind(t),M=this.skipScalingList.bind(this);g();const Y=g();if(p(5),b(3),g(),R(),Y===100||Y===110||Y===122||Y===244||Y===44||Y===83||Y===86||Y===118||Y===128){const j=y();if(j===3&&b(1),R(),R(),b(1),T())for(f=j!==3?8:12,h=0;h<f;h++)T()&&(h<6?M(16,t):M(64,t))}R();const Z=y();if(Z===0)y();else if(Z===1)for(b(1),w(),w(),c=y(),h=0;h<c;h++)w();R(),b(1);const ye=y(),Re=y(),F=p(1);F===0&&b(1),b(1),T()&&(n=y(),r=y(),i=y(),l=y());let k=[1,1];if(T()&&T())switch(g()){case 1:k=[1,1];break;case 2:k=[12,11];break;case 3:k=[10,11];break;case 4:k=[16,11];break;case 5:k=[40,33];break;case 6:k=[24,11];break;case 7:k=[20,11];break;case 8:k=[32,11];break;case 9:k=[80,33];break;case 10:k=[18,11];break;case 11:k=[15,11];break;case 12:k=[64,33];break;case 13:k=[160,99];break;case 14:k=[4,3];break;case 15:k=[3,2];break;case 16:k=[2,1];break;case 255:{k=[g()<<8|g(),g()<<8|g()];break}}return{width:Math.ceil((ye+1)*16-n*2-r*2),height:(2-F)*(Re+1)*16-(F?2:4)*(i+l),pixelRatio:k}}}class zI extends DE{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,n,r){const i=this.parseNALu(e,n.data,r);let l=this.VideoSample,c,f=!1;n.data=null,l&&i.length&&!e.audFound&&(this.pushAccessUnit(l,e),l=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),i.forEach(h=>{var g,p;switch(h.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:l||(l=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),l.frame=!0,c=!0;break;case 16:case 17:case 18:case 21:if(c=!0,f){var y;(y=l)!=null&&y.frame&&!l.key&&(this.pushAccessUnit(l,e),l=this.VideoSample=null)}l||(l=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),l.key=!0,l.frame=!0;break;case 19:case 20:c=!0,(g=l)!=null&&g.frame&&!l.key&&(this.pushAccessUnit(l,e),l=this.VideoSample=null),l||(l=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),l.key=!0,l.frame=!0;break;case 39:c=!0,Tp(h.data,2,n.pts,t.samples);break;case 32:c=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=Or(e.params,this.readVPS(h.data)),this.initVPS=h.data),e.vps=[h.data];break;case 33:if(c=!0,f=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],h.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const T=this.readSPS(h.data);e.width=T.width,e.height=T.height,e.pixelRatio=T.pixelRatio,e.codec=T.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const b in T.params)e.params[b]=T.params[b]}this.pushParameterSet(e.sps,h.data,e.vps),l||(l=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),l.key=!0;break;case 34:if(c=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const T=this.readPPS(h.data);for(const b in T)e.params[b]=T[b]}this.pushParameterSet(e.pps,h.data,e.vps)}break;case 35:c=!0,e.audFound=!0,(p=l)!=null&&p.frame&&(this.pushAccessUnit(l,e),l=null),l||(l=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:c=!1;break}l&&c&&l.units.push(h)}),r&&l&&(this.pushAccessUnit(l,e),this.VideoSample=null)}pushParameterSet(e,t,n){(n&&n[0]===this.initVPS||!n&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let n=0;for(let r=0;r<e.byteLength;r++)r>=2&&e[r]===3&&e[r-1]===0&&e[r-2]===0||(t[n]=e[r],n++);return new Uint8Array(t.buffer,0,n)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new Nd(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const n=t.readBits(3),r=t.readBoolean();return{numTemporalLayers:n+1,temporalIdNested:r}}readSPS(e){const t=new Nd(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const n=t.readBits(3);t.readBoolean();const r=t.readBits(2),i=t.readBoolean(),l=t.readBits(5),c=t.readUByte(),f=t.readUByte(),h=t.readUByte(),g=t.readUByte(),p=t.readUByte(),y=t.readUByte(),T=t.readUByte(),b=t.readUByte(),w=t.readUByte(),R=t.readUByte(),M=t.readUByte(),Y=[],Z=[];for(let qe=0;qe<n;qe++)Y.push(t.readBoolean()),Z.push(t.readBoolean());if(n>0)for(let qe=n;qe<8;qe++)t.readBits(2);for(let qe=0;qe<n;qe++)Y[qe]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),Z[qe]&&t.readUByte();t.readUEG();const ye=t.readUEG();ye==3&&t.skipBits(1);const Re=t.readUEG(),F=t.readUEG(),k=t.readBoolean();let j=0,oe=0,L=0,Ee=0;k&&(j+=t.readUEG(),oe+=t.readUEG(),L+=t.readUEG(),Ee+=t.readUEG());const Be=t.readUEG(),pe=t.readUEG(),ct=t.readUEG(),Ye=t.readBoolean();for(let qe=Ye?0:n;qe<=n;qe++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let Xe=0;Xe<4;Xe++)for(let He=0;He<(Xe===3?2:6);He++)if(!t.readBoolean())t.readUEG();else{const bt=Math.min(64,1<<4+(Xe<<1));Xe>1&&t.readEG();for(let ht=0;ht<bt;ht++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const Ge=t.readUEG();let tt=0;for(let qe=0;qe<Ge;qe++){let Xe=!1;if(qe!==0&&(Xe=t.readBoolean()),Xe){qe===Ge&&t.readUEG(),t.readBoolean(),t.readUEG();let He=0;for(let it=0;it<=tt;it++){const bt=t.readBoolean();let ht=!1;bt||(ht=t.readBoolean()),(bt||ht)&&He++}tt=He}else{const He=t.readUEG(),it=t.readUEG();tt=He+it;for(let bt=0;bt<He;bt++)t.readUEG(),t.readBoolean();for(let bt=0;bt<it;bt++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const qe=t.readUEG();for(let Xe=0;Xe<qe;Xe++){for(let He=0;He<ct+4;He++)t.readBits(1);t.readBits(1)}}let Me=0,$e=1,mt=1,Dt=!0,Pe=1,Fe=0;t.readBoolean(),t.readBoolean();let ut=!1;if(t.readBoolean()){if(t.readBoolean()){const Ct=t.readUByte(),pn=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Xt=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];Ct>0&&Ct<16?($e=pn[Ct-1],mt=Xt[Ct-1]):Ct===255&&($e=t.readBits(16),mt=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),ut=t.readBoolean(),ut&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG()),t.readBoolean()&&(Pe=t.readBits(32),Fe=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const Xt=t.readBoolean(),fn=t.readBoolean();let qt=!1;(Xt||fn)&&(qt=t.readBoolean(),qt&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),qt&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let Vn=0;Vn<=n;Vn++){Dt=t.readBoolean();const sr=Dt||t.readBoolean();let wr=!1;sr?t.readEG():wr=t.readBoolean();const Zr=wr?1:t.readUEG()+1;if(Xt)for(let Fr=0;Fr<Zr;Fr++)t.readUEG(),t.readUEG(),qt&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(fn)for(let Fr=0;Fr<Zr;Fr++)t.readUEG(),t.readUEG(),qt&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),Me=t.readUEG())}let Q=Re,P=F;if(k){let qe=1,Xe=1;ye===1?qe=Xe=2:ye==2&&(qe=2),Q=Re-qe*oe-qe*j,P=F-Xe*Ee-Xe*L}const H=r?["A","B","C"][r]:"",be=c<<24|f<<16|h<<8|g;let ue=0;for(let qe=0;qe<32;qe++)ue=(ue|(be>>qe&1)<<31-qe)>>>0;let Ue=ue.toString(16);return l===1&&Ue==="2"&&(Ue="6"),{codecString:`hvc1.${H}${l}.${Ue}.${i?"H":"L"}${M}.B0`,params:{general_tier_flag:i,general_profile_idc:l,general_profile_space:r,general_profile_compatibility_flags:[c,f,h,g],general_constraint_indicator_flags:[p,y,T,b,w,R],general_level_idc:M,bit_depth:Be+8,bit_depth_luma_minus8:Be,bit_depth_chroma_minus8:pe,min_spatial_segmentation_idc:Me,chroma_format_idc:ye,frame_rate:{fixed:Dt,fps:Fe/Pe}},width:Q,height:P,pixelRatio:[$e,mt]}}readPPS(e){const t=new Nd(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const r=t.readBoolean(),i=t.readBoolean();let l=1;return i&&r?l=0:i?l=3:r&&(l=2),{parallelismType:l}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const wi=188;class Ho{constructor(e,t,n,r){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.logger=r,this.videoParser=null}static probe(e,t){const n=Ho.syncOffset(e);return n>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const t=e.length;let n=Math.min(wi*5,t-wi)+1,r=0;for(;r<n;){let i=!1,l=-1,c=0;for(let f=r;f<t;f+=wi)if(e[f]===71&&(t-f===wi||e[f+wi]===71)){if(c++,l===-1&&(l=f,l!==0&&(n=Math.min(l+wi*99,e.length-wi)+1)),i||(i=Jm(e,f)===0),i&&c>1&&(l===0&&c>2||f+wi>n))return l}else{if(c)return-1;break}r++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:Gv[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,n,r){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Ho.createTrack("video"),this._videoTrack.duration=r,this._audioTrack=Ho.createTrack("audio",r),this._id3Track=Ho.createTrack("id3"),this._txtTrack=Ho.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,n=!1,r=!1){n||(this.sampleAes=null);let i;const l=this._videoTrack,c=this._audioTrack,f=this._id3Track,h=this._txtTrack;let g=l.pid,p=l.pesData,y=c.pid,T=f.pid,b=c.pesData,w=f.pesData,R=null,M=this.pmtParsed,Y=this._pmtId,Z=e.length;if(this.remainderData&&(e=$a(this.remainderData,e),Z=e.length,this.remainderData=null),Z<wi&&!r)return this.remainderData=e,{audioTrack:c,videoTrack:l,id3Track:f,textTrack:h};const ye=Math.max(0,Ho.syncOffset(e));Z-=(Z-ye)%wi,Z<e.byteLength&&!r&&(this.remainderData=new Uint8Array(e.buffer,Z,e.buffer.byteLength-Z));let Re=0;for(let k=ye;k<Z;k+=wi)if(e[k]===71){const j=!!(e[k+1]&64),oe=Jm(e,k),L=(e[k+3]&48)>>4;let Ee;if(L>1){if(Ee=k+5+e[k+4],Ee===k+wi)continue}else Ee=k+4;switch(oe){case g:j&&(p&&(i=Yu(p,this.logger))&&(this.readyVideoParser(l.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(l,h,i,!1)),p={data:[],size:0}),p&&(p.data.push(e.subarray(Ee,k+wi)),p.size+=k+wi-Ee);break;case y:if(j){if(b&&(i=Yu(b,this.logger)))switch(c.segmentCodec){case"aac":this.parseAACPES(c,i);break;case"mp3":this.parseMPEGPES(c,i);break;case"ac3":this.parseAC3PES(c,i);break}b={data:[],size:0}}b&&(b.data.push(e.subarray(Ee,k+wi)),b.size+=k+wi-Ee);break;case T:j&&(w&&(i=Yu(w,this.logger))&&this.parseID3PES(f,i),w={data:[],size:0}),w&&(w.data.push(e.subarray(Ee,k+wi)),w.size+=k+wi-Ee);break;case 0:j&&(Ee+=e[Ee]+1),Y=this._pmtId=UI(e,Ee);break;case Y:{j&&(Ee+=e[Ee]+1);const Be=BI(e,Ee,this.typeSupported,n,this.observer,this.logger);g=Be.videoPid,g>0&&(l.pid=g,l.segmentCodec=Be.segmentVideoCodec),y=Be.audioPid,y>0&&(c.pid=y,c.segmentCodec=Be.segmentAudioCodec),T=Be.id3Pid,T>0&&(f.pid=T),R!==null&&!M&&(this.logger.warn(`MPEG-TS PMT found at ${k} after unknown PID '${R}'. Backtracking to sync byte @${ye} to parse all TS packets.`),R=null,k=ye-188),M=this.pmtParsed=!0;break}case 17:case 8191:break;default:R=oe;break}}else Re++;Re>0&&ep(this.observer,new Error(`Found ${Re} TS packet/s that do not start with 0x47`),void 0,this.logger),l.pesData=p,c.pesData=b,f.pesData=w;const F={audioTrack:c,videoTrack:l,id3Track:f,textTrack:h};return r&&this.extractRemainingSamples(F),F}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:r,textTrack:i}=e,l=n.pesData,c=t.pesData,f=r.pesData;let h;if(l&&(h=Yu(l,this.logger))?(this.readyVideoParser(n.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(n,i,h,!0),n.pesData=null)):n.pesData=l,c&&(h=Yu(c,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,h);break;case"mp3":this.parseMPEGPES(t,h);break;case"ac3":this.parseAC3PES(t,h);break}t.pesData=null}else c!=null&&c.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=c;f&&(h=Yu(f,this.logger))?(this.parseID3PES(r,h),r.pesData=null):r.pesData=f}demuxSampleAes(e,t,n){const r=this.demux(e,n,!0,!this.config.progressive),i=this.sampleAes=new OI(this.observer,this.config,t);return this.decrypt(r,i)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new FI:e==="hevc"&&(this.videoParser=new zI))}decrypt(e,t){return new Promise(n=>{const{audioTrack:r,videoTrack:i}=e;r.samples&&r.segmentCodec==="aac"?t.decryptAacSamples(r.samples,0,()=>{i.samples?t.decryptAvcSamples(i.samples,0,0,()=>{n(e)}):n(e)}):i.samples&&t.decryptAvcSamples(i.samples,0,0,()=>{n(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let n=0;const r=this.aacOverFlow;let i=t.data;if(r){this.aacOverFlow=null;const p=r.missing,y=r.sample.unit.byteLength;if(p===-1)i=$a(r.sample.unit,i);else{const T=y-p;r.sample.unit.set(i.subarray(0,p),T),e.samples.push(r.sample),n=r.missing}}let l,c;for(l=n,c=i.length;l<c-1&&!Jh(i,l);l++);if(l!==n){let p;const y=l<c-1;if(y?p=`AAC PES did not start with ADTS header,offset:${l}`:p="No ADTS header found in AAC PES",ep(this.observer,new Error(p),y,this.logger),!y)return}TE(e,this.observer,i,l,this.audioCodec);let f;if(t.pts!==void 0)f=t.pts;else if(r){const p=SE(e.samplerate);f=r.sample.pts+p}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let h=0,g;for(;l<c;)if(g=_E(e,i,l,f,h),l+=g.length,g.missing){this.aacOverFlow=g;break}else for(h++;l<c-1&&!Jh(i,l);l++);}parseMPEGPES(e,t){const n=t.data,r=n.length;let i=0,l=0;const c=t.pts;if(c===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;l<r;)if(kE(n,l)){const f=IE(e,n,l,c,i);if(f)l+=f.length,i++;else break}else l++}parseAC3PES(e,t){{const n=t.data,r=t.pts;if(r===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const i=n.length;let l=0,c=0,f;for(;c<i&&(f=NE(e,n,c,r,l++))>0;)c+=f}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=Or({},t,{type:this._videoTrack?_a.emsg:_a.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function Jm(o,e){return((o[e+1]&31)<<8)+o[e+2]}function UI(o,e){return(o[e+10]&31)<<8|o[e+11]}function BI(o,e,t,n,r,i){const l={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},c=(o[e+1]&15)<<8|o[e+2],f=e+3+c-4,h=(o[e+10]&15)<<8|o[e+11];for(e+=12+h;e<f;){const g=Jm(o,e),p=(o[e+3]&15)<<8|o[e+4];switch(o[e]){case 207:if(!n){fm("ADTS AAC",i);break}case 15:l.audioPid===-1&&(l.audioPid=g);break;case 21:l.id3Pid===-1&&(l.id3Pid=g);break;case 219:if(!n){fm("H.264",i);break}case 27:l.videoPid===-1&&(l.videoPid=g);break;case 3:case 4:!t.mpeg&&!t.mp3?i.log("MPEG audio found, not supported in this browser"):l.audioPid===-1&&(l.audioPid=g,l.segmentAudioCodec="mp3");break;case 193:if(!n){fm("AC-3",i);break}case 129:t.ac3?l.audioPid===-1&&(l.audioPid=g,l.segmentAudioCodec="ac3"):i.log("AC-3 audio found, not supported in this browser");break;case 6:if(l.audioPid===-1&&p>0){let y=e+5,T=p;for(;T>2;){switch(o[y]){case 106:t.ac3!==!0?i.log("AC-3 audio found, not supported in this browser for now"):(l.audioPid=g,l.segmentAudioCodec="ac3");break}const w=o[y+1]+2;y+=w,T-=w}}break;case 194:case 135:return ep(r,new Error("Unsupported EC-3 in M2TS found"),void 0,i),l;case 36:l.videoPid===-1&&(l.videoPid=g,l.segmentVideoCodec="hevc",i.log("HEVC in M2TS found"));break}e+=p+5}return l}function ep(o,e,t,n){n.warn(`parsing error: ${e.message}`),o.emit(Se.ERROR,Se.ERROR,{type:Gn.MEDIA_ERROR,details:wt.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function fm(o,e){e.log(`${o} with AES-128-CBC encryption found in unencrypted stream`)}function Yu(o,e){let t=0,n,r,i,l,c;const f=o.data;if(!o||o.size===0)return null;for(;f[0].length<19&&f.length>1;)f[0]=$a(f[0],f[1]),f.splice(1,1);if(n=f[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(r=(n[4]<<8)+n[5],r&&r>o.size-6)return null;const g=n[7];g&192&&(l=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,g&64?(c=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,l-c>60*9e4&&(e.warn(`${Math.round((l-c)/9e4)}s delta between PTS and DTS, align them`),l=c)):c=l),i=n[8];let p=i+9;if(o.size<=p)return null;o.size-=p;const y=new Uint8Array(o.size);for(let T=0,b=f.length;T<b;T++){n=f[T];let w=n.byteLength;if(p)if(p>w){p-=w;continue}else n=n.subarray(p),w-=p,p=0;y.set(n,t),t+=w}return r&&(r-=i+3),{data:y,pts:l,dts:c,len:r}}return null}class jI{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const jo=Math.pow(2,32)-1;class xt{static init(){xt.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in xt.types)xt.types.hasOwnProperty(e)&&(xt.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);xt.HDLR_TYPES={video:t,audio:n};const r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);xt.STTS=xt.STSC=xt.STCO=i,xt.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),xt.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),xt.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),xt.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const l=new Uint8Array([105,115,111,109]),c=new Uint8Array([97,118,99,49]),f=new Uint8Array([0,0,0,1]);xt.FTYP=xt.box(xt.types.ftyp,l,f,l,c),xt.DINF=xt.box(xt.types.dinf,xt.box(xt.types.dref,r))}static box(e,...t){let n=8,r=t.length;const i=r;for(;r--;)n+=t[r].byteLength;const l=new Uint8Array(n);for(l[0]=n>>24&255,l[1]=n>>16&255,l[2]=n>>8&255,l[3]=n&255,l.set(e,4),r=0,n=8;r<i;r++)l.set(t[r],n),n+=t[r].byteLength;return l}static hdlr(e){return xt.box(xt.types.hdlr,xt.HDLR_TYPES[e])}static mdat(e){return xt.box(xt.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(jo+1)),r=Math.floor(t%(jo+1));return xt.box(xt.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,r>>24,r>>16&255,r>>8&255,r&255,85,196,0,0]))}static mdia(e){return xt.box(xt.types.mdia,xt.mdhd(e.timescale||0,e.duration||0),xt.hdlr(e.type),xt.minf(e))}static mfhd(e){return xt.box(xt.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?xt.box(xt.types.minf,xt.box(xt.types.smhd,xt.SMHD),xt.DINF,xt.stbl(e)):xt.box(xt.types.minf,xt.box(xt.types.vmhd,xt.VMHD),xt.DINF,xt.stbl(e))}static moof(e,t,n){return xt.box(xt.types.moof,xt.mfhd(e),xt.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=xt.trak(e[t]);return xt.box.apply(null,[xt.types.moov,xt.mvhd(e[0].timescale||0,e[0].duration||0)].concat(n).concat(xt.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=xt.trex(e[t]);return xt.box.apply(null,[xt.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(jo+1)),r=Math.floor(t%(jo+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,r>>24,r>>16&255,r>>8&255,r&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return xt.box(xt.types.mvhd,i)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let r,i;for(r=0;r<t.length;r++)i=t[r].flags,n[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return xt.box(xt.types.sdtp,n)}static stbl(e){return xt.box(xt.types.stbl,xt.stsd(e),xt.box(xt.types.stts,xt.STTS),xt.box(xt.types.stsc,xt.STSC),xt.box(xt.types.stsz,xt.STSZ),xt.box(xt.types.stco,xt.STCO))}static avc1(e){let t=[],n=[],r,i,l;for(r=0;r<e.sps.length;r++)i=e.sps[r],l=i.byteLength,t.push(l>>>8&255),t.push(l&255),t=t.concat(Array.prototype.slice.call(i));for(r=0;r<e.pps.length;r++)i=e.pps[r],l=i.byteLength,n.push(l>>>8&255),n.push(l&255),n=n.concat(Array.prototype.slice.call(i));const c=xt.box(xt.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(n))),f=e.width,h=e.height,g=e.pixelRatio[0],p=e.pixelRatio[1];return xt.box(xt.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,f>>8&255,f&255,h>>8&255,h&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,xt.box(xt.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),xt.box(xt.types.pasp,new Uint8Array([g>>24,g>>16&255,g>>8&255,g&255,p>>24,p>>16&255,p>>8&255,p&255])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return xt.box(xt.types.mp4a,xt.audioStsd(e),xt.box(xt.types.esds,xt.esds(e)))}static mp3(e){return xt.box(xt.types[".mp3"],xt.audioStsd(e))}static ac3(e){return xt.box(xt.types["ac-3"],xt.audioStsd(e),xt.box(xt.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return xt.box(xt.types.stsd,xt.STSD,xt.mp4a(e));if(t==="ac3"&&e.config)return xt.box(xt.types.stsd,xt.STSD,xt.ac3(e));if(t==="mp3"&&e.codec==="mp3")return xt.box(xt.types.stsd,xt.STSD,xt.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return xt.box(xt.types.stsd,xt.STSD,xt.avc1(e));if(t==="hevc"&&e.vps)return xt.box(xt.types.stsd,xt.STSD,xt.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,n=(e.duration||0)*(e.timescale||0),r=e.width||0,i=e.height||0,l=Math.floor(n/(jo+1)),c=Math.floor(n%(jo+1));return xt.box(xt.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,l>>24,l>>16&255,l>>8&255,l&255,c>>24,c>>16&255,c>>8&255,c&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,r&255,0,0,i>>8&255,i&255,0,0]))}static traf(e,t){const n=xt.sdtp(e),r=e.id,i=Math.floor(t/(jo+1)),l=Math.floor(t%(jo+1));return xt.box(xt.types.traf,xt.box(xt.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255])),xt.box(xt.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,i&255,l>>24,l>>16&255,l>>8&255,l&255])),xt.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,xt.box(xt.types.trak,xt.tkhd(e),xt.mdia(e))}static trex(e){const t=e.id;return xt.box(xt.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],r=n.length,i=12+16*r,l=new Uint8Array(i);let c,f,h,g,p,y;for(t+=8+i,l.set([e.type==="video"?1:0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,r&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),c=0;c<r;c++)f=n[c],h=f.duration,g=f.size,p=f.flags,y=f.cts,l.set([h>>>24&255,h>>>16&255,h>>>8&255,h&255,g>>>24&255,g>>>16&255,g>>>8&255,g&255,p.isLeading<<2|p.dependsOn,p.isDependedOn<<6|p.hasRedundancy<<4|p.paddingValue<<1|p.isNonSync,p.degradPrio&61440,p.degradPrio&15,y>>>24&255,y>>>16&255,y>>>8&255,y&255],12+16*c);return xt.box(xt.types.trun,l)}static initSegment(e){xt.types||xt.init();const t=xt.moov(e);return $a(xt.FTYP,t)}static hvc1(e){const t=e.params,n=[e.vps,e.sps,e.pps],r=4,i=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),r-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),n.length]);let l=i.length;for(let b=0;b<n.length;b+=1){l+=3;for(let w=0;w<n[b].length;w+=1)l+=2+n[b][w].length}const c=new Uint8Array(l);c.set(i,0),l=i.length;const f=n.length-1;for(let b=0;b<n.length;b+=1){c.set(new Uint8Array([32+b|(b===f?128:0),0,n[b].length]),l),l+=3;for(let w=0;w<n[b].length;w+=1)c.set(new Uint8Array([n[b][w].length>>8,n[b][w].length&255]),l),l+=2,c.set(n[b][w],l),l+=n[b][w].length}const h=xt.box(xt.types.hvcC,c),g=e.width,p=e.height,y=e.pixelRatio[0],T=e.pixelRatio[1];return xt.box(xt.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,g>>8&255,g&255,p>>8&255,p&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),h,xt.box(xt.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),xt.box(xt.types.pasp,new Uint8Array([y>>24,y>>16&255,y>>8&255,y&255,T>>24,T>>16&255,T>>8&255,T&255])))}}xt.types=void 0;xt.HDLR_TYPES=void 0;xt.STTS=void 0;xt.STSC=void 0;xt.STCO=void 0;xt.STSZ=void 0;xt.VMHD=void 0;xt.SMHD=void 0;xt.STSD=void 0;xt.FTYP=void 0;xt.DINF=void 0;const LE=9e4;function Op(o,e,t=1,n=!1){const r=o*e*t;return n?Math.round(r):r}function qI(o,e,t=1,n=!1){return Op(o,e,1/t,n)}function Ad(o,e=!1){return Op(o,1e3,1/LE,e)}function GI(o,e=1){return Op(o,LE,1/e)}const $I=10*1e3,HI=1024,VI=1152,KI=1536;let Wu=null,hm=null;function x0(o,e,t,n){return{duration:e,size:t,cts:n,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:o?2:1,isNonSync:o?0:1}}}class Fh extends Ha{constructor(e,t,n,r){if(super("mp4-remuxer",r),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,Wu===null){const l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Wu=l?parseInt(l[1]):0}if(hm===null){const i=navigator.userAgent.match(/Safari\/(\d+)/i);hm=i?parseInt(i[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){this.log("initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,r=e.reduce((i,l)=>{let c=l.pts,f=c-i;return f<-4294967296&&(t=!0,c=Ua(c,n),f=c-i),f>0?i:c},n);return t&&this.debug("PTS rollover detected"),r}remux(e,t,n,r,i,l,c,f){let h,g,p,y,T,b,w=i,R=i;const M=e.pid>-1,Y=t.pid>-1,Z=t.samples.length,ye=e.samples.length>0,Re=c&&Z>0||Z>1;if((!M||ye)&&(!Y||Re)||this.ISGenerated||c){if(this.ISGenerated){var k,j,oe,L;const ct=this.videoTrackConfig;(ct&&(t.width!==ct.width||t.height!==ct.height||((k=t.pixelRatio)==null?void 0:k[0])!==((j=ct.pixelRatio)==null?void 0:j[0])||((oe=t.pixelRatio)==null?void 0:oe[1])!==((L=ct.pixelRatio)==null?void 0:L[1]))||!ct&&Re||this.nextAudioTs===null&&ye)&&this.resetInitSegment()}this.ISGenerated||(p=this.generateIS(e,t,i,l));const Ee=this.isVideoContiguous;let Be=-1,pe;if(Re&&(Be=YI(t.samples),!Ee&&this.config.forceKeyFrameOnDiscontinuity))if(b=!0,Be>0){this.warn(`Dropped ${Be} out of ${Z} video samples due to a missing keyframe`);const ct=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(Be),t.dropped+=Be,R+=(t.samples[0].pts-ct)/t.inputTimeScale,pe=R}else Be===-1&&(this.warn(`No keyframe found out of ${Z} video samples`),b=!1);if(this.ISGenerated){if(ye&&Re){const ct=this.getVideoStartPts(t.samples),Le=(Ua(e.samples[0].pts,ct)-ct)/t.inputTimeScale;w+=Math.max(0,Le),R+=Math.max(0,-Le)}if(ye){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),p=this.generateIS(e,t,i,l)),g=this.remuxAudio(e,w,this.isAudioContiguous,l,Y||Re||f===Fn.AUDIO?R:void 0),Re){const ct=g?g.endPTS-g.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),p=this.generateIS(e,t,i,l)),h=this.remuxVideo(t,R,Ee,ct)}}else Re&&(h=this.remuxVideo(t,R,Ee,0));h&&(h.firstKeyFrame=Be,h.independent=Be!==-1,h.firstKeyFramePTS=pe)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(T=PE(n,i,this._initPTS,this._initDTS)),r.samples.length&&(y=ME(r,i,this._initPTS))),{audio:g,video:h,initSegment:p,independent:b,text:y,id3:T}}generateIS(e,t,n,r){const i=e.samples,l=t.samples,c=this.typeSupported,f={},h=this._initPTS;let g=!h||r,p="audio/mp4",y,T,b,w=-1;if(g&&(y=T=1/0),e.config&&i.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":c.mpeg?(p="audio/mpeg",e.codec=""):c.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}f.audio={id:"audio",container:p,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&c.mpeg?new Uint8Array(0):xt.initSegment([e]),metadata:{channelCount:e.channelCount}},g&&(w=e.id,b=e.inputTimeScale,!h||b!==h.timescale?y=T=i[0].pts-Math.round(b*n):g=!1)}if(t.sps&&t.pps&&l.length){if(t.timescale=t.inputTimeScale,f.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:xt.initSegment([t]),metadata:{width:t.width,height:t.height}},g)if(w=t.id,b=t.inputTimeScale,!h||b!==h.timescale){const R=this.getVideoStartPts(l),M=Math.round(b*n);T=Math.min(T,Ua(l[0].dts,R)-M),y=Math.min(y,R-M)}else g=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(f).length)return this.ISGenerated=!0,g?(h&&this.warn(`Timestamps at playlist time: ${r?"":"~"}${n} ${y/b} != initPTS: ${h.baseTime/h.timescale} (${h.baseTime}/${h.timescale}) trackId: ${h.trackId}`),this.log(`Found initPTS at playlist time: ${n} offset: ${y/b} (${y}/${b}) trackId: ${w}`),this._initPTS={baseTime:y,timescale:b,trackId:w},this._initDTS={baseTime:T,timescale:b,trackId:w}):y=b=void 0,{tracks:f,initPTS:y,timescale:b,trackId:w}}remuxVideo(e,t,n,r){const i=e.inputTimeScale,l=e.samples,c=[],f=l.length,h=this._initPTS,g=h.baseTime*i/h.timescale;let p=this.nextVideoTs,y=8,T=this.videoSampleDuration,b,w,R=Number.POSITIVE_INFINITY,M=Number.NEGATIVE_INFINITY,Y=!1;if(!n||p===null){const Me=g+t*i,$e=l[0].pts-Ua(l[0].dts,l[0].pts);Wu&&p!==null&&Math.abs(Me-$e-(p+g))<15e3?n=!0:p=Me-$e-g}const Z=p+g;for(let Me=0;Me<f;Me++){const $e=l[Me];$e.pts=Ua($e.pts,Z),$e.dts=Ua($e.dts,Z),$e.dts<l[Me>0?Me-1:Me].dts&&(Y=!0)}Y&&l.sort(function(Me,$e){const mt=Me.dts-$e.dts,Dt=Me.pts-$e.pts;return mt||Dt}),b=l[0].dts,w=l[l.length-1].dts;const ye=w-b,Re=ye?Math.round(ye/(f-1)):T||e.inputTimeScale/30;if(n){const Me=b-Z,$e=Me>Re,mt=Me<-1;if(($e||mt)&&($e?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Ad(Me,!0)} ms (${Me}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Ad(-Me,!0)} ms (${Me}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!mt||Z>=l[0].pts||Wu)){b=Z;const Dt=l[0].pts-Me;if($e)l[0].dts=b,l[0].pts=Dt;else{let Pe=!0;for(let Fe=0;Fe<l.length&&!(l[Fe].dts>Dt&&Pe);Fe++){const ut=l[Fe].pts;if(l[Fe].dts-=Me,l[Fe].pts-=Me,Fe<l.length-1){const W=l[Fe+1].pts,Q=l[Fe].pts,P=W<=Q,H=W<=ut;Pe=P==H}}}this.log(`Video: Initial PTS/DTS adjusted: ${Ad(Dt,!0)}/${Ad(b,!0)}, delta: ${Ad(Me,!0)} ms`)}}b=Math.max(0,b);let F=0,k=0,j=b;for(let Me=0;Me<f;Me++){const $e=l[Me],mt=$e.units,Dt=mt.length;let Pe=0;for(let Fe=0;Fe<Dt;Fe++)Pe+=mt[Fe].data.length;k+=Pe,F+=Dt,$e.length=Pe,$e.dts<j?($e.dts=j,j+=Re/4|0||1):j=$e.dts,R=Math.min($e.pts,R),M=Math.max($e.pts,M)}w=l[f-1].dts;const oe=k+4*F+8;let L;try{L=new Uint8Array(oe)}catch(Me){this.observer.emit(Se.ERROR,Se.ERROR,{type:Gn.MUX_ERROR,details:wt.REMUX_ALLOC_ERROR,fatal:!1,error:Me,bytes:oe,reason:`fail allocating video mdat ${oe}`});return}const Ee=new DataView(L.buffer);Ee.setUint32(0,oe),L.set(xt.types.mdat,4);let Be=!1,pe=Number.POSITIVE_INFINITY,ct=Number.POSITIVE_INFINITY,Ye=Number.NEGATIVE_INFINITY,Le=Number.NEGATIVE_INFINITY;for(let Me=0;Me<f;Me++){const $e=l[Me],mt=$e.units;let Dt=0;for(let ut=0,W=mt.length;ut<W;ut++){const Q=mt[ut],P=Q.data,H=Q.data.byteLength;Ee.setUint32(y,H),y+=4,L.set(P,y),y+=H,Dt+=4+H}let Pe;if(Me<f-1)T=l[Me+1].dts-$e.dts,Pe=l[Me+1].pts-$e.pts;else{const ut=this.config,W=Me>0?$e.dts-l[Me-1].dts:Re;if(Pe=Me>0?$e.pts-l[Me-1].pts:Re,ut.stretchShortVideoTrack&&this.nextAudioTs!==null){const Q=Math.floor(ut.maxBufferHole*i),P=(r?R+r*i:this.nextAudioTs+g)-$e.pts;P>Q?(T=P-W,T<0?T=W:Be=!0,this.log(`It is approximately ${P/90} ms to the next segment; using duration ${T/90} ms for the last video frame.`)):T=W}else T=W}const Fe=Math.round($e.pts-$e.dts);pe=Math.min(pe,T),Ye=Math.max(Ye,T),ct=Math.min(ct,Pe),Le=Math.max(Le,Pe),c.push(x0($e.key,T,Dt,Fe))}if(c.length){if(Wu){if(Wu<70){const Me=c[0].flags;Me.dependsOn=2,Me.isNonSync=0}}else if(hm&&Le-ct<Ye-pe&&Re/Ye<.025&&c[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let Me=b;for(let $e=0,mt=c.length;$e<mt;$e++){const Dt=Me+c[$e].duration,Pe=Me+c[$e].cts;if($e<mt-1){const Fe=Dt+c[$e+1].cts;c[$e].duration=Fe-Pe}else c[$e].duration=$e?c[$e-1].duration:Re;c[$e].cts=0,Me=Dt}}}T=Be||!T?Re:T;const Je=w+T;this.nextVideoTs=p=Je-g,this.videoSampleDuration=T,this.isVideoContiguous=!0;const Ze={data1:xt.moof(e.sequenceNumber++,b,Or(e,{samples:c})),data2:L,startPTS:(R-g)/i,endPTS:(M+T-g)/i,startDTS:(b-g)/i,endDTS:p/i,type:"video",hasAudio:!1,hasVideo:!0,nb:c.length,dropped:e.dropped};return e.samples=[],e.dropped=0,Ze}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return VI;case"ac3":return KI;default:return HI}}remuxAudio(e,t,n,r,i){const l=e.inputTimeScale,c=e.samplerate?e.samplerate:l,f=l/c,h=this.getSamplesPerFrame(e),g=h*f,p=this._initPTS,y=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,T=[],b=i!==void 0;let w=e.samples,R=y?0:8,M=this.nextAudioTs||-1;const Y=p.baseTime*l/p.timescale,Z=Y+t*l;if(this.isAudioContiguous=n=n||w.length&&M>0&&(r&&Math.abs(Z-(M+Y))<9e3||Math.abs(Ua(w[0].pts,Z)-(M+Y))<20*g),w.forEach(function(Le){Le.pts=Ua(Le.pts,Z)}),!n||M<0){if(w=w.filter(Le=>Le.pts>=0),!w.length)return;i===0?M=0:r&&!b?M=Math.max(0,Z-Y):M=w[0].pts-Y}if(e.segmentCodec==="aac"){const Le=this.config.maxAudioFramesDrift;for(let Je=0,Ge=M+Y;Je<w.length;Je++){const tt=w[Je],Ze=tt.pts,Me=Ze-Ge,$e=Math.abs(1e3*Me/l);if(Me<=-Le*g&&b)Je===0&&(this.warn(`Audio frame @ ${(Ze/l).toFixed(3)}s overlaps marker by ${Math.round(1e3*Me/l)} ms.`),this.nextAudioTs=M=Ze-Y,Ge=Ze);else if(Me>=Le*g&&$e<$I&&b){let mt=Math.round(Me/g);for(Ge=Ze-mt*g;Ge<0&&mt&&g;)mt--,Ge+=g;Je===0&&(this.nextAudioTs=M=Ge-Y),this.warn(`Injecting ${mt} audio frames @ ${((Ge-Y)/l).toFixed(3)}s due to ${Math.round(1e3*Me/l)} ms gap.`);for(let Dt=0;Dt<mt;Dt++){let Pe=jI.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);Pe||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),Pe=tt.unit.subarray()),w.splice(Je,0,{unit:Pe,pts:Ge}),Ge+=g,Je++}}tt.pts=Ge,Ge+=g}}let ye=null,Re=null,F,k=0,j=w.length;for(;j--;)k+=w[j].unit.byteLength;for(let Le=0,Je=w.length;Le<Je;Le++){const Ge=w[Le],tt=Ge.unit;let Ze=Ge.pts;if(Re!==null){const $e=T[Le-1];$e.duration=Math.round((Ze-Re)/f)}else if(n&&e.segmentCodec==="aac"&&(Ze=M+Y),ye=Ze,k>0){k+=R;try{F=new Uint8Array(k)}catch($e){this.observer.emit(Se.ERROR,Se.ERROR,{type:Gn.MUX_ERROR,details:wt.REMUX_ALLOC_ERROR,fatal:!1,error:$e,bytes:k,reason:`fail allocating audio mdat ${k}`});return}y||(new DataView(F.buffer).setUint32(0,k),F.set(xt.types.mdat,4))}else return;F.set(tt,R);const Me=tt.byteLength;R+=Me,T.push(x0(!0,h,Me,0)),Re=Ze}const oe=T.length;if(!oe)return;const L=T[T.length-1];M=Re-Y,this.nextAudioTs=M+f*L.duration;const Ee=y?new Uint8Array(0):xt.moof(e.sequenceNumber++,ye/f,Or({},e,{samples:T}));e.samples=[];const Be=(ye-Y)/l,pe=M/l,Ye={data1:Ee,data2:F,startPTS:Be,endPTS:pe,startDTS:Be,endDTS:pe,type:"audio",hasAudio:!0,hasVideo:!1,nb:oe};return this.isAudioContiguous=!0,Ye}}function Ua(o,e){let t;if(e===null)return o;for(e<o?t=-8589934592:t=8589934592;Math.abs(o-e)>4294967296;)o+=t;return o}function YI(o){for(let e=0;e<o.length;e++)if(o[e].key)return e;return-1}function PE(o,e,t,n){const r=o.samples.length;if(!r)return;const i=o.inputTimeScale;for(let c=0;c<r;c++){const f=o.samples[c];f.pts=Ua(f.pts-t.baseTime*i/t.timescale,e*i)/i,f.dts=Ua(f.dts-n.baseTime*i/n.timescale,e*i)/i}const l=o.samples;return o.samples=[],{samples:l}}function ME(o,e,t){const n=o.samples.length;if(!n)return;const r=o.inputTimeScale;for(let l=0;l<n;l++){const c=o.samples[l];c.pts=Ua(c.pts-t.baseTime*r/t.timescale,e*r)/r}o.samples.sort((l,c)=>l.pts-c.pts);const i=o.samples;return o.samples=[],{samples:i}}class WI extends Ha{constructor(e,t,n,r){super("passthrough-remuxer",r),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,n,r){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(e,r),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:n,videoCodec:r}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:i,video:l}=this.initData=Vv(e);if(t)Fx(e,t);else{const f=i||l;f!=null&&f.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${f.codec}")!`)}i&&(n=w0(i,Br.AUDIO,this)),l&&(r=w0(l,Br.VIDEO,this));const c={};i&&l?c.audiovideo={container:"video/mp4",codec:n+","+r,supplemental:l.supplemental,encrypted:l.encrypted,initSegment:e,id:"main"}:i?c.audio={container:"audio/mp4",codec:n,encrypted:i.encrypted,initSegment:e,id:"audio"}:l?c.video={container:"video/mp4",codec:r,supplemental:l.supplemental,encrypted:l.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=c}remux(e,t,n,r,i,l){var c,f;let{initPTS:h,lastEndTime:g}=this;const p={audio:void 0,video:void 0,text:r,id3:n,initSegment:void 0};Dn(g)||(g=this.lastEndTime=i||0);const y=t.samples;if(!y.length)return p;const T={initPTS:void 0,timescale:void 0,trackId:void 0};let b=this.initData;if((c=b)!=null&&c.length||(this.generateInitSegment(y),b=this.initData),!((f=b)!=null&&f.length))return this.warn("Failed to generate initSegment."),p;this.emitInitSegment&&(T.tracks=this.initTracks,this.emitInitSegment=!1);const w=zx(y,b,this),R=b.audio?w[b.audio.id]:null,M=b.video?w[b.video.id]:null,Y=Th(M,1/0),Z=Th(R,1/0),ye=Th(M,0,!0),Re=Th(R,0,!0);let F=i,k=0;const j=R&&(!M||!h&&Z<Y||h&&h.trackId===b.audio.id),oe=j?R:M;if(oe){const Ge=oe.timescale,tt=oe.start-i*Ge,Ze=j?b.audio.id:b.video.id;F=oe.start/Ge,k=j?Re-Z:ye-Y,(l||!h)&&(XI(h,F,i,k)||Ge!==h.timescale)&&(h&&this.warn(`Timestamps at playlist time: ${l?"":"~"}${i} ${tt/Ge} != initPTS: ${h.baseTime/h.timescale} (${h.baseTime}/${h.timescale}) trackId: ${h.trackId}`),this.log(`Found initPTS at playlist time: ${i} offset: ${F-i} (${tt}/${Ge}) trackId: ${Ze}`),h=null,T.initPTS=tt,T.timescale=Ge,T.trackId=Ze)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${i}`);h?(T.initPTS=h.baseTime,T.timescale=h.timescale,T.trackId=h.trackId):((!T.timescale||T.trackId===void 0||T.initPTS===void 0)&&(this.warn("Could not set initPTS"),T.initPTS=F,T.timescale=1,T.trackId=-1),this.initPTS=h={baseTime:T.initPTS,timescale:T.timescale,trackId:T.trackId});const L=F-h.baseTime/h.timescale,Ee=L+k;k>0?this.lastEndTime=Ee:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const Be=!!b.audio,pe=!!b.video;let ct="";Be&&(ct+="audio"),pe&&(ct+="video");const Ye=(b.audio?b.audio.encrypted:!1)||(b.video?b.video.encrypted:!1),Le={data1:y,startPTS:L,startDTS:L,endPTS:Ee,endDTS:Ee,type:ct,hasAudio:Be,hasVideo:pe,nb:1,dropped:0,encrypted:Ye};p.audio=Be&&!pe?Le:void 0,p.video=pe?Le:void 0;const Je=M==null?void 0:M.sampleCount;if(Je){const Ge=M.keyFrameIndex,tt=Ge!==-1;Le.nb=Je,Le.dropped=Ge===0||this.isVideoContiguous?0:tt?Ge:Je,Le.independent=tt,Le.firstKeyFrame=Ge,tt&&M.keyFrameStart&&(Le.firstKeyFramePTS=(M.keyFrameStart-h.baseTime)/h.timescale),this.isVideoContiguous||(p.independent=tt),this.isVideoContiguous||(this.isVideoContiguous=tt),Le.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${Ge}/${Je} dropped: ${Le.dropped} start: ${Le.firstKeyFramePTS||"NA"}`)}return p.initSegment=T,p.id3=PE(n,i,h,h),r.samples.length&&(p.text=ME(r,i,h)),p}}function Th(o,e,t=!1){return(o==null?void 0:o.start)!==void 0?(o.start+(t?o.duration:0))/o.timescale:e}function XI(o,e,t,n){if(o===null)return!0;const r=Math.max(n,1),i=e-o.baseTime/o.timescale;return Math.abs(i-t)>r}function w0(o,e,t){const n=o.codec;return n&&n.length>4?n:e===Br.AUDIO?n==="ec-3"||n==="ac-3"||n==="alac"?n:n==="fLaC"||n==="Opus"?Vh(n,!1):(t.warn(`Unhandled audio codec "${n}" in mp4 MAP`),n||"mp4a"):(t.warn(`Unhandled video codec "${n}" in mp4 MAP`),n||"avc1")}let io;try{io=self.performance.now.bind(self.performance)}catch{io=Date.now}const zh=[{demux:MI,remux:WI},{demux:Ho,remux:Fh},{demux:NI,remux:Fh},{demux:LI,remux:Fh}];zh.splice(2,0,{demux:DI,remux:Fh});class I0{constructor(e,t,n,r,i,l){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.id=i,this.logger=l}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,r){const i=n.transmuxing;i.executeStart=io();let l=new Uint8Array(e);const{currentTransmuxState:c,transmuxConfig:f}=this;r&&(this.currentTransmuxState=r);const{contiguous:h,discontinuity:g,trackSwitch:p,accurateTimeOffset:y,timeOffset:T,initSegmentChange:b}=r||c,{audioCodec:w,videoCodec:R,defaultInitPts:M,duration:Y,initSegmentData:Z}=f,ye=QI(l,t);if(ye&&rc(ye.method)){const j=this.getDecrypter(),oe=Ap(ye.method);if(j.isSync()){let L=j.softwareDecrypt(l,ye.key.buffer,ye.iv.buffer,oe);if(n.part>-1){const Be=j.flush();L=Be&&Be.buffer}if(!L)return i.executeEnd=io(),gm(n);l=new Uint8Array(L)}else return this.asyncResult=!0,this.decryptionPromise=j.webCryptoDecrypt(l,ye.key.buffer,ye.iv.buffer,oe).then(L=>{const Ee=this.push(L,null,n);return this.decryptionPromise=null,Ee}),this.decryptionPromise}const Re=this.needsProbing(g,p);if(Re){const j=this.configureTransmuxer(l);if(j)return this.logger.warn(`[transmuxer] ${j.message}`),this.observer.emit(Se.ERROR,Se.ERROR,{type:Gn.MEDIA_ERROR,details:wt.FRAG_PARSING_ERROR,fatal:!1,error:j,reason:j.message}),i.executeEnd=io(),gm(n)}(g||p||b||Re)&&this.resetInitSegment(Z,w,R,Y,t),(g||b||Re)&&this.resetInitialTimestamp(M),h||this.resetContiguity();const F=this.transmux(l,ye,T,y,n);this.asyncResult=qd(F);const k=this.currentTransmuxState;return k.contiguous=!0,k.discontinuity=!1,k.trackSwitch=!1,i.executeEnd=io(),F}flush(e){const t=e.transmuxing;t.executeStart=io();const{decrypter:n,currentTransmuxState:r,decryptionPromise:i}=this;if(i)return this.asyncResult=!0,i.then(()=>this.flush(e));const l=[],{timeOffset:c}=r;if(n){const p=n.flush();p&&l.push(this.push(p.buffer,null,e))}const{demuxer:f,remuxer:h}=this;if(!f||!h){t.executeEnd=io();const p=[gm(e)];return this.asyncResult?Promise.resolve(p):p}const g=f.flush(c);return qd(g)?(this.asyncResult=!0,g.then(p=>(this.flushRemux(l,p,e),l))):(this.flushRemux(l,g,e),this.asyncResult?Promise.resolve(l):l)}flushRemux(e,t,n){const{audioTrack:r,videoTrack:i,id3Track:l,textTrack:c}=t,{accurateTimeOffset:f,timeOffset:h}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===Fn.MAIN?"level":"track"} ${n.level}`);const g=this.remuxer.remux(r,i,l,c,h,f,!0,this.id);e.push({remuxResult:g,chunkMeta:n}),n.transmuxing.executeEnd=io()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;!t||!n||(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,r,i){const{demuxer:l,remuxer:c}=this;!l||!c||(l.resetInitSegment(e,t,n,r),c.resetInitSegment(e,t,n,i))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,r,i){let l;return t&&t.method==="SAMPLE-AES"?l=this.transmuxSampleAes(e,t,n,r,i):l=this.transmuxUnencrypted(e,n,r,i),l}transmuxUnencrypted(e,t,n,r){const{audioTrack:i,videoTrack:l,id3Track:c,textTrack:f}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(i,l,c,f,t,n,!1,this.id),chunkMeta:r}}transmuxSampleAes(e,t,n,r,i){return this.demuxer.demuxSampleAes(e,t,n).then(l=>({remuxResult:this.remuxer.remux(l.audioTrack,l.videoTrack,l.id3Track,l.textTrack,n,r,!1,this.id),chunkMeta:i}))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:r}=this;let i;for(let p=0,y=zh.length;p<y;p++){var l;if((l=zh[p].demux)!=null&&l.probe(e,this.logger)){i=zh[p];break}}if(!i)return new Error("Failed to find demuxer by probing fragment data");const c=this.demuxer,f=this.remuxer,h=i.remux,g=i.demux;(!f||!(f instanceof h))&&(this.remuxer=new h(n,t,r,this.logger)),(!c||!(c instanceof g))&&(this.demuxer=new g(n,t,r,this.logger),this.probe=g.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new wp(this.config)),e}}function QI(o,e){let t=null;return o.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const gm=o=>({remuxResult:{},chunkMeta:o});function qd(o){return"then"in o&&o.then instanceof Function}class ZI{constructor(e,t,n,r,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=r,this.defaultInitPts=i||null}}class JI{constructor(e,t,n,r,i,l){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=r,this.timeOffset=i,this.initSegmentChange=l}}let A0=0;class OE{constructor(e,t,n,r){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=A0++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=f=>{const h=f.data,g=this.hls;if(!(!g||!(h!=null&&h.event)||h.instanceNo!==this.instanceNo))switch(h.event){case"init":{var p;const y=(p=this.workerContext)==null?void 0:p.objectURL;y&&self.URL.revokeObjectURL(y);break}case"transmuxComplete":{this.handleTransmuxComplete(h.data);break}case"flush":{this.onFlush(h.data);break}case"workerLog":{g.logger[h.data.logType]&&g.logger[h.data.logType](h.data.message);break}default:{h.data=h.data||{},h.data.frag=this.frag,h.data.part=this.part,h.data.id=this.id,g.trigger(h.event,h.data);break}}},this.onWorkerError=f=>{if(!this.hls)return;const h=new Error(`${f.message}  (${f.filename}:${f.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(Se.ERROR,{type:Gn.OTHER_ERROR,details:wt.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:h})};const i=e.config;this.hls=e,this.id=t,this.useWorker=!!i.enableWorker,this.onTransmuxComplete=n,this.onFlush=r;const l=(f,h)=>{h=h||{},h.frag=this.frag||void 0,f===Se.ERROR&&(h=h,h.parent=this.id,h.part=this.part,this.error=h.error),this.hls.trigger(f,h)};this.observer=new Cp,this.observer.on(Se.FRAG_DECRYPTED,l),this.observer.on(Se.ERROR,l);const c=$y(i.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const f=this.hls.logger;if(i.workerPath||rI()){try{i.workerPath?(f.log(`loading Web Worker ${i.workerPath} for "${t}"`),this.workerContext=aI(i.workerPath)):(f.log(`injecting Web Worker for "${t}"`),this.workerContext=iI());const{worker:g}=this.workerContext;g.addEventListener("message",this.onWorkerMessage),g.addEventListener("error",this.onWorkerError),g.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:c,id:t,config:Kr(i)})}catch(g){f.warn(`Error setting up "${t}" Web Worker, fallback to inline`,g),this.terminateWorker(),this.error=null,this.transmuxer=new I0(this.observer,c,i,"",t,e.logger)}return}}this.transmuxer=new I0(this.observer,c,i,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=A0++;const t=this.hls.config,n=$y(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:n,id:this.id,config:Kr(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),sI(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,n,r,i,l,c,f,h,g){var p,y;h.transmuxing.start=self.performance.now();const{instanceNo:T,transmuxer:b}=this,w=l?l.start:i.start,R=i.decryptdata,M=this.frag,Y=!(M&&i.cc===M.cc),Z=!(M&&h.level===M.level),ye=M?h.sn-M.sn:-1,Re=this.part?h.part-this.part.index:-1,F=ye===0&&h.id>1&&h.id===(M==null?void 0:M.stats.chunkCount),k=!Z&&(ye===1||ye===0&&(Re===1||F&&Re<=0)),j=self.performance.now();(Z||ye||i.stats.parsing.start===0)&&(i.stats.parsing.start=j),l&&(Re||!k)&&(l.stats.parsing.start=j);const oe=!(M&&((p=i.initSegment)==null?void 0:p.url)===((y=M.initSegment)==null?void 0:y.url)),L=new JI(Y,k,f,Z,w,oe);if(!k||Y||oe){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${i.type} sn: ${h.sn}${h.part>-1?" part: "+h.part:""} ${this.id===Fn.MAIN?"level":"track"}: ${h.level} id: ${h.id}
        discontinuity: ${Y}
        trackSwitch: ${Z}
        contiguous: ${k}
        accurateTimeOffset: ${f}
        timeOffset: ${w}
        initSegmentChange: ${oe}`);const Ee=new ZI(n,r,t,c,g);this.configureTransmuxer(Ee)}if(this.frag=i,this.part=l,this.workerContext)this.workerContext.worker.postMessage({instanceNo:T,cmd:"demux",data:e,decryptdata:R,chunkMeta:h,state:L},e instanceof ArrayBuffer?[e]:[]);else if(b){const Ee=b.push(e,R,h,L);qd(Ee)?Ee.then(Be=>{this.handleTransmuxComplete(Be)}).catch(Be=>{this.transmuxerError(Be,h,"transmuxer-interface push error")}):this.handleTransmuxComplete(Ee)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(n){const r=n.flush(e);qd(r)?r.then(i=>{this.handleFlushResult(i,e)}).catch(i=>{this.transmuxerError(i,e,"transmuxer-interface flush error")}):this.handleFlushResult(r,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(Se.ERROR,{type:Gn.MEDIA_ERROR,details:wt.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const k0=100;class eA extends Rp{constructor(e,t,n){super(e,t,n,"audio-stream-controller",Fn.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(Se.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Se.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(Se.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Se.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Se.BUFFER_RESET,this.onBufferReset,this),e.on(Se.BUFFER_CREATED,this.onBufferCreated,this),e.on(Se.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Se.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Se.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Se.FRAG_LOADING,this.onFragLoading,this),e.on(Se.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(Se.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Se.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(Se.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Se.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Se.BUFFER_RESET,this.onBufferReset,this),e.off(Se.BUFFER_CREATED,this.onBufferCreated,this),e.off(Se.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Se.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Se.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Se.FRAG_LOADING,this.onFragLoading,this),e.off(Se.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:n,initPTS:r,timescale:i,trackId:l}){if(n===Fn.MAIN){const c=t.cc,f=this.fragCurrent;if(this.initPTS[c]={baseTime:r,timescale:i,trackId:l},this.log(`InitPTS for cc: ${c} found from main: ${r/i} (${r}/${i}) trackId: ${l}`),this.mainAnchor=t,this.state===Wt.WAITING_INIT_PTS){const h=this.waitingData;(!h&&!this.loadingParts||h&&h.frag.cc!==c)&&this.syncWithAnchor(t,h==null?void 0:h.frag)}else!this.hls.hasEnoughToStart&&f&&f.cc!==c?(f.abortRequests(),this.syncWithAnchor(t,f)):this.state===Wt.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var n;const r=((n=this.mainFragLoading)==null?void 0:n.frag)||null;if(t&&(r==null?void 0:r.cc)===t.cc)return;const i=(r||e).cc,l=this.getLevelDetails(),c=this.getLoadPosition(),f=nE(l,i,c);f&&(this.log(`Syncing with main frag at ${f.start} cc ${f.cc}`),this.startFragRequested=!1,this.nextLoadPosition=f.start,this.resetLoadingState(),this.state===Wt.IDLE&&this.doTickIdle())}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=Wt.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(k0),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=Wt.IDLE):this.state=Wt.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case Wt.IDLE:this.doTickIdle();break;case Wt.WAITING_TRACK:{const{levels:e,trackId:t}=this,n=e==null?void 0:e[t],r=n==null?void 0:n.details;if(r&&!this.waitForLive(n)){if(this.waitForCdnTuneIn(r))break;this.state=Wt.WAITING_INIT_PTS}break}case Wt.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case Wt.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:t,part:n,cache:r,complete:i}=e,l=this.mainAnchor;if(this.initPTS[t.cc]!==void 0){this.waitingData=null,this.state=Wt.FRAG_LOADING;const c=r.flush().buffer,f={frag:t,part:n,payload:c,networkDetails:null};this._handleFragmentLoadProgress(f),i&&super._handleFragmentLoadComplete(f)}else l&&l.cc!==e.frag.cc&&this.syncWithAnchor(l,e.frag)}else this.state=Wt.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:n,media:r,trackId:i}=this,l=t.config;if(!this.buffering||!r&&!this.primaryPrefetch&&(this.startFragRequested||!l.startFragPrefetch)||!(n!=null&&n[i]))return;const c=n[i],f=c.details;if(!f||this.waitForLive(c)||this.waitForCdnTuneIn(f)){this.state=Wt.WAITING_TRACK,this.startFragRequested=!1;return}const h=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&h&&(this.bufferFlushed=!1,this.afterBufferFlushed(h,Br.AUDIO,Fn.AUDIO));const g=this.getFwdBufferInfo(h,Fn.AUDIO);if(g===null)return;if(!this.switchingTrack&&this._streamEnded(g,f)){t.trigger(Se.BUFFER_EOS,{type:"audio"}),this.state=Wt.ENDED;return}const p=g.len,y=t.maxBufferLength,T=f.fragments,b=T[0].start,w=this.getLoadPosition(),R=this.flushing?w:g.end;if(this.switchingTrack&&r){const Z=w;f.PTSKnown&&Z<b&&(g.end>b||g.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=b+.05)}if(p>=y&&!this.switchingTrack&&R<T[T.length-1].start)return;let M=this.getNextFragment(R,f);if(M&&this.isLoopLoading(M,R)&&(M=this.getNextFragmentLoopLoading(M,f,g,Fn.MAIN,y)),!M){this.bufferFlushed=!0;return}let Y=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&Y&&gi(M)&&!M.endList&&(!f.live||!this.loadingParts&&R<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(Y)===bi.OK&&(this.mainFragLoading=Y=null),Y&&gi(Y))){if(M.start>Y.end){const ye=this.fragmentTracker.getFragAtPos(R,Fn.MAIN);ye&&ye.end>Y.end&&(Y=ye,this.mainFragLoading={frag:ye,targetBufferTime:null})}if(M.start>Y.end)return}this.loadFragment(M,c,R)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(n=>new Ud(n))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:r}=this;r&&(r.abortRequests(),this.removeUnbufferedFrags(r.start)),this.resetLoadingState(),n?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==Wt.STOPPED&&(this.setInterval(k0),this.state=Wt.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(Se.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(e,t){var n;const{levels:r}=this,{details:i,id:l,groupId:c,track:f}=t;if(!r){this.warn(`Audio tracks reset while loading track ${l} "${f.name}" of "${c}"`);return}const h=this.mainDetails;if(!h||i.endCC>h.endCC||h.expired){this.cachedTrackLoadedData=t,this.state!==Wt.STOPPED&&(this.state=Wt.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${l} "${f.name}" of "${c}" loaded [${i.startSN},${i.endSN}]${i.lastPartSn?`[part-${i.lastPartSn}-${i.lastPartIndex}]`:""},duration:${i.totalduration}`);const g=r[l];let p=0;if(i.live||(n=g.details)!=null&&n.live){if(this.checkLiveUpdate(i),i.deltaUpdateFailed)return;if(g.details){var y;p=this.alignPlaylists(i,g.details,(y=this.levelLastLoaded)==null?void 0:y.details)}i.alignedSliding||(pE(i,h),i.alignedSliding||Zh(i,h),p=i.fragmentStart)}g.details=i,this.levelLastLoaded=g,this.startFragRequested||this.setStartPosition(h,p),this.hls.trigger(Se.AUDIO_TRACK_UPDATED,{details:i,id:l,groupId:t.groupId}),this.state===Wt.WAITING_TRACK&&!this.waitForCdnTuneIn(i)&&(this.state=Wt.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:r,payload:i}=e,{config:l,trackId:c,levels:f}=this;if(!f){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const h=f[c];if(!h){this.warn("Audio track is undefined on fragment load progress");return}const g=h.details;if(!g){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const p=l.defaultAudioCodec||h.audioCodec||"mp4a.40.2";let y=this.transmuxer;y||(y=this.transmuxer=new OE(this.hls,Fn.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const T=this.initPTS[n.cc],b=(t=n.initSegment)==null?void 0:t.data;if(T!==void 0){const R=r?r.index:-1,M=R!==-1,Y=new Ip(n.level,n.sn,n.stats.chunkCount,i.byteLength,R,M);y.push(i,b,p,"",n,r,g.totalduration,!1,Y,T)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${g.startSN} ,${g.endSN}],track ${c}`);const{cache:w}=this.waitingData=this.waitingData||{frag:n,part:r,cache:new yE,complete:!1};w.push(new Uint8Array(i)),this.state!==Wt.STOPPED&&(this.state=Wt.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===Fn.MAIN&&gi(t.frag)&&(this.mainFragLoading=t,this.state===Wt.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:n,part:r}=t;if(n.type!==Fn.AUDIO){!this.audioOnly&&n.type===Fn.MAIN&&!n.elementaryStreams.video&&!n.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(gi(n)){this.fragPrevious=n;const i=this.switchingTrack;i&&(this.bufferedTrack=i,this.switchingTrack=null,this.hls.trigger(Se.AUDIO_TRACK_SWITCHED,Mr({},i)))}this.fragBufferedComplete(n,r),this.media&&this.tick()}onError(e,t){var n;if(t.fatal){this.state=Wt.ERROR;return}switch(t.details){case wt.FRAG_GAP:case wt.FRAG_PARSING_ERROR:case wt.FRAG_DECRYPT_ERROR:case wt.FRAG_LOAD_ERROR:case wt.FRAG_LOAD_TIMEOUT:case wt.KEY_LOAD_ERROR:case wt.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Fn.AUDIO,t);break;case wt.AUDIO_TRACK_LOAD_ERROR:case wt.AUDIO_TRACK_LOAD_TIMEOUT:case wt.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===Wt.WAITING_TRACK&&((n=t.context)==null?void 0:n.type)===mr.AUDIO_TRACK&&(this.state=Wt.IDLE);break;case wt.BUFFER_ADD_CODEC_ERROR:case wt.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case wt.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case wt.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==Br.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==Br.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===Wt.ENDED&&(this.state=Wt.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,t,Fn.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:r}=this,{remuxResult:i,chunkMeta:l}=e,c=this.getCurrentContext(l);if(!c){this.resetWhenMissingContext(l);return}const{frag:f,part:h,level:g}=c,{details:p}=g,{audio:y,text:T,id3:b,initSegment:w}=i;if(this.fragContextChanged(f)||!p){this.fragmentTracker.removeFragment(f);return}if(this.state=Wt.PARSING,this.switchingTrack&&y&&this.completeAudioSwitch(this.switchingTrack),w!=null&&w.tracks){const R=f.initSegment||f;if(this.unhandledEncryptionError(w,f))return;this._bufferInitSegment(g,w.tracks,R,l),r.trigger(Se.FRAG_PARSING_INIT_SEGMENT,{frag:R,id:n,tracks:w.tracks})}if(y){const{startPTS:R,endPTS:M,startDTS:Y,endDTS:Z}=y;h&&(h.elementaryStreams[Br.AUDIO]={startPTS:R,endPTS:M,startDTS:Y,endDTS:Z}),f.setElementaryStreamInfo(Br.AUDIO,R,M,Y,Z),this.bufferFragmentData(y,f,h,l)}if(b!=null&&(t=b.samples)!=null&&t.length){const R=Or({id:n,frag:f,details:p},b);r.trigger(Se.FRAG_PARSING_METADATA,R)}if(T){const R=Or({id:n,frag:f,details:p},T);r.trigger(Se.FRAG_PARSING_USERDATA,R)}}_bufferInitSegment(e,t,n,r){if(this.state!==Wt.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;const i=t.audio;i.id=Fn.AUDIO;const l=e.audioCodec;this.log(`Init audio buffer, container:${i.container}, codecs[level/parsed]=[${l}/${i.codec}]`),l&&l.split(",").length===1&&(i.levelCodec=l),this.hls.trigger(Se.BUFFER_CODECS,t);const c=i.initSegment;if(c!=null&&c.byteLength){const f={type:"audio",frag:n,part:null,chunkMeta:r,parent:n.type,data:c};this.hls.trigger(Se.BUFFER_APPENDING,f)}this.tickImmediate()}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);if(this.switchingTrack||r===bi.NOT_LOADED||r===bi.PARTIAL){var i;if(!gi(e))this._loadInitSegment(e,t);else if((i=t.details)!=null&&i.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=Wt.WAITING_INIT_PTS;const l=this.mainDetails;l&&l.fragmentStart!==t.details.fragmentStart&&Zh(t.details,l)}else super.loadFragment(e,t,n)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:n,assocLang:r,characteristics:i,audioCodec:l,channels:c}=this.bufferedTrack;Fl({name:t,lang:n,assocLang:r,characteristics:i,audioCodec:l,channels:c},e,Ml)||(Yh(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(Se.AUDIO_TRACK_SWITCHED,Mr({},e))}}class Fp extends Ha{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const r=t==null?void 0:t.renditionReports;if(r){let i=-1;for(let l=0;l<r.length;l++){const c=r[l];let f;try{f=new self.URL(c.URI,t.url).href}catch(h){this.warn(`Could not construct new URL for Rendition Report: ${h}`),f=c.URI||""}if(f===e){i=l;break}else f===e.substring(0,f.length)&&(i=l)}if(i!==-1){const l=r[i],c=parseInt(l["LAST-MSN"])||t.lastPartSn;let f=parseInt(l["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const g=Math.min(t.age-t.partTarget,t.targetduration);f>=0&&g>t.partTarget&&(f+=1)}const h=n&&Hy(n);return new Vy(c,f>=0?f:void 0,h)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(n){this.warn(`Could not construct new URL with HLS Delivery Directives: ${n}`)}return e}playlistLoaded(e,t,n){const{details:r,stats:i}=t,l=self.performance.now(),c=i.loading.first?Math.max(0,l-i.loading.first):0;r.advancedDateTime=Date.now()-c;const f=this.hls.config.timelineOffset;if(f!==r.appliedTimelineOffset){const g=Math.max(f||0,0);r.appliedTimelineOffset=g,r.fragments.forEach(p=>{p.setStart(p.playlistOffset+g)})}if(r.live||n!=null&&n.live){const g="levelInfo"in t?t.levelInfo:t.track;if(r.reloaded(n),n&&r.fragments.length>0){Vw(n,r,this);const Y=r.playlistParsingError;if(Y){this.warn(Y);const Z=this.hls;if(!Z.config.ignorePlaylistParsingErrors){var h;const{networkDetails:ye}=t;Z.trigger(Se.ERROR,{type:Gn.NETWORK_ERROR,details:wt.LEVEL_PARSING_ERROR,fatal:!1,url:r.url,error:Y,reason:Y.message,level:t.level||void 0,parent:(h=r.fragments[0])==null?void 0:h.type,networkDetails:ye,stats:i});return}r.playlistParsingError=null}}r.requestScheduled===-1&&(r.requestScheduled=i.loading.start);const p=this.hls.mainForwardBufferInfo,y=p?p.end-p.len:0,T=(r.edge-y)*1e3,b=dE(r,T);if(r.requestScheduled+b<l?r.requestScheduled=l:r.requestScheduled+=b,this.log(`live playlist ${e} ${r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED"}`),!this.canLoad||!r.live)return;let w,R,M;if(r.canBlockReload&&r.endSN&&r.advanced){const Y=this.hls.config.lowLatencyMode,Z=r.lastPartSn,ye=r.endSN,Re=r.lastPartIndex,F=Re!==-1,k=Z===ye;F?k?(R=ye+1,M=Y?0:Re):(R=Z,M=Y?Re+1:r.maxPartIndex):R=ye+1;const j=r.age,oe=j+r.ageHeader;let L=Math.min(oe-r.partTarget,r.targetduration*1.5);if(L>0){if(oe>r.targetduration*3)this.log(`Playlist last advanced ${j.toFixed(2)}s ago. Omitting segment and part directives.`),R=void 0,M=void 0;else if(n!=null&&n.tuneInGoal&&oe-r.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${L} with playlist age: ${r.age}`),L=0;else{const Ee=Math.floor(L/r.targetduration);if(R+=Ee,M!==void 0){const Be=Math.round(L%r.targetduration/r.partTarget);M+=Be}this.log(`CDN Tune-in age: ${r.ageHeader}s last advanced ${j.toFixed(2)}s goal: ${L} skip sn ${Ee} to part ${M}`)}r.tuneInGoal=L}if(w=this.getDeliveryDirectives(r,t.deliveryDirectives,R,M),Y||!k){r.requestScheduled=l,this.loadingPlaylist(g,w);return}}else(r.canBlockReload||r.canSkipUntil)&&(w=this.getDeliveryDirectives(r,t.deliveryDirectives,R,M));w&&R!==void 0&&r.canBlockReload&&(r.requestScheduled=i.loading.first+Math.max(b-c*2,b/2)),this.scheduleLoading(g,w,r)}else this.clearTimer()}scheduleLoading(e,t,n){const r=n||e.details;if(!r){this.loadingPlaylist(e,t);return}const i=self.performance.now(),l=r.requestScheduled;if(i>=l){this.loadingPlaylist(e,t);return}const c=l-i;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(c)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),c)}getDeliveryDirectives(e,t,n,r){let i=Hy(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,r=t.part,i=Mh.No),new Vy(n,r,i)}checkRetry(e){const t=e.details,n=Wh(e),r=e.errorAction,{action:i,retryCount:l=0,retryConfig:c}=r||{},f=!!r&&!!c&&(i===Li.RetryRequest||!r.resolved&&i===Li.SendAlternateToPenaltyBox);if(f){var h;if(l>=c.maxNumRetry)return!1;if(n&&(h=e.context)!=null&&h.deliveryDirectives)this.warn(`Retrying playlist loading ${l+1}/${c.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const g=xp(c,l);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),g),this.warn(`Retrying playlist loading ${l+1}/${c.maxNumRetry} after "${t}" in ${g}ms`)}e.levelRetry=!0,r.resolved=!0}return f}}function FE(o,e){if(o.length!==e.length)return!1;for(let t=0;t<o.length;t++)if(!Gd(o[t].attrs,e[t].attrs))return!1;return!0}function Gd(o,e,t){const n=o["STABLE-RENDITION-ID"];return n&&!t?n===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(r=>o[r]!==e[r])}function tp(o,e){return e.label.toLowerCase()===o.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(o.lang||"").toLowerCase())}class tA extends Fp{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Se.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Se.LEVEL_LOADING,this.onLevelLoading,this),e.on(Se.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Se.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(Se.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Se.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Se.LEVEL_LOADING,this.onLevelLoading,this),e.off(Se.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Se.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(Se.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:r,details:i}=t,l=this.tracksInGroup[n];if(!l||l.groupId!==r){this.warn(`Audio track with id:${n} and group:${r} not found in active group ${l==null?void 0:l.groupId}`);return}const c=l.details;l.details=t.details,this.log(`Audio track ${n} "${l.name}" lang:${l.lang} group:${r} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,c)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,r=this.groupIds;let i=this.currentTrack;if(!n||(r==null?void 0:r.length)!==(n==null?void 0:n.length)||n!=null&&n.some(c=>(r==null?void 0:r.indexOf(c))===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const c=this.tracks.filter(y=>!n||n.indexOf(y.groupId)!==-1);if(c.length)this.selectDefaultTrack&&!c.some(y=>y.default)&&(this.selectDefaultTrack=!1),c.forEach((y,T)=>{y.id=T});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=c;const f=this.hls.config.audioPreference;if(!i&&f){const y=Rs(f,c,Ml);if(y>-1)i=c[y];else{const T=Rs(f,this.tracks);i=this.tracks[T]}}let h=this.findTrackId(i);h===-1&&i&&(h=this.findTrackId(null));const g={audioTracks:c};this.log(`Updating audio tracks, ${c.length} track(s) found in group(s): ${n==null?void 0:n.join(",")}`),this.hls.trigger(Se.AUDIO_TRACKS_UPDATED,g);const p=this.trackId;if(h!==-1&&p===-1)this.setAudioTrack(h);else if(c.length&&p===-1){var l;const y=new Error(`No audio track selected for current audio group-ID(s): ${(l=this.groupIds)==null?void 0:l.join(",")} track count: ${c.length}`);this.warn(y.message),this.hls.trigger(Se.ERROR,{type:Gn.MEDIA_ERROR,details:wt.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:y})}}}onError(e,t){t.fatal||!t.context||t.context.type===mr.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&Fl(e,r,Ml))return r;const i=Rs(e,this.tracksInGroup,Ml);if(i>-1){const l=this.tracksInGroup[i];return this.setAudioTrack(i),l}else if(r){let l=t.loadLevel;l===-1&&(l=t.firstAutoLevel);const c=dw(e,t.levels,n,l,Ml);if(c===-1)return null;t.nextLoadLevel=c}if(e.channels||e.audioCodec){const l=Rs(e,n);if(l>-1)return n[l]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e],i=r.details&&!r.details.live;if(e===this.trackId&&r===n&&i||(this.log(`Switching to audio-track ${e} "${r.name}" lang:${r.lang} group:${r.groupId} channels:${r.channels}`),this.trackId=e,this.currentTrack=r,this.hls.trigger(Se.AUDIO_TRACK_SWITCHING,Mr({},r)),i))return;const l=this.switchParams(r.url,n==null?void 0:n.details,r.details);this.loadPlaylist(l)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const r=t[n];if(!(this.selectDefaultTrack&&!r.default)&&(!e||Fl(e,r,Ml)))return n}if(e){const{name:n,lang:r,assocLang:i,characteristics:l,audioCodec:c,channels:f}=e;for(let h=0;h<t.length;h++){const g=t[h];if(Fl({name:n,lang:r,assocLang:i,characteristics:l,audioCodec:c,channels:f},g,Ml))return h}for(let h=0;h<t.length;h++){const g=t[h];if(Gd(e.attrs,g.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return h}for(let h=0;h<t.length;h++){const g=t[h];if(Gd(e.attrs,g.attrs,["LANGUAGE"]))return h}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&Yh(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,r=e.groupId,i=this.getUrlWithDirectives(e.url,t),l=e.details,c=l==null?void 0:l.age;this.log(`Loading audio-track ${n} "${e.name}" lang:${e.lang} group:${r}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${c&&l.live?" age "+c.toFixed(1)+(l.type&&" "+l.type||""):""} ${i}`),this.hls.trigger(Se.AUDIO_TRACK_LOADING,{url:i,id:n,groupId:r,deliveryDirectives:t||null,track:e})}}class nA{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,n){if(this.queues===null||this.tracks===null)return;const r=this.queues[t];r.push(e),r.length===1&&!n&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const n={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const n={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(n)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const n=(t=e[0])==null?void 0:t.label;(n==="async-blocker"||n==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const t=this.queues[e];if(t.length){const r=t[0];try{r.execute()}catch(i){var n;if(r.onError(i),this.queues===null||this.tracks===null)return;const l=(n=this.tracks[e])==null?void 0:n.buffer;l!=null&&l.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,n;return(t=this.queues)!=null&&t[e]||(n=this.tracks)!=null&&n[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const n=(t=this.tracks)==null?void 0:t[e],r=n==null?void 0:n.buffer;return r?`SourceBuffer${r.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(n=>n.label).join(", "))||""}}const R0=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,zE="HlsJsTrackRemovedError";class rA extends Error{constructor(e){super(e),this.name=zE}}class iA extends Ha{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=n=>{var r;this.hls&&((r=this.mediaSource)==null?void 0:r.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=n=>{const{media:r,mediaSource:i}=this;n&&this.log("Media source opened"),!(!r||!i)&&(i.removeEventListener("sourceopen",this._onMediaSourceOpen),r.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(Se.MEDIA_ATTACHED,{media:r,mediaSource:i}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:r}=this;n!==r&&this.error(`Media element src was set while attaching MediaSource (${r} > ${n})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=Ax(Ko(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(Se.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Se.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Se.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Se.BUFFER_RESET,this.onBufferReset,this),e.on(Se.BUFFER_APPENDING,this.onBufferAppending,this),e.on(Se.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Se.BUFFER_EOS,this.onBufferEos,this),e.on(Se.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Se.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Se.FRAG_PARSED,this.onFragParsed,this),e.on(Se.FRAG_CHANGED,this.onFragChanged,this),e.on(Se.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Se.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Se.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Se.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Se.BUFFER_RESET,this.onBufferReset,this),e.off(Se.BUFFER_APPENDING,this.onBufferAppending,this),e.off(Se.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Se.BUFFER_EOS,this.onBufferEos,this),e.off(Se.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Se.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Se.FRAG_PARSED,this.onFragParsed,this),e.off(Se.FRAG_CHANGED,this.onFragChanged,this),e.off(Se.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const n={};if(this.operationQueue){const i=this.isUpdating();i||this.operationQueue.removeBlockers();const l=this.isQueued();(i||l)&&this.warn(`Transfering MediaSource with${l?" operations in queue":""}${i?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const r=this.transferData;return!this.sourceBufferCount&&r&&r.mediaSource===t?Or(n,r.tracks):this.sourceBuffers.forEach(i=>{const[l]=i;l&&(n[l]=Or({},this.tracks[l]),this.removeBuffer(l)),i[0]=i[1]=null}),{media:e,mediaSource:t,tracks:n}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var n;let r=2;(t.audio&&!t.video||!t.altAudio)&&(r=1),this.bufferCodecEventsTotal=r,this.log(`${r} bufferCodec event(s) expected.`),(n=this.transferData)!=null&&n.mediaSource&&this.sourceBufferCount&&r&&this.bufferCreated()}onMediaAttaching(e,t){const n=this.media=t.media;this.transferData=this.overrides=void 0;const r=Ko(this.appendSource);if(r){const i=!!t.mediaSource;(i||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const l=this.mediaSource=t.mediaSource||new r;if(this.assignMediaSource(l),i)this._objectUrl=n.src,this.attachTransferred();else{const c=this._objectUrl=self.URL.createObjectURL(l);if(this.appendSource)try{n.removeAttribute("src");const f=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||f&&l instanceof f,C0(n),aA(n,c),n.load()}catch{n.src=c}else n.src=c}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,n;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(n=e.constructor)==null?void 0:n.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const n=this.tracks,r=t.tracks,i=r?Object.keys(r):null,l=i?i.length:0,c=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(r&&i&&l){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${Kr(n,(f,h)=>f==="initSegment"?void 0:h)};
transfer tracks: ${Kr(r,(f,h)=>f==="initSegment"?void 0:h)}}`),!Uv(r,n)){t.mediaSource=null,t.tracks=void 0;const f=e.currentTime,h=this.details,g=Math.max(f,(h==null?void 0:h.fragments[0].start)||0);if(g-f>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${f} -> ${g}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(r)}"->"${Object.keys(n)}") start time: ${g} currentTime: ${f}`),this.onMediaDetaching(Se.MEDIA_DETACHING,{}),this.onMediaAttaching(Se.MEDIA_ATTACHING,t),e.currentTime=g;return}this.transferData=void 0,i.forEach(f=>{const h=f,g=r[h];if(g){const p=g.buffer;if(p){const y=this.fragmentTracker,T=g.id;if(y.hasFragments(T)||y.hasParts(T)){const R=tr.getBuffered(p);y.detectEvictedFragments(h,R,T,null,!0)}const b=mm(h),w=[h,p];this.sourceBuffers[b]=w,p.updating&&this.operationQueue&&this.operationQueue.prependBlocker(h),this.trackSourceBuffer(h,g)}}}),c(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),c()}get mediaSourceOpenOrEnded(){var e;const t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){const n=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:r,mediaSource:i,_objectUrl:l}=this;if(i){if(this.log(`media source ${n?"transferring":"detaching"}`),n)this.sourceBuffers.forEach(([c])=>{c&&this.removeBuffer(c)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const c=i.readyState==="open";try{const f=i.sourceBuffers;for(let h=f.length;h--;)c&&f[h].abort(),i.removeSourceBuffer(f[h]);c&&i.endOfStream()}catch(f){this.warn(`onMediaDetaching: ${f.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}i.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("sourceended",this._onMediaSourceEnded),i.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(i.removeEventListener("startstreaming",this._onStartStreaming),i.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}r&&(r.removeEventListener("emptied",this._onMediaEmptied),n||(l&&self.URL.revokeObjectURL(l),this.mediaSrc===l?(r.removeAttribute("src"),this.appendSource&&C0(r),r.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(Se.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const n=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),n)try{var r;(r=this.mediaSource)!=null&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(i){this.warn(`onBufferReset ${e}`,i)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[mm(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new nA(this.tracks)}onBufferCodecs(e,t){const n=this.tracks,r=Object.keys(t);this.log(`BUFFER_CODECS: "${r}" (current SB count ${this.sourceBufferCount})`);const i="audiovideo"in t&&(n.audio||n.video)||n.audiovideo&&("audio"in t||"video"in t),l=!i&&this.sourceBufferCount&&this.media&&r.some(c=>!n[c]);if(i||l){this.warn(`Unsupported transition between "${Object.keys(n)}" and "${r}" SourceBuffers`);return}r.forEach(c=>{var f,h;const g=t[c],{id:p,codec:y,levelCodec:T,container:b,metadata:w,supplemental:R}=g;let M=n[c];const Y=(f=this.transferData)==null||(f=f.tracks)==null?void 0:f[c],Z=Y!=null&&Y.buffer?Y:M,ye=(Z==null?void 0:Z.pendingCodec)||(Z==null?void 0:Z.codec),Re=Z==null?void 0:Z.levelCodec;M||(M=n[c]={buffer:void 0,listeners:[],codec:y,supplemental:R,container:b,levelCodec:T,metadata:w,id:p});const F=Ph(ye,Re),k=F==null?void 0:F.replace(R0,"$1");let j=Ph(y,T);const oe=(h=j)==null?void 0:h.replace(R0,"$1");j&&F&&k!==oe&&(c.slice(0,5)==="audio"&&(j=Vh(j,this.appendSource)),this.log(`switching codec ${ye} to ${j}`),j!==(M.pendingCodec||M.codec)&&(M.pendingCodec=j),M.container=b,this.appendChangeType(c,b,j))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&this.mediaSourceOpenOrEnded&&this.checkPendingTracks()}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const n=this.tracks[t];return e[t]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},e},{})}appendChangeType(e,t,n){const r=`${t};codecs=${n}`,i={label:`change-type=${r}`,execute:()=>{const l=this.tracks[e];if(l){const c=l.buffer;c!=null&&c.changeType&&(this.log(`changing ${e} sourceBuffer type to ${r}`),c.changeType(r),l.codec=n,l.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:l=>{this.warn(`Failed to change ${e} SourceBuffer type`,l)}};this.append(i,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const n=e.start,r=n+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(n,Fn.MAIN))==null?void 0:t.gap)===!0)return;const l={label:"block-audio",execute:()=>{var c;const f=this.tracks.video;(this.lastVideoAppendEnd>r||f!=null&&f.buffer&&tr.isBuffered(f.buffer,r)||((c=this.fragmentTracker.getAppendedFrag(r,Fn.MAIN))==null?void 0:c.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:c=>{this.warn("Error executing block-audio operation",c)}};this.blockedAudioAppend={op:l,frag:e},this.append(l,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:n}=this,{data:r,type:i,parent:l,frag:c,part:f,chunkMeta:h,offset:g}=t,p=h.buffering[i],{sn:y,cc:T}=c,b=self.performance.now();p.start=b;const w=c.stats.buffering,R=f?f.stats.buffering:null;w.start===0&&(w.start=b),R&&R.start===0&&(R.start=b);const M=n.audio;let Y=!1;i==="audio"&&(M==null?void 0:M.container)==="audio/mpeg"&&(Y=!this.lastMpegAudioChunk||h.id===1||this.lastMpegAudioChunk.sn!==h.sn,this.lastMpegAudioChunk=h);const Z=n.video,ye=Z==null?void 0:Z.buffer;if(ye&&y!=="initSegment"){const k=f||c,j=this.blockedAudioAppend;if(i==="audio"&&l!=="main"&&!this.blockedAudioAppend&&!(Z.ending||Z.ended)){const L=k.start+k.duration*.05,Ee=ye.buffered,Be=this.currentOp("video");!Ee.length&&!Be?this.blockAudio(k):!Be&&!tr.isBuffered(ye,L)&&this.lastVideoAppendEnd<L&&this.blockAudio(k)}else if(i==="video"){const oe=k.end;if(j){const L=j.frag.start;(oe>L||oe<this.lastVideoAppendEnd||tr.isBuffered(ye,L))&&this.unblockAudio()}this.lastVideoAppendEnd=oe}}const Re=(f||c).start,F={label:`append-${i}`,execute:()=>{var k;p.executeStart=self.performance.now();const j=(k=this.tracks[i])==null?void 0:k.buffer;j&&(Y?this.updateTimestampOffset(j,Re,.1,i,y,T):g!==void 0&&Dn(g)&&this.updateTimestampOffset(j,g,1e-6,i,y,T)),this.appendExecutor(r,i)},onStart:()=>{},onComplete:()=>{const k=self.performance.now();p.executeEnd=p.end=k,w.first===0&&(w.first=k),R&&R.first===0&&(R.first=k);const j={};this.sourceBuffers.forEach(([oe,L])=>{oe&&(j[oe]=tr.getBuffered(L))}),this.appendErrors[i]=0,i==="audio"||i==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(Se.BUFFER_APPENDED,{type:i,frag:c,part:f,chunkMeta:h,parent:c.type,timeRanges:j})},onError:k=>{var j;const oe={type:Gn.MEDIA_ERROR,parent:c.type,details:wt.BUFFER_APPEND_ERROR,sourceBufferName:i,frag:c,part:f,chunkMeta:h,error:k,err:k,fatal:!1},L=(j=this.media)==null?void 0:j.error;if(k.code===DOMException.QUOTA_EXCEEDED_ERR||k.name=="QuotaExceededError"||"quota"in k)oe.details=wt.BUFFER_FULL_ERROR;else if(k.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!L)oe.errorAction=nc(!0);else if(k.name===zE&&this.sourceBufferCount===0)oe.errorAction=nc(!0);else{const Ee=++this.appendErrors[i];this.warn(`Failed ${Ee}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${i}" sourceBuffer (${L||"no media error"})`),(Ee>=this.hls.config.appendErrorMaxRetry||L)&&(oe.fatal=!0)}this.hls.trigger(Se.ERROR,oe)}};this.append(F,i,this.isPending(this.tracks[i]))}getFlushOp(e,t,n){return this.log(`queuing "${e}" remove ${t}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(Se.BUFFER_FLUSHED,{type:e})},onError:r=>{this.warn(`Failed to remove ${t}-${n} from "${e}" SourceBuffer`,r)}}}onBufferFlushing(e,t){const{type:n,startOffset:r,endOffset:i}=t;n?this.append(this.getFlushOp(n,r,i),n):this.sourceBuffers.forEach(([l])=>{l&&this.append(this.getFlushOp(l,r,i),l)})}onFragParsed(e,t){const{frag:n,part:r}=t,i=[],l=r?r.elementaryStreams:n.elementaryStreams;l[Br.AUDIOVIDEO]?i.push("audiovideo"):(l[Br.AUDIO]&&i.push("audio"),l[Br.VIDEO]&&i.push("video"));const c=()=>{const f=self.performance.now();n.stats.buffering.end=f,r&&(r.stats.buffering.end=f);const h=r?r.stats:n.stats;this.hls.trigger(Se.FRAG_BUFFERED,{frag:n,part:r,stats:h,id:n.type})};i.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(c,i).catch(f=>{this.warn(`Fragment buffered callback ${f}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const t=this.tracks[e];if(t)return!t.ended||t.ending}return!1})}onBufferEos(e,t){var n;this.sourceBuffers.forEach(([l])=>{if(l){const c=this.tracks[l];(!t.type||t.type===l)&&(c.ending=!0,c.ended||(c.ended=!0,this.log(`${l} buffer reached EOS`)))}});const r=((n=this.overrides)==null?void 0:n.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([l])=>{var c;return l&&!((c=this.tracks[l])!=null&&c.ended)})?r?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:l}=this;if(!l||l.readyState!=="open"){l&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${l.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),l.endOfStream(),this.hls.trigger(Se.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(Se.BUFFERED_TO_END,void 0)):t.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===wt.BUFFER_APPEND_ERROR&&t.frag){var n;const r=(n=t.errorAction)==null?void 0:n.nextAutoLevel;Dn(r)&&r!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||t===null||!this.sourceBufferCount)return;const r=e.config,i=n.currentTime,l=t.levelTargetDuration,c=t.live&&r.liveBackBufferLength!==null?r.liveBackBufferLength:r.backBufferLength;if(Dn(c)&&c>=0){const h=Math.max(c,l),g=Math.floor(i/l)*l-h;this.flushBackBuffer(i,l,g)}const f=r.frontBufferFlushThreshold;if(Dn(f)&&f>0){const h=Math.max(r.maxBufferLength,f),g=Math.max(h,l),p=Math.floor(i/l)*l+g;this.flushFrontBuffer(i,l,p)}}flushBackBuffer(e,t,n){this.sourceBuffers.forEach(([r,i])=>{if(i){const c=tr.getBuffered(i);if(c.length>0&&n>c.start(0)){var l;this.hls.trigger(Se.BACK_BUFFER_REACHED,{bufferEnd:n});const f=this.tracks[r];if((l=this.details)!=null&&l.live)this.hls.trigger(Se.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(f!=null&&f.ended){this.log(`Cannot flush ${r} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(Se.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:r})}}})}flushFrontBuffer(e,t,n){this.sourceBuffers.forEach(([r,i])=>{if(i){const l=tr.getBuffered(i),c=l.length;if(c<2)return;const f=l.start(c-1),h=l.end(c-1);if(n>f||e>=f&&e<=h)return;this.hls.trigger(Se.BUFFER_FLUSHING,{startOffset:f,endOffset:1/0,type:r})}})}getDurationAndRange(){var e;const{details:t,mediaSource:n}=this;if(!t||!this.media||(n==null?void 0:n.readyState)!=="open")return null;const r=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&n.setLiveSeekableRange){const h=Math.max(0,t.fragmentStart),g=Math.max(h,r);return{duration:1/0,start:h,end:g}}return{duration:1/0}}const i=(e=this.overrides)==null?void 0:e.duration;if(i)return Dn(i)?{duration:i}:null;const l=this.media.duration,c=Dn(n.duration)?n.duration:0;return r>c&&r>l||!Dn(l)?{duration:r}:null}updateMediaSource({duration:e,start:t,end:n}){const r=this.mediaSource;!this.media||!r||r.readyState!=="open"||(r.duration!==e&&(Dn(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),r.duration=e),t!==void 0&&n!==void 0&&(this.log(`MediaSource duration is set to ${r.duration}. Setting seekable range to ${t}-${n}.`),r.setLiveSeekableRange(t,n)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${Kr(n)}`),this.tracksReady){var r;const i=(r=this.transferData)==null?void 0:r.tracks;i&&Object.keys(i).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,n])=>{if(t){const r=this.tracks[t];e[t]={buffer:n,container:r.container,codec:r.codec,supplemental:r.supplemental,levelCodec:r.levelCodec,id:r.id,metadata:r.metadata}}}),this.hls.trigger(Se.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(Se.ERROR,{type:Gn.MEDIA_ERROR,details:wt.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const i in e){const l=i,c=e[l];if(this.isPending(c)){const f=this.getTrackCodec(c,l),h=`${c.container};codecs=${f}`;c.codec=f,this.log(`creating sourceBuffer(${h})${this.currentOp(l)?" Queued":""} ${Kr(c)}`);try{const g=n.addSourceBuffer(h),p=mm(l),y=[l,g];t[p]=y,c.buffer=g}catch(g){var r;this.error(`error while trying to add sourceBuffer: ${g.message}`),this.shiftAndExecuteNext(l),(r=this.operationQueue)==null||r.removeBlockers(),delete this.tracks[l],this.hls.trigger(Se.ERROR,{type:Gn.MEDIA_ERROR,details:wt.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:g,sourceBufferName:l,mimeType:h,parent:c.id});return}this.trackSourceBuffer(l,c)}}this.bufferCreated()}getTrackCodec(e,t){const n=e.supplemental;let r=e.codec;n&&(t==="video"||t==="audiovideo")&&Hm(n,"video")&&(r=Vx(r,n));const i=Ph(r,e.levelCodec);return i?t.slice(0,5)==="audio"?Vh(i,this.appendSource):i:""}trackSourceBuffer(e,t){const n=t.buffer;if(!n)return;const r=this.getTrackCodec(t,e);this.tracks[e]={buffer:n,codec:r,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(i,l)=>{const c=l.removedRanges;c!=null&&c.length&&this.hls.trigger(Se.BUFFER_FLUSHED,{type:i})})}get mediaSrc(){var e,t;const n=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return n==null?void 0:n.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const n=this.currentOp(e);n&&(n.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var n;const r=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${r}`,t),this.hls.trigger(Se.ERROR,{type:Gn.MEDIA_ERROR,details:wt.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:r,fatal:!1});const i=this.currentOp(e);i&&i.onError(r)}updateTimestampOffset(e,t,n,r,i,l){const c=t-e.timestampOffset;Math.abs(c)>=n&&(this.log(`Updating ${r} SourceBuffer timestampOffset to ${t} (sn: ${i} cc: ${l})`),e.timestampOffset=t)}removeExecutor(e,t,n){const{media:r,mediaSource:i}=this,l=this.tracks[e],c=l==null?void 0:l.buffer;if(!r||!i||!c){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const f=Dn(r.duration)?r.duration:1/0,h=Dn(i.duration)?i.duration:1/0,g=Math.max(0,t),p=Math.min(n,f,h);p>g&&(!l.ending||l.ended)?(l.ended=!1,this.log(`Removing [${g},${p}] from the ${e} SourceBuffer`),c.remove(g,p)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.tracks[t],r=n==null?void 0:n.buffer;if(!r)throw new rA(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,r.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:n}=this,r=t.map(l=>this.appendBlocker(l));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(r).then(l=>{n===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var n;const r=(n=this.tracks[t])==null?void 0:n.buffer;!r||r.updating||this.shiftAndExecuteNext(t)})}append(e,t,n){this.operationQueue&&this.operationQueue.append(e,t,n)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,n){const r=this.tracks[e];if(!r)return;const i=r.buffer;if(!i)return;const l=n.bind(this,e);r.listeners.push({event:t,listener:l}),i.addEventListener(t,l)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const n=t.buffer;n&&(t.listeners.forEach(r=>{n.removeEventListener(r.event,r.listener)}),t.listeners.length=0)}}function C0(o){const e=o.querySelectorAll("source");[].slice.call(e).forEach(t=>{o.removeChild(t)})}function aA(o,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,o.appendChild(t)}function mm(o){return o==="audio"?1:0}class zp{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(Se.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(Se.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Se.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Se.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Se.BUFFER_CODECS,this.onBufferCodecs,this),e.on(Se.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(Se.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(Se.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Se.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Se.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Se.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Se.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&Dn(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter((r,i)=>this.isLevelAllowed(r)&&i<=e);return this.clientRect=null,zp.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,!t.width&&!t.height&&(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,t,n){if(!(e!=null&&e.length))return-1;const r=(c,f)=>f?c.width!==f.width||c.height!==f.height:!0;let i=e.length-1;const l=Math.max(t,n);for(let c=0;c<e.length;c+=1){const f=e[c];if((f.width>=l||f.height>=l)&&r(f,e[c+1])){i=c;break}}return i}}const sA={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},sa=sA,oA={HLS:"h"},lA=oA;class Ns{constructor(e,t){Array.isArray(e)&&(e=e.map(n=>n instanceof Ns?n:new Ns(n))),this.value=e,this.params=t}}const uA="Dict";function cA(o){return Array.isArray(o)?JSON.stringify(o):o instanceof Map?"Map{}":o instanceof Set?"Set{}":typeof o=="object"?JSON.stringify(o):String(o)}function dA(o,e,t,n){return new Error(`failed to ${o} "${cA(e)}" as ${t}`,{cause:n})}function Ds(o,e,t){return dA("serialize",o,e,t)}class UE{constructor(e){this.description=e}}const N0="Bare Item",fA="Boolean";function hA(o){if(typeof o!="boolean")throw Ds(o,fA);return o?"?1":"?0"}function gA(o){return btoa(String.fromCharCode(...o))}const mA="Byte Sequence";function pA(o){if(ArrayBuffer.isView(o)===!1)throw Ds(o,mA);return`:${gA(o)}:`}const yA="Integer";function vA(o){return o<-999999999999999||999999999999999<o}function BE(o){if(vA(o))throw Ds(o,yA);return o.toString()}function EA(o){return`@${BE(o.getTime()/1e3)}`}function jE(o,e){if(o<0)return-jE(-o,e);const t=Math.pow(10,e);if(Math.abs(o*t%1-.5)<Number.EPSILON){const r=Math.floor(o*t);return(r%2===0?r:r+1)/t}else return Math.round(o*t)/t}const bA="Decimal";function TA(o){const e=jE(o,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Ds(o,bA);const t=e.toString();return t.includes(".")?t:`${t}.0`}const SA="String",_A=/[\x00-\x1f\x7f]+/;function xA(o){if(_A.test(o))throw Ds(o,SA);return`"${o.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function wA(o){return o.description||o.toString().slice(7,-1)}const IA="Token";function D0(o){const e=wA(o);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw Ds(e,IA);return e}function np(o){switch(typeof o){case"number":if(!Dn(o))throw Ds(o,N0);return Number.isInteger(o)?BE(o):TA(o);case"string":return xA(o);case"symbol":return D0(o);case"boolean":return hA(o);case"object":if(o instanceof Date)return EA(o);if(o instanceof Uint8Array)return pA(o);if(o instanceof UE)return D0(o);default:throw Ds(o,N0)}}const AA="Key";function rp(o){if(/^[a-z*][a-z0-9\-_.*]*$/.test(o)===!1)throw Ds(o,AA);return o}function Up(o){return o==null?"":Object.entries(o).map(([e,t])=>t===!0?`;${rp(e)}`:`;${rp(e)}=${np(t)}`).join("")}function qE(o){return o instanceof Ns?`${np(o.value)}${Up(o.params)}`:np(o)}function kA(o){return`(${o.value.map(qE).join(" ")})${Up(o.params)}`}function RA(o,e={whitespace:!0}){if(typeof o!="object"||o==null)throw Ds(o,uA);const t=o instanceof Map?o.entries():Object.entries(o),n=e!=null&&e.whitespace?" ":"";return Array.from(t).map(([r,i])=>{i instanceof Ns||(i=new Ns(i));let l=rp(r);return i.value===!0?l+=Up(i.params):(l+="=",Array.isArray(i.value)?l+=kA(i):l+=qE(i)),l}).join(`,${n}`)}function GE(o,e){return RA(o,e)}const ws="CMCD-Object",ni="CMCD-Request",Ll="CMCD-Session",qo="CMCD-Status",CA={br:ws,ab:ws,d:ws,ot:ws,tb:ws,tpb:ws,lb:ws,tab:ws,lab:ws,url:ws,pb:ni,bl:ni,tbl:ni,dl:ni,ltc:ni,mtp:ni,nor:ni,nrr:ni,rc:ni,sn:ni,sta:ni,su:ni,ttfb:ni,ttfbb:ni,ttlb:ni,cmsdd:ni,cmsds:ni,smrt:ni,df:ni,cs:ni,ts:ni,cid:Ll,pr:Ll,sf:Ll,sid:Ll,st:Ll,v:Ll,msd:Ll,bs:qo,bsd:qo,cdn:qo,rtp:qo,bg:qo,pt:qo,ec:qo,e:qo},NA={REQUEST:ni};function DA(o){return Object.keys(o).reduce((e,t)=>{var n;return(n=o[t])===null||n===void 0||n.forEach(r=>e[r]=t),e},{})}function LA(o,e){const t={};if(!o)return t;const n=Object.keys(o),r=e?DA(e):{};return n.reduce((i,l)=>{var c;const f=CA[l]||r[l]||NA.REQUEST,h=(c=i[f])!==null&&c!==void 0?c:i[f]={};return h[l]=o[l],i},t)}function PA(o){return["ot","sf","st","e","sta"].includes(o)}function MA(o){return typeof o=="number"?Dn(o):o!=null&&o!==""&&o!==!1}const $E="event";function OA(o,e){const t=new URL(o),n=new URL(e);if(t.origin!==n.origin)return o;const r=t.pathname.split("/").slice(1),i=n.pathname.split("/").slice(1,-1);for(;r[0]===i[0];)r.shift(),i.shift();for(;i.length;)i.shift(),r.unshift("..");return r.join("/")+t.search+t.hash}const Uh=o=>Math.round(o),ip=(o,e)=>Array.isArray(o)?o.map(t=>ip(t,e)):o instanceof Ns&&typeof o.value=="string"?new Ns(ip(o.value,e),o.params):(e.baseUrl&&(o=OA(o,e.baseUrl)),e.version===1?encodeURIComponent(o):o),Sh=o=>Uh(o/100)*100,FA=(o,e)=>{let t=o;return e.version>=2&&(o instanceof Ns&&typeof o.value=="string"?t=new Ns([o]):typeof o=="string"&&(t=[o])),ip(t,e)},zA={br:Uh,d:Uh,bl:Sh,dl:Sh,mtp:Sh,nor:FA,rtp:Sh,tb:Uh},HE="request",VE="response",Bp=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],UA=["e"],BA=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function lg(o){return BA.test(o)}function jA(o){return Bp.includes(o)||UA.includes(o)||lg(o)}const KE=["d","dl","nor","ot","rtp","su"];function qA(o){return Bp.includes(o)||KE.includes(o)||lg(o)}const GA=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function $A(o){return Bp.includes(o)||KE.includes(o)||GA.includes(o)||lg(o)}const HA=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function VA(o){return HA.includes(o)||lg(o)}const KA={[VE]:$A,[$E]:jA,[HE]:qA};function YE(o,e={}){const t={};if(o==null||typeof o!="object")return t;const n=e.version||o.v||1,r=e.reportingMode||HE,i=n===1?VA:KA[r];let l=Object.keys(o).filter(i);const c=e.filter;typeof c=="function"&&(l=l.filter(c));const f=r===VE||r===$E;f&&!l.includes("ts")&&l.push("ts"),n>1&&!l.includes("v")&&l.push("v");const h=Or({},zA,e.formatters),g={version:n,reportingMode:r,baseUrl:e.baseUrl};return l.sort().forEach(p=>{let y=o[p];const T=h[p];if(typeof T=="function"&&(y=T(y,g)),p==="v"){if(n===1)return;y=n}p=="pr"&&y===1||(f&&p==="ts"&&!Dn(y)&&(y=Date.now()),MA(y)&&(PA(p)&&typeof y=="string"&&(y=new UE(y)),t[p]=y))}),t}function YA(o,e={}){const t={};if(!o)return t;const n=YE(o,e),r=LA(n,e==null?void 0:e.customHeaderMap);return Object.entries(r).reduce((i,[l,c])=>{const f=GE(c,{whitespace:!1});return f&&(i[l]=f),i},t)}function WA(o,e,t){return Or(o,YA(e,t))}const XA="CMCD";function QA(o,e={}){return o?GE(YE(o,e),{whitespace:!1}):""}function ZA(o,e={}){if(!o)return"";const t=QA(o,e);return encodeURIComponent(t)}function JA(o,e={}){if(!o)return"";const t=ZA(o,e);return`${XA}=${t}`}const L0=/CMCD=[^&#]+/;function ek(o,e,t){const n=JA(e,t);if(!n)return o;if(L0.test(o))return o.replace(L0,n);const r=o.includes("?")?"&":"?";return`${o}${r}${n}`}class tk{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=r=>{try{this.apply(r,{ot:sa.MANIFEST,su:!this.initialized})}catch(i){this.hls.logger.warn("Could not generate manifest CMCD data.",i)}},this.applyFragmentData=r=>{try{const{frag:i,part:l}=r,c=this.hls.levels[i.level],f=this.getObjectType(i),h={d:(l||i).duration*1e3,ot:f};(f===sa.VIDEO||f===sa.AUDIO||f==sa.MUXED)&&(h.br=c.bitrate/1e3,h.tb=this.getTopBandwidth(f)/1e3,h.bl=this.getBufferLength(f));const g=l?this.getNextPart(l):this.getNextFrag(i);g!=null&&g.url&&g.url!==i.url&&(h.nor=g.url),this.apply(r,h)}catch(i){this.hls.logger.warn("Could not generate segment CMCD data.",i)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;n!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(Se.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Se.MEDIA_DETACHED,this.onMediaDetached,this),e.on(Se.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(Se.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Se.MEDIA_DETACHED,this.onMediaDetached,this),e.off(Se.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,r;this.audioBuffer=(n=t.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(r=t.tracks.video)==null?void 0:r.buffer}createData(){var e;return{v:1,sf:lA.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){Or(t,this.createData());const n=t.ot===sa.INIT||t.ot===sa.VIDEO||t.ot===sa.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:r}=this;r&&(t=Object.keys(t).reduce((l,c)=>(r.includes(c)&&(l[c]=t[c]),l),{}));const i={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),WA(e.headers,t,i)):e.url=ek(e.url,t,i)}getNextFrag(e){var t;const n=(t=this.hls.levels[e.level])==null?void 0:t.details;if(n){const r=e.sn-n.startSN;return n.fragments[r+1]}}getNextPart(e){var t;const{index:n,fragment:r}=e,i=(t=this.hls.levels[r.level])==null||(t=t.details)==null?void 0:t.partList;if(i){const{sn:l}=r;for(let c=i.length-1;c>=0;c--){const f=i[c];if(f.index===n&&f.fragment.sn===l)return i[c+1]}}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return sa.TIMED_TEXT;if(e.sn==="initSegment")return sa.INIT;if(t==="audio")return sa.AUDIO;if(t==="main")return this.hls.audioTracks.length?sa.VIDEO:sa.MUXED}getTopBandwidth(e){let t=0,n;const r=this.hls;if(e===sa.AUDIO)n=r.audioTracks;else{const i=r.maxAutoLevel,l=i>-1?i+1:r.levels.length;n=r.levels.slice(0,l)}return n.forEach(i=>{i.bitrate>t&&(t=i.bitrate)}),t>0?t:NaN}getBufferLength(e){const t=this.media,n=e===sa.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!t?NaN:tr.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(i){this.loader=void 0,this.loader=new n(i)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(i,l,c){t(i),this.loader.load(i,l,c)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(i){this.loader=void 0,this.loader=new n(i)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(i,l,c){t(i),this.loader.load(i,l,c)}}}}const nk=3e5;class rk extends Ha{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Se.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Se.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Se.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Se.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Se.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Se.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if((n==null?void 0:n.action)===Li.SendAlternateToPenaltyBox&&n.flags===Ta.MoveAllAlternatesMatchingHost){const r=this.levels;let i=this._pathwayPriority,l=this.pathwayId;if(t.context){const{groupId:c,pathwayId:f,type:h}=t.context;c&&r?l=this.getPathwayForGroupId(c,h,l):f&&(l=f)}l in this.penalizedPathways||(this.penalizedPathways[l]=performance.now()),!i&&r&&(i=this.pathways()),i&&i.length>1&&(this.updatePathwayPriority(i),n.resolved=this.pathwayId!==l),t.details===wt.BUFFER_APPEND_ERROR&&!t.fatal?n.resolved=!0:n.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${l} levels: ${r&&r.length} priorities: ${Kr(i)} penalized: ${Kr(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t;const n=this.penalizedPathways,r=performance.now();Object.keys(n).forEach(i=>{r-n[i]>nk&&delete n[i]});for(let i=0;i<e.length;i++){const l=e[i];if(l in n)continue;if(l===this.pathwayId)return;const c=this.hls.nextLoadLevel,f=this.hls.levels[c];if(t=this.getLevelsForPathway(l),t.length>0){this.log(`Setting Pathway to "${l}"`),this.pathwayId=l,gE(t),this.hls.trigger(Se.LEVELS_UPDATED,{levels:t});const h=this.hls.levels[c];f&&h&&this.levels&&(h.attrs["STABLE-VARIANT-ID"]!==f.attrs["STABLE-VARIANT-ID"]&&h.bitrate!==f.bitrate&&this.log(`Unstable Pathways change from bitrate ${f.bitrate} to ${h.bitrate}`),this.hls.nextLoadLevel=c);break}}}getPathwayForGroupId(e,t,n){const r=this.getLevelsForPathway(n).concat(this.levels||[]);for(let i=0;i<r.length;i++)if(t===mr.AUDIO_TRACK&&r[i].hasAudioGroup(e)||t===mr.SUBTITLE_TRACK&&r[i].hasSubtitleGroup(e))return r[i].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},r={};e.forEach(i=>{const{ID:l,"BASE-ID":c,"URI-REPLACEMENT":f}=i;if(t.some(g=>g.pathwayId===l))return;const h=this.getLevelsForPathway(c).map(g=>{const p=new Jr(g.attrs);p["PATHWAY-ID"]=l;const y=p.AUDIO&&`${p.AUDIO}_clone_${l}`,T=p.SUBTITLES&&`${p.SUBTITLES}_clone_${l}`;y&&(n[p.AUDIO]=y,p.AUDIO=y),T&&(r[p.SUBTITLES]=T,p.SUBTITLES=T);const b=WE(g.uri,p["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",f),w=new Ud({attrs:p,audioCodec:g.audioCodec,bitrate:g.bitrate,height:g.height,name:g.name,url:b,videoCodec:g.videoCodec,width:g.width});if(g.audioGroups)for(let R=1;R<g.audioGroups.length;R++)w.addGroupId("audio",`${g.audioGroups[R]}_clone_${l}`);if(g.subtitleGroups)for(let R=1;R<g.subtitleGroups.length;R++)w.addGroupId("text",`${g.subtitleGroups[R]}_clone_${l}`);return w});t.push(...h),P0(this.audioTracks,n,f,l),P0(this.subtitleTracks,r,f,l)})}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;this.loader&&this.loader.destroy(),this.loader=new n(t);let r;try{r=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(r.protocol!=="data:"){const g=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;r.searchParams.set("_HLS_pathway",this.pathwayId),r.searchParams.set("_HLS_throughput",""+g)}const i={responseType:"json",url:r.href},l=t.steeringManifestLoadPolicy.default,c=l.errorRetry||l.timeoutRetry||{},f={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:c.maxNumRetry||0,retryDelay:c.retryDelayMs||0,maxRetryDelay:c.maxRetryDelayMs||0},h={onSuccess:(g,p,y,T)=>{this.log(`Loaded steering manifest: "${r}"`);const b=g.data;if((b==null?void 0:b.VERSION)!==1){this.log(`Steering VERSION ${b.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=b.TTL;const{"RELOAD-URI":w,"PATHWAY-CLONES":R,"PATHWAY-PRIORITY":M}=b;if(w)try{this.uri=new self.URL(w,r).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${w}`);return}this.scheduleRefresh(this.uri||y.url),R&&this.clonePathways(R);const Y={steeringManifest:b,url:r.toString()};this.hls.trigger(Se.STEERING_MANIFEST_LOADED,Y),M&&this.updatePathwayPriority(M)},onError:(g,p,y,T)=>{if(this.log(`Error loading steering manifest: ${g.code} ${g.text} (${p.url})`),this.stopLoad(),g.code===410){this.enabled=!1,this.log(`Steering manifest ${p.url} no longer available`);return}let b=this.timeToLoad*1e3;if(g.code===429){const w=this.loader;if(typeof(w==null?void 0:w.getResponseHeader)=="function"){const R=w.getResponseHeader("Retry-After");R&&(b=parseFloat(R)*1e3)}this.log(`Steering manifest ${p.url} rate limited`);return}this.scheduleRefresh(this.uri||p.url,b)},onTimeout:(g,p,y)=>{this.log(`Timeout loading steering manifest (${p.url})`),this.scheduleRefresh(this.uri||p.url)}};this.log(`Requesting steering manifest: ${r}`),this.loader.load(i,f,h)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const r=(n=this.hls)==null?void 0:n.media;if(r&&!r.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function P0(o,e,t,n){o&&Object.keys(e).forEach(r=>{const i=o.filter(l=>l.groupId===r).map(l=>{const c=Or({},l);return c.details=void 0,c.attrs=new Jr(c.attrs),c.url=c.attrs.URI=WE(l.url,l.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),c.groupId=c.attrs["GROUP-ID"]=e[r],c.attrs["PATHWAY-ID"]=n,c});o.push(...i)})}function WE(o,e,t,n){const{HOST:r,PARAMS:i,[t]:l}=n;let c;e&&(c=l==null?void 0:l[e],c&&(o=c));const f=new self.URL(o);return r&&!c&&(f.host=r),i&&Object.keys(i).sort().forEach(h=>{h&&f.searchParams.set(h,i[h])}),f.href}class ic extends Ha{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=ic.CDMCleanupPromise?[ic.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=t=>{const{initDataType:n,initData:r}=t,i=`"${t.type}" event: init data type: "${n}"`;if(this.debug(i),r!==null){if(!this.keyFormatPromise){let l=Object.keys(this.keySystemAccessPromises);l.length||(l=kd(this.config));const c=l.map(om).filter(f=>!!f);this.keyFormatPromise=this.getKeyFormatPromise(c)}this.keyFormatPromise.then(l=>{const c=Oh(l);if(n!=="sinf"||c!==ri.FAIRPLAY){this.log(`Ignoring "${t.type}" event with init data type: "${n}" for selected key-system ${c}`);return}let f;try{const T=Ei(new Uint8Array(r)),b=kp(JSON.parse(T).sinf),w=Kv(b);if(!w)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");f=new Uint8Array(w.subarray(8,24))}catch(T){this.warn(`${i} Failed to parse sinf: ${T}`);return}const h=Sa(f),{keyIdToKeySessionPromise:g,mediaKeySessions:p}=this;let y=g[h];for(let T=0;T<p.length;T++){const b=p[T],w=b.decryptdata;if(!w.keyId)continue;const R=Sa(w.keyId);if(h===R||w.uri.replace(/-/g,"").indexOf(h)!==-1){if(y=g[R],!y)continue;if(w.pssh)break;delete g[R],w.pssh=new Uint8Array(r),w.keyId=f,y=g[h]=y.then(()=>this.generateRequestWithPreferredKeySession(b,n,r,"encrypted-event-key-match")),y.catch(M=>this.handleError(M));break}}y||this.handleError(new Error(`Key ID ${h} not encountered in playlist. Key-system sessions ${p.length}.`))}).catch(l=>this.handleError(l))}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(Se.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Se.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(Se.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Se.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(Se.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(Se.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Se.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(Se.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(Se.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(Se.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,r=t==null?void 0:t[e];if(r)return r.licenseUrl;if(e===ri.WIDEVINE&&n)return n}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t==null?void 0:t[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(l,c,f)=>!!l&&f.indexOf(l)===c,r=t.map(l=>l.audioCodec).filter(n),i=t.map(l=>l.videoCodec).filter(n);return r.length+i.length===0&&i.push("avc1.42e01e"),new Promise((l,c)=>{const f=h=>{const g=h.shift();this.getMediaKeysPromise(g,r,i).then(p=>l({keySystem:g,mediaKeys:p})).catch(p=>{h.length?f(h):p instanceof ts?c(p):c(new ts({type:Gn.KEY_SYSTEM_ERROR,details:wt.KEY_SYSTEM_NO_ACCESS,error:p,fatal:!0},p.message))})};f(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let r=`Configured requestMediaKeySystemAccess is not a function ${n}`;return oE===null&&self.location.protocol==="http:"&&(r=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(r))}return n(e,t)}getMediaKeysPromise(e,t,n){var r;const i=Fw(e,t,n,this.config.drmSystemOptions||{});let l=this.keySystemAccessPromises[e],c=(r=l)==null?void 0:r.keySystemAccess;if(!c){this.log(`Requesting encrypted media "${e}" key-system access with config: ${Kr(i)}`),c=this.requestMediaKeySystemAccess(e,i);const f=l=this.keySystemAccessPromises[e]={keySystemAccess:c};return c.catch(h=>{this.log(`Failed to obtain access to key-system "${e}": ${h}`)}),c.then(h=>{this.log(`Access for key-system "${h.keySystem}" obtained`);const g=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const p=f.mediaKeys=h.createMediaKeys().then(y=>(this.log(`Media-keys created for "${e}"`),f.hasMediaKeys=!0,g.then(T=>T?this.setMediaKeysServerCertificate(y,e,T):y)));return p.catch(y=>{this.error(`Failed to create media-keys for "${e}"}: ${y}`)}),p})}return c.then(()=>l.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:n}){this.log(`Creating key-system session "${t}" keyId: ${Sa(e.keyId||[])}`);const r=n.createSession(),i={decryptdata:e,keySystem:t,mediaKeys:n,mediaKeysSession:r,keyStatus:"status-pending"};return this.mediaKeySessions.push(i),i}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),r=this.getKeyIdString(t),i="cenc";this.keyIdToKeySessionPromise[r]=this.generateRequestWithPreferredKeySession(n,i,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return Sa(e.keyId)}updateKeySession(e,t){const n=e.mediaKeysSession;return this.log(`Updating key-session "${n.sessionId}" for keyId ${Sa(e.decryptdata.keyId||[])}
      } (data length: ${t.byteLength})`),n.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>om(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:t,mediaKeys:n})=>this.attemptSetMediaKeys(t,n))}selectKeySystem(e){return new Promise((t,n)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:r})=>{const i=om(r);i?t(i):n(new Error(`Unable to find format for key-system "${r}"`))}).catch(n)})}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=kd(this.config),n=e.map(Oh).filter(r=>!!r&&t.indexOf(r)!==-1);return this.selectKeySystem(n)}loadKey(e){const t=e.keyInfo.decryptdata,n=this.getKeyIdString(t),r=this.bannedKeyIds[n];if(r){const c=M0(r,t);return this.handleError(c,e.frag),Promise.reject(c)}const i=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${i}`);const l=this.keyIdToKeySessionPromise[n];if(!l){const c=this.getKeySystemForKeyPromise(t).then(({keySystem:f,mediaKeys:h})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(f,h).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:f,mediaKeys:h,decryptdata:t}))))).then(f=>{const h="cenc",g=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(f,h,g,"playlist-key")});return c.catch(f=>this.handleError(f,e.frag)),this.keyIdToKeySessionPromise[n]=c,c}return l}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,t){this.hls&&(this.error(e.message),e instanceof ts?(t&&(e.data.frag=t),this.hls.trigger(Se.ERROR,e.data)):this.hls.trigger(Se.ERROR,{type:Gn.KEY_SYSTEM_ERROR,details:wt.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[t];if(!n){const r=Oh(e.keyFormat),i=r?[r]:kd(this.config);return this.attemptKeySystemAccess(i)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=kd(this.config)),e.length===0)throw new ts({type:Gn.KEY_SYSTEM_ERROR,details:wt.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Kr({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaKeys===t)return Promise.resolve();const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const r=Promise.all(n).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.mediaKeys=t,this.setMediaKeysQueue.push(r),r.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(r),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(i=>n.indexOf(i)===-1)})}generateRequestWithPreferredKeySession(e,t,n,r){var i;const l=(i=this.config.drmSystems)==null||(i=i[e.keySystem])==null?void 0:i.generateRequest;if(l)try{const y=l.call(this.hls,t,n,e);if(!y)throw new Error("Invalid response from configured generateRequest filter");t=y.initDataType,n=y.initData?y.initData:null,e.decryptdata.pssh=n?new Uint8Array(n):null}catch(y){if(this.warn(y.message),this.hls&&this.hls.config.debug)throw y}if(n===null)return this.log(`Skipping key-session request for "${r}" (no initData)`),Promise.resolve(e);const c=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${r}": ${c} (init data type: ${t} length: ${n.byteLength})`);const f=new Cp,h=e._onmessage=y=>{const T=e.mediaKeysSession;if(!T){f.emit("error",new Error("invalid state"));return}const{messageType:b,message:w}=y;this.log(`"${b}" message event for session "${T.sessionId}" message size: ${w.byteLength}`),b==="license-request"||b==="license-renewal"?this.renewLicense(e,w).catch(R=>{f.eventNames().length?f.emit("error",R):this.handleError(R)}):b==="license-release"?e.keySystem===ri.FAIRPLAY&&(this.updateKeySession(e,Xm("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${b}"`)},g=e._onkeystatuseschange=y=>{if(!e.mediaKeysSession){f.emit("error",new Error("invalid state"));return}const b=e.keyStatus;this.onKeyStatusChange(e);const w=e.keyStatus;w!==b&&(f.emit("keyStatus",w,e),w==="expired"&&(this.log(`${e.keySystem} expired for key ${c}`),this.renewKeySession(e)))};Wi(e.mediaKeysSession,"message",h),Wi(e.mediaKeysSession,"keystatuseschange",g);const p=new Promise((y,T)=>{f.on("error",T),f.on("keyStatus",(b,{decryptdata:w})=>{b.startsWith("usable")?y():b==="internal-error"||b==="output-restricted"?T(M0(b,w)):b==="expired"?T(new Error(`key expired while generating request (keyId: ${c})`)):this.warn(`unhandled key status change "${b}" (keyId: ${c})`)})});return e.mediaKeysSession.generateRequest(t,n).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${c}`)}).catch(y=>{throw new ts({type:Gn.KEY_SYSTEM_ERROR,details:wt.KEY_SYSTEM_NO_SESSION,error:y,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${y}`)}).then(()=>p).catch(y=>{throw f.removeAllListeners(),this.removeSession(e),y}).then(()=>(f.removeAllListeners(),e))}onKeyStatusChange(e){const t=Sa(new Uint8Array(e.decryptdata.keyId||[]));e.mediaKeysSession.keyStatuses.forEach((n,r)=>{if(typeof r=="string"&&typeof n=="object"){const c=r;r=n,n=c}const i=Sa("buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r));n==="internal-error"&&(this.bannedKeyIds[i]=n);const l=i===t;this.log(`${l?"":"un"}matched key status change "${n}" for keyStatuses keyId: ${i} session keyId: ${t} uri: ${e.decryptdata.uri}`),l&&(e.keyStatus=n)})}fetchServerCertificate(e){const t=this.config,n=t.loader,r=new n(t),i=this.getServerCertificateUrl(e);return i?(this.log(`Fetching server certificate for "${e}"`),new Promise((l,c)=>{const f={responseType:"arraybuffer",url:i},h=t.certLoadPolicy.default,g={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},p={onSuccess:(y,T,b,w)=>{l(y.data)},onError:(y,T,b,w)=>{c(new ts({type:Gn.KEY_SYSTEM_ERROR,details:wt.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:b,response:Mr({url:f.url,data:void 0},y)},`"${e}" certificate request failed (${i}). Status: ${y.code} (${y.text})`))},onTimeout:(y,T,b)=>{c(new ts({type:Gn.KEY_SYSTEM_ERROR,details:wt.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:b,response:{url:f.url,data:void 0}},`"${e}" certificate request timed out (${i})`))},onAbort:(y,T,b)=>{c(new Error("aborted"))}};r.load(f,g,p)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise((r,i)=>{e.setServerCertificate(n).then(l=>{this.log(`setServerCertificate ${l?"success":"not supported by CDM"} (${n.byteLength}) on "${t}"`),r(e)}).catch(l=>{i(new ts({type:Gn.KEY_SYSTEM_ERROR,details:wt.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:l,fatal:!0},l.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(r=>{throw new ts({type:Gn.KEY_SYSTEM_ERROR,details:wt.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:r,fatal:!1},r.message)}))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const r=new DOMParser().parseFromString(n,"application/xml"),i=r.querySelectorAll("HttpHeader");if(i.length>0){let g;for(let p=0,y=i.length;p<y;p++){var l,c;g=i[p];const T=(l=g.querySelector("name"))==null?void 0:l.textContent,b=(c=g.querySelector("value"))==null?void 0:c.textContent;T&&b&&e.setRequestHeader(T,b)}}const f=r.querySelector("Challenge"),h=f==null?void 0:f.textContent;if(!h)throw new Error("Cannot find <Challenge> in key message");return Xm(atob(h))}setupLicenseXHR(e,t,n,r){const i=this.config.licenseXhrSetup;return i?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return i.call(this.hls,e,t,n,r)}).catch(l=>{if(!n.decryptdata)throw l;return e.open("POST",t,!0),i.call(this.hls,e,t,n,r)}).then(l=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:l||r})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:r}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise((r,i)=>{const l=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${l}`);const c=new XMLHttpRequest;c.responseType="arraybuffer",c.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return i(new Error("invalid state"));if(c.readyState===4)if(c.status===200){this._requestLicenseFailureCount=0;let f=c.response;this.log(`License received ${f instanceof ArrayBuffer?f.byteLength:f}`);const h=this.config.licenseResponseCallback;if(h)try{f=h.call(this.hls,c,l,e)}catch(g){this.error(g)}r(f)}else{const f=n.errorRetry,h=f?f.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>h||c.status>=400&&c.status<500)i(new ts({type:Gn.KEY_SYSTEM_ERROR,details:wt.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:c,response:{url:l,data:void 0,code:c.status,text:c.statusText}},`License Request XHR failed (${l}). Status: ${c.status} (${c.statusText})`));else{const g=h-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${g} attempts left`),this.requestLicense(e,t).then(r,i)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=c,this.setupLicenseXHR(c,l,e,t).then(({xhr:f,licenseChallenge:h})=>{e.keySystem==ri.PLAYREADY&&(h=this.unpackPlayReadyKeyMessage(f,h)),f.send(h)}).catch(i)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,Wi(n,"encrypted",this.onMediaEncrypted),Wi(n,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(la(e,"encrypted",this.onMediaEncrypted),la(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const t=this.media,n=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,sg.clearKeyUriToKeyIdMap();const r=n.length;ic.CDMCleanupPromise=Promise.all(n.map(i=>this.removeSession(i)).concat(t==null||(e=t.setMediaKeys(null))==null?void 0:e.catch(i=>{this.log(`Could not clear media keys: ${i}`),this.hls&&this.hls.trigger(Se.ERROR,{type:Gn.OTHER_ERROR,details:wt.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${i}`)})}))).catch(i=>{this.log(`Could not close sessions and clear media keys: ${i}`),this.hls&&this.hls.trigger(Se.ERROR,{type:Gn.OTHER_ERROR,details:wt.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${i}`)})}).then(()=>{r&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null,this.bannedKeyIds={}}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=t.reduce((r,i)=>(r.indexOf(i.keyFormat)===-1&&r.push(i.keyFormat),r),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n,decryptdata:r}=e;if(t){this.log(`Remove licenses and keys and close session "${t.sessionId}" keyId: ${Sa((r==null?void 0:r.keyId)||[])}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);i>-1&&this.mediaKeySessions.splice(i,1);const{drmSystemOptions:l}=this.config;return(Uw(l)?new Promise((f,h)=>{self.setTimeout(()=>h(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(f).catch(h)}):Promise.resolve()).catch(f=>{this.log(`Could not remove session: ${f}`),this.hls&&this.hls.trigger(Se.ERROR,{type:Gn.OTHER_ERROR,details:wt.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${f}`)})}).then(()=>t.close()).catch(f=>{this.log(`Could not close session: ${f}`),this.hls&&this.hls.trigger(Se.ERROR,{type:Gn.OTHER_ERROR,details:wt.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${f}`)})})}}}ic.CDMCleanupPromise=void 0;class ts extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}function M0(o,e){const t=o==="output-restricted",n=t?wt.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:wt.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new ts({type:Gn.KEY_SYSTEM_ERROR,details:n,fatal:!1,decryptdata:e},t?"HDCP level output restricted":`key status changed to "${o}"`)}class ik{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(Se.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(Se.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(Se.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(Se.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const r=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=r,r&&typeof r.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,n){const r=performance.now();if(t){if(this.lastTime){const i=r-this.lastTime,l=n-this.lastDroppedFrames,c=t-this.lastDecodedFrames,f=1e3*l/i,h=this.hls;if(h.trigger(Se.FPS_DROP,{currentDropped:l,currentDecoded:c,totalDroppedFrames:n}),f>0&&l>h.config.fpsDroppedMonitoringThreshold*c){let g=h.currentLevel;h.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+g),g>0&&(h.autoLevelCapping===-1||h.autoLevelCapping>=g)&&(g=g-1,h.trigger(Se.FPS_DROP_LEVEL_CAPPING,{level:g,droppedLevel:h.currentLevel}),h.autoLevelCapping=g,this.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function XE(o,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=o,e.dispatchEvent(t)}function QE(o,e){const t=o.mode;if(t==="disabled"&&(o.mode="hidden"),o.cues&&!o.cues.getCueById(e.id))try{if(o.addCue(e),!o.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){Dr.debug(`[texttrack-utils]: ${n}`);try{const r=new self.TextTrackCue(e.startTime,e.endTime,e.text);r.id=e.id,o.addCue(r)}catch(r){Dr.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${r}`)}}t==="disabled"&&(o.mode=t)}function tc(o,e){const t=o.mode;if(t==="disabled"&&(o.mode="hidden"),o.cues)for(let n=o.cues.length;n--;)e&&o.cues[n].removeEventListener("enter",e),o.removeCue(o.cues[n]);t==="disabled"&&(o.mode=t)}function ap(o,e,t,n){const r=o.mode;if(r==="disabled"&&(o.mode="hidden"),o.cues&&o.cues.length>0){const i=sk(o.cues,e,t);for(let l=0;l<i.length;l++)(!n||n(i[l]))&&o.removeCue(i[l])}r==="disabled"&&(o.mode=r)}function ak(o,e){if(e<=o[0].startTime)return 0;const t=o.length-1;if(e>o[t].endTime)return-1;let n=0,r=t,i;for(;n<=r;)if(i=Math.floor((r+n)/2),e<o[i].startTime)r=i-1;else if(e>o[i].startTime&&n<t)n=i+1;else return i;return o[n].startTime-e<e-o[r].startTime?n:r}function sk(o,e,t){const n=[],r=ak(o,e);if(r>-1)for(let i=r,l=o.length;i<l;i++){const c=o[i];if(c.startTime>=e&&c.endTime<=t)n.push(c);else if(c.startTime>t)return n}return n}function Bh(o){const e=[];for(let t=0;t<o.length;t++){const n=o[t];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(o[t])}return e}class ok extends Fp{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const n=Bh(this.media.textTracks);for(let i=0;i<n.length;i++)if(n[i].mode==="hidden")t=n[i];else if(n[i].mode==="showing"){t=n[i];break}const r=this.findTrackForTextTrack(t);this.subtitleTrack!==r&&this.setSubtitleTrack(r)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(Se.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Se.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Se.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Se.LEVEL_LOADING,this.onLevelLoading,this),e.on(Se.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(Se.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Se.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(Se.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Se.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Se.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Se.LEVEL_LOADING,this.onLevelLoading,this),e.off(Se.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(Se.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Se.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const n=this.media;if(!n)return;const r=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,r)return;Bh(n.textTracks).forEach(l=>{tc(l)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:r,details:i}=t,l=this.tracksInGroup[n];if(!l||l.groupId!==r){this.warn(`Subtitle track with id:${n} and group:${r} not found in active group ${l==null?void 0:l.groupId}`);return}const c=l.details;l.details=t.details,this.log(`Subtitle track ${n} "${l.name}" lang:${l.lang} group:${r} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,c)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,r=this.groupIds;let i=this.currentTrack;if(!n||(r==null?void 0:r.length)!==(n==null?void 0:n.length)||n!=null&&n.some(l=>(r==null?void 0:r.indexOf(l))===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const l=this.tracks.filter(g=>!n||n.indexOf(g.groupId)!==-1);if(l.length)this.selectDefaultTrack&&!l.some(g=>g.default)&&(this.selectDefaultTrack=!1),l.forEach((g,p)=>{g.id=p});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=l;const c=this.hls.config.subtitlePreference;if(!i&&c){this.selectDefaultTrack=!1;const g=Rs(c,l);if(g>-1)i=l[g];else{const p=Rs(c,this.tracks);i=this.tracks[p]}}let f=this.findTrackId(i);f===-1&&i&&(f=this.findTrackId(null));const h={subtitleTracks:l};this.log(`Updating subtitle tracks, ${l.length} track(s) found in "${n==null?void 0:n.join(",")}" group-id`),this.hls.trigger(Se.SUBTITLE_TRACKS_UPDATED,h),f!==-1&&this.trackId===-1&&this.setSubtitleTrack(f)}}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let r=0;r<t.length;r++){const i=t[r];if(!(n&&!i.default||!n&&!e)&&(!e||Fl(i,e)))return r}if(e){for(let r=0;r<t.length;r++){const i=t[r];if(Gd(e.attrs,i.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return r}for(let r=0;r<t.length;r++){const i=t[r];if(Gd(e.attrs,i.attrs,["LANGUAGE"]))return r}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const r=t[n];if(tp(r,e))return n}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===mr.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&Fl(e,n))return n;const r=Rs(e,this.tracksInGroup);if(r>-1){const i=this.tracksInGroup[r];return this.setSubtitleTrack(r),i}else{if(n)return null;{const i=Rs(e,t);if(i>-1)return t[i]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,r=e.groupId,i=this.getUrlWithDirectives(e.url,t),l=e.details,c=l==null?void 0:l.age;this.log(`Loading subtitle ${n} "${e.name}" lang:${e.lang} group:${r}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${c&&l.live?" age "+c.toFixed(1)+(l.type&&" "+l.type||""):""} ${i}`),this.hls.trigger(Se.SUBTITLE_TRACK_LOADING,{url:i,id:n,groupId:r,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=Bh(e.textTracks),n=this.currentTrack;let r;if(n&&(r=t.filter(i=>tp(n,i))[0],r||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach(i=>{i.mode!=="disabled"&&i!==r&&(i.mode="disabled")}),r){const i=this.subtitleDisplay?"showing":"hidden";r.mode!==i&&(r.mode=i)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!Dn(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e]||null;if(this.trackId=e,this.currentTrack=r,this.toggleTrackModes(),!r){this.hls.trigger(Se.SUBTITLE_TRACK_SWITCH,{id:e});return}const i=!!r.details&&!r.details.live;if(e===this.trackId&&r===n&&i)return;this.log(`Switching to subtitle-track ${e}`+(r?` "${r.name}" lang:${r.lang} group:${r.groupId}`:""));const{id:l,groupId:c="",name:f,type:h,url:g}=r;this.hls.trigger(Se.SUBTITLE_TRACK_SWITCH,{id:l,groupId:c,name:f,type:h,url:g});const p=this.switchParams(r.url,n==null?void 0:n.details,r.details);this.loadPlaylist(p)}}function lk(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const i=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(r=="x"?i:i&3|8).toString(16)})}}}function Dd(o){let e=5381,t=o.length;for(;t;)e=e*33^o.charCodeAt(--t);return(e>>>0).toString()}const ac=.025;let eg=function(o){return o[o.Point=0]="Point",o[o.Range=1]="Range",o}({});function uk(o,e,t){return`${o.identifier}-${t+1}-${Dd(e)}`}class ck{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const n=this.playoutLimit;return e<=0||isNaN(n)?!1:n===0?!0:(((t=this.assetList[e])==null?void 0:t.startOffset)||0)>n}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return pm(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,n=pm(t,e);return t-n<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=Dn(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return pm(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<ac))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?eg.Range:eg.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return dk(this)}}function pm(o,e){return o-e.start<e.duration/2&&!(Math.abs(o-(e.start+e.duration))<ac)?e.start:e.start+e.duration}function ZE(o,e,t){const n=new self.URL(o,t);return n.protocol!=="data:"&&n.searchParams.set("_HLS_primary_id",e),n}function ym(o,e){for(;(t=o.assetList[++e])!=null&&t.error;)var t;return e}function dk(o){return`["${o.identifier}" ${o.cue.pre?"<pre>":o.cue.post?"<post>":""}${o.timelineStart.toFixed(2)}-${o.resumeTime.toFixed(2)}]`}function Ju(o){const e=o.timelineStart,t=o.duration||0;return`["${o.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}class fk{constructor(e,t,n,r){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(Se.PLAYOUT_LIMIT_REACHED,{})};const i=this.hls=new e(t);this.interstitial=n,this.assetItem=r;const l=()=>{this.hasDetails=!0};i.once(Se.LEVEL_LOADED,l),i.once(Se.AUDIO_TRACK_LOADED,l),i.once(Se.SUBTITLE_TRACK_LOADED,l),i.on(Se.MEDIA_ATTACHING,(c,{media:f})=>{this.removeMediaListeners(),this.mediaAttached=f,this.interstitial.playoutLimit&&(f.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&i.on(Se.BUFFER_APPENDED,()=>{const g=this.bufferedEnd;this.reachedPlayout(g)&&(this._bufferedEosTime=g,i.trigger(Se.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let t=this.assetItem.uri;try{t=ZE(t,e.config.primarySessionId||"").href}catch{}e.loadSource(t)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e)return!1;const n=Math.min(this._bufferedEosTime||1/0,this.duration),r=this.timelineOffset,i=tr.bufferInfo(e,r,0);return this.getAssetTime(i.end)>=n-.02}reachedPlayout(e){const n=this.interstitial.playoutLimit;return this.startOffset+e>=n}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=tr.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const t=this.interstitial.playoutLimit;if(t){const n=t-this.startOffset;if(n>0&&n<e)return n}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const n=e-t;if(Math.abs(n)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,e-t),n)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),(t=this.hls)==null||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=n=>delete n.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,n){var r;(r=this.hls)==null||r.on(e,t)}once(e,t,n){var r;(r=this.hls)==null||r.once(e,t)}off(e,t,n){var r;(r=this.hls)==null||r.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${Ju(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const O0=.033;class hk extends Ha{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((n,r)=>e<=r.startOffset&&t>r.startOffset?(delete r.error,n+1):n,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let n=-1;e.nextEvent?n=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(n=this.findEventIndex(e.previousEvent.identifier)+1);const r=this.items;if(r)for(r[n]||(t===void 0&&(t=e.start),n=this.findItemIndexAtTime(t));n>=0&&(i=r[n])!=null&&i.event;){var i;n--}return n}findItemIndexAtTime(e,t){const n=this.items;if(n)for(let r=0;r<n.length;r++){let i=n[r];if(t&&t!=="primary"&&(i=i[t]),e===i.start||e>i.start&&e<i.end)return r}return-1}findJumpRestrictedIndex(e,t){const n=this.items;if(n)for(let r=e;r<=t&&n[r];r++){const i=n[r].event;if(i!=null&&i.restrictions.jump&&!i.appendInPlace)return r}return-1}findEventIndex(e){const t=this.items;if(t)for(let r=t.length;r--;){var n;if(((n=t[r].event)==null?void 0:n.identifier)===e)return r}return-1}findAssetIndex(e,t){const n=e.assetList,r=n.length;if(r>1)for(let i=0;i<r;i++){const l=n[i];if(!l.error){const c=l.timelineStart;if(t===c||t>c&&(t<c+(l.duration||0)||i===r-1))return i}}return 0}get assetIdAtEnd(){var e;const t=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(t){const n=t.assetList,r=n[n.length-1];if(r)return r.identifier}return null}parseInterstitialDateRanges(e,t){const n=e.main.details,{dateRanges:r}=n,i=this.events,l=this.parseDateRanges(r,{url:n.url},t),c=Object.keys(r),f=i?i.filter(h=>!c.includes(h.identifier)):[];l.length&&l.sort((h,g)=>{const p=h.cue.pre,y=h.cue.post,T=g.cue.pre,b=g.cue.post;if(p&&!T)return-1;if(T&&!p||y&&!b)return 1;if(b&&!y)return-1;if(!p&&!T&&!y&&!b){const w=h.startTime,R=g.startTime;if(w!==R)return w-R}return h.dateRange.tagOrder-g.dateRange.tagOrder}),this.events=l,f.forEach(h=>{this.removeEvent(h)}),this.updateSchedule(e,f)}updateSchedule(e,t=[],n=!1){const r=this.events||[];if(r.length||t.length||this.length<2){const i=this.items,l=this.parseSchedule(r,e);(n||t.length||(i==null?void 0:i.length)!==l.length||l.some((f,h)=>Math.abs(f.playout.start-i[h].playout.start)>.005||Math.abs(f.playout.end-i[h].playout.end)>.005))&&(this.items=l,this.onScheduleUpdate(t,i))}}parseDateRanges(e,t,n){const r=[],i=Object.keys(e);for(let l=0;l<i.length;l++){const c=i[l],f=e[c];if(f.isInterstitial){let h=this.eventMap[c];h?h.setDateRange(f):(h=new ck(f,t),this.eventMap[c]=h,n===!1&&(h.appendInPlace=n)),r.push(h)}}return r}parseSchedule(e,t){const n=[],r=t.main.details,i=r.live?1/0:r.edge;let l=0;if(e=e.filter(f=>!f.error&&!(f.cue.once&&f.hasPlayed)),e.length){this.resolveOffsets(e,t);let f=0,h=0;if(e.forEach((g,p)=>{const y=g.cue.pre,T=g.cue.post,b=e[p-1]||null,w=g.appendInPlace,R=T?i:g.startOffset,M=g.duration,Y=g.timelineOccupancy===eg.Range?M:0,Z=g.resumptionOffset,ye=(b==null?void 0:b.startTime)===R,Re=R+g.cumulativeDuration;let F=w?Re+M:R+Z;if(y||!T&&R<=0){const j=h;h+=Y,g.timelineStart=Re;const oe=l;l+=M,n.push({event:g,start:Re,end:F,playout:{start:oe,end:l},integrated:{start:j,end:h}})}else if(R<=i){if(!ye){const L=R-f;if(L>O0){const Ee=f,Be=h;h+=L;const pe=l;l+=L;const ct={previousEvent:e[p-1]||null,nextEvent:g,start:Ee,end:Ee+L,playout:{start:pe,end:l},integrated:{start:Be,end:h}};n.push(ct)}else L>0&&b&&(b.cumulativeDuration+=L,n[n.length-1].end=R)}T&&(F=Re),g.timelineStart=Re;const j=h;h+=Y;const oe=l;l+=M,n.push({event:g,start:Re,end:F,playout:{start:oe,end:l},integrated:{start:j,end:h}})}else return;const k=g.resumeTime;T||k>i?f=i:f=k}),f<i){var c;const g=f,p=h,y=i-f;h+=y;const T=l;l+=y,n.push({previousEvent:((c=n[n.length-1])==null?void 0:c.event)||null,nextEvent:null,start:f,end:g+y,playout:{start:T,end:l},integrated:{start:p,end:h}})}this.setDurations(i,l,h)}else n.push({previousEvent:null,nextEvent:null,start:0,end:i,playout:{start:0,end:i},integrated:{start:0,end:i}}),this.setDurations(i,i,i);return n}setDurations(e,t,n){this.durations={primary:e,playout:t,integrated:n}}resolveOffsets(e,t){const n=t.main.details,r=n.live?1/0:n.edge;let i=0,l=-1;e.forEach((c,f)=>{const h=c.cue.pre,g=c.cue.post,p=h?0:g?r:c.startTime;this.updateAssetDurations(c),l===p?c.cumulativeDuration=i:(i=0,l=p),!g&&c.snapOptions.in&&(c.resumeAnchor=zl(null,n.fragments,c.startOffset+c.resumptionOffset,0,0)||void 0),c.appendInPlace&&!c.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(c,t)||(c.appendInPlace=!1)),!c.appendInPlace&&f+1<e.length&&e[f+1].startTime-e[f].resumeTime<O0&&(e[f+1].appendInPlace=!1,e[f+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${c}`));const T=Dn(c.resumeOffset)?c.resumeOffset:c.duration;i+=T})}primaryCanResumeInPlaceAt(e,t){const n=e.resumeTime,r=e.startTime+e.resumptionOffset;return Math.abs(n-r)>ac?(this.log(`"${e.identifier}" resumption ${n} not aligned with estimated timeline end ${r}`),!1):!Object.keys(t).some(l=>{const c=t[l].details,f=c.edge;if(n>=f)return this.log(`"${e.identifier}" resumption ${n} past ${l} playlist end ${f}`),!1;const h=zl(null,c.fragments,n);if(!h)return this.log(`"${e.identifier}" resumption ${n} does not align with any fragments in ${l} playlist (${c.fragStart}-${c.fragmentEnd})`),!0;const g=l==="audio"?.175:0;return Math.abs(h.start-n)<ac+g||Math.abs(h.end-n)<ac+g?!1:(this.log(`"${e.identifier}" resumption ${n} not aligned with ${l} fragment bounds (${h.start}-${h.end} sn: ${h.sn} cc: ${h.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let n=0,r=!1,i=!1;for(let l=0;l<e.assetList.length;l++){const c=e.assetList[l],f=t+n;c.startOffset=n,c.timelineStart=f,r||(r=c.duration===null),i||(i=!!c.error);const h=c.error?0:c.duration||0;n+=h}r&&!i?e.duration=Math.max(n,e.duration):e.duration=n}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function es(o){return`[${o.event?'"'+o.event.identifier+'"':"primary"}: ${o.start.toFixed(2)}-${o.end.toFixed(2)}]`}class gk{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const n=e.assetListUrl;let r;try{r=ZE(n,this.hls.sessionId,e.baseUrl)}catch(y){const T=this.assignAssetListError(e,wt.ASSET_LIST_LOAD_ERROR,y,n);this.hls.trigger(Se.ERROR,T);return}t&&r.protocol!=="data:"&&r.searchParams.set("_HLS_start_offset",""+t);const i=this.hls.config,l=i.loader,c=new l(i),f={responseType:"json",url:r.href},h=i.interstitialAssetListLoadPolicy.default,g={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},p={onSuccess:(y,T,b,w)=>{const R=y.data,M=R==null?void 0:R.ASSETS;if(!Array.isArray(M)){const Y=this.assignAssetListError(e,wt.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),b.url,T,w);this.hls.trigger(Se.ERROR,Y);return}e.assetListResponse=R,this.hls.trigger(Se.ASSET_LIST_LOADED,{event:e,assetListResponse:R,networkDetails:w})},onError:(y,T,b,w)=>{const R=this.assignAssetListError(e,wt.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${y.code} ${y.text} (${T.url})`),T.url,w,b);this.hls.trigger(Se.ERROR,R)},onTimeout:(y,T,b)=>{const w=this.assignAssetListError(e,wt.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${T.url})`),T.url,y,b);this.hls.trigger(Se.ERROR,w)}};return c.load(f,g,p),this.hls.trigger(Se.ASSET_LIST_LOADING,{event:e}),c}assignAssetListError(e,t,n,r,i,l){return e.error=n,{type:Gn.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:r,error:n,networkDetails:l,stats:i}}}function F0(o){o==null||o.play().catch(()=>{})}function _h(o,e){return`[${o}] Advancing timeline position to ${e}`}class mk extends Ha{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled||!this.schedule)return;const r=n-this.timelinePos;if(Math.abs(r)<1/7056e5)return;const l=r<=-.01;this.timelinePos=n,this.bufferedPos=n;const c=this.playingItem;if(!c){this.checkBuffer();return}if(l&&this.schedule.resetErrorsInRange(n,n-r)&&this.updateSchedule(!0),this.checkBuffer(),l&&n<c.start||n>=c.end){var f;const T=this.findItemIndex(c);let b=this.schedule.findItemIndexAtTime(n);if(b===-1&&(b=T+(l?-1:1),this.log(`seeked ${l?"back ":""}to position not covered by schedule ${n} (resolving from ${T} to ${b})`)),!this.isInterstitial(c)&&(f=this.media)!=null&&f.paused&&(this.shouldPlay=!1),!l&&b>T){const w=this.schedule.findJumpRestrictedIndex(T+1,b);if(w>T){this.setSchedulePosition(w);return}}this.setSchedulePosition(b);return}const h=this.playingAsset;if(!h){if(this.playingLastItem&&this.isInterstitial(c)){const T=c.event.assetList[0];T&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(n,T))}return}const g=h.timelineStart,p=h.duration||0;if(l&&n<g||n>=g+p){var y;(y=c.event)!=null&&y.appendInPlace&&(this.clearInterstitial(c.event,c),this.flushFrontBuffer(n)),this.setScheduleToAssetAtTime(n,h)}},this.onTimeupdate=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled)return;if(n>this.timelinePos)this.timelinePos=n,n>this.bufferedPos&&this.checkBuffer();else return;const r=this.playingItem;if(!r||this.playingLastItem)return;if(n>=r.end){this.timelinePos=r.end;const c=this.findItemIndex(r);this.setSchedulePosition(c+1)}const i=this.playingAsset;if(!i)return;const l=i.timelineStart+(i.duration||0);n>=l&&this.setScheduleToAssetAtTime(n,i)},this.onScheduleUpdate=(n,r)=>{const i=this.schedule;if(!i)return;const l=this.playingItem,c=i.events||[],f=i.items||[],h=i.durations,g=n.map(w=>w.identifier),p=!!(c.length||g.length);(p||r)&&this.log(`INTERSTITIALS_UPDATED (${c.length}): ${c}
Schedule: ${f.map(w=>es(w))} pos: ${this.timelinePos}`),g.length&&this.log(`Removed events ${g}`);let y=null,T=null;l&&(y=this.updateItem(l,this.timelinePos),this.itemsMatch(l,y)?this.playingItem=y:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const b=this.bufferingItem;if(b&&(T=this.updateItem(b,this.bufferedPos),this.itemsMatch(b,T)?this.bufferingItem=T:b.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(b.event,null))),n.forEach(w=>{w.assetList.forEach(R=>{this.clearAssetPlayer(R.identifier,null)})}),this.playerQueue.forEach(w=>{if(w.interstitial.appendInPlace){const R=w.assetItem.timelineStart,M=w.timelineOffset-R;if(M)try{w.timelineOffset=R}catch(Y){Math.abs(M)>ac&&this.warn(`${Y} ("${w.assetId}" ${w.timelineOffset}->${R})`)}}}),p||r){if(this.hls.trigger(Se.INTERSTITIALS_UPDATED,{events:c.slice(0),schedule:f.slice(0),durations:h,removedIds:g}),this.isInterstitial(l)&&g.includes(l.event.identifier)){this.warn(`Interstitial "${l.event.identifier}" removed while playing`),this.primaryFallback(l.event);return}l&&this.trimInPlace(y,l),b&&T!==y&&this.trimInPlace(T,b),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new gk(e),this.schedule=new hk(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(Se.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Se.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Se.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Se.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Se.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Se.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(Se.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(Se.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(Se.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(Se.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(Se.BUFFER_APPENDED,this.onBufferAppended,this),e.on(Se.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Se.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(Se.MEDIA_ENDED,this.onMediaEnded,this),e.on(Se.ERROR,this.onError,this),e.on(Se.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(Se.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Se.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Se.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Se.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Se.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Se.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(Se.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(Se.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(Se.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(Se.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(Se.BUFFER_CODECS,this.onBufferCodecs,this),e.off(Se.BUFFER_APPENDED,this.onBufferAppended,this),e.off(Se.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Se.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(Se.MEDIA_ENDED,this.onMediaEnded,this),e.off(Se.ERROR,this.onError,this),e.off(Se.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){la(e,"play",this.onPlay),la(e,"pause",this.onPause),la(e,"seeking",this.onSeeking),la(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const n=this.media=t.media;Wi(n,"seeking",this.onSeeking),Wi(n,"timeupdate",this.onTimeupdate),Wi(n,"play",this.onPlay),Wi(n,"pause",this.onPause)}onMediaAttached(e,t){const n=this.effectivePlayingItem,r=this.detachedData;if(this.detachedData=null,n===null)this.checkStart();else if(!r){this.clearScheduleState();const i=this.findItemIndex(n);this.setSchedulePosition(i)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const n=!!t.transferMedia,r=this.media;if(this.media=null,!n&&(r&&this.removeMediaListeners(r),this.detachedData)){const i=this.getBufferingPlayer();i&&(this.log(`Removing schedule state for detachedData and ${i}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,i.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,n=p=>p&&e.getAssetPlayer(p.identifier),r=(p,y,T,b,w)=>{if(p){let R=p[y].start;const M=p.event;if(M){if(y==="playout"||M.timelineOccupancy!==eg.Point){const Y=n(T);(Y==null?void 0:Y.interstitial)===M&&(R+=Y.assetItem.startOffset+Y[w])}}else{const Y=b==="bufferedPos"?l():e[b];R+=Y-p.start}return R}return 0},i=(p,y)=>{var T;if(p!==0&&y!=="primary"&&(T=e.schedule)!=null&&T.length){var b;const w=e.schedule.findItemIndexAtTime(p),R=(b=e.schedule.items)==null?void 0:b[w];if(R){const M=R[y].start-R.start;return p+M}}return p},l=()=>{const p=e.bufferedPos;return p===Number.MAX_VALUE?c("primary"):Math.max(p,0)},c=p=>{var y,T;return(y=e.primaryDetails)!=null&&y.live?e.primaryDetails.edge:((T=e.schedule)==null?void 0:T.durations[p])||0},f=(p,y)=>{var T,b;const w=e.effectivePlayingItem;if(w!=null&&(T=w.event)!=null&&T.restrictions.skip||!e.schedule)return;e.log(`seek to ${p} "${y}"`);const R=e.effectivePlayingItem,M=e.schedule.findItemIndexAtTime(p,y),Y=(b=e.schedule.items)==null?void 0:b[M],Z=e.getBufferingPlayer(),ye=Z==null?void 0:Z.interstitial,Re=ye==null?void 0:ye.appendInPlace,F=R&&e.itemsMatch(R,Y);if(R&&(Re||F)){const k=n(e.playingAsset),j=(k==null?void 0:k.media)||e.primaryMedia;if(j){const oe=y==="primary"?j.currentTime:r(R,y,e.playingAsset,"timelinePos","currentTime"),L=p-oe,Ee=(Re?oe:j.currentTime)+L;if(Ee>=0&&(!k||Re||Ee<=k.duration)){j.currentTime=Ee;return}}}if(Y){let k=p;if(y!=="primary"){const oe=Y[y].start,L=p-oe;k=Y.start+L}const j=!e.isInterstitial(Y);if((!e.isInterstitial(R)||R.event.appendInPlace)&&(j||Y.event.appendInPlace)){const oe=e.media||(Re?Z==null?void 0:Z.media:null);oe&&(oe.currentTime=k)}else if(R){const oe=e.findItemIndex(R);if(M>oe){const Ee=e.schedule.findJumpRestrictedIndex(oe+1,M);if(Ee>oe){e.setSchedulePosition(Ee);return}}let L=0;if(j)e.timelinePos=k,e.checkBuffer();else{const Ee=Y.event.assetList,Be=p-(Y[y]||Y).start;for(let pe=Ee.length;pe--;){const ct=Ee[pe];if(ct.duration&&Be>=ct.startOffset&&Be<ct.startOffset+ct.duration){L=pe;break}}}e.setSchedulePosition(M,L)}}},h=()=>{const p=e.effectivePlayingItem;if(e.isInterstitial(p))return p;const y=t();return e.isInterstitial(y)?y:null},g={get bufferedEnd(){const p=t(),y=e.bufferingItem;if(y&&y===p){var T;return r(y,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-y.playout.start||((T=e.bufferingAsset)==null?void 0:T.startOffset)||0}return 0},get currentTime(){const p=h(),y=e.effectivePlayingItem;return y&&y===p?r(y,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-y.playout.start:0},set currentTime(p){const y=h(),T=e.effectivePlayingItem;T&&T===y&&f(p+T.playout.start,"playout")},get duration(){const p=h();return p?p.playout.end-p.playout.start:0},get assetPlayers(){var p;const y=(p=h())==null?void 0:p.event.assetList;return y?y.map(T=>e.getAssetPlayer(T.identifier)):[]},get playingIndex(){var p;const y=(p=h())==null?void 0:p.event;return y&&e.effectivePlayingAsset?y.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return h()}};return this.manager={get events(){var p;return((p=e.schedule)==null||(p=p.events)==null?void 0:p.slice(0))||[]},get schedule(){var p;return((p=e.schedule)==null||(p=p.items)==null?void 0:p.slice(0))||[]},get interstitialPlayer(){return h()?g:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const p=t();return e.findItemIndex(p)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const p=e.effectivePlayingItem;return e.findItemIndex(p)},primary:{get bufferedEnd(){return l()},get currentTime(){const p=e.timelinePos;return p>0?p:0},set currentTime(p){f(p,"primary")},get duration(){return c("primary")},get seekableStart(){var p;return((p=e.primaryDetails)==null?void 0:p.fragmentStart)||0}},integrated:{get bufferedEnd(){return r(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return r(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(p){f(p,"integrated")},get duration(){return c("integrated")},get seekableStart(){var p;return i(((p=e.primaryDetails)==null?void 0:p.fragmentStart)||0,"integrated")}},skip:()=>{const p=e.effectivePlayingItem,y=p==null?void 0:p.event;if(y&&!y.restrictions.skip){const T=e.findItemIndex(p);if(y.appendInPlace){const b=p.playout.start+p.event.duration;f(b+.001,"playout")}else e.advanceAfterAssetEnded(y,T,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,n=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!n?!1:this.findItemIndex(t)===n.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t;if(this.mediaSelection===null)return;const n=this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&!n.event.appendInPlace)return;let r=this.media;!r&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(r=this.primaryMedia);const i=(t=r)==null?void 0:t.currentTime;if(!(i===void 0||!Dn(i)))return i}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){const n=this.getAssetPlayer(e);n&&this.transferMediaFromPlayer(n,t)}transferMediaFromPlayer(e,t){const n=e.interstitial.appendInPlace,r=e.media;if(n&&r===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&r){this.detachedData={media:r};return}const i=e.transferMedia();this.log(`transfer MediaSource from ${e} ${Kr(i)}`),this.detachedData=i}else t&&r&&(this.shouldPlay||(this.shouldPlay=!r.paused))}transferMediaTo(e,t){var n,r;if(e.media===t)return;let i=null;const l=this.hls,c=e!==l,f=c&&e.interstitial.appendInPlace,h=(n=this.detachedData)==null?void 0:n.mediaSource;let g;if(l.media)f&&(i=l.transferMedia(),this.detachedData=i),g="Primary";else if(h){const b=this.getBufferingPlayer();b?(i=b.transferMedia(),g=`${b}`):g="detached MediaSource"}else g="detached media";if(!i){if(h)i=this.detachedData,this.log(`using detachedData: MediaSource ${Kr(i)}`);else if(!this.detachedData||l.media===t){const b=this.playerQueue;b.length>1&&b.forEach(w=>{if(c&&w.interstitial.appendInPlace!==f){const R=w.interstitial;this.clearInterstitial(w.interstitial,null),R.appendInPlace=!1,R.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${R}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}const p=i&&"mediaSource"in i&&((r=i.mediaSource)==null?void 0:r.readyState)!=="closed",y=p&&i?i:t;this.log(`${p?"transfering MediaSource":"attaching media"} to ${c?e:"Primary"} from ${g} (media.currentTime: ${t.currentTime})`);const T=this.schedule;if(y===i&&T){const b=c&&e.assetId===T.assetIdAtEnd;y.overrides={duration:T.duration,endOfStream:!c||b,cueRemoval:!c}}e.attachMedia(y)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e==null?void 0:e.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const n=this.timelinePos,r=this.effectivePlayingItem;if(n===-1){const i=this.hls.startPosition;if(this.log(_h("checkStart",i)),this.timelinePos=i,t.length&&t[0].cue.pre){const l=e.findEventIndex(t[0].identifier);this.setSchedulePosition(l)}else if(i>=0||!this.primaryLive){const l=this.timelinePos=i>0?i:0,c=e.findItemIndexAtTime(l);this.setSchedulePosition(c)}}else if(r&&!this.playingItem){const i=e.findItemIndex(r);this.setSchedulePosition(i)}}advanceAssetBuffering(e,t){const n=e.event,r=n.findAssetIndex(t),i=ym(n,r);if(!n.isAssetPastPlayoutLimit(i))this.bufferedToEvent(e,i);else if(this.schedule){var l;const c=(l=this.schedule.items)==null?void 0:l[this.findItemIndex(e)+1];c&&this.bufferedToItem(c)}}advanceAfterAssetEnded(e,t,n){const r=ym(e,n);if(e.isAssetPastPlayoutLimit(r)){if(this.schedule){const i=this.schedule.items;if(i){const l=t+1,c=i.length;if(l>=c){this.setSchedulePosition(-1);return}const f=e.resumeTime;this.timelinePos<f&&(this.log(_h("advanceAfterAssetEnded",f)),this.timelinePos=f,e.appendInPlace&&this.advanceInPlace(f),this.checkBuffer(this.bufferedPos<f)),this.setSchedulePosition(l)}}}else{if(e.appendInPlace){const i=e.assetList[r];i&&this.advanceInPlace(i.timelineStart)}this.setSchedulePosition(t,r)}}setScheduleToAssetAtTime(e,t){const n=this.schedule;if(!n)return;const r=t.parentIdentifier,i=n.getEvent(r);if(i){const l=n.findEventIndex(r),c=n.findAssetIndex(i,e);this.advanceAfterAssetEnded(i,l,c-1)}}setSchedulePosition(e,t){var n;const r=(n=this.schedule)==null?void 0:n.items;if(!r||this.playbackDisabled)return;const i=e>=0?r[e]:null;this.log(`setSchedulePosition ${e}, ${t} (${i&&es(i)}) pos: ${this.timelinePos}`);const l=this.waitingItem||this.playingItem,c=this.playingLastItem;if(this.isInterstitial(l)){const g=l.event,p=this.playingAsset,y=p==null?void 0:p.identifier,T=y?this.getAssetPlayer(y):null;if(T&&y&&(!this.eventItemsMatch(l,i)||t!==void 0&&y!==g.assetList[t].identifier)){var f;const b=g.findAssetIndex(p);if(this.log(`INTERSTITIAL_ASSET_ENDED ${b+1}/${g.assetList.length} ${Ju(p)}`),this.endedAsset=p,this.playingAsset=null,this.hls.trigger(Se.INTERSTITIAL_ASSET_ENDED,{asset:p,assetListIndex:b,event:g,schedule:r.slice(0),scheduleIndex:e,player:T}),l!==this.playingItem){this.itemsMatch(l,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(g,this.findItemIndex(this.playingItem),b);return}this.retreiveMediaSource(y,i),T.media&&!((f=this.detachedData)!=null&&f.mediaSource)&&T.detachMedia()}if(!this.eventItemsMatch(l,i)&&(this.endedItem=l,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${g} ${es(l)}`),g.hasPlayed=!0,this.hls.trigger(Se.INTERSTITIAL_ENDED,{event:g,schedule:r.slice(0),scheduleIndex:e}),g.cue.once)){var h;this.updateSchedule();const b=(h=this.schedule)==null?void 0:h.items;if(i&&b){const w=this.findItemIndex(i);this.advanceSchedule(w,b,t,l,c)}return}}this.advanceSchedule(e,r,t,l,c)}advanceSchedule(e,t,n,r,i){const l=this.schedule;if(!l)return;const c=t[e]||null,f=this.primaryMedia,h=this.playerQueue;if(h.length&&h.forEach(g=>{const p=g.interstitial,y=l.findEventIndex(p.identifier);(y<e||y>e+1)&&this.clearInterstitial(p,c)}),this.isInterstitial(c)){this.timelinePos=Math.min(Math.max(this.timelinePos,c.start),c.end);const g=c.event;if(n===void 0){n=l.findAssetIndex(g,this.timelinePos);const b=ym(g,n-1);if(g.isAssetPastPlayoutLimit(b)||g.appendInPlace&&this.timelinePos===c.end){this.advanceAfterAssetEnded(g,e,n);return}n=b}const p=this.waitingItem;this.assetsBuffered(c,f)||this.setBufferingItem(c);let y=this.preloadAssets(g,n);if(this.eventItemsMatch(c,p||r)||(this.waitingItem=c,this.log(`INTERSTITIAL_STARTED ${es(c)} ${g.appendInPlace?"append in place":""}`),this.hls.trigger(Se.INTERSTITIAL_STARTED,{event:g,schedule:t.slice(0),scheduleIndex:e})),!g.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${g}`);return}if(g.assetListLoader&&(g.assetListLoader.destroy(),g.assetListLoader=void 0),!f){this.log(`Waiting for attachMedia to start Interstitial ${g}`);return}this.waitingItem=this.endedItem=null,this.playingItem=c;const T=g.assetList[n];if(!T){this.advanceAfterAssetEnded(g,e,n||0);return}if(y||(y=this.getAssetPlayer(T.identifier)),y===null||y.destroyed){const b=g.assetList.length;this.warn(`asset ${n+1}/${b} player destroyed ${g}`),y=this.createAssetPlayer(g,T,n),y.loadSource()}if(!this.eventItemsMatch(c,this.bufferingItem)&&g.appendInPlace&&this.isAssetBuffered(T))return;this.startAssetPlayer(y,n,t,e,f),this.shouldPlay&&F0(y.media)}else c?(this.resumePrimary(c,e,r),this.shouldPlay&&F0(this.hls.media)):i&&this.isInterstitial(r)&&(this.endedItem=null,this.playingItem=r,r.event.appendInPlace||this.attachPrimary(l.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,n){var r,i;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${es(e)}`),!((r=this.detachedData)!=null&&r.mediaSource)){let c=this.timelinePos;(c<e.start||c>=e.end)&&(c=this.getPrimaryResumption(e,t),this.log(_h("resumePrimary",c)),this.timelinePos=c),this.attachPrimary(c,e)}if(!n)return;const l=(i=this.schedule)==null?void 0:i.items;l&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${es(e)}`),this.hls.trigger(Se.INTERSTITIALS_PRIMARY_RESUMED,{schedule:l.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const n=e.start;if(this.primaryLive){const r=this.primaryDetails;if(t===0)return this.hls.startPosition;if(r&&(n<r.fragmentStart||n>r.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:tr.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,n){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const r=this.primaryMedia;if(!r)return;const i=this.hls;i.media?this.checkBuffer():(this.transferMediaTo(i,r),n&&this.startLoadingPrimaryAt(e,n)),n||(this.log(_h("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,n))}startLoadingPrimaryAt(e,t){var n;const r=this.hls;!r.loadingEnabled||!r.media||Math.abs((((n=r.mainForwardBufferInfo)==null?void 0:n.start)||r.media.currentTime)-e)>.5?r.startLoad(e,t):r.bufferingEnabled||r.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(Se.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(Se.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1||!this.schedule)return;const n=this.hls.levels[t.level],r=Mr(Mr({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=r,this.schedule.parseInterstitialDateRanges(r,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const n=this.hls.audioTracks[t.id],r=this.mediaSelection;if(!r){this.altSelection=Mr(Mr({},this.altSelection),{},{audio:n});return}const i=Mr(Mr({},r),{},{audio:n});this.mediaSelection=i}onSubtitleTrackUpdated(e,t){const n=this.hls.subtitleTracks[t.id],r=this.mediaSelection;if(!r){this.altSelection=Mr(Mr({},this.altSelection),{},{subtitles:n});return}const i=Mr(Mr({},r),{},{subtitles:n});this.mediaSelection=i}onAudioTrackSwitching(e,t){const n=Yy(t);this.playerQueue.forEach(({hls:r})=>r&&(r.setAudioOption(t)||r.setAudioOption(n)))}onSubtitleTrackSwitch(e,t){const n=Yy(t);this.playerQueue.forEach(({hls:r})=>r&&(r.setSubtitleOption(t)||t.id!==-1&&r.setSubtitleOption(n)))}onBufferCodecs(e,t){const n=t.tracks;n&&(this.requiredTracks=n)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const r=this.timelinePos;this.bufferedPos=r,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let r=0;r<t.length;r++){const i=t[r];if(i.cue.post){var n;const l=this.schedule.findEventIndex(i.identifier),c=(n=this.schedule.items)==null?void 0:n[l];this.isInterstitial(c)&&this.eventItemsMatch(c,this.bufferingItem)&&this.bufferedToItem(c,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const n=this.findItemIndex(t);this.setSchedulePosition(n+1)}else this.shouldPlay=!1}updateItem(e,t){var n;const r=(n=this.schedule)==null?void 0:n.items;if(e&&r){const i=this.findItemIndex(e,t);return r[i]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((i,l)=>{e.event.isAssetPastPlayoutLimit(l)&&this.clearAssetPlayer(i.identifier,null)});const n=e.end+.25,r=tr.bufferInfo(this.primaryMedia,n,0);(r.end>n||(r.nextStart||0)>n)&&(this.log(`trim buffered interstitial ${es(e)} (was ${es(t)})`),this.attachPrimary(n,null,!0),this.flushFrontBuffer(n))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var n;return!!t&&(e===t||e.event.identifier===((n=t.event)==null?void 0:n.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(e=!1){var t;const n=this.mediaSelection;n&&((t=this.schedule)==null||t.updateSchedule(n,[],e))}checkBuffer(e){var t;const n=(t=this.schedule)==null?void 0:t.items;if(!n)return;const r=tr.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=r.len<1),this.updateBufferedPos(r.end,n,e)}updateBufferedPos(e,t,n){const r=this.schedule,i=this.bufferingItem;if(this.bufferedPos>e||!r)return;if(t.length===1&&this.itemsMatch(t[0],i)){this.bufferedPos=e;return}const l=this.playingItem,c=this.findItemIndex(l);let f=r.findItemIndexAtTime(e);if(this.bufferedPos<e){var h;const g=this.findItemIndex(i),p=Math.min(g+1,t.length-1),y=t[p];if((f===-1&&i&&e>=i.end||(h=y.event)!=null&&h.appendInPlace&&e+.01>=y.start)&&(f=p),this.isInterstitial(i)){const T=i.event;if(p-c>1&&T.appendInPlace===!1||T.assetList.length===0&&T.assetListLoader)return}if(this.bufferedPos=e,f>g&&f>c)this.bufferedToItem(y);else{const T=this.primaryDetails;this.primaryLive&&T&&e>T.edge-T.targetduration&&y.start<T.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(y)&&this.preloadAssets(y.event,0)}}else n&&l&&!this.itemsMatch(l,i)&&(f===c?this.bufferedToItem(l):f===c+1&&this.bufferedToItem(t[f]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(r=>{const i=this.getAssetPlayer(r.identifier);return!(i!=null&&i.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,n=this.schedule;if(!this.itemsMatch(e,t)&&n){const{items:r,events:i}=n;if(!r||!i)return t;const l=this.isInterstitial(e),c=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const f=c?c.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${es(e)}`+(t?` (${f.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(l){const h=n.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((g,p)=>{const y=this.getAssetPlayer(g.identifier);y&&(p===h&&y.loadSource(),y.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(h=>h.pauseBuffering());this.hls.trigger(Se.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:i.slice(0),schedule:r.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){const n=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(n!==null){this.bufferingAsset=null;const r=this.detachedData;r?r.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const t=this.findItemIndex(e),n=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(n)}bufferedToEvent(e,t){const n=e.event,r=n.assetList.length===0&&!n.assetListLoader,i=n.cue.once;if(r||!i){const l=this.preloadAssets(n,t);if(l!=null&&l.interstitial.appendInPlace){const c=this.primaryMedia;c&&this.bufferAssetPlayer(l,c)}}}preloadAssets(e,t){const n=e.assetUrl,r=e.assetList.length,i=r===0&&!e.assetListLoader,l=e.cue.once;if(i){const f=e.timelineStart;if(e.appendInPlace){var c;const y=this.playingItem;!this.isInterstitial(y)&&(y==null||(c=y.nextEvent)==null?void 0:c.identifier)===e.identifier&&this.flushFrontBuffer(f+.25)}let h,g=0;if(!this.playingItem&&this.primaryLive&&(g=this.hls.startPosition,g===-1&&(g=this.hls.liveSyncPosition||0)),g&&!(e.cue.pre||e.cue.post)){const y=g-f;y>0&&(h=Math.round(y*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${n?1:r} ${e}${h?` live-start: ${g} start-offset: ${h}`:""}`),n)return this.createAsset(e,0,0,f,e.duration,n);const p=this.assetListLoader.loadAssetList(e,h);p&&(e.assetListLoader=p)}else if(!l&&r){for(let h=t;h<r;h++){const g=e.assetList[h],p=this.getAssetPlayerQueueIndex(g.identifier);(p===-1||this.playerQueue[p].destroyed)&&!g.error&&this.createAssetPlayer(e,g,h)}const f=e.assetList[t];if(f){const h=this.getAssetPlayer(f.identifier);return h&&h.loadSource(),h}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(r=>{this.hls.trigger(Se.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:r})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let n=0;n<t.length;n++)if(e===t[n].assetId)return n;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t){for(let n=0;n<e.length;n++)if(e[n].media===t)return e[n]}return null}createAsset(e,t,n,r,i,l){const c={parentIdentifier:e.identifier,identifier:uk(e,l,t),duration:i,startOffset:n,timelineStart:r,uri:l};return this.createAssetPlayer(e,c,t)}createAssetPlayer(e,t,n){const r=this.hls,i=r.userConfig;let l=i.videoPreference;const c=r.loadLevelObj||r.levels[r.currentLevel];(l||c)&&(l=Or({},l),c.videoCodec&&(l.videoCodec=c.videoCodec),c.videoRange&&(l.allowedVideoRanges=[c.videoRange]));const f=r.audioTracks[r.audioTrack],h=r.subtitleTracks[r.subtitleTrack];let g=0;if(this.primaryLive||e.appendInPlace){const ye=this.timelinePos-t.timelineStart;if(ye>1){const Re=t.duration;Re&&ye<Re&&(g=ye)}}const p=t.identifier,y=Mr(Mr({},i),{},{maxMaxBufferLength:Math.min(180,r.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:r.sessionId,assetPlayerId:p,abrEwmaDefaultEstimate:r.bandwidthEstimate,interstitialsController:void 0,startPosition:g,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:l,audioPreference:f||i.audioPreference,subtitlePreference:h||i.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(y.timelineOffset=t.timelineStart));const T=y.cmcd;T!=null&&T.sessionId&&T.contentId&&(y.cmcd=Or({},T,{contentId:Dd(t.uri)})),this.getAssetPlayer(p)&&this.warn(`Duplicate date range identifier ${e} and asset ${p}`);const b=new fk(this.HlsPlayerClass,y,e,t);this.playerQueue.push(b),e.assetList[n]=t;let w=!0;const R=ye=>{if(ye.live){var Re;const j=new Error(`Interstitials MUST be VOD assets ${e}`),oe={fatal:!0,type:Gn.OTHER_ERROR,details:wt.INTERSTITIAL_ASSET_ITEM_ERROR,error:j},L=((Re=this.schedule)==null?void 0:Re.findEventIndex(e.identifier))||-1;this.handleAssetItemError(oe,e,L,n,j.message);return}const F=ye.edge-ye.fragmentStart,k=t.duration;(w||k===null||F>k)&&(w=!1,this.log(`Interstitial asset "${p}" duration change ${k} > ${F}`),t.duration=F,this.updateSchedule())};b.on(Se.LEVEL_UPDATED,(ye,{details:Re})=>R(Re)),b.on(Se.LEVEL_PTS_UPDATED,(ye,{details:Re})=>R(Re)),b.on(Se.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const M=(ye,Re)=>{const F=this.getAssetPlayer(p);if(F&&Re.tracks){F.off(Se.BUFFER_CODECS,M),F.tracks=Re.tracks;const k=this.primaryMedia;this.bufferingAsset===F.assetItem&&k&&!F.media&&this.bufferAssetPlayer(F,k)}};b.on(Se.BUFFER_CODECS,M);const Y=()=>{var ye;const Re=this.getAssetPlayer(p);if(this.log(`buffered to end of asset ${Re}`),!Re||!this.schedule)return;const F=this.schedule.findEventIndex(e.identifier),k=(ye=this.schedule.items)==null?void 0:ye[F];this.isInterstitial(k)&&this.advanceAssetBuffering(k,t)};b.on(Se.BUFFERED_TO_END,Y);const Z=ye=>()=>{if(!this.getAssetPlayer(p)||!this.schedule)return;this.shouldPlay=!0;const F=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,F,ye)};return b.once(Se.MEDIA_ENDED,Z(n)),b.once(Se.PLAYOUT_LIMIT_REACHED,Z(1/0)),b.on(Se.ERROR,(ye,Re)=>{if(!this.schedule)return;const F=this.getAssetPlayer(p);if(Re.details===wt.BUFFER_STALLED_ERROR){if(F!=null&&F.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(Re,e,this.schedule.findEventIndex(e.identifier),n,`Asset player error ${Re.error} ${e}`)}),b.on(Se.DESTROYING,()=>{if(!this.getAssetPlayer(p)||!this.schedule)return;const Re=new Error(`Asset player destroyed unexpectedly ${p}`),F={fatal:!0,type:Gn.OTHER_ERROR,details:wt.INTERSTITIAL_ASSET_ITEM_ERROR,error:Re};this.handleAssetItemError(F,e,this.schedule.findEventIndex(e.identifier),n,Re.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${Ju(t)}`),this.hls.trigger(Se.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:n,event:e,player:b}),b}clearInterstitial(e,t){e.assetList.forEach(n=>{this.clearAssetPlayer(n.identifier,t)}),e.reset()}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(t!==-1){this.log(`reset asset player "${e}" after error`);const n=this.playerQueue[t];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(e,t){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){const r=this.playerQueue[n];this.log(`clear ${r} toSegment: ${t&&es(t)}`),this.transferMediaFromPlayer(r,t),this.playerQueue.splice(n,1),r.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,n,r,i){const{interstitial:l,assetItem:c,assetId:f}=e,h=l.assetList.length,g=this.playingAsset;this.endedAsset=null,this.playingAsset=c,(!g||g.identifier!==f)&&(g&&(this.clearAssetPlayer(g.identifier,n[r]),delete g.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${h} ${Ju(c)}`),this.hls.trigger(Se.INTERSTITIAL_ASSET_STARTED,{asset:c,assetListIndex:t,event:l,schedule:n.slice(0),scheduleIndex:r,player:e})),this.bufferAssetPlayer(e,i)}bufferAssetPlayer(e,t){var n,r;if(!this.schedule)return;const{interstitial:i,assetItem:l}=e,c=this.schedule.findEventIndex(i.identifier),f=(n=this.schedule.items)==null?void 0:n[c];if(!f)return;e.loadSource(),this.setBufferingItem(f),this.bufferingAsset=l;const h=this.getBufferingPlayer();if(h===e)return;const g=i.appendInPlace;if(g&&(h==null?void 0:h.interstitial.appendInPlace)===!1)return;const p=(h==null?void 0:h.tracks)||((r=this.detachedData)==null?void 0:r.tracks)||this.requiredTracks;if(g&&l!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(p&&!Uv(p,e.tracks)){const y=new Error(`Asset ${Ju(l)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(p)}')`),T={fatal:!0,type:Gn.OTHER_ERROR,details:wt.INTERSTITIAL_ASSET_ITEM_ERROR,error:y},b=i.findAssetIndex(l);this.handleAssetItemError(T,i,c,b,y.message);return}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,n=this.primaryMedia;if(!t||!n)return;const r=n.currentTime,i=t.findAssetIndex(e,r),l=e.assetList[i];if(l){const c=this.getAssetPlayer(l.identifier);if(c){const f=c.currentTime||r-l.timelineStart,h=c.duration-f;if(this.warn(`Stalled at ${f} of ${f+h} in ${c} ${e} (media.currentTime: ${r})`),f&&(h/n.playbackRate<.5||c.bufferedInPlaceToEnd(n))&&c.hls){const g=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,g,i)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,n,r,i){if(e.details===wt.BUFFER_STALLED_ERROR)return;const l=t.assetList[r]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${l&&Ju(l)} ${e.error}`),!this.schedule)return;const c=(l==null?void 0:l.identifier)||"",f=this.getAssetPlayerQueueIndex(c),h=this.playerQueue[f]||null,g=this.schedule.items,p=Or({},e,{fatal:!1,errorAction:nc(!0),asset:l,assetListIndex:r,event:t,schedule:g,scheduleIndex:n,player:h});if(this.hls.trigger(Se.INTERSTITIAL_ASSET_ERROR,p),!e.fatal)return;const y=this.playingAsset,T=this.bufferingAsset,b=new Error(i);if(l&&(this.clearAssetPlayer(c,null),l.error=b),!t.assetList.some(w=>!w.error))t.error=b;else for(let w=r;w<t.assetList.length;w++)this.resetAssetPlayer(t.assetList[w].identifier);this.updateSchedule(!0),t.error?this.primaryFallback(t):y&&y.identifier===c?this.advanceAfterAssetEnded(t,n,r):T&&T.identifier===c&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,T)}primaryFallback(e){const t=e.timelineStart,n=this.effectivePlayingItem;if(n){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${this.timelinePos} playing: ${es(n)} error: ${e.error}`);let r=this.timelinePos;r===-1&&(r=this.hls.startPosition);const i=this.updateItem(n,r);if(this.itemsMatch(n,i)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t)),!this.schedule)return;const l=this.schedule.findItemIndexAtTime(r);this.setSchedulePosition(l)}else this.checkStart()}onAssetListLoaded(e,t){var n,r;const i=t.event,l=i.identifier,c=t.assetListResponse.ASSETS;if(!((n=this.schedule)!=null&&n.hasEvent(l)))return;const f=i.timelineStart,h=i.duration;let g=0;c.forEach((w,R)=>{const M=parseFloat(w.DURATION);this.createAsset(i,R,g,f+g,M,w.URI),g+=M}),i.duration=g,this.log(`Loaded asset-list with duration: ${g} (was: ${h}) ${i}`);const p=this.waitingItem,y=(p==null?void 0:p.event.identifier)===l;this.updateSchedule();const T=(r=this.bufferingItem)==null?void 0:r.event;if(y){var b;const w=this.schedule.findEventIndex(l),R=(b=this.schedule.items)==null?void 0:b[w];if(R){if(!this.playingItem&&this.timelinePos>R.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==w){i.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${i}`),this.updateSchedule(!0),this.primaryFallback(i);return}this.setBufferingItem(R)}this.setSchedulePosition(w)}else if((T==null?void 0:T.identifier)===l){const w=i.assetList[0];if(w){const R=this.getAssetPlayer(w.identifier);if(T.appendInPlace){const M=this.primaryMedia;R&&M&&this.bufferAssetPlayer(R,M)}else R&&R.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case wt.ASSET_LIST_PARSING_ERROR:case wt.ASSET_LIST_LOAD_ERROR:case wt.ASSET_LIST_LOAD_TIMEOUT:{const n=t.interstitial;n&&(this.updateSchedule(!0),this.primaryFallback(n));break}case wt.BUFFER_STALLED_ERROR:{const n=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&n.event.appendInPlace){this.handleInPlaceStall(n.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const z0=500;class pk extends Rp{constructor(e,t,n){super(e,t,n,"subtitle-stream-controller",Fn.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(Se.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Se.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Se.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(Se.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(Se.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(Se.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(Se.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Se.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Se.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(Se.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(Se.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(Se.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=Wt.IDLE,this.setInterval(z0),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:r}=t;if(this.fragContextChanged(n)||(gi(n)&&(this.fragPrevious=n),this.state=Wt.IDLE),!r)return;const i=this.tracksBuffered[this.currentTrackId];if(!i)return;let l;const c=n.start;for(let h=0;h<i.length;h++)if(c>=i[h].start&&c<=i[h].end){l=i[h];break}const f=n.start+n.duration;l?l.end=f:(l={start:c,end:f},i.push(l)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:n,endOffset:r}=t;if(n===0&&r!==Number.POSITIVE_INFINITY){const i=r-1;if(i<=0)return;t.endOffsetSubtitles=Math.max(0,i),this.tracksBuffered.forEach(l=>{for(let c=0;c<l.length;){if(l[c].end<=i){l.shift();continue}else if(l[c].start<i)l[c].start=i;else break;c++}}),this.fragmentTracker.removeFragmentsInRange(n,i,Fn.SUBTITLE)}}onError(e,t){const n=t.frag;(n==null?void 0:n.type)===Fn.SUBTITLE&&(t.details===wt.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Wt.STOPPED&&(this.state=Wt.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&FE(this.levels,t)){this.levels=t.map(n=>new Ud(n));return}this.tracksBuffered=[],this.levels=t.map(n=>{const r=new Ud(n);return this.tracksBuffered[r.id]=[],r}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Fn.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const r=this.levels[this.currentTrackId];r!=null&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.state!==Wt.STOPPED&&this.setInterval(z0)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:r,levels:i}=this,{details:l,id:c}=t;if(!i){this.warn(`Subtitle tracks were reset while loading level ${c}`);return}const f=i[c];if(c>=i.length||!f)return;this.log(`Subtitle track ${c} loaded [${l.startSN},${l.endSN}]${l.lastPartSn?`[part-${l.lastPartSn}-${l.lastPartIndex}]`:""},duration:${l.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let h=0;if(l.live||(n=f.details)!=null&&n.live){if(l.deltaUpdateFailed)return;const p=this.mainDetails;if(!p){this.startFragRequested=!1;return}const y=p.fragments[0];if(!f.details)l.hasProgramDateTime&&p.hasProgramDateTime?(Zh(l,p),h=l.fragmentStart):y&&(h=y.start,Zm(l,h));else{var g;h=this.alignPlaylists(l,f.details,(g=this.levelLastLoaded)==null?void 0:g.details),h===0&&y&&(h=y.start,Zm(l,h))}p&&!this.startFragRequested&&this.setStartPosition(p,h)}f.details=l,this.levelLastLoaded=f,c===r&&(this.hls.trigger(Se.SUBTITLE_TRACK_UPDATED,{details:l,id:c,groupId:t.groupId}),this.tick(),l.live&&!this.fragCurrent&&this.media&&this.state===Wt.IDLE&&(zl(null,l.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),f.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,r=t.decryptdata,i=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&r!=null&&r.key&&r.iv&&rc(r.method)){const l=performance.now();this.decrypter.decrypt(new Uint8Array(n),r.key.buffer,r.iv.buffer,Ap(r.method)).catch(c=>{throw i.trigger(Se.ERROR,{type:Gn.MEDIA_ERROR,details:wt.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:t}),c}).then(c=>{const f=performance.now();i.trigger(Se.FRAG_DECRYPTED,{frag:t,payload:c,stats:{tstart:l,tdecrypt:f}})}).catch(c=>{this.warn(`${c.name}: ${c.message}`),this.state=Wt.IDLE})}}doTick(){if(!this.media){this.state=Wt.IDLE;return}if(this.state===Wt.IDLE){const{currentTrackId:e,levels:t}=this,n=t==null?void 0:t[e];if(!n||!t.length||!n.details||this.waitForLive(n))return;const{config:r}=this,i=this.getLoadPosition(),l=tr.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],i,r.maxBufferHole),{end:c,len:f}=l,h=n.details,g=this.hls.maxBufferLength+h.levelTargetDuration;if(f>g)return;const p=h.fragments,y=p.length,T=h.edge;let b=null;const w=this.fragPrevious;if(c<T){const Y=r.maxFragLookUpTolerance,Z=c>T-Y?0:Y;b=zl(w,p,Math.max(p[0].start,c),Z),!b&&w&&w.start<p[0].start&&(b=p[0])}else b=p[y-1];if(b=this.filterReplacedPrimary(b,n.details),!b)return;const R=b.sn-h.startSN,M=p[R-1];if(M&&M.cc===b.cc&&this.fragmentTracker.getState(M)===bi.NOT_LOADED&&(b=M),this.fragmentTracker.getState(b)===bi.NOT_LOADED){const Y=this.mapToInitFragWhenRequired(b);Y&&this.loadFragment(Y,n,c)}}}loadFragment(e,t,n){gi(e)?super.loadFragment(e,t,n):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new yk(this.tracksBuffered[this.currentTrackId]||[])}}class yk{constructor(e){this.buffered=void 0;const t=(n,r,i)=>{if(r=r>>>0,r>i-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${r}) is greater than the maximum bound (${i})`);return e[r][n]};this.buffered={get length(){return e.length},end(n){return t("end",n,e.length)},start(n){return t("start",n,e.length)}}}}const vk={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},JE=o=>String.fromCharCode(vk[o]||o),ns=15,no=100,Ek={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},bk={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Tk={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Sk={25:2,26:4,29:6,30:8,31:10,27:13,28:15},_k=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class xk{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n=typeof t=="function"?t():t;Dr.log(`${this.time} [${e}] ${n}`)}}}const Pl=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class eb{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class wk{constructor(){this.uchar=" ",this.penState=new eb}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class Ik{constructor(e){this.chars=[],this.pos=0,this.currPenState=new eb,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<no;t++)this.chars.push(new wk);this.logger=e}equals(e){for(let t=0;t<no;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<no;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<no;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>no&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=no)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=JE(e);if(this.pos>=no){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<no;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<no;n++){const r=this.chars[n].uchar;r!==" "&&(t=!1),e.push(r)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class vm{constructor(e){this.rows=[],this.currRow=ns-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<ns;t++)this.rows.push(new Ik(e));this.logger=e}reset(){for(let e=0;e<ns;e++)this.rows[e].clear();this.currRow=ns-1}equals(e){let t=!0;for(let n=0;n<ns;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<ns;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<ns;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+Kr(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let c=0;c<ns;c++)this.rows[c].clear();const i=this.currRow+1-this.nrRollUpRows,l=this.lastOutputScreen;if(l){const c=l.rows[i].cueStartTime,f=this.logger.time;if(c!==null&&f!==null&&c<f)for(let h=0;h<this.nrRollUpRows;h++)this.rows[t-this.nrRollUpRows+h+1].copy(l.rows[i+h])}}this.currRow=t;const n=this.rows[this.currRow];if(e.indent!==null){const i=e.indent,l=Math.max(i-1,0);n.setCursor(e.indent),e.color=n.chars[l].penState.foreground}const r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+Kr(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",r=-1;for(let i=0;i<ns;i++){const l=this.rows[i].getTextString();l&&(r=i+1,e?t.push("Row "+r+": '"+l+"'"):t.push(l.trim()))}return t.length>0&&(e?n="["+t.join(" | ")+"]":n=t.join(`
`)),n}getTextAndFormat(){return this.rows}}class U0{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new vm(n),this.nonDisplayedMemory=new vm(n),this.lastOutputScreen=new vm(n),this.currRollUpRow=this.displayedMemory.rows[ns-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[ns-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}this.logger.log(2,"MIDROW: "+Kr(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class B0{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=kk(),this.logger=void 0;const r=this.logger=new xk;this.channels=[null,new U0(e,t,r),new U0(e+1,n,r)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let n=0;n<t.length;n+=2){const r=t[n]&127,i=t[n+1]&127;let l=!1,c=null;if(r===0&&i===0)continue;this.logger.log(3,()=>"["+Pl([t[n],t[n+1]])+"] -> ("+Pl([r,i])+")");const f=this.cmdHistory;if(r>=16&&r<=31){if(Ak(r,i,f)){xh(null,null,f),this.logger.log(3,()=>"Repeated command ("+Pl([r,i])+") is dropped");continue}xh(r,i,this.cmdHistory),l=this.parseCmd(r,i),l||(l=this.parseMidrow(r,i)),l||(l=this.parsePAC(r,i)),l||(l=this.parseBackgroundAttributes(r,i))}else xh(null,null,f);if(!l&&(c=this.parseChars(r,i),c)){const g=this.currentChannel;g&&g>0?this.channels[g].insertChars(c):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!l&&!c&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Pl([r,i])+" orig: "+Pl([t[n],t[n+1]]))}}parseCmd(e,t){const n=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,r=(e===23||e===31)&&t>=33&&t<=35;if(!(n||r))return!1;const i=e===20||e===21||e===23?1:2,l=this.channels[i];return e===20||e===21||e===28||e===29?t===32?l.ccRCL():t===33?l.ccBS():t===34?l.ccAOF():t===35?l.ccAON():t===36?l.ccDER():t===37?l.ccRU(2):t===38?l.ccRU(3):t===39?l.ccRU(4):t===40?l.ccFON():t===41?l.ccRDC():t===42?l.ccTR():t===43?l.ccRTD():t===44?l.ccEDM():t===45?l.ccCR():t===46?l.ccENM():t===47&&l.ccEOC():l.ccTO(t-32),this.currentChannel=i,!0}parseMidrow(e,t){let n=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[n];return r?(r.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+Pl([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let n;const r=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,i=(e===16||e===24)&&t>=64&&t<=95;if(!(r||i))return!1;const l=e<=23?1:2;t>=64&&t<=95?n=l===1?Ek[e]:Tk[e]:n=l===1?bk[e]:Sk[e];const c=this.channels[l];return c?(c.setPAC(this.interpretPAC(n,t)),this.currentChannel=l,!0):!1}interpretPAC(e,t){let n;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?n=t-96:n=t-64,r.underline=(n&1)===1,n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=Math.floor((n-16)/2)*4,r}parseChars(e,t){let n,r=null,i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),i>=17&&i<=19){let l;i===17?l=t+80:i===18?l=t+112:l=t+144,this.logger.log(2,()=>"Special char '"+JE(l)+"' in channel "+n),r=[l]}else e>=32&&e<=127&&(r=t===0?[e]:[e,t]);return r&&this.logger.log(3,()=>"Char codes =  "+Pl(r).join(",")),r}parseBackgroundAttributes(e,t){const n=(e===16||e===24)&&t>=32&&t<=47,r=(e===23||e===31)&&t>=45&&t<=47;if(!(n||r))return!1;let i;const l={};e===16||e===24?(i=Math.floor((t-32)/2),l.background=_k[i],t%2===1&&(l.background=l.background+"_semi")):t===45?l.background="transparent":(l.foreground="black",t===47&&(l.underline=!0));const c=e<=23?1:2;return this.channels[c].setBkgData(l),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}xh(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function xh(o,e,t){t.a=o,t.b=e}function Ak(o,e,t){return t.a===o&&t.b===e}function kk(){return{a:null,b:null}}var jp=function(){if(Qh!=null&&Qh.VTTCue)return self.VTTCue;const o=["","lr","rl"],e=["start","middle","end","left","right"];function t(c,f){if(typeof f!="string"||!Array.isArray(c))return!1;const h=f.toLowerCase();return~c.indexOf(h)?h:!1}function n(c){return t(o,c)}function r(c){return t(e,c)}function i(c,...f){let h=1;for(;h<arguments.length;h++){const g=arguments[h];for(const p in g)c[p]=g[p]}return c}function l(c,f,h){const g=this,p={enumerable:!0};g.hasBeenReset=!1;let y="",T=!1,b=c,w=f,R=h,M=null,Y="",Z=!0,ye="auto",Re="start",F=50,k="middle",j=50,oe="middle";Object.defineProperty(g,"id",i({},p,{get:function(){return y},set:function(L){y=""+L}})),Object.defineProperty(g,"pauseOnExit",i({},p,{get:function(){return T},set:function(L){T=!!L}})),Object.defineProperty(g,"startTime",i({},p,{get:function(){return b},set:function(L){if(typeof L!="number")throw new TypeError("Start time must be set to a number.");b=L,this.hasBeenReset=!0}})),Object.defineProperty(g,"endTime",i({},p,{get:function(){return w},set:function(L){if(typeof L!="number")throw new TypeError("End time must be set to a number.");w=L,this.hasBeenReset=!0}})),Object.defineProperty(g,"text",i({},p,{get:function(){return R},set:function(L){R=""+L,this.hasBeenReset=!0}})),Object.defineProperty(g,"region",i({},p,{get:function(){return M},set:function(L){M=L,this.hasBeenReset=!0}})),Object.defineProperty(g,"vertical",i({},p,{get:function(){return Y},set:function(L){const Ee=n(L);if(Ee===!1)throw new SyntaxError("An invalid or illegal string was specified.");Y=Ee,this.hasBeenReset=!0}})),Object.defineProperty(g,"snapToLines",i({},p,{get:function(){return Z},set:function(L){Z=!!L,this.hasBeenReset=!0}})),Object.defineProperty(g,"line",i({},p,{get:function(){return ye},set:function(L){if(typeof L!="number"&&L!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");ye=L,this.hasBeenReset=!0}})),Object.defineProperty(g,"lineAlign",i({},p,{get:function(){return Re},set:function(L){const Ee=r(L);if(!Ee)throw new SyntaxError("An invalid or illegal string was specified.");Re=Ee,this.hasBeenReset=!0}})),Object.defineProperty(g,"position",i({},p,{get:function(){return F},set:function(L){if(L<0||L>100)throw new Error("Position must be between 0 and 100.");F=L,this.hasBeenReset=!0}})),Object.defineProperty(g,"positionAlign",i({},p,{get:function(){return k},set:function(L){const Ee=r(L);if(!Ee)throw new SyntaxError("An invalid or illegal string was specified.");k=Ee,this.hasBeenReset=!0}})),Object.defineProperty(g,"size",i({},p,{get:function(){return j},set:function(L){if(L<0||L>100)throw new Error("Size must be between 0 and 100.");j=L,this.hasBeenReset=!0}})),Object.defineProperty(g,"align",i({},p,{get:function(){return oe},set:function(L){const Ee=r(L);if(!Ee)throw new SyntaxError("An invalid or illegal string was specified.");oe=Ee,this.hasBeenReset=!0}})),g.displayState=void 0}return l.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},l}();class Rk{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function tb(o){function e(n,r,i,l){return(n|0)*3600+(r|0)*60+(i|0)+parseFloat(l||0)}const t=o.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class Ck{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function nb(o,e,t,n){const r=n?o.split(n):[o];for(const i in r){if(typeof r[i]!="string")continue;const l=r[i].split(t);if(l.length!==2)continue;const c=l[0],f=l[1];e(c,f)}}const sp=new jp(0,0,""),wh=sp.align==="middle"?"middle":"center";function Nk(o,e,t){const n=o;function r(){const c=tb(o);if(c===null)throw new Error("Malformed timestamp: "+n);return o=o.replace(/^[^\sa-zA-Z-]+/,""),c}function i(c,f){const h=new Ck;nb(c,function(y,T){let b;switch(y){case"region":for(let w=t.length-1;w>=0;w--)if(t[w].id===T){h.set(y,t[w].region);break}break;case"vertical":h.alt(y,T,["rl","lr"]);break;case"line":b=T.split(","),h.integer(y,b[0]),h.percent(y,b[0])&&h.set("snapToLines",!1),h.alt(y,b[0],["auto"]),b.length===2&&h.alt("lineAlign",b[1],["start",wh,"end"]);break;case"position":b=T.split(","),h.percent(y,b[0]),b.length===2&&h.alt("positionAlign",b[1],["start",wh,"end","line-left","line-right","auto"]);break;case"size":h.percent(y,T);break;case"align":h.alt(y,T,["start",wh,"end","left","right"]);break}},/:/,/\s/),f.region=h.get("region",null),f.vertical=h.get("vertical","");let g=h.get("line","auto");g==="auto"&&sp.line===-1&&(g=-1),f.line=g,f.lineAlign=h.get("lineAlign","start"),f.snapToLines=h.get("snapToLines",!0),f.size=h.get("size",100),f.align=h.get("align",wh);let p=h.get("position","auto");p==="auto"&&sp.position===50&&(p=f.align==="start"||f.align==="left"?0:f.align==="end"||f.align==="right"?100:50),f.position=p}function l(){o=o.replace(/^\s+/,"")}if(l(),e.startTime=r(),l(),o.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);o=o.slice(3),l(),e.endTime=r(),l(),i(o,e)}function rb(o){return o.replace(/<br(?: \/)?>/gi,`
`)}class Dk{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new Rk,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function n(){let i=t.buffer,l=0;for(i=rb(i);l<i.length&&i[l]!=="\r"&&i[l]!==`
`;)++l;const c=i.slice(0,l);return i[l]==="\r"&&++l,i[l]===`
`&&++l,t.buffer=i.slice(l),c}function r(i){nb(i,function(l,c){},/:/)}try{let i="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;i=n();const c=i.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(c!=null&&c[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let l=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(l?l=!1:i=n(),t.state){case"HEADER":/:/.test(i)?r(i):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new jp(0,0,""),t.state="CUE",i.indexOf("-->")===-1){t.cue.id=i;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{Nk(i,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const c=i.indexOf("-->")!==-1;if(!i||c&&(l=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=i}continue;case"BADCUE":i||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const Lk=/\r\n|\n\r|\n|\r/g,Em=function(e,t,n=0){return e.slice(n,n+t.length)===t},Pk=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),i=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Dn(t)||!Dn(n)||!Dn(r)||!Dn(i))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=60*1e3*r,t+=60*60*1e3*i,t};function qp(o,e,t){return Dd(o.toString())+Dd(e.toString())+Dd(t)}const Mk=function(e,t,n){let r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new){e.ccOffset=e.presentationOffset=r.start,r.new=!1;return}for(;(l=i)!=null&&l.new;){var l;e.ccOffset+=r.start-i.start,r.new=!1,r=i,i=e[r.prevCC]}e.presentationOffset=n};function Ok(o,e,t,n,r,i,l){const c=new Dk,f=xa(new Uint8Array(o)).trim().replace(Lk,`
`).split(`
`),h=[],g=e?GI(e.baseTime,e.timescale):0;let p="00:00.000",y=0,T=0,b,w=!0;c.oncue=function(R){const M=t[n];let Y=t.ccOffset;const Z=(y-g)/9e4;if(M!=null&&M.new&&(T!==void 0?Y=t.ccOffset=M.start:Mk(t,n,Z)),Z){if(!e){b=new Error("Missing initPTS for VTT MPEGTS");return}Y=Z-t.presentationOffset}const ye=R.endTime-R.startTime,Re=Ua((R.startTime+Y-T)*9e4,r*9e4)/9e4;R.startTime=Math.max(Re,0),R.endTime=Math.max(Re+ye,0);const F=R.text.trim();R.text=decodeURIComponent(encodeURIComponent(F)),R.id||(R.id=qp(R.startTime,R.endTime,F)),R.endTime>0&&h.push(R)},c.onparsingerror=function(R){b=R},c.onflush=function(){if(b){l(b);return}i(h)},f.forEach(R=>{if(w)if(Em(R,"X-TIMESTAMP-MAP=")){w=!1,R.slice(16).split(",").forEach(M=>{Em(M,"LOCAL:")?p=M.slice(6):Em(M,"MPEGTS:")&&(y=parseInt(M.slice(7)))});try{T=Pk(p)/1e3}catch(M){b=M}return}else R===""&&(w=!1);c.parse(R+`
`)}),c.flush()}const bm="stpp.ttml.im1t",ib=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,ab=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Fk={left:"start",center:"center",right:"end",start:"start",end:"end"};function j0(o,e,t,n){const r=dr(new Uint8Array(o),["mdat"]);if(r.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const i=r.map(c=>xa(c)),l=qI(e.baseTime,1,e.timescale);try{i.forEach(c=>t(zk(c,l)))}catch(c){n(c)}}function zk(o,e){const r=new DOMParser().parseFromString(o,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},l=Object.keys(i).reduce((p,y)=>(p[y]=r.getAttribute(`ttp:${y}`)||i[y],p),{}),c=r.getAttribute("xml:space")!=="preserve",f=q0(Tm(r,"styling","style")),h=q0(Tm(r,"layout","region")),g=Tm(r,"body","[begin]");return[].map.call(g,p=>{const y=sb(p,c);if(!y||!p.hasAttribute("begin"))return null;const T=_m(p.getAttribute("begin"),l),b=_m(p.getAttribute("dur"),l);let w=_m(p.getAttribute("end"),l);if(T===null)throw G0(p);if(w===null){if(b===null)throw G0(p);w=T+b}const R=new jp(T-e,w-e,y);R.id=qp(R.startTime,R.endTime,R.text);const M=h[p.getAttribute("region")],Y=f[p.getAttribute("style")],Z=Uk(M,Y,f),{textAlign:ye}=Z;if(ye){const Re=Fk[ye];Re&&(R.lineAlign=Re),R.align=ye}return Or(R,Z),R}).filter(p=>p!==null)}function Tm(o,e,t){const n=o.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(t)):[]}function q0(o){return o.reduce((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function sb(o,e){return[].slice.call(o.childNodes).reduce((t,n,r)=>{var i;return n.nodeName==="br"&&r?t+`
`:(i=n.childNodes)!=null&&i.length?sb(n,e):e?t+n.textContent.trim().replace(/\s+/g," "):t+n.textContent},"")}function Uk(o,e,t){const n="http://www.w3.org/ns/ttml#styling";let r=null;const i=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],l=o!=null&&o.hasAttribute("style")?o.getAttribute("style"):null;return l&&t.hasOwnProperty(l)&&(r=t[l]),i.reduce((c,f)=>{const h=Sm(e,n,f)||Sm(o,n,f)||Sm(r,n,f);return h&&(c[f]=h),c},{})}function Sm(o,e,t){return o&&o.hasAttributeNS(e,t)?o.getAttributeNS(e,t):null}function G0(o){return new Error(`Could not parse ttml timestamp ${o}`)}function _m(o,e){if(!o)return null;let t=tb(o);return t===null&&(ib.test(o)?t=Bk(o,e):ab.test(o)&&(t=jk(o,e))),t}function Bk(o,e){const t=ib.exec(o),n=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+n/e.frameRate}function jk(o,e){const t=ab.exec(o),n=Number(t[1]);switch(t[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class Ih{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class qk{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=H0(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(Se.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Se.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Se.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Se.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(Se.FRAG_LOADING,this.onFragLoading,this),e.on(Se.FRAG_LOADED,this.onFragLoaded,this),e.on(Se.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(Se.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(Se.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(Se.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(Se.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(Se.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Se.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Se.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Se.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(Se.FRAG_LOADING,this.onFragLoading,this),e.off(Se.FRAG_LOADED,this.onFragLoaded,this),e.off(Se.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(Se.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(Se.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(Se.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(Se.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new Ih(this,"textTrack1"),t=new Ih(this,"textTrack2"),n=new Ih(this,"textTrack3"),r=new Ih(this,"textTrack4");this.cea608Parser1=new B0(1,e,t),this.cea608Parser2=new B0(3,n,r)}addCues(e,t,n,r,i){let l=!1;for(let c=i.length;c--;){const f=i[c],h=Gk(f[0],f[1],t,n);if(h>=0&&(f[0]=Math.min(f[0],t),f[1]=Math.max(f[1],n),l=!0,h/(n-t)>.5))return}if(l||i.push([t,n]),this.config.renderTextTracksNatively){const c=this.captionsTracks[e];this.Cues.newCue(c,t,n,r)}else{const c=this.Cues.newCue(null,t,n,r);this.hls.trigger(Se.CUES_PARSED,{type:"captions",cues:c,track:e})}}onInitPtsFound(e,{frag:t,id:n,initPTS:r,timescale:i,trackId:l}){const{unparsedVttFrags:c}=this;n===Fn.MAIN&&(this.initPTS[t.cc]={baseTime:r,timescale:i,trackId:l}),c.length&&(this.unparsedVttFrags=[],c.forEach(f=>{this.initPTS[f.frag.cc]?this.onFragLoaded(Se.FRAG_LOADED,f):this.hls.trigger(Se.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:f.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let r=0;r<n.textTracks.length;r++){const i=n.textTracks[r];if($0(i,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return i}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:r}=this,{label:i,languageCode:l}=t[e],c=this.getExistingTrack(i,l);if(c)n[e]=c,tc(n[e]),XE(n[e],r);else{const f=this.createTextTrack("captions",i,l);f&&(f[e]=!0,n[e]=f)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n=t.label,r={_id:e,label:n,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(Se.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}createTextTrack(e,t,n){const r=this.media;if(r)return r.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const n=!!t.transferMedia;if(this.media=null,n)return;const{captionsTracks:r}=this;Object.keys(r).forEach(i=>{tc(r[i]),delete r[i]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=H0(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)tc(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],r=n.some(i=>i.textCodec===bm);if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(FE(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const l=this.media,c=l?Bh(l.textTracks):null;if(this.tracks.forEach((f,h)=>{let g;if(c){let p=null;for(let y=0;y<c.length;y++)if(c[y]&&$0(c[y],f)){p=c[y],c[y]=null;break}p&&(g=p)}if(g)tc(g);else{const p=ob(f);g=this.createTextTrack(p,f.name,f.lang),g&&(g.mode="disabled")}g&&this.textTracks.push(g)}),c!=null&&c.length){const f=c.filter(h=>h!==null).map(h=>h.label);f.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${f.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const l=this.tracks.map(c=>({label:c.name,kind:c.type.toLowerCase(),default:c.default,subtitleTrack:c}));this.hls.trigger(Se.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:l})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(n=>{const r=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!r)return;const i=`textTrack${r[1]}`,l=this.captionsProperties[i];l&&(l.label=n.name,n.lang&&(l.languageCode=n.lang),l.media=n)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t==null?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===Fn.MAIN){var n,r;const{cea608Parser1:i,cea608Parser2:l,lastSn:c}=this,{cc:f,sn:h}=t.frag,g=(n=(r=t.part)==null?void 0:r.index)!=null?n:-1;i&&l&&(h!==c+1||h===c&&g!==this.lastPartIndex+1||f!==this.lastCc)&&(i.reset(),l.reset()),this.lastCc=f,this.lastSn=h,this.lastPartIndex=g}}onFragLoaded(e,t){const{frag:n,payload:r}=t;if(n.type===Fn.SUBTITLE)if(r.byteLength){const i=n.decryptdata,l="stats"in t;if(i==null||!i.encrypted||l){const c=this.tracks[n.level],f=this.vttCCs;f[n.cc]||(f[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),c&&c.textCodec===bm?this._parseIMSC1(n,r):this._parseVTTs(t)}}else this.hls.trigger(Se.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;j0(t,this.initPTS[e.cc],r=>{this._appendCues(r,e.level),n.trigger(Se.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},r=>{n.logger.log(`Failed to parse IMSC1: ${r}`),n.trigger(Se.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:r})})}_parseVTTs(e){var t;const{frag:n,payload:r}=e,{initPTS:i,unparsedVttFrags:l}=this,c=i.length-1;if(!i[n.cc]&&c===-1){l.push(e);return}const f=this.hls,h=(t=n.initSegment)!=null&&t.data?$a(n.initSegment.data,new Uint8Array(r)).buffer:r;Ok(h,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,g=>{this._appendCues(g,n.level),f.trigger(Se.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},g=>{const p=g.message==="Missing initPTS for VTT MPEGTS";p?l.push(e):this._fallbackToIMSC1(n,r),f.logger.log(`Failed to parse VTT cue: ${g}`),!(p&&c>n.cc)&&f.trigger(Se.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:g})})}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||j0(t,this.initPTS[e.cc],()=>{n.textCodec=bm,this._parseIMSC1(e,t)},()=>{n.textCodec="wvtt"})}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const r=this.textTracks[t];if(!r||r.mode==="disabled")return;e.forEach(i=>QE(r,i))}else{const r=this.tracks[t];if(!r)return;const i=r.default?"default":"subtitles"+t;n.trigger(Se.CUES_PARSED,{type:"subtitles",cues:e,track:i})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===Fn.SUBTITLE&&this.onFragLoaded(Se.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:r}=t;if(!(n.type===Fn.MAIN&&this.closedCaptionsForLevel(n)==="NONE"))for(let i=0;i<r.length;i++){const l=r[i].bytes;if(l){this.cea608Parser1||this.initCea608Parsers();const c=this.extractCea608Data(l);this.cea608Parser1.addData(r[i].pts,c[0]),this.cea608Parser2.addData(r[i].pts,c[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:n,endOffsetSubtitles:r,type:i}){const{media:l}=this;if(!(!l||l.currentTime<n)){if(!i||i==="video"){const{captionsTracks:c}=this;Object.keys(c).forEach(f=>ap(c[f],t,n))}if(this.config.renderTextTracksNatively&&t===0&&r!==void 0){const{textTracks:c}=this;Object.keys(c).forEach(f=>ap(c[f],t,r))}}}extractCea608Data(e){const t=[[],[]],n=e[0]&31;let r=2;for(let i=0;i<n;i++){const l=e[r++],c=127&e[r++],f=127&e[r++];if(c===0&&f===0)continue;if((4&l)!==0){const g=3&l;(g===0||g===1)&&(t[g].push(c),t[g].push(f))}}return t}}function ob(o){return o.characteristics&&/transcribes-spoken-dialog/gi.test(o.characteristics)&&/describes-music-and-sound/gi.test(o.characteristics)?"captions":"subtitles"}function $0(o,e){return!!o&&o.kind===ob(e)&&tp(e,o)}function Gk(o,e,t,n){return Math.min(e,n)-Math.max(o,t)}function H0(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const $k=/\s/,Hk={newCue(o,e,t,n){const r=[];let i,l,c,f,h;const g=self.VTTCue||self.TextTrackCue;for(let y=0;y<n.rows.length;y++)if(i=n.rows[y],c=!0,f=0,h="",!i.isEmpty()){var p;for(let w=0;w<i.chars.length;w++)$k.test(i.chars[w].uchar)&&c?f++:(h+=i.chars[w].uchar,c=!1);i.cueStartTime=e,e===t&&(t+=1e-4),f>=16?f--:f++;const T=rb(h.trim()),b=qp(e,t,T);o!=null&&(p=o.cues)!=null&&p.getCueById(b)||(l=new g(e,t,T),l.id=b,l.line=y+1,l.align="left",l.position=10+Math.min(80,Math.floor(f*8/32)*10),r.push(l))}return o&&r.length&&(r.sort((y,T)=>y.line==="auto"||T.line==="auto"?0:y.line>8&&T.line>8?T.line-y.line:y.line-T.line),r.forEach(y=>QE(o,y))),r}};function Vk(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const Kk=/(\d+)-(\d+)\/(\d+)/;class V0{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Qk,this.controller=new self.AbortController,this.stats=new bp}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();const i=Yk(e,this.controller.signal),l=e.responseType==="arraybuffer",c=l?"byteLength":"length",{maxTimeToFirstByteMs:f,maxLoadTimeMs:h}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,i),self.clearTimeout(this.requestTimeout),t.timeout=f&&Dn(f)?f:h,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(r,e,this.response))},t.timeout),(qd(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(p=>{var y;this.response=this.loader=p;const T=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=h,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(r,e,this.response))},h-(T-r.loading.start)),!p.ok){const{status:w,statusText:R}=p;throw new Zk(R||"fetch, bad network response",w,p)}r.loading.first=T,r.total=Xk(p.headers)||r.total;const b=(y=this.callbacks)==null?void 0:y.onProgress;return b&&Dn(t.highWaterMark)?this.loadProgressively(p,r,e,t.highWaterMark,b):l?p.arrayBuffer():e.responseType==="json"?p.json():p.text()}).then(p=>{var y,T;const b=this.response;if(!b)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);const w=p[c];w&&(r.loaded=r.total=w);const R={url:b.url,data:p,code:b.status},M=(y=this.callbacks)==null?void 0:y.onProgress;M&&!Dn(t.highWaterMark)&&M(r,e,p,b),(T=this.callbacks)==null||T.onSuccess(R,r,e,b)}).catch(p=>{var y;if(self.clearTimeout(this.requestTimeout),r.aborted)return;const T=p&&p.code||0,b=p?p.message:null;(y=this.callbacks)==null||y.onError({code:T,text:b},e,p?p.details:null,r)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n,r=0,i){const l=new yE,c=e.body.getReader(),f=()=>c.read().then(h=>{if(h.done)return l.dataLength&&i(t,n,l.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const g=h.value,p=g.length;return t.loaded+=p,p<r||l.dataLength?(l.push(g),l.dataLength>=r&&i(t,n,l.flush().buffer,e)):i(t,n,g.buffer,e),f()}).catch(()=>Promise.reject());return f()}}function Yk(o,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Or({},o.headers))};return o.rangeEnd&&t.headers.set("Range","bytes="+o.rangeStart+"-"+String(o.rangeEnd-1)),t}function Wk(o){const e=Kk.exec(o);if(e)return parseInt(e[2])-parseInt(e[1])+1}function Xk(o){const e=o.get("Content-Range");if(e){const n=Wk(e);if(Dn(n))return n}const t=o.get("Content-Length");if(t)return parseInt(t)}function Qk(o,e){return new self.Request(o.url,e)}class Zk extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const Jk=/^age:\s*[\d.]+\s*$/im;class lb{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new bp,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;const i=this.xhrSetup;i?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return i(n,t.url)}).catch(l=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",t.url,!0),i(n,t.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)}).catch(l=>{var c;(c=this.callbacks)==null||c.onError({code:n.status,text:l.message},t,n,r)}):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const r=t.headers,{maxTimeToFirstByteMs:i,maxLoadTimeMs:l}=n.loadPolicy;if(r)for(const c in r)e.setRequestHeader(c,r[c]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=i&&Dn(i)?i:l,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const r=t.readyState,i=this.config;if(!n.aborted&&r>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),i.timeout!==i.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),i.timeout=i.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),r===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const h=t.status,g=t.responseType==="text"?t.responseText:null;if(h>=200&&h<300){const b=g??t.response;if(b!=null){var l,c;n.loading.end=Math.max(self.performance.now(),n.loading.first);const w=t.responseType==="arraybuffer"?b.byteLength:b.length;n.loaded=n.total=w,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first);const R=(l=this.callbacks)==null?void 0:l.onProgress;R&&R(n,e,b,t);const M={url:t.responseURL,data:b,code:h};(c=this.callbacks)==null||c.onSuccess(M,n,e,t);return}}const p=i.loadPolicy.errorRetry,y=n.retry,T={url:e.url,data:void 0,code:h};if(Xh(p,y,!1,T))this.retry(p);else{var f;Dr.error(`${h} while loading ${e.url}`),(f=this.callbacks)==null||f.onError({code:h,text:t.statusText},e,t,n)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(Xh(e,t,!0))this.retry(e);else{var n;Dr.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const r=this.callbacks;r&&(this.abortInternal(),r.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=xp(e,n.retry),n.retry++,Dr.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t==null?void 0:t.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&Jk.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const eR={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},tR=Mr(Mr({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:lb,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:fw,bufferController:iA,capLevelController:zp,errorController:yw,fpsController:ik,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:oE,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:eR},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},nR()),{},{subtitleStreamController:pk,subtitleTrackController:ok,timelineController:qk,audioStreamController:eA,audioTrackController:tA,emeController:ic,cmcdController:tk,contentSteeringController:rk,interstitialsController:mk});function nR(){return{cueHandler:Hk,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function rR(o,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=op(o),r=["manifest","level","frag"],i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return r.forEach(l=>{const c=`${l==="level"?"playlist":l}LoadPolicy`,f=e[c]===void 0,h=[];i.forEach(g=>{const p=`${l}Loading${g}`,y=e[p];if(y!==void 0&&f){h.push(p);const T=n[c].default;switch(e[c]={default:T},g){case"TimeOut":T.maxLoadTimeMs=y,T.maxTimeToFirstByteMs=y;break;case"MaxRetry":T.errorRetry.maxNumRetry=y,T.timeoutRetry.maxNumRetry=y;break;case"RetryDelay":T.errorRetry.retryDelayMs=y,T.timeoutRetry.retryDelayMs=y;break;case"MaxRetryTimeout":T.errorRetry.maxRetryDelayMs=y,T.timeoutRetry.maxRetryDelayMs=y;break}}}),h.length&&t.warn(`hls.js config: "${h.join('", "')}" setting(s) are deprecated, use "${c}": ${Kr(e[c])}`)}),Mr(Mr({},n),e)}function op(o){return o&&typeof o=="object"?Array.isArray(o)?o.map(op):Object.keys(o).reduce((e,t)=>(e[t]=op(o[t]),e),{}):o}function iR(o,e){const t=o.loader;t!==V0&&t!==lb?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),o.progressive=!1):Vk()&&(o.loader=V0,o.progressive=!0,o.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const jh=2,aR=.1,sR=.05,oR=100;class lR extends rE{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var n;(n=this.media)!=null&&n.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var n;this.ended=((n=this.media)==null?void 0:n.currentTime)||1,this.hls.trigger(Se.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(Se.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Se.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Se.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(Se.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Se.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Se.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(oR),this.mediaSource=t.mediaSource;const n=this.media=t.media;Wi(n,"playing",this.onMediaPlaying),Wi(n,"waiting",this.onMediaWaiting),Wi(n,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:n}=this;n&&(la(n,"playing",this.onMediaPlaying),la(n,"waiting",this.onMediaWaiting),la(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var n,r;const i=(n=this.hls)==null?void 0:n.config;if(!i)return;const l=this.media;if(!l)return;const{seeking:c}=l,f=this.seeking&&!c,h=!this.seeking&&c,g=l.paused&&!c||l.ended||l.playbackRate===0;if(this.seeking=c,e!==t){t&&(this.ended=0),this.moved=!0,c||(this.nudgeRetry=0,i.nudgeOnVideoHole&&!g&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(h||f){f&&this.stallResolved(e);return}if(g){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&l.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(Se.MEDIA_ENDED,{stalled:!1}));return}if(!tr.getBuffered(l).length){this.nudgeRetry=0;return}const p=tr.bufferInfo(l,e,0),y=p.nextStart||0,T=this.fragmentTracker;if(c&&T&&this.hls){const F=K0(this.hls.inFlightFragments,e),k=p.len>jh,j=!y||F||y-e>jh&&!T.getPartialFragment(e);if(k||j)return;this.moved=!1}const b=(r=this.hls)==null?void 0:r.latestLevelDetails;if(!this.moved&&this.stalled!==null&&T){if(!(p.len>0)&&!y)return;const k=Math.max(y,p.start||0)-e,oe=!!(b!=null&&b.live)?b.targetduration*2:jh,L=Ah(e,T);if(k>0&&(k<=oe||L)){l.paused||this._trySkipBufferHole(L);return}}const w=i.detectStallWithCurrentTimeMs,R=self.performance.now(),M=this.waiting;let Y=this.stalled;if(Y===null)if(M>0&&R-M<w)Y=this.stalled=M;else{this.stalled=R;return}const Z=R-Y;if(!c&&(Z>=w||M)&&this.hls){var ye;if(((ye=this.mediaSource)==null?void 0:ye.readyState)==="ended"&&!(b!=null&&b.live)&&Math.abs(e-((b==null?void 0:b.edge)||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(Se.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(p),!this.media||!this.hls)return}const Re=tr.bufferInfo(l,e,i.maxBufferHole);this._tryFixBufferStall(Re,Z,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const n=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(n)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(Se.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var n;const r=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(n=this.buffered.audio)!=null&&n.length&&r&&r.length>1&&e>r.end(0)){const i=tr.bufferedInfo(tr.timeRangesToArray(this.buffered.audio),e,0);if(i.len>1&&t>=i.start){const l=tr.timeRangesToArray(r),c=tr.bufferedInfo(l,t,0).bufferedIndex;if(c>-1&&c<l.length-1){const f=tr.bufferedInfo(l,e,0).bufferedIndex,h=l[c].end,g=l[c+1].start;if((f===-1||f>c)&&g-h<1&&e-h<2){const p=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${h} -> ${g} buffered index: ${f}`);this.warn(p.message),this.media.currentTime+=1e-6;let y=Ah(e,this.fragmentTracker);y&&"fragment"in y?y=y.fragment:y||(y=void 0);const T=tr.bufferInfo(this.media,e,0);this.hls.trigger(Se.ERROR,{type:Gn.MEDIA_ERROR,details:wt.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:p,reason:p.message,frag:y,buffer:T.len,bufferInfo:T})}}}}}_tryFixBufferStall(e,t,n){var r,i;const{fragmentTracker:l,media:c}=this,f=(r=this.hls)==null?void 0:r.config;if(!c||!l||!f)return;const h=(i=this.hls)==null?void 0:i.latestLevelDetails,g=Ah(n,l);if((g||h!=null&&h.live&&n<h.fragmentStart)&&(this._trySkipBufferHole(g)||!this.media))return;const p=e.buffered,y=this.adjacentTraversal(e,n);(p&&p.length>1&&e.len>f.maxBufferHole||e.nextStart&&(e.nextStart-n<f.maxBufferHole||y))&&(t>f.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const n=this.fragmentTracker,r=e.nextStart;if(n&&r){const i=n.getFragAtPos(t,Fn.MAIN),l=n.getFragAtPos(r,Fn.MAIN);if(i&&l)return l.sn-i.sn<2}return!1}_reportStall(e){const{hls:t,media:n,stallReported:r,stalled:i}=this;if(!r&&i!==null&&n&&t){this.stallReported=!0;const l=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${Kr(e)})`);this.warn(l.message),t.trigger(Se.ERROR,{type:Gn.MEDIA_ERROR,details:wt.BUFFER_STALLED_ERROR,fatal:!1,error:l,buffer:e.len,bufferInfo:e,stalled:{start:i}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:n,media:r}=this,i=(t=this.hls)==null?void 0:t.config;if(!r||!n||!i)return 0;const l=r.currentTime,c=tr.bufferInfo(r,l,0),f=l<c.start?c.start:c.nextStart;if(f&&this.hls){const g=c.len<=i.maxBufferHole,p=c.len>0&&c.len<1&&r.readyState<3,y=f-l;if(y>0&&(g||p)){if(y>i.maxBufferHole){let b=!1;if(l===0){const w=n.getAppendedFrag(0,Fn.MAIN);w&&f<w.end&&(b=!0)}if(!b&&e){var h;if(!((h=this.hls.loadLevelObj)!=null&&h.details)||K0(this.hls.inFlightFragments,f))return 0;let R=!1,M=e.end;for(;M<f;){const Y=Ah(M,n);if(Y)M+=Y.duration;else{R=!0;break}}if(R)return 0}}const T=Math.max(f+sR,l+aR);if(this.warn(`skipping hole, adjusting currentTime from ${l} to ${T}`),this.moved=!0,r.currentTime=T,!(e!=null&&e.gap)){const b=new Error(`fragment loaded with buffer holes, seeking from ${l} to ${T}`),w={type:Gn.MEDIA_ERROR,details:wt.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:b,reason:b.message,buffer:c.len,bufferInfo:c};e&&("fragment"in e?w.part=e:w.frag=e),this.hls.trigger(Se.ERROR,w)}return T}}return 0}_tryNudgeBuffer(e){const{hls:t,media:n,nudgeRetry:r}=this,i=t==null?void 0:t.config;if(!n||!i)return 0;const l=n.currentTime;if(this.nudgeRetry++,r<i.nudgeMaxRetry){const c=l+(r+1)*i.nudgeOffset,f=new Error(`Nudging 'currentTime' from ${l} to ${c}`);this.warn(f.message),n.currentTime=c,t.trigger(Se.ERROR,{type:Gn.MEDIA_ERROR,details:wt.BUFFER_NUDGE_ON_STALL,error:f,fatal:!1,buffer:e.len,bufferInfo:e})}else{const c=new Error(`Playhead still not moving while enough data buffered @${l} after ${i.nudgeMaxRetry} nudges`);this.error(c.message),t.trigger(Se.ERROR,{type:Gn.MEDIA_ERROR,details:wt.BUFFER_STALLED_ERROR,error:c,fatal:!0,buffer:e.len,bufferInfo:e})}}}function K0(o,e){const t=Y0(o.main);if(t&&t.start<=e)return t;const n=Y0(o.audio);return n&&n.start<=e?n:null}function Y0(o){if(!o)return null;switch(o.state){case Wt.IDLE:case Wt.STOPPED:case Wt.ENDED:case Wt.ERROR:return null}return o.frag}function Ah(o,e){return e.getAppendedFrag(o,Fn.MAIN)||e.getPartialFragment(o)}const uR=.25;function lp(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function xm(o,e,t,n,r){let i=new o(e,t,"");try{i.value=n,r&&(i.type=r)}catch{i=new o(e,t,Kr(r?Mr({type:r},n):n))}return i}const kh=(()=>{const o=lp();try{o&&new o(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class cR{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(Se.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(Se.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(Se.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Se.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Se.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(Se.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(Se.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Se.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(Se.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(Se.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Se.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Se.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(Se.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(Se.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Se.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var n;this.media=t.media,((n=t.overrides)==null?void 0:n.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const t=(e=this.hls)==null?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&tc(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if(n.kind==="metadata"&&n.label==="id3")return XE(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:n,enableID3MetadataCues:r}=this.hls.config;if(!n&&!r)return;const{samples:i}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=lp();if(l)for(let c=0;c<i.length;c++){const f=i[c].type;if(f===_a.emsg&&!n||!r)continue;const h=xE(i[c].data),g=i[c].pts;let p=g+i[c].duration;p>kh&&(p=kh),p-g<=0&&(p=g+uR);for(let T=0;T<h.length;T++){const b=h[T];if(!wE(b)){this.updateId3CueEnds(g,f);const w=xm(l,g,p,b,f);w&&this.id3Track.addCue(w)}}}}updateId3CueEnds(e,t){var n;const r=(n=this.id3Track)==null?void 0:n.cues;if(r)for(let i=r.length;i--;){const l=r[i];l.type===t&&l.startTime<e&&l.endTime===kh&&(l.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:n,type:r}){const{id3Track:i,hls:l}=this;if(!l)return;const{config:{enableEmsgMetadataCues:c,enableID3MetadataCues:f}}=l;if(i&&(c||f)){let h;r==="audio"?h=g=>g.type===_a.audioId3&&f:r==="video"?h=g=>g.type===_a.emsg&&c:h=g=>g.type===_a.audioId3&&f||g.type===_a.emsg&&c,ap(i,t,n,h)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;const{assetPlayerId:n,timelineOffset:r,enableDateRangeMetadataCues:i,interstitialsController:l}=this.hls.config;if(!i)return;const c=lp();if(n&&r&&!l){const{fragmentStart:w,fragmentEnd:R}=e;let M=this.assetCue;M?(M.startTime=w,M.endTime=R):c&&(M=this.assetCue=xm(c,w,R,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),M&&(M.id=n,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(M),M.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:f}=this,{dateRanges:h}=e,g=Object.keys(h);let p=this.dateRangeCuesAppended;if(f&&t){var y;if((y=f.cues)!=null&&y.length){const w=Object.keys(p).filter(R=>!g.includes(R));for(let R=w.length;R--;){var T;const M=w[R],Y=(T=p[M])==null?void 0:T.cues;delete p[M],Y&&Object.keys(Y).forEach(Z=>{const ye=Y[Z];if(ye){ye.removeEventListener("enter",this.onEventCueEnter);try{f.removeCue(ye)}catch{}}})}}else p=this.dateRangeCuesAppended={}}const b=e.fragments[e.fragments.length-1];if(!(g.length===0||!Dn(b==null?void 0:b.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let w=0;w<g.length;w++){const R=g[w],M=h[R],Y=M.startTime,Z=p[R],ye=(Z==null?void 0:Z.cues)||{};let Re=(Z==null?void 0:Z.durationKnown)||!1,F=kh;const{duration:k,endDate:j}=M;if(j&&k!==null)F=Y+k,Re=!0;else if(M.endOnNext&&!Re){const L=g.reduce((Ee,Be)=>{if(Be!==M.id){const pe=h[Be];if(pe.class===M.class&&pe.startDate>M.startDate&&(!Ee||M.startDate<Ee.startDate))return pe}return Ee},null);L&&(F=L.startTime,Re=!0)}const oe=Object.keys(M.attr);for(let L=0;L<oe.length;L++){const Ee=oe[L];if(!Cw(Ee))continue;const Be=ye[Ee];if(Be)Re&&!(Z!=null&&Z.durationKnown)?Be.endTime=F:Math.abs(Be.startTime-Y)>.01&&(Be.startTime=Y,Be.endTime=F);else if(c){let pe=M.attr[Ee];Nw(Ee)&&(pe=Bv(pe));const Ye=xm(c,Y,F,{key:Ee,data:pe},_a.dateRange);Ye&&(Ye.id=R,this.id3Track.addCue(Ye),ye[Ee]=Ye,l&&(Ee==="X-ASSET-LIST"||Ee==="X-ASSET-URL")&&Ye.addEventListener("enter",this.onEventCueEnter))}}p[R]={cues:ye,dateRange:M,durationKnown:Re}}}}}class dR{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:t}=this,n=this.levelDetails;if(!t||!n)return;this.currentTime=t.currentTime;const r=this.computeLatency();if(r===null)return;this._latency=r;const{lowLatencyMode:i,maxLiveSyncPlaybackRate:l}=this.config;if(!i||l===1||!n.live)return;const c=this.targetLatency;if(c===null)return;const f=r-c,h=Math.min(this.maxLatency,c+n.targetduration);if(f<h&&f>.05&&this.forwardBufferLength>1){const p=Math.min(2,Math.max(1,l)),y=Math.round(2/(1+Math.exp(-.75*f-this.edgeStalled))*20)/20,T=Math.min(p,Math.max(1,y));this.changeMediaPlaybackRate(t,T)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:t,partHoldBack:n,targetduration:r}=e,{liveSyncDuration:i,liveSyncDurationCount:l,lowLatencyMode:c}=this.config,f=this.hls.userConfig;let h=c&&n||t;(this._targetLatencyUpdated||f.liveSyncDuration||f.liveSyncDurationCount||h===0)&&(h=i!==void 0?i:l*r);const g=r;return h+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,g)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;const n=this.levelDetails;if(n===null)return null;const r=n.edge,i=e-t-this.edgeStalled,l=r-n.totalduration,c=r-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(l,i),c)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(Se.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(Se.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Se.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(Se.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(Se.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(Se.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Se.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(Se.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var n;t.details===wt.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(n=this.levelDetails)!=null&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var n,r;e.playbackRate!==t&&((n=this.hls)==null||n.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(r=this.targetLatency)==null?void 0:r.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class fR extends Fp{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Se.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(Se.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Se.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Se.FRAG_BUFFERED,this.onFragBuffered,this),e.on(Se.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Se.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(Se.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Se.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Se.FRAG_BUFFERED,this.onFragBuffered,this),e.off(Se.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,r=[],i={},l={};let c=!1,f=!1,h=!1;t.levels.forEach(g=>{const p=g.attrs;let{audioCodec:y,videoCodec:T}=g;y&&(g.audioCodec=y=Vh(y,n)||void 0),T&&(T=g.videoCodec=Kx(T));const{width:b,height:w,unknownCodecs:R}=g;let M=R?R.length:0;if(R)for(let L=M;L--;){const Ee=R[L];this.isAudioSupported(Ee)?(g.audioCodec=y=y?`${y},${Ee}`:Ee,M--,oc.audio[y.substring(0,4)]=2):this.isVideoSupported(Ee)&&(g.videoCodec=T=T?`${T},${Ee}`:Ee,M--,oc.video[T.substring(0,4)]=2)}if(c||(c=!!(b&&w)),f||(f=!!T),h||(h=!!y),M||y&&!this.isAudioSupported(y)||T&&!this.isVideoSupported(T)){this.log(`Some or all CODECS not supported "${p.CODECS}"`);return}const{CODECS:Y,"FRAME-RATE":Z,"HDCP-LEVEL":ye,"PATHWAY-ID":Re,RESOLUTION:F,"VIDEO-RANGE":k}=p,oe=`${`${Re||"."}-`}${g.bitrate}-${F}-${Z}-${Y}-${k}-${ye}`;if(i[oe])if(i[oe].uri!==g.url&&!g.attrs["PATHWAY-ID"]){const L=l[oe]+=1;g.attrs["PATHWAY-ID"]=new Array(L+1).join(".");const Ee=this.createLevel(g);i[oe]=Ee,r.push(Ee)}else i[oe].addGroupId("audio",p.AUDIO),i[oe].addGroupId("text",p.SUBTITLES);else{const L=this.createLevel(g);i[oe]=L,l[oe]=1,r.push(L)}}),this.filterAndSortMediaOptions(r,t,c,f,h)}createLevel(e){const t=new Ud(e),n=e.supplemental;if(n!=null&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){const r=new Error(`SUPPLEMENTAL-CODECS not supported "${n.videoCodec}"`);this.log(r.message),t.supportedResult=Qv(r,[])}return t}isAudioSupported(e){return Hm(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return Hm(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,n,r,i){let l=[],c=[],f=e;if((n||r)&&i&&(f=f.filter(({videoCodec:R,videoRange:M,width:Y,height:Z})=>(!!R||!!(Y&&Z))&&rw(M))),f.length===0){Promise.resolve().then(()=>{if(this.hls){let R="no level with compatible codecs found in manifest",M=R;t.levels.length&&(M=`one or more CODECS in variant not supported: ${Kr(t.levels.map(Z=>Z.attrs.CODECS).filter((Z,ye,Re)=>Re.indexOf(Z)===ye))}`,this.warn(M),R+=` (${M})`);const Y=new Error(R);this.hls.trigger(Se.ERROR,{type:Gn.MEDIA_ERROR,details:wt.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:Y,reason:M})}});return}t.audioTracks&&(l=t.audioTracks.filter(R=>!R.audioCodec||this.isAudioSupported(R.audioCodec)),W0(l)),t.subtitles&&(c=t.subtitles,W0(c));const h=f.slice(0);f.sort((R,M)=>{if(R.attrs["HDCP-LEVEL"]!==M.attrs["HDCP-LEVEL"])return(R.attrs["HDCP-LEVEL"]||"")>(M.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&R.height!==M.height)return R.height-M.height;if(R.frameRate!==M.frameRate)return R.frameRate-M.frameRate;if(R.videoRange!==M.videoRange)return Kh.indexOf(R.videoRange)-Kh.indexOf(M.videoRange);if(R.videoCodec!==M.videoCodec){const Y=qy(R.videoCodec),Z=qy(M.videoCodec);if(Y!==Z)return Z-Y}if(R.uri===M.uri&&R.codecSet!==M.codecSet){const Y=Hh(R.codecSet),Z=Hh(M.codecSet);if(Y!==Z)return Z-Y}return R.averageBitrate!==M.averageBitrate?R.averageBitrate-M.averageBitrate:0});let g=h[0];if(this.steering&&(f=this.steering.filterParsedLevels(f),f.length!==h.length)){for(let R=0;R<h.length;R++)if(h[R].pathwayId===f[0].pathwayId){g=h[R];break}}this._levels=f;for(let R=0;R<f.length;R++)if(f[R]===g){var p;this._firstLevel=R;const M=g.bitrate,Y=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${f.length} level(s) found, first bitrate: ${M}`),((p=this.hls.userConfig)==null?void 0:p.abrEwmaDefaultEstimate)===void 0){const Z=Math.min(M,this.hls.config.abrEwmaDefaultEstimateMax);Z>Y&&Y===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=Z)}break}const y=i&&!r,T=this.hls.config,b=!!(T.audioStreamController&&T.audioTrackController),w={levels:f,audioTracks:l,subtitleTracks:c,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:i,video:r,altAudio:b&&!y&&l.some(R=>!!R.url)};this.hls.trigger(Se.MANIFEST_PARSED,w)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const g=new Error("invalid level idx"),p=e<0;if(this.hls.trigger(Se.ERROR,{type:Gn.OTHER_ERROR,details:wt.LEVEL_SWITCH_ERROR,level:e,fatal:p,error:g,reason:g.message}),p)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,r=this.currentLevel,i=r?r.attrs["PATHWAY-ID"]:void 0,l=t[e],c=l.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=l,n===e&&r&&i===c)return;this.log(`Switching to level ${e} (${l.height?l.height+"p ":""}${l.videoRange?l.videoRange+" ":""}${l.codecSet?l.codecSet+" ":""}@${l.bitrate})${c?" with Pathway "+c:""} from level ${n}${i?" with Pathway "+i:""}`);const f={level:e,attrs:l.attrs,details:l.details,bitrate:l.bitrate,averageBitrate:l.averageBitrate,maxBitrate:l.maxBitrate,realBitrate:l.realBitrate,width:l.width,height:l.height,codecSet:l.codecSet,audioCodec:l.audioCodec,videoCodec:l.videoCodec,audioGroups:l.audioGroups,subtitleGroups:l.subtitleGroups,loaded:l.loaded,loadError:l.loadError,fragmentError:l.fragmentError,name:l.name,id:l.id,uri:l.uri,url:l.url,urlId:0,audioGroupIds:l.audioGroupIds,textGroupIds:l.textGroupIds};this.hls.trigger(Se.LEVEL_SWITCHING,f);const h=l.details;if(!h||h.live){const g=this.switchParams(l.uri,r==null?void 0:r.details,h);this.loadPlaylist(g)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),n=e.filter(r=>t.indexOf(r)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=n}}onError(e,t){t.fatal||!t.context||t.context.type===mr.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===Fn.MAIN){const n=t.elementaryStreams;if(!Object.keys(n).some(i=>!!n[i]))return;const r=this._levels[t.level];r!=null&&r.loadError&&(this.log(`Resetting level error count of ${r.loadError} on frag buffered`),r.loadError=0)}}onLevelLoaded(e,t){var n;const{level:r,details:i}=t,l=t.levelInfo;if(!l){var c;this.warn(`Invalid level index ${r}`),(c=t.deliveryDirectives)!=null&&c.skip&&(i.deltaUpdateFailed=!0);return}if(l===this.currentLevel||t.withoutMultiVariant){l.fragmentError===0&&(l.loadError=0);let f=l.details;f===t.details&&f.advanced&&(f=void 0),this.playlistLoaded(r,t,f)}else(n=t.deliveryDirectives)!=null&&n.skip&&(i.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=this.getUrlWithDirectives(e.uri,t),r=this.currentLevelIndex,i=e.attrs["PATHWAY-ID"],l=e.details,c=l==null?void 0:l.age;this.log(`Loading level index ${r}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${i?" Pathway "+i:""}${c&&l.live?" age "+c.toFixed(1)+(l.type&&" "+l.type||""):""} ${n}`),this.hls.trigger(Se.LEVEL_LOADING,{url:n,level:r,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;const n=this._levels.filter((i,l)=>l!==e?!0:(this.steering&&this.steering.removeLevel(i),i===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,i.details&&i.details.fragments.forEach(c=>c.level=-1)),!1));gE(n),this._levels=n,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const r=n.length-1;this._firstLevel=Math.min(this._firstLevel,r),this._startLevel&&(this._startLevel=Math.min(this._startLevel,r)),this.hls.trigger(Se.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(Se.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function W0(o){const e={};o.forEach(t=>{const n=t.groupId||"";t.id=e[n]=e[n]||0,e[n]++})}function ub(){return self.SourceBuffer||self.WebKitSourceBuffer}function cb(){if(!Ko())return!1;const e=ub();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function hR(){if(!cb())return!1;const o=Ko();return typeof(o==null?void 0:o.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>o.isTypeSupported(zd(e,"video")))||["mp4a.40.2","fLaC"].some(e=>o.isTypeSupported(zd(e,"audio"))))}function gR(){var o;const e=ub();return typeof(e==null||(o=e.prototype)==null?void 0:o.changeType)=="function"}const mR=100;class pR extends Rp{constructor(e,t,n){super(e,t,n,"stream-controller",Fn.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const r=this.media,i=r?r.currentTime:null;if(i===null||!Dn(i)||(this.log(`Media seeked to ${i.toFixed(3)}`),!this.getBufferedFrag(i)))return;const l=this.getFwdBufferInfoAtPos(r,i,Fn.MAIN,0);if(l===null||l.len===0){this.warn(`Main forward buffer length at ${i} on "seeked" event ${l?l.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(Se.MANIFEST_PARSED,this.onManifestParsed,this),e.on(Se.LEVEL_LOADING,this.onLevelLoading,this),e.on(Se.LEVEL_LOADED,this.onLevelLoaded,this),e.on(Se.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(Se.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(Se.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(Se.BUFFER_CREATED,this.onBufferCreated,this),e.on(Se.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(Se.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(Se.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(Se.MANIFEST_PARSED,this.onManifestParsed,this),e.off(Se.LEVEL_LOADED,this.onLevelLoaded,this),e.off(Se.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(Se.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(Se.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(Se.BUFFER_CREATED,this.onBufferCreated,this),e.off(Se.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(Se.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(Se.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:n,hls:r}=this;if(this.stopLoad(),this.setInterval(mR),this.level=-1,!this.startFragRequested){let i=r.startLevel;i===-1&&(r.config.testBandwidth&&this.levels.length>1?(i=0,this.bitrateTest=!0):i=r.firstAutoLevel),r.nextLoadLevel=i,this.level=r.loadLevel,this._hasEnoughToStart=!!t}n>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=Wt.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=Wt.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Wt.WAITING_LEVEL:{const{levels:e,level:t}=this,n=e==null?void 0:e[t],r=n==null?void 0:n.details;if(r&&(!r.live||this.levelLastLoaded===n&&!this.waitForLive(n))){if(this.waitForCdnTuneIn(r))break;this.state=Wt.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=Wt.IDLE;break}break}case Wt.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===Wt.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:r}=this;if(t===null||!r&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const i=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(n!=null&&n[i]))return;const l=n[i],c=this.getMainFwdBufferInfo();if(c===null)return;const f=this.getLevelDetails();if(f&&this._streamEnded(c,f)){const w={};this.altAudio===2&&(w.type="video"),this.hls.trigger(Se.BUFFER_EOS,w),this.state=Wt.ENDED;return}if(!this.buffering)return;e.loadLevel!==i&&e.manualLevel===-1&&this.log(`Adapting to level ${i} from level ${this.level}`),this.level=e.nextLoadLevel=i;const h=l.details;if(!h||this.state===Wt.WAITING_LEVEL||this.waitForLive(l)){this.level=i,this.state=Wt.WAITING_LEVEL,this.startFragRequested=!1;return}const g=c.len,p=this.getMaxBufferLength(l.maxBitrate);if(g>=p)return;this.backtrackFragment&&this.backtrackFragment.start>c.end&&(this.backtrackFragment=null);const y=this.backtrackFragment?this.backtrackFragment.start:c.end;let T=this.getNextFragment(y,h);if(this.couldBacktrack&&!this.fragPrevious&&T&&gi(T)&&this.fragmentTracker.getState(T)!==bi.OK){var b;const R=((b=this.backtrackFragment)!=null?b:T).sn-h.startSN,M=h.fragments[R-1];M&&T.cc===M.cc&&(T=M,this.fragmentTracker.removeFragment(M))}else this.backtrackFragment&&c.len&&(this.backtrackFragment=null);if(T&&this.isLoopLoading(T,y)){if(!T.gap){const R=this.audioOnly&&!this.altAudio?Br.AUDIO:Br.VIDEO,M=(R===Br.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;M&&this.afterBufferFlushed(M,R,Fn.MAIN)}T=this.getNextFragmentLoopLoading(T,h,c,Fn.MAIN,p)}T&&(T.initSegment&&!T.initSegment.data&&!this.bitrateTest&&(T=T.initSegment),this.loadFragment(T,l,y))}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);r===bi.NOT_LOADED||r===bi.PARTIAL?gi(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,n):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Fn.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let n;const r=this.getAppendedFrag(t.currentTime);r&&r.start>1&&this.flushMainBuffer(0,r.start-1);const i=this.getLevelDetails();if(i!=null&&i.live){const c=this.getMainFwdBufferInfo();if(!c||c.len<i.targetduration*2)return}if(!t.paused&&e){const c=this.hls.nextLoadLevel,f=e[c],h=this.fragLastKbps;h&&this.fragCurrent?n=this.fragCurrent.duration*f.maxBitrate/(1e3*h)+1:n=0}else n=0;const l=this.getBufferedFrag(t.currentTime+n);if(l){const c=this.followingBufferedFrag(l);if(c){this.abortCurrentFrag();const f=c.maxStartPTS?c.maxStartPTS:c.start,h=c.duration,g=Math.max(l.end,f+Math.min(Math.max(h-this.config.maxFragLookUpTolerance,h*(this.couldBacktrack?.5:.125)),h*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(g,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Wt.KEY_LOADING:case Wt.FRAG_LOADING:case Wt.FRAG_LOADING_WAITING_RETRY:case Wt.PARSING:case Wt.PARSED:this.state=Wt.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;Wi(n,"playing",this.onMediaPlaying),Wi(n,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:n}=this;n&&(la(n,"playing",this.onMediaPlaying),la(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(Se.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let n=!1,r=!1;for(let i=0;i<t.levels.length;i++){const l=t.levels[i].audioCodec;l&&(n=n||l.indexOf("mp4a.40.2")!==-1,r=r||l.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=n&&r&&!gR(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==Wt.IDLE)return;const r=t.levelInfo;(!r.details||r.details.live&&(this.levelLastLoaded!==r||r.details.expired)||this.waitForCdnTuneIn(r.details))&&(this.state=Wt.WAITING_LEVEL)}onLevelLoaded(e,t){var n;const{levels:r,startFragRequested:i}=this,l=t.level,c=t.details,f=c.totalduration;if(!r){this.warn(`Levels were reset while loading level ${l}`);return}this.log(`Level ${l} loaded [${c.startSN},${c.endSN}]${c.lastPartSn?`[part-${c.lastPartSn}-${c.lastPartIndex}]`:""}, cc [${c.startCC}, ${c.endCC}] duration:${f}`);const h=t.levelInfo,g=this.fragCurrent;g&&(this.state===Wt.FRAG_LOADING||this.state===Wt.FRAG_LOADING_WAITING_RETRY)&&g.level!==t.level&&g.loader&&this.abortCurrentFrag();let p=0;if(c.live||(n=h.details)!=null&&n.live){var y;if(this.checkLiveUpdate(c),c.deltaUpdateFailed)return;p=this.alignPlaylists(c,h.details,(y=this.levelLastLoaded)==null?void 0:y.details)}if(h.details=c,this.levelLastLoaded=h,i||this.setStartPosition(c,p),this.hls.trigger(Se.LEVEL_UPDATED,{details:c,level:l}),this.state===Wt.WAITING_LEVEL){if(this.waitForCdnTuneIn(c))return;this.state=Wt.IDLE}i&&c.live&&this.synchronizeToLiveEdge(c),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const r=this.hls.liveSyncPosition,i=this.getLoadPosition(),l=e.fragmentStart,c=e.edge,f=i>=l-t.maxFragLookUpTolerance&&i<=c;if(r!==null&&n.duration>r&&(i<r||!f)){const g=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!f&&n.readyState<4||i<c-g)&&(this._hasEnoughToStart||(this.nextLoadPosition=r),n.readyState))if(this.warn(`Playback: ${i.toFixed(3)} is located too far from the end of live sliding playlist: ${c}, reset currentTime to : ${r.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var h;const p=tr.bufferInfo(n,r,0);if(!((h=p.buffered)!=null&&h.length)){n.currentTime=r;return}if(p.start<=i){n.currentTime=r;return}const{nextStart:T}=tr.bufferedInfo(p.buffered,i,0);T&&(n.currentTime=T)}else n.currentTime=r}}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:r,payload:i}=e,{levels:l}=this;if(!l){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const c=l[n.level];if(!c){this.warn(`Level ${n.level} not found on progress`);return}const f=c.details;if(!f){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const h=c.videoCodec,g=f.PTSKnown||!f.live,p=(t=n.initSegment)==null?void 0:t.data,y=this._getAudioCodec(c),T=this.transmuxer=this.transmuxer||new OE(this.hls,Fn.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),b=r?r.index:-1,w=b!==-1,R=new Ip(n.level,n.sn,n.stats.chunkCount,i.byteLength,b,w),M=this.initPTS[n.cc];T.push(i,p,y,h,n,r,f.totalduration,g,R,M)}onAudioTrackSwitching(e,t){const n=this.hls,r=this.altAudio===2;if(Yh(t.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const l=this.fragCurrent;l&&(this.log("Switching to main audio track, cancel main fragment load"),l.abortRequests(),this.fragmentTracker.removeFragment(l)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(r){this.fragmentTracker.removeAllFragments(),n.once(Se.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(Se.AUDIO_TRACK_SWITCHED,t)}),n.trigger(Se.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}n.trigger(Se.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=Yh(t.url,this.hls);if(n){const r=this.videoBuffer;r&&this.mediaBuffer!==r&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n?2:0,this.tick()}onBufferCreated(e,t){const n=t.tracks;let r,i,l=!1;for(const c in n){const f=n[c];if(f.id==="main"){if(i=c,r=f,c==="video"){const h=n[c];h&&(this.videoBuffer=h.buffer)}}else l=!0}l&&r?(this.log(`Alternate track found, use ${i}.buffered to schedule main fragment loading`),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:r}=t,i=n.type===Fn.MAIN;if(i){if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===Wt.PARSED&&(this.state=Wt.IDLE);return}const c=r?r.stats:n.stats;this.fragLastKbps=Math.round(8*c.total/(c.buffering.end-c.loading.first)),gi(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,r)}const l=this.media;l&&(!this._hasEnoughToStart&&tr.getBuffered(l).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),i&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var n;if(t.fatal){this.state=Wt.ERROR;return}switch(t.details){case wt.FRAG_GAP:case wt.FRAG_PARSING_ERROR:case wt.FRAG_DECRYPT_ERROR:case wt.FRAG_LOAD_ERROR:case wt.FRAG_LOAD_TIMEOUT:case wt.KEY_LOAD_ERROR:case wt.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Fn.MAIN,t);break;case wt.LEVEL_LOAD_ERROR:case wt.LEVEL_LOAD_TIMEOUT:case wt.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===Wt.WAITING_LEVEL&&((n=t.context)==null?void 0:n.type)===mr.LEVEL&&(this.state=Wt.IDLE);break;case wt.BUFFER_ADD_CODEC_ERROR:case wt.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case wt.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case wt.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=Wt.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==Br.AUDIO||!this.altAudio){const n=(t===Br.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;n&&(this.afterBufferFlushed(n,t,Fn.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${t}`);return}const r=this.timelineOffset;r&&n&&(n+=r);const i=this.getLevelDetails(),l=tr.getBuffered(e),c=l.length?l.start(0):0,f=c-n,h=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||f>0&&(f<h||this.loadingParts&&f<2*((i==null?void 0:i.partTarget)||0)))&&(this.log(`adjusting start position by ${f} to match buffer start`),n+=f,this.startPosition=n),t<n&&(this.log(`seek to target start position ${n} from current time ${t} buffer start ${c}`),e.currentTime=n)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(n=>{const{hls:r}=this,i=n==null?void 0:n.frag;if(!i||this.fragContextChanged(i))return;t.fragmentError=0,this.state=Wt.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const l=i.stats;l.parsing.start=l.parsing.end=l.buffering.start=l.buffering.end=self.performance.now(),r.trigger(Se.FRAG_LOADED,n),i.bitrateTest=!1}).catch(n=>{this.state===Wt.STOPPED||this.state===Wt.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const t=this.playlistType,{hls:n}=this,{remuxResult:r,chunkMeta:i}=e,l=this.getCurrentContext(i);if(!l){this.resetWhenMissingContext(i);return}const{frag:c,part:f,level:h}=l,{video:g,text:p,id3:y,initSegment:T}=r,{details:b}=h,w=this.altAudio?void 0:r.audio;if(this.fragContextChanged(c)){this.fragmentTracker.removeFragment(c);return}if(this.state=Wt.PARSING,T){const R=T.tracks;if(R){const ye=c.initSegment||c;if(this.unhandledEncryptionError(T,c))return;this._bufferInitSegment(h,R,ye,i),n.trigger(Se.FRAG_PARSING_INIT_SEGMENT,{frag:ye,id:t,tracks:R})}const M=T.initPTS,Y=T.timescale,Z=this.initPTS[c.cc];if(Dn(M)&&(!Z||Z.baseTime!==M||Z.timescale!==Y)){const ye=T.trackId;this.initPTS[c.cc]={baseTime:M,timescale:Y,trackId:ye},n.trigger(Se.INIT_PTS_FOUND,{frag:c,id:t,initPTS:M,timescale:Y,trackId:ye})}}if(g&&b){w&&g.type==="audiovideo"&&this.logMuxedErr(c);const R=b.fragments[c.sn-1-b.startSN],M=c.sn===b.startSN,Y=!R||c.cc>R.cc;if(r.independent!==!1){const{startPTS:Z,endPTS:ye,startDTS:Re,endDTS:F}=g;if(f)f.elementaryStreams[g.type]={startPTS:Z,endPTS:ye,startDTS:Re,endDTS:F};else if(g.firstKeyFrame&&g.independent&&i.id===1&&!Y&&(this.couldBacktrack=!0),g.dropped&&g.independent){const k=this.getMainFwdBufferInfo(),j=(k?k.end:this.getLoadPosition())+this.config.maxBufferHole,oe=g.firstKeyFramePTS?g.firstKeyFramePTS:Z;if(!M&&j<oe-this.config.maxBufferHole&&!Y){this.backtrack(c);return}else Y&&(c.gap=!0);c.setElementaryStreamInfo(g.type,c.start,ye,c.start,F,!0)}else M&&Z-(b.appliedTimelineOffset||0)>jh&&(c.gap=!0);c.setElementaryStreamInfo(g.type,Z,ye,Re,F),this.backtrackFragment&&(this.backtrackFragment=c),this.bufferFragmentData(g,c,f,i,M||Y)}else if(M||Y)c.gap=!0;else{this.backtrack(c);return}}if(w){const{startPTS:R,endPTS:M,startDTS:Y,endDTS:Z}=w;f&&(f.elementaryStreams[Br.AUDIO]={startPTS:R,endPTS:M,startDTS:Y,endDTS:Z}),c.setElementaryStreamInfo(Br.AUDIO,R,M,Y,Z),this.bufferFragmentData(w,c,f,i)}if(b&&y!=null&&y.samples.length){const R={id:t,frag:c,details:b,samples:y.samples};n.trigger(Se.FRAG_PARSING_METADATA,R)}if(b&&p){const R={id:t,frag:c,details:b,samples:p.samples};n.trigger(Se.FRAG_PARSING_USERDATA,R)}}logMuxedErr(e){this.warn(`${gi(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,n,r){if(this.state!==Wt.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(n));const{audio:i,video:l,audiovideo:c}=t;if(i){const h=e.audioCodec;let g=Ph(i.codec,h);g==="mp4a"&&(g="mp4a.40.5");const p=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){g&&(g.indexOf("mp4a.40.5")!==-1?g="mp4a.40.2":g="mp4a.40.5");const y=i.metadata;y&&"channelCount"in y&&(y.channelCount||1)!==1&&p.indexOf("firefox")===-1&&(g="mp4a.40.5")}g&&g.indexOf("mp4a.40.5")!==-1&&p.indexOf("android")!==-1&&i.container!=="audio/mpeg"&&(g="mp4a.40.2",this.log(`Android: force audio codec to ${g}`)),h&&h!==g&&this.log(`Swapping manifest audio codec "${h}" for "${g}"`),i.levelCodec=g,i.id=Fn.MAIN,this.log(`Init audio buffer, container:${i.container}, codecs[selected/level/parsed]=[${g||""}/${h||""}/${i.codec}]`),delete t.audiovideo}if(l){l.levelCodec=e.videoCodec,l.id=Fn.MAIN;const h=l.codec;if((h==null?void 0:h.length)===4)switch(h){case"hvc1":case"hev1":l.codec="hvc1.1.6.L120.90";break;case"av01":l.codec="av01.0.04M.08";break;case"avc1":l.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${l.container}, codecs[level/parsed]=[${e.videoCodec||""}/${h}]${l.codec!==h?" parsed-corrected="+l.codec:""}${l.supplemental?" supplemental="+l.supplemental:""}`),delete t.audiovideo}c&&(this.log(`Init audiovideo buffer, container:${c.container}, codecs[level/parsed]=[${e.codecs}/${c.codec}]`),delete t.video,delete t.audio);const f=Object.keys(t);if(f.length){if(this.hls.trigger(Se.BUFFER_CODECS,t),!this.hls)return;f.forEach(h=>{const p=t[h].initSegment;p!=null&&p.byteLength&&this.hls.trigger(Se.BUFFER_APPENDING,{type:h,data:p,frag:n,part:null,chunkMeta:r,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,Fn.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,n=e==null?void 0:e[t];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Wt.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(tr.isBuffered(e,n)?t=this.getAppendedFrag(n):tr.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const r=this.fragPlaying,i=t.level;(!r||t.sn!==r.sn||r.level!==i)&&(this.fragPlaying=t,this.hls.trigger(Se.FRAG_CHANGED,{frag:t}),(!r||r.level!==i)&&this.hls.trigger(Se.LEVEL_SWITCHED,{level:i}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return Dn(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(Dn(t)){const n=this.getLevelDetails(),r=this.currentFrag||(n?zl(null,n.fragments,t):null);if(r){const i=r.programDateTime;if(i!==null){const l=i+(t-r.start)*1e3;return new Date(l)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class yR extends Ha{constructor(e,t){super("key-loader",t),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyIdToKeyInfo){const r=this.keyIdToKeyInfo[n].loader;if(r){var t;if(e&&e!==((t=r.context)==null?void 0:t.frag.type))return;r.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e].loader;t&&t.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,t=wt.KEY_LOAD_ERROR,n,r,i){return new ro({type:Gn.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:i,error:n,networkDetails:r})}loadClear(e,t,n){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let r=0,i=t.length;r<i;r++){const l=t[r];if(e.cc<=l.cc&&(!gi(e)||!gi(l)||e.sn<l.sn)||!n&&r==i-1)return this.emeController.selectKeySystemFormat(l).then(c=>{if(!this.emeController)return;l.setKeyFormat(c);const f=Oh(c);if(f)return this.emeController.getKeySystemAccess([f])})}if(this.config.requireKeySystemAccessOnStart){const r=kd(this.config);if(r.length)return this.emeController.getKeySystemAccess(r)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var n,r;t&&e.setKeyFormat(t);const i=e.decryptdata;if(!i){const g=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,wt.KEY_LOAD_ERROR,g))}const l=i.uri;if(!l)return Promise.reject(this.createKeyLoadError(e,wt.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${l}"`)));const c=wm(i);let f=this.keyIdToKeyInfo[c];if((n=f)!=null&&n.decryptdata.key)return i.key=f.decryptdata.key,Promise.resolve({frag:e,keyInfo:f});if((r=f)!=null&&r.keyLoadPromise){var h;switch((h=f.mediaKeySessionContext)==null?void 0:h.keyStatus){case"usable":case"usable-in-future":return f.keyLoadPromise.then(p=>{const{keyInfo:y}=p;return i.key=y.decryptdata.key,{frag:e,keyInfo:y}})}}switch(this.log(`Loading key ${Sa(i.keyId||[])} from ${e.type} ${e.level}`),f=this.keyIdToKeyInfo[c]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return i.keyFormat==="identity"?this.loadKeyHTTP(f,e):this.loadKeyEME(f,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(f,e);default:return Promise.reject(this.createKeyLoadError(e,wt.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${i.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const r=this.emeController.loadKey(n);return(e.keyLoadPromise=r.then(i=>(e.mediaKeySessionContext=i,n))).catch(i=>{throw e.keyLoadPromise=null,i.data&&(i.data.frag=t),i})}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,r=n.loader,i=new r(n);return t.keyLoader=e.loader=i,e.keyLoadPromise=new Promise((l,c)=>{const f={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},h=n.keyLoadPolicy.default,g={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},p={onSuccess:(y,T,b,w)=>{const{frag:R,keyInfo:M,url:Y}=b,Z=wm(M.decryptdata)||Y;if(!R.decryptdata||M!==this.keyIdToKeyInfo[Z])return c(this.createKeyLoadError(R,wt.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),w));M.decryptdata.key=R.decryptdata.key=new Uint8Array(y.data),R.keyLoader=null,M.loader=null,l({frag:R,keyInfo:M})},onError:(y,T,b,w)=>{this.resetLoader(T),c(this.createKeyLoadError(t,wt.KEY_LOAD_ERROR,new Error(`HTTP Error ${y.code} loading key ${y.text}`),b,Mr({url:f.url,data:void 0},y)))},onTimeout:(y,T,b)=>{this.resetLoader(T),c(this.createKeyLoadError(t,wt.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),b))},onAbort:(y,T,b)=>{this.resetLoader(T),c(this.createKeyLoadError(t,wt.INTERNAL_ABORTED,new Error("key loading aborted"),b))}};i.load(f,g,p)})}resetLoader(e){const{frag:t,keyInfo:n,url:r}=e,i=n.loader;t.keyLoader===i&&(t.keyLoader=null,n.loader=null);const l=wm(n.decryptdata)||r;delete this.keyIdToKeyInfo[l],i&&i.destroy()}}function wm(o){const e=o.keyId;return e?Sa(e):o.uri}function X0(o){const{type:e}=o;switch(e){case mr.AUDIO_TRACK:return Fn.AUDIO;case mr.SUBTITLE_TRACK:return Fn.SUBTITLE;default:return Fn.MAIN}}function Im(o,e){let t=o.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class vR{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.on(Se.LEVEL_LOADING,this.onLevelLoading,this),e.on(Se.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(Se.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(Se.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(Se.MANIFEST_LOADING,this.onManifestLoading,this),e.off(Se.LEVEL_LOADING,this.onLevelLoading,this),e.off(Se.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(Se.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(Se.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,r=t.loader,i=n||r,l=new i(t);return this.loaders[e.type]=l,l}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:mr.MANIFEST,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:n,level:r,pathwayId:i,url:l,deliveryDirectives:c,levelInfo:f}=t;this.load({id:n,level:r,pathwayId:i,responseType:"text",type:mr.LEVEL,url:l,deliveryDirectives:c,levelOrTrack:f})}onAudioTrackLoading(e,t){const{id:n,groupId:r,url:i,deliveryDirectives:l,track:c}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:mr.AUDIO_TRACK,url:i,deliveryDirectives:l,levelOrTrack:c})}onSubtitleTrackLoading(e,t){const{id:n,groupId:r,url:i,deliveryDirectives:l,track:c}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:mr.SUBTITLE_TRACK,url:i,deliveryDirectives:l,levelOrTrack:c})}onLevelsUpdated(e,t){const n=this.loaders[mr.LEVEL];if(n){const r=n.context;r&&!t.levels.some(i=>i===r.levelOrTrack)&&(n.abort(),delete this.loaders[mr.LEVEL])}}load(e){var t;const n=this.hls.config;let r=this.getInternalLoader(e);if(r){const h=this.hls.logger,g=r.context;if(g&&g.levelOrTrack===e.levelOrTrack&&(g.url===e.url||g.deliveryDirectives&&!e.deliveryDirectives)){g.url===e.url?h.log(`[playlist-loader]: ignore ${e.url} ongoing request`):h.log(`[playlist-loader]: ignore ${e.url} in favor of ${g.url}`);return}h.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),r.abort()}let i;if(e.type===mr.MANIFEST?i=n.manifestLoadPolicy.default:i=Or({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),r=this.createInternalLoader(e),Dn((t=e.deliveryDirectives)==null?void 0:t.part)){let h;if(e.type===mr.LEVEL&&e.level!==null?h=this.hls.levels[e.level].details:e.type===mr.AUDIO_TRACK&&e.id!==null?h=this.hls.audioTracks[e.id].details:e.type===mr.SUBTITLE_TRACK&&e.id!==null&&(h=this.hls.subtitleTracks[e.id].details),h){const g=h.partTarget,p=h.targetduration;if(g&&p){const y=Math.max(g*3,p*.8)*1e3;i=Or({},i,{maxTimeToFirstByteMs:Math.min(y,i.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(y,i.maxTimeToFirstByteMs)})}}}const l=i.errorRetry||i.timeoutRetry||{},c={loadPolicy:i,timeout:i.maxLoadTimeMs,maxRetry:l.maxNumRetry||0,retryDelay:l.retryDelayMs||0,maxRetryDelay:l.maxRetryDelayMs||0},f={onSuccess:(h,g,p,y)=>{const T=this.getInternalLoader(p);this.resetInternalLoader(p.type);const b=h.data;if(b.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(h,p,new Error("no EXTM3U delimiter"),y||null,g);return}g.parsing.start=performance.now(),Cs.isMediaPlaylist(b)||p.type!==mr.MANIFEST?this.handleTrackOrLevelPlaylist(h,g,p,y||null,T):this.handleMasterPlaylist(h,g,p,y)},onError:(h,g,p,y)=>{this.handleNetworkError(g,p,!1,h,y)},onTimeout:(h,g,p)=>{this.handleNetworkError(g,p,!0,void 0,h)}};r.load(e,c,f)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:n}=this.hls;(e||n)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,n,r){const i=this.hls,l=e.data,c=Im(e,n),f=Cs.parseMasterPlaylist(l,c);if(f.playlistParsingError){this.handleManifestParsingError(e,n,f.playlistParsingError,r,t);return}const{contentSteering:h,levels:g,sessionData:p,sessionKeys:y,startTimeOffset:T,variableList:b}=f;this.variableList=b;const{AUDIO:w=[],SUBTITLES:R,"CLOSED-CAPTIONS":M}=Cs.parseMasterPlaylistMedia(l,c,f);w.length&&!w.some(Z=>!Z.url)&&g[0].audioCodec&&!g[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),w.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Jr({}),bitrate:0,url:""})),i.trigger(Se.MANIFEST_LOADED,{levels:g,audioTracks:w,subtitles:R,captions:M,contentSteering:h,url:c,stats:t,networkDetails:r,sessionData:p,sessionKeys:y,startTimeOffset:T,variableList:b})}handleTrackOrLevelPlaylist(e,t,n,r,i){const l=this.hls,{id:c,level:f,type:h}=n,g=Im(e,n),p=Dn(f)?f:Dn(c)?c:0,y=X0(n),T=Cs.parseLevelPlaylist(e.data,g,p,y,0,this.variableList);if(h===mr.MANIFEST){const b={attrs:new Jr({}),bitrate:0,details:T,name:"",url:g};T.requestScheduled=t.loading.start+dE(T,0),l.trigger(Se.MANIFEST_LOADED,{levels:[b],audioTracks:[],url:g,stats:t,networkDetails:r,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=T,this.handlePlaylistLoaded(T,e,t,n,r,i)}handleManifestParsingError(e,t,n,r,i){this.hls.trigger(Se.ERROR,{type:Gn.NETWORK_ERROR,details:wt.MANIFEST_PARSING_ERROR,fatal:t.type===mr.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:r,stats:i})}handleNetworkError(e,t,n=!1,r,i){let l=`A network ${n?"timeout":"error"+(r?" (status "+r.code+")":"")} occurred while loading ${e.type}`;e.type===mr.LEVEL?l+=`: ${e.level} id: ${e.id}`:(e.type===mr.AUDIO_TRACK||e.type===mr.SUBTITLE_TRACK)&&(l+=` id: ${e.id} group-id: "${e.groupId}"`);const c=new Error(l);this.hls.logger.warn(`[playlist-loader]: ${l}`);let f=wt.UNKNOWN,h=!1;const g=this.getInternalLoader(e);switch(e.type){case mr.MANIFEST:f=n?wt.MANIFEST_LOAD_TIMEOUT:wt.MANIFEST_LOAD_ERROR,h=!0;break;case mr.LEVEL:f=n?wt.LEVEL_LOAD_TIMEOUT:wt.LEVEL_LOAD_ERROR,h=!1;break;case mr.AUDIO_TRACK:f=n?wt.AUDIO_TRACK_LOAD_TIMEOUT:wt.AUDIO_TRACK_LOAD_ERROR,h=!1;break;case mr.SUBTITLE_TRACK:f=n?wt.SUBTITLE_TRACK_LOAD_TIMEOUT:wt.SUBTITLE_LOAD_ERROR,h=!1;break}g&&this.resetInternalLoader(e.type);const p={type:Gn.NETWORK_ERROR,details:f,fatal:h,url:e.url,loader:g,context:e,error:c,networkDetails:t,stats:i};if(r){const y=(t==null?void 0:t.url)||e.url;p.response=Mr({url:y,data:void 0},r)}this.hls.trigger(Se.ERROR,p)}handlePlaylistLoaded(e,t,n,r,i,l){const c=this.hls,{type:f,level:h,id:g,groupId:p,deliveryDirectives:y}=r,T=Im(t,r),b=X0(r),w=typeof r.level=="number"&&b===Fn.MAIN?h:void 0;if(!e.fragments.length){const M=e.playlistParsingError=new Error("No Segments found in Playlist");c.trigger(Se.ERROR,{type:Gn.NETWORK_ERROR,details:wt.LEVEL_EMPTY_ERROR,fatal:!1,url:T,error:M,reason:M.message,response:t,context:r,level:w,parent:b,networkDetails:i,stats:n});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const R=e.playlistParsingError;if(R){if(this.hls.logger.warn(`${R} ${e.url}`),!c.config.ignorePlaylistParsingErrors){c.trigger(Se.ERROR,{type:Gn.NETWORK_ERROR,details:wt.LEVEL_PARSING_ERROR,fatal:!1,url:T,error:R,reason:R.message,response:t,context:r,level:w,parent:b,networkDetails:i,stats:n});return}e.playlistParsingError=null}switch(e.live&&l&&(l.getCacheAge&&(e.ageHeader=l.getCacheAge()||0),(!l.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),f){case mr.MANIFEST:case mr.LEVEL:c.trigger(Se.LEVEL_LOADED,{details:e,levelInfo:r.levelOrTrack||c.levels[0],level:w||0,id:g||0,stats:n,networkDetails:i,deliveryDirectives:y,withoutMultiVariant:f===mr.MANIFEST});break;case mr.AUDIO_TRACK:c.trigger(Se.AUDIO_TRACK_LOADED,{details:e,track:r.levelOrTrack,id:g||0,groupId:p||"",stats:n,networkDetails:i,deliveryDirectives:y});break;case mr.SUBTITLE_TRACK:c.trigger(Se.SUBTITLE_TRACK_LOADED,{details:e,track:r.levelOrTrack,id:g||0,groupId:p||"",stats:n,networkDetails:i,deliveryDirectives:y});break}}}class Ba{static get version(){return Bd}static isMSESupported(){return cb()}static isSupported(){return hR()}static getMediaSource(){return Ko()}static get Events(){return Se}static get MetadataSchema(){return _a}static get ErrorTypes(){return Gn}static get ErrorDetails(){return wt}static get DefaultConfig(){return Ba.defaultConfig?Ba.defaultConfig:tR}static set DefaultConfig(e){Ba.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Cp,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=Ix(e.debug||!1,"Hls instance",e.assetPlayerId),n=this.config=rR(Ba.DefaultConfig,e,t);this.userConfig=e,n.progressive&&iR(n,t);const{abrController:r,bufferController:i,capLevelController:l,errorController:c,fpsController:f}=n,h=new c(this),g=this.abrController=new r(this),p=new vw(this),y=n.interstitialsController,T=y?this.interstitialsController=new y(this,Ba):null,b=this.bufferController=new i(this,p),w=this.capLevelController=new l(this),R=new f(this),M=new vR(this),Y=n.contentSteeringController,Z=Y?new Y(this):null,ye=this.levelController=new fR(this,Z),Re=new cR(this),F=new yR(this.config,this.logger),k=this.streamController=new pR(this,p,F),j=this.gapController=new lR(this,p);w.setStreamController(k),R.setStreamController(k);const oe=[M,ye,k];T&&oe.splice(1,0,T),Z&&oe.splice(1,0,Z),this.networkControllers=oe;const L=[g,b,j,w,R,Re,p];this.audioTrackController=this.createController(n.audioTrackController,oe);const Ee=n.audioStreamController;Ee&&oe.push(this.audioStreamController=new Ee(this,p,F)),this.subtitleTrackController=this.createController(n.subtitleTrackController,oe);const Be=n.subtitleStreamController;Be&&oe.push(this.subtititleStreamController=new Be(this,p,F)),this.createController(n.timelineController,L),F.emeController=this.emeController=this.createController(n.emeController,L),this.cmcdController=this.createController(n.cmcdController,L),this.latencyController=this.createController(dR,L),this.coreComponents=L,oe.push(h);const pe=h.onErrorOut;typeof pe=="function"&&this.on(Se.ERROR,pe,h),this.on(Se.MANIFEST_LOADED,M.onManifestLoaded,M)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t,n=this){this._emitter.on(e,t,n)}once(e,t,n=this){this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,n=this,r){this._emitter.off(e,t,n,r)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(n){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const r=e===Se.ERROR;this.trigger(Se.ERROR,{type:Gn.OTHER_ERROR,details:wt.INTERNAL_EXCEPTION,fatal:r,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(Se.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const i=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(Se.ERROR,{type:Gn.OTHER_ERROR,details:wt.ATTACH_MEDIA_ERROR,fatal:!0,error:i});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,n=t?e.media:e,r=t?e:{media:n};this._media=n,this.trigger(Se.MEDIA_ATTACHING,r)}detachMedia(){this.logger.log("detachMedia"),this.trigger(Se.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(Se.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,n=this._url,r=this._url=Ep.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${r}`),t&&n&&(n!==r||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(Se.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e,t),!(!this.started||!this.networkControllers));n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[Fn.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[Fn.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[Fn.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=e==null?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=lk()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){nw(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let r=0;r<n;r++)if(e[r].maxBitrate>=t)return r;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let r;if(t===-1&&e!=null&&e.length?r=e.length-1:r=t,n)for(let i=r;i--;){const l=e[i].attrs["HDCP-LEVEL"];if(l&&l<=n)return i}return r}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const n=eE(t);return Zv(e,n,navigator.mediaCapabilities)}}Ba.defaultConfig=void 0;/*! For license information please see dash.all.min.js.LICENSE.txt */var ER={7267:function(o,e){e.byteLength=function(h){var g=c(h),p=g[0],y=g[1];return 3*(p+y)/4-y},e.toByteArray=function(h){var g,p,y=c(h),T=y[0],b=y[1],w=new r(function(Y,Z,ye){return 3*(Z+ye)/4-ye}(0,T,b)),R=0,M=b>0?T-4:T;for(p=0;p<M;p+=4)g=n[h.charCodeAt(p)]<<18|n[h.charCodeAt(p+1)]<<12|n[h.charCodeAt(p+2)]<<6|n[h.charCodeAt(p+3)],w[R++]=g>>16&255,w[R++]=g>>8&255,w[R++]=255&g;return b===2&&(g=n[h.charCodeAt(p)]<<2|n[h.charCodeAt(p+1)]>>4,w[R++]=255&g),b===1&&(g=n[h.charCodeAt(p)]<<10|n[h.charCodeAt(p+1)]<<4|n[h.charCodeAt(p+2)]>>2,w[R++]=g>>8&255,w[R++]=255&g),w},e.fromByteArray=function(h){for(var g,p=h.length,y=p%3,T=[],b=16383,w=0,R=p-y;w<R;w+=b)T.push(f(h,w,w+b>R?R:w+b));return y===1?(g=h[p-1],T.push(t[g>>2]+t[g<<4&63]+"==")):y===2&&(g=(h[p-2]<<8)+h[p-1],T.push(t[g>>10]+t[g>>4&63]+t[g<<2&63]+"=")),T.join("")};for(var t=[],n=[],r=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0;l<64;++l)t[l]=i[l],n[i.charCodeAt(l)]=l;function c(h){var g=h.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=h.indexOf("=");return p===-1&&(p=g),[p,p===g?0:4-p%4]}function f(h,g,p){for(var y,T,b=[],w=g;w<p;w+=3)y=(h[w]<<16&16711680)+(h[w+1]<<8&65280)+(255&h[w+2]),b.push(t[(T=y)>>18&63]+t[T>>12&63]+t[T>>6&63]+t[63&T]);return b.join("")}n[45]=62,n[95]=63},44:function(o,e,t){var n=t(7267),r=t(7986),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=f,e.SlowBuffer=function(W){return+W!=W&&(W=0),f.alloc(+W)},e.INSPECT_MAX_BYTES=50;var l=2147483647;function c(W){if(W>l)throw new RangeError('The value "'+W+'" is invalid for option "size"');var Q=new Uint8Array(W);return Object.setPrototypeOf(Q,f.prototype),Q}function f(W,Q,P){if(typeof W=="number"){if(typeof Q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(W)}return h(W,Q,P)}function h(W,Q,P){if(typeof W=="string")return function(ue,Ue){if(typeof Ue=="string"&&Ue!==""||(Ue="utf8"),!f.isEncoding(Ue))throw new TypeError("Unknown encoding: "+Ue);var et=0|w(ue,Ue),qe=c(et),Xe=qe.write(ue,Ue);return Xe!==et&&(qe=qe.slice(0,Xe)),qe}(W,Q);if(ArrayBuffer.isView(W))return function(ue){if(Pe(ue,Uint8Array)){var Ue=new Uint8Array(ue);return T(Ue.buffer,Ue.byteOffset,Ue.byteLength)}return y(ue)}(W);if(W==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W);if(Pe(W,ArrayBuffer)||W&&Pe(W.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Pe(W,SharedArrayBuffer)||W&&Pe(W.buffer,SharedArrayBuffer)))return T(W,Q,P);if(typeof W=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var H=W.valueOf&&W.valueOf();if(H!=null&&H!==W)return f.from(H,Q,P);var be=function(ue){if(f.isBuffer(ue)){var Ue=0|b(ue.length),et=c(Ue);return et.length===0||ue.copy(et,0,0,Ue),et}return ue.length!==void 0?typeof ue.length!="number"||Fe(ue.length)?c(0):y(ue):ue.type==="Buffer"&&Array.isArray(ue.data)?y(ue.data):void 0}(W);if(be)return be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof W[Symbol.toPrimitive]=="function")return f.from(W[Symbol.toPrimitive]("string"),Q,P);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W)}function g(W){if(typeof W!="number")throw new TypeError('"size" argument must be of type number');if(W<0)throw new RangeError('The value "'+W+'" is invalid for option "size"')}function p(W){return g(W),c(W<0?0:0|b(W))}function y(W){for(var Q=W.length<0?0:0|b(W.length),P=c(Q),H=0;H<Q;H+=1)P[H]=255&W[H];return P}function T(W,Q,P){if(Q<0||W.byteLength<Q)throw new RangeError('"offset" is outside of buffer bounds');if(W.byteLength<Q+(P||0))throw new RangeError('"length" is outside of buffer bounds');var H;return H=Q===void 0&&P===void 0?new Uint8Array(W):P===void 0?new Uint8Array(W,Q):new Uint8Array(W,Q,P),Object.setPrototypeOf(H,f.prototype),H}function b(W){if(W>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return 0|W}function w(W,Q){if(f.isBuffer(W))return W.length;if(ArrayBuffer.isView(W)||Pe(W,ArrayBuffer))return W.byteLength;if(typeof W!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof W);var P=W.length,H=arguments.length>2&&arguments[2]===!0;if(!H&&P===0)return 0;for(var be=!1;;)switch(Q){case"ascii":case"latin1":case"binary":return P;case"utf8":case"utf-8":return $e(W).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*P;case"hex":return P>>>1;case"base64":return mt(W).length;default:if(be)return H?-1:$e(W).length;Q=(""+Q).toLowerCase(),be=!0}}function R(W,Q,P){var H=!1;if((Q===void 0||Q<0)&&(Q=0),Q>this.length||((P===void 0||P>this.length)&&(P=this.length),P<=0)||(P>>>=0)<=(Q>>>=0))return"";for(W||(W="utf8");;)switch(W){case"hex":return ct(this,Q,P);case"utf8":case"utf-8":return L(this,Q,P);case"ascii":return Be(this,Q,P);case"latin1":case"binary":return pe(this,Q,P);case"base64":return oe(this,Q,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ye(this,Q,P);default:if(H)throw new TypeError("Unknown encoding: "+W);W=(W+"").toLowerCase(),H=!0}}function M(W,Q,P){var H=W[Q];W[Q]=W[P],W[P]=H}function Y(W,Q,P,H,be){if(W.length===0)return-1;if(typeof P=="string"?(H=P,P=0):P>2147483647?P=2147483647:P<-2147483648&&(P=-2147483648),Fe(P=+P)&&(P=be?0:W.length-1),P<0&&(P=W.length+P),P>=W.length){if(be)return-1;P=W.length-1}else if(P<0){if(!be)return-1;P=0}if(typeof Q=="string"&&(Q=f.from(Q,H)),f.isBuffer(Q))return Q.length===0?-1:Z(W,Q,P,H,be);if(typeof Q=="number")return Q&=255,typeof Uint8Array.prototype.indexOf=="function"?be?Uint8Array.prototype.indexOf.call(W,Q,P):Uint8Array.prototype.lastIndexOf.call(W,Q,P):Z(W,[Q],P,H,be);throw new TypeError("val must be string, number or Buffer")}function Z(W,Q,P,H,be){var ue,Ue=1,et=W.length,qe=Q.length;if(H!==void 0&&((H=String(H).toLowerCase())==="ucs2"||H==="ucs-2"||H==="utf16le"||H==="utf-16le")){if(W.length<2||Q.length<2)return-1;Ue=2,et/=2,qe/=2,P/=2}function Xe(ht,Ct){return Ue===1?ht[Ct]:ht.readUInt16BE(Ct*Ue)}if(be){var He=-1;for(ue=P;ue<et;ue++)if(Xe(W,ue)===Xe(Q,He===-1?0:ue-He)){if(He===-1&&(He=ue),ue-He+1===qe)return He*Ue}else He!==-1&&(ue-=ue-He),He=-1}else for(P+qe>et&&(P=et-qe),ue=P;ue>=0;ue--){for(var it=!0,bt=0;bt<qe;bt++)if(Xe(W,ue+bt)!==Xe(Q,bt)){it=!1;break}if(it)return ue}return-1}function ye(W,Q,P,H){P=Number(P)||0;var be=W.length-P;H?(H=Number(H))>be&&(H=be):H=be;var ue=Q.length;H>ue/2&&(H=ue/2);for(var Ue=0;Ue<H;++Ue){var et=parseInt(Q.substr(2*Ue,2),16);if(Fe(et))return Ue;W[P+Ue]=et}return Ue}function Re(W,Q,P,H){return Dt($e(Q,W.length-P),W,P,H)}function F(W,Q,P,H){return Dt(function(be){for(var ue=[],Ue=0;Ue<be.length;++Ue)ue.push(255&be.charCodeAt(Ue));return ue}(Q),W,P,H)}function k(W,Q,P,H){return Dt(mt(Q),W,P,H)}function j(W,Q,P,H){return Dt(function(be,ue){for(var Ue,et,qe,Xe=[],He=0;He<be.length&&!((ue-=2)<0);++He)et=(Ue=be.charCodeAt(He))>>8,qe=Ue%256,Xe.push(qe),Xe.push(et);return Xe}(Q,W.length-P),W,P,H)}function oe(W,Q,P){return Q===0&&P===W.length?n.fromByteArray(W):n.fromByteArray(W.slice(Q,P))}function L(W,Q,P){P=Math.min(W.length,P);for(var H=[],be=Q;be<P;){var ue,Ue,et,qe,Xe=W[be],He=null,it=Xe>239?4:Xe>223?3:Xe>191?2:1;if(be+it<=P)switch(it){case 1:Xe<128&&(He=Xe);break;case 2:(192&(ue=W[be+1]))==128&&(qe=(31&Xe)<<6|63&ue)>127&&(He=qe);break;case 3:ue=W[be+1],Ue=W[be+2],(192&ue)==128&&(192&Ue)==128&&(qe=(15&Xe)<<12|(63&ue)<<6|63&Ue)>2047&&(qe<55296||qe>57343)&&(He=qe);break;case 4:ue=W[be+1],Ue=W[be+2],et=W[be+3],(192&ue)==128&&(192&Ue)==128&&(192&et)==128&&(qe=(15&Xe)<<18|(63&ue)<<12|(63&Ue)<<6|63&et)>65535&&qe<1114112&&(He=qe)}He===null?(He=65533,it=1):He>65535&&(He-=65536,H.push(He>>>10&1023|55296),He=56320|1023&He),H.push(He),be+=it}return function(bt){var ht=bt.length;if(ht<=Ee)return String.fromCharCode.apply(String,bt);for(var Ct="",pn=0;pn<ht;)Ct+=String.fromCharCode.apply(String,bt.slice(pn,pn+=Ee));return Ct}(H)}e.kMaxLength=l,f.TYPED_ARRAY_SUPPORT=function(){try{var W=new Uint8Array(1),Q={foo:function(){return 42}};return Object.setPrototypeOf(Q,Uint8Array.prototype),Object.setPrototypeOf(W,Q),W.foo()===42}catch{return!1}}(),f.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=function(W,Q,P){return h(W,Q,P)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(W,Q,P){return function(H,be,ue){return g(H),H<=0?c(H):be!==void 0?typeof ue=="string"?c(H).fill(be,ue):c(H).fill(be):c(H)}(W,Q,P)},f.allocUnsafe=function(W){return p(W)},f.allocUnsafeSlow=function(W){return p(W)},f.isBuffer=function(W){return W!=null&&W._isBuffer===!0&&W!==f.prototype},f.compare=function(W,Q){if(Pe(W,Uint8Array)&&(W=f.from(W,W.offset,W.byteLength)),Pe(Q,Uint8Array)&&(Q=f.from(Q,Q.offset,Q.byteLength)),!f.isBuffer(W)||!f.isBuffer(Q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(W===Q)return 0;for(var P=W.length,H=Q.length,be=0,ue=Math.min(P,H);be<ue;++be)if(W[be]!==Q[be]){P=W[be],H=Q[be];break}return P<H?-1:H<P?1:0},f.isEncoding=function(W){switch(String(W).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(W,Q){if(!Array.isArray(W))throw new TypeError('"list" argument must be an Array of Buffers');if(W.length===0)return f.alloc(0);var P;if(Q===void 0)for(Q=0,P=0;P<W.length;++P)Q+=W[P].length;var H=f.allocUnsafe(Q),be=0;for(P=0;P<W.length;++P){var ue=W[P];if(Pe(ue,Uint8Array))be+ue.length>H.length?f.from(ue).copy(H,be):Uint8Array.prototype.set.call(H,ue,be);else{if(!f.isBuffer(ue))throw new TypeError('"list" argument must be an Array of Buffers');ue.copy(H,be)}be+=ue.length}return H},f.byteLength=w,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var W=this.length;if(W%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Q=0;Q<W;Q+=2)M(this,Q,Q+1);return this},f.prototype.swap32=function(){var W=this.length;if(W%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Q=0;Q<W;Q+=4)M(this,Q,Q+3),M(this,Q+1,Q+2);return this},f.prototype.swap64=function(){var W=this.length;if(W%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Q=0;Q<W;Q+=8)M(this,Q,Q+7),M(this,Q+1,Q+6),M(this,Q+2,Q+5),M(this,Q+3,Q+4);return this},f.prototype.toString=function(){var W=this.length;return W===0?"":arguments.length===0?L(this,0,W):R.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(W){if(!f.isBuffer(W))throw new TypeError("Argument must be a Buffer");return this===W||f.compare(this,W)===0},f.prototype.inspect=function(){var W="",Q=e.INSPECT_MAX_BYTES;return W=this.toString("hex",0,Q).replace(/(.{2})/g,"$1 ").trim(),this.length>Q&&(W+=" ... "),"<Buffer "+W+">"},i&&(f.prototype[i]=f.prototype.inspect),f.prototype.compare=function(W,Q,P,H,be){if(Pe(W,Uint8Array)&&(W=f.from(W,W.offset,W.byteLength)),!f.isBuffer(W))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof W);if(Q===void 0&&(Q=0),P===void 0&&(P=W?W.length:0),H===void 0&&(H=0),be===void 0&&(be=this.length),Q<0||P>W.length||H<0||be>this.length)throw new RangeError("out of range index");if(H>=be&&Q>=P)return 0;if(H>=be)return-1;if(Q>=P)return 1;if(this===W)return 0;for(var ue=(be>>>=0)-(H>>>=0),Ue=(P>>>=0)-(Q>>>=0),et=Math.min(ue,Ue),qe=this.slice(H,be),Xe=W.slice(Q,P),He=0;He<et;++He)if(qe[He]!==Xe[He]){ue=qe[He],Ue=Xe[He];break}return ue<Ue?-1:Ue<ue?1:0},f.prototype.includes=function(W,Q,P){return this.indexOf(W,Q,P)!==-1},f.prototype.indexOf=function(W,Q,P){return Y(this,W,Q,P,!0)},f.prototype.lastIndexOf=function(W,Q,P){return Y(this,W,Q,P,!1)},f.prototype.write=function(W,Q,P,H){if(Q===void 0)H="utf8",P=this.length,Q=0;else if(P===void 0&&typeof Q=="string")H=Q,P=this.length,Q=0;else{if(!isFinite(Q))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Q>>>=0,isFinite(P)?(P>>>=0,H===void 0&&(H="utf8")):(H=P,P=void 0)}var be=this.length-Q;if((P===void 0||P>be)&&(P=be),W.length>0&&(P<0||Q<0)||Q>this.length)throw new RangeError("Attempt to write outside buffer bounds");H||(H="utf8");for(var ue=!1;;)switch(H){case"hex":return ye(this,W,Q,P);case"utf8":case"utf-8":return Re(this,W,Q,P);case"ascii":case"latin1":case"binary":return F(this,W,Q,P);case"base64":return k(this,W,Q,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,W,Q,P);default:if(ue)throw new TypeError("Unknown encoding: "+H);H=(""+H).toLowerCase(),ue=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ee=4096;function Be(W,Q,P){var H="";P=Math.min(W.length,P);for(var be=Q;be<P;++be)H+=String.fromCharCode(127&W[be]);return H}function pe(W,Q,P){var H="";P=Math.min(W.length,P);for(var be=Q;be<P;++be)H+=String.fromCharCode(W[be]);return H}function ct(W,Q,P){var H=W.length;(!Q||Q<0)&&(Q=0),(!P||P<0||P>H)&&(P=H);for(var be="",ue=Q;ue<P;++ue)be+=ut[W[ue]];return be}function Ye(W,Q,P){for(var H=W.slice(Q,P),be="",ue=0;ue<H.length-1;ue+=2)be+=String.fromCharCode(H[ue]+256*H[ue+1]);return be}function Le(W,Q,P){if(W%1!=0||W<0)throw new RangeError("offset is not uint");if(W+Q>P)throw new RangeError("Trying to access beyond buffer length")}function Je(W,Q,P,H,be,ue){if(!f.isBuffer(W))throw new TypeError('"buffer" argument must be a Buffer instance');if(Q>be||Q<ue)throw new RangeError('"value" argument is out of bounds');if(P+H>W.length)throw new RangeError("Index out of range")}function Ge(W,Q,P,H,be,ue){if(P+H>W.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("Index out of range")}function tt(W,Q,P,H,be){return Q=+Q,P>>>=0,be||Ge(W,0,P,4),r.write(W,Q,P,H,23,4),P+4}function Ze(W,Q,P,H,be){return Q=+Q,P>>>=0,be||Ge(W,0,P,8),r.write(W,Q,P,H,52,8),P+8}f.prototype.slice=function(W,Q){var P=this.length;(W=~~W)<0?(W+=P)<0&&(W=0):W>P&&(W=P),(Q=Q===void 0?P:~~Q)<0?(Q+=P)<0&&(Q=0):Q>P&&(Q=P),Q<W&&(Q=W);var H=this.subarray(W,Q);return Object.setPrototypeOf(H,f.prototype),H},f.prototype.readUintLE=f.prototype.readUIntLE=function(W,Q,P){W>>>=0,Q>>>=0,P||Le(W,Q,this.length);for(var H=this[W],be=1,ue=0;++ue<Q&&(be*=256);)H+=this[W+ue]*be;return H},f.prototype.readUintBE=f.prototype.readUIntBE=function(W,Q,P){W>>>=0,Q>>>=0,P||Le(W,Q,this.length);for(var H=this[W+--Q],be=1;Q>0&&(be*=256);)H+=this[W+--Q]*be;return H},f.prototype.readUint8=f.prototype.readUInt8=function(W,Q){return W>>>=0,Q||Le(W,1,this.length),this[W]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(W,Q){return W>>>=0,Q||Le(W,2,this.length),this[W]|this[W+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(W,Q){return W>>>=0,Q||Le(W,2,this.length),this[W]<<8|this[W+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(W,Q){return W>>>=0,Q||Le(W,4,this.length),(this[W]|this[W+1]<<8|this[W+2]<<16)+16777216*this[W+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(W,Q){return W>>>=0,Q||Le(W,4,this.length),16777216*this[W]+(this[W+1]<<16|this[W+2]<<8|this[W+3])},f.prototype.readIntLE=function(W,Q,P){W>>>=0,Q>>>=0,P||Le(W,Q,this.length);for(var H=this[W],be=1,ue=0;++ue<Q&&(be*=256);)H+=this[W+ue]*be;return H>=(be*=128)&&(H-=Math.pow(2,8*Q)),H},f.prototype.readIntBE=function(W,Q,P){W>>>=0,Q>>>=0,P||Le(W,Q,this.length);for(var H=Q,be=1,ue=this[W+--H];H>0&&(be*=256);)ue+=this[W+--H]*be;return ue>=(be*=128)&&(ue-=Math.pow(2,8*Q)),ue},f.prototype.readInt8=function(W,Q){return W>>>=0,Q||Le(W,1,this.length),128&this[W]?-1*(255-this[W]+1):this[W]},f.prototype.readInt16LE=function(W,Q){W>>>=0,Q||Le(W,2,this.length);var P=this[W]|this[W+1]<<8;return 32768&P?4294901760|P:P},f.prototype.readInt16BE=function(W,Q){W>>>=0,Q||Le(W,2,this.length);var P=this[W+1]|this[W]<<8;return 32768&P?4294901760|P:P},f.prototype.readInt32LE=function(W,Q){return W>>>=0,Q||Le(W,4,this.length),this[W]|this[W+1]<<8|this[W+2]<<16|this[W+3]<<24},f.prototype.readInt32BE=function(W,Q){return W>>>=0,Q||Le(W,4,this.length),this[W]<<24|this[W+1]<<16|this[W+2]<<8|this[W+3]},f.prototype.readFloatLE=function(W,Q){return W>>>=0,Q||Le(W,4,this.length),r.read(this,W,!0,23,4)},f.prototype.readFloatBE=function(W,Q){return W>>>=0,Q||Le(W,4,this.length),r.read(this,W,!1,23,4)},f.prototype.readDoubleLE=function(W,Q){return W>>>=0,Q||Le(W,8,this.length),r.read(this,W,!0,52,8)},f.prototype.readDoubleBE=function(W,Q){return W>>>=0,Q||Le(W,8,this.length),r.read(this,W,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(W,Q,P,H){W=+W,Q>>>=0,P>>>=0,H||Je(this,W,Q,P,Math.pow(2,8*P)-1,0);var be=1,ue=0;for(this[Q]=255&W;++ue<P&&(be*=256);)this[Q+ue]=W/be&255;return Q+P},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(W,Q,P,H){W=+W,Q>>>=0,P>>>=0,H||Je(this,W,Q,P,Math.pow(2,8*P)-1,0);var be=P-1,ue=1;for(this[Q+be]=255&W;--be>=0&&(ue*=256);)this[Q+be]=W/ue&255;return Q+P},f.prototype.writeUint8=f.prototype.writeUInt8=function(W,Q,P){return W=+W,Q>>>=0,P||Je(this,W,Q,1,255,0),this[Q]=255&W,Q+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(W,Q,P){return W=+W,Q>>>=0,P||Je(this,W,Q,2,65535,0),this[Q]=255&W,this[Q+1]=W>>>8,Q+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(W,Q,P){return W=+W,Q>>>=0,P||Je(this,W,Q,2,65535,0),this[Q]=W>>>8,this[Q+1]=255&W,Q+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(W,Q,P){return W=+W,Q>>>=0,P||Je(this,W,Q,4,4294967295,0),this[Q+3]=W>>>24,this[Q+2]=W>>>16,this[Q+1]=W>>>8,this[Q]=255&W,Q+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(W,Q,P){return W=+W,Q>>>=0,P||Je(this,W,Q,4,4294967295,0),this[Q]=W>>>24,this[Q+1]=W>>>16,this[Q+2]=W>>>8,this[Q+3]=255&W,Q+4},f.prototype.writeIntLE=function(W,Q,P,H){if(W=+W,Q>>>=0,!H){var be=Math.pow(2,8*P-1);Je(this,W,Q,P,be-1,-be)}var ue=0,Ue=1,et=0;for(this[Q]=255&W;++ue<P&&(Ue*=256);)W<0&&et===0&&this[Q+ue-1]!==0&&(et=1),this[Q+ue]=(W/Ue|0)-et&255;return Q+P},f.prototype.writeIntBE=function(W,Q,P,H){if(W=+W,Q>>>=0,!H){var be=Math.pow(2,8*P-1);Je(this,W,Q,P,be-1,-be)}var ue=P-1,Ue=1,et=0;for(this[Q+ue]=255&W;--ue>=0&&(Ue*=256);)W<0&&et===0&&this[Q+ue+1]!==0&&(et=1),this[Q+ue]=(W/Ue|0)-et&255;return Q+P},f.prototype.writeInt8=function(W,Q,P){return W=+W,Q>>>=0,P||Je(this,W,Q,1,127,-128),W<0&&(W=255+W+1),this[Q]=255&W,Q+1},f.prototype.writeInt16LE=function(W,Q,P){return W=+W,Q>>>=0,P||Je(this,W,Q,2,32767,-32768),this[Q]=255&W,this[Q+1]=W>>>8,Q+2},f.prototype.writeInt16BE=function(W,Q,P){return W=+W,Q>>>=0,P||Je(this,W,Q,2,32767,-32768),this[Q]=W>>>8,this[Q+1]=255&W,Q+2},f.prototype.writeInt32LE=function(W,Q,P){return W=+W,Q>>>=0,P||Je(this,W,Q,4,2147483647,-2147483648),this[Q]=255&W,this[Q+1]=W>>>8,this[Q+2]=W>>>16,this[Q+3]=W>>>24,Q+4},f.prototype.writeInt32BE=function(W,Q,P){return W=+W,Q>>>=0,P||Je(this,W,Q,4,2147483647,-2147483648),W<0&&(W=4294967295+W+1),this[Q]=W>>>24,this[Q+1]=W>>>16,this[Q+2]=W>>>8,this[Q+3]=255&W,Q+4},f.prototype.writeFloatLE=function(W,Q,P){return tt(this,W,Q,!0,P)},f.prototype.writeFloatBE=function(W,Q,P){return tt(this,W,Q,!1,P)},f.prototype.writeDoubleLE=function(W,Q,P){return Ze(this,W,Q,!0,P)},f.prototype.writeDoubleBE=function(W,Q,P){return Ze(this,W,Q,!1,P)},f.prototype.copy=function(W,Q,P,H){if(!f.isBuffer(W))throw new TypeError("argument should be a Buffer");if(P||(P=0),H||H===0||(H=this.length),Q>=W.length&&(Q=W.length),Q||(Q=0),H>0&&H<P&&(H=P),H===P||W.length===0||this.length===0)return 0;if(Q<0)throw new RangeError("targetStart out of bounds");if(P<0||P>=this.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("sourceEnd out of bounds");H>this.length&&(H=this.length),W.length-Q<H-P&&(H=W.length-Q+P);var be=H-P;return this===W&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Q,P,H):Uint8Array.prototype.set.call(W,this.subarray(P,H),Q),be},f.prototype.fill=function(W,Q,P,H){if(typeof W=="string"){if(typeof Q=="string"?(H=Q,Q=0,P=this.length):typeof P=="string"&&(H=P,P=this.length),H!==void 0&&typeof H!="string")throw new TypeError("encoding must be a string");if(typeof H=="string"&&!f.isEncoding(H))throw new TypeError("Unknown encoding: "+H);if(W.length===1){var be=W.charCodeAt(0);(H==="utf8"&&be<128||H==="latin1")&&(W=be)}}else typeof W=="number"?W&=255:typeof W=="boolean"&&(W=Number(W));if(Q<0||this.length<Q||this.length<P)throw new RangeError("Out of range index");if(P<=Q)return this;var ue;if(Q>>>=0,P=P===void 0?this.length:P>>>0,W||(W=0),typeof W=="number")for(ue=Q;ue<P;++ue)this[ue]=W;else{var Ue=f.isBuffer(W)?W:f.from(W,H),et=Ue.length;if(et===0)throw new TypeError('The value "'+W+'" is invalid for argument "value"');for(ue=0;ue<P-Q;++ue)this[ue+Q]=Ue[ue%et]}return this};var Me=/[^+/0-9A-Za-z-_]/g;function $e(W,Q){var P;Q=Q||1/0;for(var H=W.length,be=null,ue=[],Ue=0;Ue<H;++Ue){if((P=W.charCodeAt(Ue))>55295&&P<57344){if(!be){if(P>56319){(Q-=3)>-1&&ue.push(239,191,189);continue}if(Ue+1===H){(Q-=3)>-1&&ue.push(239,191,189);continue}be=P;continue}if(P<56320){(Q-=3)>-1&&ue.push(239,191,189),be=P;continue}P=65536+(be-55296<<10|P-56320)}else be&&(Q-=3)>-1&&ue.push(239,191,189);if(be=null,P<128){if((Q-=1)<0)break;ue.push(P)}else if(P<2048){if((Q-=2)<0)break;ue.push(P>>6|192,63&P|128)}else if(P<65536){if((Q-=3)<0)break;ue.push(P>>12|224,P>>6&63|128,63&P|128)}else{if(!(P<1114112))throw new Error("Invalid code point");if((Q-=4)<0)break;ue.push(P>>18|240,P>>12&63|128,P>>6&63|128,63&P|128)}}return ue}function mt(W){return n.toByteArray(function(Q){if((Q=(Q=Q.split("=")[0]).trim().replace(Me,"")).length<2)return"";for(;Q.length%4!=0;)Q+="=";return Q}(W))}function Dt(W,Q,P,H){for(var be=0;be<H&&!(be+P>=Q.length||be>=W.length);++be)Q[be+P]=W[be];return be}function Pe(W,Q){return W instanceof Q||W!=null&&W.constructor!=null&&W.constructor.name!=null&&W.constructor.name===Q.name}function Fe(W){return W!=W}var ut=function(){for(var W="0123456789abcdef",Q=new Array(256),P=0;P<16;++P)for(var H=16*P,be=0;be<16;++be)Q[H+be]=W[P]+W[be];return Q}()},6877:function(o,e){var t={parseBuffer:function(i){return new n(i).parse()},addBoxProcessor:function(i,l){typeof i=="string"&&typeof l=="function"&&(r.prototype._boxProcessors[i]=l)},createFile:function(){return new n},createBox:function(i,l,c){var f=r.create(i);return l&&l.append(f,c),f},createFullBox:function(i,l,c){var f=t.createBox(i,l,c);return f.version=0,f.flags=0,f},Utils:{}};t.Utils.dataViewToString=function(i,l){var c=l||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(c).decode(i);var f=[],h=0;if(c==="utf-8")for(;h<i.byteLength;){var g=i.getUint8(h++);g<128||(g<224?(g=(31&g)<<6,g|=63&i.getUint8(h++)):g<240?(g=(15&g)<<12,g|=(63&i.getUint8(h++))<<6,g|=63&i.getUint8(h++)):(g=(7&g)<<18,g|=(63&i.getUint8(h++))<<12,g|=(63&i.getUint8(h++))<<6,g|=63&i.getUint8(h++))),f.push(String.fromCharCode(g))}else for(;h<i.byteLength;)f.push(String.fromCharCode(i.getUint8(h++)));return f.join("")},t.Utils.utf8ToByteArray=function(i){var l,c;if(typeof TextEncoder<"u")l=new TextEncoder().encode(i);else for(l=[],c=0;c<i.length;++c){var f=i.charCodeAt(c);f<128?l.push(f):f<2048?(l.push(192|f>>6),l.push(128|63&f)):f<65536?(l.push(224|f>>12),l.push(128|63&f>>6),l.push(128|63&f)):(l.push(240|f>>18),l.push(128|63&f>>12),l.push(128|63&f>>6),l.push(128|63&f))}return l},t.Utils.appendBox=function(i,l,c){if(l._offset=i._cursor.offset,l._root=i._root?i._root:i,l._raw=i._raw,l._parent=i,c!==-1)if(c!=null){var f,h=-1;if(typeof c=="number")h=c;else{if(typeof c=="string")f=c;else{if(typeof c!="object"||!c.type)return void i.boxes.push(l);f=c.type}for(var g=0;g<i.boxes.length;g++)if(f===i.boxes[g].type){h=g+1;break}}i.boxes.splice(h,0,l)}else i.boxes.push(l)},e.parseBuffer=t.parseBuffer,e.addBoxProcessor=t.addBoxProcessor,e.createFile=t.createFile,e.createBox=t.createBox,e.createFullBox=t.createFullBox,e.Utils=t.Utils,t.Cursor=function(i){this.offset=i===void 0?0:i};var n=function(i){this._cursor=new t.Cursor,this.boxes=[],i&&(this._raw=new DataView(i))};n.prototype.fetch=function(i){var l=this.fetchAll(i,!0);return l.length?l[0]:null},n.prototype.fetchAll=function(i,l){var c=[];return n._sweep.call(this,i,c,l),c},n.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var i=r.parse(this);if(i.type===void 0)break;this.boxes.push(i)}return this},n._sweep=function(i,l,c){for(var f in this.type&&this.type==i&&l.push(this),this.boxes){if(l.length&&c)return;n._sweep.call(this.boxes[f],i,l,c)}},n.prototype.write=function(){var i,l=0;for(i=0;i<this.boxes.length;i++)l+=this.boxes[i].getLength(!1);var c=new Uint8Array(l);for(this._rawo=new DataView(c.buffer),this.bytes=c,this._cursor.offset=0,i=0;i<this.boxes.length;i++)this.boxes[i].write();return c.buffer},n.prototype.append=function(i,l){t.Utils.appendBox(this,i,l)};var r=function(){this._cursor=new t.Cursor};r.parse=function(i){var l=new r;return l._offset=i._cursor.offset,l._root=i._root?i._root:i,l._raw=i._raw,l._parent=i,l._parseBox(),i._cursor.offset=l._raw.byteOffset+l._raw.byteLength,l},r.create=function(i){var l=new r;return l.type=i,l.boxes=[],l},r.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca","meta","grpl","prsl"],r.prototype._boxProcessors={},r.prototype._procField=function(i,l,c){this._parsing?this[i]=this._readField(l,c):this._writeField(l,c,this[i])},r.prototype._procFieldArray=function(i,l,c,f){var h;if(this._parsing)for(this[i]=[],h=0;h<l;h++)this[i][h]=this._readField(c,f);else for(h=0;h<this[i].length;h++)this._writeField(c,f,this[i][h])},r.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},r.prototype._procEntries=function(i,l,c){var f;if(this._parsing)for(this[i]=[],f=0;f<l;f++)this[i].push({}),c.call(this,this[i][f]);else for(f=0;f<l;f++)c.call(this,this[i][f])},r.prototype._procSubEntries=function(i,l,c,f){var h;if(this._parsing)for(i[l]=[],h=0;h<c;h++)i[l].push({}),f.call(this,i[l][h]);else for(h=0;h<c;h++)f.call(this,i[l][h])},r.prototype._procEntryField=function(i,l,c,f){this._parsing?i[l]=this._readField(c,f):this._writeField(c,f,i[l])},r.prototype._procSubBoxes=function(i,l){var c;if(this._parsing)for(this[i]=[],c=0;c<l;c++)this[i].push(r.parse(this));else for(c=0;c<l;c++)this._rawo?this[i][c].write():this.size+=this[i][c].getLength()},r.prototype._readField=function(i,l){switch(i){case"uint":return this._readUint(l);case"int":return this._readInt(l);case"template":return this._readTemplate(l);case"string":return l===-1?this._readTerminatedString():this._readString(l);case"data":return this._readData(l);case"utf8":return this._readUTF8String();case"utf8string":return this._readUTF8TerminatedString();default:return-1}},r.prototype._readInt=function(i){var l=null,c=this._cursor.offset-this._raw.byteOffset;switch(i){case 8:l=this._raw.getInt8(c);break;case 16:l=this._raw.getInt16(c);break;case 32:l=this._raw.getInt32(c);break;case 64:var f=this._raw.getInt32(c),h=this._raw.getInt32(c+4);l=f*Math.pow(2,32)+h}return this._cursor.offset+=i>>3,l},r.prototype._readUint=function(i){var l,c,f=null,h=this._cursor.offset-this._raw.byteOffset;switch(i){case 8:f=this._raw.getUint8(h);break;case 16:f=this._raw.getUint16(h);break;case 24:f=((l=this._raw.getUint16(h))<<8)+(c=this._raw.getUint8(h+2));break;case 32:f=this._raw.getUint32(h);break;case 64:l=this._raw.getUint32(h),c=this._raw.getUint32(h+4),f=l*Math.pow(2,32)+c}return this._cursor.offset+=i>>3,f},r.prototype._readString=function(i){for(var l="",c=0;c<i;c++){var f=this._readUint(8);l+=String.fromCharCode(f)}return l},r.prototype._readTemplate=function(i){return this._readUint(i/2)+this._readUint(i/2)/Math.pow(2,i/2)},r.prototype._readTerminatedString=function(){for(var i="";this._cursor.offset-this._offset<this._raw.byteLength;){var l=this._readUint(8);if(l===0)break;i+=String.fromCharCode(l)}return i},r.prototype._readData=function(i){var l=i>0?i:this._raw.byteLength-(this._cursor.offset-this._offset);if(l>0){var c=new Uint8Array(this._raw.buffer,this._cursor.offset,l);return this._cursor.offset+=l,c}return null},r.prototype._readUTF8String=function(){var i=this._raw.byteLength-(this._cursor.offset-this._offset),l=null;return i>0&&(l=new DataView(this._raw.buffer,this._cursor.offset,i),this._cursor.offset+=i),l&&t.Utils.dataViewToString(l)},r.prototype._readUTF8TerminatedString=function(){var i=this._raw.byteLength-(this._cursor.offset-this._offset),l=null;if(i>0){var c;for(l=new DataView(this._raw.buffer,this._cursor.offset,i),c=0;c<i&&l.getUint8(c)!==0;c++);l=new DataView(this._raw.buffer,this._cursor.offset,c),this._cursor.offset+=Math.min(c+1,i)}return l&&t.Utils.dataViewToString(l)},r.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},r.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},r.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(r.parse(this))},r.prototype.append=function(i,l){t.Utils.appendBox(this,i,l)},r.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var i=0;i<this.boxes.length;i++)this.size+=this.boxes[i].getLength();return this._data&&this._writeData(this._data),this.size},r.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var i=0;i<this.boxes.length;i++)this.boxes[i].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},r.prototype._writeInt=function(i,l){if(this._rawo){var c=this._cursor.offset-this._rawo.byteOffset;switch(i){case 8:this._rawo.setInt8(c,l);break;case 16:this._rawo.setInt16(c,l);break;case 32:this._rawo.setInt32(c,l);break;case 64:var f=Math.floor(l/Math.pow(2,32)),h=l-f*Math.pow(2,32);this._rawo.setUint32(c,f),this._rawo.setUint32(c+4,h)}this._cursor.offset+=i>>3}else this.size+=i>>3},r.prototype._writeUint=function(i,l){if(this._rawo){var c,f,h=this._cursor.offset-this._rawo.byteOffset;switch(i){case 8:this._rawo.setUint8(h,l);break;case 16:this._rawo.setUint16(h,l);break;case 24:c=(16776960&l)>>8,f=255&l,this._rawo.setUint16(h,c),this._rawo.setUint8(h+2,f);break;case 32:this._rawo.setUint32(h,l);break;case 64:f=l-(c=Math.floor(l/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(h,c),this._rawo.setUint32(h+4,f)}this._cursor.offset+=i>>3}else this.size+=i>>3},r.prototype._writeString=function(i,l){for(var c=0;c<i;c++)this._writeUint(8,l.charCodeAt(c))},r.prototype._writeTerminatedString=function(i){if(i.length!==0){for(var l=0;l<i.length;l++)this._writeUint(8,i.charCodeAt(l));this._writeUint(8,0)}},r.prototype._writeTemplate=function(i,l){var c=Math.floor(l),f=(l-c)*Math.pow(2,i/2);this._writeUint(i/2,c),this._writeUint(i/2,f)},r.prototype._writeData=function(i){if(i)if(this._rawo){if(i instanceof Array){for(var l=this._cursor.offset-this._rawo.byteOffset,c=0;c<i.length;c++)this._rawo.setInt8(l+c,i[c]);this._cursor.offset+=i.length}i instanceof Uint8Array&&(this._root.bytes.set(i,this._cursor.offset),this._cursor.offset+=i.length)}else this.size+=i.length},r.prototype._writeUTF8String=function(i){var l=t.Utils.utf8ToByteArray(i);if(this._rawo)for(var c=new DataView(this._rawo.buffer,this._cursor.offset,l.length),f=0;f<l.length;f++)c.setUint8(f,l[f]);else this.size+=l.length},r.prototype._writeField=function(i,l,c){switch(i){case"uint":this._writeUint(l,c);break;case"int":this._writeInt(l,c);break;case"template":this._writeTemplate(l,c);break;case"string":l==-1?this._writeTerminatedString(c):this._writeString(l,c);break;case"data":this._writeData(c);break;case"utf8":this._writeUTF8String(c)}},r.prototype._boxProcessors.ardi=function(){this._procFullBox(),this._procField("audio_rendering_indication","uint",8)},r.prototype._boxProcessors.avc1=r.prototype._boxProcessors.avc2=r.prototype._boxProcessors.avc3=r.prototype._boxProcessors.avc4=r.prototype._boxProcessors.hvc1=r.prototype._boxProcessors.hev1=r.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},r.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(i){this._procEntryField(i,"sample_count","uint",32),this._procEntryField(i,"sample_offset",this.version===1?"int":"uint",32)})},r.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},r.prototype._boxProcessors.elng=function(){this._procFullBox(),this._procField("extended_language","utf8string")},r.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(i){this._procEntryField(i,"segment_duration","uint",this.version===1?64:32),this._procEntryField(i,"media_time","int",this.version===1?64:32),this._procEntryField(i,"media_rate_integer","int",16),this._procEntryField(i,"media_rate_fraction","int",16)})},r.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},r.prototype._boxProcessors.free=r.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},r.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},r.prototype._boxProcessors.ftyp=r.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var i=-1;this._parsing&&(i=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",i,"string",4)},r.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},r.prototype._boxProcessors.imda=function(){this._procField("imda_identifier","uint",32),this._procField("data","data",-1)},r.prototype._boxProcessors.kind=function(){this._procFullBox(),this._procField("schemeURI","utf8string"),this._procField("value","utf8string")},r.prototype._boxProcessors.labl=function(){this._procFullBox(),this.is_group_label=!!(1&this.flags),this._procField("label_id","uint",16),this._procField("language","utf8string"),this._procField("label","utf8string")},r.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},r.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},r.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},r.prototype._boxProcessors.meta=function(){this._procFullBox()},r.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},r.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},r.prototype._boxProcessors.mp4a=r.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},r.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},r.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},r.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},r.prototype._boxProcessors.prsl=function(){this._procFullBox(),this._procField("group_id","uint",32),this._procField("num_entities_in_group","uint",32),this._procEntries("entities",this.num_entities_in_group,function(i){this._procEntryField(i,"entity_id","uint",32)}),4096&this.flags&&this._procField("preselection_tag","utf8string"),8192&this.flags&&this._procField("selection_priority","uint",8),16384&this.flags&&this._procField("interleaving_tag","utf8string")},r.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},r.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},r.prototype._boxProcessors.sdtp=function(){this._procFullBox();var i=-1;this._parsing&&(i=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",i,"uint",8)},r.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(i){this._parsing||(i.reference=(1&i.reference_type)<<31,i.reference|=2147483647&i.referenced_size,i.sap=(1&i.starts_with_SAP)<<31,i.sap|=(3&i.SAP_type)<<28,i.sap|=268435455&i.SAP_delta_time),this._procEntryField(i,"reference","uint",32),this._procEntryField(i,"subsegment_duration","uint",32),this._procEntryField(i,"sap","uint",32),this._parsing&&(i.reference_type=i.reference>>31&1,i.referenced_size=2147483647&i.reference,i.starts_with_SAP=i.sap>>31&1,i.SAP_type=i.sap>>28&7,i.SAP_delta_time=268435455&i.sap)})},r.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},r.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(i){this._procEntryField(i,"ranges_count","uint",32),this._procSubEntries(i,"ranges",i.ranges_count,function(l){this._procEntryField(l,"level","uint",8),this._procEntryField(l,"range_size","uint",24)})})},r.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},r.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},r.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(i){this._procEntryField(i,"sample_count","uint",32),this._procEntryField(i,"sample_delta","uint",32)})},r.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(i){this._procEntryField(i,"sample_delta","uint",32),this._procEntryField(i,"subsample_count","uint",16),this._procSubEntries(i,"subsamples",i.subsample_count,function(l){this._procEntryField(l,"subsample_size","uint",this.version===1?32:16),this._procEntryField(l,"subsample_priority","uint",8),this._procEntryField(l,"discardable","uint",8),this._procEntryField(l,"codec_specific_parameters","uint",32)})})},r.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},r.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},r.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},r.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(i){this._procEntryField(i,"time","uint",this.version===1?64:32),this._procEntryField(i,"moof_offset","uint",this.version===1?64:32),this._procEntryField(i,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(i,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(i,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},r.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},r.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},r.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(i){256&this.flags&&this._procEntryField(i,"sample_duration","uint",32),512&this.flags&&this._procEntryField(i,"sample_size","uint",32),1024&this.flags&&this._procEntryField(i,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(i,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},r.prototype._boxProcessors["url "]=r.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},r.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},r.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},r.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},r.prototype._boxProcessors.vtte=function(){}},9826:function(o){var e,t=typeof Reflect=="object"?Reflect:null,n=t&&typeof t.apply=="function"?t.apply:function(R,M,Y){return Function.prototype.apply.call(R,M,Y)};e=t&&typeof t.ownKeys=="function"?t.ownKeys:Object.getOwnPropertySymbols?function(R){return Object.getOwnPropertyNames(R).concat(Object.getOwnPropertySymbols(R))}:function(R){return Object.getOwnPropertyNames(R)};var r=Number.isNaN||function(R){return R!=R};function i(){i.init.call(this)}o.exports=i,o.exports.once=function(R,M){return new Promise(function(Y,Z){function ye(F){R.removeListener(M,Re),Z(F)}function Re(){typeof R.removeListener=="function"&&R.removeListener("error",ye),Y([].slice.call(arguments))}w(R,M,Re,{once:!0}),M!=="error"&&function(F,k){typeof F.on=="function"&&w(F,"error",k,{once:!0})}(R,ye)})},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var l=10;function c(R){if(typeof R!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof R)}function f(R){return R._maxListeners===void 0?i.defaultMaxListeners:R._maxListeners}function h(R,M,Y,Z){var ye,Re,F,k;if(c(Y),(Re=R._events)===void 0?(Re=R._events=Object.create(null),R._eventsCount=0):(Re.newListener!==void 0&&(R.emit("newListener",M,Y.listener?Y.listener:Y),Re=R._events),F=Re[M]),F===void 0)F=Re[M]=Y,++R._eventsCount;else if(typeof F=="function"?F=Re[M]=Z?[Y,F]:[F,Y]:Z?F.unshift(Y):F.push(Y),(ye=f(R))>0&&F.length>ye&&!F.warned){F.warned=!0;var j=new Error("Possible EventEmitter memory leak detected. "+F.length+" "+String(M)+" listeners added. Use emitter.setMaxListeners() to increase limit");j.name="MaxListenersExceededWarning",j.emitter=R,j.type=M,j.count=F.length,k=j,console&&console.warn&&console.warn(k)}return R}function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(R,M,Y){var Z={fired:!1,wrapFn:void 0,target:R,type:M,listener:Y},ye=g.bind(Z);return ye.listener=Y,Z.wrapFn=ye,ye}function y(R,M,Y){var Z=R._events;if(Z===void 0)return[];var ye=Z[M];return ye===void 0?[]:typeof ye=="function"?Y?[ye.listener||ye]:[ye]:Y?function(Re){for(var F=new Array(Re.length),k=0;k<F.length;++k)F[k]=Re[k].listener||Re[k];return F}(ye):b(ye,ye.length)}function T(R){var M=this._events;if(M!==void 0){var Y=M[R];if(typeof Y=="function")return 1;if(Y!==void 0)return Y.length}return 0}function b(R,M){for(var Y=new Array(M),Z=0;Z<M;++Z)Y[Z]=R[Z];return Y}function w(R,M,Y,Z){if(typeof R.on=="function")Z.once?R.once(M,Y):R.on(M,Y);else{if(typeof R.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof R);R.addEventListener(M,function ye(Re){Z.once&&R.removeEventListener(M,ye),Y(Re)})}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(R){if(typeof R!="number"||R<0||r(R))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+R+".");l=R}}),i.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(R){if(typeof R!="number"||R<0||r(R))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+R+".");return this._maxListeners=R,this},i.prototype.getMaxListeners=function(){return f(this)},i.prototype.emit=function(R){for(var M=[],Y=1;Y<arguments.length;Y++)M.push(arguments[Y]);var Z=R==="error",ye=this._events;if(ye!==void 0)Z=Z&&ye.error===void 0;else if(!Z)return!1;if(Z){var Re;if(M.length>0&&(Re=M[0]),Re instanceof Error)throw Re;var F=new Error("Unhandled error."+(Re?" ("+Re.message+")":""));throw F.context=Re,F}var k=ye[R];if(k===void 0)return!1;if(typeof k=="function")n(k,this,M);else{var j=k.length,oe=b(k,j);for(Y=0;Y<j;++Y)n(oe[Y],this,M)}return!0},i.prototype.addListener=function(R,M){return h(this,R,M,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(R,M){return h(this,R,M,!0)},i.prototype.once=function(R,M){return c(M),this.on(R,p(this,R,M)),this},i.prototype.prependOnceListener=function(R,M){return c(M),this.prependListener(R,p(this,R,M)),this},i.prototype.removeListener=function(R,M){var Y,Z,ye,Re,F;if(c(M),(Z=this._events)===void 0)return this;if((Y=Z[R])===void 0)return this;if(Y===M||Y.listener===M)--this._eventsCount==0?this._events=Object.create(null):(delete Z[R],Z.removeListener&&this.emit("removeListener",R,Y.listener||M));else if(typeof Y!="function"){for(ye=-1,Re=Y.length-1;Re>=0;Re--)if(Y[Re]===M||Y[Re].listener===M){F=Y[Re].listener,ye=Re;break}if(ye<0)return this;ye===0?Y.shift():function(k,j){for(;j+1<k.length;j++)k[j]=k[j+1];k.pop()}(Y,ye),Y.length===1&&(Z[R]=Y[0]),Z.removeListener!==void 0&&this.emit("removeListener",R,F||M)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(R){var M,Y,Z;if((Y=this._events)===void 0)return this;if(Y.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Y[R]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete Y[R]),this;if(arguments.length===0){var ye,Re=Object.keys(Y);for(Z=0;Z<Re.length;++Z)(ye=Re[Z])!=="removeListener"&&this.removeAllListeners(ye);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(M=Y[R])=="function")this.removeListener(R,M);else if(M!==void 0)for(Z=M.length-1;Z>=0;Z--)this.removeListener(R,M[Z]);return this},i.prototype.listeners=function(R){return y(this,R,!0)},i.prototype.rawListeners=function(R){return y(this,R,!1)},i.listenerCount=function(R,M){return typeof R.listenerCount=="function"?R.listenerCount(M):T.call(R,M)},i.prototype.listenerCount=T,i.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},7316:function(o){o.exports=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,l;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;i--!=0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(l=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;i--!=0;)if(!Object.prototype.hasOwnProperty.call(n,l[i]))return!1;for(i=r;i--!=0;){var c=l[i];if(!e(t[c],n[c]))return!1}return!0}return t!=t&&n!=n}},7986:function(o,e){e.read=function(t,n,r,i,l){var c,f,h=8*l-i-1,g=(1<<h)-1,p=g>>1,y=-7,T=r?l-1:0,b=r?-1:1,w=t[n+T];for(T+=b,c=w&(1<<-y)-1,w>>=-y,y+=h;y>0;c=256*c+t[n+T],T+=b,y-=8);for(f=c&(1<<-y)-1,c>>=-y,y+=i;y>0;f=256*f+t[n+T],T+=b,y-=8);if(c===0)c=1-p;else{if(c===g)return f?NaN:1/0*(w?-1:1);f+=Math.pow(2,i),c-=p}return(w?-1:1)*f*Math.pow(2,c-i)},e.write=function(t,n,r,i,l,c){var f,h,g,p=8*c-l-1,y=(1<<p)-1,T=y>>1,b=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=i?0:c-1,R=i?1:-1,M=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(h=isNaN(n)?1:0,f=y):(f=Math.floor(Math.log(n)/Math.LN2),n*(g=Math.pow(2,-f))<1&&(f--,g*=2),(n+=f+T>=1?b/g:b*Math.pow(2,1-T))*g>=2&&(f++,g/=2),f+T>=y?(h=0,f=y):f+T>=1?(h=(n*g-1)*Math.pow(2,l),f+=T):(h=n*Math.pow(2,T-1)*Math.pow(2,l),f=0));l>=8;t[r+w]=255&h,w+=R,h/=256,l-=8);for(f=f<<l|h,p+=l;p>0;t[r+w]=255&f,w+=R,f/=256,p-=8);t[r+w-R]|=128*M}},5474:function(o,e,t){(function(n){n.parser=function(P,H){return new l(P,H)},n.SAXParser=l,n.SAXStream=f,n.createStream=function(P,H){return new f(P,H)},n.MAX_BUFFER_LENGTH=65536;var r,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function l(P,H){if(!(this instanceof l))return new l(P,H);var be=this;(function(ue){for(var Ue=0,et=i.length;Ue<et;Ue++)ue[i[Ue]]=""})(be),be.q=be.c="",be.bufferCheckPosition=n.MAX_BUFFER_LENGTH,be.opt=H||{},be.opt.lowercase=be.opt.lowercase||be.opt.lowercasetags,be.looseCase=be.opt.lowercase?"toLowerCase":"toUpperCase",be.tags=[],be.closed=be.closedRoot=be.sawRoot=!1,be.tag=be.error=null,be.strict=!!P,be.noscript=!(!P&&!be.opt.noscript),be.state=pe.BEGIN,be.strictEntities=be.opt.strictEntities,be.ENTITIES=be.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),be.attribList=[],be.opt.xmlns&&(be.ns=Object.create(Y)),be.trackPosition=be.opt.position!==!1,be.trackPosition&&(be.position=be.line=be.column=0),Ye(be,"onready")}n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(P){function H(){}return H.prototype=P,new H}),Object.keys||(Object.keys=function(P){var H=[];for(var be in P)P.hasOwnProperty(be)&&H.push(be);return H}),l.prototype={end:function(){Ze(this)},write:function(P){var H=this;if(this.error)throw this.error;if(H.closed)return tt(H,"Cannot write after close. Assign an onready handler.");if(P===null)return Ze(H);typeof P=="object"&&(P=P.toString());for(var be=0,ue="";ue=Q(P,be++),H.c=ue,ue;)switch(H.trackPosition&&(H.position++,ue===`
`?(H.line++,H.column=0):H.column++),H.state){case pe.BEGIN:if(H.state=pe.BEGIN_WHITESPACE,ue==="\uFEFF")continue;W(H,ue);continue;case pe.BEGIN_WHITESPACE:W(H,ue);continue;case pe.TEXT:if(H.sawRoot&&!H.closedRoot){for(var Ue=be-1;ue&&ue!=="<"&&ue!=="&";)(ue=Q(P,be++))&&H.trackPosition&&(H.position++,ue===`
`?(H.line++,H.column=0):H.column++);H.textNode+=P.substring(Ue,be-1)}ue!=="<"||H.sawRoot&&H.closedRoot&&!H.strict?(!oe(h,ue)||H.sawRoot&&!H.closedRoot||Me(H,"Text data outside of root node."),ue==="&"?H.state=pe.TEXT_ENTITY:H.textNode+=ue):(H.state=pe.OPEN_WAKA,H.startTagPosition=H.position);continue;case pe.SCRIPT:ue==="<"?H.state=pe.SCRIPT_ENDING:H.script+=ue;continue;case pe.SCRIPT_ENDING:ue==="/"?H.state=pe.CLOSE_TAG:(H.script+="<"+ue,H.state=pe.SCRIPT);continue;case pe.OPEN_WAKA:if(ue==="!")H.state=pe.SGML_DECL,H.sgmlDecl="";else if(!j(h,ue))if(j(Z,ue))H.state=pe.OPEN_TAG,H.tagName=ue;else if(ue==="/")H.state=pe.CLOSE_TAG,H.tagName="";else if(ue==="?")H.state=pe.PROC_INST,H.procInstName=H.procInstBody="";else{if(Me(H,"Unencoded <"),H.startTagPosition+1<H.position){var et=H.position-H.startTagPosition;ue=new Array(et).join(" ")+ue}H.textNode+="<"+ue,H.state=pe.TEXT}continue;case pe.SGML_DECL:(H.sgmlDecl+ue).toUpperCase()===b?(Le(H,"onopencdata"),H.state=pe.CDATA,H.sgmlDecl="",H.cdata=""):H.sgmlDecl+ue==="--"?(H.state=pe.COMMENT,H.comment="",H.sgmlDecl=""):(H.sgmlDecl+ue).toUpperCase()===w?(H.state=pe.DOCTYPE,(H.doctype||H.sawRoot)&&Me(H,"Inappropriately located doctype declaration"),H.doctype="",H.sgmlDecl=""):ue===">"?(Le(H,"onsgmldeclaration",H.sgmlDecl),H.sgmlDecl="",H.state=pe.TEXT):(j(y,ue)&&(H.state=pe.SGML_DECL_QUOTED),H.sgmlDecl+=ue);continue;case pe.SGML_DECL_QUOTED:ue===H.q&&(H.state=pe.SGML_DECL,H.q=""),H.sgmlDecl+=ue;continue;case pe.DOCTYPE:ue===">"?(H.state=pe.TEXT,Le(H,"ondoctype",H.doctype),H.doctype=!0):(H.doctype+=ue,ue==="["?H.state=pe.DOCTYPE_DTD:j(y,ue)&&(H.state=pe.DOCTYPE_QUOTED,H.q=ue));continue;case pe.DOCTYPE_QUOTED:H.doctype+=ue,ue===H.q&&(H.q="",H.state=pe.DOCTYPE);continue;case pe.DOCTYPE_DTD:H.doctype+=ue,ue==="]"?H.state=pe.DOCTYPE:j(y,ue)&&(H.state=pe.DOCTYPE_DTD_QUOTED,H.q=ue);continue;case pe.DOCTYPE_DTD_QUOTED:H.doctype+=ue,ue===H.q&&(H.state=pe.DOCTYPE_DTD,H.q="");continue;case pe.COMMENT:ue==="-"?H.state=pe.COMMENT_ENDING:H.comment+=ue;continue;case pe.COMMENT_ENDING:ue==="-"?(H.state=pe.COMMENT_ENDED,H.comment=Ge(H.opt,H.comment),H.comment&&Le(H,"oncomment",H.comment),H.comment=""):(H.comment+="-"+ue,H.state=pe.COMMENT);continue;case pe.COMMENT_ENDED:ue!==">"?(Me(H,"Malformed comment"),H.comment+="--"+ue,H.state=pe.COMMENT):H.state=pe.TEXT;continue;case pe.CDATA:ue==="]"?H.state=pe.CDATA_ENDING:H.cdata+=ue;continue;case pe.CDATA_ENDING:ue==="]"?H.state=pe.CDATA_ENDING_2:(H.cdata+="]"+ue,H.state=pe.CDATA);continue;case pe.CDATA_ENDING_2:ue===">"?(H.cdata&&Le(H,"oncdata",H.cdata),Le(H,"onclosecdata"),H.cdata="",H.state=pe.TEXT):ue==="]"?H.cdata+="]":(H.cdata+="]]"+ue,H.state=pe.CDATA);continue;case pe.PROC_INST:ue==="?"?H.state=pe.PROC_INST_ENDING:j(h,ue)?H.state=pe.PROC_INST_BODY:H.procInstName+=ue;continue;case pe.PROC_INST_BODY:if(!H.procInstBody&&j(h,ue))continue;ue==="?"?H.state=pe.PROC_INST_ENDING:H.procInstBody+=ue;continue;case pe.PROC_INST_ENDING:ue===">"?(Le(H,"onprocessinginstruction",{name:H.procInstName,body:H.procInstBody}),H.procInstName=H.procInstBody="",H.state=pe.TEXT):(H.procInstBody+="?"+ue,H.state=pe.PROC_INST_BODY);continue;case pe.OPEN_TAG:j(ye,ue)?H.tagName+=ue:($e(H),ue===">"?Pe(H):ue==="/"?H.state=pe.OPEN_TAG_SLASH:(oe(h,ue)&&Me(H,"Invalid character in tag name"),H.state=pe.ATTRIB));continue;case pe.OPEN_TAG_SLASH:ue===">"?(Pe(H,!0),Fe(H)):(Me(H,"Forward-slash in opening tag not followed by >"),H.state=pe.ATTRIB);continue;case pe.ATTRIB:if(j(h,ue))continue;ue===">"?Pe(H):ue==="/"?H.state=pe.OPEN_TAG_SLASH:j(Z,ue)?(H.attribName=ue,H.attribValue="",H.state=pe.ATTRIB_NAME):Me(H,"Invalid attribute name");continue;case pe.ATTRIB_NAME:ue==="="?H.state=pe.ATTRIB_VALUE:ue===">"?(Me(H,"Attribute without value"),H.attribValue=H.attribName,Dt(H),Pe(H)):j(h,ue)?H.state=pe.ATTRIB_NAME_SAW_WHITE:j(ye,ue)?H.attribName+=ue:Me(H,"Invalid attribute name");continue;case pe.ATTRIB_NAME_SAW_WHITE:if(ue==="=")H.state=pe.ATTRIB_VALUE;else{if(j(h,ue))continue;Me(H,"Attribute without value"),H.tag.attributes[H.attribName]="",H.attribValue="",Le(H,"onattribute",{name:H.attribName,value:""}),H.attribName="",ue===">"?Pe(H):j(Z,ue)?(H.attribName=ue,H.state=pe.ATTRIB_NAME):(Me(H,"Invalid attribute name"),H.state=pe.ATTRIB)}continue;case pe.ATTRIB_VALUE:if(j(h,ue))continue;j(y,ue)?(H.q=ue,H.state=pe.ATTRIB_VALUE_QUOTED):(Me(H,"Unquoted attribute value"),H.state=pe.ATTRIB_VALUE_UNQUOTED,H.attribValue=ue);continue;case pe.ATTRIB_VALUE_QUOTED:if(ue!==H.q){ue==="&"?H.state=pe.ATTRIB_VALUE_ENTITY_Q:H.attribValue+=ue;continue}Dt(H),H.q="",H.state=pe.ATTRIB_VALUE_CLOSED;continue;case pe.ATTRIB_VALUE_CLOSED:j(h,ue)?H.state=pe.ATTRIB:ue===">"?Pe(H):ue==="/"?H.state=pe.OPEN_TAG_SLASH:j(Z,ue)?(Me(H,"No whitespace between attributes"),H.attribName=ue,H.attribValue="",H.state=pe.ATTRIB_NAME):Me(H,"Invalid attribute name");continue;case pe.ATTRIB_VALUE_UNQUOTED:if(oe(T,ue)){ue==="&"?H.state=pe.ATTRIB_VALUE_ENTITY_U:H.attribValue+=ue;continue}Dt(H),ue===">"?Pe(H):H.state=pe.ATTRIB;continue;case pe.CLOSE_TAG:if(H.tagName)ue===">"?Fe(H):j(ye,ue)?H.tagName+=ue:H.script?(H.script+="</"+H.tagName,H.tagName="",H.state=pe.SCRIPT):(oe(h,ue)&&Me(H,"Invalid tagname in closing tag"),H.state=pe.CLOSE_TAG_SAW_WHITE);else{if(j(h,ue))continue;oe(Z,ue)?H.script?(H.script+="</"+ue,H.state=pe.SCRIPT):Me(H,"Invalid tagname in closing tag."):H.tagName=ue}continue;case pe.CLOSE_TAG_SAW_WHITE:if(j(h,ue))continue;ue===">"?Fe(H):Me(H,"Invalid characters in closing tag");continue;case pe.TEXT_ENTITY:case pe.ATTRIB_VALUE_ENTITY_Q:case pe.ATTRIB_VALUE_ENTITY_U:var qe,Xe;switch(H.state){case pe.TEXT_ENTITY:qe=pe.TEXT,Xe="textNode";break;case pe.ATTRIB_VALUE_ENTITY_Q:qe=pe.ATTRIB_VALUE_QUOTED,Xe="attribValue";break;case pe.ATTRIB_VALUE_ENTITY_U:qe=pe.ATTRIB_VALUE_UNQUOTED,Xe="attribValue"}ue===";"?(H[Xe]+=ut(H),H.entity="",H.state=qe):j(H.entity.length?F:Re,ue)?H.entity+=ue:(Me(H,"Invalid character in entity name"),H[Xe]+="&"+H.entity+ue,H.entity="",H.state=qe);continue;default:throw new Error(H,"Unknown state: "+H.state)}return H.position>=H.bufferCheckPosition&&function(He){for(var it=Math.max(n.MAX_BUFFER_LENGTH,10),bt=0,ht=0,Ct=i.length;ht<Ct;ht++){var pn=He[i[ht]].length;if(pn>it)switch(i[ht]){case"textNode":Je(He);break;case"cdata":Le(He,"oncdata",He.cdata),He.cdata="";break;case"script":Le(He,"onscript",He.script),He.script="";break;default:tt(He,"Max buffer length exceeded: "+i[ht])}bt=Math.max(bt,pn)}var Xt=n.MAX_BUFFER_LENGTH-bt;He.bufferCheckPosition=Xt+He.position}(H),H},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var P;Je(P=this),P.cdata!==""&&(Le(P,"oncdata",P.cdata),P.cdata=""),P.script!==""&&(Le(P,"onscript",P.script),P.script="")}};try{r=t(3515).Stream}catch{r=function(){}}var c=n.EVENTS.filter(function(P){return P!=="error"&&P!=="end"});function f(P,H){if(!(this instanceof f))return new f(P,H);r.apply(this),this._parser=new l(P,H),this.writable=!0,this.readable=!0;var be=this;this._parser.onend=function(){be.emit("end")},this._parser.onerror=function(ue){be.emit("error",ue),be._parser.error=null},this._decoder=null,c.forEach(function(ue){Object.defineProperty(be,"on"+ue,{get:function(){return be._parser["on"+ue]},set:function(Ue){if(!Ue)return be.removeAllListeners(ue),be._parser["on"+ue]=Ue,Ue;be.on(ue,Ue)},enumerable:!0,configurable:!1})})}f.prototype=Object.create(r.prototype,{constructor:{value:f}}),f.prototype.write=function(P){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(P)){if(!this._decoder){var H=t(748).StringDecoder;this._decoder=new H("utf8")}P=this._decoder.write(P)}return this._parser.write(P.toString()),this.emit("data",P),!0},f.prototype.end=function(P){return P&&P.length&&this.write(P),this._parser.end(),!0},f.prototype.on=function(P,H){var be=this;return be._parser["on"+P]||c.indexOf(P)===-1||(be._parser["on"+P]=function(){var ue=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);ue.splice(0,0,P),be.emit.apply(be,ue)}),r.prototype.on.call(be,P,H)};var h=`\r
	 `,g="0124356789",p="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",y=`'"`,T=h+">",b="[CDATA[",w="DOCTYPE",R="http://www.w3.org/XML/1998/namespace",M="http://www.w3.org/2000/xmlns/",Y={xml:R,xmlns:M};h=k(h),g=k(g),p=k(p);var Z=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,ye=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,Re=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,F=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function k(P){return P.split("").reduce(function(H,be){return H[be]=!0,H},{})}function j(P,H){return function(be){return Object.prototype.toString.call(be)==="[object RegExp]"}(P)?!!H.match(P):P[H]}function oe(P,H){return!j(P,H)}y=k(y),T=k(T);var L,Ee,Be,pe=0;for(var ct in n.STATE={BEGIN:pe++,BEGIN_WHITESPACE:pe++,TEXT:pe++,TEXT_ENTITY:pe++,OPEN_WAKA:pe++,SGML_DECL:pe++,SGML_DECL_QUOTED:pe++,DOCTYPE:pe++,DOCTYPE_QUOTED:pe++,DOCTYPE_DTD:pe++,DOCTYPE_DTD_QUOTED:pe++,COMMENT_STARTING:pe++,COMMENT:pe++,COMMENT_ENDING:pe++,COMMENT_ENDED:pe++,CDATA:pe++,CDATA_ENDING:pe++,CDATA_ENDING_2:pe++,PROC_INST:pe++,PROC_INST_BODY:pe++,PROC_INST_ENDING:pe++,OPEN_TAG:pe++,OPEN_TAG_SLASH:pe++,ATTRIB:pe++,ATTRIB_NAME:pe++,ATTRIB_NAME_SAW_WHITE:pe++,ATTRIB_VALUE:pe++,ATTRIB_VALUE_QUOTED:pe++,ATTRIB_VALUE_CLOSED:pe++,ATTRIB_VALUE_UNQUOTED:pe++,ATTRIB_VALUE_ENTITY_Q:pe++,ATTRIB_VALUE_ENTITY_U:pe++,CLOSE_TAG:pe++,CLOSE_TAG_SAW_WHITE:pe++,SCRIPT:pe++,SCRIPT_ENDING:pe++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(P){var H=n.ENTITIES[P],be=typeof H=="number"?String.fromCharCode(H):H;n.ENTITIES[P]=be}),n.STATE)n.STATE[n.STATE[ct]]=ct;function Ye(P,H,be){P[H]&&P[H](be)}function Le(P,H,be){P.textNode&&Je(P),Ye(P,H,be)}function Je(P){P.textNode=Ge(P.opt,P.textNode),P.textNode&&Ye(P,"ontext",P.textNode),P.textNode=""}function Ge(P,H){return P.trim&&(H=H.trim()),P.normalize&&(H=H.replace(/\s+/g," ")),H}function tt(P,H){return Je(P),P.trackPosition&&(H+=`
Line: `+P.line+`
Column: `+P.column+`
Char: `+P.c),H=new Error(H),P.error=H,Ye(P,"onerror",H),P}function Ze(P){return P.sawRoot&&!P.closedRoot&&Me(P,"Unclosed root tag"),P.state!==pe.BEGIN&&P.state!==pe.BEGIN_WHITESPACE&&P.state!==pe.TEXT&&tt(P,"Unexpected end"),Je(P),P.c="",P.closed=!0,Ye(P,"onend"),l.call(P,P.strict,P.opt),P}function Me(P,H){if(typeof P!="object"||!(P instanceof l))throw new Error("bad call to strictFail");P.strict&&tt(P,H)}function $e(P){P.strict||(P.tagName=P.tagName[P.looseCase]());var H=P.tags[P.tags.length-1]||P,be=P.tag={name:P.tagName,attributes:{}};P.opt.xmlns&&(be.ns=H.ns),P.attribList.length=0,Le(P,"onopentagstart",be)}function mt(P,H){var be=P.indexOf(":")<0?["",P]:P.split(":"),ue=be[0],Ue=be[1];return H&&P==="xmlns"&&(ue="xmlns",Ue=""),{prefix:ue,local:Ue}}function Dt(P){if(P.strict||(P.attribName=P.attribName[P.looseCase]()),P.attribList.indexOf(P.attribName)!==-1||P.tag.attributes.hasOwnProperty(P.attribName))P.attribName=P.attribValue="";else{if(P.opt.xmlns){var H=mt(P.attribName,!0),be=H.prefix,ue=H.local;if(be==="xmlns")if(ue==="xml"&&P.attribValue!==R)Me(P,"xml: prefix must be bound to "+R+`
Actual: `+P.attribValue);else if(ue==="xmlns"&&P.attribValue!==M)Me(P,"xmlns: prefix must be bound to "+M+`
Actual: `+P.attribValue);else{var Ue=P.tag,et=P.tags[P.tags.length-1]||P;Ue.ns===et.ns&&(Ue.ns=Object.create(et.ns)),Ue.ns[ue]=P.attribValue}P.attribList.push([P.attribName,P.attribValue])}else P.tag.attributes[P.attribName]=P.attribValue,Le(P,"onattribute",{name:P.attribName,value:P.attribValue});P.attribName=P.attribValue=""}}function Pe(P,H){if(P.opt.xmlns){var be=P.tag,ue=mt(P.tagName);be.prefix=ue.prefix,be.local=ue.local,be.uri=be.ns[ue.prefix]||"",be.prefix&&!be.uri&&(Me(P,"Unbound namespace prefix: "+JSON.stringify(P.tagName)),be.uri=ue.prefix);var Ue=P.tags[P.tags.length-1]||P;be.ns&&Ue.ns!==be.ns&&Object.keys(be.ns).forEach(function(fn){Le(P,"onopennamespace",{prefix:fn,uri:be.ns[fn]})});for(var et=0,qe=P.attribList.length;et<qe;et++){var Xe=P.attribList[et],He=Xe[0],it=Xe[1],bt=mt(He,!0),ht=bt.prefix,Ct=bt.local,pn=ht===""?"":be.ns[ht]||"",Xt={name:He,value:it,prefix:ht,local:Ct,uri:pn};ht&&ht!=="xmlns"&&!pn&&(Me(P,"Unbound namespace prefix: "+JSON.stringify(ht)),Xt.uri=ht),P.tag.attributes[He]=Xt,Le(P,"onattribute",Xt)}P.attribList.length=0}P.tag.isSelfClosing=!!H,P.sawRoot=!0,P.tags.push(P.tag),Le(P,"onopentag",P.tag),H||(P.noscript||P.tagName.toLowerCase()!=="script"?P.state=pe.TEXT:P.state=pe.SCRIPT,P.tag=null,P.tagName=""),P.attribName=P.attribValue="",P.attribList.length=0}function Fe(P){if(!P.tagName)return Me(P,"Weird empty close tag."),P.textNode+="</>",void(P.state=pe.TEXT);if(P.script){if(P.tagName!=="script")return P.script+="</"+P.tagName+">",P.tagName="",void(P.state=pe.SCRIPT);Le(P,"onscript",P.script),P.script=""}var H=P.tags.length,be=P.tagName;P.strict||(be=be[P.looseCase]());for(var ue=be;H--&&P.tags[H].name!==ue;)Me(P,"Unexpected close tag");if(H<0)return Me(P,"Unmatched closing tag: "+P.tagName),P.textNode+="</"+P.tagName+">",void(P.state=pe.TEXT);P.tagName=be;for(var Ue=P.tags.length;Ue-- >H;){var et=P.tag=P.tags.pop();P.tagName=P.tag.name,Le(P,"onclosetag",P.tagName);var qe={};for(var Xe in et.ns)qe[Xe]=et.ns[Xe];var He=P.tags[P.tags.length-1]||P;P.opt.xmlns&&et.ns!==He.ns&&Object.keys(et.ns).forEach(function(it){var bt=et.ns[it];Le(P,"onclosenamespace",{prefix:it,uri:bt})})}H===0&&(P.closedRoot=!0),P.tagName=P.attribValue=P.attribName="",P.attribList.length=0,P.state=pe.TEXT}function ut(P){var H,be=P.entity,ue=be.toLowerCase(),Ue="";return P.ENTITIES[be]?P.ENTITIES[be]:P.ENTITIES[ue]?P.ENTITIES[ue]:((be=ue).charAt(0)==="#"&&(be.charAt(1)==="x"?(be=be.slice(2),Ue=(H=parseInt(be,16)).toString(16)):(be=be.slice(1),Ue=(H=parseInt(be,10)).toString(10))),be=be.replace(/^0+/,""),Ue.toLowerCase()!==be?(Me(P,"Invalid character entity"),"&"+P.entity+";"):String.fromCodePoint(H))}function W(P,H){H==="<"?(P.state=pe.OPEN_WAKA,P.startTagPosition=P.position):oe(h,H)&&(Me(P,"Non-whitespace before first tag."),P.textNode=H,P.state=pe.TEXT)}function Q(P,H){var be="";return H<P.length&&(be=P.charAt(H)),be}pe=n.STATE,String.fromCodePoint||(L=String.fromCharCode,Ee=Math.floor,Be=function(){var P,H,be=[],ue=-1,Ue=arguments.length;if(!Ue)return"";for(var et="";++ue<Ue;){var qe=Number(arguments[ue]);if(!isFinite(qe)||qe<0||qe>1114111||Ee(qe)!==qe)throw RangeError("Invalid code point: "+qe);qe<=65535?be.push(qe):(P=55296+((qe-=65536)>>10),H=qe%1024+56320,be.push(P,H)),(ue+1===Ue||be.length>16384)&&(et+=L.apply(null,be),be.length=0)}return et},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Be,configurable:!0,writable:!0}):String.fromCodePoint=Be)})(e)},6739:function(o,e,t){(function(n,r,i,l,c){function f(Q){if("contents"in Q)for(var P=("styleAttrs"in Q)?Q.styleAttrs[l.byName.ruby.qname]:null,H=Q.kind==="span"&&(P==="container"||P==="textContainer"||P==="baseContainer"),be=Q.contents.length-1;be>=0;be--)!H||"styleAttrs"in Q.contents[be]&&l.byName.ruby.qname in Q.contents[be].styleAttrs?f(Q.contents[be]):delete Q.contents[be]}function h(Q,P,H,be){var ue=be&&be.timeContainer==="seq",Ue=0;be&&(Ue=ue&&H?H.end:be.begin),P.begin=P.explicit_begin?P.explicit_begin+Ue:Ue;var et=P.begin,qe=null;if("sets"in P)for(var Xe=0;Xe<P.sets.length;Xe++)h(Q,P.sets[Xe],qe,P),et=P.timeContainer==="seq"?P.sets[Xe].end:Math.max(et,P.sets[Xe].end),qe=P.sets[Xe];if("contents"in P){if("contents"in P)for(var He=0;He<P.contents.length;He++)h(Q,P.contents[He],qe,P),et=P.timeContainer==="seq"?P.contents[He].end:Math.max(et,P.contents[He].end),qe=P.contents[He]}else et=ue?P.begin:Number.POSITIVE_INFINITY;P.explicit_end!==null&&P.explicit_dur!==null?P.end=Math.min(P.begin+P.explicit_dur,Ue+P.explicit_end):P.explicit_end===null&&P.explicit_dur!==null?P.end=P.begin+P.explicit_dur:P.explicit_end!==null&&P.explicit_dur===null?P.end=Ue+P.explicit_end:P.end=et,delete P.explicit_begin,delete P.explicit_dur,delete P.explicit_end,Q._registerEvent(P)}function g(Q){this.node=Q}function p(){this.events=[],this.head=new y,this.body=null}function y(){this.styling=new T,this.layout=new R}function T(){this.styles={},this.initials={}}function b(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function w(){this.styleAttrs=null}function R(){this.regions={}}function M(Q,P){Y.call(this,"image"),this.src=Q,this.type=P}function Y(Q){this.kind=Q}function Z(Q){this.id=Q}function ye(Q){this.regionID=Q}function Re(Q){this.styleAttrs=Q}function F(Q){this.sets=Q}function k(Q){this.contents=Q}function j(Q,P,H){this.explicit_begin=Q,this.explicit_end=P,this.explicit_dur=H}function oe(){Y.call(this,"body")}function L(){Y.call(this,"div")}function Ee(){Y.call(this,"p")}function Be(){Y.call(this,"span")}function pe(){Y.call(this,"span")}function ct(){Y.call(this,"br")}function Ye(){}function Le(){}function Je(Q){return Q&&"xml:id"in Q.attributes&&Q.attributes["xml:id"].value||null}function Ge(Q){return Q&&"style"in Q.attributes?Q.attributes.style.value.split(" "):[]}function tt(Q,P){var H={};if(Q!==null)for(var be in Q.attributes){var ue=Q.attributes[be].uri+" "+Q.attributes[be].local,Ue=l.byQName[ue];if(Ue!==void 0){var et=Ue.parse(Q.attributes[be].value);et!==null?(H[ue]=et,Ue===l.byName.zIndex&&Pe(P,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):Fe(P,"Cannot parse styling attribute "+ue+" --> "+Q.attributes[be].value)}}return H}function Ze(Q,P,H){for(var be in Q.attributes)if(Q.attributes[be].uri===P&&Q.attributes[be].local===H)return Q.attributes[be].value;return null}function Me(Q,P,H){var be,ue=null;return(be=/^(\d+(?:\.\d+)?)f$/.exec(H))!==null?P!==null&&(ue=parseFloat(be[1])/P):(be=/^(\d+(?:\.\d+)?)t$/.exec(H))!==null?Q!==null&&(ue=parseFloat(be[1])/Q):(be=/^(\d+(?:\.\d+)?)ms$/.exec(H))!==null?ue=parseFloat(be[1])/1e3:(be=/^(\d+(?:\.\d+)?)s$/.exec(H))!==null?ue=parseFloat(be[1]):(be=/^(\d+(?:\.\d+)?)h$/.exec(H))!==null?ue=3600*parseFloat(be[1]):(be=/^(\d+(?:\.\d+)?)m$/.exec(H))!==null?ue=60*parseFloat(be[1]):(be=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(H))!==null?ue=3600*parseInt(be[1])+60*parseInt(be[2])+parseFloat(be[3]):(be=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(H))!==null&&P!==null&&(ue=3600*parseInt(be[1])+60*parseInt(be[2])+parseInt(be[3])+(be[4]===null?0:parseInt(be[4])/P)),ue}function $e(Q,P,H){for(;P.styleRefs.length>0;){var be=P.styleRefs.pop();be in Q.styles?($e(Q,Q.styles[be],H),Dt(Q.styles[be].styleAttrs,P.styleAttrs)):Fe(H,"Non-existant style id referenced")}}function mt(Q,P,H,be){for(var ue=P.length-1;ue>=0;ue--){var Ue=P[ue];Ue in Q.styles?Dt(Q.styles[Ue].styleAttrs,H):Fe(be,"Non-existant style id referenced")}}function Dt(Q,P){for(var H in Q)Q.hasOwnProperty(H)&&(H in P||(P[H]=Q[H]))}function Pe(Q,P){if(Q&&Q.warn&&Q.warn(P))throw P}function Fe(Q,P){if(Q&&Q.error&&Q.error(P))throw P}function ut(Q,P){throw Q&&Q.fatal&&Q.fatal(P),P}function W(Q,P){for(var H,be=0,ue=Q.length-1;be<=ue;){var Ue=Q[H=Math.floor((be+ue)/2)];if(Ue<P)be=H+1;else{if(!(Ue>P))return{found:!0,index:H};ue=H-1}}return{found:!1,index:be}}n.fromXML=function(Q,P,H){var be=r.parser(!0,{xmlns:!0}),ue=[],Ue=[],et=[],qe=0,Xe=null;be.onclosetag=function(Ct){if(ue[0]instanceof Ye)Xe.head!==null&&Xe.head.styling!==null&&mt(Xe.head.styling,ue[0].styleRefs,ue[0].styleAttrs,P),delete ue[0].styleRefs;else if(ue[0]instanceof T)for(var pn in ue[0].styles)ue[0].styles.hasOwnProperty(pn)&&$e(ue[0],ue[0].styles[pn],P);else if(ue[0]instanceof Ee||ue[0]instanceof Be){if(ue[0].contents.length>1){var Xt,fn=[ue[0].contents[0]];for(Xt=1;Xt<ue[0].contents.length;Xt++)ue[0].contents[Xt]instanceof pe&&fn[fn.length-1]instanceof pe?fn[fn.length-1].text+=ue[0].contents[Xt].text:fn.push(ue[0].contents[Xt]);ue[0].contents=fn}ue[0]instanceof Be&&ue[0].contents.length===1&&ue[0].contents[0]instanceof pe&&(ue[0].text=ue[0].contents[0].text,delete ue[0].contents)}else ue[0]instanceof g&&(ue[0].node.uri===i.ns_tt&&ue[0].node.local==="metadata"?qe--:qe>0&&H&&"onCloseTag"in H&&H.onCloseTag());et.shift(),Ue.shift(),ue.shift()},be.ontext=function(Ct){if(ue[0]!==void 0)if(ue[0]instanceof Be||ue[0]instanceof Ee){if(ue[0]instanceof Be){var pn=ue[0].styleAttrs[l.byName.ruby.qname];if(pn==="container"||pn==="textContainer"||pn==="baseContainer")return}var Xt=new pe;Xt.initFromText(Xe,ue[0],Ct,Ue[0],et[0],P),ue[0].contents.push(Xt)}else ue[0]instanceof g&&qe>0&&H&&"onText"in H&&H.onText(Ct)},be.onopentag=function(Ct){var pn=Ct.attributes["xml:space"];pn?et.unshift(pn.value):et.length===0?et.unshift("default"):et.unshift(et[0]);var Xt=Ct.attributes["xml:lang"];if(Xt?Ue.unshift(Xt.value):Ue.length===0?Ue.unshift(""):Ue.unshift(Ue[0]),Ct.uri===i.ns_tt)if(Ct.local==="tt")Xe!==null&&ut(P,"Two <tt> elements at ("+this.line+","+this.column+")"),(Xe=new p).initFromNode(Ct,Ue[0],P),ue.unshift(Xe);else if(Ct.local==="head")ue[0]instanceof p||ut(P,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),ue.unshift(Xe.head);else if(Ct.local==="styling")ue[0]instanceof y||ut(P,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),ue.unshift(Xe.head.styling);else if(Ct.local==="style"){var fn;ue[0]instanceof T?((fn=new b).initFromNode(Ct,P),fn.id?Xe.head.styling.styles[fn.id]=fn:Fe(P,"<style> element missing @id attribute"),ue.unshift(fn)):ue[0]instanceof Ye?((fn=new b).initFromNode(Ct,P),Dt(fn.styleAttrs,ue[0].styleAttrs),ue.unshift(fn)):ut(P,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(Ct.local==="initial"){var qt;if(ue[0]instanceof T){for(var Vn in(qt=new w).initFromNode(Ct,P),qt.styleAttrs)qt.styleAttrs.hasOwnProperty(Vn)&&(Xe.head.styling.initials[Vn]=qt.styleAttrs[Vn]);ue.unshift(qt)}else ut(P,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(Ct.local==="layout")ue[0]instanceof y||ut(P,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),ue.unshift(Xe.head.layout);else if(Ct.local==="region"){ue[0]instanceof R||ut(P,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var sr=new Ye;sr.initFromNode(Xe,Ct,Ue[0],P),!sr.id||sr.id in Xe.head.layout.regions?Fe(P,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):Xe.head.layout.regions[sr.id]=sr,ue.unshift(sr)}else if(Ct.local==="body"){ue[0]instanceof p||ut(P,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),Xe.body!==null&&ut(P,"Second <body> element at "+this.line+","+this.column+")");var wr=new oe;wr.initFromNode(Xe,Ct,Ue[0],P),Xe.body=wr,ue.unshift(wr)}else if(Ct.local==="div"){ue[0]instanceof L||ue[0]instanceof oe||ut(P,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var Zr=new L;Zr.initFromNode(Xe,ue[0],Ct,Ue[0],P);var Fr=Zr.styleAttrs[l.byName.backgroundImage.qname];Fr&&(Zr.contents.push(new M(Fr)),delete Zr.styleAttrs[l.byName.backgroundImage.qname]),ue[0].contents.push(Zr),ue.unshift(Zr)}else if(Ct.local==="image"){ue[0]instanceof L||ut(P,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var ii=new M;ii.initFromNode(Xe,ue[0],Ct,Ue[0],P),ue[0].contents.push(ii),ue.unshift(ii)}else if(Ct.local==="p"){ue[0]instanceof L||ut(P,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var rn=new Ee;rn.initFromNode(Xe,ue[0],Ct,Ue[0],P),ue[0].contents.push(rn),ue.unshift(rn)}else if(Ct.local==="span"){ue[0]instanceof Be||ue[0]instanceof Ee||ut(P,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var Gt=new Be;Gt.initFromNode(Xe,ue[0],Ct,Ue[0],et[0],P),ue[0].contents.push(Gt),ue.unshift(Gt)}else if(Ct.local==="br"){ue[0]instanceof Be||ue[0]instanceof Ee||ut(P,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var zt=new ct;zt.initFromNode(Xe,ue[0],Ct,Ue[0],P),ue[0].contents.push(zt),ue.unshift(zt)}else if(Ct.local==="set"){ue[0]instanceof Be||ue[0]instanceof Ee||ue[0]instanceof L||ue[0]instanceof oe||ue[0]instanceof Ye||ue[0]instanceof ct||ut(P,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var kt=new Le;kt.initFromNode(Xe,ue[0],Ct,P),ue[0].sets.push(kt),ue.unshift(kt)}else ue.unshift(new g(Ct));else ue.unshift(new g(Ct));if(ue[0]instanceof g){if(Ct.uri===i.ns_tt&&Ct.local==="metadata")qe++;else if(qe>0&&H&&"onOpenTag"in H){var Jt=[];for(var en in Ct.attributes)Jt[Ct.attributes[en].uri+" "+Ct.attributes[en].local]={uri:Ct.attributes[en].uri,local:Ct.attributes[en].local,value:Ct.attributes[en].value};H.onOpenTag(Ct.uri,Ct.local,Jt)}}},be.write(Q).close(),delete Xe.head.styling.styles;var He=!1;for(var it in Xe.head.layout.regions)if(Xe.head.layout.regions.hasOwnProperty(it)){He=!0;break}if(!He){var bt=Ye.prototype.createDefaultRegion(Xe.lang);Xe.head.layout.regions[bt.id]=bt}for(var ht in Xe.head.layout.regions)Xe.head.layout.regions.hasOwnProperty(ht)&&h(Xe,Xe.head.layout.regions[ht],null,null);return Xe.body&&h(Xe,Xe.body,null,null),Xe.body&&f(Xe.body),Xe},p.prototype.initFromNode=function(Q,P,H){var be=function(qe,Xe){var He=Ze(qe,i.ns_ttp,"cellResolution"),it=15,bt=32;if(He!==null){var ht=/(\d+) (\d+)/.exec(He);ht!==null?(bt=parseInt(ht[1]),it=parseInt(ht[2])):Pe(Xe,"Malformed cellResolution value (using initial value instead)")}return{w:bt,h:it}}(Q,H);this.cellLength={h:new c.ComputedLength(0,1/be.h),w:new c.ComputedLength(1/be.w,0)};var ue=function(qe,Xe){var He,it=Ze(qe,i.ns_ttp,"frameRate"),bt=30;it!==null&&((He=/(\d+)/.exec(it))!==null?bt=parseInt(He[1]):Pe(Xe,"Malformed frame rate attribute (using initial value instead)"));var ht=Ze(qe,i.ns_ttp,"frameRateMultiplier"),Ct=1;ht!==null&&((He=/(\d+) (\d+)/.exec(ht))!==null?Ct=parseInt(He[1])/parseInt(He[2]):Pe(Xe,"Malformed frame rate multiplier attribute (using initial value instead)"));var pn=Ct*bt,Xt=1,fn=Ze(qe,i.ns_ttp,"tickRate");return fn===null?it!==null&&(Xt=pn):(He=/(\d+)/.exec(fn))!==null?Xt=parseInt(He[1]):Pe(Xe,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:pn,tickRate:Xt}}(Q,H);this.effectiveFrameRate=ue.effectiveFrameRate,this.tickRate=ue.tickRate,this.aspectRatio=function(qe,Xe){var He=Ze(qe,i.ns_ittp,"aspectRatio");He===null&&(He=Ze(qe,i.ns_ttp,"displayAspectRatio"));var it=null;if(He!==null){var bt=/(\d+)\s+(\d+)/.exec(He);if(bt!==null){var ht=parseInt(bt[1]),Ct=parseInt(bt[2]);ht!==0&&Ct!==0?it=ht/Ct:Fe(Xe,"Illegal aspectRatio values (ignoring)")}else Fe(Xe,"Malformed aspectRatio attribute (ignoring)")}return it}(Q,H);var Ue=Ze(Q,i.ns_ttp,"timeBase");Ue!==null&&Ue!=="media"&&ut(H,"Unsupported time base");var et=function(qe,Xe){var He=Ze(qe,i.ns_tts,"extent");if(He===null)return null;var it=He.split(" ");if(it.length!==2)return Pe(Xe,"Malformed extent (ignoring)"),null;var bt=c.parseLength(it[0]),ht=c.parseLength(it[1]);return ht&&bt?{h:ht,w:bt}:(Pe(Xe,"Malformed extent values (ignoring)"),null)}(Q,H);et===null?this.pxLength={h:null,w:null}:(et.h.unit==="px"&&et.w.unit==="px"||ut(H,"Extent on TT must be in px or absent"),this.pxLength={h:new c.ComputedLength(0,1/et.h.value),w:new c.ComputedLength(1/et.w.value,0)}),this.dimensions={h:new c.ComputedLength(0,1),w:new c.ComputedLength(1,0)},this.lang=P},p.prototype._registerEvent=function(Q){if(!(Q.end<=Q.begin)){var P=W(this.events,Q.begin);if(P.found||this.events.splice(P.index,0,Q.begin),Q.end!==Number.POSITIVE_INFINITY){var H=W(this.events,Q.end);H.found||this.events.splice(H.index,0,Q.end)}}},p.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},p.prototype.getMediaTimeEvents=function(){return this.events},b.prototype.initFromNode=function(Q,P){this.id=Je(Q),this.styleAttrs=tt(Q,P),this.styleRefs=Ge(Q)},w.prototype.initFromNode=function(Q,P){for(var H in this.styleAttrs={},Q.attributes)if(Q.attributes[H].uri===i.ns_itts||Q.attributes[H].uri===i.ns_ebutts||Q.attributes[H].uri===i.ns_tts){var be=Q.attributes[H].uri+" "+Q.attributes[H].local;this.styleAttrs[be]=Q.attributes[H].value}},M.prototype.initFromNode=function(Q,P,H,be,ue){this.src="src"in H.attributes?H.attributes.src.value:null,this.src||Fe(ue,"Invalid image@src attribute"),this.type="type"in H.attributes?H.attributes.type.value:null,this.type||Fe(ue,"Invalid image@type attribute"),Re.prototype.initFromNode.call(this,Q,P,H,ue),j.prototype.initFromNode.call(this,Q,P,H,ue),F.prototype.initFromNode.call(this,Q,P,H,ue),ye.prototype.initFromNode.call(this,Q,P,H,ue),this.lang=be},Z.prototype.initFromNode=function(Q,P,H,be){this.id=Je(H)},ye.prototype.initFromNode=function(Q,P,H,be){this.regionID=function(ue){return ue&&"region"in ue.attributes?ue.attributes.region.value:""}(H)},Re.prototype.initFromNode=function(Q,P,H,be){this.styleAttrs=tt(H,be),Q.head!==null&&Q.head.styling!==null&&mt(Q.head.styling,Ge(H),this.styleAttrs,be)},F.prototype.initFromNode=function(Q,P,H,be){this.sets=[]},k.prototype.initFromNode=function(Q,P,H,be){this.contents=[]},j.prototype.initFromNode=function(Q,P,H,be){var ue=function(Ue,et,qe,Xe){var He=null;qe&&"begin"in qe.attributes&&(He=Me(Ue.tickRate,Ue.effectiveFrameRate,qe.attributes.begin.value))===null&&Pe(Xe,"Malformed begin value "+qe.attributes.begin.value+" (using 0)");var it=null;qe&&"dur"in qe.attributes&&(it=Me(Ue.tickRate,Ue.effectiveFrameRate,qe.attributes.dur.value))===null&&Pe(Xe,"Malformed dur value "+qe.attributes.dur.value+" (ignoring)");var bt=null;return qe&&"end"in qe.attributes&&(bt=Me(Ue.tickRate,Ue.effectiveFrameRate,qe.attributes.end.value))===null&&Pe(Xe,"Malformed end value (ignoring)"),{explicit_begin:He,explicit_end:bt,explicit_dur:it}}(Q,0,H,be);this.explicit_begin=ue.explicit_begin,this.explicit_end=ue.explicit_end,this.explicit_dur=ue.explicit_dur,this.timeContainer=function(Ue,et){var qe=Ue&&"timeContainer"in Ue.attributes?Ue.attributes.timeContainer.value:null;return qe&&qe!=="par"?qe==="seq"?"seq":(Fe(et,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(H,be)},oe.prototype.initFromNode=function(Q,P,H,be){Re.prototype.initFromNode.call(this,Q,null,P,be),j.prototype.initFromNode.call(this,Q,null,P,be),F.prototype.initFromNode.call(this,Q,null,P,be),ye.prototype.initFromNode.call(this,Q,null,P,be),k.prototype.initFromNode.call(this,Q,null,P,be),this.lang=H},L.prototype.initFromNode=function(Q,P,H,be,ue){Re.prototype.initFromNode.call(this,Q,P,H,ue),j.prototype.initFromNode.call(this,Q,P,H,ue),F.prototype.initFromNode.call(this,Q,P,H,ue),ye.prototype.initFromNode.call(this,Q,P,H,ue),k.prototype.initFromNode.call(this,Q,P,H,ue),this.lang=be},Ee.prototype.initFromNode=function(Q,P,H,be,ue){Re.prototype.initFromNode.call(this,Q,P,H,ue),j.prototype.initFromNode.call(this,Q,P,H,ue),F.prototype.initFromNode.call(this,Q,P,H,ue),ye.prototype.initFromNode.call(this,Q,P,H,ue),k.prototype.initFromNode.call(this,Q,P,H,ue),this.lang=be},Be.prototype.initFromNode=function(Q,P,H,be,ue,Ue){Re.prototype.initFromNode.call(this,Q,P,H,Ue),j.prototype.initFromNode.call(this,Q,P,H,Ue),F.prototype.initFromNode.call(this,Q,P,H,Ue),ye.prototype.initFromNode.call(this,Q,P,H,Ue),k.prototype.initFromNode.call(this,Q,P,H,Ue),this.space=ue,this.lang=be},pe.prototype.initFromText=function(Q,P,H,be,ue,Ue){j.prototype.initFromNode.call(this,Q,P,null,Ue),this.text=H,this.space=ue,this.lang=be},ct.prototype.initFromNode=function(Q,P,H,be,ue){ye.prototype.initFromNode.call(this,Q,P,H,ue),j.prototype.initFromNode.call(this,Q,P,H,ue),this.lang=be},Ye.prototype.createDefaultRegion=function(Q){var P=new Ye;return Z.call(P,""),Re.call(P,{}),F.call(P,[]),j.call(P,0,Number.POSITIVE_INFINITY,null),this.lang=Q,P},Ye.prototype.initFromNode=function(Q,P,H,be){Z.prototype.initFromNode.call(this,Q,null,P,be),j.prototype.initFromNode.call(this,Q,null,P,be),F.prototype.initFromNode.call(this,Q,null,P,be),this.styleAttrs=tt(P,be),this.styleRefs=Ge(P),this.lang=H},Le.prototype.initFromNode=function(Q,P,H,be){j.prototype.initFromNode.call(this,Q,P,H,be);var ue=tt(H,be);for(var Ue in this.qname=null,this.value=null,ue)if(ue.hasOwnProperty(Ue)){if(this.qname){Fe(be,"More than one style specified on set");break}this.qname=Ue,this.value=ue[Ue]}}})(e,typeof sax>"u"?t(5474):sax,typeof imscNames>"u"?t(977):imscNames,typeof imscStyles>"u"?t(1219):imscStyles,typeof imscUtils>"u"?t(6404):imscUtils)},1612:function(o,e,t){var n=/firefox/i.test(navigator.userAgent);(function(r,i,l){function c(k,j,oe,L){var Ee;if(oe.kind==="region")(Ee=document.createElement("div")).style.position="absolute";else if(oe.kind==="body")Ee=document.createElement("div");else if(oe.kind==="div")Ee=document.createElement("div");else if(oe.kind==="image"){if(Ee=document.createElement("img"),k.imgResolver!==null&&oe.src!==null){var Be=k.imgResolver(oe.src,Ee);Be&&(Ee.src=Be),Ee.height=k.regionH,Ee.width=k.regionW}}else if(oe.kind==="p")Ee=document.createElement("p");else if(oe.kind==="span")if(oe.styleAttrs[l.byName.ruby.qname]==="container")Ee=document.createElement("ruby"),k.ruby=!0;else if(oe.styleAttrs[l.byName.ruby.qname]==="base")Ee=document.createElement("span");else if(oe.styleAttrs[l.byName.ruby.qname]==="text")Ee=document.createElement("rt");else if(oe.styleAttrs[l.byName.ruby.qname]==="baseContainer")Ee=document.createElement("rbc");else if(oe.styleAttrs[l.byName.ruby.qname]==="textContainer")Ee=document.createElement("rtc");else{if(oe.styleAttrs[l.byName.ruby.qname]==="delimiter")return;Ee=document.createElement("span")}else oe.kind==="br"&&(Ee=document.createElement("br"));if(Ee){if(oe.lang&&(oe.kind!=="region"&&oe.lang===L.lang||(Ee.lang=oe.lang)),j.appendChild(Ee),Ee.style.margin="0",oe.kind==="region"){var pe=oe.styleAttrs[l.byName.writingMode.qname];pe==="lrtb"||pe==="lr"?(k.ipd="lr",k.bpd="tb"):pe==="rltb"||pe==="rl"?(k.ipd="rl",k.bpd="tb"):pe==="tblr"?(k.ipd="tb",k.bpd="lr"):pe!=="tbrl"&&pe!=="tb"||(k.ipd="tb",k.bpd="rl")}else if(oe.kind==="p"&&k.bpd==="tb"){var ct=oe.styleAttrs[l.byName.direction.qname];k.ipd=ct==="ltr"?"lr":"rl"}for(var Ye=0;Ye<w.length;Ye++){var Le=w[Ye],Je=oe.styleAttrs[Le.qname];Je!==void 0&&Le.map!==null&&Le.map(k,Ee,oe,Je)}var Ge=Ee,tt=oe.styleAttrs[l.byName.linePadding.qname];if(tt&&!tt.isZero()){var Ze=tt.toUsedLength(k.w,k.h);if(Ze>0){var Me=Math.ceil(Ze)+"px";k.bpd==="tb"?(Ge.style.paddingLeft=Me,Ge.style.paddingRight=Me):(Ge.style.paddingTop=Me,Ge.style.paddingBottom=Me),k.lp=tt}}var $e=oe.styleAttrs[l.byName.multiRowAlign.qname];if($e&&$e!=="auto"){var mt=document.createElement("span");mt.style.display="inline-block",mt.style.textAlign=$e,Ee.appendChild(mt),Ge=mt,k.mra=$e}var Dt=oe.styleAttrs[l.byName.rubyReserve.qname];if(Dt&&Dt[0]!=="none"&&(k.rubyReserve=Dt),oe.styleAttrs[l.byName.fillLineGap.qname]&&(k.flg=!0),oe.kind==="span"&&oe.text){var Pe=oe.styleAttrs[l.byName.textEmphasis.qname];if(Pe&&Pe.style!=="none"&&(k.textEmphasis=!0),l.byName.textCombine.qname in oe.styleAttrs&&oe.styleAttrs[l.byName.textCombine.qname]==="all")Ee.textContent=oe.text,Ee._isd_element=oe,Pe&&T(k,Ee,0,Pe);else for(var Fe="",ut=0;ut<oe.text.length;ut++){Fe+=oe.text.charAt(ut);var W=oe.text.charCodeAt(ut);if(W<55296||W>56319||ut===oe.text.length-1){var Q=document.createElement("span");Q.textContent=Fe,Pe&&T(k,Q,0,Pe),Ee.appendChild(Q),Fe="",Q._isd_element=oe}}}if("contents"in oe)for(var P=0;P<oe.contents.length;P++)c(k,Ge,oe.contents[P],oe);var H=[];if(oe.kind==="p"&&(y(k,Ge,H,null),k.rubyReserve&&(function(qe,Xe){for(var He=0;He<qe.length;He++){var it,bt,ht=document.createElement("ruby"),Ct=document.createElement("span");Ct.textContent="​",ht.appendChild(Ct);var pn,Xt=Xe.rubyReserve[1].toUsedLength(Xe.w,Xe.h)+"px";Xe.rubyReserve[0]==="both"||Xe.rubyReserve[0]==="outside"&&qe.length==1?((it=document.createElement("rtc")).style[Z]=Y?"after":"under",it.textContent="​",it.style.fontSize=Xt,(bt=document.createElement("rtc")).style[Z]=Y?"before":"over",bt.textContent="​",bt.style.fontSize=Xt,ht.appendChild(it),ht.appendChild(bt)):((it=document.createElement("rtc")).textContent="​",it.style.fontSize=Xt,pn=Xe.rubyReserve[0]==="after"||Xe.rubyReserve[0]==="outside"&&He>0?Y?"after":Xe.bpd==="tb"||Xe.bpd==="rl"?"under":"over":Y?"before":Xe.bpd==="tb"||Xe.bpd==="rl"?"over":"under",it.style[Z]=pn,ht.appendChild(it));for(var fn=null,qt=0;qt<qe[He].rbc.length;qt++)if(qe[He].rbc[qt].localName==="ruby"){fn=qe[He].rbc[qt];for(var Vn=0;Vn<fn.style.length;Vn++)ht.style.setProperty(fn.style.item(Vn),fn.style.getPropertyValue(fn.style.item(Vn)));break}(fn=fn||qe[He].elements[0].node).parentElement.insertBefore(ht,fn)}}(H,k),k.rubyReserve=null),(k.ruby||k.rubyReserve)&&(function(qe,Xe){for(var He=0;He<qe.length;He++)for(var it=0;it<qe[He].rbc.length;it++){var bt;qe[He].rbc[it].style[Z]||(bt=Y?He===0?"before":"after":Xe.bpd==="tb"||Xe.bpd==="rl"?He===0?"over":"under":He===0?"under":"over",qe[He].rbc[it].style[Z]=bt)}}(H,k),k.ruby=null),k.textEmphasis&&(function(qe,Xe){for(var He=0;He<qe.length;He++)for(var it=0;it<qe[He].te.length;it++){var bt;qe[He].te[it].style[Re]&&qe[He].te[it].style[Re]!=="none"||(bt=Xe.bpd==="tb"?He===0?"left over":"left under":Xe.bpd==="rl"?He===0?"right under":"left under":He===0?"left under":"right under",qe[He].te[it].style[Re]=bt)}}(H,k),k.textEmphasis=null),k.mra&&(function(qe){for(var Xe=0;Xe<qe.length-1;Xe++){var He=qe[Xe].elements.length;if(He!==0&&qe[Xe].br===!1){var it=document.createElement("br"),bt=qe[Xe].elements[He-1].node;bt.parentElement.insertBefore(it,bt.nextSibling)}}}(H),k.mra=null),k.lp&&(function(qe,Xe,He){if(qe!==null)for(var it=0;it<qe.length;it++){var bt=qe[it].elements.length,ht=Math.ceil(Xe)+"px",Ct="-"+Math.ceil(Xe)+"px";if(bt!==0){var pn=qe[it].elements[qe[it].start_elem],Xt=qe[it].elements[qe[it].end_elem];if(pn===Xt){var fn=pn.node.getBoundingClientRect();if(fn.width==0||fn.height==0)continue}He.ipd==="lr"?(pn.node.style.marginLeft=Ct,pn.node.style.paddingLeft=ht):He.ipd==="rl"?(pn.node.style.paddingRight=ht,pn.node.style.marginRight=Ct):He.ipd==="tb"&&(pn.node.style.paddingTop=ht,pn.node.style.marginTop=Ct),He.ipd==="lr"?(n||(Xt.node.style.marginRight=Ct),Xt.node.style.paddingRight=ht):He.ipd==="rl"?(Xt.node.style.paddingLeft=ht,n||(Xt.node.style.marginLeft=Ct)):He.ipd==="tb"&&(Xt.node.style.paddingBottom=ht,Xt.node.style.marginBottom=Ct)}}}(H,k.lp.toUsedLength(k.w,k.h),k),k.lp=null),function(qe,Xe){for(var He=0;He<qe.length;He++)for(var it=qe[He],bt=1;bt<it.elements.length;){var ht=it.elements[bt-1],Ct=it.elements[bt];h(ht.node,Ct.node,Xe)?it.elements.splice(bt,1):bt++}for(var pn,Xt,fn=[],qt=0;qt<qe.length;qt++)for(var Vn=0;Vn<qe[qt].elements.length;Vn++)(Xt=f(pn=qe[qt].elements[Vn].node,fn,!1))&&(pn.style.backgroundColor=Xt);for(var sr=0;sr<fn.length;sr++)fn[sr].style.backgroundColor=""}(H,k),k.flg)){var be=p(Ge.getBoundingClientRect(),k);(function(qe,Xe,He,it){for(var bt=Math.sign(He-Xe),ht=0;ht<=qe.length;ht++){var Ct,pn,Xt,fn;if(Ct=ht===0?Math.round(Xe):ht===qe.length?Math.round(He):Math.round((qe[ht-1].after+qe[ht].before)/2),ht>0&&qe[ht-1])for(Xt=0;Xt<qe[ht-1].elements.length;Xt++)pn=bt*(Ct-(fn=qe[ht-1].elements[Xt]).after)+"px",it.bpd==="lr"?fn.node.style.paddingRight=pn:it.bpd==="rl"?fn.node.style.paddingLeft=pn:it.bpd==="tb"&&(fn.node.style.paddingBottom=pn);if(ht<qe.length)for(Xt=0;Xt<qe[ht].elements.length;Xt++)pn=bt*((fn=qe[ht].elements[Xt]).before-Ct)+"px",it.bpd==="lr"?fn.node.style.paddingLeft=pn:it.bpd==="rl"?fn.node.style.paddingRight=pn:it.bpd==="tb"&&(fn.node.style.paddingTop=pn)}})(H,be.before,be.after,k),k.flg=null}if(oe.kind==="region"&&k.bpd==="tb"&&k.enableRollUp&&oe.contents.length>0&&oe.styleAttrs[l.byName.displayAlign.qname]==="after"){y(k,Ge,H,null);var ue=new g(oe.id===""?"_":oe.id,H);if(k.currentISDState[ue.id]=ue,k.previousISDState&&ue.id in k.previousISDState&&k.previousISDState[ue.id].plist.length>0&&ue.plist.length>1&&ue.plist[ue.plist.length-2].text===k.previousISDState[ue.id].plist[k.previousISDState[ue.id].plist.length-1].text){var Ue=Ee.firstElementChild,et=ue.plist[ue.plist.length-1].after-ue.plist[ue.plist.length-1].before;Ue.style.bottom="-"+et+"px",Ue.style.transition="transform 0.4s",Ue.style.position="relative",Ue.style.transform="translateY(-"+et+"px)"}}}else F(k.errorHandler,"Error processing ISD element kind: "+oe.kind)}function f(k,j,oe){return k.style.backgroundColor?(oe&&!j.includes(k)&&j.push(k),k.style.backgroundColor):k.parentElement.nodeName==="SPAN"||k.parentElement.nodeName==="RUBY"||k.parentElement.nodeName==="RBC"||k.parentElement.nodeName==="RTC"||k.parentElement.nodeName==="RT"?f(k.parentElement,j,!0):void 0}function h(k,j,oe){if(k.tagName==="SPAN"&&j.tagName==="SPAN"&&k._isd_element===j._isd_element){if(!k._isd_element)return F(oe.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;k.textContent+=j.textContent;for(var L=0;L<j.style.length;L++){var Ee=j.style[L];(Ee.indexOf("border")>=0||Ee.indexOf("padding")>=0||Ee.indexOf("margin")>=0)&&(k.style[Ee]=j.style[Ee])}return j.parentElement.removeChild(j),!0}return!1}function g(k,j){this.id=k,this.plist=j}function p(k,j){var oe={before:null,after:null,start:null,end:null};return j.bpd==="tb"?(oe.before=k.top,oe.after=k.bottom,j.ipd==="lr"?(oe.start=k.left,oe.end=k.right):(oe.start=k.right,oe.end=k.left)):j.bpd==="lr"?(oe.before=k.left,oe.after=k.right,oe.start=k.top,oe.end=k.bottom):j.bpd==="rl"&&(oe.before=k.right,oe.after=k.left,oe.start=k.top,oe.end=k.bottom),oe}function y(k,j,oe,L){if(j.localName!=="rt"&&j.localName!=="rtc"){var Ee,Be,pe,ct,Ye=j.style.backgroundColor||L;if(j.childElementCount===0)if(j.localName==="span"||j.localName==="rb"){var Le=p(j.getBoundingClientRect(),k);if(oe.length!==0&&(Ee=Le.before,Be=Le.after,pe=oe[oe.length-1].before,Be<(ct=oe[oe.length-1].after)&&Ee>pe||ct<=Be&&pe>=Ee)){var Je=Math.sign(Le.after-Le.before),Ge=Math.sign(Le.end-Le.start);Je*(Le.before-oe[oe.length-1].before)<0&&(oe[oe.length-1].before=Le.before),Je*(Le.after-oe[oe.length-1].after)>0&&(oe[oe.length-1].after=Le.after),Ge*(Le.start-oe[oe.length-1].start)<0&&(oe[oe.length-1].start=Le.start,oe[oe.length-1].start_elem=oe[oe.length-1].elements.length),Ge*(Le.end-oe[oe.length-1].end)>0&&(oe[oe.length-1].end=Le.end,oe[oe.length-1].end_elem=oe[oe.length-1].elements.length)}else oe.push({before:Le.before,after:Le.after,start:Le.start,end:Le.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});oe[oe.length-1].text+=j.textContent,oe[oe.length-1].elements.push({node:j,bgcolor:Ye,before:Le.before,after:Le.after})}else j.localName==="br"&&oe.length!==0&&(oe[oe.length-1].br=!0);else for(var tt=j.firstChild;tt;)tt.nodeType===Node.ELEMENT_NODE&&(y(k,tt,oe,Ye),tt.localName==="ruby"||tt.localName==="rtc"?oe.length>0&&oe[oe.length-1].rbc.push(tt):tt.localName==="span"&&tt.style[ye]&&tt.style[ye]!=="none"&&oe.length>0&&oe[oe.length-1].te.push(tt)),tt=tt.nextSibling}}function T(k,j,oe,L){var Ee;L.style!=="none"&&(L.style==="auto"?j.style[ye]="filled":j.style[ye]=L.style+" "+L.symbol,(L.position==="before"||L.position==="after")&&(Ee=k.bpd==="tb"?L.position==="before"?"left over":"left under":k.bpd==="rl"?L.position==="before"?"right under":"left under":L.position==="before"?"left under":"right under",j.style[Re]=Ee))}function b(k,j){this.qname=k,this.map=j}r.render=function(k,j,oe,L,Ee,Be,pe,ct,Ye){var Le=L||j.clientHeight,Je=Ee||j.clientWidth;if(k.aspectRatio!==null){var Ge=Le*k.aspectRatio;Ge>Je?Le=Math.round(Je/k.aspectRatio):Je=Ge}var tt=document.createElement("div");tt.style.position="relative",tt.style.width=Je+"px",tt.style.height=Le+"px",tt.style.margin="auto",tt.style.top=0,tt.style.bottom=0,tt.style.left=0,tt.style.right=0,tt.style.zIndex=0;var Ze={h:Le,w:Je,regionH:null,regionW:null,imgResolver:oe,displayForcedOnlyMode:Be||!1,isd:k,errorHandler:pe,previousISDState:ct,enableRollUp:Ye||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(j.appendChild(tt),"contents"in k)for(var Me=0;Me<k.contents.length;Me++)c(Ze,tt,k.contents[Me],k);return Ze.currentISDState};for(var w=[new b("http://www.w3.org/ns/ttml#styling backgroundColor",function(k,j,oe,L){L[3]!==0&&(j.style.backgroundColor="rgba("+L[0].toString()+","+L[1].toString()+","+L[2].toString()+","+(L[3]/255).toString()+")")}),new b("http://www.w3.org/ns/ttml#styling color",function(k,j,oe,L){j.style.color="rgba("+L[0].toString()+","+L[1].toString()+","+L[2].toString()+","+(L[3]/255).toString()+")"}),new b("http://www.w3.org/ns/ttml#styling direction",function(k,j,oe,L){j.style.direction=L}),new b("http://www.w3.org/ns/ttml#styling display",function(k,j,oe,L){}),new b("http://www.w3.org/ns/ttml#styling displayAlign",function(k,j,oe,L){j.style.display="flex",j.style.flexDirection="column",L==="before"?j.style.justifyContent="flex-start":L==="center"?j.style.justifyContent="center":L==="after"&&(j.style.justifyContent="flex-end")}),new b("http://www.w3.org/ns/ttml#styling extent",function(k,j,oe,L){k.regionH=L.h.toUsedLength(k.w,k.h),k.regionW=L.w.toUsedLength(k.w,k.h);var Ee=0,Be=0,pe=oe.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];pe&&(Ee=pe[0].toUsedLength(k.w,k.h)+pe[2].toUsedLength(k.w,k.h),Be=pe[1].toUsedLength(k.w,k.h)+pe[3].toUsedLength(k.w,k.h)),j.style.height=k.regionH-Ee+"px",j.style.width=k.regionW-Be+"px"}),new b("http://www.w3.org/ns/ttml#styling fontFamily",function(k,j,oe,L){for(var Ee=[],Be=0;Be<L.length;Be++)L[Be]=L[Be].trim(),L[Be]==="monospaceSerif"?(Ee.push("Courier New"),Ee.push('"Liberation Mono"'),Ee.push("Courier"),Ee.push("monospace")):L[Be]==="proportionalSansSerif"?(Ee.push("Arial"),Ee.push("Helvetica"),Ee.push('"Liberation Sans"'),Ee.push("sans-serif")):L[Be]==="monospace"?Ee.push("monospace"):L[Be]==="sansSerif"?Ee.push("sans-serif"):L[Be]==="serif"?Ee.push("serif"):L[Be]==="monospaceSansSerif"?(Ee.push("Consolas"),Ee.push("monospace")):L[Be]==="proportionalSerif"?Ee.push("serif"):Ee.push(L[Be]);if(Ee.length>0){for(var pe=[Ee[0]],ct=1;ct<Ee.length;ct++)pe.indexOf(Ee[ct])==-1&&pe.push(Ee[ct]);Ee=pe}j.style.fontFamily=Ee.join(",")}),new b("http://www.w3.org/ns/ttml#styling shear",function(k,j,oe,L){if(L!==0){var Ee=-.9*L;k.bpd==="tb"?j.style.transform="skewX("+Ee+"deg)":j.style.transform="skewY("+Ee+"deg)"}}),new b("http://www.w3.org/ns/ttml#styling fontSize",function(k,j,oe,L){j.style.fontSize=L.toUsedLength(k.w,k.h)+"px"}),new b("http://www.w3.org/ns/ttml#styling fontStyle",function(k,j,oe,L){j.style.fontStyle=L}),new b("http://www.w3.org/ns/ttml#styling fontWeight",function(k,j,oe,L){j.style.fontWeight=L}),new b("http://www.w3.org/ns/ttml#styling lineHeight",function(k,j,oe,L){j.style.lineHeight=L==="normal"?"normal":L.toUsedLength(k.w,k.h)+"px"}),new b("http://www.w3.org/ns/ttml#styling opacity",function(k,j,oe,L){j.style.opacity=L}),new b("http://www.w3.org/ns/ttml#styling origin",function(k,j,oe,L){j.style.top=L.h.toUsedLength(k.w,k.h)+"px",j.style.left=L.w.toUsedLength(k.w,k.h)+"px"}),new b("http://www.w3.org/ns/ttml#styling overflow",function(k,j,oe,L){j.style.overflow=L}),new b("http://www.w3.org/ns/ttml#styling padding",function(k,j,oe,L){var Ee=[];Ee[0]=L[0].toUsedLength(k.w,k.h)+"px",Ee[1]=L[3].toUsedLength(k.w,k.h)+"px",Ee[2]=L[2].toUsedLength(k.w,k.h)+"px",Ee[3]=L[1].toUsedLength(k.w,k.h)+"px",j.style.padding=Ee.join(" ")}),new b("http://www.w3.org/ns/ttml#styling position",function(k,j,oe,L){j.style.top=L.h.toUsedLength(k.w,k.h)+"px",j.style.left=L.w.toUsedLength(k.w,k.h)+"px"}),new b("http://www.w3.org/ns/ttml#styling rubyAlign",function(k,j,oe,L){j.style.rubyAlign=L==="spaceAround"?"space-around":"center"}),new b("http://www.w3.org/ns/ttml#styling rubyPosition",function(k,j,oe,L){var Ee;L!=="before"&&L!=="after"||(Ee=Y?L:k.bpd==="tb"||k.bpd==="rl"?L==="before"?"over":"under":L==="before"?"under":"over",j.parentElement.style[Z]=Ee)}),new b("http://www.w3.org/ns/ttml#styling showBackground",null),new b("http://www.w3.org/ns/ttml#styling textAlign",function(k,j,oe,L){var Ee;Ee=L==="start"?k.ipd==="rl"?"right":"left":L==="end"?k.ipd==="rl"?"left":"right":L,j.style.textAlign=Ee}),new b("http://www.w3.org/ns/ttml#styling textDecoration",function(k,j,oe,L){j.style.textDecoration=L.join(" ").replace("lineThrough","line-through")}),new b("http://www.w3.org/ns/ttml#styling textOutline",function(k,j,oe,L){}),new b("http://www.w3.org/ns/ttml#styling textShadow",function(k,j,oe,L){var Ee=oe.styleAttrs[l.byName.textOutline.qname];if(L==="none"&&Ee==="none")j.style.textShadow="";else{var Be=[];if(Ee!=="none"){var pe="rgba("+Ee.color[0].toString()+","+Ee.color[1].toString()+","+Ee.color[2].toString()+","+(Ee.color[3]/255).toString()+")";Be.push("1px 1px 1px "+pe),Be.push("-1px 1px 1px "+pe),Be.push("1px -1px 1px "+pe),Be.push("-1px -1px 1px "+pe)}if(L!=="none")for(var ct=0;ct<L.length;ct++)Be.push(L[ct].x_off.toUsedLength(k.w,k.h)+"px "+L[ct].y_off.toUsedLength(k.w,k.h)+"px "+L[ct].b_radius.toUsedLength(k.w,k.h)+"px rgba("+L[ct].color[0].toString()+","+L[ct].color[1].toString()+","+L[ct].color[2].toString()+","+(L[ct].color[3]/255).toString()+")");j.style.textShadow=Be.join(",")}}),new b("http://www.w3.org/ns/ttml#styling textCombine",function(k,j,oe,L){j.style.textCombineUpright=L}),new b("http://www.w3.org/ns/ttml#styling textEmphasis",function(k,j,oe,L){}),new b("http://www.w3.org/ns/ttml#styling unicodeBidi",function(k,j,oe,L){var Ee;Ee=L==="bidiOverride"?"bidi-override":L,j.style.unicodeBidi=Ee}),new b("http://www.w3.org/ns/ttml#styling visibility",function(k,j,oe,L){j.style.visibility=L}),new b("http://www.w3.org/ns/ttml#styling wrapOption",function(k,j,oe,L){L==="wrap"?oe.space==="preserve"?j.style.whiteSpace="pre-wrap":j.style.whiteSpace="normal":oe.space==="preserve"?j.style.whiteSpace="pre":j.style.whiteSpace="noWrap"}),new b("http://www.w3.org/ns/ttml#styling writingMode",function(k,j,oe,L){L==="lrtb"||L==="lr"||L==="rltb"||L==="rl"?j.style.writingMode="horizontal-tb":L==="tblr"?j.style.writingMode="vertical-lr":L!=="tbrl"&&L!=="tb"||(j.style.writingMode="vertical-rl")}),new b("http://www.w3.org/ns/ttml#styling zIndex",function(k,j,oe,L){j.style.zIndex=L}),new b("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(k,j,oe,L){k.displayForcedOnlyMode&&L===!1&&(j.style.visibility="hidden")})],R={},M=0;M<w.length;M++)R[w[M].qname]=w[M];var Y="webkitRubyPosition"in window.getComputedStyle(document.documentElement),Z=Y?"webkitRubyPosition":"rubyPosition",ye="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",Re="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function F(k,j){if(k&&k.error&&k.error(j))throw j}})(e,typeof imscNames>"u"?t(977):imscNames,typeof imscStyles>"u"?t(1219):imscStyles,typeof imscUtils>"u"?t(6404):imscUtils)},8905:function(o,e,t){(function(n,r,i,l){n.generateISD=function(b,w,R){var M,Y=new p(b),Z={},ye={},Re=b.head.styling.initials[i.byName.showBackground.qname],F=b.head.styling.initials[i.byName.backgroundColor.qname];for(var k in b.head.layout.regions)if(b.head.layout.regions.hasOwnProperty(k)){var j=b.head.layout.regions[k],oe=j.styleAttrs[i.byName.showBackground.qname]||Re,L=j.styleAttrs[i.byName.backgroundColor.qname]||F;ye[j.id]=(oe==="always"||oe===void 0)&&L!==void 0&&!(w<j.begin||w>=j.end)}for(var Ee in b.body&&b.body.regionID&&(ye[b.body.regionID]=!0),M=b.body!==null?function pe(ct,Ye){if(Ye.contents){var Le={};for(var Je in Ye)Ye.hasOwnProperty(Je)&&(Le[Je]=Ye[Je]);return Le.contents=[],Ye.contents.filter(function(Ge){return!(ct<Ge.begin||ct>=Ge.end)}).forEach(function(Ge){var tt=pe(ct,Ge);tt.regionID&&(ye[tt.regionID]=!0),tt!==null&&Le.contents.push(tt)}),Le}return Ye}(w,b.body):null,ye[""]!==void 0&&(ye[""]=!0),ye)if(ye[Ee]){var Be=f(b,w,b.head.layout.regions[Ee],M,null,"",b.head.layout.regions[Ee],R,Z);Be!==null&&Y.contents.push(Be.element)}return Y};var c=[i.byName.color.qname,i.byName.textCombine.qname,i.byName.textDecoration.qname,i.byName.textEmphasis.qname,i.byName.textOutline.qname,i.byName.textShadow.qname];function f(b,w,R,M,Y,Z,ye,Re,F){if(w<ye.begin||w>=ye.end)return null;var k="regionID"in ye&&ye.regionID!==""?ye.regionID:Z;if(Y!==null&&k!==R.id&&(!("contents"in ye)||"contents"in ye&&ye.contents.length===0||k!==""))return null;var j=new y(ye);if("sets"in ye)for(var oe=0;oe<ye.sets.length;oe++)w<ye.sets[oe].begin||w>=ye.sets[oe].end||(j.styleAttrs[ye.sets[oe].qname]=ye.sets[oe].value);var L={};for(var Ee in j.styleAttrs)if(j.styleAttrs.hasOwnProperty(Ee)&&(L[Ee]=!0,j.kind==="region"&&Ee===i.byName.writingMode.qname&&!(i.byName.direction.qname in j.styleAttrs))){var Be=j.styleAttrs[Ee];Be==="lrtb"||Be==="lr"?j.styleAttrs[i.byName.direction.qname]="ltr":Be!=="rltb"&&Be!=="rl"||(j.styleAttrs[i.byName.direction.qname]="rtl")}if(Y!==null)for(var pe=0;pe<i.all.length;pe++){var ct=i.all[pe];if(ct.qname===i.byName.textDecoration.qname){var Ye=Y.styleAttrs[ct.qname],Le=j.styleAttrs[ct.qname],Je=[];Le===void 0?Je=Ye:Le.indexOf("none")===-1?((Le.indexOf("noUnderline")===-1&&Ye.indexOf("underline")!==-1||Le.indexOf("underline")!==-1)&&Je.push("underline"),(Le.indexOf("noLineThrough")===-1&&Ye.indexOf("lineThrough")!==-1||Le.indexOf("lineThrough")!==-1)&&Je.push("lineThrough"),(Le.indexOf("noOverline")===-1&&Ye.indexOf("overline")!==-1||Le.indexOf("overline")!==-1)&&Je.push("overline")):Je.push("none"),j.styleAttrs[ct.qname]=Je}else if(ct.qname!==i.byName.fontSize.qname||ct.qname in j.styleAttrs||j.kind!=="span"||j.styleAttrs[i.byName.ruby.qname]!=="textContainer")if(ct.qname!==i.byName.fontSize.qname||ct.qname in j.styleAttrs||j.kind!=="span"||j.styleAttrs[i.byName.ruby.qname]!=="text")ct.inherit&&ct.qname in Y.styleAttrs&&!(ct.qname in j.styleAttrs)&&(j.styleAttrs[ct.qname]=Y.styleAttrs[ct.qname]);else{var Ge=Y.styleAttrs[i.byName.fontSize.qname];Y.styleAttrs[i.byName.ruby.qname]==="textContainer"?j.styleAttrs[ct.qname]=Ge:j.styleAttrs[ct.qname]=new l.ComputedLength(.5*Ge.rw,.5*Ge.rh)}else{var tt=Y.styleAttrs[i.byName.fontSize.qname];j.styleAttrs[ct.qname]=new l.ComputedLength(.5*tt.rw,.5*tt.rh)}}for(var Ze=0;Ze<i.all.length;Ze++){var Me=i.all[Ze];if(!(Me.qname in j.styleAttrs)&&!(Me.qname===i.byName.position.qname&&i.byName.origin.qname in j.styleAttrs||Me.qname===i.byName.origin.qname&&i.byName.position.qname in j.styleAttrs)){var $e=b.head.styling.initials[Me.qname]||Me.initial;if($e!==null&&(j.kind==="region"||Me.inherit===!1&&$e!==null)){var mt=Me.parse($e);mt!==null?(j.styleAttrs[Me.qname]=mt,L[Me.qname]=!0):T(Re,"Invalid initial value for '"+Me.qname+"' on element '"+j.kind)}}}for(var Dt=0;Dt<i.all.length;Dt++){var Pe=i.all[Dt];if(Pe.qname in L&&Pe.compute!==null){var Fe=Pe.compute(b,Y,j,j.styleAttrs[Pe.qname],F);Fe!==null?j.styleAttrs[Pe.qname]=Fe:(j.styleAttrs[Pe.qname]=Pe.compute(b,Y,j,Pe.parse(Pe.initial),F),T(Re,"Style '"+Pe.qname+"' on element '"+j.kind+"' cannot be computed"))}}if(j.styleAttrs[i.byName.display.qname]==="none")return null;var ut=null;Y===null?ut=M===null?[]:[M]:"contents"in ye&&(ut=ye.contents);for(var W=0;ut!==null&&W<ut.length;W++){var Q=f(b,w,R,M,j,k,ut[W],Re,F);Q!==null&&j.contents.push(Q.element)}for(var P in j.styleAttrs)if(j.styleAttrs.hasOwnProperty(P)){var H=!1;if(j.kind==="span"){var be=j.styleAttrs[i.byName.ruby.qname];(H=(be==="container"||be==="textContainer"||be==="baseContainer")&&c.indexOf(P)!==-1)||(H=be!=="container"&&P===i.byName.rubyAlign.qname),H||(H=!(be==="textContainer"||be==="text")&&P===i.byName.rubyPosition.qname)}if(!H){var ue=i.byQName[P];"applies"in ue&&(H=ue.applies.indexOf(j.kind)===-1)}H&&delete j.styleAttrs[P]}var Ue=j.styleAttrs[i.byName.ruby.qname];if(j.kind==="p"||j.kind==="span"&&(Ue==="textContainer"||Ue==="text")){var et=[];h(j,et),function(qe){for(var Xe,He=0;He<qe.length;)if((Xe=qe[He]).kind!=="br"&&Xe.space!=="preserve"){var it=Xe.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(it)&&(He===0||(bt=qe[He-1]).kind==="br"||/[\r\n\t ]$/.test(bt.text))&&(it=it.substring(1)),Xe.text=it,it.length===0?qe.splice(He,1):He++}else He++;var bt,ht;for(He=0;He<qe.length;He++)(Xe=qe[He]).kind!=="br"&&Xe.space!=="preserve"?/[ ]$/.test(Xe.text)&&(He===qe.length-1||(ht=qe[He+1]).kind==="br"||ht.space==="preserve"&&/^[\r\n]/.test(ht.text))&&(Xe.text=Xe.text.slice(0,-1)):He++}(et),g(j)}return j.kind==="div"&&i.byName.backgroundImage.qname in j.styleAttrs||j.kind==="br"||j.kind==="image"||"contents"in j&&j.contents.length>0||j.kind==="span"&&j.text!==null||j.kind==="region"&&j.styleAttrs[i.byName.showBackground.qname]==="always"?{region_id:k,element:j}:null}function h(b,w){if("contents"in b)for(var R=0;R<b.contents.length;R++){var M=b.contents[R],Y=M.styleAttrs[i.byName.ruby.qname];(M.kind!=="span"||Y!=="textContainer"&&Y!=="text")&&("contents"in M?h(M,w):(M.kind==="span"&&M.text.length!==0||M.kind==="br")&&w.push(M))}}function g(b){if(b.kind==="br")return!1;if("text"in b)return b.text.length===0;if("contents"in b){for(var w=b.contents.length;w--;)g(b.contents[w])&&b.contents.splice(w,1);return b.contents.length===0}}function p(b){this.contents=[],this.aspectRatio=b.aspectRatio,this.lang=b.lang}function y(b){for(var w in this.kind=b.kind||"region",this.lang=b.lang,b.id&&(this.id=b.id),this.styleAttrs={},b.styleAttrs)b.styleAttrs.hasOwnProperty(w)&&(this.styleAttrs[w]=b.styleAttrs[w]);"src"in b&&(this.src=b.src),"type"in b&&(this.type=b.type),"text"in b?this.text=b.text:(this.kind==="region"||"contents"in b)&&(this.contents=[]),"space"in b&&(this.space=b.space)}function T(b,w){if(b&&b.error&&b.error(w))throw w}})(e,typeof imscNames>"u"?t(977):imscNames,typeof imscStyles>"u"?t(1219):imscStyles,typeof imscUtils>"u"?t(6404):imscUtils)},7640:function(o,e,t){e.generateISD=t(8905).generateISD,e.fromXML=t(6739).fromXML,e.renderHTML=t(1612).render},977:function(o,e){(function(t){t.ns_tt="http://www.w3.org/ns/ttml",t.ns_tts="http://www.w3.org/ns/ttml#styling",t.ns_ttp="http://www.w3.org/ns/ttml#parameter",t.ns_xml="http://www.w3.org/XML/1998/namespace",t.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",t.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",t.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",t.ns_ebutts="urn:ebu:tt:style"})(e)},1219:function(o,e,t){(function(n,r,i){function l(h,g,p,y,T,b,w,R){this.name=g,this.ns=h,this.qname=h+" "+g,this.inherit=T,this.animatable=b,this.initial=p,this.applies=y,this.parse=w,this.compute=R}for(var c in n.all=[new l(r.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,i.parseColor,null),new l(r.ns_tts,"color","white",["span"],!0,!0,i.parseColor,null),new l(r.ns_tts,"direction","ltr",["p","span"],!0,!0,function(h){return h},null),new l(r.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(h){return h},null),new l(r.ns_tts,"displayAlign","before",["region"],!1,!0,function(h){return h},null),new l(r.ns_tts,"extent","auto",["tt","region"],!1,!0,function(h){if(h==="auto")return h;var g=h.split(" ");if(g.length!==2)return null;var p=i.parseLength(g[0]),y=i.parseLength(g[1]);return y&&p?{h:y,w:p}:null},function(h,g,p,y,T){var b,w;if(y==="auto")b=new i.ComputedLength(0,1);else if((b=i.toComputedLength(y.h.value,y.h.unit,null,h.dimensions.h,null,h.pxLength.h))===null)return null;if(y==="auto")w=new i.ComputedLength(1,0);else if((w=i.toComputedLength(y.w.value,y.w.unit,null,h.dimensions.w,null,h.pxLength.w))===null)return null;return{h:b,w}}),new l(r.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(h){for(var g=h.split(","),p=[],y=0;y<g.length;y++)g[y]=g[y].trim(),g[y].charAt(0)!=="'"&&g[y].charAt(0)!=='"'&&g[y]==="default"?p.push("monospaceSerif"):p.push(g[y]);return p},null),new l(r.ns_tts,"shear","0%",["p"],!0,!0,i.parseLength,function(h,g,p,y){return y.unit!=="%"?null:Math.abs(y.value)>100?100*Math.sign(y.value):y.value}),new l(r.ns_tts,"fontSize","1c",["span","p"],!0,!0,i.parseLength,function(h,g,p,y,T){return i.toComputedLength(y.value,y.unit,g!==null?g.styleAttrs[n.byName.fontSize.qname]:h.cellLength.h,g!==null?g.styleAttrs[n.byName.fontSize.qname]:h.cellLength.h,h.cellLength.h,h.pxLength.h)}),new l(r.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(h){return h},null),new l(r.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(h){return h},null),new l(r.ns_tts,"lineHeight","normal",["p"],!0,!0,function(h){return h==="normal"?h:i.parseLength(h)},function(h,g,p,y,T){var b;if(y==="normal")b=y;else if((b=i.toComputedLength(y.value,y.unit,p.styleAttrs[n.byName.fontSize.qname],p.styleAttrs[n.byName.fontSize.qname],h.cellLength.h,h.pxLength.h))===null)return null;return b}),new l(r.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new l(r.ns_tts,"origin","auto",["region"],!1,!0,function(h){if(h==="auto")return h;var g=h.split(" ");if(g.length!==2)return null;var p=i.parseLength(g[0]),y=i.parseLength(g[1]);return y&&p?{h:y,w:p}:null},function(h,g,p,y,T){var b,w;if(y==="auto")b=new i.ComputedLength(0,0);else if((b=i.toComputedLength(y.h.value,y.h.unit,null,h.dimensions.h,null,h.pxLength.h))===null)return null;if(y==="auto")w=new i.ComputedLength(0,0);else if((w=i.toComputedLength(y.w.value,y.w.unit,null,h.dimensions.w,null,h.pxLength.w))===null)return null;return{h:b,w}}),new l(r.ns_tts,"overflow","hidden",["region"],!1,!0,function(h){return h},null),new l(r.ns_tts,"padding","0px",["region"],!1,!0,function(h){var g=h.split(" ");if(g.length>4)return null;for(var p=[],y=0;y<g.length;y++){var T=i.parseLength(g[y]);if(!T)return null;p.push(T)}return p},function(h,g,p,y,T){var b;if(y.length===1)b=[y[0],y[0],y[0],y[0]];else if(y.length===2)b=[y[0],y[1],y[0],y[1]];else if(y.length===3)b=[y[0],y[1],y[2],y[1]];else{if(y.length!==4)return null;b=[y[0],y[1],y[2],y[3]]}var w=p.styleAttrs[n.byName.writingMode.qname];if(w==="lrtb"||w==="lr")b=[b[0],b[3],b[2],b[1]];else if(w==="rltb"||w==="rl")b=[b[0],b[1],b[2],b[3]];else if(w==="tblr")b=[b[3],b[0],b[1],b[2]];else{if(w!=="tbrl"&&w!=="tb")return null;b=[b[3],b[2],b[1],b[0]]}for(var R=[],M=0;M<b.length;M++)if(b[M].value===0)R[M]=new i.ComputedLength(0,0);else if(R[M]=i.toComputedLength(b[M].value,b[M].unit,p.styleAttrs[n.byName.fontSize.qname],M===0||M===2?p.styleAttrs[n.byName.extent.qname].h:p.styleAttrs[n.byName.extent.qname].w,M===0||M===2?h.cellLength.h:h.cellLength.w,M===0||M===2?h.pxLength.h:h.pxLength.w),R[M]===null)return null;return R}),new l(r.ns_tts,"position","top left",["region"],!1,!0,function(h){return i.parsePosition(h)},function(h,g,p,y){var T,b;return(T=i.toComputedLength(y.v.offset.value,y.v.offset.unit,null,new i.ComputedLength(-p.styleAttrs[n.byName.extent.qname].h.rw,h.dimensions.h.rh-p.styleAttrs[n.byName.extent.qname].h.rh),null,h.pxLength.h))===null?null:(y.v.edge==="bottom"&&(T=new i.ComputedLength(-T.rw-p.styleAttrs[n.byName.extent.qname].h.rw,h.dimensions.h.rh-T.rh-p.styleAttrs[n.byName.extent.qname].h.rh)),b=i.toComputedLength(y.h.offset.value,y.h.offset.unit,null,new i.ComputedLength(h.dimensions.w.rw-p.styleAttrs[n.byName.extent.qname].w.rw,-p.styleAttrs[n.byName.extent.qname].w.rh),null,h.pxLength.w),T===null?null:(y.h.edge==="right"&&(b=new i.ComputedLength(h.dimensions.w.rw-b.rw-p.styleAttrs[n.byName.extent.qname].w.rw,-b.rh-p.styleAttrs[n.byName.extent.qname].w.rh)),{h:T,w:b}))}),new l(r.ns_tts,"ruby","none",["span"],!1,!0,function(h){return h},null),new l(r.ns_tts,"rubyAlign","center",["span"],!0,!0,function(h){return h!=="center"&&h!=="spaceAround"?null:h},null),new l(r.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(h){return h},null),new l(r.ns_tts,"rubyReserve","none",["p"],!0,!0,function(h){var g=h.split(" "),p=[null,null];if(g.length===0||g.length>2||g[0]!=="none"&&g[0]!=="both"&&g[0]!=="after"&&g[0]!=="before"&&g[0]!=="outside")return null;if(p[0]=g[0],g.length===2&&g[0]!=="none"){var y=i.parseLength(g[1]);if(!y)return null;p[1]=y}return p},function(h,g,p,y,T){if(y[0]==="none")return y;var b;return(b=y[1]===null?new i.ComputedLength(.5*p.styleAttrs[n.byName.fontSize.qname].rw,.5*p.styleAttrs[n.byName.fontSize.qname].rh):i.toComputedLength(y[1].value,y[1].unit,p.styleAttrs[n.byName.fontSize.qname],p.styleAttrs[n.byName.fontSize.qname],h.cellLength.h,h.pxLength.h))===null?null:[y[0],b]}),new l(r.ns_tts,"showBackground","always",["region"],!1,!0,function(h){return h},null),new l(r.ns_tts,"textAlign","start",["p"],!0,!0,function(h){return h},function(h,g,p,y,T){return y==="left"?"start":y==="right"?"end":y}),new l(r.ns_tts,"textCombine","none",["span"],!0,!0,function(h){return h==="none"||h==="all"?h:null},null),new l(r.ns_tts,"textDecoration","none",["span"],!0,!0,function(h){return h.split(" ")},null),new l(r.ns_tts,"textEmphasis","none",["span"],!0,!0,function(h){for(var g=h.split(" "),p={style:null,symbol:null,color:null,position:null},y=0;y<g.length;y++)if(g[y]==="none"||g[y]==="auto")p.style=g[y];else if(g[y]==="filled"||g[y]==="open")p.style=g[y];else if(g[y]==="circle"||g[y]==="dot"||g[y]==="sesame")p.symbol=g[y];else if(g[y]==="current")p.color=g[y];else if(g[y]==="outside"||g[y]==="before"||g[y]==="after")p.position=g[y];else if(p.color=i.parseColor(g[y]),p.color===null)return null;return p.style==null&&p.symbol==null?p.style="auto":(p.symbol=p.symbol||"circle",p.style=p.style||"filled"),p.position=p.position||"outside",p.color=p.color||"current",p},null),new l(r.ns_tts,"textOutline","none",["span"],!0,!0,function(h){if(h==="none")return h;var g={},p=h.split(" ");if(p.length===0||p.length>2)return null;var y=i.parseColor(p[0]);if(g.color=y,y!==null&&p.shift(),p.length!==1)return null;var T=i.parseLength(p[0]);return T?(g.thickness=T,g):null},function(h,g,p,y,T){if(y==="none")return y;var b={};return y.color===null?b.color=p.styleAttrs[n.byName.color.qname]:b.color=y.color,b.thickness=i.toComputedLength(y.thickness.value,y.thickness.unit,p.styleAttrs[n.byName.fontSize.qname],p.styleAttrs[n.byName.fontSize.qname],h.cellLength.h,h.pxLength.h),b.thickness===null?null:b}),new l(r.ns_tts,"textShadow","none",["span"],!0,!0,i.parseTextShadow,function(h,g,p,y){if(y==="none")return y;for(var T=[],b=0;b<y.length;b++){var w={};if(w.x_off=i.toComputedLength(y[b][0].value,y[b][0].unit,null,p.styleAttrs[n.byName.fontSize.qname],null,h.pxLength.w),w.x_off===null||(w.y_off=i.toComputedLength(y[b][1].value,y[b][1].unit,null,p.styleAttrs[n.byName.fontSize.qname],null,h.pxLength.h),w.y_off===null))return null;if(y[b][2]===null)w.b_radius=0;else if(w.b_radius=i.toComputedLength(y[b][2].value,y[b][2].unit,null,p.styleAttrs[n.byName.fontSize.qname],null,h.pxLength.h),w.b_radius===null)return null;y[b][3]===null?w.color=p.styleAttrs[n.byName.color.qname]:w.color=y[b][3],T.push(w)}return T}),new l(r.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(h){return h},null),new l(r.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(h){return h},null),new l(r.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(h){return h},null),new l(r.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(h){return h},null),new l(r.ns_tts,"zIndex","auto",["region"],!1,!0,function(h){var g;return h==="auto"?g=h:(g=parseInt(h),isNaN(g)&&(g=null)),g},null),new l(r.ns_ebutts,"linePadding","0c",["p"],!0,!1,i.parseLength,function(h,g,p,y,T){return i.toComputedLength(y.value,y.unit,null,null,h.cellLength.w,null)}),new l(r.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(h){return h},null),new l(r.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(h){return h},null),new l(r.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(h){return h==="true"},null),new l(r.ns_itts,"fillLineGap","false",["p"],!0,!0,function(h){return h==="true"},null)],n.byQName={},n.all)n.byQName[n.all[c].qname]=n.all[c];for(var f in n.byName={},n.all)n.byName[n.all[f].name]=n.all[f]})(e,typeof imscNames>"u"?t(977):imscNames,typeof imscUtils>"u"?t(6404):imscUtils)},6404:function(o,e){(function(t){var n=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,r=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,i=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,l={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};t.parseColor=function(f){var h,g=null,p=l[f.toLowerCase()];return p!==void 0?g=p:(h=n.exec(f))!==null?g=[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16),h[4]!==void 0?parseInt(h[4],16):255]:(h=r.exec(f))!==null?g=[parseInt(h[1]),parseInt(h[2]),parseInt(h[3]),255]:(h=i.exec(f))!==null&&(g=[parseInt(h[1]),parseInt(h[2]),parseInt(h[3]),parseInt(h[4])]),g};var c=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;t.parseLength=function(f){var h,g=null;return(h=c.exec(f))!==null&&(g={value:parseFloat(h[1]),unit:h[2]}),g},t.parseTextShadow=function(f){for(var h=f.match(/([^\(,\)]|\([^\)]+\))+/g),g=[],p=0;p<h.length;p++){var y=h[p].split(" ");if(y.length===1&&y[0]==="none")return"none";if(y.length>1&&y.length<5){var T=[null,null,null,null],b=t.parseLength(y.shift());if(b===null||(T[0]=b,(b=t.parseLength(y.shift()))===null))return null;if(T[1]=b,y.length===0){g.push(T);continue}if((b=t.parseLength(y[0]))!==null&&(T[2]=b,y.shift()),y.length===0){g.push(T);continue}var w=t.parseColor(y[0]);if(w===null)return null;T[3]=w,g.push(T)}}return g},t.parsePosition=function(f){var h=f.split(" "),g=function(M){return M==="center"||M==="left"||M==="top"||M==="bottom"||M==="right"};if(h.length>4)return null;for(var p=0;p<h.length;p++)if(!g(h[p])){var y=t.parseLength(h[p]);if(y===null)return null;h[p]=y}for(var T={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},b=0;b<h.length;){var w=h[b++];if(g(w)){var R={value:0,unit:"%"};h.length!==2&&b<h.length&&!g(h[b])&&(R=h[b++]),w==="right"?(T.h.edge=w,T.h.offset=R):w==="bottom"?(T.v.edge=w,T.v.offset=R):w==="left"?T.h.offset=R:w==="top"&&(T.v.offset=R)}else{if(h.length!==1&&h.length!==2)return null;b===1?T.h.offset=w:T.v.offset=w}}return T},t.ComputedLength=function(f,h){this.rw=f,this.rh=h},t.ComputedLength.prototype.toUsedLength=function(f,h){return f*this.rw+h*this.rh},t.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},t.toComputedLength=function(f,h,g,p,y,T){return h==="%"&&p?new t.ComputedLength(p.rw*f/100,p.rh*f/100):h==="em"&&g?new t.ComputedLength(g.rw*f,g.rh*f):h==="c"&&y?new t.ComputedLength(f*y.rw,f*y.rh):h==="px"&&T?new t.ComputedLength(f*T.rw,f*T.rh):h==="rh"?new t.ComputedLength(0,f/100):h==="rw"?new t.ComputedLength(f/100,0):null}})(e)},7523:function(o){typeof Object.create=="function"?o.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:o.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},3282:function(o){function e(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function t(r,i){for(var l,c="",f=0,h=-1,g=0,p=0;p<=r.length;++p){if(p<r.length)l=r.charCodeAt(p);else{if(l===47)break;l=47}if(l===47){if(!(h===p-1||g===1))if(h!==p-1&&g===2){if(c.length<2||f!==2||c.charCodeAt(c.length-1)!==46||c.charCodeAt(c.length-2)!==46){if(c.length>2){var y=c.lastIndexOf("/");if(y!==c.length-1){y===-1?(c="",f=0):f=(c=c.slice(0,y)).length-1-c.lastIndexOf("/"),h=p,g=0;continue}}else if(c.length===2||c.length===1){c="",f=0,h=p,g=0;continue}}i&&(c.length>0?c+="/..":c="..",f=2)}else c.length>0?c+="/"+r.slice(h+1,p):c=r.slice(h+1,p),f=p-h-1;h=p,g=0}else l===46&&g!==-1?++g:g=-1}return c}var n={resolve:function(){for(var r,i="",l=!1,c=arguments.length-1;c>=-1&&!l;c--){var f;c>=0?f=arguments[c]:(r===void 0&&(r=process.cwd()),f=r),e(f),f.length!==0&&(i=f+"/"+i,l=f.charCodeAt(0)===47)}return i=t(i,!l),l?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(r){if(e(r),r.length===0)return".";var i=r.charCodeAt(0)===47,l=r.charCodeAt(r.length-1)===47;return(r=t(r,!i)).length!==0||i||(r="."),r.length>0&&l&&(r+="/"),i?"/"+r:r},isAbsolute:function(r){return e(r),r.length>0&&r.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var r,i=0;i<arguments.length;++i){var l=arguments[i];e(l),l.length>0&&(r===void 0?r=l:r+="/"+l)}return r===void 0?".":n.normalize(r)},relative:function(r,i){if(e(r),e(i),r===i||(r=n.resolve(r))===(i=n.resolve(i)))return"";for(var l=1;l<r.length&&r.charCodeAt(l)===47;++l);for(var c=r.length,f=c-l,h=1;h<i.length&&i.charCodeAt(h)===47;++h);for(var g=i.length-h,p=f<g?f:g,y=-1,T=0;T<=p;++T){if(T===p){if(g>p){if(i.charCodeAt(h+T)===47)return i.slice(h+T+1);if(T===0)return i.slice(h+T)}else f>p&&(r.charCodeAt(l+T)===47?y=T:T===0&&(y=0));break}var b=r.charCodeAt(l+T);if(b!==i.charCodeAt(h+T))break;b===47&&(y=T)}var w="";for(T=l+y+1;T<=c;++T)T!==c&&r.charCodeAt(T)!==47||(w.length===0?w+="..":w+="/..");return w.length>0?w+i.slice(h+y):(h+=y,i.charCodeAt(h)===47&&++h,i.slice(h))},_makeLong:function(r){return r},dirname:function(r){if(e(r),r.length===0)return".";for(var i=r.charCodeAt(0),l=i===47,c=-1,f=!0,h=r.length-1;h>=1;--h)if((i=r.charCodeAt(h))===47){if(!f){c=h;break}}else f=!1;return c===-1?l?"/":".":l&&c===1?"//":r.slice(0,c)},basename:function(r,i){if(i!==void 0&&typeof i!="string")throw new TypeError('"ext" argument must be a string');e(r);var l,c=0,f=-1,h=!0;if(i!==void 0&&i.length>0&&i.length<=r.length){if(i.length===r.length&&i===r)return"";var g=i.length-1,p=-1;for(l=r.length-1;l>=0;--l){var y=r.charCodeAt(l);if(y===47){if(!h){c=l+1;break}}else p===-1&&(h=!1,p=l+1),g>=0&&(y===i.charCodeAt(g)?--g==-1&&(f=l):(g=-1,f=p))}return c===f?f=p:f===-1&&(f=r.length),r.slice(c,f)}for(l=r.length-1;l>=0;--l)if(r.charCodeAt(l)===47){if(!h){c=l+1;break}}else f===-1&&(h=!1,f=l+1);return f===-1?"":r.slice(c,f)},extname:function(r){e(r);for(var i=-1,l=0,c=-1,f=!0,h=0,g=r.length-1;g>=0;--g){var p=r.charCodeAt(g);if(p!==47)c===-1&&(f=!1,c=g+1),p===46?i===-1?i=g:h!==1&&(h=1):i!==-1&&(h=-1);else if(!f){l=g+1;break}}return i===-1||c===-1||h===0||h===1&&i===c-1&&i===l+1?"":r.slice(i,c)},format:function(r){if(r===null||typeof r!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof r);return function(i,l){var c=l.dir||l.root,f=l.base||(l.name||"")+(l.ext||"");return c?c===l.root?c+f:c+"/"+f:f}(0,r)},parse:function(r){e(r);var i={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return i;var l,c=r.charCodeAt(0),f=c===47;f?(i.root="/",l=1):l=0;for(var h=-1,g=0,p=-1,y=!0,T=r.length-1,b=0;T>=l;--T)if((c=r.charCodeAt(T))!==47)p===-1&&(y=!1,p=T+1),c===46?h===-1?h=T:b!==1&&(b=1):h!==-1&&(b=-1);else if(!y){g=T+1;break}return h===-1||p===-1||b===0||b===1&&h===p-1&&h===g+1?p!==-1&&(i.base=i.name=g===0&&f?r.slice(1,p):r.slice(g,p)):(g===0&&f?(i.name=r.slice(1,h),i.base=r.slice(1,p)):(i.name=r.slice(g,h),i.base=r.slice(g,p)),i.ext=r.slice(h,p)),g>0?i.dir=r.slice(0,g-1):f&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};n.posix=n,o.exports=n},3515:function(o,e,t){o.exports=r;var n=t(9826).EventEmitter;function r(){n.call(this)}t(7523)(r,n),r.Readable=t(2762),r.Writable=t(3726),r.Duplex=t(884),r.Transform=t(6756),r.PassThrough=t(1390),r.finished=t(2896),r.pipeline=t(8460),r.Stream=r,r.prototype.pipe=function(i,l){var c=this;function f(w){i.writable&&i.write(w)===!1&&c.pause&&c.pause()}function h(){c.readable&&c.resume&&c.resume()}c.on("data",f),i.on("drain",h),i._isStdio||l&&l.end===!1||(c.on("end",p),c.on("close",y));var g=!1;function p(){g||(g=!0,i.end())}function y(){g||(g=!0,typeof i.destroy=="function"&&i.destroy())}function T(w){if(b(),n.listenerCount(this,"error")===0)throw w}function b(){c.removeListener("data",f),i.removeListener("drain",h),c.removeListener("end",p),c.removeListener("close",y),c.removeListener("error",T),i.removeListener("error",T),c.removeListener("end",b),c.removeListener("close",b),i.removeListener("close",b)}return c.on("error",T),i.on("error",T),c.on("end",b),c.on("close",b),i.on("close",b),i.emit("pipe",c),i}},1602:function(o){var e={};function t(r,i,l){l||(l=Error);var c=function(f){var h,g;function p(y,T,b){return f.call(this,function(w,R,M){return typeof i=="string"?i:i(w,R,M)}(y,T,b))||this}return g=f,(h=p).prototype=Object.create(g.prototype),h.prototype.constructor=h,h.__proto__=g,p}(l);c.prototype.name=l.name,c.prototype.code=r,e[r]=c}function n(r,i){if(Array.isArray(r)){var l=r.length;return r=r.map(function(c){return String(c)}),l>2?"one of ".concat(i," ").concat(r.slice(0,l-1).join(", "),", or ")+r[l-1]:l===2?"one of ".concat(i," ").concat(r[0]," or ").concat(r[1]):"of ".concat(i," ").concat(r[0])}return"of ".concat(i," ").concat(String(r))}t("ERR_INVALID_OPT_VALUE",function(r,i){return'The value "'+i+'" is invalid for option "'+r+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(r,i,l){var c,f,h,g,p;if(typeof i=="string"&&(f="not ",i.substr(0,4)===f)?(c="must not be",i=i.replace(/^not /,"")):c="must be",function(T,b,w){return(w===void 0||w>T.length)&&(w=T.length),T.substring(w-9,w)===b}(r," argument"))h="The ".concat(r," ").concat(c," ").concat(n(i,"type"));else{var y=(typeof p!="number"&&(p=0),p+1>(g=r).length||g.indexOf(".",p)===-1?"argument":"property");h='The "'.concat(r,'" ').concat(y," ").concat(c," ").concat(n(i,"type"))}return h+". Received type ".concat(typeof l)},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),o.exports.codes=e},884:function(o,e,t){var n=Object.keys||function(y){var T=[];for(var b in y)T.push(b);return T};o.exports=h;var r=t(2762),i=t(3726);t(7523)(h,r);for(var l=n(i.prototype),c=0;c<l.length;c++){var f=l[c];h.prototype[f]||(h.prototype[f]=i.prototype[f])}function h(y){if(!(this instanceof h))return new h(y);r.call(this,y),i.call(this,y),this.allowHalfOpen=!0,y&&(y.readable===!1&&(this.readable=!1),y.writable===!1&&(this.writable=!1),y.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",g)))}function g(){this._writableState.ended||process.nextTick(p,this)}function p(y){y.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(y){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=y,this._writableState.destroyed=y)}})},1390:function(o,e,t){o.exports=r;var n=t(6756);function r(i){if(!(this instanceof r))return new r(i);n.call(this,i)}t(7523)(r,n),r.prototype._transform=function(i,l,c){c(null,i)}},2762:function(o,e,t){var n;o.exports=j,j.ReadableState=k,t(9826).EventEmitter;var r,i=function(Pe,Fe){return Pe.listeners(Fe).length},l=t(2611),c=t(44).Buffer,f=(t.g!==void 0?t.g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},h=t(7199);r=h&&h.debuglog?h.debuglog("stream"):function(){};var g,p,y,T=t(3791),b=t(2410),w=t(1749).getHighWaterMark,R=t(1602).codes,M=R.ERR_INVALID_ARG_TYPE,Y=R.ERR_STREAM_PUSH_AFTER_EOF,Z=R.ERR_METHOD_NOT_IMPLEMENTED,ye=R.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t(7523)(j,l);var Re=b.errorOrDestroy,F=["error","close","destroy","pause","resume"];function k(Pe,Fe,ut){n=n||t(884),Pe=Pe||{},typeof ut!="boolean"&&(ut=Fe instanceof n),this.objectMode=!!Pe.objectMode,ut&&(this.objectMode=this.objectMode||!!Pe.readableObjectMode),this.highWaterMark=w(this,Pe,"readableHighWaterMark",ut),this.buffer=new T,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Pe.emitClose!==!1,this.autoDestroy=!!Pe.autoDestroy,this.destroyed=!1,this.defaultEncoding=Pe.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Pe.encoding&&(g||(g=t(748).StringDecoder),this.decoder=new g(Pe.encoding),this.encoding=Pe.encoding)}function j(Pe){if(n=n||t(884),!(this instanceof j))return new j(Pe);var Fe=this instanceof n;this._readableState=new k(Pe,this,Fe),this.readable=!0,Pe&&(typeof Pe.read=="function"&&(this._read=Pe.read),typeof Pe.destroy=="function"&&(this._destroy=Pe.destroy)),l.call(this)}function oe(Pe,Fe,ut,W,Q){r("readableAddChunk",Fe);var P,H=Pe._readableState;if(Fe===null)H.reading=!1,function(be,ue){if(r("onEofChunk"),!ue.ended){if(ue.decoder){var Ue=ue.decoder.end();Ue&&Ue.length&&(ue.buffer.push(Ue),ue.length+=ue.objectMode?1:Ue.length)}ue.ended=!0,ue.sync?pe(be):(ue.needReadable=!1,ue.emittedReadable||(ue.emittedReadable=!0,ct(be)))}}(Pe,H);else if(Q||(P=function(be,ue){var Ue,et;return et=ue,c.isBuffer(et)||et instanceof f||typeof ue=="string"||ue===void 0||be.objectMode||(Ue=new M("chunk",["string","Buffer","Uint8Array"],ue)),Ue}(H,Fe)),P)Re(Pe,P);else if(H.objectMode||Fe&&Fe.length>0)if(typeof Fe=="string"||H.objectMode||Object.getPrototypeOf(Fe)===c.prototype||(Fe=function(be){return c.from(be)}(Fe)),W)H.endEmitted?Re(Pe,new ye):L(Pe,H,Fe,!0);else if(H.ended)Re(Pe,new Y);else{if(H.destroyed)return!1;H.reading=!1,H.decoder&&!ut?(Fe=H.decoder.write(Fe),H.objectMode||Fe.length!==0?L(Pe,H,Fe,!1):Ye(Pe,H)):L(Pe,H,Fe,!1)}else W||(H.reading=!1,Ye(Pe,H));return!H.ended&&(H.length<H.highWaterMark||H.length===0)}function L(Pe,Fe,ut,W){Fe.flowing&&Fe.length===0&&!Fe.sync?(Fe.awaitDrain=0,Pe.emit("data",ut)):(Fe.length+=Fe.objectMode?1:ut.length,W?Fe.buffer.unshift(ut):Fe.buffer.push(ut),Fe.needReadable&&pe(Pe)),Ye(Pe,Fe)}Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Pe){this._readableState&&(this._readableState.destroyed=Pe)}}),j.prototype.destroy=b.destroy,j.prototype._undestroy=b.undestroy,j.prototype._destroy=function(Pe,Fe){Fe(Pe)},j.prototype.push=function(Pe,Fe){var ut,W=this._readableState;return W.objectMode?ut=!0:typeof Pe=="string"&&((Fe=Fe||W.defaultEncoding)!==W.encoding&&(Pe=c.from(Pe,Fe),Fe=""),ut=!0),oe(this,Pe,Fe,!1,ut)},j.prototype.unshift=function(Pe){return oe(this,Pe,null,!0,!1)},j.prototype.isPaused=function(){return this._readableState.flowing===!1},j.prototype.setEncoding=function(Pe){g||(g=t(748).StringDecoder);var Fe=new g(Pe);this._readableState.decoder=Fe,this._readableState.encoding=this._readableState.decoder.encoding;for(var ut=this._readableState.buffer.head,W="";ut!==null;)W+=Fe.write(ut.data),ut=ut.next;return this._readableState.buffer.clear(),W!==""&&this._readableState.buffer.push(W),this._readableState.length=W.length,this};var Ee=1073741824;function Be(Pe,Fe){return Pe<=0||Fe.length===0&&Fe.ended?0:Fe.objectMode?1:Pe!=Pe?Fe.flowing&&Fe.length?Fe.buffer.head.data.length:Fe.length:(Pe>Fe.highWaterMark&&(Fe.highWaterMark=function(ut){return ut>=Ee?ut=Ee:(ut--,ut|=ut>>>1,ut|=ut>>>2,ut|=ut>>>4,ut|=ut>>>8,ut|=ut>>>16,ut++),ut}(Pe)),Pe<=Fe.length?Pe:Fe.ended?Fe.length:(Fe.needReadable=!0,0))}function pe(Pe){var Fe=Pe._readableState;r("emitReadable",Fe.needReadable,Fe.emittedReadable),Fe.needReadable=!1,Fe.emittedReadable||(r("emitReadable",Fe.flowing),Fe.emittedReadable=!0,process.nextTick(ct,Pe))}function ct(Pe){var Fe=Pe._readableState;r("emitReadable_",Fe.destroyed,Fe.length,Fe.ended),Fe.destroyed||!Fe.length&&!Fe.ended||(Pe.emit("readable"),Fe.emittedReadable=!1),Fe.needReadable=!Fe.flowing&&!Fe.ended&&Fe.length<=Fe.highWaterMark,Ze(Pe)}function Ye(Pe,Fe){Fe.readingMore||(Fe.readingMore=!0,process.nextTick(Le,Pe,Fe))}function Le(Pe,Fe){for(;!Fe.reading&&!Fe.ended&&(Fe.length<Fe.highWaterMark||Fe.flowing&&Fe.length===0);){var ut=Fe.length;if(r("maybeReadMore read 0"),Pe.read(0),ut===Fe.length)break}Fe.readingMore=!1}function Je(Pe){var Fe=Pe._readableState;Fe.readableListening=Pe.listenerCount("readable")>0,Fe.resumeScheduled&&!Fe.paused?Fe.flowing=!0:Pe.listenerCount("data")>0&&Pe.resume()}function Ge(Pe){r("readable nexttick read 0"),Pe.read(0)}function tt(Pe,Fe){r("resume",Fe.reading),Fe.reading||Pe.read(0),Fe.resumeScheduled=!1,Pe.emit("resume"),Ze(Pe),Fe.flowing&&!Fe.reading&&Pe.read(0)}function Ze(Pe){var Fe=Pe._readableState;for(r("flow",Fe.flowing);Fe.flowing&&Pe.read()!==null;);}function Me(Pe,Fe){return Fe.length===0?null:(Fe.objectMode?ut=Fe.buffer.shift():!Pe||Pe>=Fe.length?(ut=Fe.decoder?Fe.buffer.join(""):Fe.buffer.length===1?Fe.buffer.first():Fe.buffer.concat(Fe.length),Fe.buffer.clear()):ut=Fe.buffer.consume(Pe,Fe.decoder),ut);var ut}function $e(Pe){var Fe=Pe._readableState;r("endReadable",Fe.endEmitted),Fe.endEmitted||(Fe.ended=!0,process.nextTick(mt,Fe,Pe))}function mt(Pe,Fe){if(r("endReadableNT",Pe.endEmitted,Pe.length),!Pe.endEmitted&&Pe.length===0&&(Pe.endEmitted=!0,Fe.readable=!1,Fe.emit("end"),Pe.autoDestroy)){var ut=Fe._writableState;(!ut||ut.autoDestroy&&ut.finished)&&Fe.destroy()}}function Dt(Pe,Fe){for(var ut=0,W=Pe.length;ut<W;ut++)if(Pe[ut]===Fe)return ut;return-1}j.prototype.read=function(Pe){r("read",Pe),Pe=parseInt(Pe,10);var Fe=this._readableState,ut=Pe;if(Pe!==0&&(Fe.emittedReadable=!1),Pe===0&&Fe.needReadable&&((Fe.highWaterMark!==0?Fe.length>=Fe.highWaterMark:Fe.length>0)||Fe.ended))return r("read: emitReadable",Fe.length,Fe.ended),Fe.length===0&&Fe.ended?$e(this):pe(this),null;if((Pe=Be(Pe,Fe))===0&&Fe.ended)return Fe.length===0&&$e(this),null;var W,Q=Fe.needReadable;return r("need readable",Q),(Fe.length===0||Fe.length-Pe<Fe.highWaterMark)&&r("length less than watermark",Q=!0),Fe.ended||Fe.reading?r("reading or ended",Q=!1):Q&&(r("do read"),Fe.reading=!0,Fe.sync=!0,Fe.length===0&&(Fe.needReadable=!0),this._read(Fe.highWaterMark),Fe.sync=!1,Fe.reading||(Pe=Be(ut,Fe))),(W=Pe>0?Me(Pe,Fe):null)===null?(Fe.needReadable=Fe.length<=Fe.highWaterMark,Pe=0):(Fe.length-=Pe,Fe.awaitDrain=0),Fe.length===0&&(Fe.ended||(Fe.needReadable=!0),ut!==Pe&&Fe.ended&&$e(this)),W!==null&&this.emit("data",W),W},j.prototype._read=function(Pe){Re(this,new Z("_read()"))},j.prototype.pipe=function(Pe,Fe){var ut=this,W=this._readableState;switch(W.pipesCount){case 0:W.pipes=Pe;break;case 1:W.pipes=[W.pipes,Pe];break;default:W.pipes.push(Pe)}W.pipesCount+=1,r("pipe count=%d opts=%j",W.pipesCount,Fe);var Q=Fe&&Fe.end===!1||Pe===process.stdout||Pe===process.stderr?Xe:P;function P(){r("onend"),Pe.end()}W.endEmitted?process.nextTick(Q):ut.once("end",Q),Pe.on("unpipe",function He(it,bt){r("onunpipe"),it===ut&&bt&&bt.hasUnpiped===!1&&(bt.hasUnpiped=!0,r("cleanup"),Pe.removeListener("close",et),Pe.removeListener("finish",qe),Pe.removeListener("drain",H),Pe.removeListener("error",Ue),Pe.removeListener("unpipe",He),ut.removeListener("end",P),ut.removeListener("end",Xe),ut.removeListener("data",ue),be=!0,!W.awaitDrain||Pe._writableState&&!Pe._writableState.needDrain||H())});var H=function(He){return function(){var it=He._readableState;r("pipeOnDrain",it.awaitDrain),it.awaitDrain&&it.awaitDrain--,it.awaitDrain===0&&i(He,"data")&&(it.flowing=!0,Ze(He))}}(ut);Pe.on("drain",H);var be=!1;function ue(He){r("ondata");var it=Pe.write(He);r("dest.write",it),it===!1&&((W.pipesCount===1&&W.pipes===Pe||W.pipesCount>1&&Dt(W.pipes,Pe)!==-1)&&!be&&(r("false write response, pause",W.awaitDrain),W.awaitDrain++),ut.pause())}function Ue(He){r("onerror",He),Xe(),Pe.removeListener("error",Ue),i(Pe,"error")===0&&Re(Pe,He)}function et(){Pe.removeListener("finish",qe),Xe()}function qe(){r("onfinish"),Pe.removeListener("close",et),Xe()}function Xe(){r("unpipe"),ut.unpipe(Pe)}return ut.on("data",ue),function(He,it,bt){if(typeof He.prependListener=="function")return He.prependListener(it,bt);He._events&&He._events[it]?Array.isArray(He._events[it])?He._events[it].unshift(bt):He._events[it]=[bt,He._events[it]]:He.on(it,bt)}(Pe,"error",Ue),Pe.once("close",et),Pe.once("finish",qe),Pe.emit("pipe",ut),W.flowing||(r("pipe resume"),ut.resume()),Pe},j.prototype.unpipe=function(Pe){var Fe=this._readableState,ut={hasUnpiped:!1};if(Fe.pipesCount===0)return this;if(Fe.pipesCount===1)return Pe&&Pe!==Fe.pipes||(Pe||(Pe=Fe.pipes),Fe.pipes=null,Fe.pipesCount=0,Fe.flowing=!1,Pe&&Pe.emit("unpipe",this,ut)),this;if(!Pe){var W=Fe.pipes,Q=Fe.pipesCount;Fe.pipes=null,Fe.pipesCount=0,Fe.flowing=!1;for(var P=0;P<Q;P++)W[P].emit("unpipe",this,{hasUnpiped:!1});return this}var H=Dt(Fe.pipes,Pe);return H===-1||(Fe.pipes.splice(H,1),Fe.pipesCount-=1,Fe.pipesCount===1&&(Fe.pipes=Fe.pipes[0]),Pe.emit("unpipe",this,ut)),this},j.prototype.on=function(Pe,Fe){var ut=l.prototype.on.call(this,Pe,Fe),W=this._readableState;return Pe==="data"?(W.readableListening=this.listenerCount("readable")>0,W.flowing!==!1&&this.resume()):Pe==="readable"&&(W.endEmitted||W.readableListening||(W.readableListening=W.needReadable=!0,W.flowing=!1,W.emittedReadable=!1,r("on readable",W.length,W.reading),W.length?pe(this):W.reading||process.nextTick(Ge,this))),ut},j.prototype.addListener=j.prototype.on,j.prototype.removeListener=function(Pe,Fe){var ut=l.prototype.removeListener.call(this,Pe,Fe);return Pe==="readable"&&process.nextTick(Je,this),ut},j.prototype.removeAllListeners=function(Pe){var Fe=l.prototype.removeAllListeners.apply(this,arguments);return Pe!=="readable"&&Pe!==void 0||process.nextTick(Je,this),Fe},j.prototype.resume=function(){var Pe=this._readableState;return Pe.flowing||(r("resume"),Pe.flowing=!Pe.readableListening,function(Fe,ut){ut.resumeScheduled||(ut.resumeScheduled=!0,process.nextTick(tt,Fe,ut))}(this,Pe)),Pe.paused=!1,this},j.prototype.pause=function(){return r("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(r("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},j.prototype.wrap=function(Pe){var Fe=this,ut=this._readableState,W=!1;for(var Q in Pe.on("end",function(){if(r("wrapped end"),ut.decoder&&!ut.ended){var H=ut.decoder.end();H&&H.length&&Fe.push(H)}Fe.push(null)}),Pe.on("data",function(H){r("wrapped data"),ut.decoder&&(H=ut.decoder.write(H)),ut.objectMode&&H==null||(ut.objectMode||H&&H.length)&&(Fe.push(H)||(W=!0,Pe.pause()))}),Pe)this[Q]===void 0&&typeof Pe[Q]=="function"&&(this[Q]=function(H){return function(){return Pe[H].apply(Pe,arguments)}}(Q));for(var P=0;P<F.length;P++)Pe.on(F[P],this.emit.bind(this,F[P]));return this._read=function(H){r("wrapped _read",H),W&&(W=!1,Pe.resume())},this},typeof Symbol=="function"&&(j.prototype[Symbol.asyncIterator]=function(){return p===void 0&&(p=t(5857)),p(this)}),Object.defineProperty(j.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(j.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(j.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Pe){this._readableState&&(this._readableState.flowing=Pe)}}),j._fromList=Me,Object.defineProperty(j.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(j.from=function(Pe,Fe){return y===void 0&&(y=t(3411)),y(j,Pe,Fe)})},6756:function(o,e,t){o.exports=g;var n=t(1602).codes,r=n.ERR_METHOD_NOT_IMPLEMENTED,i=n.ERR_MULTIPLE_CALLBACK,l=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,c=n.ERR_TRANSFORM_WITH_LENGTH_0,f=t(884);function h(T,b){var w=this._transformState;w.transforming=!1;var R=w.writecb;if(R===null)return this.emit("error",new i);w.writechunk=null,w.writecb=null,b!=null&&this.push(b),R(T);var M=this._readableState;M.reading=!1,(M.needReadable||M.length<M.highWaterMark)&&this._read(M.highWaterMark)}function g(T){if(!(this instanceof g))return new g(T);f.call(this,T),this._transformState={afterTransform:h.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,T&&(typeof T.transform=="function"&&(this._transform=T.transform),typeof T.flush=="function"&&(this._flush=T.flush)),this.on("prefinish",p)}function p(){var T=this;typeof this._flush!="function"||this._readableState.destroyed?y(this,null,null):this._flush(function(b,w){y(T,b,w)})}function y(T,b,w){if(b)return T.emit("error",b);if(w!=null&&T.push(w),T._writableState.length)throw new c;if(T._transformState.transforming)throw new l;return T.push(null)}t(7523)(g,f),g.prototype.push=function(T,b){return this._transformState.needTransform=!1,f.prototype.push.call(this,T,b)},g.prototype._transform=function(T,b,w){w(new r("_transform()"))},g.prototype._write=function(T,b,w){var R=this._transformState;if(R.writecb=w,R.writechunk=T,R.writeencoding=b,!R.transforming){var M=this._readableState;(R.needTransform||M.needReadable||M.length<M.highWaterMark)&&this._read(M.highWaterMark)}},g.prototype._read=function(T){var b=this._transformState;b.writechunk===null||b.transforming?b.needTransform=!0:(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform))},g.prototype._destroy=function(T,b){f.prototype._destroy.call(this,T,function(w){b(w)})}},3726:function(o,e,t){function n(Ye){var Le=this;this.next=null,this.entry=null,this.finish=function(){(function(Je,Ge){var tt=Je.entry;for(Je.entry=null;tt;){var Ze=tt.callback;Ge.pendingcb--,Ze(void 0),tt=tt.next}Ge.corkedRequestsFree.next=Je})(Le,Ye)}}var r;o.exports=j,j.WritableState=k;var i,l={deprecate:t(9e3)},c=t(2611),f=t(44).Buffer,h=(t.g!==void 0?t.g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},g=t(2410),p=t(1749).getHighWaterMark,y=t(1602).codes,T=y.ERR_INVALID_ARG_TYPE,b=y.ERR_METHOD_NOT_IMPLEMENTED,w=y.ERR_MULTIPLE_CALLBACK,R=y.ERR_STREAM_CANNOT_PIPE,M=y.ERR_STREAM_DESTROYED,Y=y.ERR_STREAM_NULL_VALUES,Z=y.ERR_STREAM_WRITE_AFTER_END,ye=y.ERR_UNKNOWN_ENCODING,Re=g.errorOrDestroy;function F(){}function k(Ye,Le,Je){r=r||t(884),Ye=Ye||{},typeof Je!="boolean"&&(Je=Le instanceof r),this.objectMode=!!Ye.objectMode,Je&&(this.objectMode=this.objectMode||!!Ye.writableObjectMode),this.highWaterMark=p(this,Ye,"writableHighWaterMark",Je),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Ge=Ye.decodeStrings===!1;this.decodeStrings=!Ge,this.defaultEncoding=Ye.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(tt){(function(Ze,Me){var $e=Ze._writableState,mt=$e.sync,Dt=$e.writecb;if(typeof Dt!="function")throw new w;if(function(Fe){Fe.writing=!1,Fe.writecb=null,Fe.length-=Fe.writelen,Fe.writelen=0}($e),Me)(function(Fe,ut,W,Q,P){--ut.pendingcb,W?(process.nextTick(P,Q),process.nextTick(ct,Fe,ut),Fe._writableState.errorEmitted=!0,Re(Fe,Q)):(P(Q),Fe._writableState.errorEmitted=!0,Re(Fe,Q),ct(Fe,ut))})(Ze,$e,mt,Me,Dt);else{var Pe=Be($e)||Ze.destroyed;Pe||$e.corked||$e.bufferProcessing||!$e.bufferedRequest||Ee(Ze,$e),mt?process.nextTick(L,Ze,$e,Pe,Dt):L(Ze,$e,Pe,Dt)}})(Le,tt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Ye.emitClose!==!1,this.autoDestroy=!!Ye.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function j(Ye){var Le=this instanceof(r=r||t(884));if(!Le&&!i.call(j,this))return new j(Ye);this._writableState=new k(Ye,this,Le),this.writable=!0,Ye&&(typeof Ye.write=="function"&&(this._write=Ye.write),typeof Ye.writev=="function"&&(this._writev=Ye.writev),typeof Ye.destroy=="function"&&(this._destroy=Ye.destroy),typeof Ye.final=="function"&&(this._final=Ye.final)),c.call(this)}function oe(Ye,Le,Je,Ge,tt,Ze,Me){Le.writelen=Ge,Le.writecb=Me,Le.writing=!0,Le.sync=!0,Le.destroyed?Le.onwrite(new M("write")):Je?Ye._writev(tt,Le.onwrite):Ye._write(tt,Ze,Le.onwrite),Le.sync=!1}function L(Ye,Le,Je,Ge){Je||function(tt,Ze){Ze.length===0&&Ze.needDrain&&(Ze.needDrain=!1,tt.emit("drain"))}(Ye,Le),Le.pendingcb--,Ge(),ct(Ye,Le)}function Ee(Ye,Le){Le.bufferProcessing=!0;var Je=Le.bufferedRequest;if(Ye._writev&&Je&&Je.next){var Ge=Le.bufferedRequestCount,tt=new Array(Ge),Ze=Le.corkedRequestsFree;Ze.entry=Je;for(var Me=0,$e=!0;Je;)tt[Me]=Je,Je.isBuf||($e=!1),Je=Je.next,Me+=1;tt.allBuffers=$e,oe(Ye,Le,!0,Le.length,tt,"",Ze.finish),Le.pendingcb++,Le.lastBufferedRequest=null,Ze.next?(Le.corkedRequestsFree=Ze.next,Ze.next=null):Le.corkedRequestsFree=new n(Le),Le.bufferedRequestCount=0}else{for(;Je;){var mt=Je.chunk,Dt=Je.encoding,Pe=Je.callback;if(oe(Ye,Le,!1,Le.objectMode?1:mt.length,mt,Dt,Pe),Je=Je.next,Le.bufferedRequestCount--,Le.writing)break}Je===null&&(Le.lastBufferedRequest=null)}Le.bufferedRequest=Je,Le.bufferProcessing=!1}function Be(Ye){return Ye.ending&&Ye.length===0&&Ye.bufferedRequest===null&&!Ye.finished&&!Ye.writing}function pe(Ye,Le){Ye._final(function(Je){Le.pendingcb--,Je&&Re(Ye,Je),Le.prefinished=!0,Ye.emit("prefinish"),ct(Ye,Le)})}function ct(Ye,Le){var Je=Be(Le);if(Je&&(function(tt,Ze){Ze.prefinished||Ze.finalCalled||(typeof tt._final!="function"||Ze.destroyed?(Ze.prefinished=!0,tt.emit("prefinish")):(Ze.pendingcb++,Ze.finalCalled=!0,process.nextTick(pe,tt,Ze)))}(Ye,Le),Le.pendingcb===0&&(Le.finished=!0,Ye.emit("finish"),Le.autoDestroy))){var Ge=Ye._readableState;(!Ge||Ge.autoDestroy&&Ge.endEmitted)&&Ye.destroy()}return Je}t(7523)(j,c),k.prototype.getBuffer=function(){for(var Ye=this.bufferedRequest,Le=[];Ye;)Le.push(Ye),Ye=Ye.next;return Le},function(){try{Object.defineProperty(k.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(i=Function.prototype[Symbol.hasInstance],Object.defineProperty(j,Symbol.hasInstance,{value:function(Ye){return!!i.call(this,Ye)||this===j&&Ye&&Ye._writableState instanceof k}})):i=function(Ye){return Ye instanceof this},j.prototype.pipe=function(){Re(this,new R)},j.prototype.write=function(Ye,Le,Je){var Ge,tt=this._writableState,Ze=!1,Me=!tt.objectMode&&(Ge=Ye,f.isBuffer(Ge)||Ge instanceof h);return Me&&!f.isBuffer(Ye)&&(Ye=function($e){return f.from($e)}(Ye)),typeof Le=="function"&&(Je=Le,Le=null),Me?Le="buffer":Le||(Le=tt.defaultEncoding),typeof Je!="function"&&(Je=F),tt.ending?function($e,mt){var Dt=new Z;Re($e,Dt),process.nextTick(mt,Dt)}(this,Je):(Me||function($e,mt,Dt,Pe){var Fe;return Dt===null?Fe=new Y:typeof Dt=="string"||mt.objectMode||(Fe=new T("chunk",["string","Buffer"],Dt)),!Fe||(Re($e,Fe),process.nextTick(Pe,Fe),!1)}(this,tt,Ye,Je))&&(tt.pendingcb++,Ze=function($e,mt,Dt,Pe,Fe,ut){if(!Dt){var W=function(be,ue,Ue){return be.objectMode||be.decodeStrings===!1||typeof ue!="string"||(ue=f.from(ue,Ue)),ue}(mt,Pe,Fe);Pe!==W&&(Dt=!0,Fe="buffer",Pe=W)}var Q=mt.objectMode?1:Pe.length;mt.length+=Q;var P=mt.length<mt.highWaterMark;if(P||(mt.needDrain=!0),mt.writing||mt.corked){var H=mt.lastBufferedRequest;mt.lastBufferedRequest={chunk:Pe,encoding:Fe,isBuf:Dt,callback:ut,next:null},H?H.next=mt.lastBufferedRequest:mt.bufferedRequest=mt.lastBufferedRequest,mt.bufferedRequestCount+=1}else oe($e,mt,!1,Q,Pe,Fe,ut);return P}(this,tt,Me,Ye,Le,Je)),Ze},j.prototype.cork=function(){this._writableState.corked++},j.prototype.uncork=function(){var Ye=this._writableState;Ye.corked&&(Ye.corked--,Ye.writing||Ye.corked||Ye.bufferProcessing||!Ye.bufferedRequest||Ee(this,Ye))},j.prototype.setDefaultEncoding=function(Ye){if(typeof Ye=="string"&&(Ye=Ye.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ye+"").toLowerCase())>-1))throw new ye(Ye);return this._writableState.defaultEncoding=Ye,this},Object.defineProperty(j.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(j.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),j.prototype._write=function(Ye,Le,Je){Je(new b("_write()"))},j.prototype._writev=null,j.prototype.end=function(Ye,Le,Je){var Ge=this._writableState;return typeof Ye=="function"?(Je=Ye,Ye=null,Le=null):typeof Le=="function"&&(Je=Le,Le=null),Ye!=null&&this.write(Ye,Le),Ge.corked&&(Ge.corked=1,this.uncork()),Ge.ending||function(tt,Ze,Me){Ze.ending=!0,ct(tt,Ze),Me&&(Ze.finished?process.nextTick(Me):tt.once("finish",Me)),Ze.ended=!0,tt.writable=!1}(this,Ge,Je),this},Object.defineProperty(j.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Ye){this._writableState&&(this._writableState.destroyed=Ye)}}),j.prototype.destroy=g.destroy,j.prototype._undestroy=g.undestroy,j.prototype._destroy=function(Ye,Le){Le(Ye)}},5857:function(o,e,t){var n;function r(Y,Z,ye){return(Z=function(Re){var F=function(k){if(typeof k!="object"||k===null)return k;var j=k[Symbol.toPrimitive];if(j!==void 0){var oe=j.call(k,"string");if(typeof oe!="object")return oe;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(k)}(Re);return typeof F=="symbol"?F:String(F)}(Z))in Y?Object.defineProperty(Y,Z,{value:ye,enumerable:!0,configurable:!0,writable:!0}):Y[Z]=ye,Y}var i=t(2896),l=Symbol("lastResolve"),c=Symbol("lastReject"),f=Symbol("error"),h=Symbol("ended"),g=Symbol("lastPromise"),p=Symbol("handlePromise"),y=Symbol("stream");function T(Y,Z){return{value:Y,done:Z}}function b(Y){var Z=Y[l];if(Z!==null){var ye=Y[y].read();ye!==null&&(Y[g]=null,Y[l]=null,Y[c]=null,Z(T(ye,!1)))}}function w(Y){process.nextTick(b,Y)}var R=Object.getPrototypeOf(function(){}),M=Object.setPrototypeOf((r(n={get stream(){return this[y]},next:function(){var Y=this,Z=this[f];if(Z!==null)return Promise.reject(Z);if(this[h])return Promise.resolve(T(void 0,!0));if(this[y].destroyed)return new Promise(function(k,j){process.nextTick(function(){Y[f]?j(Y[f]):k(T(void 0,!0))})});var ye,Re=this[g];if(Re)ye=new Promise(function(k,j){return function(oe,L){k.then(function(){j[h]?oe(T(void 0,!0)):j[p](oe,L)},L)}}(Re,this));else{var F=this[y].read();if(F!==null)return Promise.resolve(T(F,!1));ye=new Promise(this[p])}return this[g]=ye,ye}},Symbol.asyncIterator,function(){return this}),r(n,"return",function(){var Y=this;return new Promise(function(Z,ye){Y[y].destroy(null,function(Re){Re?ye(Re):Z(T(void 0,!0))})})}),n),R);o.exports=function(Y){var Z,ye=Object.create(M,(r(Z={},y,{value:Y,writable:!0}),r(Z,l,{value:null,writable:!0}),r(Z,c,{value:null,writable:!0}),r(Z,f,{value:null,writable:!0}),r(Z,h,{value:Y._readableState.endEmitted,writable:!0}),r(Z,p,{value:function(Re,F){var k=ye[y].read();k?(ye[g]=null,ye[l]=null,ye[c]=null,Re(T(k,!1))):(ye[l]=Re,ye[c]=F)},writable:!0}),Z));return ye[g]=null,i(Y,function(Re){if(Re&&Re.code!=="ERR_STREAM_PREMATURE_CLOSE"){var F=ye[c];return F!==null&&(ye[g]=null,ye[l]=null,ye[c]=null,F(Re)),void(ye[f]=Re)}var k=ye[l];k!==null&&(ye[g]=null,ye[l]=null,ye[c]=null,k(T(void 0,!0))),ye[h]=!0}),Y.on("readable",w.bind(null,ye)),ye}},3791:function(o,e,t){function n(p,y){var T=Object.keys(p);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(p);y&&(b=b.filter(function(w){return Object.getOwnPropertyDescriptor(p,w).enumerable})),T.push.apply(T,b)}return T}function r(p){for(var y=1;y<arguments.length;y++){var T=arguments[y]!=null?arguments[y]:{};y%2?n(Object(T),!0).forEach(function(b){i(p,b,T[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(T)):n(Object(T)).forEach(function(b){Object.defineProperty(p,b,Object.getOwnPropertyDescriptor(T,b))})}return p}function i(p,y,T){return(y=c(y))in p?Object.defineProperty(p,y,{value:T,enumerable:!0,configurable:!0,writable:!0}):p[y]=T,p}function l(p,y){for(var T=0;T<y.length;T++){var b=y[T];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,c(b.key),b)}}function c(p){var y=function(T){if(typeof T!="object"||T===null)return T;var b=T[Symbol.toPrimitive];if(b!==void 0){var w=b.call(T,"string");if(typeof w!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(T)}(p);return typeof y=="symbol"?y:String(y)}var f=t(44).Buffer,h=t(3779).inspect,g=h&&h.custom||"inspect";o.exports=function(){function p(){(function(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")})(this,p),this.head=null,this.tail=null,this.length=0}var y,T;return y=p,(T=[{key:"push",value:function(b){var w={data:b,next:null};this.length>0?this.tail.next=w:this.head=w,this.tail=w,++this.length}},{key:"unshift",value:function(b){var w={data:b,next:this.head};this.length===0&&(this.tail=w),this.head=w,++this.length}},{key:"shift",value:function(){if(this.length!==0){var b=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,b}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(b){if(this.length===0)return"";for(var w=this.head,R=""+w.data;w=w.next;)R+=b+w.data;return R}},{key:"concat",value:function(b){if(this.length===0)return f.alloc(0);for(var w,R,M,Y=f.allocUnsafe(b>>>0),Z=this.head,ye=0;Z;)w=Z.data,R=Y,M=ye,f.prototype.copy.call(w,R,M),ye+=Z.data.length,Z=Z.next;return Y}},{key:"consume",value:function(b,w){var R;return b<this.head.data.length?(R=this.head.data.slice(0,b),this.head.data=this.head.data.slice(b)):R=b===this.head.data.length?this.shift():w?this._getString(b):this._getBuffer(b),R}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(b){var w=this.head,R=1,M=w.data;for(b-=M.length;w=w.next;){var Y=w.data,Z=b>Y.length?Y.length:b;if(Z===Y.length?M+=Y:M+=Y.slice(0,b),(b-=Z)==0){Z===Y.length?(++R,w.next?this.head=w.next:this.head=this.tail=null):(this.head=w,w.data=Y.slice(Z));break}++R}return this.length-=R,M}},{key:"_getBuffer",value:function(b){var w=f.allocUnsafe(b),R=this.head,M=1;for(R.data.copy(w),b-=R.data.length;R=R.next;){var Y=R.data,Z=b>Y.length?Y.length:b;if(Y.copy(w,w.length-b,0,Z),(b-=Z)==0){Z===Y.length?(++M,R.next?this.head=R.next:this.head=this.tail=null):(this.head=R,R.data=Y.slice(Z));break}++M}return this.length-=M,w}},{key:g,value:function(b,w){return h(this,r(r({},w),{},{depth:0,customInspect:!1}))}}])&&l(y.prototype,T),Object.defineProperty(y,"prototype",{writable:!1}),p}()},2410:function(o){function e(r,i){n(r,i),t(r)}function t(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function n(r,i){r.emit("error",i)}o.exports={destroy:function(r,i){var l=this,c=this._readableState&&this._readableState.destroyed,f=this._writableState&&this._writableState.destroyed;return c||f?(i?i(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(n,this,r)):process.nextTick(n,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(h){!i&&h?l._writableState?l._writableState.errorEmitted?process.nextTick(t,l):(l._writableState.errorEmitted=!0,process.nextTick(e,l,h)):process.nextTick(e,l,h):i?(process.nextTick(t,l),i(h)):process.nextTick(t,l)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(r,i){var l=r._readableState,c=r._writableState;l&&l.autoDestroy||c&&c.autoDestroy?r.destroy(i):r.emit("error",i)}}},2896:function(o,e,t){var n=t(1602).codes.ERR_STREAM_PREMATURE_CLOSE;function r(){}o.exports=function i(l,c,f){if(typeof c=="function")return i(l,null,c);c||(c={}),f=function(Z){var ye=!1;return function(){if(!ye){ye=!0;for(var Re=arguments.length,F=new Array(Re),k=0;k<Re;k++)F[k]=arguments[k];Z.apply(this,F)}}}(f||r);var h=c.readable||c.readable!==!1&&l.readable,g=c.writable||c.writable!==!1&&l.writable,p=function(){l.writable||T()},y=l._writableState&&l._writableState.finished,T=function(){g=!1,y=!0,h||f.call(l)},b=l._readableState&&l._readableState.endEmitted,w=function(){h=!1,b=!0,g||f.call(l)},R=function(Z){f.call(l,Z)},M=function(){var Z;return h&&!b?(l._readableState&&l._readableState.ended||(Z=new n),f.call(l,Z)):g&&!y?(l._writableState&&l._writableState.ended||(Z=new n),f.call(l,Z)):void 0},Y=function(){l.req.on("finish",T)};return function(Z){return Z.setHeader&&typeof Z.abort=="function"}(l)?(l.on("complete",T),l.on("abort",M),l.req?Y():l.on("request",Y)):g&&!l._writableState&&(l.on("end",p),l.on("close",p)),l.on("end",w),l.on("finish",T),c.error!==!1&&l.on("error",R),l.on("close",M),function(){l.removeListener("complete",T),l.removeListener("abort",M),l.removeListener("request",Y),l.req&&l.req.removeListener("finish",T),l.removeListener("end",p),l.removeListener("close",p),l.removeListener("finish",T),l.removeListener("end",w),l.removeListener("error",R),l.removeListener("close",M)}}},3411:function(o){o.exports=function(){throw new Error("Readable.from is not available in the browser")}},8460:function(o,e,t){var n,r=t(1602).codes,i=r.ERR_MISSING_ARGS,l=r.ERR_STREAM_DESTROYED;function c(g){if(g)throw g}function f(g){g()}function h(g,p){return g.pipe(p)}o.exports=function(){for(var g=arguments.length,p=new Array(g),y=0;y<g;y++)p[y]=arguments[y];var T,b=function(R){return R.length?typeof R[R.length-1]!="function"?c:R.pop():c}(p);if(Array.isArray(p[0])&&(p=p[0]),p.length<2)throw new i("streams");var w=p.map(function(R,M){var Y=M<p.length-1;return function(Z,ye,Re,F){F=function(oe){var L=!1;return function(){L||(L=!0,oe.apply(void 0,arguments))}}(F);var k=!1;Z.on("close",function(){k=!0}),n===void 0&&(n=t(2896)),n(Z,{readable:ye,writable:Re},function(oe){if(oe)return F(oe);k=!0,F()});var j=!1;return function(oe){if(!k&&!j)return j=!0,function(L){return L.setHeader&&typeof L.abort=="function"}(Z)?Z.abort():typeof Z.destroy=="function"?Z.destroy():void F(oe||new l("pipe"))}}(R,Y,M>0,function(Z){T||(T=Z),Z&&w.forEach(f),Y||(w.forEach(f),b(T))})});return p.reduce(h)}},1749:function(o,e,t){var n=t(1602).codes.ERR_INVALID_OPT_VALUE;o.exports={getHighWaterMark:function(r,i,l,c){var f=function(h,g,p){return h.highWaterMark!=null?h.highWaterMark:g?h[p]:null}(i,c,l);if(f!=null){if(!isFinite(f)||Math.floor(f)!==f||f<0)throw new n(c?l:"highWaterMark",f);return Math.floor(f)}return r.objectMode?16:16384}}},2611:function(o,e,t){o.exports=t(9826).EventEmitter},748:function(o,e,t){var n=t(4598).Buffer,r=n.isEncoding||function(b){switch((b=""+b)&&b.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(b){var w;switch(this.encoding=function(R){var M=function(Y){if(!Y)return"utf8";for(var Z;;)switch(Y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return Y;default:if(Z)return;Y=(""+Y).toLowerCase(),Z=!0}}(R);if(typeof M!="string"&&(n.isEncoding===r||!r(R)))throw new Error("Unknown encoding: "+R);return M||R}(b),this.encoding){case"utf16le":this.text=f,this.end=h,w=4;break;case"utf8":this.fillLast=c,w=4;break;case"base64":this.text=g,this.end=p,w=3;break;default:return this.write=y,void(this.end=T)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(w)}function l(b){return b<=127?0:b>>5==6?2:b>>4==14?3:b>>3==30?4:b>>6==2?-1:-2}function c(b){var w=this.lastTotal-this.lastNeed,R=function(M,Y){if((192&Y[0])!=128)return M.lastNeed=0,"�";if(M.lastNeed>1&&Y.length>1){if((192&Y[1])!=128)return M.lastNeed=1,"�";if(M.lastNeed>2&&Y.length>2&&(192&Y[2])!=128)return M.lastNeed=2,"�"}}(this,b);return R!==void 0?R:this.lastNeed<=b.length?(b.copy(this.lastChar,w,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(b.copy(this.lastChar,w,0,b.length),void(this.lastNeed-=b.length))}function f(b,w){if((b.length-w)%2==0){var R=b.toString("utf16le",w);if(R){var M=R.charCodeAt(R.length-1);if(M>=55296&&M<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1],R.slice(0,-1)}return R}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=b[b.length-1],b.toString("utf16le",w,b.length-1)}function h(b){var w=b&&b.length?this.write(b):"";if(this.lastNeed){var R=this.lastTotal-this.lastNeed;return w+this.lastChar.toString("utf16le",0,R)}return w}function g(b,w){var R=(b.length-w)%3;return R===0?b.toString("base64",w):(this.lastNeed=3-R,this.lastTotal=3,R===1?this.lastChar[0]=b[b.length-1]:(this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1]),b.toString("base64",w,b.length-R))}function p(b){var w=b&&b.length?this.write(b):"";return this.lastNeed?w+this.lastChar.toString("base64",0,3-this.lastNeed):w}function y(b){return b.toString(this.encoding)}function T(b){return b&&b.length?this.write(b):""}e.StringDecoder=i,i.prototype.write=function(b){if(b.length===0)return"";var w,R;if(this.lastNeed){if((w=this.fillLast(b))===void 0)return"";R=this.lastNeed,this.lastNeed=0}else R=0;return R<b.length?w?w+this.text(b,R):this.text(b,R):w||""},i.prototype.end=function(b){var w=b&&b.length?this.write(b):"";return this.lastNeed?w+"�":w},i.prototype.text=function(b,w){var R=function(Y,Z,ye){var Re=Z.length-1;if(Re<ye)return 0;var F=l(Z[Re]);return F>=0?(F>0&&(Y.lastNeed=F-1),F):--Re<ye||F===-2?0:(F=l(Z[Re]))>=0?(F>0&&(Y.lastNeed=F-2),F):--Re<ye||F===-2?0:(F=l(Z[Re]))>=0?(F>0&&(F===2?F=0:Y.lastNeed=F-3),F):0}(this,b,w);if(!this.lastNeed)return b.toString("utf8",w);this.lastTotal=R;var M=b.length-(R-this.lastNeed);return b.copy(this.lastChar,0,M),b.toString("utf8",w,M)},i.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length),this.lastNeed-=b.length}},4598:function(o,e,t){var n=t(44),r=n.Buffer;function i(c,f){for(var h in c)f[h]=c[h]}function l(c,f,h){return r(c,f,h)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?o.exports=n:(i(n,e),e.Buffer=l),i(r,l),l.from=function(c,f,h){if(typeof c=="number")throw new TypeError("Argument must not be a number");return r(c,f,h)},l.alloc=function(c,f,h){if(typeof c!="number")throw new TypeError("Argument must be a number");var g=r(c);return f!==void 0?typeof h=="string"?g.fill(f,h):g.fill(f):g.fill(0),g},l.allocUnsafe=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return r(c)},l.allocUnsafeSlow=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(c)}},8571:function(o,e,t){var n;(function(r,i){var l="function",c="undefined",f="object",h="string",g="major",p="model",y="name",T="type",b="vendor",w="version",R="architecture",M="console",Y="mobile",Z="tablet",ye="smarttv",Re="wearable",F="embedded",k="Amazon",j="Apple",oe="ASUS",L="BlackBerry",Ee="Browser",Be="Chrome",pe="Firefox",ct="Google",Ye="Huawei",Le="LG",Je="Microsoft",Ge="Motorola",tt="Opera",Ze="Samsung",Me="Sharp",$e="Sony",mt="Xiaomi",Dt="Zebra",Pe="Facebook",Fe="Chromium OS",ut="Mac OS",W=function(it){for(var bt={},ht=0;ht<it.length;ht++)bt[it[ht].toUpperCase()]=it[ht];return bt},Q=function(it,bt){return typeof it===h&&P(bt).indexOf(P(it))!==-1},P=function(it){return it.toLowerCase()},H=function(it,bt){if(typeof it===h)return it=it.replace(/^\s\s*/,""),typeof bt===c?it:it.substring(0,500)},be=function(it,bt){for(var ht,Ct,pn,Xt,fn,qt,Vn=0;Vn<bt.length&&!fn;){var sr=bt[Vn],wr=bt[Vn+1];for(ht=Ct=0;ht<sr.length&&!fn&&sr[ht];)if(fn=sr[ht++].exec(it))for(pn=0;pn<wr.length;pn++)qt=fn[++Ct],typeof(Xt=wr[pn])===f&&Xt.length>0?Xt.length===2?typeof Xt[1]==l?this[Xt[0]]=Xt[1].call(this,qt):this[Xt[0]]=Xt[1]:Xt.length===3?typeof Xt[1]!==l||Xt[1].exec&&Xt[1].test?this[Xt[0]]=qt?qt.replace(Xt[1],Xt[2]):i:this[Xt[0]]=qt?Xt[1].call(this,qt,Xt[2]):i:Xt.length===4&&(this[Xt[0]]=qt?Xt[3].call(this,qt.replace(Xt[1],Xt[2])):i):this[Xt]=qt||i;Vn+=2}},ue=function(it,bt){for(var ht in bt)if(typeof bt[ht]===f&&bt[ht].length>0){for(var Ct=0;Ct<bt[ht].length;Ct++)if(Q(bt[ht][Ct],it))return ht==="?"?i:ht}else if(Q(bt[ht],it))return ht==="?"?i:ht;return it},Ue={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},et={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[w,[y,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[w,[y,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[y,w],[/opios[\/ ]+([\w\.]+)/i],[w,[y,tt+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[w,[y,tt+" GX"]],[/\bopr\/([\w\.]+)/i],[w,[y,tt]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[w,[y,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[y,w],[/\bddg\/([\w\.]+)/i],[w,[y,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[w,[y,"UC"+Ee]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[w,[y,"WeChat"]],[/konqueror\/([\w\.]+)/i],[w,[y,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[w,[y,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[w,[y,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[w,[y,"Smart Lenovo "+Ee]],[/(avast|avg)\/([\w\.]+)/i],[[y,/(.+)/,"$1 Secure "+Ee],w],[/\bfocus\/([\w\.]+)/i],[w,[y,pe+" Focus"]],[/\bopt\/([\w\.]+)/i],[w,[y,tt+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[w,[y,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[w,[y,"Dolphin"]],[/coast\/([\w\.]+)/i],[w,[y,tt+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[w,[y,"MIUI "+Ee]],[/fxios\/([-\w\.]+)/i],[w,[y,pe]],[/\bqihu|(qi?ho?o?|360)browser/i],[[y,"360 "+Ee]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[y,/(.+)/,"$1 "+Ee],w],[/samsungbrowser\/([\w\.]+)/i],[w,[y,Ze+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[y,/_/g," "],w],[/metasr[\/ ]?([\d\.]+)/i],[w,[y,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[y,"Sogou Mobile"],w],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[y,w],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[y],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[y,Pe],w],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[y,w],[/\bgsa\/([\w\.]+) .*safari\//i],[w,[y,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[w,[y,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[w,[y,Be+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[y,Be+" WebView"],w],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[w,[y,"Android "+Ee]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[y,w],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[w,[y,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[w,y],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[y,[w,ue,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[y,w],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[y,"Netscape"],w],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[w,[y,pe+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[y,w],[/(cobalt)\/([\w\.]+)/i],[y,[w,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[R,"amd64"]],[/(ia32(?=;))/i],[[R,P]],[/((?:i[346]|x)86)[;\)]/i],[[R,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[R,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[R,"armhf"]],[/windows (ce|mobile); ppc;/i],[[R,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[R,/ower/,"",P]],[/(sun4\w)[;\)]/i],[[R,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[R,P]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[p,[b,Ze],[T,Z]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[p,[b,Ze],[T,Y]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[p,[b,j],[T,Y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[p,[b,j],[T,Z]],[/(macintosh);/i],[p,[b,j]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[p,[b,Me],[T,Y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[p,[b,Ye],[T,Z]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[p,[b,Ye],[T,Y]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[p,/_/g," "],[b,mt],[T,Y]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[p,/_/g," "],[b,mt],[T,Z]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[p,[b,"OPPO"],[T,Y]],[/\b(opd2\d{3}a?) bui/i],[p,[b,"OPPO"],[T,Z]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[p,[b,"Vivo"],[T,Y]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[p,[b,"Realme"],[T,Y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[p,[b,Ge],[T,Y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[p,[b,Ge],[T,Z]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[p,[b,Le],[T,Z]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[p,[b,Le],[T,Y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[p,[b,"Lenovo"],[T,Z]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[p,/_/g," "],[b,"Nokia"],[T,Y]],[/(pixel c)\b/i],[p,[b,ct],[T,Z]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[p,[b,ct],[T,Y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[b,$e],[T,Y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[p,"Xperia Tablet"],[b,$e],[T,Z]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[p,[b,"OnePlus"],[T,Y]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[p,[b,k],[T,Z]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[p,/(.+)/g,"Fire Phone $1"],[b,k],[T,Y]],[/(playbook);[-\w\),; ]+(rim)/i],[p,b,[T,Z]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[p,[b,L],[T,Y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[p,[b,oe],[T,Z]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[p,[b,oe],[T,Y]],[/(nexus 9)/i],[p,[b,"HTC"],[T,Z]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[b,[p,/_/g," "],[T,Y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[p,[b,"Acer"],[T,Z]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[p,[b,"Meizu"],[T,Y]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[p,[b,"Ulefone"],[T,Y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[b,p,[T,Y]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[b,p,[T,Z]],[/(surface duo)/i],[p,[b,Je],[T,Z]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[p,[b,"Fairphone"],[T,Y]],[/(u304aa)/i],[p,[b,"AT&T"],[T,Y]],[/\bsie-(\w*)/i],[p,[b,"Siemens"],[T,Y]],[/\b(rct\w+) b/i],[p,[b,"RCA"],[T,Z]],[/\b(venue[\d ]{2,7}) b/i],[p,[b,"Dell"],[T,Z]],[/\b(q(?:mv|ta)\w+) b/i],[p,[b,"Verizon"],[T,Z]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[p,[b,"Barnes & Noble"],[T,Z]],[/\b(tm\d{3}\w+) b/i],[p,[b,"NuVision"],[T,Z]],[/\b(k88) b/i],[p,[b,"ZTE"],[T,Z]],[/\b(nx\d{3}j) b/i],[p,[b,"ZTE"],[T,Y]],[/\b(gen\d{3}) b.+49h/i],[p,[b,"Swiss"],[T,Y]],[/\b(zur\d{3}) b/i],[p,[b,"Swiss"],[T,Z]],[/\b((zeki)?tb.*\b) b/i],[p,[b,"Zeki"],[T,Z]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[b,"Dragon Touch"],p,[T,Z]],[/\b(ns-?\w{0,9}) b/i],[p,[b,"Insignia"],[T,Z]],[/\b((nxa|next)-?\w{0,9}) b/i],[p,[b,"NextBook"],[T,Z]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[b,"Voice"],p,[T,Y]],[/\b(lvtel\-)?(v1[12]) b/i],[[b,"LvTel"],p,[T,Y]],[/\b(ph-1) /i],[p,[b,"Essential"],[T,Y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[p,[b,"Envizen"],[T,Z]],[/\b(trio[-\w\. ]+) b/i],[p,[b,"MachSpeed"],[T,Z]],[/\btu_(1491) b/i],[p,[b,"Rotor"],[T,Z]],[/(shield[\w ]+) b/i],[p,[b,"Nvidia"],[T,Z]],[/(sprint) (\w+)/i],[b,p,[T,Y]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[b,Je],[T,Y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[p,[b,Dt],[T,Z]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[p,[b,Dt],[T,Y]],[/smart-tv.+(samsung)/i],[b,[T,ye]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[b,Ze],[T,ye]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[b,Le],[T,ye]],[/(apple) ?tv/i],[b,[p,j+" TV"],[T,ye]],[/crkey/i],[[p,Be+"cast"],[b,ct],[T,ye]],[/droid.+aft(\w+)( bui|\))/i],[p,[b,k],[T,ye]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[p,[b,Me],[T,ye]],[/(bravia[\w ]+)( bui|\))/i],[p,[b,$e],[T,ye]],[/(mitv-\w{5}) bui/i],[p,[b,mt],[T,ye]],[/Hbbtv.*(technisat) (.*);/i],[b,p,[T,ye]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[b,H],[p,H],[T,ye]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[T,ye]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[b,p,[T,M]],[/droid.+; (shield) bui/i],[p,[b,"Nvidia"],[T,M]],[/(playstation [345portablevi]+)/i],[p,[b,$e],[T,M]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[p,[b,Je],[T,M]],[/((pebble))app/i],[b,p,[T,Re]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[p,[b,j],[T,Re]],[/droid.+; (glass) \d/i],[p,[b,ct],[T,Re]],[/droid.+; (wt63?0{2,3})\)/i],[p,[b,Dt],[T,Re]],[/(quest( \d| pro)?)/i],[p,[b,Pe],[T,Re]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[b,[T,F]],[/(aeobc)\b/i],[p,[b,k],[T,F]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[p,[T,Y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[p,[T,Z]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[T,Z]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[T,Y]],[/(android[-\w\. ]{0,9});.+buil/i],[p,[b,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[w,[y,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[w,[y,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[y,w],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[w,y]],os:[[/microsoft (windows) (vista|xp)/i],[y,w],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[y,[w,ue,Ue]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[w,ue,Ue],[y,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[w,/_/g,"."],[y,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[y,ut],[w,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[w,y],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[y,w],[/\(bb(10);/i],[w,[y,L]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[w,[y,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[w,[y,pe+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[w,[y,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[w,[y,"watchOS"]],[/crkey\/([\d\.]+)/i],[w,[y,Be+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[y,Fe],w],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[y,w],[/(sunos) ?([\w\.\d]*)/i],[[y,"Solaris"],w],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[y,w]]},qe=function(it,bt){if(typeof it===f&&(bt=it,it=i),!(this instanceof qe))return new qe(it,bt).getResult();var ht=typeof r!==c&&r.navigator?r.navigator:i,Ct=it||(ht&&ht.userAgent?ht.userAgent:""),pn=ht&&ht.userAgentData?ht.userAgentData:i,Xt=bt?function(qt,Vn){var sr={};for(var wr in qt)Vn[wr]&&Vn[wr].length%2==0?sr[wr]=Vn[wr].concat(qt[wr]):sr[wr]=qt[wr];return sr}(et,bt):et,fn=ht&&ht.userAgent==Ct;return this.getBrowser=function(){var qt,Vn={};return Vn[y]=i,Vn[w]=i,be.call(Vn,Ct,Xt.browser),Vn[g]=typeof(qt=Vn[w])===h?qt.replace(/[^\d\.]/g,"").split(".")[0]:i,fn&&ht&&ht.brave&&typeof ht.brave.isBrave==l&&(Vn[y]="Brave"),Vn},this.getCPU=function(){var qt={};return qt[R]=i,be.call(qt,Ct,Xt.cpu),qt},this.getDevice=function(){var qt={};return qt[b]=i,qt[p]=i,qt[T]=i,be.call(qt,Ct,Xt.device),fn&&!qt[T]&&pn&&pn.mobile&&(qt[T]=Y),fn&&qt[p]=="Macintosh"&&ht&&typeof ht.standalone!==c&&ht.maxTouchPoints&&ht.maxTouchPoints>2&&(qt[p]="iPad",qt[T]=Z),qt},this.getEngine=function(){var qt={};return qt[y]=i,qt[w]=i,be.call(qt,Ct,Xt.engine),qt},this.getOS=function(){var qt={};return qt[y]=i,qt[w]=i,be.call(qt,Ct,Xt.os),fn&&!qt[y]&&pn&&pn.platform&&pn.platform!="Unknown"&&(qt[y]=pn.platform.replace(/chrome os/i,Fe).replace(/macos/i,ut)),qt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ct},this.setUA=function(qt){return Ct=typeof qt===h&&qt.length>500?H(qt,500):qt,this},this.setUA(Ct),this};qe.VERSION="1.0.38",qe.BROWSER=W([y,w,g]),qe.CPU=W([R]),qe.DEVICE=W([p,b,T,M,Y,ye,Z,Re,F]),qe.ENGINE=qe.OS=W([y,w]),typeof e!==c?(o.exports&&(e=o.exports=qe),e.UAParser=qe):t.amdO?(n=(function(){return qe}).call(e,t,e,o))===i||(o.exports=n):typeof r!==c&&(r.UAParser=qe);var Xe=typeof r!==c&&(r.jQuery||r.Zepto);if(Xe&&!Xe.ua){var He=new qe;Xe.ua=He.getResult(),Xe.ua.get=function(){return He.getUA()},Xe.ua.set=function(it){He.setUA(it);var bt=He.getResult();for(var ht in bt)Xe.ua[ht]=bt[ht]}}})(typeof window=="object"?window:this)},9e3:function(o,e,t){function n(r){try{if(!t.g.localStorage)return!1}catch{return!1}var i=t.g.localStorage[r];return i!=null&&String(i).toLowerCase()==="true"}o.exports=function(r,i){if(n("noDeprecation"))return r;var l=!1;return function(){if(!l){if(n("throwDeprecation"))throw new Error(i);n("traceDeprecation")?console.trace(i):console.warn(i),l=!0}return r.apply(this,arguments)}}},3779:function(){},7199:function(){},5393:function(o,e,t){t.r(e),t.d(e,{Debug:function(){return i.default},FactoryMaker:function(){return r.default},MediaPlayer:function(){return n.default}});var n=t(255),r=t(138),i=t(649),l=t(8986),c=typeof window<"u"&&window||global,f=c.dashjs;f||(f=c.dashjs={}),f.MediaPlayer=n.default,f.FactoryMaker=r.default,f.Debug=i.default,f.Version=(0,l.getVersionString)(),e.default=f},649:function(o,e,t){t.r(e);var n=t(8850),r=t(3621),i=t(138);function l(f){f=f||{};const h=this.context,g=(0,n.default)(h).getInstance(),p=f.settings,y=[];let T,b,w,R;function M(j){return j&&j.bind?j.bind(window.console):window.console.log.bind(window.console)}function Y(){for(var j=arguments.length,oe=new Array(j),L=0;L<j;L++)oe[L]=arguments[L];k(1,this,...oe)}function Z(){for(var j=arguments.length,oe=new Array(j),L=0;L<j;L++)oe[L]=arguments[L];k(2,this,...oe)}function ye(){for(var j=arguments.length,oe=new Array(j),L=0;L<j;L++)oe[L]=arguments[L];k(3,this,...oe)}function Re(){for(var j=arguments.length,oe=new Array(j),L=0;L<j;L++)oe[L]=arguments[L];k(4,this,...oe)}function F(){for(var j=arguments.length,oe=new Array(j),L=0;L<j;L++)oe[L]=arguments[L];k(5,this,...oe)}function k(j,oe){let L="",Ee=null;b&&(Ee=new Date().getTime(),L+="["+(Ee-R)+"]"),w&&oe&&oe.getClassName&&(L+="["+oe.getClassName()+"]",oe.getType&&(L+="["+oe.getType()+"]")),L.length>0&&(L+=" ");for(var Be=arguments.length,pe=new Array(Be>2?Be-2:0),ct=2;ct<Be;ct++)pe[ct-2]=arguments[ct];Array.apply(null,pe).forEach(function(Ye){L+=Ye+" "}),y[j]&&p&&p.get().debug.logLevel>=j&&y[j](L),p&&p.get().debug.dispatchEvent&&g.trigger(r.default.LOG,{message:L,level:j})}return T={getLogger:function(j){return{fatal:Y.bind(j),error:Z.bind(j),warn:ye.bind(j),info:Re.bind(j),debug:F.bind(j)}},setLogTimestampVisible:function(j){b=j},setCalleeNameVisible:function(j){w=j}},b=!0,w=!0,R=new Date().getTime(),typeof window<"u"&&window.console&&(y[1]=M(window.console.error),y[2]=M(window.console.error),y[3]=M(window.console.warn),y[4]=M(window.console.info),y[5]=M(window.console.debug)),T}l.__dashjs_factory_name="Debug";const c=i.default.getSingletonFactory(l);c.LOG_LEVEL_NONE=0,c.LOG_LEVEL_FATAL=1,c.LOG_LEVEL_ERROR=2,c.LOG_LEVEL_WARNING=3,c.LOG_LEVEL_INFO=4,c.LOG_LEVEL_DEBUG=5,i.default.updateSingletonFactory(l.__dashjs_factory_name,c),e.default=c},8850:function(o,e,t){t.r(e);var n=t(138),r=t(1191);function i(){let c={};function f(y,T,b){let w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},R=arguments.length>4&&arguments[4]!==void 0&&arguments[4];if(!y)throw new Error("event type cannot be null or undefined");if(!T||typeof T!="function")throw new Error("listener must be a function: "+T);let M=w.priority||0;if(g(y,T,b)>=0)return;c[y]=c[y]||[];const Y={callback:T,scope:b,priority:M,executeOnlyOnce:R};b&&b.getStreamId&&(Y.streamId=b.getStreamId()),b&&b.getType&&(Y.mediaType=b.getType()),w&&w.mode&&(Y.mode=w.mode),c[y].some((Z,ye)=>{if(Z&&M>Z.priority)return c[y].splice(ye,0,Y),!0})||c[y].push(Y)}function h(y,T,b){if(!y||!T||!c[y])return;const w=g(y,T,b);w<0||(c[y][w]=null)}function g(y,T,b){let w=-1;return c[y]&&c[y].some((R,M)=>{if(R&&R.callback===T&&(!b||b===R.scope))return w=M,!0}),w}return{on:function(y,T,b){f(y,T,b,arguments.length>3&&arguments[3]!==void 0?arguments[3]:{})},once:function(y,T,b){f(y,T,b,arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},!0)},off:h,trigger:function(y){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!y||!c[y])return;if(T=T||{},T.hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");T.type=y,b.streamId&&(T.streamId=b.streamId),b.mediaType&&(T.mediaType=b.mediaType);const w=[];c[y].filter(R=>!(!R||b.streamId&&R.streamId&&R.streamId!==b.streamId||b.mediaType&&R.mediaType&&R.mediaType!==b.mediaType||b.mode&&R.mode&&R.mode!==b.mode||!R.mode&&b.mode&&b.mode===r.default.EVENT_MODE_ON_RECEIVE)).forEach(R=>{R&&R.callback.call(R.scope,T),R.executeOnlyOnce&&w.push(R)}),w.forEach(R=>{h(y,R.callback,R.scope)})},reset:function(){c={}}}}i.__dashjs_factory_name="EventBus";const l=n.default.getSingletonFactory(i);l.EVENT_PRIORITY_LOW=0,l.EVENT_PRIORITY_HIGH=5e3,n.default.updateSingletonFactory(i.__dashjs_factory_name,l),e.default=l},138:function(o,e,t){t.r(e);const n=function(){let r,i=[];const l={},c={};function f(y,T){for(const b in i){const w=i[b];if(w.context===y&&w.name===T)return w.instance}return null}function h(y,T){return T[y]}function g(y,T,b){y in b&&(b[y]=T)}function p(y,T,b){let w;const R=y.__dashjs_factory_name,M=T[R];if(M){let Y=M.instance;if(!M.override)return Y.apply({context:T,factory:r},b);w=y.apply({context:T},b),Y=Y.apply({context:T,factory:r,parent:w},b);for(const Z in Y)w.hasOwnProperty(Z)&&(w[Z]=Y[Z])}else w=y.apply({context:T},b);return w.getClassName=function(){return R},w}return r={extend:function(y,T,b,w){!w[y]&&T&&(w[y]={instance:T,override:b})},getSingletonInstance:f,setSingletonInstance:function(y,T,b){for(const w in i){const R=i[w];if(R.context===y&&R.name===T)return void(i[w].instance=b)}i.push({name:T,context:y,instance:b})},deleteSingletonInstances:function(y){i=i.filter(T=>T.context!==y)},getSingletonFactory:function(y){let T=h(y.__dashjs_factory_name,l);return T||(T=function(b){let w;return b===void 0&&(b={}),{getInstance:function(){return w||(w=f(b,y.__dashjs_factory_name)),w||(w=p(y,b,arguments),i.push({name:y.__dashjs_factory_name,context:b,instance:w})),w}}},l[y.__dashjs_factory_name]=T),T},getSingletonFactoryByName:function(y){return h(y,l)},updateSingletonFactory:function(y,T){g(y,T,l)},getClassFactory:function(y){let T=h(y.__dashjs_factory_name,c);return T||(T=function(b){return b===void 0&&(b={}),{create:function(){return p(y,b,arguments)}}},c[y.__dashjs_factory_name]=T),T},getClassFactoryByName:function(y){return h(y,c)},updateClassFactory:function(y,T){g(y,T,c)}},r}();e.default=n},8261:function(o,e,t){t.r(e);var n=t(138),r=t(7263),i=t(649),l=t(5212),c=t(7568),f=t(8850),h=t(3621);function g(){let y;const T=this.context,b=(0,f.default)(T).getInstance(),w={"streaming.delay.liveDelay":h.default.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":h.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":h.default.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":h.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":h.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,"streaming.abr.rules.throughputRule.active":h.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.bolaRule.active":h.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.insufficientBufferRule.active":h.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.switchHistoryRule.active":h.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.droppedFramesRule.active":h.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.abandonRequestsRule.active":h.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.l2ARule.active":h.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.loLPRule.active":h.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.maxBitrate.video":h.default.SETTING_UPDATED_MAX_BITRATE,"streaming.abr.maxBitrate.audio":h.default.SETTING_UPDATED_MAX_BITRATE,"streaming.abr.minBitrate.video":h.default.SETTING_UPDATED_MIN_BITRATE,"streaming.abr.minBitrate.audio":h.default.SETTING_UPDATED_MIN_BITRATE},R={debug:{logLevel:i.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,supportedEssentialProperties:[{schemeIdUri:l.default.FONT_DOWNLOAD_DVB_SCHEME},{schemeIdUri:l.default.COLOUR_PRIMARIES_SCHEME_ID_URI,value:/1|5|6|7/},{schemeIdUri:l.default.URL_QUERY_INFO_SCHEME},{schemeIdUri:l.default.EXT_URL_QUERY_INFO_SCHEME},{schemeIdUri:l.default.MATRIX_COEFFICIENTS_SCHEME_ID_URI,value:/0|1|5|6/},{schemeIdUri:l.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI,value:/1|6|13|14|15/},...l.default.THUMBNAILS_SCHEME_ID_URIS.map(Z=>({schemeIdUri:Z}))],useMediaCapabilitiesApi:!0,filterVideoColorimetryEssentialProperties:!1,filterHDRMetadataFormatEssentialProperties:!1},events:{eventControllerRefreshDelay:100,deleteEventMessageDataTimeout:1e4},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0,ignoreKeyStatuses:!1},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:null,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,bufferTimeDefault:18,longFormContentDurationThreshold:600,stallThreshold:.3,lowLatencyStallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeType:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1,syntheticStallEvents:{enabled:!1,ignoreReadyState:!1}},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:l.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:10,audio:5},trackSwitchMode:{audio:l.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:l.default.TRACK_SWITCH_MODE_NEVER_REPLACE},ignoreSelectionPriority:!1,prioritizeRoleMain:!0,assumeDefaultRoleAsMain:!0,selectionModeForInitialTrack:l.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:{[c.HTTPRequest.MPD_TYPE]:500,[c.HTTPRequest.XLINK_EXPANSION_TYPE]:500,[c.HTTPRequest.MEDIA_SEGMENT_TYPE]:1e3,[c.HTTPRequest.INIT_SEGMENT_TYPE]:1e3,[c.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:1e3,[c.HTTPRequest.INDEX_SEGMENT_TYPE]:1e3,[c.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE]:1e3,[c.HTTPRequest.LICENSE]:1e3,[c.HTTPRequest.OTHER_TYPE]:1e3,lowLatencyReductionFactor:10},retryAttempts:{[c.HTTPRequest.MPD_TYPE]:3,[c.HTTPRequest.XLINK_EXPANSION_TYPE]:1,[c.HTTPRequest.MEDIA_SEGMENT_TYPE]:3,[c.HTTPRequest.INIT_SEGMENT_TYPE]:3,[c.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:3,[c.HTTPRequest.INDEX_SEGMENT_TYPE]:3,[c.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE]:3,[c.HTTPRequest.LICENSE]:3,[c.HTTPRequest.OTHER_TYPE]:3,lowLatencyMultiplyFactor:5},abr:{limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,enableSupplementalPropertyAdaptationSetSwitching:!0,rules:{throughputRule:{active:!0},bolaRule:{active:!0},insufficientBufferRule:{active:!0,parameters:{throughputSafetyFactor:.7,segmentIgnoreCount:2}},switchHistoryRule:{active:!0,parameters:{sampleSize:8,switchPercentageThreshold:.075}},droppedFramesRule:{active:!1,parameters:{minimumSampleSize:375,droppedFramesPercentageThreshold:.15}},abandonRequestsRule:{active:!0,parameters:{abandonDurationMultiplier:1.8,minSegmentDownloadTimeThresholdInMs:500,minThroughputSamplesThreshold:6}},l2ARule:{active:!1},loLPRule:{active:!1}},throughput:{averageCalculationMode:l.default.THROUGHPUT_CALCULATION_MODES.EWMA,lowLatencyDownloadTimeCalculationMode:l.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING,useResourceTimingApi:!0,useNetworkInformationApi:{xhr:!1,fetch:!1},useDeadTimeLatency:!0,bandwidthSafetyFactor:.9,sampleSettings:{live:3,vod:4,enableSampleSizeAdjustment:!0,decreaseScale:.7,increaseScale:1.3,maxMeasurementsToKeep:20,averageLatencySampleAmount:4},ewma:{throughputSlowHalfLifeSeconds:8,throughputFastHalfLifeSeconds:3,latencySlowHalfLifeCount:2,latencyFastHalfLifeCount:1,weightDownloadTimeMultiplicationFactor:.0015}},maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},initialBitrate:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0}},cmcd:{applyParametersFromMpd:!0,enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:l.default.CMCD_MODE_QUERY,enabledKeys:l.default.CMCD_AVAILABLE_KEYS,includeInRequests:["segment","mpd"],version:1},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}},defaultSchemeIdUri:{viewpoint:"",audioChannelConfiguration:"urn:mpeg:mpegB:cicp:ChannelConfiguration",role:"urn:mpeg:dash:role:2011",accessibility:"urn:mpeg:dash:role:2011"}},errors:{recoverAttempts:{mediaErrorDecode:5}}};let M=r.default.clone(R);function Y(Z,ye,Re){for(let F in Z)Z.hasOwnProperty(F)&&(ye.hasOwnProperty(F)?typeof Z[F]!="object"||Z[F]instanceof RegExp||Z[F]instanceof Array||Z[F]===null?(ye[F]=r.default.clone(Z[F]),w[Re+F]&&b.trigger(w[Re+F])):Y(Z[F],ye[F],Re.slice()+F+"."):console.error("Settings parameter "+Re+F+" is not supported"))}return y={get:function(){return M},update:function(Z){typeof Z=="object"&&Y(Z,M,"")},reset:function(){M=r.default.clone(R)}},y}g.__dashjs_factory_name="Settings";let p=n.default.getSingletonFactory(g);e.default=p},7263:function(o,e,t){t.r(e);var n=t(3282),r=t(8571),i=t(5212);class l{static mixin(f,h,g){let p,y={};if(f)for(let T in h)h.hasOwnProperty(T)&&(p=h[T],T in f&&(f[T]===p||T in y&&y[T]===p)||(typeof f[T]=="object"&&f[T]!==null?f[T]=l.mixin(f[T],p,g):f[T]=g(p)));return f}static clone(f){if(!f||typeof f!="object")return f;if(f instanceof RegExp)return new RegExp(f);let h;if(f instanceof Array){h=[];for(let g=0,p=f.length;g<p;++g)g in f&&h.push(l.clone(f[g]))}else h={};return l.mixin(h,f,l.clone)}static addAdditionalQueryParameterToUrl(f,h){try{if(!h||h.length===0)return f;let g=f;return h.forEach(p=>{let{key:y,value:T}=p;const b=g.includes("?")?"&":"?";g+=`${b}${encodeURIComponent(y)}=${encodeURIComponent(T)}`}),g}catch{return f}}static removeQueryParameterFromUrl(f,h){if(!f||!h)return f;const g=new URL(f),p=new URLSearchParams(g.search);if(!p||p.size===0||!p.has(h))return f;p.delete(h);const y=Array.from(p.entries()).map(b=>{let[w,R]=b;return`${w}=${R}`}).join("&"),T=`${g.origin}${g.pathname}`;return y?`${T}?${y}`:T}static parseHttpHeaders(f){let h={};if(!f)return h;let g=f.trim().split(`\r
`);for(let p=0,y=g.length;p<y;p++){let T=g[p],b=T.indexOf(": ");b>0&&(h[T.substring(0,b)]=T.substring(b+2))}return h}static parseQueryParams(f){const h=[],g=new URLSearchParams(f);for(const[p,y]of g.entries())h.push({key:decodeURIComponent(p),value:decodeURIComponent(y)});return h}static generateUuid(){let f=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(h){const g=(f+16*Math.random())%16|0;return f=Math.floor(f/16),(h=="x"?g:3&g|8).toString(16)})}static generateHashCode(f){let h=0;if(f.length===0)return h;for(let g=0;g<f.length;g++)h=(h<<5)-h+f.charCodeAt(g),h|=0;return h}static getRelativeUrl(f,h){try{const g=new URL(f),p=new URL(h);if(g.protocol=p.protocol,g.origin!==p.origin)return h;let y=n.relative(g.pathname.substr(0,g.pathname.lastIndexOf("/")),p.pathname.substr(0,p.pathname.lastIndexOf("/")));const T=y.length===0?1:0;return y+=p.pathname.substr(p.pathname.lastIndexOf("/")+T,p.pathname.length-1),p.pathname.length<y.length?p.pathname:y}catch{return h}}static getHostFromUrl(f){try{return new URL(f).host}catch{return null}}static parseUserAgent(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{const h=f===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,r.UAParser)(h)}catch{return{}}}static stringHasProtocol(f){return/(http(s?)):\/\//i.test(f)}static bufferSourceToDataView(f){return l.toDataView(f,DataView)}static bufferSourceToInt8(f){return l.toDataView(f,Uint8Array)}static uint8ArrayToString(f){return new TextDecoder("utf-8").decode(f)}static bufferSourceToHex(f){const h=l.bufferSourceToInt8(f);let g="";for(let p of h)p=p.toString(16),p.length===1&&(p="0"+p),g+=p;return g}static toDataView(f,h){const g=l.getArrayBuffer(f);let p=1;"BYTES_PER_ELEMENT"in DataView&&(p=DataView.BYTES_PER_ELEMENT);const y=((f.byteOffset||0)+f.byteLength)/p,T=(f.byteOffset||0)/p,b=Math.floor(Math.max(0,Math.min(T,y)));return new h(g,b,Math.floor(Math.min(b+Math.max(1/0,0),y))-b)}static getArrayBuffer(f){return f instanceof ArrayBuffer?f:f.buffer}static getCodecFamily(f){const{base:h,profile:g}=l._getCodecParts(f);switch(h){case"mp4a":switch(g){case"69":case"6b":case"40.34":return i.default.CODEC_FAMILIES.MP3;case"66":case"67":case"68":case"40.2":case"40.02":case"40.5":case"40.05":case"40.29":case"40.42":return i.default.CODEC_FAMILIES.AAC;case"a5":return i.default.CODEC_FAMILIES.AC3;case"e6":return i.default.CODEC_FAMILIES.EC3;case"b2":return i.default.CODEC_FAMILIES.DTSX;case"a9":return i.default.CODEC_FAMILIES.DTSC}break;case"avc1":case"avc3":return i.default.CODEC_FAMILIES.AVC;case"hvc1":case"hvc3":return i.default.CODEC_FAMILIES.HEVC;default:return h}return h}static _getCodecParts(f){const[h,...g]=f.split(".");return{base:h,profile:g.join(".")}}}e.default=l},8986:function(o,e,t){t.r(e),t.d(e,{getVersionString:function(){return r}});const n="5.0.3";function r(){return n}},8748:function(o,e,t){t.r(e),e.default=class{extend(n,r){if(!n)return;let i=!!r&&r.override,l=!!r&&r.publicOnly;for(const c in n)!n.hasOwnProperty(c)||this[c]&&!i||l&&n[c].indexOf("public_")===-1||(this[c]=n[c])}}},5734:function(o,e,t){t.r(e);var n=t(7252);class r extends n.default{constructor(){super(),this.ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CMSD_STATIC_HEADER="cmsdStaticHeader",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.INBAND_EVENTS="inbandEvents",this.INITIAL_STREAM_SWITCH="initialStreamSwitch",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_FRAGMENT_NEEDED="initFragmentNeeded",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",this.MEDIAINFO_UPDATED="mediaInfoUpdated",this.QUOTA_EXCEEDED="quotaExceeded",this.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",this.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",this.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",this.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",this.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",this.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",this.SOURCE_BUFFER_ERROR="sourceBufferError",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady",this.SEEK_TARGET="seekTarget",this.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",this.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",this.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",this.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",this.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",this.SETTING_UPDATED_ABR_ACTIVE_RULES="settingUpdatedAbrActiveRules",this.SETTING_UPDATED_MAX_BITRATE="settingUpdatedMaxBitrate",this.SETTING_UPDATED_MIN_BITRATE="settingUpdatedMinBitrate"}}e.default=r},3621:function(o,e,t){t.r(e);var n=t(5734);class r extends n.default{}let i=new r;e.default=i},7252:function(o,e,t){t.r(e),e.default=class{extend(n,r){if(!n)return;let i=!!r&&r.override,l=!!r&&r.publicOnly;for(const c in n)!n.hasOwnProperty(c)||this[c]&&!i||l&&n[c].indexOf("public_")===-1||(this[c]=n[c])}}},8854:function(o,e,t){t.r(e),e.default={ACCESSIBILITY:"Accessibility",ADAPTATION_SET:"AdaptationSet",ADAPTATION_SETS:"adaptationSets",ADAPTATION_SET_SWITCHING_SCHEME_ID_URI:"urn:mpeg:dash:adaptation-set-switching:2016",ADD:"add",ASSET_IDENTIFIER:"AssetIdentifier",AUDIO_CHANNEL_CONFIGURATION:"AudioChannelConfiguration",AUDIO_SAMPLING_RATE:"audioSamplingRate",AVAILABILITY_END_TIME:"availabilityEndTime",AVAILABILITY_START_TIME:"availabilityStartTime",AVAILABILITY_TIME_COMPLETE:"availabilityTimeComplete",AVAILABILITY_TIME_OFFSET:"availabilityTimeOffset",BANDWITH:"bandwidth",BASE_URL:"BaseURL",BITSTREAM_SWITCHING:"BitstreamSwitching",BITSTREAM_SWITCHING_MINUS:"bitstreamSwitching",BYTE_RANGE:"byteRange",CAPTION:"caption",CENC_DEFAULT_KID:"cenc:default_KID",CLIENT_DATA_REPORTING:"ClientDataReporting",CLIENT_REQUIREMENT:"clientRequirement",CMCD_PARAMETERS:"CMCDParameters",CODECS:"codecs",CODEC_PRIVATE_DATA:"codecPrivateData",CODING_DEPENDENCY:"codingDependency",CONTENT_COMPONENT:"ContentComponent",CONTENT_PROTECTION:"ContentProtection",CONTENT_STEERING:"ContentSteering",CONTENT_STEERING_RESPONSE:{VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},CONTENT_TYPE:"contentType",DEFAULT_SERVICE_LOCATION:"defaultServiceLocation",DEPENDENCY_ID:"dependencyId",DURATION:"duration",DVB_PRIORITY:"dvb:priority",DVB_WEIGHT:"dvb:weight",DVB_URL:"dvb:url",DVB_MIMETYPE:"dvb:mimeType",DVB_FONTFAMILY:"dvb:fontFamily",DYNAMIC:"dynamic",END_NUMBER:"endNumber",ESSENTIAL_PROPERTY:"EssentialProperty",EVENT:"Event",EVENT_STREAM:"EventStream",FORCED_SUBTITLE:"forced-subtitle",FRAMERATE:"frameRate",FRAME_PACKING:"FramePacking",GROUP_LABEL:"GroupLabel",HEIGHT:"height",ID:"id",INBAND:"inband",INBAND_EVENT_STREAM:"InbandEventStream",INDEX:"index",INDEX_RANGE:"indexRange",INITIALIZATION:"Initialization",INITIALIZATION_MINUS:"initialization",LA_URL:"Laurl",LA_URL_LOWER_CASE:"laurl",LABEL:"Label",LANG:"lang",LOCATION:"Location",MAIN:"main",MAXIMUM_SAP_PERIOD:"maximumSAPPeriod",MAX_PLAYOUT_RATE:"maxPlayoutRate",MAX_SEGMENT_DURATION:"maxSegmentDuration",MAX_SUBSEGMENT_DURATION:"maxSubsegmentDuration",MEDIA:"media",MEDIA_PRESENTATION_DURATION:"mediaPresentationDuration",MEDIA_RANGE:"mediaRange",MEDIA_STREAM_STRUCTURE_ID:"mediaStreamStructureId",METRICS:"Metrics",METRICS_MINUS:"metrics",MIME_TYPE:"mimeType",MINIMUM_UPDATE_PERIOD:"minimumUpdatePeriod",MIN_BUFFER_TIME:"minBufferTime",MP4_PROTECTION_SCHEME:"urn:mpeg:dash:mp4protection:2011",MPD:"MPD",MPD_TYPE:"mpd",MPD_PATCH_TYPE:"mpdpatch",ORIGINAL_MPD_ID:"mpdId",ORIGINAL_PUBLISH_TIME:"originalPublishTime",PATCH_LOCATION:"PatchLocation",PERIOD:"Period",PRESENTATION_TIME:"presentationTime",PRESENTATION_TIME_OFFSET:"presentationTimeOffset",PRO:"pro",PRODUCER_REFERENCE_TIME:"ProducerReferenceTime",PRODUCER_REFERENCE_TIME_TYPE:{ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},PROFILES:"profiles",PSSH:"pssh",PUBLISH_TIME:"publishTime",QUALITY_RANKING:"qualityRanking",QUERY_BEFORE_START:"queryBeforeStart",QUERY_PART:"$querypart$",RANGE:"range",RATING:"Rating",REF:"ref",REF_ID:"refId",REMOVE:"remove",REPLACE:"replace",REPORTING:"Reporting",REPRESENTATION:"Representation",REPRESENTATION_INDEX:"RepresentationIndex",ROBUSTNESS:"robustness",ROLE:"Role",S:"S",SAR:"sar",SCAN_TYPE:"scanType",SEGMENT_ALIGNMENT:"segmentAlignment",SEGMENT_BASE:"SegmentBase",SEGMENT_LIST:"SegmentList",SEGMENT_PROFILES:"segmentProfiles",SEGMENT_TEMPLATE:"SegmentTemplate",SEGMENT_TIMELINE:"SegmentTimeline",SEGMENT_TYPE:"segment",SEGMENT_URL:"SegmentURL",SERVICE_DESCRIPTION:"ServiceDescription",SERVICE_DESCRIPTION_LATENCY:"Latency",SERVICE_DESCRIPTION_OPERATING_BANDWIDTH:"OperatingBandwidth",SERVICE_DESCRIPTION_OPERATING_QUALITY:"OperatingQuality",SERVICE_DESCRIPTION_PLAYBACK_RATE:"PlaybackRate",SERVICE_DESCRIPTION_SCOPE:"Scope",SERVICE_LOCATION:"serviceLocation",SERVICE_LOCATIONS:"serviceLocations",SOURCE_URL:"sourceURL",START:"start",START_NUMBER:"startNumber",START_WITH_SAP:"startWithSAP",STATIC:"static",STEERING_TYPE:"steering",SUBSET:"Subset",SUBTITLE:"subtitle",SUB_REPRESENTATION:"SubRepresentation",SUB_SEGMENT_ALIGNMENT:"subsegmentAlignment",SUGGESTED_PRESENTATION_DELAY:"suggestedPresentationDelay",SUPPLEMENTAL_PROPERTY:"SupplementalProperty",SUPPLEMENTAL_CODECS:"scte214:supplementalCodecs",TIMESCALE:"timescale",TIMESHIFT_BUFFER_DEPTH:"timeShiftBufferDepth",TTL:"ttl",TYPE:"type",UTC_TIMING:"UTCTiming",VALUE:"value",VIEWPOINT:"Viewpoint",WALL_CLOCK_TIME:"wallClockTime",WIDTH:"width"}},5717:function(o,e,t){t.r(e),e.default=class{constructor(){this.schemeIdUri="",this.value=""}}},255:function(o,e,t){t.r(e),t.d(e,{default:function(){return Td}});class n{constructor(){this.time=null,this.verboseLevel=0}log(E,S){if(this.verboseLevel>=E){const x=typeof S=="function"?S():S;console.log(`${this.time} [${E}] ${x}`)}}}class r{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(E){const S=["foreground","underline","italics","background","flash"];for(let x=0;x<S.length;x++){const I=S[x];Object.prototype.hasOwnProperty.call(E,I)&&(this[I]=E[I])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(E){return this.foreground===E.foreground&&this.underline===E.underline&&this.italics===E.italics&&this.background===E.background&&this.flash===E.flash}copy(E){this.foreground=E.foreground,this.underline=E.underline,this.italics=E.italics,this.background=E.background,this.flash=E.flash}}class i{constructor(){this.uchar=" ",this.penState=new r}reset(){this.uchar=" ",this.penState.reset()}setChar(E,S){this.uchar=E,this.penState.copy(S)}setPenState(E){this.penState.copy(E)}equals(E){return this.uchar===E.uchar&&this.penState.equals(E.penState)}copy(E){this.uchar=E.uchar,this.penState.copy(E.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}const l=100,c={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},f=function(_){return String.fromCharCode(c[_]||_)};class h{constructor(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new n;this.chars=[],this.cueStartTime=null,this.pos=0,this.currPenState=new r;for(let S=0;S<l;S++)this.chars.push(new i);this.logger=E}equals(E){for(let S=0;S<l;S++)if(!this.chars[S].equals(E.chars[S]))return!1;return!0}copy(E){for(let S=0;S<l;S++)this.chars[S].copy(E.chars[S])}isEmpty(){let E=!0;for(let S=0;S<l;S++)if(!this.chars[S].isEmpty()){E=!1;break}return E}setCursor(E){this.pos!==E&&(this.pos=E),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>l&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=l)}moveCursor(E){const S=this.pos+E;if(E>1)for(let x=this.pos+1;x<S+1;x++)this.chars[x].setPenState(this.currPenState);this.setCursor(S)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(E){E>=144&&this.backSpace();const S=f(E);this.pos>=l?this.logger.log(0,()=>"Cannot insert "+E.toString(16)+" ("+S+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(S,this.currPenState),this.moveCursor(1))}clearFromPos(E){let S;for(S=E;S<l;S++)this.chars[S].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const E=[];let S=!0;for(let x=0;x<l;x++){const I=this.chars[x].uchar;I!==" "&&(S=!1),E.push(I)}return S?"":E.join("")}setPenStyles(E){this.currPenState.setStyles(E),this.chars[this.pos].setPenState(this.currPenState)}}const g=15;class p{constructor(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new n;this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null;for(let S=0;S<g;S++)this.rows.push(new h(E));this.logger=E}reset(){for(let E=0;E<g;E++)this.rows[E].clear();this.currRow=14}equals(E){let S=!0;for(let x=0;x<g;x++)if(!this.rows[x].equals(E.rows[x])){S=!1;break}return S}copy(E){for(let S=0;S<g;S++)this.rows[S].copy(E.rows[S])}isEmpty(){let E=!0;for(let S=0;S<g;S++)if(!this.rows[S].isEmpty()){E=!1;break}return E}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(E){this.rows[this.currRow].insertChar(E)}setPen(E){this.rows[this.currRow].setPenStyles(E)}moveCursor(E){this.rows[this.currRow].moveCursor(E)}setCursor(E){this.logger.log(2,"setCursor: "+E),this.rows[this.currRow].setCursor(E)}setPAC(E){this.logger.log(2,()=>"pacData = "+JSON.stringify(E));let S=E.row-1;if(this.nrRollUpRows&&S<this.nrRollUpRows-1&&(S=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==S){for(let G=0;G<g;G++)this.rows[G].clear();const N=this.currRow+1-this.nrRollUpRows,B=this.lastOutputScreen;if(B){const G=B.rows[N].cueStartTime,C=this.logger.time;if(G!==null&&C!==null&&G<C)for(let K=0;K<this.nrRollUpRows;K++)this.rows[S-this.nrRollUpRows+K+1].copy(B.rows[N+K])}}this.currRow=S;const x=this.rows[this.currRow];if(E.indent!==null){const N=E.indent,B=Math.max(N-1,0);x.setCursor(E.indent),E.color=x.chars[B].penState.foreground}const I={foreground:E.color,underline:E.underline,italics:E.italics,background:"black",flash:!1};this.setPen(I)}setBkgData(E){this.logger.log(2,()=>"bkgData = "+JSON.stringify(E)),this.backSpace(),this.setPen(E),this.insertChar(32)}setRollUpRows(E){this.nrRollUpRows=E}rollUp(){if(this.nrRollUpRows===null)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,()=>this.getDisplayText());const E=this.currRow+1-this.nrRollUpRows,S=this.rows.splice(E,1)[0];S.clear(),this.rows.splice(this.currRow,0,S),this.logger.log(2,"Rolling up")}getDisplayText(E){E=E||!1;const S=[];let x="",I=-1;for(let N=0;N<g;N++){const B=this.rows[N].getTextString();B&&(I=N+1,E?S.push("Row "+I+": '"+B+"'"):S.push(B.trim()))}return S.length>0&&(x=E?"["+S.join(" | ")+"]":S.join(`
`)),x}getTextAndFormat(){return this.rows}}class y{constructor(E,S){let x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new n;this.chNr=E,this.outputFilter=S,this.mode=null,this.displayedMemory=new p(x),this.nonDisplayedMemory=new p(x),this.lastOutputScreen=new p(x),this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=x,this.logger.log(2,"new Cea608Channel("+this.chNr+")")}reset(){var E,S;this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),(S=(E=this.outputFilter)===null||E===void 0?void 0:E.reset)===null||S===void 0||S.call(E),this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}setPAC(E){this.writeScreen.setPAC(E)}setBkgData(E){this.writeScreen.setBkgData(E)}setMode(E){E!==this.mode&&(this.mode=E,this.logger.log(2,()=>"MODE="+E),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.setRollUpRows(null),this.nonDisplayedMemory.setRollUpRows(null)),this.mode=E)}insertChars(E){for(let x=0;x<E.length;x++)this.writeScreen.insertChar(E[x]);const S=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>S+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(E){this.logger.log(2,"RU("+E+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(E)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const E=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=E,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(E){this.logger.log(2,"TO("+E+") - Tab Offset"),this.writeScreen.moveCursor(E)}ccMIDROW(E){const S={flash:!1};if(S.underline=E%2==1,S.italics=E>=46,S.italics)S.foreground="white";else{const x=Math.floor(E/2)-16,I=["white","green","blue","cyan","red","yellow","magenta"];S.foreground=I[x]}this.logger.log(2,"MIDROW: "+JSON.stringify(S)),this.writeScreen.setPen(S)}outputDataUpdate(){let E=arguments.length>0&&arguments[0]!==void 0&&arguments[0];const S=this.logger.time;S!==null&&this.outputFilter&&(this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,S,this.lastOutputScreen),E&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:S):this.cueStartTime=S,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(E){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,E,this.displayedMemory),this.cueStartTime=E))}}const T=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];function b(_,E,S){return S.a===_&&S.b===E}const w=function(_){const E=[];for(let S=0;S<_.length;S++)E.push(_[S].toString(16));return E},R={17:2,18:4,21:6,22:8,23:10,19:13,20:15},M={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Y={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Z={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14};function ye(_,E,S){S.a=_,S.b=E}class Re{constructor(E,S,x){this.currentChannel=0,this.cmdHistory={a:null,b:null},this.lastTime=null;const I=this.logger=new n;this.channels=[null,new y(E,S,I),new y(E+1,x,I)]}addData(E,S){this.lastTime=E,this.logger.time=E;for(let x=0;x<S.length;x+=2){const I=127&S[x],N=127&S[x+1];let B=!1,G=null;if(this.lastTime!==null&&(E=this.lastTime+.5*x*1001/3e4,this.logger.time=E),I===0&&N===0)continue;this.logger.log(3,()=>"["+w([S[x],S[x+1]])+"] -> ("+w([I,N])+")");const C=this.cmdHistory;if(I>=16&&I<=31){if(b(I,N,C)){ye(null,null,C),this.logger.log(3,()=>"Repeated command ("+w([I,N])+") is dropped");continue}ye(I,N,this.cmdHistory),B=this.parseCmd(I,N),B||(B=this.parseMidrow(I,N)),B||(B=this.parsePAC(I,N)),B||(B=this.parseBackgroundAttributes(I,N))}else ye(null,null,C);if(!B&&(G=this.parseChars(I,N),G.length)){const K=this.currentChannel;K&&K>0?this.channels[K].insertChars(G):this.logger.log(2,"No channel found yet. TEXT-MODE?")}B||G||this.logger.log(2,()=>"Couldn't parse cleaned data "+w([I,N])+" orig: "+w([S[x],S[x+1]]))}}parseCmd(E,S){if(!((E===20||E===28||E===21||E===29)&&S>=32&&S<=47||(E===23||E===31)&&S>=33&&S<=35))return!1;const x=E===20||E===21||E===23?1:2,I=this.channels[x];return E===20||E===21||E===28||E===29?S===32?I.ccRCL():S===33?I.ccBS():S===34?I.ccAOF():S===35?I.ccAON():S===36?I.ccDER():S===37?I.ccRU(2):S===38?I.ccRU(3):S===39?I.ccRU(4):S===40?I.ccFON():S===41?I.ccRDC():S===42?I.ccTR():S===43?I.ccRTD():S===44?I.ccEDM():S===45?I.ccCR():S===46?I.ccENM():S===47&&I.ccEOC():I.ccTO(S-32),this.currentChannel=x,!0}parseMidrow(E,S){let x=0;if((E===17||E===25)&&S>=32&&S<=47){if(x=E===17?1:2,x!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const I=this.channels[x];return!!I&&(I.ccMIDROW(S),this.logger.log(3,()=>"MIDROW ("+w([E,S])+")"),!0)}return!1}parsePAC(E,S){let x;if(!((E>=17&&E<=23||E>=25&&E<=31)&&S>=64&&S<=127||(E===16||E===24)&&S>=64&&S<=95))return!1;const I=E<=23?1:2;x=S>=64&&S<=95?I===1?Y[E]:Z[E]:I===1?R[E]:M[E];const N=this.channels[I];return!!N&&(N.setPAC(this.interpretPAC(x,S)),this.currentChannel=I,!0)}interpretPAC(E,S){let x;const I={color:null,italics:!1,indent:null,underline:!1,row:E};return x=S>95?S-96:S-64,I.underline=!(1&~x),x<=13?I.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(x/2)]:x<=15?(I.italics=!0,I.color="white"):I.indent=4*Math.floor((x-16)/2),I}parseChars(E,S){let x,I=[],N=null;if(E>=25?(x=2,N=E-8):(x=1,N=E),N>=17&&N<=19){let B;B=N===17?S+80:N===18?S+112:S+144,this.logger.log(2,()=>"Special char '"+f(B)+"' in channel "+x),I=[B]}else E>=32&&E<=127&&(I=S===0?[E]:[E,S]);return I&&this.logger.log(3,()=>"Char codes =  "+w(I).join(",")),I}parseBackgroundAttributes(E,S){if(!((E===16||E===24)&&S>=32&&S<=47||(E===23||E===31)&&S>=45&&S<=47))return!1;let x;const I={};E===16||E===24?(x=Math.floor((S-32)/2),I.background=T[x],S%2==1&&(I.background=I.background+"_semi")):S===45?I.background="transparent":(I.foreground="black",S===47&&(I.underline=!0));const N=E<=23?1:2;return this.channels[N].setBkgData(I),!0}reset(){for(let E=0;E<Object.keys(this.channels).length;E++){const S=this.channels[E];S&&S.reset()}ye(null,null,this.cmdHistory)}cueSplitAtTime(E){for(let S=0;S<this.channels.length;S++){const x=this.channels[S];x&&x.cueSplitAtTime(E)}}}var F=t(5212),k=t(8854),j={TCP_CONNECTION:"TcpList",HTTP_REQUEST:"HttpList",TRACK_SWITCH:"RepSwitchList",BUFFER_LEVEL:"BufferLevel",BUFFER_LOADED:"bufferLoaded",ABANDON_LOAD:"abandonload",ALLOW_LOAD:"allowload",BUFFER_EMPTY:"bufferStalled",BUFFER_STATE:"BufferState",DVR_INFO:"DVRInfo",DROPPED_FRAMES:"DroppedFrames",SCHEDULING_INFO:"SchedulingInfo",REQUESTS_QUEUE:"RequestsQueue",MANIFEST_UPDATE:"ManifestUpdate",MANIFEST_UPDATE_STREAM_INFO:"ManifestUpdatePeriodInfo",MANIFEST_UPDATE_TRACK_INFO:"ManifestUpdateRepresentationInfo",PLAY_LIST:"PlayList",DVB_ERRORS:"DVBErrors",HTTP_REQUEST_DVB_REPORTING_TYPE:"DVBReporting"},oe=t(8850),L=t(3621),Ee=t(138),Be=t(649),pe=t(1191);function ct(){const _=this.context,E=(0,oe.default)(_).getInstance();let S,x,I,N,B,G,C,K,V,D,z,$,ie,se,ae,ce,de,ge,we,ne,U,X,J,me,Ie;function Te(){ee(),se=!1,D=0,z=0,de=0,J=!1,ge=!0,we=!1,me=!1,ne=NaN,ce=NaN,C&&(E.off(L.default.DATA_UPDATE_COMPLETED,St,S),E.off(L.default.MANIFEST_UPDATED,Qt,S),E.off(L.default.STREAMS_COMPOSED,nn,S),E.off(pe.default.PLAYBACK_ENDED,Yt,S),E.off(pe.default.STREAM_INITIALIZING,at,S),E.off(pe.default.REPRESENTATION_SWITCH,At,S),E.off(pe.default.BUFFER_LEVEL_STATE_CHANGED,hn,S),ft(),C.removeEventListener("canplay",Bt),C.removeEventListener("canplaythrough",Ht),C.removeEventListener("play",In),C.removeEventListener("waiting",Ot),C.removeEventListener("playing",Zt),C.removeEventListener("pause",cn),C.removeEventListener("error",tn),C.removeEventListener("seeking",Nn),C.removeEventListener("seeked",Cn),C.removeEventListener("timeupdate",We),C.removeEventListener("progress",pt),C.removeEventListener("ratechange",gt),C.removeEventListener("loadedmetadata",vt),C.removeEventListener("loadeddata",sn),C.removeEventListener("stalled",on),C.removeEventListener("ended",Tn),C.removeEventListener("volumechange",yt)),V=null,C=null,$=null,ie=null}function xe(){return parseFloat((Oe(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)-re()).toFixed(5))}function Oe(Et){const Ne=Et||$;return Ne.start+Ne.duration}function je(){let Et=arguments.length>0&&arguments[0]!==void 0&&arguments[0];$&&C&&C.getElement()?(Et&&ie&&_e(re()),C.play()):se=!0}function ee(){$&&C&&C.pause()}function te(Et){let Ne=arguments.length>1&&arguments[1]!==void 0&&arguments[1],nt=arguments.length>2&&arguments[2]!==void 0&&arguments[2],_t=arguments.length>3&&arguments[3]!==void 0&&arguments[3];$&&C&&C.getElement()&&Et!==(isNaN(ne)?C.getTime():ne)&&(U=nt===!0,U||(ne=Et),x.info("Requesting seek to time: "+Et+(U?" (internal)":"")),ie&&_t&&_e(Et),C.setCurrentTime(Et,Ne))}function Ae(){if(!$||!C||!ie)return;const Et=I&&I.hasVideoTrack()?F.default.VIDEO:F.default.AUDIO,Ne=B.getCurrentDVRInfo(Et);return Ne&&Ne.range?Ne.range.end:0}function _e(Et){const Ne=new Date(K.getClientReferenceTime()),nt=G.getRegularPeriods()[0];D=K.calcPresentationTimeFromWallTime(Ne,nt)-Et}function re(){return $&&C?C.getTime():null}function he(){return $&&C?C.isPaused():null}function ve(){return $&&C?C.isSeeking():null}function fe(){return $&&C?C.isStalled():null}function ke(){return $&&C?C.getPlaybackRate():null}function Ce(){return $&&C?C.getEnded():null}function Ve(){return ie}function Ke(){let Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(he()||!ie||C.getReadyState()===0||ve()||J)return;Et||(Et=I.hasVideoTrack()?F.default.VIDEO:F.default.AUDIO);const Ne=re(),nt=function(_t,rt){const Ft=B.getCurrentDVRInfo(rt),Vt=Ft?Ft.range:null;let _n;return Vt?(_n=_t>Vt.end?Math.max(Vt.end-D,Vt.start):_t>0&&_t+.25<Vt.start&&Math.abs(_t-Vt.start)<31536e4?we?Math.max(Vt.end-D,Vt.start):Vt.start:_t,_n):NaN}(Ne,Et);!isNaN(nt)&&nt!==Ne&&!ve()&&(fe()||X||C.getReadyState()===1)&&(x.debug(`UpdateCurrentTime: Seek to actual time: ${nt} from currentTime: ${Ne}`),te(nt,!1,!1))}function st(){V===null&&(V=setInterval(()=>{(function(){if(E.trigger(L.default.WALLCLOCK_TIME_UPDATED,{isDynamic:ie,time:new Date}),Ve()){const Et=Date.now();(isNaN(ce)||Et>ce+Ie.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(I.addDVRMetric(),he()?function(){const Ne=Date.now();(!ae||Ne>ae+500)&&(ae=Ne,We())}():Ke(),ce=Et)}})()},Ie.get().streaming.wallclockTimeUpdateInterval))}function ft(){clearInterval(V),V=null}function St(Et){const Ne=Et.currentRepresentation,nt=Ne?Ne.mediaInfo.streamInfo:null;nt!==null&&$.id===nt.id&&($=nt)}function Bt(){E.trigger(L.default.CAN_PLAY)}function Ht(){E.trigger(L.default.CAN_PLAY_THROUGH)}function hn(Et){Et.streamId===I.getActiveStreamInfo().id&&(X=Et.state===j.BUFFER_EMPTY,Ie.get().streaming.buffer.setStallState&&C.setStallState(Et.mediaType,Et.state===j.BUFFER_EMPTY))}function In(){x.info("Native video element event: play"),Ke(),st(),E.trigger(L.default.PLAYBACK_STARTED,{startTime:re()})}function Ot(){x.info("Native video element event: waiting"),E.trigger(L.default.PLAYBACK_WAITING,{playingTime:re()})}function Zt(){x.info("Native video element event: playing"),U=!1,E.trigger(L.default.PLAYBACK_PLAYING,{playingTime:re()})}function cn(){x.info("Native video element event: pause"),E.trigger(L.default.PLAYBACK_PAUSED,{ended:Ce()})}function Nn(){if(U)return;let Et=re();isNaN(ne)||ne===Et||(Et=ne),ne=NaN,x.info("Seeking to: "+Et),st(),E.trigger(L.default.PLAYBACK_SEEKING,{seekTime:Et,streamId:$.id})}function Cn(){x.info("Native video element event: seeked"),U=!1,E.trigger(L.default.PLAYBACK_SEEKED)}function We(){$&&E.trigger(L.default.PLAYBACK_TIME_UPDATED,{timeToEnd:xe(),time:re(),streamId:$.id})}function pt(){E.trigger(L.default.PLAYBACK_PROGRESS,{streamId:$.id})}function gt(){const Et=ke();x.info("Native video element event: ratechange: ",Et),E.trigger(L.default.PLAYBACK_RATE_CHANGED,{playbackRate:Et})}function vt(){x.info("Native video element event: loadedmetadata"),E.trigger(L.default.PLAYBACK_METADATA_LOADED),st()}function sn(){x.info("Native video element event: loadeddata"),E.trigger(L.default.PLAYBACK_LOADED_DATA)}function Tn(){x.info("Native video element event: ended"),ee(),ft();const Et=I?I.getActiveStreamInfo():null;Et&&E.trigger(L.default.PLAYBACK_ENDED,{isLast:Et.isLast})}function yt(){E.trigger(L.default.PLAYBACK_VOLUME_CHANGED)}function Yt(Et){if(V&&Et.isLast){x.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");const Ne=Et.seekTime?Et.seekTime:Oe();C.setCurrentTime(Ne),ee(),ft()}}function tn(Et){const Ne=Et.target||Et.srcElement;E.trigger(L.default.PLAYBACK_ERROR,{error:Ne.error})}function jt(){ie=!1}function on(Et){E.trigger(L.default.PLAYBACK_STALLED,{e:Et})}function at(Et){var Ne;(Ne=Et.mediaInfo)&&Ne.supplementalProperties&&Ne.supplementalProperties.find(nt=>nt.schemeIdUri===F.default.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME)&&(x.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),we=!0)}function At(Et){const Ne=I.getActiveStreamInfo();Et&&Ne&&Et.currentRepresentation&&Et.streamId&&Et.streamId===Ne.id&&Et.mediaType&&(Et.mediaType===F.default.VIDEO||Et.mediaType===F.default.AUDIO)&&(ge=Et.currentRepresentation.availabilityTimeComplete,we=!ge,we&&!me&&(me=!0))}function Qt(){J=!0}function nn(){J=!1}return S={computeAndSetLiveDelay:function(Et,Ne){let nt,_t,rt;const Ft=!isNaN(Et)&&isFinite(Et)?Et:NaN;let Vt=G.getSuggestedPresentationDelay();const _n=N.getServiceDescriptionSettings();return nt=isNaN(Ie.get().streaming.delay.liveDelay)?Ie.get().streaming.delay.liveDelayFragmentCount===null||isNaN(Ie.get().streaming.delay.liveDelayFragmentCount)||isNaN(Ft)?_n&&!isNaN(_n.liveDelay)&&_n.liveDelay>0?_n.liveDelay:Ie.get().streaming.delay.useSuggestedPresentationDelay===!0&&Vt!==null&&!isNaN(Vt)&&Vt>0?Vt:isNaN(Ft)?Ne&&!isNaN(Ne.minBufferTime)?4*Ne.minBufferTime:4*$.manifestInfo.minBufferTime:4*Ft:Ft*Ie.get().streaming.delay.liveDelayFragmentCount:Ie.get().streaming.delay.liveDelay,rt=G.getAvailabilityStartTime(),rt!==null&&(de=rt),_t=Ne&&Ne.dvrWindowSize>0?Math.min(nt,Ne.dvrWindowSize):nt,D=_t,z=_t,_t},getAvailabilityStartTime:function(){return de},getBufferLevel:function(){let Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Ne=null;return I.getActiveStreamProcessors().forEach(nt=>{if(!Et||Et.length===0||Et.indexOf(nt.getType())===-1){const _t=nt.getBufferLevel();Ne=Ne===null?_t:Math.min(Ne,_t)}}),Ne},getCurrentLiveLatency:function(){if(!ie||isNaN(de))return NaN;let Et=re();if(isNaN(Et)||Et===0)return 0;const Ne=new Date().getTime()+1e3*K.getClientTimeOffset();return Math.max(((Ne-de-1e3*Et)/1e3).toFixed(3),0)},getEnded:Ce,getInitialCatchupModeActivated:function(){return me},getIsDynamic:Ve,getIsManifestUpdateInProgress:function(){return J},getLiveDelay:function(){return D},getLowLatencyModeEnabled:function(){return we},getOriginalLiveDelay:function(){return z},getPlaybackRate:ke,getPlaybackStalled:function(){return X},getPlayedRanges:function(){return $&&C?C.getPlayedRanges():null},getStreamController:function(){return I},getStreamEndTime:Oe,getTime:re,getTimeToStreamEnd:xe,initialize:function(Et,Ne){$=Et,Ne!==!0&&(C.addEventListener("canplay",Bt),C.addEventListener("canplaythrough",Ht),C.addEventListener("play",In),C.addEventListener("waiting",Ot),C.addEventListener("playing",Zt),C.addEventListener("pause",cn),C.addEventListener("error",tn),C.addEventListener("seeking",Nn),C.addEventListener("seeked",Cn),C.addEventListener("timeupdate",We),C.addEventListener("progress",pt),C.addEventListener("ratechange",gt),C.addEventListener("loadedmetadata",vt),C.addEventListener("loadeddata",sn),C.addEventListener("stalled",on),C.addEventListener("ended",Tn),C.addEventListener("volumechange",yt),ie=$.manifestInfo.isDynamic,X=!1,U=!1,E.on(L.default.DATA_UPDATE_COMPLETED,St,S),E.on(L.default.MANIFEST_UPDATED,Qt,S),E.on(L.default.STREAMS_COMPOSED,nn,S),E.on(pe.default.PLAYBACK_ENDED,Yt,S,{priority:oe.default.EVENT_PRIORITY_HIGH}),E.on(pe.default.STREAM_INITIALIZING,at,S),E.on(pe.default.REPRESENTATION_SWITCH,At,S),E.on(pe.default.BUFFER_LEVEL_STATE_CHANGED,hn,S),E.on(pe.default.DYNAMIC_TO_STATIC,jt,S),se&&(se=!1,je()))},isPaused:he,isProgressing:function(){let Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:500;return new Promise(Ne=>{let nt=-1,_t=null;const rt=Vt=>{clearTimeout(_t),_t=null,E.off(pe.default.PLAYBACK_TIME_UPDATED,Ft,S),Ne(Vt)},Ft=Vt=>{nt<0?nt=Vt.time:Vt.time>nt+.1&&rt(!0)};_t=setTimeout(()=>{rt(!1)},Et),E.on(pe.default.PLAYBACK_TIME_UPDATED,Ft,S)})},isSeeking:ve,isStalled:fe,pause:ee,play:je,reset:Te,seek:te,seekToCurrentLive:function(){let Et=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Ne=arguments.length>1&&arguments[1]!==void 0&&arguments[1],nt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const _t=Ae();_t!==0&&te(_t-D,Et,Ne,nt)},seekToOriginalLive:function(){let Et=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Ne=arguments.length>1&&arguments[1]!==void 0&&arguments[1],nt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const _t=Ae();_t!==0&&(D=z,te(_t-D,Et,Ne,nt))},setConfig:function(Et){Et&&(Et.streamController&&(I=Et.streamController),Et.serviceDescriptionController&&(N=Et.serviceDescriptionController),Et.dashMetrics&&(B=Et.dashMetrics),Et.adapter&&(G=Et.adapter),Et.videoModel&&(C=Et.videoModel),Et.timelineConverter&&(K=Et.timelineConverter),Et.settings&&(Ie=Et.settings))},updateCurrentTime:Ke},x=(0,Be.default)(_).getInstance().getLogger(S),Te(),S}ct.__dashjs_factory_name="PlaybackController";var Ye=Ee.default.getSingletonFactory(ct),Le=t(7568);class Je{constructor(E){this.action=Je.ACTION_DOWNLOAD,this.availabilityEndTime=null,this.availabilityStartTime=null,this.bandwidth=NaN,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.duration=NaN,this.endDate=null,this.firstByteDate=null,this.index=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.range=null,this.representation=null,this.responseType="arraybuffer",this.retryAttempts=0,this.serviceLocation=null,this.startDate=null,this.startTime=NaN,this.timescale=NaN,this.type=null,this.url=E||null,this.wallStartTime=null}isInitializationRequest(){return this.type&&this.type===Le.HTTPRequest.INIT_SEGMENT_TYPE}setInfo(E){this.type=E&&E.init?Le.HTTPRequest.INIT_SEGMENT_TYPE:Le.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=E&&E.url?E.url:null,this.range=E&&E.range?E.range.start+"-"+E.range.end:null,this.mediaType=E&&E.mediaType?E.mediaType:null,this.representation=E&&E.representation?E.representation:null}}Je.ACTION_DOWNLOAD="download",Je.ACTION_COMPLETE="complete";var Ge=Je;const tt="loading",Ze="executed",Me="failed";function $e(_){const E=(_=_||{}).eventBus,S=_.events,x=_.dashMetrics,I=_.fragmentLoader,N=_.debug,B=_.streamInfo,G=_.type;let C,K,V,D;function z(U){return!!U&&function(X){let J=!1;return X.some(me=>{if(Ie=U,Te=me,!isNaN(Ie.index)&&Ie.startTime===Te.startTime&&Ie.adaptationIndex===Te.adaptationIndex&&Ie.type===Te.type||function(xe,Oe){return xe.representation.id===Oe.representation.id}(U,me)||function(xe,Oe){return xe.action===Ge.ACTION_COMPLETE&&xe.action===Oe.action}(U,me))return J=!0,J;var Ie,Te}),J}(V)}function $(U){return isNaN(U.duration)?.25:Math.min(U.duration/8,.5)}function ie(U){V=V.filter(X=>{const J=$(X);return isNaN(X.startTime)||U!==void 0&&X.startTime>=U-J})}function se(U,X){X<=U+.5||(V=V.filter(J=>{const me=$(J);return isNaN(J.startTime)||J.startTime>=X-me||isNaN(J.duration)||J.startTime+J.duration<=U+me}))}function ae(U,X,J){for(let me=U.length-1;me>=0;me--){const Ie=U[me],Te=Ie.startTime,xe=Te+Ie.duration;if(J=isNaN(J)?$(Ie):J,!isNaN(Te)&&!isNaN(xe)&&X+J>=Te&&X-J<xe||isNaN(Te)&&isNaN(X))return Ie}return null}function ce(U,X){x.addSchedulingInfo(U,X),x.addRequestsQueue(U.mediaType,D,V)}function de(U){U.sender===I&&(D.splice(D.indexOf(U.request),1),U.response&&!U.error&&V.push(U.request),ce(U.request,U.error?Me:Ze),E.trigger(S.FRAGMENT_LOADING_COMPLETED,{request:U.request,response:U.response,error:U.error,sender:this},{streamId:B.id,mediaType:G}))}function ge(U){U.sender===I&&E.trigger(S.FRAGMENT_LOADING_PROGRESS,{request:U.request,response:U.response,error:U.error,sender:this},{streamId:B.id,mediaType:G})}function we(U){U.sender===I&&E.trigger(S.FRAGMENT_LOADING_ABANDONED,{request:U.request},{streamId:B.id,mediaType:G})}function ne(){V=[],D=[],I&&I.resetInitialSettings()}return C={abortRequests:function(){K.debug("abort requests"),I.abort(),D=[]},executeRequest:function(U){U.action===Ge.ACTION_DOWNLOAD?(ce(U,tt),D.push(U),function(X){E.trigger(S.FRAGMENT_LOADING_STARTED,{request:X},{streamId:B.id,mediaType:G}),I.load(X)}(U)):K.warn("Unknown request action.")},getRequests:function(U){const X=U?U.state instanceof Array?U.state:[U.state]:[];let J=[];return X.forEach(me=>{const Ie=function(Te){let xe;switch(Te){case tt:xe=D;break;case Ze:xe=V;break;default:xe=[]}return xe}(me);J=J.concat(function(Te,xe){return xe.hasOwnProperty("time")?[ae(Te,xe.time,xe.threshold)]:Te.filter(Oe=>{for(const je in xe)if(je!=="state"&&xe.hasOwnProperty(je)&&Oe[je]!=xe[je])return!1;return!0})}(Ie,U))}),J},getStreamId:function(){return B.id},getType:function(){return G},isFragmentLoaded:z,isFragmentLoadedOrPending:function(U){let X,J=!1,me=0;if(J=z(U),!J)for(me=0;me<D.length;me++)X=D[me],U.url===X.url&&U.startTime===X.startTime&&(J=!0);return J},removeExecutedRequestsAfterTime:function(U){V=V.filter(X=>isNaN(X.startTime)||U!==void 0&&X.startTime<U)},removeExecutedRequestsBeforeTime:ie,reset:function(){E.off(S.LOADING_COMPLETED,de,this),E.off(S.LOADING_DATA_PROGRESS,ge,this),E.off(S.LOADING_ABANDONED,we,this),I&&I.reset(),ne()},resetInitialSettings:ne,syncExecutedRequestsWithBufferedRange:function(U,X){if(!U||U.length===0)return void ie();let J=0;for(let me=0,Ie=U.length;me<Ie;me++)se(J,U.start(me)),J=U.end(me);X>0&&se(J,X)}},K=N.getLogger(C),ne(),E.on(S.LOADING_COMPLETED,de,C),E.on(S.LOADING_DATA_PROGRESS,ge,C),E.on(S.LOADING_ABANDONED,we,C),C}$e.__dashjs_factory_name="FragmentModel";const mt=Ee.default.getClassFactory($e);mt.FRAGMENT_MODEL_LOADING=tt,mt.FRAGMENT_MODEL_EXECUTED=Ze,mt.FRAGMENT_MODEL_CANCELED="canceled",mt.FRAGMENT_MODEL_FAILED=Me,Ee.default.updateClassFactory($e.__dashjs_factory_name,mt);var Dt=mt,Pe=t(1944),Fe=t(8748);class ut extends Fe.default{constructor(){super(),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.NO_SUPPORTED_KEY_IDS=36,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",this.NO_SUPPORTED_KEY_IDS_MESSAGE="All possible Adaptation Sets have an invalid key status"}}var W=new ut,Q=t(8261);function P(_){const E=this.context,S=(0,Q.default)(E).getInstance(),x=_.textController,I=_.eventBus;let N,B,G,C,K,V,D=[],z=[],$=!1,ie=_.mediaSource,se=null;function ae(Te){return Te.mimeType+';codecs="'+Te.codecs+'"'}function ce(Te){return C=x.getTextSourceBuffer(Te),Promise.resolve()}function de(){if(typeof C.addEventListener=="function")try{C.addEventListener("updateend",J,!1),C.addEventListener("error",me,!1),C.addEventListener("abort",me,!1)}catch{V=setInterval(J,50)}else V=setInterval(J,50)}function ge(){try{typeof C.removeEventListener=="function"&&(C.removeEventListener("updateend",J,!1),C.removeEventListener("error",me,!1),C.removeEventListener("abort",me,!1)),clearInterval(V)}catch(Te){G.error(Te)}}function we(Te){return new Promise(xe=>{C&&S.get().streaming.buffer.useAppendWindow?Ie(()=>{try{if(!C)return void xe();let Oe=ie.duration,je=0;Te&&!isNaN(Te.start)&&!isNaN(Te.duration)&&isFinite(Te.duration)&&(Oe=Te.start+Te.duration),Te&&!isNaN(Te.start)&&(je=Te.start),C.appendWindowEnd===Oe&&C.appendWindowStart===je||(C.appendWindowStart=0,C.appendWindowEnd=Oe+.01,C.appendWindowStart=Math.max(je-.1,0),G.debug(`Updated append window for ${K.type}. Set start to ${C.appendWindowStart} and end to ${C.appendWindowEnd}`)),xe()}catch{G.warn("Failed to set append window"),xe()}}):xe()})}function ne(Te){return new Promise(xe=>{C?Ie(()=>{try{C.timestampOffset===Te||isNaN(Te)||(C.timestampOffset=Te,G.debug(`Set MSE timestamp offset to ${Te}`)),xe()}catch{xe()}}):xe()})}function U(){if(!$&&z.length>0){$=!0;const Te=z[0];z.splice(0,1);const xe=function(){$=!1,z.length>0&&U.call(this),Te&&Te.data&&Te.data.segmentType&&Te.data.segmentType!==Le.HTTPRequest.INIT_SEGMENT_TYPE&&delete Te.data.bytes,Te.promise.resolve({chunk:Te.data})};try{if(se=Te.request,Te.data.bytes.byteLength===0)xe.call(this);else{try{G.debug(`Appending ${Te.data.segmentType} from period ${Te.data.streamId} to buffer. Request URL: ${Te.request.url}, Representation: ID: ${Te.data.representation.id}, bitrate: ${Te.data.representation.bitrateInKbit}`)}catch{}C.appendBuffer?C.appendBuffer(Te.data.bytes):C.append(Te.data.bytes,Te.data),Ie(xe.bind(this))}}catch(Oe){G.fatal('SourceBuffer append failed "'+Oe+'"'),z.length>0?U():$=!1,delete Te.data.bytes,Te.promise.reject({chunk:Te.data,error:new Pe.default(Oe.code,Oe.message)})}}}function X(){D.length>0&&!C.updating&&(D.shift()(),X())}function J(){C.updating||X()}function me(Te){const xe=Te.target||{};(function(Oe,je){let ee=je||{};I.trigger(Oe,ee,{streamId:K.streamInfo.id,mediaType:B})})(L.default.SOURCE_BUFFER_ERROR,{error:xe,lastRequestAppended:se})}function Ie(Te){try{D.push(Te),C.updating||X()}catch(xe){G.error(xe)}}return N={abort:function(){return new Promise(Te=>{try{z=[],ie.readyState==="open"?Ie(()=>{try{C&&C.abort(),Te()}catch{Te()}}):(C&&C.setTextTrack&&ie.readyState==="ended"&&C.abort(),Te())}catch{Te()}})},abortBeforeAppend:function(){return new Promise(Te=>{Ie(()=>{const xe=C.appendWindowStart,Oe=C.appendWindowEnd;C&&(C.abort(),C.appendWindowStart=xe,C.appendWindowEnd=Oe),Te()})})},append:function(Te){let xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise((Oe,je)=>{Te?(z.push({data:Te,promise:{resolve:Oe,reject:je},request:xe}),Ie(U.bind(this))):je({chunk:Te,error:new Pe.default(W.APPEND_ERROR_CODE,W.APPEND_ERROR_MESSAGE)})})},changeType:function(Te){const xe=ae(Te);return new Promise(Oe=>{Ie(()=>{C.changeType&&(G.debug(`Changing SourceBuffer codec to ${xe}`),C.changeType(xe)),Oe()})})},getAllBufferRanges:function(){try{return C.buffered}catch(Te){return G.error("getAllBufferRanges exception: "+Te.message),null}},getBuffer:function(){return C},getType:function(){return B},initializeForFirstUse:function(Te,xe){K=Te;const Oe=Te.streamInfo;B=K.type;const je=xe?ae(xe):Te.codec;try{if(je.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return ce(Oe);C=ie.addSourceBuffer(je),de();const ee=[];return ee.push(we(K.streamInfo)),xe&&xe.mseTimeOffset!==void 0&&ee.push(ne(xe.mseTimeOffset)),Promise.all(ee)}catch(ee){return K.type==F.default.TEXT&&!K.isFragmented||je.indexOf('codecs="stpp')!==-1||je.indexOf('codecs="vtt')!==-1||je.indexOf("text/vtt")!==-1?ce(Oe):Promise.reject(ee)}},initializeForStreamSwitch:function(Te,xe,Oe){K=Te,B=K.type,function(je){C=je.getBuffer()}(Oe),de()},remove:function(Te){return new Promise((xe,Oe)=>{const je=Te.start,ee=Te.end;je>=0&&ee>je?Ie(function(){try{C.remove(je,ee),Ie(function(){xe({from:je,to:ee,unintended:!1}),Te.resolve&&Te.resolve()})}catch(te){Oe({from:je,to:ee,unintended:!1,error:new Pe.default(W.REMOVE_ERROR_CODE,W.REMOVE_ERROR_MESSAGE)}),Te.reject&&Te.reject(te)}}):xe()})},removeEventListeners:ge,reset:function(){if(C){try{D=[],ge(),$=!1,z=[],C.getClassName&&C.getClassName()==="TextSourceBuffer"||(G.debug("Removing sourcebuffer from media source"),ie.removeSourceBuffer(C))}catch{}C=null}se=null},updateAppendWindow:we,updateTimestampOffset:ne},G=(0,Be.default)(E).getInstance().getLogger(N),N}P.__dashjs_factory_name="SourceBufferSink";var H=Ee.default.getClassFactory(P);function be(_){const E=this.context;let S,x,I,N=[],B=_;function G(C,K){return N=N.filter(V=>!((isNaN(K)||V.start<K)&&(isNaN(C)||V.end>C))),Promise.resolve()}return S={getAllBufferRanges:function(){let C=[];for(let V=0;V<N.length;V++){let D=N[V];C.length===0||D.start>C[C.length-1].end?C.push({start:D.start,end:D.end}):C[C.length-1].end=D.end}const K={start:function(V){return C[V].start},end:function(V){return C[V].end}};return Object.defineProperty(K,"length",{get:function(){return C.length}}),K},append:function(C){return C.segmentType!=="InitializationSegment"?(N.push(C),N.sort(function(K,V){return K.start-V.start}),I=null):I=C,x.debug("PreBufferSink appended chunk s: "+C.start+"; e: "+C.end),B&&B({chunk:C}),Promise.resolve()},remove:G,abort:function(){return Promise.resolve()},discharge:function(C,K){const V=function(D,z){return N.filter($=>(isNaN(z)||$.start<z)&&(isNaN(D)||$.end>D))}(C,K);return I&&(V.push(I),I=null),G(C,K),V},reset:function(){N=[],I=null,B=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(C){C()},getBuffer:function(){return this}},x=(0,Be.default)(E).getInstance().getLogger(S),S}be.__dashjs_factory_name="PreBufferSink";var ue=Ee.default.getClassFactory(be);function Ue(){let _={};return{save:function(E){const S=E.streamId,x=E.representation.id;_[S]=_[S]||{},_[S][x]=E},extract:function(E,S){return _&&_[E]&&_[E][S]?_[E][S]:null},reset:function(){_={}}}}Ue.__dashjs_factory_name="InitCache";var et=Ee.default.getSingletonFactory(Ue);const qe=.01,Xe="BufferController";function He(_){const E=(_=_||{}).capabilities,S=this.context,x=(0,oe.default)(S).getInstance(),I=_.fragmentModel,N=_.playbackController,B=_.representationController,G=_.settings,C=_.streamInfo,K=_.textController,V=_.type;let D,z,$,ie,se,ae,ce,de,ge,we,ne,U,X,J,me,Ie,Te,xe,Oe,je,ee;function te(at){let At=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise((Qt,nn)=>{ae=at,ge&&At&&typeof ge.discharge=="function"?(we=ge,Ae(At).then(()=>{Qt()}).catch(Et=>{nn(Et)})):Qt()})}function Ae(at){let At=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Qt=arguments.length>2?arguments[2]:void 0;return new Promise((nn,Et)=>{xe&&at?ae?(ne=!1,function(Ne,nt,_t){return new Promise(rt=>{ge=H(S).create({mediaSource:ae,textController:K,eventBus:x}),function(Ft,Vt,_n){const An=B.getCurrentRepresentation();return Vt&&Vt[V]&&(V===F.default.VIDEO||V===F.default.AUDIO)?function(kn,nr,yr,Ki){ge.initializeForStreamSwitch(kn,nr,yr[V]);const oi=[];return oi.push(ge.abortBeforeAppend()),oi.push(gt()),oi.push(Ce(nr,Ki)),nr&&nr.mseTimeOffset!==void 0&&oi.push(pt(nr)),Promise.allSettled(oi)}(Ft,An,Vt,_n):function(kn,nr){return ge.initializeForFirstUse(kn,nr)}(Ft,An)}(Ne,nt,_t).then(()=>pt(B.getCurrentRepresentation())).then(()=>{rt(ge)}).catch(Ft=>{z.warn("Caught error on create SourceBuffer: "+Ft),rt(ge)})})}(at,At,Qt).then(Ne=>{nn(Ne)}).catch(Ne=>{Et(Ne)})):(ne=!0,function(){return new Promise((Ne,nt)=>{ge=ue(S).create(fe.bind(this)),pt(B.getCurrentRepresentation()).then(()=>{Ne(ge)}).catch(()=>{nt()})})}().then(Ne=>{nn(Ne)}).catch(Ne=>{Et(Ne)})):nn(null)})}function _e(at){G.get().streaming.cacheInitSegments&&(z.info("Init fragment finished loading saving to",V+"'s init cache"),xe.save(at.chunk)),z.debug(`Appending init fragment for type ${V}, representationId ${at.chunk.representation.id} and bandwidth ${at.chunk.representation.bandwidth}`),he(at.chunk)}function re(at){he(at.chunk,at.request)}function he(at){let At=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;ge&&(ge.append(at,At).then(Qt=>{fe(Qt)}).catch(Qt=>{fe(Qt)}),at.representation.mediaInfo.type===F.default.VIDEO&&jt(L.default.VIDEO_CHUNK_RECEIVED,{chunk:at}))}function ve(at){if(at&&at.length>0)for(let At=0,Qt=at.length;At<Qt;At++)z.debug("Buffered range: "+at.start(At)+" - "+at.end(At)+", currentTime = ",N.getTime())}function fe(at){if(at.error)return at.error.code===22&&function(){if(Te=!0,se=.8*yt(),z.warn("Quota exceeded, Critical Buffer: "+se),se>0){const nn=Math.max(.2*se,1),Et=se-nn,Ne=Math.min(G.get().streaming.buffer.bufferTimeAtTopQuality,.9*Et),nt=Math.min(G.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*Et),_t={streaming:{buffer:{bufferToKeep:parseFloat(nn.toFixed(5)),bufferTimeAtTopQuality:parseFloat(Ne.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(nt.toFixed(5))}}};G.update(_t)}}(),void(at.error.code!==22&&tn()||(z.warn("Clearing playback buffer to overcome quota exceed situation"),jt(L.default.QUOTA_EXCEEDED,{criticalBufferLevel:se,quotaExceededTime:at.chunk.start}),Nn(cn())));if(!ge||(Ht(),Te=!1,J=at.chunk,!J||!J.endFragment))return;J&&!isNaN(J.index)&&(ce=Math.max(J.index,ce),hn());const At=ge.getAllBufferRanges();J.segmentType===Le.HTTPRequest.MEDIA_SEGMENT_TYPE&&(ve(At),st(),function(){if(isNaN(ee)||ne)return;if(V!==F.default.AUDIO&&V!==F.default.VIDEO)return void(ee=NaN);const nn=N.getTime(),Et=Bt(nn,0),Ne=Bt(ee,0);if(Et&&Ne&&Et.start===Ne.start)return void(ee=NaN);const nt=B.getCurrentRepresentation().segmentDuration,_t=Bt(ee,nt);_t&&(G.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(nn-ee)>nt?ee<=_t.end&&N.seek(Math.max(ee,_t.start),!1,!0):nn<_t.start&&N.seek(_t.start,!1,!0))}());let Qt=!1;U&&(U.indexOf(J)>0&&(Qt=!0),U=null),J&&!Qt&&jt(L.default.BYTES_APPENDED_END_FRAGMENT,{startTime:J.start,index:J.index,bufferedRanges:At,segmentType:J.segmentType,mediaType:V,representationId:J.representation.id})}function ke(at,At){const Qt=[];return Qt.push(pt(at)),Qt.push(ge?ge.abort():Promise.resolve()),Qt.push(Ce(at,At)),Promise.allSettled(Qt)}function Ce(at,At){return at&&At?at&&At&&at.mimeType===At.mimeType&&at.codecFamily===At.codecFamily?(z.debug(`Switching to new codec ${at.codecs} without changeType as previous codec ${At.codecs} is compatible.`),Promise.resolve()):G.get().streaming.buffer.useChangeType&&E.supportsChangeType()?(z.debug(`Using changeType() to switch from codec ${At.codecs} to ${at.codecs}`),ge.changeType(at)):(z.debug("changeType() not available"),Promise.resolve()):(z.warn("BufferController._changeCodec() is missing the information about the Representations. Doing nothing"),Promise.resolve())}function Ve(){return new Promise((at,At)=>{let Qt=Ke();if(!Qt||Qt.length===0)return st(),void at();Nn(Qt).then(()=>{at()}).catch(nn=>{At(nn)})})}function Ke(at){const At=[],Qt=ge.getAllBufferRanges();if(!Qt||Qt.length===0)return At;if(!at&&at!==0||isNaN(at))At.push({start:Qt.start(0),end:Qt.end(Qt.length-1)+.5});else{const nn=function(Ne,nt){const _t=G.get().streaming.buffer.bufferToKeep,rt=nt.start(0);if(Ne-rt>_t){let Ft=Math.max(0,Ne-_t);const Vt=I.getRequests({state:Dt.FRAGMENT_MODEL_EXECUTED,time:Ne,threshold:qe})[0];if(Vt&&(Ft=Math.min(Vt.startTime,Ft)),Ft>0)return{start:rt,end:Ft}}return null}(at,Qt),Et=function(Ne,nt){const _t=nt.end(nt.length-1)+.5,rt=Yt(Ne),Ft=C.manifestInfo.duration>=G.get().streaming.buffer.longFormContentDurationThreshold?G.get().streaming.buffer.bufferTimeAtTopQualityLongForm:G.get().streaming.buffer.bufferTimeAtTopQuality;let Vt=isNaN(rt)?Ne:Math.min(rt,Ne+Ft);if(Vt>=nt.end(nt.length-1))return null;const _n=I.getRequests({state:Dt.FRAGMENT_MODEL_EXECUTED,time:Ne,threshold:qe})[0];if(_n&&(Vt=Math.max(_n.startTime+_n.duration,Vt)),G.get().streaming.buffer.avoidCurrentTimeRangePruning){for(let An=0;An<nt.length;An++)if(nt.start(An)<=Ne&&Ne<=nt.end(An)&&nt.start(An)<=Vt&&Vt<=nt.end(An)){let kn=Vt;Vt=An+1<nt.length?nt.start(An+1):nt.end(An)+1,z.debug("Buffered range ["+nt.start(An)+", "+nt.end(An)+"] overlaps with targetTime "+Ne+" and range to be pruned ["+kn+", "+_t+"], using ["+Vt+", "+_t+"] instead"+(Vt<_t?"":" (no actual pruning)"));break}}return Vt<nt.end(nt.length-1)?{start:Vt,end:_t}:null}(at,Qt);nn&&At.push(nn),Et&&At.push(Et)}return At}function st(){(!je||V===F.default.TEXT&&K.isTextEnabled())&&Ht()}function ft(){In()}function St(){In(),ee=NaN}function Bt(at,At){if(!ge)return null;const Qt=ge.getAllBufferRanges();let nn,Et,Ne=0,nt=0,_t=null,rt=null,Ft=0;const Vt=isNaN(At)?.15:At;if(Qt!=null){for(Et=0,nn=Qt.length;Et<nn;Et++)if(Ne=Qt.start(Et),nt=Qt.end(Et),_t===null)Ft=Math.abs(Ne-at),(at>=Ne&&at<nt||Ft<=Vt)&&(_t=Ne,rt=nt);else{if(Ft=Ne-rt,!(Ft<=Vt))break;rt=nt}if(_t!==null)return{start:_t,end:rt}}return null}function Ht(){if(N){let at=N.getTime()||0;ne&&(at=isNaN(ee)?0:ee);const At=G.get().streaming.gaps.jumpGaps&&!isNaN(G.get().streaming.gaps.smallGapLimit)?G.get().streaming.gaps.smallGapLimit:NaN;ie=Math.max(function(Qt,nn){let Et,Ne;return G.get().streaming.gaps.jumpGaps&&(nn=G.get().streaming.gaps.smallGapLimit),Et=Bt(Qt,nn),Ne=Et===null?0:Et.end-Qt,Ne}(at,At),0),jt(L.default.BUFFER_LEVEL_UPDATED,{mediaType:V,bufferLevel:ie}),In()}}function hn(){const at=ce>=de-1,At=N.getTimeToStreamEnd(C)-ie<1e-5;!at&&!At||$||(Tn(!0),z.debug(`checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ${C.id} and type ${V}`))}function In(){if(V!==F.default.AUDIO&&V!==F.default.VIDEO)return;const at=N.getLowLatencyModeEnabled()?G.get().streaming.buffer.lowLatencyStallThreshold:G.get().streaming.buffer.stallThreshold;ie<=at&&!$?Ot(j.BUFFER_EMPTY):($||ie>at)&&Ot(j.BUFFER_LOADED)}function Ot(at){X===at||at===j.BUFFER_EMPTY&&N.getTime()===0||V===F.default.TEXT&&!K.isTextEnabled()||(X=at,jt(L.default.BUFFER_LEVEL_STATE_CHANGED,{state:at}),jt(at===j.BUFFER_LOADED?L.default.BUFFER_LOADED:L.default.BUFFER_EMPTY),z.debug(at===j.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function Zt(){ge&&V!==F.default.TEXT&&($||Nn(cn()))}function cn(){const at=[],At=ge.getAllBufferRanges();if(!At||At.length===0)return at;const Qt=N.getTime();let nn=Math.max(0,Qt-G.get().streaming.buffer.bufferToKeep);const Et=I.getRequests({state:Dt.FRAGMENT_MODEL_EXECUTED,time:Qt,threshold:qe})[0];if(Et)nn=Math.min(Et.startTime,nn);else if(Qt===0&&N.getIsDynamic())return[];if(At.start(0)<=nn){const Ne={start:0,end:nn};for(let nt=0;nt<At.length&&At.end(nt)<=nn;nt++)Ne.end=At.end(nt);Ne.start<Ne.end&&at.push(Ne)}return at}function Nn(at){return new Promise((At,Qt)=>{if(!at||!ge||at.length===0)return Ht(),void At();const nn=[];at.forEach(Et=>{nn.push(function(Ne){return new Promise((nt,_t)=>{Ne.resolve=nt,Ne.reject=_t,Oe.push(Ne)})}(Et))}),Ie||Cn(),Promise.all(nn).then(()=>{At()}).catch(Et=>{Qt(Et)})})}function Cn(){try{if(Oe.length===0||!ge)return z.debug("Nothing to prune, halt pruning"),Oe=[],void(Ie=!1);const at=ge.getBuffer();if(!at||!at.buffered||at.buffered.length===0)return z.debug("SourceBuffer is empty (or does not exist), halt pruning"),Oe=[],void(Ie=!1);const At=Oe.shift();z.debug(`${V}: Removing buffer from: ${At.start} to ${At.end}`),Ie=!0,N.getTime()<At.end&&Tn(!1),ge.remove(At).then(Qt=>{We(Qt)}).catch(Qt=>{We(Qt)})}catch{Ie=!1}}function We(at){z.debug("onRemoved buffer from:",at.from,"to",at.to),ge&&(ve(ge.getAllBufferRanges()),Oe.length===0&&(Ie=!1,Ht()),at.unintended&&(z.warn("Detected unintended removal from:",at.from,"to",at.to,"setting streamprocessor time to",at.from),jt(L.default.SEEK_TARGET,{time:at.from})),Ie?Cn():(je?je=!1:Ht(),jt(L.default.BUFFER_CLEARED,{from:at.from,to:at.to,unintended:at.unintended,hasEnoughSpaceToAppend:tn(),quotaExceeded:Te})))}function pt(at){return new Promise(At=>{at&&at.mseTimeOffset!==void 0&&ge&&ge.updateTimestampOffset?ge.updateTimestampOffset(at.mseTimeOffset).then(()=>{At()}).catch(()=>{At()}):At()})}function gt(){return ge&&!$?ge.updateAppendWindow(C):Promise.resolve()}function vt(){me++,me*(G.get().streaming.wallclockTimeUpdateInterval/1e3)>=G.get().streaming.buffer.bufferPruningInterval&&(me=0,Zt())}function sn(){In()}function Tn(at){$=at,$?jt(L.default.BUFFERING_COMPLETED):de=Number.POSITIVE_INFINITY}function yt(){try{const at=ge.getAllBufferRanges();let At,Qt,nn=0;if(!at)return nn;for(Qt=0,At=at.length;Qt<At;Qt++)nn+=at.end(Qt)-at.start(Qt);return nn}catch{return 0}}function Yt(at){try{let At=at;const Qt=ge.getAllBufferRanges();if(!Qt||Qt.length===0)return NaN;let nn=0;for(;At===at&&nn<Qt.length;){const Et=Qt.start(nn),Ne=Qt.end(nn);At>=Et&&At<=Ne&&(At=Ne),nn+=1}return At===at?NaN:At}catch{return NaN}}function tn(){const at=yt();return isNaN(at)||at<se}function jt(at,At){let Qt=At||{};x.trigger(at,Qt,{streamId:C.id,mediaType:V})}function on(at,At){if(se=Number.POSITIVE_INFINITY,X=void 0,de=Number.POSITIVE_INFINITY,ce=0,J=null,$=!1,Ie=!1,Te=!1,ie=0,me=0,Oe=[],ee=NaN,ne=!1,ge){let Qt=ge;ge=null,at||(At?Qt.removeEventListeners():Qt.abort().then(()=>{Qt.reset(At),Qt=null}))}je=!1}return D={appendInitSegmentFromCache:function(at){const At=xe.extract(C.id,at);return!!At&&(z.debug(`Appending init fragment for type ${V}, representationId ${At.representation.id} and bandwidth ${At.representation.bandwidth}`),he(At),!0)},clearBuffers:Nn,createBufferSink:Ae,dischargePreBuffer:function(){if(ge&&we&&typeof we.discharge=="function"){const at=we.getAllBufferRanges();if(at.length>0){let nn="Beginning "+V+"PreBuffer discharge, adding buffer for:";for(let Et=0;Et<at.length;Et++)nn+=" start: "+at.start(Et)+", end: "+at.end(Et)+";";z.debug(nn)}else z.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");U=[];let At=we.discharge(),Qt=null;for(let nn=0;nn<At.length;nn++){const Et=At[nn];if(Et.segmentType!==Le.HTTPRequest.INIT_SEGMENT_TYPE){const Ne=xe.extract(Et.streamId,Et.representation.id);Ne&&Qt!==Ne&&(U.push(Ne),ge.append(Ne),Qt=Ne)}U.push(Et),ge.append(Et)}we.reset(),we=null}},getAllRangesWithSafetyFactor:Ke,getBuffer:function(){return ge},getBufferControllerType:function(){return Xe},getBufferLevel:function(){return ie},getContinuousBufferTimeForTargetTime:Yt,getIsBufferingCompleted:function(){return $},getIsPruningInProgress:function(){return Ie},getMediaSource:function(){return ae},getRangeAt:Bt,getStreamId:function(){return C.id},getType:function(){return V},hasBufferAtTime:function(at){try{const At=ge.getAllBufferRanges();if(!At||At.length===0)return!1;let Qt=0;for(;Qt<At.length;){const nn=At.start(Qt),Et=At.end(Qt);if(at>=nn&&at<=Et)return!0;Qt+=1}return!1}catch(At){return z.error(At),!1}},initialize:function(at){te(at),x.on(L.default.INIT_FRAGMENT_LOADED,_e,D),x.on(L.default.MEDIA_FRAGMENT_LOADED,re,D),x.on(L.default.WALLCLOCK_TIME_UPDATED,vt,D),x.on(pe.default.PLAYBACK_PLAYING,St,D),x.on(pe.default.PLAYBACK_PROGRESS,st,D),x.on(pe.default.PLAYBACK_TIME_UPDATED,st,D),x.on(pe.default.PLAYBACK_RATE_CHANGED,sn,D),x.on(pe.default.PLAYBACK_STALLED,ft,D)},prepareForAbandonQualitySwitch:function(at,At){return ke(at,At)},prepareForDefaultQualitySwitch:function(at,At){return ke(at,At)},prepareForFastQualitySwitch:function(at,At){return ke(at,At)},prepareForForceReplacementQualitySwitch:function(at,At){return new Promise(Qt=>{const nn=[];nn.push(ge.abort()),nn.push(gt()),nn.push(Ve()),nn.push(pt(at)),nn.push(Ce(at,At)),Promise.allSettled(nn).then(()=>{Tn(!1),Qt()})})},prepareForNonReplacementTrackSwitch:function(at,At){return new Promise(Qt=>{const nn=[];nn.push(gt()),nn.push(Ce(at,At)),Promise.allSettled(nn).then(()=>{Qt()})})},prepareForPlaybackSeek:function(){return $&&Tn(!1),ge.abort()},prepareForReplacementTrackSwitch:function(at,At){return new Promise(Qt=>{const nn=[];nn.push(ge.abort()),nn.push(gt()),nn.push(Ce(at,At)),nn.push(Ve()),nn.push(pt(at)),Promise.allSettled(nn).then(()=>{Tn(!1),Qt()})})},pruneAllSafely:Ve,pruneBuffer:Zt,reset:function(at,At){x.off(L.default.INIT_FRAGMENT_LOADED,_e,this),x.off(L.default.MEDIA_FRAGMENT_LOADED,re,this),x.off(L.default.WALLCLOCK_TIME_UPDATED,vt,this),x.off(pe.default.PLAYBACK_PLAYING,St,this),x.off(pe.default.PLAYBACK_PROGRESS,st,this),x.off(pe.default.PLAYBACK_TIME_UPDATED,st,this),x.off(pe.default.PLAYBACK_RATE_CHANGED,sn,this),x.off(pe.default.PLAYBACK_STALLED,ft,this),on(at,At)},segmentRequestingCompleted:function(at){isNaN(at)||(de=at,hn())},setIsBufferingCompleted:Tn,setMediaSource:te,setSeekTarget:function(at){ee=at},updateAppendWindow:gt,updateBufferTimestampOffset:pt},z=(0,Be.default)(S).getInstance().getLogger(D),xe=et(S).getInstance(),on(),D}He.__dashjs_factory_name=Xe;var it=Ee.default.getClassFactory(He);const bt="NotFragmentedTextBufferController";function ht(_){_=_||{};const E=this.context,S=(0,oe.default)(E).getInstance(),x=_.textController,I=_.errHandler,N=_.streamInfo,B=_.type;let G,C,K,V,D,z;function $(ae){V=ae}function ie(ae){C!==ae&&(C=ae,C&&function(ce){let de={};S.trigger(ce,de,{streamId:N.id,mediaType:B})}(L.default.BUFFERING_COMPLETED))}function se(ae){ae.chunk.bytes&&!C&&(z.save(ae.chunk),D.append(ae.chunk),ie(!0))}return G={initialize:function(ae){$(ae)},getStreamId:function(){return N.id},getType:function(){return B},getBufferControllerType:function(){return bt},createBufferSink:function(ae){return new Promise((ce,de)=>{try{D=H(E).create({mediaSource:V,textController:x,eventBus:S}),D.initializeForFirstUse(ae),K||(D.getBuffer()&&typeof D.getBuffer().initialize=="function"&&D.getBuffer().initialize(),K=!0),ce(D)}catch(ge){I.error(new Pe.default(W.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,W.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+B)),de(ge)}})},dischargePreBuffer:function(){},getBuffer:function(){return D},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:$,getMediaSource:function(){return V},appendInitSegmentFromCache:function(ae){return z.extract(N.id,ae)!==null},getIsBufferingCompleted:function(){return C},setIsBufferingCompleted:ie,getIsPruningInProgress:function(){return!1},reset:function(ae){S.off(L.default.INIT_FRAGMENT_LOADED,se,G),!ae&&D&&(D.abort(),D.reset(),D=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return C=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},K=!1,V=null,C=!1,z=et(E).getInstance(),S.on(L.default.INIT_FRAGMENT_LOADED,se,G),G}ht.__dashjs_factory_name=bt;var Ct=Ee.default.getClassFactory(ht);function pn(_){_=_||{};const E=this.context,S=(0,oe.default)(E).getInstance(),x=_.dashMetrics,I=_.mediaPlayerModel,N=_.fragmentModel,B=_.abrController,G=_.playbackController,C=_.textController,K=_.type,V=_.bufferController,D=_.representationController,z=_.settings;let $,ie,se,ae,ce,de,ge,we,ne,U,X,J;function me(){X=!0}function Ie(){X=!1}function Te(ve){if(V.getIsBufferingCompleted())return;xe();const fe=isNaN(ve)?0:ve;ce=setTimeout(Oe,fe)}function xe(){ce&&(clearTimeout(ce),ce=null)}function Oe(){try{if(function(){try{return K===F.default.TEXT&&!C.isTextEnabled()||G.isPaused()&&(!G.getStreamController().getInitialPlayback()||!G.getStreamController().getAutoPlay())&&!z.get().streaming.scheduling.scheduleWhilePaused}catch{return!1}}())return void xe();if(function(){try{return!!X&&D.getCurrentRepresentation()&&(we==null||ne||function(){const ve=D.getCurrentRepresentation();if(!K||!ve)return!0;let fe=ve&&ve.segmentDuration&&!isNaN(ve.segmentDuration)?ve.segmentDuration:0;const ke=x.getCurrentBufferLevel(K),Ce=je();return(Ce<=fe||G.getLowLatencyModeEnabled()||K===F.default.AUDIO&&de)&&(fe=0),ke+fe<Ce}())}catch{return!1}}()){let ve=!1;J&&(ve=B.checkPlaybackQuality(K,ie.id)),ve||function(){const fe=D.getCurrentRepresentation();U||fe.id!==we||ne?(ne?(se.debug("Switch track for "+K+", representation id = "+fe.id),ne=!1):se.debug("Quality has changed, get init request for representationid = "+fe.id),S.trigger(L.default.INIT_FRAGMENT_NEEDED,{representationId:fe.id,sender:$},{streamId:ie.id,mediaType:K}),J=!1,U=!1):(se.debug(`Media segment needed for ${K} and stream id ${ie.id}`),S.trigger(L.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:ie.id,mediaType:K}),J=!0)}()}else Te(G.getLowLatencyModeEnabled()?z.get().streaming.scheduling.lowLatencyTimeout:z.get().streaming.scheduling.defaultTimeout)}catch{Te(G.getLowLatencyModeEnabled()?z.get().streaming.scheduling.lowLatencyTimeout:z.get().streaming.scheduling.defaultTimeout)}}function je(){let ve=NaN;const fe=D.getCurrentRepresentation();return K&&fe&&(ve=K===F.default.TEXT?function(){try{if(C.isTextEnabled()){const ke=D.getCurrentRepresentation();if(isNaN(ke.fragmentDuration)){const Ce=x.getCurrentSchedulingInfo(j.SCHEDULING_INFO);return Ce?Ce.duration:0}return ke.fragmentDuration}return 0}catch{return 0}}():K===F.default.AUDIO&&de?function(){try{const ke=x.getCurrentBufferLevel(F.default.VIDEO),Ce=D.getCurrentRepresentation();return isNaN(Ce.fragmentDuration)?ke+1:Math.max(ke+1,Ce.fragmentDuration)}catch{return 0}}():function(){try{const ke=D.getCurrentRepresentation(),Ce=ke.mediaInfo.streamInfo;return B.isPlayingAtTopQuality(ke)?Ce.manifestInfo.duration>=z.get().streaming.buffer.longFormContentDurationThreshold?z.get().streaming.buffer.bufferTimeAtTopQualityLongForm:z.get().streaming.buffer.bufferTimeAtTopQuality:I.getBufferTimeDefaultUnadjusted()}catch{return I.getBufferTimeDefaultUnadjusted()}}()),ve}function ee(){te(!0)}function te(ve){if(G&&N){const fe=N.getRequests({state:Dt.FRAGMENT_MODEL_EXECUTED,time:G.getTime(),threshold:0})[0];fe&&G.getTime()>=fe.startTime&&((!ge.representation||fe.representation.mediaInfo.type===ge.representation.mediaInfo.type&&fe.representation.mediaInfo.index!==ge.representation.mediaInfo.index)&&ve&&(se.debug(`Track change rendered for streamId ${ie.id} and type ${K}`),S.trigger(L.default.TRACK_CHANGE_RENDERED,{mediaType:K,oldMediaInfo:ge&&ge.representation&&ge.representation.mediaInfo?ge.representation.mediaInfo:null,newMediaInfo:fe.representation.mediaInfo,streamId:ie.id})),ge.representation&&fe.representation.id===ge.representation.id||!ve||(se.debug(`Quality change rendered for streamId ${ie.id} and type ${K}`),S.trigger(L.default.QUALITY_CHANGE_RENDERED,{mediaType:K,oldRepresentation:ge.representation?ge.representation:null,newRepresentation:fe.representation,streamId:ie.id})),ge.representation=fe.representation)}}function Ae(){N.abortRequests(),xe()}function _e(){z.get().streaming.scheduling.scheduleWhilePaused||Te()}function re(ve){x.updatePlayListTraceMetrics({playbackspeed:ve.playbackRate.toString()})}function he(){J=!0,ae=0,we=null,ge={representation:null},ne=!1,U=!1,X=!0}return $={clearScheduleTimer:xe,getBufferTarget:je,getPlaybackController:function(){return G},getStreamId:function(){return ie.id},getSwitchTrack:function(){return ne},getTimeToLoadDelay:function(){return ae},getType:function(){return K},initialize:function(ve){de=ve,S.on(L.default.URL_RESOLUTION_FAILED,Ae,$),S.on(pe.default.PLAYBACK_STARTED,_e,$),S.on(pe.default.PLAYBACK_RATE_CHANGED,re,$),S.on(pe.default.PLAYBACK_TIME_UPDATED,ee,$),S.on(pe.default.MANAGED_MEDIA_SOURCE_START_STREAMING,me,$),S.on(pe.default.MANAGED_MEDIA_SOURCE_END_STREAMING,Ie,$)},reset:function(){S.off(L.default.URL_RESOLUTION_FAILED,Ae,$),S.off(pe.default.PLAYBACK_STARTED,_e,$),S.off(pe.default.PLAYBACK_RATE_CHANGED,re,$),S.off(pe.default.PLAYBACK_TIME_UPDATED,ee,$),S.off(pe.default.MANAGED_MEDIA_SOURCE_START_STREAMING,me,$),S.off(pe.default.MANAGED_MEDIA_SOURCE_END_STREAMING,Ie,$),xe(),te(!1),he(),ie=null},setCheckPlaybackQuality:function(ve){J=ve},setInitSegmentRequired:function(ve){U=ve},setLastInitializedRepresentationId:function(ve){we=ve},setSwitchTrack:function(ve){ne=ve},setTimeToLoadDelay:function(ve){ae=ve},startScheduleTimer:Te},se=(0,Be.default)(E).getInstance().getLogger($),he(),ie=_.streamInfo,$}pn.__dashjs_factory_name="ScheduleController";var Xt=Ee.default.getClassFactory(pn);const fn=/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g;var qt=class{constructor(){this.availabilityEndTime=NaN,this.availabilityStartTime=NaN,this.duration=NaN,this.index=null,this.indexRange=null,this.media=null,this.mediaRange=null,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.replacementNumber=NaN,this.replacementTime=null,this.representation=null,this.wallStartTime=NaN}};function Vn(_,E,S,x,I,N,B,G){let C=new qt;var K;return C.representation=_,C.duration=E,C.presentationStartTime=S,C.mediaStartTime=x,C.availabilityStartTime=I.calcAvailabilityStartTimeFromPresentationTime(N,_,B),C.availabilityEndTime=I.calcAvailabilityEndTimeFromPresentationTime(N+E,_,B),C.wallStartTime=I.calcWallTimeForSegment(C,B),C.replacementNumber=(K=G,C.representation.startNumber+K),C.index=G,C}function sr(_,E,S,x){const I=E.adaptation.period;if(isFinite(I.duration)&&I.start+I.duration<=S.presentationStartTime)return!1;if(x){if(E.availabilityTimeOffset==="INF")return!0;const N=_.getClientReferenceTime();return S.availabilityStartTime.getTime()<=N&&(!isFinite(S.availabilityEndTime)||S.availabilityEndTime.getTime()>=N)}return!0}function wr(_,E,S,x,I,N){return _&&function(B,G,C,K,V,D){return B.replace(fn,(z,$,ie,se)=>{let ae,ce;switch($){case void 0:return"$";case"RepresentationID":ae=G;break;case"Number":ae=C;break;case"SubNumber":ae=K;break;case"Bandwidth":ae=V;break;case"Time":if(typeof D=="string")return D;ae=D&&Math.round(D);break;default:ae=null}if(ae==null)return z;switch(se){case void 0:case"d":case"i":case"u":ce=ae.toString();break;case"o":ce=ae.toString(8);break;case"x":ce=ae.toString(16);break;case"X":ce=ae.toString(16).toUpperCase();break;default:ce=ae.toString()}const de=parseInt(ie,10)||1;return ce.padStart(de,"0")})}(_,E,S,x,I,N)}function Zr(_,E,S,x){let I,N,B;I=S.segmentDuration,isNaN(I)&&(I=S.adaptation.period.duration),N=parseFloat((S.adaptation.period.start+x*I).toFixed(5)),B=parseFloat((N+I).toFixed(5));const G=Vn(S,I,N,_.calcMediaTimeFromPresentationTime(N,S),_,B,E,x);return sr(_,S,G,E)?G:null}function Fr(_,E,S,x,I,N,B,G,C,K){const V=x/N,D=I/N;let z,$,ie;return z=_.calcPresentationTimeFromMediaTime(V,S),$=z+D,ie=Vn(S,D,z,V,_,$,E,C),sr(_,S,ie,E)?(ie.replacementTime=K||x,ie.media=wr(B,void 0,ie.replacementNumber,void 0,void 0,ie.replacementTime),ie.mediaRange=G,ie):null}function ii(_){const E=(_=_||{}).eventBus,S=_.events,x=_.abrController,I=_.dashMetrics,N=_.playbackController,B=_.timelineConverter,G=_.type,C=_.streamInfo,K=_.segmentsController,V=_.isDynamic;let D,z,$;function ie(){return G}function se(){return $}function ae(){$=null,z=[]}function ce(U){return new Promise((X,J)=>{const me=U.hasInitialization(),Ie=U.hasSegments(),Te=[];Te.push(K.updateInitData(U,me)),Te.push(K.updateSegmentData(U,Ie)),Promise.all(Te).then(xe=>{var Oe;xe[0]&&!xe[0].error&&(U=function(je,ee){return ee&&!ee.error&&ee.representation?ee.representation:je}(U,xe[0])),xe[1]&&!xe[1].error&&(U=function(je,ee){if(!ee||ee.error)return;const te=ee.segments,Ae=[];let _e,re,he,ve,fe=0;for(_e=0,re=te?te.length:0;_e<re;_e++)he=te[_e],ve=Fr(B,V,je,he.startTime,he.duration,he.timescale,he.media,he.mediaRange,fe),ve&&(Ae.push(ve),ve=null,fe++);return Ae.length>0&&(je.segments=Ae),je}(U,xe[1])),U.fragmentDuration=U.segmentDuration?U.segmentDuration:U.segments&&U.segments.length>0?U.segments[0].duration:NaN,(Oe=U).mediaFinishedInformation=K.getMediaFinishedInformation(Oe),function(je){let ee,te=I.getCurrentManifestUpdate(),Ae=!1;if(te){for(let _e=0;_e<te.representationInfo.length;_e++)if(ee=te.representationInfo[_e],ee.index===je.index&&ee.mediaType===ie()){Ae=!0;break}Ae||I.addManifestUpdateRepresentationInfo(je,ie())}}(U),X()}).catch(xe=>{J(xe)})})}function de(U){if(!z||z.length===0)return null;const X=z.filter(J=>J.id===U);return X.length>0?X[0]:null}function ge(U){E.trigger(S.DATA_UPDATE_COMPLETED,{currentRepresentation:$,error:U},{streamId:C.id,mediaType:G})}function we(U){$&&$.id===U.id||function(X){(function(){if(!(x&&I&&N&&B))throw new Error(F.default.MISSING_CONFIG_ERROR)})();const J=new Date,me=1e3*N.getTime();X&&I.addRepresentationSwitch(X.adaptation.type,J,me,X.id),E.trigger(pe.default.REPRESENTATION_SWITCH,{mediaType:G,streamId:C.id,currentRepresentation:X},{streamId:C.id,mediaType:G})}(U),$=U}function ne(U){if(U.newDuration){const X=se();X&&X.adaptation.period&&(X.adaptation.period.duration=U.newDuration)}}return D={getCurrentRepresentation:se,getRepresentationById:de,getStreamId:function(){return C.id},getType:ie,prepareQualityChange:function(U){const X=z.filter(J=>J.id===U.id);X.length>0&&we(X[0])},reset:function(){E.off(pe.default.MANIFEST_VALIDITY_CHANGED,ne,D),ae()},updateData:function(U,X,J){return new Promise((me,Ie)=>{if(z=U,we(de(J)),G!==F.default.VIDEO&&G!==F.default.AUDIO&&(G!==F.default.TEXT||!X))return ge(),void me();const Te=[];for(let xe=0,Oe=z.length;xe<Oe;xe++){const je=z[xe];Te.push(ce(je))}Promise.all(Te).then(()=>{(function(){x.setPlaybackQuality(G,C,$);const xe=I.getCurrentDVRInfo(G);xe&&I.updateManifestUpdateInfo({latency:xe.range.end-N.getTime()}),ge()})(),me()}).catch(xe=>{Ie(xe)})})}},ae(),E.on(pe.default.MANIFEST_VALIDITY_CHANGED,ne,D),D}ii.__dashjs_factory_name="RepresentationController";var rn=Ee.default.getClassFactory(ii),Gt=t(656);function zt(_){const E=(_=_||{}).eventBus,S=_.debug,x=_.urlUtils,I=_.type,N=_.streamInfo,B=_.segmentsController,G=_.timelineConverter,C=_.baseURLController;let K,V,D,z,$;function ie(){return I}function se(){D=null}function ae(ne,U,X){const J=C.resolve(X.path);let me,Ie,Te={};return J&&U!==J.url&&x.isRelative(U)?(me=J.url,Ie=J.serviceLocation,Te=J.queryParams,U&&(me=x.resolve(U,me))):me=U,!x.isRelative(me)&&(ne.url=me,ne.serviceLocation=Ie,ne.queryParams=Te,!0)}function ce(ne,U){if(U==null)return null;const X=new Ge,J=U.representation,me=J.bandwidth,Ie=wr(U.media,J.id,U.replacementNumber,void 0,me,U.replacementTime);return X.mediaType=ie(),X.bandwidth=J.bandwidth,X.type=Le.HTTPRequest.MEDIA_SEGMENT_TYPE,X.range=U.mediaRange,X.startTime=U.presentationStartTime,X.mediaStartTime=U.mediaStartTime,X.duration=U.duration,X.timescale=J.timescale,X.availabilityStartTime=U.availabilityStartTime,X.availabilityEndTime=U.availabilityEndTime,X.availabilityTimeComplete=J.availabilityTimeComplete,X.wallStartTime=U.wallStartTime,X.index=U.index,X.adaptationIndex=J.adaptation.index,X.representation=J,ae(X,Ie,J)?X:void 0}function de(ne,U,X){let J=null;if(!U||!U.segmentInfoType)return J;const me=B.getSegmentByTime(U,X);return me&&(D=me,V.debug("Index for time "+X+" is "+me.index),J=ce(0,me)),J}function ge(ne,U,X){let J=null;const me=B.getSegmentByIndex(U,X,D?D.mediaStartTime:-1);if(me)J=ce(0,me),D=me;else{if(z&&!$)return V.debug(ie()+" No segment found at index: "+X+". Wait for next loop"),null;$=!0}return J}function we(){V.debug("Dynamic stream complete"),$=!0}return K={getCurrentIndex:function(){return D?D.index:-1},getInitRequest:function(ne,U){return U?function(X,J,me){const Ie=new Ge,Te=J.adaptation.period,xe=Te.start;if(Ie.mediaType=me,Ie.type=Le.HTTPRequest.INIT_SEGMENT_TYPE,Ie.range=J.range,Ie.availabilityStartTime=G.calcAvailabilityStartTimeFromPresentationTime(xe,J,z),Ie.availabilityEndTime=G.calcAvailabilityEndTimeFromPresentationTime(xe+Te.duration,J,z),Ie.representation=J,ae(Ie,J.initialization,J))return Ie.url=wr(Ie.url,void 0,void 0,void 0,J.bandwidth),Ie}(0,U,ie()):null},getNextSegmentRequest:function(ne,U){if(!U||!U.segmentInfoType)return null;let X=D?D.index+1:0;return U&&D&&U.endNumber&&D.replacementNumber&&D.replacementNumber>=U.endNumber?($=!0,null):ge(0,U,X)},getNextSegmentRequestIdempotent:function(ne,U){let X=null,J=D?D.index+1:0;const me=B.getSegmentByIndex(U,J,D?D.mediaStartTime:-1);return me?(X=ce(0,me),X):null},getSegmentRequestForTime:de,getStreamId:function(){return N.id},getStreamInfo:function(){return N},getType:ie,getValidTimeAheadOfTargetTime:function(ne,U,X,J){try{if(isNaN(ne)||!U||!X)return NaN;if(ne<0&&(ne=0),isNaN(J)&&(J=.5),de(0,X,ne))return ne;if(X.adaptation.period.start+X.adaptation.period.duration<ne)return NaN;const me=isFinite(X.adaptation.period.duration)?X.adaptation.period.start+X.adaptation.period.duration:ne+30;let Ie=Math.min(ne+J,me),Te=NaN,xe=null;for(;Ie<=me;){let Oe=null;if(Ie<=me&&(Oe=de(0,X,Ie)),Oe){Te=Ie,xe=Oe;break}Ie+=J}if(xe){const Oe=xe.startTime+xe.duration;return ne>xe.startTime&&Oe-ne>J?ne:!isNaN(xe.startTime)&&ne<xe.startTime&&Te>xe.startTime?xe.startTime+.001:Math.min(Oe-J,Te)}return Te}catch{return NaN}},initialize:function(ne){z=ne,$=!1,B.initialize(ne)},isLastSegmentRequested:function(ne,U){return!ne||!D?!1:$?!0:!isFinite(ne.adaptation.period.duration)||D.presentationStartTime+D.duration>U?!1:ne.mediaFinishedInformation&&!isNaN(ne.mediaFinishedInformation.numberOfSegments)&&!isNaN(D.index)&&D.index>=ne.mediaFinishedInformation.numberOfSegments-1&&(!z||ne.segmentInfoType===k.default.SEGMENT_TEMPLATE||z&&ne.segmentInfoType===k.default.SEGMENT_LIST&&ne.adaptation.period.nextPeriodId)?!0:!!(z&&ne.adaptation.period.nextPeriodId&&ne.segmentInfoType===k.default.SEGMENT_TIMELINE&&ne.mediaFinishedInformation&&!isNaN(ne.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&D&&!isNaN(D.mediaStartTime)&&!isNaN(D.duration)&&D.mediaStartTime+D.duration>=ne.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(ne,U){return U&&U.segmentInfoType?ge(0,U,D?D.index:0):null},reset:function(){se(),E.off(pe.default.DYNAMIC_TO_STATIC,we,K)}},V=S.getLogger(K),se(),E.on(pe.default.DYNAMIC_TO_STATIC,we,K),K}zt.__dashjs_factory_name="DashHandler";var kt=Ee.default.getClassFactory(zt);function Jt(){let _;const E=/^[a-z][a-z0-9+\-_.]*:/i,S=/^https?:\/\//i,x=/^https:\/\//i,I=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,N=($,ie)=>{try{return new window.URL($,ie).toString()}catch{return $}},B=($,ie)=>{let se=G;if(!ie||!V($))return $;D($)&&(se=C),z($)&&(se=K);const ae=se(ie),ce=ae.charAt(ae.length-1)!=="/"&&$.charAt(0)!=="/"?"/":"";return[ae,$].join(ce)};function G($){const ie=$.indexOf("/"),se=$.lastIndexOf("/");return ie!==-1?se===ie+1?$:($.indexOf("?")!==-1&&($=$.substring(0,$.indexOf("?"))),$.substring(0,se+1)):""}function C($){const ie=$.match(I);return ie?ie[1]:""}function K($){const ie=$.match(E);return ie?ie[0]:""}function V($){return!E.test($)}function D($){return V($)&&$.charAt(0)==="/"}function z($){return $.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),_=N}catch{}finally{_=_||B}}(),{parseBaseUrl:G,parseOrigin:C,parseScheme:K,isRelative:V,isPathAbsolute:D,isSchemeRelative:z,isHTTPURL:function($){return S.test($)},isHTTPS:function($){return x.test($)},removeHostname:function($){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec($)[2].substring(1)},resolve:function($,ie){return _($,ie)}}}Jt.__dashjs_factory_name="DefaultURLUtils";var en=Ee.default.getSingletonFactory(Jt);function ln(){let _,E,S=[];const x=this.context;function I(N,B,G){let C=function(K){let V;for(V=0;V<S.length;V++)if(S[V].regex.test(K))return S[V].utils;return E}(G||B);return C&&typeof C[N]=="function"?C[N](B,G):E[N](B,G)}return E=en(x).getInstance(),_={registerUrlRegex:function(N,B){S.push({regex:N,utils:B})},parseBaseUrl:function(N){return I("parseBaseUrl",N)},parseOrigin:function(N){return I("parseOrigin",N)},parseScheme:function(N){return I("parseScheme",N)},isRelative:function(N){return I("isRelative",N)},isPathAbsolute:function(N){return I("isPathAbsolute",N)},isSchemeRelative:function(N){return I("isSchemeRelative",N)},isHTTPURL:function(N){return I("isHTTPURL",N)},isHTTPS:function(N){return I("isHTTPS",N)},removeHostname:function(N){return I("removeHostname",N)},resolve:function(N,B){return I("resolve",N,B)}},_}ln.__dashjs_factory_name="URLUtils";var dn=Ee.default.getSingletonFactory(ln);class Pt{constructor(){this.start=null,this.mstart=null,this.starttype=null,this.trace=[]}}Pt.INITIAL_PLAYOUT_START_REASON="initial_playout",Pt.SEEK_START_REASON="seek",Pt.RESUME_FROM_PAUSE_START_REASON="resume",Pt.METRICS_COLLECTION_START_REASON="metrics_collection_start";class Lt{constructor(){this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null}}function un(_,E){const S=(_=_||{}).timelineConverter,x=_.dashMetrics;let I;function N(){if(!S)throw new Error(F.default.MISSING_CONFIG_ERROR)}function B(C,K){const V=C.adaptation.period.mpd.manifest.Period[C.adaptation.period.index].AdaptationSet[C.adaptation.index].Representation[C.index].SegmentTemplate||C.adaptation.period.mpd.manifest.Period[C.adaptation.period.index].AdaptationSet[C.adaptation.index].Representation[C.index].SegmentList,D=V.SegmentTimeline,z=V.SegmentURL;let $,ie,se,ae,ce,de,ge,we=0,ne=-1;ge=C.timescale,$=D.S;let U=!1;for(se=0,ae=$.length;se<ae&&!U;se++)for(ie=$[se],de=0,ie.hasOwnProperty("r")&&(de=ie.r),ie.hasOwnProperty("t")&&(we=ie.t),de<0&&(de=G(C,$[se+1],ie,ge,we/ge)),ce=0;ce<=de&&!U;ce++)ne++,U=K(we,V,z,ie,ge,ne,se),U&&(C.segmentDuration=ie.d/ge),we+=ie.d}function G(C,K,V,D,z){let $;if(K&&K.hasOwnProperty("t"))$=K.t/D;else try{let ie=0;if(isNaN(C.adaptation.period.start)||isNaN(C.adaptation.period.duration)||!isFinite(C.adaptation.period.duration)){const se=x.getCurrentDVRInfo();ie=isNaN(se.end)?0:se.end}else ie=C.adaptation.period.start+C.adaptation.period.duration;$=S.calcMediaTimeFromPresentationTime(ie,C),C.segmentDuration=V.d/D}catch{$=0}return Math.max(Math.ceil(($-z)/(V.d/D))-1,0)}return I={getSegmentByIndex:function(C,K,V){if(N(),!C)return null;let D=null,z=!1;return B(C,function($,ie,se,ae,ce,de,ge){if(z||V<0){let we=ie.media,ne=ae.mediaRange;return se&&(we=se[ge].media||"",ne=se[ge].mediaRange),D=Fr(S,E,C,$,ae.d,ce,we,ne,de,ae.tManifest),!0}return $>=V*ce-.5*ae.d&&(z=!0),!1}),D},getSegmentByTime:function(C,K){if(N(),!C)return null;K===void 0&&(K=null);let V=null;const D=S.calcMediaTimeFromPresentationTime(K,C);return B(C,function(z,$,ie,se,ae,ce,de){const ge=parseFloat((D*ae).toPrecision(15));if(ge<z+se.d&&ge>=z){let we=$.media,ne=se.mediaRange;return ie&&(we=ie[de].media||"",ne=ie[de].mediaRange),V=Fr(S,E,C,z,se.d,ae,we,ne,ce,se.tManifest),!0}return!1}),V},getMediaFinishedInformation:function(C){if(!C)return 0;const K=(C.adaptation.period.mpd.manifest.Period[C.adaptation.period.index].AdaptationSet[C.adaptation.index].Representation[C.index].SegmentTemplate||C.adaptation.period.mpd.manifest.Period[C.adaptation.period.index].AdaptationSet[C.adaptation.index].Representation[C.index].SegmentList).SegmentTimeline;let V,D,z,$,ie,se,ae,ce=0,de=0,ge=0;for(ae=C.timescale,V=K.S,$=V.length,z=0;z<$;z++)for(D=V[z],se=0,D.hasOwnProperty("r")&&(se=D.r),D.hasOwnProperty("t")&&(ce=D.t,de=ce/ae),se<0&&(se=G(C,V[z+1],D,ae,de)),ie=0;ie<=se;ie++)ge++,ce+=D.d,de=ce/ae;return{numberOfSegments:ge,mediaTimeOfLastSignaledSegment:de}}},I}Lt.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",Lt.REBUFFERING_REASON="rebuffering",Lt.USER_REQUEST_STOP_REASON="user_request",Lt.END_OF_PERIOD_STOP_REASON="end_of_period",Lt.END_OF_CONTENT_STOP_REASON="end_of_content",Lt.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",Lt.FAILURE_STOP_REASON="failure",un.__dashjs_factory_name="TimelineSegmentsGetter";var Kn=Ee.default.getClassFactory(un);function Kt(_,E){const S=(_=_||{}).timelineConverter;let x;function I(){if(!S||!S.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(F.default.MISSING_CONFIG_ERROR)}function N(B,G){if(I(),!B)return null;const C=B.adaptation.period.mpd.manifest.Period[B.adaptation.period.index].AdaptationSet[B.adaptation.index].Representation[B.index].SegmentTemplate;G=Math.max(G,0);const K=Zr(S,E,B,G);if(K){if(B.endNumber&&K.replacementNumber>B.endNumber)return null;K.replacementTime=Math.round(G*B.segmentDuration*B.timescale,10),K.media=wr(C.media,void 0,K.replacementNumber,void 0,void 0,K.replacementTime)}return K}return x={getSegmentByIndex:N,getSegmentByTime:function(B,G){if(I(),!B)return null;const C=B.segmentDuration;if(isNaN(C))return null;let K=S.calcPeriodRelativeTimeFromMpdRelativeTime(B,G);return N(B,Math.floor(K/C))},getMediaFinishedInformation:function(B){const G={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!B)return G;const C=B.segmentDuration;return isNaN(C)?G.numberOfSegments=1:G.numberOfSegments=Math.ceil(B.adaptation.period.duration/C),G}},x}Kt.__dashjs_factory_name="TemplateSegmentsGetter";var Rn=Ee.default.getClassFactory(Kt);function $n(_,E){const S=(_=_||{}).timelineConverter;let x;function I(){if(!S||!S.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(F.default.MISSING_CONFIG_ERROR)}function N(B,G){if(I(),!B)return null;const C=B.adaptation.period.mpd.manifest.Period[B.adaptation.period.index].AdaptationSet[B.adaptation.index].Representation[B.index].SegmentList,K=C.SegmentURL.length,V=B&&!isNaN(B.startNumber)?B.startNumber:1,D=Math.max(V-1,0),z=Math.max(G-D,0);let $=null;if(z<K){const ie=C.SegmentURL[z];$=Zr(S,E,B,G),$&&($.replacementTime=(V+G-1)*B.segmentDuration,$.media=ie.media?ie.media:"",$.mediaRange=ie.mediaRange,$.indexRange=ie.indexRange)}return $}return x={getSegmentByIndex:N,getSegmentByTime:function(B,G){if(I(),!B)return null;const C=B.segmentDuration;if(isNaN(C))return null;const K=S.calcPeriodRelativeTimeFromMpdRelativeTime(B,G);return N(B,Math.floor(K/C))},getMediaFinishedInformation:function(B){const G={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!B)return G;const C=B.adaptation.period.mpd.manifest.Period[B.adaptation.period.index].AdaptationSet[B.adaptation.index].Representation[B.index].SegmentList,K=B&&!isNaN(B.startNumber)?B.startNumber:1,V=Math.max(K-1,0);return G.numberOfSegments=V+C.SegmentURL.length,G}},x}$n.__dashjs_factory_name="ListSegmentsGetter";var Pn=Ee.default.getClassFactory($n);function zn(_){const E=(_=_||{}).timelineConverter;let S;function x(){if(!E||!E.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(F.default.MISSING_CONFIG_ERROR)}function I(N,B){if(x(),!N)return null;const G=N.segments?N.segments.length:-1;let C;if(B<G&&(C=N.segments[B],C&&C.index===B))return C;for(let K=0;K<G;K++)if(C=N.segments[K],C&&C.index===B)return C;return null}return S={getSegmentByIndex:I,getSegmentByTime:function(N,B){x();const G=function(C,K){if(!C)return-1;const V=C.segments,D=V?V.length:null;let z,$,ie,se,ae,ce=-1;if(V&&D>0){for(ae=0;ae<D;ae++)if($=V[ae],ie=$.presentationStartTime,se=$.duration,z=se/2,K+z>=ie&&K-z<ie+se){ce=$.index;break}}return ce}(N,B);return I(N,G)},getMediaFinishedInformation:function(N){const B={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return N&&N.segments&&(B.numberOfSegments=N.segments.length),B}},S}zn.__dashjs_factory_name="SegmentBaseGetter";var er=Ee.default.getClassFactory(zn);function wn(_){_=_||{};const E=this.context,S=_.dashConstants,x=_.type,I=_.segmentBaseController;let N,B;function G(C){return C?C.segments?B[S.SEGMENT_BASE]:B[C.segmentInfoType]:null}return N={initialize:function(C){B[S.SEGMENT_TIMELINE]=Kn(E).create(_,C),B[S.SEGMENT_TEMPLATE]=Rn(E).create(_,C),B[S.SEGMENT_LIST]=Pn(E).create(_,C),B[S.SEGMENT_BASE]=er(E).create(_,C)},updateInitData:function(C,K){return K?Promise.resolve():I.getSegmentBaseInitSegment({representation:C,mediaType:x})},updateSegmentData:function(C,K){return K?Promise.resolve():I.getSegmentList({mimeType:C.mimeType,representation:C,mediaType:x})},getSegmentByIndex:function(C,K,V){const D=G(C);return D?D.getSegmentByIndex(C,K,V):null},getSegmentByTime:function(C,K){const V=G(C);return V?V.getSegmentByTime(C,K):null},getMediaFinishedInformation:function(C){const K=G(C);return K?K.getMediaFinishedInformation(C):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},B={},N}wn.__dashjs_factory_name="SegmentsController";var Nt=Ee.default.getClassFactory(wn);function Tt(){let _;return _={ntpToUTC:function(E){const S=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(S.getTime()+E).getTime()}},_}Tt.__dashjs_factory_name="TimeUtils";var an=Ee.default.getSingletonFactory(Tt),gn=class{constructor(_){this.newMediaInfo=_.newMediaInfo,this.previouslySelectedRepresentation=_.previouslySelectedRepresentation,this.newRepresentation=_.newRepresentation}};function Mn(_){_=_||{};let E,S,x,I,N,B,G,C,K,V,D,z,$,ie,se,ae,ce=this.context,de=(0,oe.default)(ce).getInstance(),ge=_.abrController,we=_.adapter,ne=_.boxParser,U=_.capabilities,X=_.dashMetrics,J=_.errHandler,me=_.fragmentModel,Ie=_.manifestModel,Te=_.mediaController,xe=_.mediaPlayerModel,Oe=_.mimeType,je=_.playbackController,ee=_.segmentBlacklistController,te=_.settings,Ae=_.streamInfo,_e=_.textController,re=_.timelineConverter,he=_.type;function ve(){return Ae.id}function fe(){return he}function ke(){C=[],x=null,S=0,se=!1,ie=!1,V=!1,ae=!1,In()}function Ce(rt){return!isNaN(rt)&&!isNaN(Ae.duration)&&isFinite(Ae.duration)&&rt>=Ae.start+Ae.duration}function Ve(rt){let Ft=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(rt.sender){if(je.getIsManifestUpdateInProgress())ft();else if((!x.isText||_e.isTextEnabled())&&E&&rt.representationId&&!E.appendInitSegmentFromCache(rt.representationId)){const Vt=D.getCurrentRepresentation();if(Vt.range===0)return void Ke();const _n=I?I.getInitRequest(x,Vt):null;_n?me.executeRequest(_n):Ft&&(z.setInitSegmentRequired(!0),ft())}}}function Ke(rt){let Ft=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(je.getIsManifestUpdateInProgress()||E.getIsPruningInProgress())return void ft();let Vt=function(){let _n;if(isNaN(S)||fe()===F.default.TEXT&&!_e.isTextEnabled())return null;if(I){const An=at();_n=se?I.getSegmentRequestForTime(x,An,S):ie?I.repeatSegmentRequest(x,An):I.getNextSegmentRequest(x,An)}return _n}();Vt?(se=!1,ie=!1,function(_n){isNaN(_n.startTime+_n.duration)||(S=_n.startTime+_n.duration),_n.delayLoadingTime=new Date().getTime()+z.getTimeToLoadDelay(),z.setTimeToLoadDelay(0),function(An){let kn=An.url;return An.range&&(kn=kn.concat("_",An.range)),ee.contains(kn)}(_n)?(G.warn(`Fragment request url ${_n.url} for stream id ${Ae.id} and media type ${he} is on the ignore list and will be skipped`),ft()):(G.debug(`Next fragment request url for stream id ${Ae.id} and media type ${he} is ${_n.url} with request range ${_n.range}`),me.executeRequest(_n))}(Vt)):function(_n){const An=D.getCurrentRepresentation();try{if(te.get().streaming.gaps.enableSeekFix&&(se||je.getTime()===0)){let kn;if(B?B&&An.segmentInfoType===k.default.SEGMENT_TIMELINE&&(kn=I.getValidTimeAheadOfTargetTime(S,x,An,te.get().streaming.gaps.threshold)):(kn=I.getValidTimeAheadOfTargetTime(S,x,An,te.get().streaming.gaps.threshold),isNaN(kn)&&S>=An.adaptation.period.mpd.mediaPresentationDuration-An.segmentDuration&&(kn=S-.1)),!isNaN(kn)&&kn!==S)return void(je.isSeeking()||je.getTime()===0?(G.warn(`Adjusting playback time ${kn} because of gap in the manifest. Seeking by ${kn-S}`),je.seek(kn,!1,!1)):(G.warn(`Adjusting buffering time ${kn} because of gap in the manifest. Adjusting time by ${kn-S}`),_t(kn),_n&&ft()))}}catch(kn){G.error(kn)}st()||_n&&ft()}(Ft)}function st(){const rt=D.getCurrentRepresentation(),Ft=I.isLastSegmentRequested(rt,S);if(Ft){const Vt=I.getCurrentIndex();G.debug(`Segment requesting for stream ${Ae.id} has finished`),de.trigger(L.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:Vt},{streamId:Ae.id,mediaType:he}),E.segmentRequestingCompleted(Vt),on()}return Ft}function ft(){z.startScheduleTimer(je.getLowLatencyModeEnabled()?te.get().streaming.scheduling.lowLatencyTimeout:te.get().streaming.scheduling.defaultTimeout)}function St(rt){X.addBufferState(he,rt.state,z.getBufferTarget()),rt.state!==j.BUFFER_EMPTY||je.isSeeking()||(G.info("Buffer is empty! Stalling!"),X.pushPlayListTraceMetrics(new Date,Lt.REBUFFERING_REASON))}function Bt(rt){me.syncExecutedRequestsWithBufferedRange(E.getBuffer().getAllBufferRanges(),Ae.duration),rt.quotaExceeded&&rt.from>je.getTime()&&_t(rt.from),rt.hasEnoughSpaceToAppend&&rt.quotaExceeded&&z.startScheduleTimer()}function Ht(rt){if(!rt||!rt.lastRequestAppended||!rt.lastRequestAppended.url)return;let Ft=rt.lastRequestAppended.url;rt.lastRequestAppended.range&&(Ft=Ft.concat("_",rt.lastRequestAppended.range)),G.warn(`Blacklisting segment with url ${Ft}`),ee.add(Ft)}function hn(rt){if(G.debug(`Appended bytes for ${rt.mediaType} and stream id ${rt.streamId}`),rt.segmentType===Le.HTTPRequest.INIT_SEGMENT_TYPE){const Ft=rt.representationId;z.setLastInitializedRepresentationId(Ft),G.info("["+he+"] lastInitializedRepresentationId changed to "+Ft)}K&&K.enabled?pt(K.newRepresentation,K.oldRepresentation):ae||z.startScheduleTimer(0)}function In(){K={newRepresentation:null,oldRepresentation:null,enabled:!1}}function Ot(rt){return new Promise(Ft=>{if(!D)return Promise.resolve();let Vt=null;var _n;Vt=rt.newRepresentation?{selectedRepresentation:(_n=rt).newRepresentation,currentMediaInfo:_n.newMediaInfo}:x!==null&&we.areMediaInfosEqual(x,rt.newMediaInfo)?function(kn){return{currentMediaInfo:kn.newMediaInfo,selectedRepresentation:D.getCurrentRepresentation()}}(rt):function(kn){let nr=NaN;return nr=!te.get().streaming.abr.autoSwitchBitrate[kn.newMediaInfo.type]&&kn.previouslySelectedRepresentation?kn.previouslySelectedRepresentation.bitrateInKbit:ge.getInitialBitrateFor(he),{selectedRepresentation:ge.getOptimalRepresentationForBitrate(kn.newMediaInfo,nr,!1),currentMediaInfo:kn.newMediaInfo}}(rt),Zt(Vt.currentMediaInfo),de.trigger();const An=ge.getPossibleVoRepresentations(x,!1);return D.updateData(An,x.isFragmented,Vt.selectedRepresentation.id).then(()=>{(function(){const kn=D.getCurrentRepresentation();E.getIsBufferingCompleted()||E.updateBufferTimestampOffset(kn)})(),Ft()}).catch(kn=>{G.error(kn),Ft()})})}function Zt(rt){we.areMediaInfosEqual(x,rt)||de.trigger(pe.default.NEW_TRACK_SELECTED,{value:rt}),x=rt,ge.handleNewMediaInfo(x),de.trigger(L.default.MEDIAINFO_UPDATED,{mediaType:he,streamId:Ae.id,currentMediaInfo:x})}function cn(rt){const Ft=rt.newRepresentation,Vt=rt.oldRepresentation;Ft&&Vt||G.warn("_handleDifferentSwitchTypes() is missing the target representations"),rt.reason&&rt.reason.forceReplace?function(_n,An){me.abortRequests(),de.trigger(L.default.BUFFER_REPLACEMENT_STARTED,{mediaType:he,streamId:Ae.id},{mediaType:he,streamId:Ae.id}),z.setCheckPlaybackQuality(!1),E.prepareForForceReplacementQualitySwitch(_n,An).then(()=>{Nn()}).catch(()=>{Nn()})}(Ft,Vt):rt&&rt.reason&&rt.reason.forceAbandon?function(_n,An){E.prepareForAbandonQualitySwitch(_n,An).then(()=>{Cn()}).catch(()=>{Cn()})}(Ft,Vt):xe.getFastSwitchEnabled()?function(_n,An){const kn=je.getTime();let nr=1.5*(isNaN(_n.fragmentDuration)?1:_n.fragmentDuration);const yr=me.getRequests({state:Dt.FRAGMENT_MODEL_EXECUTED,time:kn+nr,threshold:0})[0];if(yr&&!x.isText){const Ki=E.getBufferLevel(),oi=ge.getAbandonmentStateFor(Ae.id,he);yr.bandwidth<_n.bandwidth&&Ki>=nr&&oi===j.ALLOW_LOAD?E.prepareForFastQualitySwitch(_n,An).then(()=>{We(kn,nr)}).catch(()=>{We(kn,nr)}):pt(_n,An)}else pt(_n,An)}(Ft,Vt):pt(Ft,Vt),X.pushPlayListTraceMetrics(new Date,Lt.REPRESENTATION_SWITCH_STOP_REASON),X.createPlaylistTraceMetrics(Ft.id,1e3*je.getTime(),je.getPlaybackRate())}function Nn(){Et(),In(),V=!1}function Cn(){me.abortRequests(),ie=!0,z.setCheckPlaybackQuality(!1),z.startScheduleTimer(),V=!1}function We(rt,Ft){me.abortRequests(),_t(rt+Ft),z.setCheckPlaybackQuality(!1),z.startScheduleTimer(),V=!1}function pt(rt,Ft){const Vt=me.getRequests({state:Dt.FRAGMENT_MODEL_LOADING});if(Vt&&Vt.length>0)return G.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),K.newRepresentation=rt,K.oldRepresentation=Ft,void(K.enabled=!0);E.prepareForDefaultQualitySwitch(rt,Ft).then(()=>{gt()}).catch(()=>{gt()})}function gt(){z.setCheckPlaybackQuality(!1),x.segmentAlignment||x.subSegmentAlignment?z.startScheduleTimer():Ne(),In(),V=!1}function vt(rt){G.info("onFragmentLoadingAbandoned request: "+rt.request.url+" has been aborted"),je.isSeeking()||z.getSwitchTrack()||V||(G.info("onFragmentLoadingAbandoned request: "+rt.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),rt.request&&rt.request.isInitializationRequest()?z.setInitSegmentRequired(!0):_t(rt.request.startTime+rt.request.duration/2),z.startScheduleTimer(0))}function sn(rt){G.info("OnFragmentLoadingCompleted for stream id "+Ae.id+" and media type "+he+" - Url:",rt.request?rt.request.url:"undefined",rt.request.range?", Range:"+rt.request.range:""),x.isText&&z.startScheduleTimer(0),rt.error&&rt.request.serviceLocation&&function(Ft){G.info("Fragment loading completed with an error"),Ft&&Ft.request&&Ft.request.type&&(Ft.request.type===Le.HTTPRequest.INIT_SEGMENT_TYPE?Ve({representationId:Ft.request.representation.id,sender:{}},!1):Ft.request.type===Le.HTTPRequest.MEDIA_SEGMENT_TYPE&&(_t(Ft.request.startTime+Ft.request.duration/2),Ke({},!1)))}(rt)}function Tn(){_t(je.getTime()),jt().startScheduleTimer()}function yt(rt){const Ft=rt.currentTrackInfo;if(!Ft)return;const Vt=C.find(_n=>_n.index===Ft.index&&_n.lang===Ft.lang);Vt&&Ot(new gn({newMediaInfo:Vt})).then(()=>{E.setIsBufferingCompleted(!1),_t(je.getTime()),z.setInitSegmentRequired(!0),z.startScheduleTimer()})}function Yt(rt){_t(rt.quotaExceededTime),on()}function tn(){return E?E.getBuffer():null}function jt(){return z}function on(){z&&z.clearScheduleTimer()}function at(){let rt,Ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;return isNaN(Ft)?rt=D?D.getCurrentRepresentation():null:((0,Gt.checkInteger)(Ft),rt=D?D.getRepresentationById(Ft):null),rt}function At(){return!!E&&E.getIsBufferingCompleted()}function Qt(rt){if(!te.get().streaming.enableManifestTimescaleMismatchFix)return;const Ft=rt.chunk,Vt=Ft.bytes,_n=at(Ft.representation.id);_n&&(_n.timescale=ne.getMediaTimescaleFromMoov(Vt))}function nn(rt){const Ft=rt.chunk,Vt=Ft.bytes,_n=at(Ft.representation.id);if(_n){let An;if(te.get().streaming.parseInbandPrft&&rt.request.type===Le.HTTPRequest.MEDIA_SEGMENT_TYPE){An=An||ne.parse(Vt);const yr=function(Ki,oi){const Pa=Ki.getBoxes("prft"),Js=[];return Pa.forEach(Yi=>{Js.push(function(ia,Ma){let ti="unknown";switch(ia.flags){case 0:ti=k.default.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:ti=k.default.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:ti=k.default.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}let zi=1e3*ia.ntp_timestamp_sec+ia.ntp_timestamp_frac/2**32*1e3;return zi=an(ce).getInstance().ntpToUTC(zi),{type:ti,ntpTimestamp:zi,mediaTime:ia.media_time/Ma}}(Yi,oi))}),Js}(An,_n.timescale);yr&&yr.length&&de.trigger(pe.default.INBAND_PRFT,{data:yr},{streamId:Ae.id,mediaType:he})}const kn=we.getEventsFor(_n.mediaInfo,null,Ae),nr=we.getEventsFor(_n,_n,Ae);if(kn&&kn.length>0||nr&&nr.length>0){const yr=rt.request;An=An||ne.parse(Vt);const Ki=function(oi,Pa,Js,Yi){try{const ia={},Ma=[],ti=Js.concat(Yi);for(let yi=0,Fo=ti.length;yi<Fo;yi++)ia[ti[yi].schemeIdUri+"/"+ti[yi].value]=ti[yi];const zi=oi.getBoxes("emsg");if(!zi||zi.length===0)return Ma;const Ui=oi.getBox("sidx"),Al=!Ui||isNaN(Ui.earliest_presentation_time)||isNaN(Ui.timescale)?Pa&&!isNaN(Pa.mediaStartTime)?Pa.mediaStartTime:0:Ui.earliest_presentation_time/Ui.timescale,kl=Math.max(Al,0),Oa=D.getCurrentRepresentation();for(let yi=0,Fo=zi.length;yi<Fo;yi++){const Rl=we.getEvent(zi[yi],ia,kl,Oa);Rl&&Ma.push(Rl)}return Ma}catch{return[]}}(An,yr,kn,nr);de.trigger(L.default.INBAND_EVENTS,{events:Ki},{streamId:Ae.id})}}}function Et(){const rt=je.getTime();te.get().streaming.buffer.flushBufferAtTrackSwitch&&je.seek(rt+.001,!1,!0),_t(rt),E.setSeekTarget(rt),z.startScheduleTimer()}function Ne(){const rt=je.getTime(),Ft=E.getContinuousBufferTimeForTargetTime(rt);_t(isNaN(Ft)?rt:Ft),z.startScheduleTimer()}function nt(rt){rt&&!isNaN(rt.time)&&(_t(rt.time),E.setSeekTarget(rt.time))}function _t(rt){S=rt,se=!0}return N={checkAndHandleCompletedBuffering:st,clearScheduleTimer:on,createBufferSinks:function(rt,Ft){const Vt=tn();return Vt?Promise.resolve(Vt):E?E.createBufferSink(x,rt,Ft):Promise.resolve(null)},dischargePreBuffer:function(){E.dischargePreBuffer()},finalisePlayList:function(rt,Ft){X.pushPlayListTraceMetrics(rt,Ft)},getAllMediaInfos:function(){return C},getBuffer:tn,getBufferController:function(){return E},getBufferLevel:function(){return E?E.getBufferLevel():0},getFragmentModel:function(){return me},getMediaInfo:function(){return x},getMediaSource:function(){return E.getMediaSource()},getRepresentation:at,getRepresentationController:function(){return D},getScheduleController:jt,getStreamId:ve,getStreamInfo:function(){return Ae},getType:fe,initialize:function(rt,Ft,Vt){$=Nt(ce).create({events:L.default,eventBus:de,streamInfo:Ae,timelineConverter:re,dashConstants:k.default,segmentBaseController:_.segmentBaseController,type:he}),I=kt(ce).create({streamInfo:Ae,type:he,timelineConverter:re,dashMetrics:X,mediaPlayerModel:xe,baseURLController:_.baseURLController,errHandler:J,segmentsController:$,settings:te,boxParser:ne,events:L.default,eventBus:de,errors:W,debug:(0,Be.default)(ce).getInstance(),dashConstants:k.default,constants:F.default,urlUtils:dn(ce).getInstance()}),B=Ae.manifestInfo.isDynamic,I.initialize(B),ge.registerStreamType(he,N),D=rn(ce).create({streamInfo:Ae,type:he,abrController:ge,dashMetrics:X,playbackController:je,timelineConverter:re,dashConstants:k.default,events:L.default,eventBus:de,errors:W,isDynamic:B,adapter:we,segmentsController:$}),E=function(_n,An){let kn=null;return _n?(kn=_n!==F.default.TEXT||An?it(ce).create({abrController:ge,capabilities:U,errHandler:J,fragmentModel:me,manifestModel:Ie,mediaController:Te,mediaPlayerModel:xe,playbackController:je,representationController:D,settings:te,streamInfo:Ae,textController:_e,type:_n}):Ct(ce).create({errHandler:J,fragmentModel:me,mimeType:Oe,settings:te,streamInfo:Ae,textController:_e,type:_n}),kn):(J.error(new Pe.default(W.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,W.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(he,Vt),E&&E.initialize(rt),z=Xt(ce).create({streamInfo:Ae,type:he,mimeType:Oe,adapter:we,dashMetrics:X,mediaPlayerModel:xe,fragmentModel:me,abrController:ge,playbackController:je,textController:_e,mediaController:Te,bufferController:E,representationController:D,settings:te}),z.initialize(Ft),S=0,se=!1,ie=!1},isBufferingCompleted:At,prepareInnerPeriodPlaybackSeeking:function(rt){return new Promise(Ft=>{if(E.hasBufferAtTime(rt.seekTime))return E.pruneBuffer(),Ce(E.getContinuousBufferTimeForTargetTime(rt.seekTime))&&E.setIsBufferingCompleted(!0),void Ft();on(),me.abortRequests(),E.prepareForPlaybackSeek().then(()=>{const Vt=E.getAllRangesWithSafetyFactor(rt.seekTime);return E.clearBuffers(Vt)}).then(()=>{const Vt=E.getContinuousBufferTimeForTargetTime(rt.seekTime);if(Ce(Vt))E.setIsBufferingCompleted(!0),Ft();else{const _n=isNaN(Vt)?rt.seekTime:Vt;_t(_n),E.setSeekTarget(_n);const An=[];An.push(E.updateAppendWindow());const kn=at();An.push(E.updateBufferTimestampOffset(kn)),Promise.all(An).then(()=>{z.setInitSegmentRequired(!0),z.setCheckPlaybackQuality(!1),z.startScheduleTimer(),Ft()})}}).catch(Vt=>{G.error(Vt)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise((rt,Ft)=>{try{on(),me.abortRequests(),E.prepareForPlaybackSeek().then(()=>E.pruneAllSafely()).then(()=>{rt()})}catch(Vt){Ft(Vt)}})},prepareQualityChange:function(rt){rt.newRepresentation&&(K&&K.enabled&&G.warn(`Canceling queued representation switch to ${K.newRepresentation.id} for ${he}`),rt.isAdaptationSetSwitch?(G.debug(`Preparing quality switch to different AdaptationSet for type ${he}`),function(Ft){const Vt=Ft.newRepresentation;V=!0,on(),z.setSwitchTrack(!0);const _n=Vt.mediaInfo;Zt(_n),Ot(new gn({newMediaInfo:_n,newRepresentation:Vt})).then(()=>{cn(Ft)})}(rt)):(G.debug(`Preparing quality within the same AdaptationSet for type ${he}`),function(Ft){const Vt=Ft.newRepresentation;V=!0,on(),D.prepareQualityChange(Vt),cn(Ft)}(rt)))},prepareTrackSwitch:function(rt){let Ft=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Promise(Vt=>{G.debug(`Preparing track switch for type ${he}`);const _n=he===F.default.TEXT||Ft||te.get().streaming.trackSwitchMode[he]===F.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&je.getTimeToStreamEnd(Ae)>te.get().streaming.buffer.stallThreshold;E.getIsBufferingCompleted()&&!_n?function(An){return new Promise(kn=>{const nr=D.getCurrentRepresentation();E.prepareForNonReplacementTrackSwitch(nr,An).then(()=>{de.trigger(L.default.BUFFERING_COMPLETED,{},{streamId:Ae.id,mediaType:he}),kn()}).catch(()=>{de.trigger(L.default.BUFFERING_COMPLETED,{},{streamId:Ae.id,mediaType:he}),kn()})})}(rt).then(()=>{Vt()}):(z.setSwitchTrack(!0),_n?function(An){return new Promise(kn=>{de.trigger(L.default.BUFFER_REPLACEMENT_STARTED,{mediaType:he,streamId:Ae.id},{mediaType:he,streamId:Ae.id}),me.abortRequests();const nr=at();E.prepareForReplacementTrackSwitch(nr,An).then(()=>{Et(),kn()}).catch(()=>{Et(),kn()})})}(rt).then(()=>{Vt()}):function(An){return new Promise(kn=>{const nr=()=>{const yr=me.getRequests({state:Dt.FRAGMENT_MODEL_LOADING});if(yr&&yr.length!==0)de.once(pe.default.FRAGMENT_LOADING_COMPLETED,nr,N);else{const Ki=at();E.prepareForNonReplacementTrackSwitch(Ki,An).then(()=>{Ne(),kn()}).catch(oi=>{G.error(oi),Ne(),kn()})}};nr()})}(rt).then(()=>{Vt()}))})},probeNextRequest:function(){const rt=at();return I.getNextSegmentRequestIdempotent(x,rt)},reset:function(rt,Ft){I&&I.reset(),E&&(E.reset(rt,Ft),E=null),z&&(z.reset(),z=null),D&&(D.reset(),D=null),$&&($=null),ge&&ge.unRegisterStreamType(ve(),he),de.off(L.default.INIT_FRAGMENT_NEEDED,Ve,N),de.off(L.default.MEDIA_FRAGMENT_NEEDED,Ke,N),de.off(L.default.INIT_FRAGMENT_LOADED,Qt,N),de.off(L.default.MEDIA_FRAGMENT_LOADED,nn,N),de.off(L.default.BUFFER_LEVEL_STATE_CHANGED,St,N),de.off(L.default.BUFFER_CLEARED,Bt,N),de.off(L.default.SEEK_TARGET,nt,N),de.off(L.default.FRAGMENT_LOADING_ABANDONED,vt,N),de.off(L.default.FRAGMENT_LOADING_COMPLETED,sn,N),de.off(L.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Tn,N),de.off(L.default.SET_NON_FRAGMENTED_TEXT,yt,N),de.off(L.default.QUOTA_EXCEEDED,Yt,N),de.off(L.default.SOURCE_BUFFER_ERROR,Ht,N),de.off(L.default.BYTES_APPENDED_END_FRAGMENT,hn,N),ke(),he=null,Ae=null},selectMediaInfo:Ot,setExplicitBufferingTime:_t,setMediaInfoArray:function(rt){C=rt},setMediaSource:function(rt){return E.setMediaSource(rt,x)},setTrackSwitchInProgress:function(rt){ae=rt},updateStreamInfo:function(rt){return Ae=rt,At()?Promise.resolve():E.updateAppendWindow()}},G=(0,Be.default)(ce).getInstance().getLogger(N),ke(),de.on(L.default.INIT_FRAGMENT_NEEDED,Ve,N),de.on(L.default.MEDIA_FRAGMENT_NEEDED,Ke,N),de.on(L.default.INIT_FRAGMENT_LOADED,Qt,N),de.on(L.default.MEDIA_FRAGMENT_LOADED,nn,N),de.on(L.default.BUFFER_LEVEL_STATE_CHANGED,St,N),de.on(L.default.BUFFER_CLEARED,Bt,N),de.on(L.default.SEEK_TARGET,nt,N),de.on(L.default.FRAGMENT_LOADING_ABANDONED,vt,N),de.on(L.default.FRAGMENT_LOADING_COMPLETED,sn,N),de.on(L.default.QUOTA_EXCEEDED,Yt,N),de.on(L.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Tn,N),de.on(L.default.SET_NON_FRAGMENTED_TEXT,yt,N),de.on(L.default.SOURCE_BUFFER_ERROR,Ht,N),de.on(L.default.BYTES_APPENDED_END_FRAGMENT,hn,N),N}Mn.__dashjs_factory_name="StreamProcessor";var rr=Ee.default.getClassFactory(Mn),Tr=class{constructor(){this.streamId=null,this.segmentType=null,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representation=null,this.endFragment=null}},or=t(7263);function Ar(){let _,E;function S(){E&&(E.onloadend=E.onerror=E.onprogress=E.onload=null,E.abort(),E=null)}return _={load:function(x,I){if(E=null,E=new XMLHttpRequest,E.open(x.method,x.url,!0),x.responseType&&(E.responseType=x.responseType),x.headers)for(let N in x.headers){let B=x.headers[N];B&&E.setRequestHeader(N,B)}return E.withCredentials=x.credentials==="include",E.timeout=x.timeout,E.onload=function(){I.url=this.responseURL,I.status=this.status,I.statusText=this.statusText,I.headers=or.default.parseHttpHeaders(this.getAllResponseHeaders()),I.data=this.response},x.customData&&(E.onloadend=x.customData.onloadend,E.onprogress=x.customData.onprogress,E.onabort=x.customData.onabort,E.ontimeout=x.customData.ontimeout),E.send(),x.customData.abort=S.bind(this),!0},abort:S,getXhr:function(){return E},reset:function(){S(),_=null},resetInitialSettings:function(){S()}},_}Ar.__dashjs_factory_name="XHRLoader";var Rr=Ee.default.getClassFactory(Ar);function Lr(){const _=this.context,E=(0,Q.default)(_).getInstance();let S,x,I;function N(D,z,$){D.customData.reader.read().then($).catch(function(){B(D)})}function B(D){D.customData.onloadend&&D.customData.onloadend()}function G(){return typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now()}function C(){if(this.customData.abortController)this.customData.abortController.abort();else if(this.customData.reader)try{this.customData.reader.cancel(),this.onabort()}catch{}}function K(D,z){try{if((D=D.filter($=>$.bytes>z/4/D.length)).length>1){let $=0;const ie=(D[D.length-1].timestamp-D[0].timestamp)/D.length;return D.forEach((se,ae)=>{const ce=D[ae+1];if(ce){const de=ce.timestamp-se.timestamp;$+=de<ie?de:0}}),$}return null}catch{return null}}function V(D,z){return 8*D/z}return I=(0,Be.default)(_).getInstance().getLogger(S),S={abort:C,calculateDownloadedTime:K,load:function(D,z){const $=function(ae){const ce=new Headers;if(ae.headers)for(let de in ae.headers){let ge=ae.headers[de];ge&&ce.append(de,ge)}return ce}(D),ie=function(ae){let ce;return typeof window.AbortController=="function"&&(ce=new AbortController,ae.customData.abortController=ce,ce.signal.onabort=ae.customData.onabort),ae.customData.abort=C.bind(ae),ce}(D),se=function(ae,ce,de){return new Request(ae.url,{method:ae.method,headers:ce,credentials:ae.credentials,signal:de?de.signal:void 0})}(D,$,ie);fetch(se).then(ae=>{(function(ce,de,ge){(function(je,ee){je.status=ee.status,je.statusText=ee.statusText,je.url=ee.url;const te={};for(const Ae of ee.headers.keys())te[Ae]=ee.headers.get(Ae);je.headers=te})(ge,ce),ce.ok||de.customData.onloadend();let we=0,ne=!1,U=new Uint8Array,X=0;de.customData.reader=ce.body.getReader();let J=[],me=[],Ie=[],Te=!0;const xe=E.get().streaming.abr.throughput.lowLatencyDownloadTimeCalculationMode,Oe=je=>{let{value:ee,done:te}=je;te?function(){if(U){const Ae=function(){let _e=null;return xe===F.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING?_e=function(){const re=function(he,ve){try{let fe,ke;if(fe=he.slice(0,-1),ke=ve.slice(0,-1),fe.length!==ke.length&&I.warn(`[FetchLoader] Moof and Mdat data arrays have different lengths. Moof: ${fe.length}, Mdat: ${ke.length}`),fe.length<=1)return null;let Ce=[],Ve=0,Ke=0;for(let st=0;st<fe.length;st++)if(fe[st]&&ke[st]){let ft=ke[st].timestamp-fe[st].timestamp;if(ft>1){const St=V(ke[st].bytes,ft);Ce.push(St),Ke=0}else{Ke===0&&(Ke=fe[st].timestamp,Ve=0);let St=ke[st].timestamp-Ke;if(St>1){Ve+=ke[st].bytes;const Bt=V(Ve,St);Ce.push(Bt),Ke=0}else Ve+=ke[st].bytes}}return Ce.length>0?Ce.reduce((st,ft)=>st+ft,0)/Ce.length:null}catch{return null}}(me,Ie);return re?8*we/re:null}():xe===F.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.DOWNLOADED_DATA&&(_e=K(J,we)),_e}();de.customData.onprogress({loaded:we,total:we,lengthComputable:!0,time:Ae}),ge.data=U.buffer}de.customData.onloadend()}():(ee&&ee.length>0&&function(Ae){U=function(re,he){if(re.length===0)return he;const ve=new Uint8Array(re.length+he.length);return ve.set(re),ve.set(he,re.length),ve}(U,Ae),we+=Ae.length,J.push({timestamp:G(),bytes:Ae.length}),xe===F.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING&&Te&&x.findLastTopIsoBoxCompleted(["moof"],U,X).found&&(Te=!1,me.push({timestamp:G()}));const _e=x.findLastTopIsoBoxCompleted(["moov","mdat"],U,X);_e.found?function(re){const he=function(ve){let fe;return ve===U.length?(fe=U,U=new Uint8Array):(fe=new Uint8Array(U.subarray(0,ve)),U=U.subarray(ve)),fe}(re.startOffsetOfLastFoundTargetBox+re.sizeOfLastFoundTargetBox);xe!==F.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING||Te||(Te=!0,Ie.push({timestamp:G(),bytes:he.length})),de.customData.onprogress({data:he.buffer,lengthComputable:!1,noTrace:!0}),X=0}(_e):function(re){X=re.startOffsetOfLastCompletedBox+re.sizeOfLastCompletedBox,ne||(de.customData.onprogress({lengthComputable:!1,noTrace:!0}),ne=!0)}(_e)}(ee),N(de,0,Oe))};N(de,0,Oe)})(ae,D,z)}).catch(()=>{B(D)})},reset:function(){},setConfig:function(D){x=D.boxParser}},S}Lr.__dashjs_factory_name="FetchLoader";var ji=Ee.default.getClassFactory(Lr),qi=t(913),wa=class{constructor(){this.period=null,this.index=-1,this.type=null}};class ai{constructor(E,S,x,I){this.url=E||"",this.serviceLocation=S||E||"",this.dvbPriority=x||1,this.dvbWeight=I||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}}}ai.DEFAULT_DVB_PRIORITY=1,ai.DEFAULT_DVB_WEIGHT=1;var mi=ai,ci=class{constructor(){this.schemeIdUri=null,this.value=null,this.id=null}init(_){_&&(this.schemeIdUri=_.schemeIdUri?_.schemeIdUri:null,this.value=_.value!==null&&_.value!==void 0?_.value.toString():null,this.id=_.id?_.id:null,_[k.default.DVB_URL]&&(this.dvbUrl=_[k.default.DVB_URL]),_[k.default.DVB_MIMETYPE]&&(this.dvbMimeType=_[k.default.DVB_MIMETYPE]),_[k.default.DVB_FONTFAMILY]&&(this.dvbFontFamily=_[k.default.DVB_FONTFAMILY]))}inArray(_){return!!_&&_.some(E=>this.schemeIdUri===E.schemeIdUri&&(this.value?this.value.toString().match(E.value):"".match(E.value)))}},jl=class extends ci{constructor(){super(),this.version=null,this.sessionID=null,this.contentID=null,this.mode=null,this.keys=null,this.includeInRequests=null}init(_){super.init(_),_&&(this.version=_.version,this.sessionID=_.sessionID,this.contentID=_.contentID,this.mode=_.mode??"query",this.keys=_.keys?_.keys.split(" "):null,this.includeInRequests=_.includeInRequests?_.includeInRequests.split(" "):["segment"],this.schemeIdUri=_.schemeIdUri)}},ql=class{constructor(){this.adaptationSets=null,this.adaptationSetsArray=[],this.cmcdParameters=null,this.serviceLocations=null,this.serviceLocationsArray=[]}},qr=class extends ci{constructor(){super(),this.ref=null,this.refId=null,this.robustness=null,this.keyId=null,this.cencDefaultKid=null,this.pssh=null,this.pro=null,this.laUrl=null}init(_){super.init(_),_&&(this.ref=_.hasOwnProperty(k.default.REF)?_[k.default.REF]:null,this.refId=_.hasOwnProperty(k.default.REF_ID)?_[k.default.REF_ID]:null,this.robustness=_.hasOwnProperty(k.default.ROBUSTNESS)?_[k.default.ROBUSTNESS]:null,this.cencDefaultKid=_.hasOwnProperty(k.default.CENC_DEFAULT_KID)?_[k.default.CENC_DEFAULT_KID]:null,this.pssh=_.hasOwnProperty(k.default.PSSH)?_[k.default.PSSH]:null,this.pro=_.hasOwnProperty(k.default.PRO)?_[k.default.PRO]:null,this.laUrl=_.hasOwnProperty(k.default.LA_URL)?_[k.default.LA_URL]:_.hasOwnProperty(k.default.LA_URL_LOWER_CASE)?_[k.default.LA_URL_LOWER_CASE]:null)}mergeAttributesFromReference(_){["schemeIdUri","value","id","robustness","cencDefaultKid","pro","pssh","laUrl"].forEach(E=>{this[E]===null&&(this[E]=_[E])})}},Gl=class{constructor(){this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0}},us=class{constructor(){this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN,this.parsedMessageData=null}},oo=class{constructor(){this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0}},$t=class{constructor(){this.availabilityEndTime=Number.POSITIVE_INFINITY,this.availabilityStartTime=null,this.manifest=null,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.mediaPresentationDuration=NaN,this.minimumUpdatePeriod=NaN,this.publishTime=null,this.suggestedPresentationDelay=0,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY}},Sn=class{constructor(_,E){this.url=_||"",this.serviceLocation=E||null,this.queryParams={}}},On=t(7393),ar=class{constructor(_,E,S){this.url=_||"",this.serviceLocation=E||null,this.ttl=S||NaN,this.queryParams={}}};class Wn{constructor(){this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null,this.isEncrypted=!1}}Wn.DEFAULT_ID="defaultId";var Yr=Wn,lr=class{constructor(){this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null}},fr=class{constructor(){this.absoluteIndex=NaN,this.adaptation=null,this.availabilityTimeComplete=!0,this.availabilityTimeOffset=0,this.bandwidth=NaN,this.bitrateInKbit=NaN,this.bitsPerPixel=NaN,this.codecFamily=null,this.codecPrivateData=null,this.codecs=null,this.essentialProperties=[],this.fragmentDuration=null,this.frameRate=null,this.height=NaN,this.id=null,this.indexRange=null,this.initialization=null,this.maxPlayoutRate=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.mediaInfo=null,this.mimeType=null,this.mseTimeOffset=NaN,this.pixelsPerSecond=NaN,this.presentationTimeOffset=0,this.qualityRanking=NaN,this.range=null,this.scanType=null,this.segments=null,this.segmentDuration=NaN,this.segmentInfoType=null,this.supplementalProperties=[],this.startNumber=1,this.timescale=1,this.width=NaN,this.endNumber=null}hasInitialization(){return this.initialization!==null||this.range!==null}hasSegments(){return this.segmentInfoType!==k.default.BASE_URL&&this.segmentInfoType!==k.default.SEGMENT_BASE&&!this.indexRange}},hr=t(5717);function ur(){let _,E,S,x;const I=this.context,N=dn(I).getInstance(),B=Number.isInteger||function(ee){return typeof ee=="number"&&isFinite(ee)&&Math.floor(ee)===ee};function G(ee,te){if(!ee)throw new Error("adaptation is not defined");if(!te)throw new Error("type is not defined");if(ee.Representation&&ee.Representation.length){const _e=U(ee.Representation[0]);if(_e&&_e.some(re=>F.default.THUMBNAILS_SCHEME_ID_URIS.indexOf(re.schemeIdUri)>=0))return te===F.default.IMAGE}if(ee.ContentComponent&&ee.ContentComponent.length>0){if(ee.ContentComponent.length>1)return te===F.default.MUXED;if(ee.ContentComponent[0].contentType===te)return!0}const Ae=te===F.default.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(te);if(ee.Representation&&ee.Representation.length){const _e=ee.Representation[0].codecs;if(Ae.test(_e))return!0}if(ee.hasOwnProperty(k.default.MIME_TYPE))return Ae.test(ee.mimeType);if(ee.Representation){let _e;for(let re=0;re<ee.Representation.length;re++)if(_e=ee.Representation[re],_e.hasOwnProperty(k.default.MIME_TYPE))return Ae.test(_e.mimeType)}return!1}function C(ee){if(!ee)throw new Error("adaptation is not defined");if(ee.hasOwnProperty(k.default.SEGMENT_TEMPLATE)||ee.hasOwnProperty(k.default.SEGMENT_TIMELINE)||ee.hasOwnProperty(k.default.SEGMENT_LIST)||ee.hasOwnProperty(k.default.SEGMENT_BASE))return!0;if(ee.Representation&&ee.Representation.length>0){const te=ee.Representation[0];if(te.hasOwnProperty(k.default.SEGMENT_TEMPLATE)||te.hasOwnProperty(k.default.SEGMENT_TIMELINE)||te.hasOwnProperty(k.default.SEGMENT_LIST)||te.hasOwnProperty(k.default.SEGMENT_BASE))return!0}return!1}function K(ee){return G(ee,F.default.VIDEO)}function V(ee){return G(ee,F.default.TEXT)}function D(ee){return G(ee,F.default.IMAGE)}function z(ee){return ee&&ee.Representation&&ee.Representation.sort((te,Ae)=>te.bandwidth-Ae.bandwidth),ee}function $(ee,te){return ee&&ee.Period&&B(te)&&ee.Period[te]?ee.Period[te].AdaptationSet:[]}function ie(ee){return ee&&ee.Period?ee.Period:[]}function se(ee){const te=ae(ee);return te&&te.length>0}function ae(ee){let te=[];if(!ee)return te;const Ae=ce(ee);return te=te.concat(Ae),ee.hasOwnProperty(k.default.ADAPTATION_SET)&&ee[k.default.ADAPTATION_SET].length>0&&ee[k.default.ADAPTATION_SET].forEach(_e=>{const re=ce(_e);te=te.concat(re)}),te}function ce(ee){return ee&&ee.hasOwnProperty(k.default.CONTENT_PROTECTION)&&ee.ContentProtection.length!==0?ee[k.default.CONTENT_PROTECTION].map(te=>{const Ae=new qr;return Ae.init(te),Ae}):[]}function de(ee){let te=!1;return ee&&ee.hasOwnProperty("type")&&(te=ee.type===k.default.DYNAMIC),te}function ge(ee){if(!ee)return null;const te=ee[k.default.FRAMERATE];if(!te)return null;if(typeof te=="string"&&te.includes("/")){const[Ae,_e]=te.split("/").map(re=>parseInt(re,10));if(!isNaN(Ae)&&!isNaN(_e)&&_e!==0)return Ae/_e}return parseInt(te)}function we(ee,te){return te&&te.hasOwnProperty(ee)&&te[ee].length?te[ee].map(Ae=>{const _e=new ci;return _e.init(Ae),_e}):[]}function ne(ee,te){if(!te)return[];let Ae=function(_e,re){if(!re||!re.length)return[];let he=re[0][_e]||[];return he.length===0?[]:re.length===1?he:he.filter(ve=>re.slice(1).every(fe=>fe.hasOwnProperty(_e)&&fe[_e].some(ke=>ke.schemeIdUri===ve.schemeIdUri&&ke.value===ve.value)))}(ee,te[k.default.REPRESENTATION]);return te.hasOwnProperty(ee)&&te[ee].length&&Ae.push(...te[ee]),Ae.map(_e=>{const re=new ci;return re.init(_e),re})}function U(ee){return we(k.default.ESSENTIAL_PROPERTY,ee)}function X(ee){return we(k.default.SUPPLEMENTAL_PROPERTY,ee)}function J(ee){if(!ee||!ee.S)return NaN;let te=ee.S[0],Ae=ee.S[1];return te.hasOwnProperty("d")?te.d:Ae.t-te.t}function me(ee){const te=ee.presentationTimeOffset;return ee.adaptation.period.start-te}function Ie(ee,te){if(!ee)throw new Error("Period cannot be null or undefined");let Ae=Yr.DEFAULT_ID+"_"+te;return ee.hasOwnProperty(k.default.ID)&&ee.id.toString().length>0&&ee.id!=="__proto__"&&(Ae=ee.id.toString()),Ae}function Te(ee,te,Ae){const _e=[];let re;if(!ee)return _e;for(re=0;re<ee.length;re++){const he=new oo;if(he.timescale=1,he.representation=te,!ee[re].hasOwnProperty(F.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");he.schemeIdUri=ee[re].schemeIdUri,ee[re].hasOwnProperty(k.default.TIMESCALE)&&(he.timescale=ee[re].timescale),ee[re].hasOwnProperty(k.default.VALUE)&&(he.value=ee[re].value),_e.push(he),he.period=Ae}return _e}function xe(ee){const te=[],Ae=ee.BaseURL||[ee.baseUri];let _e=!1;return Ae.some(re=>{if(re){const he=new mi;let ve=re.__text||re;return N.isRelative(ve)&&(_e=!0,ee.baseUri&&(ve=N.resolve(ve,ee.baseUri))),he.url=ve,re.hasOwnProperty(k.default.SERVICE_LOCATION)&&re.serviceLocation.length?he.serviceLocation=re.serviceLocation:he.serviceLocation=ve,re.hasOwnProperty(k.default.DVB_PRIORITY)&&(he.dvbPriority=re[k.default.DVB_PRIORITY]),re.hasOwnProperty(k.default.DVB_WEIGHT)&&(he.dvbWeight=re[k.default.DVB_WEIGHT]),re.hasOwnProperty(k.default.AVAILABILITY_TIME_OFFSET)&&(he.availabilityTimeOffset=re[k.default.AVAILABILITY_TIME_OFFSET]),re.hasOwnProperty(k.default.AVAILABILITY_TIME_COMPLETE)&&(he.availabilityTimeComplete=re[k.default.AVAILABILITY_TIME_COMPLETE]!=="false"),te.push(he),_e}}),te}function Oe(ee){const te=new Gl;return te.serverUrl=ee.__text,ee.hasOwnProperty(k.default.DEFAULT_SERVICE_LOCATION)&&(te.defaultServiceLocation=ee[k.default.DEFAULT_SERVICE_LOCATION],te.defaultServiceLocationArray=te.defaultServiceLocation.split(" ")),ee.hasOwnProperty(k.default.QUERY_BEFORE_START)&&(te.queryBeforeStart=ee[k.default.QUERY_BEFORE_START].toLowerCase()==="true"),ee.hasOwnProperty(k.default.CLIENT_REQUIREMENT)&&(te.clientRequirement=ee[k.default.CLIENT_REQUIREMENT].toLowerCase()!=="false"),te}function je(ee){const te=new ql;return ee.hasOwnProperty(k.default.CMCD_PARAMETERS)&&ee[k.default.CMCD_PARAMETERS].schemeIdUri===F.default.CTA_5004_2023_SCHEME&&(te.cmcdParameters=new jl,te.cmcdParameters.init(ee[k.default.CMCD_PARAMETERS])),ee.hasOwnProperty(k.default.SERVICE_LOCATIONS)&&ee[k.default.SERVICE_LOCATIONS]!==""&&(te.serviceLocations=ee[k.default.SERVICE_LOCATIONS],te.serviceLocationsArray=te.serviceLocations.toString().split(" ")),ee.hasOwnProperty(k.default.ADAPTATION_SETS)&&ee[k.default.ADAPTATION_SETS]!==""&&(te.adaptationSets=ee[k.default.ADAPTATION_SETS],te.adaptationSetsArray=te.adaptationSets.toString().split(" ")),te}return _={getAccessibilityForAdaptation:function(ee){return ee&&ee.hasOwnProperty(k.default.ACCESSIBILITY)&&ee[k.default.ACCESSIBILITY].length?ee[k.default.ACCESSIBILITY].map(te=>{const Ae=new ci;return Ae.init(te),Ae}):[]},getAdaptationForId:function(ee,te,Ae){const _e=$(te,Ae);let re,he;for(re=0,he=_e.length;re<he;re++)if(_e[re].hasOwnProperty(k.default.ID)&&_e[re].id===ee)return _e[re];return null},getAdaptationForIndex:function(ee,te,Ae){const _e=$(te,Ae);return _e.length>0&&B(ee)?_e[ee]:null},getAdaptationsForPeriod:function(ee){const te=ee&&B(ee.index)?ee.mpd.manifest.Period[ee.index]:null,Ae=[];let _e,re,he;if(te&&te.AdaptationSet)for(he=0;he<te.AdaptationSet.length;he++)re=te.AdaptationSet[he],_e=new wa,re.hasOwnProperty(k.default.ID)&&(_e.id=re.id),_e.index=he,_e.period=ee,G(re,F.default.MUXED)?_e.type=F.default.MUXED:G(re,F.default.AUDIO)?_e.type=F.default.AUDIO:K(re)?_e.type=F.default.VIDEO:V(re)?_e.type=F.default.TEXT:D(re)?_e.type=F.default.IMAGE:E.warn("Unknown Adaptation stream type"),Ae.push(_e);return Ae},getAdaptationsForType:function(ee,te,Ae){const _e=$(ee,te);let re,he;const ve=[];for(re=0,he=_e.length;re<he;re++)G(_e[re],Ae)&&ve.push(z(_e[re]));return ve},getAudioChannelConfigurationForAdaptation:function(ee){return ee&&ee.hasOwnProperty(k.default.AUDIO_CHANNEL_CONFIGURATION)&&ee[k.default.AUDIO_CHANNEL_CONFIGURATION].length?ee[k.default.AUDIO_CHANNEL_CONFIGURATION].map(te=>{const Ae=new ci;return Ae.init(te),Ae}):[]},getAudioChannelConfigurationForRepresentation:function(ee){return ee&&ee.hasOwnProperty(k.default.AUDIO_CHANNEL_CONFIGURATION)&&ee[k.default.AUDIO_CHANNEL_CONFIGURATION].length?ee[k.default.AUDIO_CHANNEL_CONFIGURATION].map(te=>{const Ae=new ci;return Ae.init(te),Ae}):[]},getAvailabilityStartTime:function(ee){return ee&&ee.hasOwnProperty(k.default.AVAILABILITY_START_TIME)&&ee.availabilityStartTime!==null?ee.availabilityStartTime.getTime():null},getBandwidth:function(ee){return ee&&ee.bandwidth?ee.bandwidth:NaN},getBaseURLsFromElement:xe,getBitrateListForAdaptation:function(ee){const te=z(ee);return(te&&te.Representation?te.Representation:[]).map(Ae=>({bandwidth:Ae.bandwidth,width:Ae.width||0,height:Ae.height||0,scanType:Ae.scanType||null,id:Ae.id||null}))},getCodec:function(ee,te,Ae){let _e=null;if(ee&&ee.Representation&&ee.Representation.length>0){const re=B(te)&&te>=0&&te<ee.Representation.length?ee.Representation[te]:ee.Representation[0];re&&(_e=re.mimeType+';codecs="'+re.codecs+'"',Ae&&re.width!==void 0&&(_e+=';width="'+re.width+'";height="'+re.height+'"'))}return _e&&(_e=_e.replace(/\sprofiles=[^;]*/g,"")),_e},getCombinedEssentialPropertiesForAdaptationSet:function(ee){return ne(k.default.ESSENTIAL_PROPERTY,ee)},getCombinedSupplementalPropertiesForAdaptationSet:function(ee){return ne(k.default.SUPPLEMENTAL_PROPERTY,ee)},getContentProtectionByAdaptation:function(ee){return ce(ee)},getContentProtectionByManifest:function(ee){let te=[];if(!ee)return te;const Ae=ce(ee);return te=te.concat(Ae),ee.hasOwnProperty(k.default.PERIOD)&&ee[k.default.PERIOD].length>0&&ee[k.default.PERIOD].forEach(_e=>{const re=ae(_e);te=te.concat(re)}),te},getContentProtectionByPeriod:ae,getContentSteering:function(ee){if(ee&&ee.hasOwnProperty(k.default.CONTENT_STEERING))return Oe(ee[k.default.CONTENT_STEERING][0])},getDuration:function(ee){let te;return te=ee&&ee.hasOwnProperty(k.default.MEDIA_PRESENTATION_DURATION)?ee.mediaPresentationDuration:ee&&ee.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,te},getEssentialPropertiesForAdaptationSet:function(ee){return we(k.default.ESSENTIAL_PROPERTY,ee)},getEssentialPropertiesForRepresentation:U,getEventStreamForAdaptationSet:function(ee,te,Ae){let _e,re,he;return ee&&ee.Period&&te&&te.period&&B(te.period.index)&&(re=ee.Period[te.period.index],re&&re.AdaptationSet&&B(te.index)&&(he=re.AdaptationSet[te.index],he&&(_e=he.InbandEventStream))),Te(_e,null,Ae)},getEventStreamForRepresentation:function(ee,te,Ae){let _e,re,he,ve;return ee&&ee.Period&&te&&te.adaptation&&te.adaptation.period&&B(te.adaptation.period.index)&&(re=ee.Period[te.adaptation.period.index],re&&re.AdaptationSet&&B(te.adaptation.index)&&(he=re.AdaptationSet[te.adaptation.index],he&&he.Representation&&B(te.index)&&(ve=he.Representation[te.index],ve&&(_e=ve.InbandEventStream)))),Te(_e,te,Ae)},getEventsForPeriod:function(ee){const te=ee&&ee.mpd&&ee.mpd.manifest?ee.mpd.manifest:null,Ae=te?te.Period:null,_e=Ae&&ee&&B(ee.index)?Ae[ee.index].EventStream:null,re=[];let he,ve;if(_e)for(he=0;he<_e.length;he++){const fe=new oo;if(fe.period=ee,fe.timescale=1,!_e[he].hasOwnProperty(F.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(fe.schemeIdUri=_e[he][F.default.SCHEME_ID_URI],_e[he].hasOwnProperty(k.default.TIMESCALE)&&(fe.timescale=_e[he][k.default.TIMESCALE]),_e[he].hasOwnProperty(k.default.VALUE)&&(fe.value=_e[he][k.default.VALUE]),_e[he].hasOwnProperty(k.default.PRESENTATION_TIME_OFFSET)&&(fe.presentationTimeOffset=_e[he][k.default.PRESENTATION_TIME_OFFSET]),ve=0;_e[he].Event&&ve<_e[he].Event.length;ve++){const ke=_e[he].Event[ve],Ce=new us;Ce.presentationTime=0,Ce.eventStream=fe,ke.hasOwnProperty(k.default.PRESENTATION_TIME)&&(Ce.presentationTime=ke.presentationTime);const Ve=fe.presentationTimeOffset?fe.presentationTimeOffset/fe.timescale:0;Ce.calculatedPresentationTime=Ce.presentationTime/fe.timescale+ee.start-Ve,ke.hasOwnProperty(k.default.DURATION)&&(Ce.duration=ke.duration/fe.timescale),ke.hasOwnProperty(k.default.ID)?Ce.id=parseInt(ke.id):Ce.id=null,ke.Signal&&ke.Signal.Binary?Ce.messageData=x.decodeArray(ke.Signal.Binary.toString()):Ce.messageData=ke.messageData||ke.__cdata||ke.__text,re.push(Ce)}}return re},getFramerate:ge,getId:function(ee){return ee&&ee[k.default.ID]||null},getIndexForAdaptation:function(ee,te,Ae){if(!ee)return-1;const _e=$(te,Ae);for(let re=0;re<_e.length;re++)if((0,On.default)(I).getInstance().areEqual(_e[re],ee))return re;return-1},getIsDynamic:de,getIsFragmented:C,getIsText:V,getIsTypeOf:G,getLabelsForAdaptation:function(ee){if(!ee||!ee.Label)return[];const te=[];for(let Ae=0;Ae<ee.Label.length;Ae++)te.push({lang:ee.Label[Ae].lang,text:ee.Label[Ae].__text||ee.Label[Ae]});return te},getLanguageForAdaptation:function(ee){let te="";return ee&&ee.hasOwnProperty(k.default.LANG)&&(te=ee.lang),te},getLocation:function(ee){return ee&&ee.hasOwnProperty(k.default.LOCATION)?ee[k.default.LOCATION].map(te=>{const Ae=te.__text||te,_e=te.hasOwnProperty(k.default.SERVICE_LOCATION)?te[k.default.SERVICE_LOCATION]:null;return new Sn(Ae,_e)}):[]},getManifestUpdatePeriod:function(ee){let te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Ae=NaN;return ee&&ee.hasOwnProperty(k.default.MINIMUM_UPDATE_PERIOD)&&(Ae=ee.minimumUpdatePeriod),isNaN(Ae)?Ae:Math.max(Ae-te,1)},getMimeType:function(ee){return ee&&ee.Representation&&ee.Representation.length>0?ee.Representation[0].mimeType:null},getMpd:function(ee){const te=new $t;return ee&&(te.manifest=ee,ee.hasOwnProperty(k.default.AVAILABILITY_START_TIME)?te.availabilityStartTime=new Date(ee.availabilityStartTime.getTime()):ee.loadedTime&&(te.availabilityStartTime=new Date(ee.loadedTime.getTime())),ee.hasOwnProperty(k.default.AVAILABILITY_END_TIME)&&(te.availabilityEndTime=new Date(ee.availabilityEndTime.getTime())),ee.hasOwnProperty(k.default.MINIMUM_UPDATE_PERIOD)&&(te.minimumUpdatePeriod=ee.minimumUpdatePeriod),ee.hasOwnProperty(k.default.MEDIA_PRESENTATION_DURATION)&&(te.mediaPresentationDuration=ee.mediaPresentationDuration),ee.hasOwnProperty(k.default.SUGGESTED_PRESENTATION_DELAY)&&(te.suggestedPresentationDelay=ee.suggestedPresentationDelay),ee.hasOwnProperty(k.default.TIMESHIFT_BUFFER_DEPTH)&&(te.timeShiftBufferDepth=ee.timeShiftBufferDepth),ee.hasOwnProperty(k.default.MAX_SEGMENT_DURATION)&&(te.maxSegmentDuration=ee.maxSegmentDuration),ee.hasOwnProperty(k.default.PUBLISH_TIME)&&(te.publishTime=new Date(ee.publishTime))),te},getPatchLocation:function(ee){return ee&&ee.hasOwnProperty(k.default.PATCH_LOCATION)?ee[k.default.PATCH_LOCATION].map(te=>{const Ae=te.__text||te,_e=te.hasOwnProperty(k.default.SERVICE_LOCATION)?te[k.default.SERVICE_LOCATION]:null;let re=te.hasOwnProperty(k.default.TTL)?1e3*parseFloat(te[k.default.TTL]):NaN;return new ar(Ae,_e,re)}):[]},getProducerReferenceTimesForAdaptation:function(ee){const te=ee&&ee.hasOwnProperty(k.default.PRODUCER_REFERENCE_TIME)?ee[k.default.PRODUCER_REFERENCE_TIME]:[];(ee&&ee.hasOwnProperty(k.default.REPRESENTATION)?ee[k.default.REPRESENTATION]:[]).forEach(_e=>{_e.hasOwnProperty(k.default.PRODUCER_REFERENCE_TIME)&&te.push(..._e[k.default.PRODUCER_REFERENCE_TIME])});const Ae=[];return te.forEach(_e=>{const re=new lr;_e.hasOwnProperty(k.default.ID)&&(re[k.default.ID]=parseInt(_e[k.default.ID]),_e.hasOwnProperty(k.default.WALL_CLOCK_TIME)&&(re[k.default.WALL_CLOCK_TIME]=_e[k.default.WALL_CLOCK_TIME],_e.hasOwnProperty(k.default.PRESENTATION_TIME)&&(re[k.default.PRESENTATION_TIME]=_e[k.default.PRESENTATION_TIME],_e.hasOwnProperty(k.default.INBAND)&&(re[k.default.INBAND]=_e[k.default.INBAND]!=="false"),_e.hasOwnProperty(k.default.TYPE)&&(re[k.default.TYPE]=_e[k.default.TYPE]),Ae.push(re))))}),Ae},getPublishTime:function(ee){return ee&&ee.hasOwnProperty(k.default.PUBLISH_TIME)?new Date(ee[k.default.PUBLISH_TIME]):null},getRealPeriodForIndex:function(ee,te){const Ae=ie(te);return Ae.length>0&&B(ee)?Ae[ee]:null},getRealPeriods:ie,getRegularPeriods:function(ee){const te=!!ee&&de(ee.manifest),Ae=[];let _e,re,he=null,ve=null,fe=null,ke=null;for(re=0,_e=ee&&ee.manifest&&ee.manifest.Period?ee.manifest.Period.length:0;re<_e;re++)ve=ee.manifest.Period[re],ve.hasOwnProperty(k.default.START)?(ke=new Yr,ke.start=ve.start):he!==null&&he.hasOwnProperty(k.default.DURATION)&&fe!==null?(ke=new Yr,ke.start=parseFloat((fe.start+fe.duration).toFixed(5))):re!==0||te||(ke=new Yr,ke.start=0),fe!==null&&isNaN(fe.duration)&&(ke!==null?fe.duration=parseFloat((ke.start-fe.start).toFixed(5)):E.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),ke!==null&&(ke.id=Ie(ve,re),ke.index=re,ke.mpd=ee,ke.isEncrypted=se(ve),ve.hasOwnProperty(k.default.DURATION)&&(ke.duration=ve.duration),fe&&(fe.nextPeriodId=ke.id),Ae.push(ke),he=ve,fe=ke),ve=null,ke=null;return Ae.length===0||fe!==null&&isNaN(fe.duration)&&(fe.duration=parseFloat((function(Ce){(function(){if(!S||!S.hasOwnProperty("error"))throw new Error(F.default.MISSING_CONFIG_ERROR)})();const Ve=de(Ce.mpd.manifest);let Ke;return Ce.mpd.manifest.mediaPresentationDuration?Ke=Ce.mpd.manifest.mediaPresentationDuration:Ce.duration?Ke=Ce.duration:Ve?Ke=Number.POSITIVE_INFINITY:S.error(new Pe.default(W.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",Ce)),Ke}(fe)-fe.start).toFixed(5))),Ae},getRepresentationCount:function(ee){return ee&&ee.Representation?ee.Representation.length:0},getRepresentationFor:function(ee,te){return te&&te.Representation&&te.Representation.length>0&&B(ee)?te.Representation[ee]:null},getRepresentationSortFunction:function(){return(ee,te)=>ee.bandwidth-te.bandwidth},getRepresentationsForAdaptation:function(ee,te){const Ae=[],_e=function(ve){if(ve&&ve.period&&B(ve.period.index)){const fe=ve.period.mpd.manifest.Period[ve.period.index];if(fe&&fe.AdaptationSet&&B(ve.index))return z(fe.AdaptationSet[ve.index])}}(ee);let re,he;if(_e&&_e.Representation){if(ee&&ee.period&&B(ee.period.index)){const ve=xe(ee.period.mpd.manifest);ve&&(he=ve[0])}for(let ve=0,fe=_e.Representation.length;ve<fe;++ve){const ke=_e.Representation[ve],Ce=new fr;if(Ce.index=ve,Ce.adaptation=ee,Ce.mediaInfo=te,ke.hasOwnProperty(k.default.ID)&&(Ce.id=ke.id),ke.hasOwnProperty(k.default.CODECS)&&(Ce.codecs=ke.codecs,Ce.codecFamily=or.default.getCodecFamily(Ce.codecs)),ke.hasOwnProperty(k.default.MIME_TYPE)&&(Ce.mimeType=ke[k.default.MIME_TYPE]),ke.hasOwnProperty(k.default.CODEC_PRIVATE_DATA)&&(Ce.codecPrivateData=ke.codecPrivateData),ke.hasOwnProperty(k.default.BANDWITH)&&(Ce.bandwidth=ke.bandwidth,Ce.bitrateInKbit=ke.bandwidth/1e3),ke.hasOwnProperty(k.default.WIDTH)&&(Ce.width=ke.width),ke.hasOwnProperty(k.default.HEIGHT)&&(Ce.height=ke.height),ke.hasOwnProperty(k.default.SCAN_TYPE)&&(Ce.scanType=ke.scanType),ke.hasOwnProperty(k.default.FRAMERATE)&&(Ce.frameRate=ge(ke)),ke.hasOwnProperty(k.default.QUALITY_RANKING)&&(Ce.qualityRanking=ke[k.default.QUALITY_RANKING]),ke.hasOwnProperty(k.default.MAX_PLAYOUT_RATE)&&(Ce.maxPlayoutRate=ke.maxPlayoutRate),ke.hasOwnProperty(k.default.SEGMENT_BASE)?(re=ke.SegmentBase,Ce.segmentInfoType=k.default.SEGMENT_BASE):ke.hasOwnProperty(k.default.SEGMENT_LIST)?(re=ke.SegmentList,re.hasOwnProperty(k.default.SEGMENT_TIMELINE)?Ce.segmentInfoType=k.default.SEGMENT_TIMELINE:Ce.segmentInfoType=k.default.SEGMENT_LIST):ke.hasOwnProperty(k.default.SEGMENT_TEMPLATE)?(re=ke.SegmentTemplate,re.hasOwnProperty(k.default.SEGMENT_TIMELINE)?Ce.segmentInfoType=k.default.SEGMENT_TIMELINE:Ce.segmentInfoType=k.default.SEGMENT_TEMPLATE,re.hasOwnProperty(k.default.INITIALIZATION_MINUS)&&(Ce.initialization=re.initialization.split("$Bandwidth$").join(ke.bandwidth).split("$RepresentationID$").join(ke.id))):Ce.segmentInfoType=k.default.BASE_URL,Ce.essentialProperties=U(ke),Ce.supplementalProperties=X(ke),re){if(re.hasOwnProperty(k.default.INITIALIZATION)){const Ve=re.Initialization;Ve.hasOwnProperty(k.default.SOURCE_URL)&&(Ce.initialization=Ve.sourceURL),Ve.hasOwnProperty(k.default.RANGE)&&(Ce.range=Ve.range)}else V(_e)&&C(_e)&&_e.mimeType&&_e.mimeType.indexOf("application/mp4")===-1&&(Ce.range=0);re.hasOwnProperty(k.default.TIMESCALE)&&(Ce.timescale=re.timescale),re.hasOwnProperty(k.default.DURATION)?Ce.segmentDuration=re.duration/Ce.timescale:ke.hasOwnProperty(k.default.SEGMENT_TEMPLATE)&&(re=ke.SegmentTemplate,re.hasOwnProperty(k.default.SEGMENT_TIMELINE)&&(Ce.segmentDuration=J(re.SegmentTimeline)/Ce.timescale)),re.hasOwnProperty(k.default.MEDIA)&&(Ce.media=re.media),re.hasOwnProperty(k.default.START_NUMBER)&&(Ce.startNumber=parseInt(re.startNumber)),re.hasOwnProperty(k.default.INDEX_RANGE)&&(Ce.indexRange=re.indexRange),re.hasOwnProperty(k.default.PRESENTATION_TIME_OFFSET)&&(Ce.presentationTimeOffset=re.presentationTimeOffset/Ce.timescale),re.hasOwnProperty(k.default.AVAILABILITY_TIME_OFFSET)?Ce.availabilityTimeOffset=re.availabilityTimeOffset:he&&he.availabilityTimeOffset!==void 0&&(Ce.availabilityTimeOffset=he.availabilityTimeOffset),re.hasOwnProperty(k.default.AVAILABILITY_TIME_COMPLETE)?Ce.availabilityTimeComplete=re.availabilityTimeComplete!=="false":he&&he.availabilityTimeComplete!==void 0&&(Ce.availabilityTimeComplete=he.availabilityTimeComplete),re.hasOwnProperty(k.default.END_NUMBER)&&(Ce.endNumber=re[k.default.END_NUMBER])}Ce.mseTimeOffset=me(Ce),Ce.path=[ee.period.index,ee.index,ve],isNaN(Ce.width)||isNaN(Ce.height)||isNaN(Ce.frameRate)||(Ce.pixelsPerSecond=Math.max(1,Ce.width*Ce.height*Ce.frameRate),isNaN(Ce.bandwidth)||(Ce.bitsPerPixel=Ce.bandwidth/Ce.pixelsPerSecond)),Ae.push(Ce)}}return Ae},getRolesForAdaptation:function(ee){return ee&&ee.hasOwnProperty(k.default.ROLE)&&ee[k.default.ROLE].length?ee[k.default.ROLE].map(te=>{te.schemeIdUri===F.default.DASH_ROLE_SCHEME_ID&&te.value==="Main"&&(te.value=k.default.MAIN);const Ae=new ci;return Ae.init(te),Ae}):[]},getSegmentAlignment:function(ee){return!(!ee||!ee.hasOwnProperty(k.default.SEGMENT_ALIGNMENT))&&ee[k.default.SEGMENT_ALIGNMENT]==="true"},getSelectionPriority:function(ee){try{const te=ee&&ee.selectionPriority!==void 0?parseInt(ee.selectionPriority):1;return isNaN(te)?1:te}catch{return 1}},getServiceDescriptions:function(ee){const te=[];if(ee&&ee.hasOwnProperty(k.default.SERVICE_DESCRIPTION))for(const Ae of ee.ServiceDescription){let _e=null,re=null,he=null,ve=null,fe=null,ke=null,Ce=null,Ve=null;for(const Ke in Ae)if(Ae.hasOwnProperty(Ke))if(Ke===k.default.ID)_e=Ae[Ke];else if(Ke===k.default.SERVICE_DESCRIPTION_SCOPE)re=Ae[Ke].schemeIdUri;else if(Ke===k.default.SERVICE_DESCRIPTION_LATENCY)he={target:parseInt(Ae[Ke].target),max:parseInt(Ae[Ke].max),min:parseInt(Ae[Ke].min),referenceId:parseInt(Ae[Ke].referenceId)};else if(Ke===k.default.SERVICE_DESCRIPTION_PLAYBACK_RATE)ve={max:parseFloat(Ae[Ke].max),min:parseFloat(Ae[Ke].min)};else if(Ke===k.default.SERVICE_DESCRIPTION_OPERATING_QUALITY)fe={mediaType:Ae[Ke].mediaType,max:parseInt(Ae[Ke].max),min:parseInt(Ae[Ke].min),target:parseInt(Ae[Ke].target),type:Ae[Ke].type,maxQualityDifference:parseInt(Ae[Ke].maxQualityDifference)};else if(Ke===k.default.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH)ke={mediaType:Ae[Ke].mediaType,max:parseInt(Ae[Ke].max),min:parseInt(Ae[Ke].min),target:parseInt(Ae[Ke].target)};else if(Ke===k.default.CONTENT_STEERING){let st=Ae[Ke];st=Array.isArray(st)?st.at(st.length-1):st,Ce=Oe(st)}else Ke===k.default.CLIENT_DATA_REPORTING&&(Ve=je(Ae[Ke]));te.push({id:_e,schemeIdUri:re,latency:he,playbackRate:ve,operatingQuality:fe,operatingBandwidth:ke,contentSteering:Ce,clientDataReporting:Ve})}return te},getSubSegmentAlignment:function(ee){return!(!ee||!ee.hasOwnProperty(k.default.SUB_SEGMENT_ALIGNMENT))&&ee[k.default.SUB_SEGMENT_ALIGNMENT]==="true"},getSuggestedPresentationDelay:function(ee){return ee&&ee.hasOwnProperty(k.default.SUGGESTED_PRESENTATION_DELAY)?ee.suggestedPresentationDelay:null},getSupplementalPropertiesForAdaptationSet:function(ee){return we(k.default.SUPPLEMENTAL_PROPERTY,ee)},getSupplementalPropertiesForRepresentation:X,getUTCTimingSources:function(ee){const te=de(ee),Ae=!!ee&&ee.hasOwnProperty(k.default.AVAILABILITY_START_TIME),_e=ee?ee.UTCTiming:null,re=[];return(te||Ae)&&_e&&_e.forEach(function(he){const ve=new hr.default;he.hasOwnProperty(F.default.SCHEME_ID_URI)&&(ve.schemeIdUri=he.schemeIdUri,he.hasOwnProperty(k.default.VALUE)&&(ve.value=he.value.toString(),re.push(ve)))}),re},getViewpointForAdaptation:function(ee){return ee&&ee.hasOwnProperty(k.default.VIEWPOINT)&&ee[k.default.VIEWPOINT].length?ee[k.default.VIEWPOINT].map(te=>{const Ae=new ci;return Ae.init(te),Ae}):[]},hasProfile:function(ee,te){let Ae=!1;return ee&&ee.profiles&&ee.profiles.length>0&&(Ae=ee.profiles.indexOf(te)!==-1),Ae},isPeriodEncrypted:se,setConfig:function(ee){ee&&(ee.errHandler&&(S=ee.errHandler),ee.BASE64&&(x=ee.BASE64))}},E=(0,Be.default)(I).getInstance().getLogger(_),_}ur.__dashjs_factory_name="DashManifestModel";var Er=Ee.default.getSingletonFactory(ur);const Gi={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Wr=Gi,ua="v",cs="l",$l="d",ds="s";class Mi{constructor(E,S){Array.isArray(E)&&(E=E.map(x=>x instanceof Mi?x:new Mi(x))),this.value=E,this.params=S}}const Ia="Dict";function fs(_,E,S,x){return new Error(`failed to ${_} "${I=E,Array.isArray(I)?JSON.stringify(I):I instanceof Map?"Map{}":I instanceof Set?"Set{}":typeof I=="object"?JSON.stringify(I):String(I)}" as ${S}`,{cause:x});var I}function Xi(_,E,S){return fs("serialize",_,E,S)}class lo{constructor(E){this.description=E}}const br="Bare Item",uo="Boolean",co="Byte Sequence",fo="Integer";function Xo(_){return _<-999999999999999||999999999999999<_}function ho(_){if(Xo(_))throw Xi(_,fo);return _.toString()}function Qo(_,E){if(_<0)return-Qo(-_,E);const S=Math.pow(10,E);if(Math.abs(_*S%1-.5)<Number.EPSILON){const x=Math.floor(_*S);return(x%2==0?x:x+1)/S}return Math.round(_*S)/S}const Sr="Decimal";function Aa(_){const E=Qo(_,3);if(Math.floor(Math.abs(E)).toString().length>12)throw Xi(_,Sr);const S=E.toString();return S.includes(".")?S:`${S}.0`}const di="String",ki=/[\x00-\x1f\x7f]+/;function ca(_){return _.description||_.toString().slice(7,-1)}const fi="Token";function hs(_){const E=ca(_);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(E)===!1)throw Xi(E,fi);return E}function si(_){switch(typeof _){case"number":if(!Number.isFinite(_))throw Xi(_,br);return Number.isInteger(_)?ho(_):Aa(_);case"string":return function(E){if(ki.test(E))throw Xi(E,di);return`"${E.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}(_);case"symbol":return hs(_);case"boolean":return function(E){if(typeof E!="boolean")throw Xi(E,uo);return E?"?1":"?0"}(_);case"object":if(_ instanceof Date)return function(E){return`@${ho(E.getTime()/1e3)}`}(_);if(_ instanceof Uint8Array)return function(E){if(ArrayBuffer.isView(E)===!1)throw Xi(E,co);return`:${S=E,btoa(String.fromCharCode(...S))}:`;var S}(_);if(_ instanceof lo)return hs(_);default:throw Xi(_,br)}}const $d="Key";function Hl(_){if(/^[a-z*][a-z0-9\-_.*]*$/.test(_)===!1)throw Xi(_,$d);return _}function Ps(_){return _==null?"":Object.entries(_).map(E=>{let[S,x]=E;return x===!0?`;${Hl(S)}`:`;${Hl(S)}=${si(x)}`}).join("")}function Hd(_){return _ instanceof Mi?`${si(_.value)}${Ps(_.params)}`:si(_)}const Zo=_=>Math.round(_),Ms=_=>100*Zo(_/100),Vd={br:Zo,d:Zo,bl:Ms,dl:Ms,mtp:Ms,nor:(_,E)=>(E!=null&&E.baseUrl&&(_=function(S,x){const I=new URL(S),N=new URL(x);if(I.origin!==N.origin)return S;const B=I.pathname.split("/").slice(1),G=N.pathname.split("/").slice(1,-1);for(;B[0]===G[0];)B.shift(),G.shift();for(;G.length;)G.shift(),B.unshift("..");return B.join("/")}(_,E.baseUrl)),encodeURIComponent(_)),rtp:Ms,tb:Zo};function Kd(_){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return _?function(S,x){return function(I){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{whitespace:!0};if(typeof I!="object")throw Xi(I,Ia);const B=I instanceof Map?I.entries():Object.entries(I),G=N!=null&&N.whitespace?" ":"";return Array.from(B).map(C=>{let[K,V]=C;V instanceof Mi==0&&(V=new Mi(V));let D=Hl(K);var z;return V.value===!0?D+=Ps(V.params):(D+="=",Array.isArray(V.value)?D+=`(${(z=V).value.map(Hd).join(" ")})${Ps(z.params)}`:D+=Hd(V)),D}).join(`,${G}`)}(S,x)}(function(S,x){const I={};if(S==null||typeof S!="object")return I;const N=Object.keys(S).sort(),B=Object.assign({},Vd,x==null?void 0:x.formatters),G=x==null?void 0:x.filter;return N.forEach(C=>{if(G!=null&&G(C))return;let K=S[C];const V=B[C];V&&(K=V(K,x)),C==="v"&&K===1||C=="pr"&&K===1||function(D){return typeof D=="number"?Number.isFinite(D):D!=null&&D!==""&&D!==!1}(K)&&(function(D){return D==="ot"||D==="sf"||D==="st"}(C)&&typeof K=="string"&&(K=new lo(K)),I[C]=K)}),I}(_,E),Object.assign({whitespace:!1},E)):""}const Jo="CMCD-Object",Os="CMCD-Request",Fs="CMCD-Session",Vl="CMCD-Status",vg={[Jo]:["br","d","ot","tb"],[Os]:["bl","dl","mtp","nor","nrr","su"],[Fs]:["cid","pr","sf","sid","st","v"],[Vl]:["bs","rtp"]},Yd="segment";function Kl(){let _,E,S,x,I,N,B,G,C,K,V,D,z,$,ie,se,ae=this.context,ce=(0,oe.default)(ae).getInstance(),de=(0,Q.default)(ae).getInstance(),ge=(0,Be.default)(ae).getInstance();function we(){x={pr:1,nor:null,st:null,sf:null,sid:`${or.default.generateUuid()}`,cid:null},z={},D={},$={},V=void 0,ie=void 0,se=!1,J()}function ne(){J()}function U(){ie||(ie=Date.now())}function X(){ie&&!x.msd&&(x.msd=Date.now()-ie)}function J(){if(!B)return;const ve=B.getStreamController();if(!ve||typeof ve.getActiveStream!="function")return;const fe=ve.getActiveStream();fe&&(K=fe.getStreamProcessors())}function me(ve){try{const fe=Te(),ke=fe.version?fe.keys:de.get().streaming.cmcd.enabledKeys;return Object.keys(ve).filter(Ce=>ke.includes(Ce)).reduce((Ce,Ve)=>(Ce[Ve]=ve[Ve],Ce),{})}catch{return ve}}function Ie(){const ve=Te();return function(fe){if(Object.keys(fe).length){if(parseInt(fe.version)!==1)return S.error("version parameter must be defined in 1."),!1;if(!fe.keys)return S.error("keys parameter must be defined."),!1}const ke=fe.version,Ce=de.get().streaming.cmcd&&de.get().streaming.cmcd.enabled;return ke||Ce}(ve)&&function(fe){let ke=de.get().streaming.cmcd.includeInRequests;fe.version&&(ke=fe.includeInRequests??[Yd]);const Ce=F.default.CMCD_AVAILABLE_REQUESTS,Ve=ke.filter(Ke=>!Ce.includes(Ke));return Ve.length===ke.length?(S.error("None of the request types are supported."),!1):(Ve.map(Ke=>{S.warn(`request type ${Ke} is not supported.`)}),!0)}(ve)&&function(fe){const ke=F.default.CMCD_AVAILABLE_KEYS,Ce=F.default.CMCD_V2_AVAILABLE_KEYS,Ve=fe.version?fe.keys:de.get().streaming.cmcd.enabledKeys,Ke=de.get().streaming.cmcd.version,st=Ve.filter(ft=>!(ke.includes(ft)||Ke===2&&Ce.includes(ft)));return st.length===Ve.length&&Ve.length>0?(S.error(`None of the keys are implemented for CMCD version ${Ke}.`),!1):(st.map(ft=>{S.warn(`key parameter ${ft} is not implemented for CMCD version ${Ke}.`)}),!0)}(ve)}function Te(){let ve={};if(G){const fe=G.getServiceDescriptionSettings();de.get().streaming.cmcd.applyParametersFromMpd&&fe.clientDataReporting&&fe.clientDataReporting.cmcdParameters&&(ve=fe.clientDataReporting.cmcdParameters)}return ve}function xe(ve){try{let ke=null;if(ve.type,(fe=ve.mediaType)!==F.default.VIDEO&&fe!==F.default.AUDIO||V&&V!=F.default.AUDIO||(V=fe),function(Ce){const Ve=Te();let Ke=de.get().streaming.cmcd.includeInRequests;Ve.version&&(Ke=Ve.includeInRequests?Ve.includeInRequests:[Yd]);const st={[Le.HTTPRequest.INIT_SEGMENT_TYPE]:"segment",[Le.HTTPRequest.MEDIA_SEGMENT_TYPE]:"segment",[Le.HTTPRequest.XLINK_EXPANSION_TYPE]:"xlink",[Le.HTTPRequest.MPD_TYPE]:"mpd",[Le.HTTPRequest.CONTENT_STEERING_TYPE]:"steering",[Le.HTTPRequest.OTHER_TYPE]:"other"};return Ke.some(ft=>st[Ce]===ft)}(ve.type)){if(ve.type===Le.HTTPRequest.MPD_TYPE)return function(){const Ce=ee();return Ce.ot=Wr.MANIFEST,Ce}();if(ve.type===Le.HTTPRequest.MEDIA_SEGMENT_TYPE)return je(ve.mediaType),Oe(ve,ve.mediaType);if(ve.type===Le.HTTPRequest.INIT_SEGMENT_TYPE)return function(){const Ce=ee();return Ce.ot=Wr.INIT,Ce.su=!0,Ce}();if(ve.type===Le.HTTPRequest.OTHER_TYPE||ve.type===Le.HTTPRequest.XLINK_EXPANSION_TYPE)return function(){const Ce=ee();return Ce.ot=Wr.OTHER,Ce}();if(ve.type===Le.HTTPRequest.LICENSE)return function(){const Ce=ee();return Ce.ot=Wr.KEY,Ce}();if(ve.type===Le.HTTPRequest.CONTENT_STEERING_TYPE)return function(Ce){const Ve=V?Oe(Ce,V):ee();return Ve.ot=Wr.OTHER,Ve}(ve)}return ke}catch{return null}var fe}function Oe(ve,fe){var Ot;je(fe);const ke=ee(),Ce=function(Zt){try{return parseInt(Zt.bandwidth/1e3)}catch{return null}}(ve),Ve=function(Zt){try{return isNaN(Zt.duration)?NaN:Math.round(1e3*Zt.duration)}catch{return null}}(ve),Ke=function(Zt){try{return 100*parseInt(C.getSafeAverageThroughput(Zt)/100)}catch{return null}}(fe),st=function(Zt){try{const cn=x.pr,Nn=N.getCurrentBufferLevel(Zt);return isNaN(cn)||isNaN(Nn)?null:100*parseInt(Nn/cn*10)}catch{return null}}(fe),ft=te(fe),St=function(Zt){try{const cn=I.getPossibleVoRepresentationsFilteredBySettings(Zt).map(Nn=>Nn.bitrateInKbit);return Math.max(...cn)}catch{return null}}((Ot=ve.representation)==null?void 0:Ot.mediaInfo),Bt=x.pr,Ht=function(Zt){if(K&&K.length!==0){for(let cn of K)if(cn.getType()===Zt)return cn.probeNextRequest()}}(fe);let hn;fe===F.default.VIDEO&&(hn=Wr.VIDEO),fe===F.default.AUDIO&&(hn=Wr.AUDIO),fe===F.default.TEXT&&(hn=ve.representation.mediaInfo.mimeType==="application/mp4"?Wr.TIMED_TEXT:Wr.CAPTION);let In=de.get().streaming.cmcd.rtp;return In||(In=function(Zt){try{let cn=B.getPlaybackRate();cn||(cn=1);let{bandwidth:Nn,mediaType:Cn,representation:We,duration:pt}=Zt;if(!We.mediaInfo)return NaN;let gt=te(Cn);gt===0&&(gt=500);let vt=Nn*pt/1e3/(gt/cn/1e3),sn=de.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(de.get().streaming.cmcd.rtpSafetyFactor)?de.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(vt*sn/100)+1)}catch{return NaN}}(ve)),isNaN(In)||(ke.rtp=In),Ht&&(ve.url!==Ht.url?ke.nor=encodeURIComponent(or.default.getRelativeUrl(ve.url,Ht.url)):Ht.range&&(ke.nrr=Ht.range)),Ce&&(ke.br=Ce),hn&&(ke.ot=hn),isNaN(Ve)||(ke.d=Ve),isNaN(Ke)||(ke.mtp=Ke),isNaN(st)||(ke.dl=st),isNaN(ft)||(ke.bl=ft),isNaN(St)||(ke.tb=St),isNaN(Bt)||Bt===1||(ke.pr=Bt),z[fe]&&(ke.bs=!0,z[fe]=!1),!D[fe]&&$[fe]||(ke.su=!0,D[fe]=!1,$[fe]=!0),ke}function je(ve){$.hasOwnProperty(ve)||($[ve]=!1),D.hasOwnProperty(ve)||(D[ve]=!1),z.hasOwnProperty(ve)||(z[ve]=!1)}function ee(){const ve=Te(),fe={};let ke=de.get().streaming.cmcd.cid?de.get().streaming.cmcd.cid:x.cid;if(ke=ve.contentID?ve.contentID:ke,fe.v=de.get().streaming.cmcd.version??1,fe.sid=de.get().streaming.cmcd.sid?de.get().streaming.cmcd.sid:x.sid,fe.sid=ve.sessionID?ve.sessionID:fe.sid,fe.sid=`${fe.sid}`,ke&&(fe.cid=`${ke}`),isNaN(x.pr)||x.pr===1||x.pr===null||(fe.pr=x.pr),x.st&&(fe.st=x.st),x.sf&&(fe.sf=x.sf),fe.v===2){let Ce=1e3*B.getCurrentLiveLatency();isNaN(Ce)||(fe.ltc=Ce);const Ve=x.msd;se||isNaN(Ve)||(fe.msd=Ve,se=!0)}return fe}function te(ve){try{const fe=N.getCurrentBufferLevel(ve);return isNaN(fe)?null:100*parseInt(10*fe)}catch{return null}}function Ae(ve){try{x.pr=ve.playbackRate}catch{}}function _e(ve){try{const fe=_.getIsDynamic(ve.data)?cs:ua,ke=ve.protocol&&ve.protocol==="MSS"?ds:$l;x.st=`${fe}`,x.sf=`${ke}`}catch{}}function re(ve){try{ve.state&&ve.mediaType&&ve.state===pe.default.BUFFER_EMPTY&&(z[ve.mediaType]||(z[ve.mediaType]=!0),D[ve.mediaType]||(D[ve.mediaType]=!0))}catch{}}function he(){for(let ve in z)z.hasOwnProperty(ve)&&(z[ve]=!0);for(let ve in D)D.hasOwnProperty(ve)&&(D[ve]=!0)}return E={getCmcdData:xe,getQueryParameter:function(ve){try{if(Ie()){const fe=xe(ve),ke=Kd(me(fe));return ce.trigger(qi.default.CMCD_DATA_GENERATED,{url:ve.url,mediaType:ve.mediaType,cmcdData:fe,cmcdString:ke}),{key:"CMCD",value:ke}}return null}catch{return null}},getHeaderParameters:function(ve){try{if(Ie()){const fe=xe(ve),ke=function(Ce){let Ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const Ke={};if(!Ce)return Ke;const st=Object.entries(Ce),ft=Object.entries(vg).concat(Object.entries((Ve==null?void 0:Ve.customHeaderMap)||{})),St=st.reduce((Bt,Ht)=>{var hn,In;const[Ot,Zt]=Ht,cn=((hn=ft.find(Nn=>Nn[1].includes(Ot)))===null||hn===void 0?void 0:hn[0])||Os;return(In=Bt[cn])!==null&&In!==void 0||(Bt[cn]={}),Bt[cn][Ot]=Zt,Bt},{});return Object.entries(St).reduce((Bt,Ht)=>{let[hn,In]=Ht;return Bt[hn]=Kd(In,Ve),Bt},Ke)}(me(fe),de.get().streaming.cmcd.version===1?{}:{customHeaderMap:{[Os]:["ltc"],[Fs]:["msd"]}});return ce.trigger(qi.default.CMCD_DATA_GENERATED,{url:ve.url,mediaType:ve.mediaType,cmcdData:fe,headers:ke}),ke}return null}catch{return null}},getCmcdParametersFromManifest:Te,setConfig:function(ve){ve&&(ve.abrController&&(I=ve.abrController),ve.dashMetrics&&(N=ve.dashMetrics),ve.throughputController&&(C=ve.throughputController),ve.playbackController&&(B=ve.playbackController),ve.serviceDescriptionController&&(G=ve.serviceDescriptionController))},reset:function(){ce.off(pe.default.PLAYBACK_RATE_CHANGED,Ae,this),ce.off(pe.default.MANIFEST_LOADED,_e,this),ce.off(pe.default.BUFFER_LEVEL_STATE_CHANGED,re,E),ce.off(pe.default.PLAYBACK_SEEKED,he,E),ce.off(pe.default.PLAYBACK_STARTED,U,E),ce.off(pe.default.PLAYBACK_PLAYING,X,E),we()},initialize:function(ve){ce.on(pe.default.PLAYBACK_RATE_CHANGED,Ae,E),ce.on(pe.default.MANIFEST_LOADED,_e,E),ce.on(pe.default.BUFFER_LEVEL_STATE_CHANGED,re,E),ce.on(pe.default.PLAYBACK_SEEKED,he,E),ce.on(pe.default.PERIOD_SWITCH_COMPLETED,ne,E),ve?ce.on(pe.default.MANIFEST_LOADING_STARTED,U,E):ce.on(pe.default.PLAYBACK_STARTED,U,E),ce.on(pe.default.PLAYBACK_PLAYING,X,E)},isCmcdEnabled:Ie},_=Er(ae).getInstance(),S=ge.getLogger(E),we(),E}Kl.__dashjs_factory_name="CmcdModel";var el=Ee.default.getSingletonFactory(Kl);const zs="CMSD-Dynamic",mc="CMSD-Static",da=Gi;function kr(_,E,S){return fs("parse",_,E,S)}const Us="List";function pi(_,E){return{value:_,src:E}}const go="Inner List",tl="Date",pc=`${fo} or ${Sr}`;function Oi(_){let E,S=1,x="";const I=kr(_,pc);if(_[0]==="-"&&(S=-1,_=_.substring(1)),_.length<=0)throw I;const N=/^(\d+)?/g,B=N.exec(_);if(B[0].length===0)throw I;if(x+=B[1],(_=_.substring(N.lastIndex))[0]==="."){if(x.length>12)throw I;const G=/^(\.\d+)?/g,C=G.exec(_);if(_=_.substring(G.lastIndex),C[0].length===0||C[1].length>4||(x+=C[1],x.length>16))throw I;E=parseFloat(x)*S}else{if(x.length>15)throw I;if(E=parseInt(x)*S,Xo(E))throw kr(x,pc)}return pi(E,_)}function Bs(_,E){const S=_[0];if(S==='"')return function(x){let I="",N=0;if(x[N]!=='"')throw kr(x,di);for(N++;x.length>N;){if(x[N]==="\\"){if(x.length<=N+1||(N++,x[N]!=='"'&&x[N]!=="\\"))throw kr(x,di);I+=x[N]}else{if(x[N]==='"')return pi(I,x.substring(++N));if(ki.test(x[N]))throw kr(x,di);I+=x[N]}N++}throw kr(x,di)}(_);if(/^[-0-9]/.test(S))return Oi(_);if(S==="?")return function(x){let I=0;if(x[I]!=="?")throw kr(x,uo);if(I++,x[I]==="1")return pi(!0,x.substring(++I));if(x[I]==="0")return pi(!1,x.substring(++I));throw kr(x,uo)}(_);if(S===":")return function(x){if(x[0]!==":"||(x=x.substring(1)).includes(":")===!1)throw kr(x,co);const I=/(^.*?)(:)/g,N=I.exec(x)[1];return x=x.substring(I.lastIndex),pi(new Uint8Array([...atob(N)].map(B=>B.charCodeAt(0))),x)}(_);if(/^[a-zA-Z*]/.test(S))return function(x,I){if(/^[a-zA-Z*]$/.test(x[0])===!1)throw kr(x,fi);const N=/^([!#$%&'*+\-.^_`|~\w:/]+)/g,B=N.exec(x)[1];return x=x.substring(N.lastIndex),pi(Symbol.for(B),x)}(_);if(S==="@")return function(x){let I=0;if(x[I]!=="@")throw kr(x,tl);I++;const N=Oi(x.substring(I));if(Number.isInteger(N.value)===!1)throw kr(x,tl);return pi(new Date(1e3*N.value),N.src)}(_);throw kr(_,br)}function Yl(_){let E=0;if(/^[a-z*]$/.test(_[E])===!1)throw kr(_,$d);let S="";for(;_.length>E;){if(/^[a-z0-9_\-.*]$/.test(_[E])===!1)return pi(S,_.substring(E));S+=_[E],E++}return pi(S,_.substring(E))}function js(_,E){let S;for(;_.length>0&&_[0]===";";){const x=Yl(_=_.substring(1).trim()),I=x.value;let N=!0;if((_=x.src)[0]==="="){const B=Bs(_=_.substring(1));N=B.value,_=B.src}S==null&&(S={}),S[I]=N}return pi(S,_)}function Wd(_,E){const S=Bs(_),x=js(_=S.src);return _=x.src,pi(new Mi(S.value,x.value),_)}function Wl(_,E){return _[0]==="("?function(S,x){if(S[0]!=="(")throw kr(S,go);S=S.substring(1);const I=[];for(;S.length>0;){if((S=S.trim())[0]===")"){const B=js(S=S.substring(1));return pi(new Mi(I,B.value),B.src)}const N=Wd(S);if(I.push(N.value),(S=N.src)[0]!==" "&&S[0]!==")")throw kr(S,go)}throw kr(S,go)}(_):Wd(_)}const yc=mc.toLowerCase(),nl=zs.toLowerCase(),Xl=["mb","st","sf","v"],Ql="stream",Eg={video:da.VIDEO,audio:da.AUDIO,text:da.TIMED_TEXT,stream:Ql};function Xd(){const _=this.context,E=(0,oe.default)(_).getInstance();let S,x,I,N;function B(){I={},N={}}function G(z){z&&Object.keys(z).forEach($=>{Xl.includes($)||delete z[$]})}function C(z){try{return($=z)?Object.entries(function(ie,se){try{const{src:ae,value:ce}=function(de,ge){const we={};for(;de.length>0;){let ne;const U=Yl(de),X=U.value;if((de=U.src)[0]==="="){const J=Wl(de.substring(1),ge);ne=J.value,de=J.src}else{const J=js(de,ge);ne=new Mi(!0,J.value),de=J.src}if(we[X]=ne,(de=de.trim()).length===0)return pi(we,de);if(de[0]!==","||(de=de.substring(1).trim()).length===0||de[0]===",")throw kr(de,Ia)}return pi(we,de)}(ie.trim(),se);if(ae!=="")throw kr(ae,Ia);return ce}catch(ae){throw kr(ie,Ia,ae)}}($)).reduce((ie,se)=>{let[ae,ce]=se;const{value:de}=ce;return ie[ae]=typeof de=="symbol"?ca(de):de,ie},{}):{}}catch(ie){x.error("Failed to parse CMSD-Static response header value:",ie)}var $}function K(z){try{const ie=($=z)?function(ae,ce){try{const{src:de,value:ge}=function(we,ne){const U=[];for(;we.length>0;){const X=Wl(we,ne);if(U.push(X.value),(we=X.src.trim()).length===0)return pi(U,we);if(we[0]!==","||(we=we.substring(1).trim()).length===0||we[0]===",")throw kr(we,Us)}return pi(U,we)}(ae.trim(),ce);if(de!=="")throw kr(de,Us);return ge}catch(de){throw kr(ae,Us,de)}}($):[],se=ie[ie.length-1];return(se==null?void 0:se.params)||{}}catch(ie){return x.error("Failed to parse CMSD-Dynamic response header value:",ie),{}}var $}function V(z){return Eg[z]||da.OTHER}function D(z,$,ie){const se=z===mc?I:N,ae=se[$]||{},ce=se[Ql]||{};return ae[ie]||ce[ie]}return S={setConfig:function(){},initialize:function(){},reset:function(){B()},parseResponseHeaders:function(z,$){let ie=null,se=null;for(const ce in z){const de=z[ce];switch(ce){case yc:ie=C(de),E.trigger(L.default.CMSD_STATIC_HEADER,ie);break;case nl:se||(se=K(de))}}let ae=Ql;return ie&&ie.ot?ae=ie.ot:$&&(ae=V($)),G(I[ae]),G(N[ae]),ie&&(I[ae]=Object.assign(I[ae]||{},ie)),se&&(N[ae]=Object.assign(N[ae]||{},se)),{static:ie,dynamic:se}},getMaxBitrate:function(z){let $=V(z);return D(zs,$,"mb")||-1},getEstimatedThroughput:function(z){let $=V(z);return D(zs,$,"etp")||null},getResponseDelay:function(z){let $=V(z);return D(zs,$,"rd")||null},getRoundTripTime:function(z){let $=V(z);return D(zs,$,"rtt")||null}},x=(0,Be.default)(_).getInstance().getLogger(S),B(),S}Xd.__dashjs_factory_name="CmsdModel";var Qd=Ee.default.getSingletonFactory(Xd),Zl=t(1926);function Zd(){let _,E;function S(){E={}}return _={reset:function(){S()},processResponseHeaders:function(x){if(!(x&&x.headers&&x.request&&x.request.url))return;const I=x.headers[F.default.COMMON_ACCESS_TOKEN_HEADER];if(I){const N=or.default.getHostFromUrl(x.request.url);N&&(E[N]=I)}},getCommonAccessTokenForUrl:function(x){if(!x)return null;const I=or.default.getHostFromUrl(x);return I?E[I]?E[I]:null:void 0}},S(),_}Zd.__dashjs_factory_name="CommonAccessTokenController";var bg=Ee.default.getSingletonFactory(Zd);function Jd(){let _,E;return _={setConfig:function(S){S&&S.serviceDescriptionController&&(E=S.serviceDescriptionController)},isAdaptationsIncluded:function(S){var I;const{adaptationSetsArray:x}=((I=E==null?void 0:E.getServiceDescriptionSettings())==null?void 0:I.clientDataReporting)??{};return!x||(x==null?void 0:x.length)===0||x.includes(S)},isServiceLocationIncluded:function(S,x){var N;if(S===Le.HTTPRequest.CONTENT_STEERING_TYPE)return!0;const{serviceLocationsArray:I}=((N=E==null?void 0:E.getServiceDescriptionSettings())==null?void 0:N.clientDataReporting)??{};return!I||(I==null?void 0:I.length)===0||I.includes(x)}},_}Jd.__dashjs_factory_name="ClientDataReportingController";var ef=Ee.default.getSingletonFactory(Jd);function tf(){let _,E,S;const x=this.context;function I(N,B,G,C,K){var D;const V=function(z,$){let ie=[];return ie=$===k.default.PERIOD?z[k.default.SUPPLEMENTAL_PROPERTY]||[]:[...z[k.default.ESSENTIAL_PROPERTY]||[],...z[k.default.SUPPLEMENTAL_PROPERTY]||[]],ie.find(se=>se.schemeIdUri===F.default.URL_QUERY_INFO_SCHEME&&se.UrlQueryInfo||se.schemeIdUri===F.default.EXT_URL_QUERY_INFO_SCHEME&&se.ExtUrlQueryInfo)}(B,K);(function(z,$,ie,se){ie.initialQueryString="";let ae="";const ce=(z==null?void 0:z.ExtUrlQueryInfo)||(z==null?void 0:z.UrlQueryInfo);ae=ce&&ce.queryString?$&&$.length>0?$+"&"+ce.queryString:ce.queryString:$,(ce==null?void 0:ce.useMPDUrlQuery)==="true"&&se&&(ae=ae?ae+"&"+se:se),ie.initialQueryString=ae})(V,C.initialQueryString,N,G),function(z,$,ie){var ae,ce;if(!z)return void($.finalQueryString=ie);const se=((ae=z==null?void 0:z.ExtUrlQueryInfo)==null?void 0:ae.queryTemplate)||((ce=z==null?void 0:z.UrlQueryInfo)==null?void 0:ce.queryTemplate)||"";$.finalQueryString=se===k.default.QUERY_PART?$==null?void 0:$.initialQueryString:""}(V,N,C.finalQueryString),N.sameOriginOnly=(D=V==null?void 0:V.ExtUrlQueryInfo)==null?void 0:D.sameOriginOnly,N.queryParams=or.default.parseQueryParams(N==null?void 0:N.finalQueryString),N.includeInRequests=function(z,$){var ie;return z?(ie=z.ExtUrlQueryInfo)!=null&&ie.includeInRequests?z.ExtUrlQueryInfo.includeInRequests.split(" "):[k.default.SEGMENT_TYPE]:$}(V,C.includeInRequests)}return E=(0,Be.default)(x).getInstance().getLogger(_),_={getFinalQueryString:function(N){try{if(!S)return null;if(N.type===Le.HTTPRequest.MEDIA_SEGMENT_TYPE||N.type===Le.HTTPRequest.INIT_SEGMENT_TYPE){const B=N.representation;if(!B)return null;const G=B.adaptation,C=G.period,K=S.period[C.index].adaptation[G.index].representation[B.index],V=new URL(N.url),D=!K.sameOriginOnly||S.origin===V.origin;if(K.includeInRequests.includes(k.default.SEGMENT_TYPE)&&D)return K.queryParams}else if(N.type===Le.HTTPRequest.MPD_TYPE){if([k.default.MPD_TYPE,k.default.MPD_PATCH_TYPE].some(B=>S.includeInRequests.includes(B)))return S.queryParams}else if(N.type===Le.HTTPRequest.CONTENT_STEERING_TYPE&&S.includeInRequests.includes(k.default.STEERING_TYPE))return S.queryParams}catch(B){return E.error(B),null}},createFinalQueryStrings:function(N){S={origin:new URL(N.url).origin,period:[]};const B=N.url.split("?")[1];I(S,N,B,{initialQueryString:"",includeInRequests:[]},k.default.MPD),N.Period.forEach(G=>{const C={adaptation:[]};I(C,G,B,S,k.default.PERIOD),G.AdaptationSet.forEach(K=>{const V={representation:[]};I(V,K,B,C,k.default.ADAPTATION_SET),K.Representation.forEach(D=>{const z={};I(z,D,B,V,k.default.REPRESENTATION),V.representation.push(z)}),C.adaptation.push(V)}),S.period.push(C)})}},_}tf.__dashjs_factory_name="ExtUrlQueryInfoController";var vc=Ee.default.getSingletonFactory(tf),Ec=class{constructor(_){this.url=_.url,this.method=_.method,this.responseType=_.responseType!==void 0?_.responseType:null,this.headers=_.headers!==void 0?_.headers:{},this.credentials=_.credentials!==void 0?_.credentials:null,this.mode=_.mode!==void 0?_.mode:null,this.timeout=_.timeout!==void 0?_.timeout:0,this.cmcd=_.cmcd!==void 0?_.cmcd:null,this.customData=_.customData!==void 0?_.customData:null}},bc=class{constructor(_){this.request=_.request,this.url=_.url!==void 0?_.url:null,this.redirected=_.redirected!==void 0&&_.redirected,this.status=_.status!==void 0?_.status:null,this.statusText=_.statusText!==void 0?_.statusText:"",this.type=_.type!==void 0?_.type:"",this.headers=_.headers!==void 0?_.headers:{},this.data=_.data!==void 0?_.data:null,this.resourceTiming=_.resourceTiming!==void 0?_.resourceTiming:null}};function nf(_){_=_||{};const E=this.context,S=_.errHandler,x=_.dashMetrics,I=_.mediaPlayerModel,N=_.boxParser,B=_.errors,G=_.requestTimeout||0,C=(0,oe.default)(E).getInstance(),K=(0,Q.default)(E).getInstance();let V,D,z,$,ie,se,ae,ce,de,ge,we,ne,U,X;function J(me,Ie){const Te=function(){ee()},xe=function(Ot){const Zt=new Date;fe&&(fe=!1,(!Ot.lengthComputable||Ot.lengthComputable&&Ot.total!==Ot.loaded)&&(he.firstByteDate=Zt,ft.resourceTiming.responseStart=Zt.getTime())),Ot.lengthComputable&&(he.bytesLoaded=ft.length=Ot.loaded,he.bytesTotal=ft.resourceTiming.encodedBodySize=Ot.total,ft.length=Ot.total,ft.resourceTiming.encodedBodySize=Ot.loaded),Ot.noTrace||(ve.push({s:Ce,d:Ot.time?Ot.time:Zt.getTime()-Ce.getTime(),b:[Ot.loaded?Ot.loaded-Ve:0],t:Ot.throughput}),he.traces=ve,Ce=Zt,Ve=Ot.loaded),Ke&&(clearTimeout(Ke),Ke=null),K.get().streaming.fragmentRequestProgressTimeout>0&&(Ke=setTimeout(function(){X.warn("Abort request "+st.url+" due to progress timeout"),Bt.abort(st),Te()},K.get().streaming.fragmentRequestProgressTimeout)),me.progress&&Ot&&me.progress(Ot)},Oe=function(){ee(!0)},je=function(Ot){let Zt;if(Ot.lengthComputable){let cn=Ot.loaded/Ot.total*100;Zt="Request timeout: loaded: "+Ot.loaded+", out of: "+Ot.total+" : "+cn.toFixed(3)+"% Completed"}else Zt="Request timeout: non-computable download size";X.warn(Zt)},ee=function(){let Ot=arguments.length>0&&arguments[0]!==void 0&&arguments[0];D.indexOf(st)!==-1&&D.splice(D.indexOf(st),1),Ke&&(clearTimeout(Ke),Ke=null),we.processResponseHeaders(ft),te(),Ae(),function(Zt){const cn=ge.getResponseInterceptors();return cn?cn.reduce((Nn,Cn)=>Nn.then(We=>Cn(We)),Promise.resolve(Zt)):Promise.resolve(Zt)}(ft).then(Zt=>{if(ft=Zt,function(cn,Nn,Cn){const We=cn.customData.request,pt=K.get().streaming.cmsd&&K.get().streaming.cmsd.enabled?ae.parseResponseHeaders(Nn.headers,We.mediaType):null;x.addHttpRequest(We,Nn.url,Nn.status,Nn.headers,Cn,pt)}(st,ft,ve),Ot)me.abort&&me.abort(he);else if(he.type===Le.HTTPRequest.MPD_TYPE&&(x.addManifestUpdate(he),C.trigger(L.default.MANIFEST_LOADING_FINISHED,{requestObject:he})),ft.status>=200&&ft.status<=299&&ft.data)me.success&&me.success(ft.data,ft.statusText,ft.url),me.complete&&me.complete(he,ft.statusText);else{try{ft.status===404&&K.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&he.type===Le.HTTPRequest.MEDIA_SEGMENT_TYPE&&I.getRetryAttemptsForType(Le.HTTPRequest.MEDIA_SEGMENT_TYPE)===Ie&&C.trigger(L.default.ATTEMPT_BACKGROUND_SYNC)}catch{}re()}})},te=function(){he.startDate=ke,he.endDate=new Date,he.firstByteDate=he.firstByteDate||ke},Ae=function(){ft.resourceTiming.responseEnd=Date.now(),function(Ot,Zt){if(!K.get().streaming.abr.throughput.useResourceTimingApi||typeof performance>"u"||Ot.range)return;const cn=performance.getEntriesByType("resource");if(cn===void 0||cn.length<=0)return;let Nn=0,Cn=null;for(;Nn<cn.length;){if(cn[Nn].name===Ot.url){Cn=cn[Nn];break}Nn+=1}(function(We){return We&&!isNaN(We.responseStart)&&We.responseStart>0&&!isNaN(We.responseEnd)&&We.responseEnd>0&&!isNaN(We.transferSize)&&We.transferSize>0})(Cn)&&(Ot.customData.request.resourceTimingValues=Cn,Zt.resourceTiming.startTime=Cn.startTime,Zt.resourceTiming.encodedBodySize=Cn.encodedBodySize,Zt.resourceTiming.responseStart=Cn.startTime,Zt.resourceTiming.responseEnd=Cn.responseEnd,Zt.resourceTiming.duration=Cn.duration)}(st,ft)},_e=function(Ot,Zt,cn){return new Promise(Nn=>{(function(Cn){const We=ge.getRequestInterceptors();return We?We.reduce((pt,gt)=>pt.then(vt=>gt(vt)),Promise.resolve(Cn)):Promise.resolve(Cn)})(Zt).then(Cn=>{(Zt=Cn).customData.onloadend=Te,Zt.customData.onprogress=xe,Zt.customData.onabort=Oe,Zt.customData.ontimeout=je,cn.resourceTiming.startTime=Date.now(),Ot.load(Zt,cn),Nn()})})},re=function(){if(Ie>0){Ie--,me&&me.request&&(me.request.retryAttempts+=1);let Ot={config:me};$.push(Ot),Ot.timeout=setTimeout(function(){$.indexOf(Ot)!==-1&&($.splice($.indexOf(Ot),1),J(me,Ie))},I.getRetryIntervalsForType(he.type))}else{if(he.type===Le.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;S.error(new Pe.default(ie[he.type],he.url+" is not available",{request:he,response:ft})),me.error&&me.error(he,"error",ft.statusText,ft),me.complete&&me.complete(he,ft.statusText)}},he=me.request,ve=[];let fe,ke,Ce,Ve,Ke,st,ft;if(he.bytesLoaded=NaN,he.bytesTotal=NaN,he.firstByteDate=null,he.traces=[],fe=!0,ke=new Date,Ce=ke,Ve=0,Ke=null,!x||!S)throw new Error("config object is not correct or missing");const St=function(Ot){let Zt,cn;return Ot.hasOwnProperty("availabilityTimeComplete")&&Ot.availabilityTimeComplete===!1&&window.fetch&&Ot.responseType==="arraybuffer"&&Ot.type===Le.HTTPRequest.MEDIA_SEGMENT_TYPE?(de||(de=ji(E).create(),de.setConfig({dashMetrics:x,boxParser:N})),Zt=de,cn=F.default.FILE_LOADER_TYPES.FETCH):(ce||(ce=Rr(E).create()),Zt=ce,cn=F.default.FILE_LOADER_TYPES.XHR),{loader:Zt,fileLoaderType:cn}}(he),Bt=St.loader;var Ht;he.fileLoaderType=St.fileLoaderType,he.headers={},function(Ot){var Nn,Cn;const Zt=Ot==null?void 0:Ot.serviceLocation,cn=(Cn=(Nn=Ot==null?void 0:Ot.mediaInfo)==null?void 0:Nn.id)==null?void 0:Cn.toString();if(ne.isServiceLocationIncluded(Ot.type,Zt)&&ne.isAdaptationsIncluded(cn)&&se.isCmcdEnabled()){const We=se.getCmcdParametersFromManifest(),pt=We.mode?We.mode:K.get().streaming.cmcd.mode;if(pt===F.default.CMCD_MODE_QUERY){Ot.url=or.default.removeQueryParameterFromUrl(Ot.url,F.default.CMCD_QUERY_KEY);const gt=function(vt){try{const sn=[],Tn=se.getQueryParameter(vt);return Tn&&sn.push(Tn),sn}catch{return[]}}(Ot);Ot.url=or.default.addAdditionalQueryParameterToUrl(Ot.url,gt)}else pt===F.default.CMCD_MODE_HEADER&&(Ot.headers=Object.assign(Ot.headers,se.getHeaderParameters(Ot)))}}(Ht=he),Ht.retryAttempts===0&&function(Ot){let Zt=U.getFinalQueryString(Ot);Zt&&(Ot.url=or.default.addAdditionalQueryParameterToUrl(Ot.url,Zt))}(Ht),function(Ot){if(Ot.queryParams){const Zt=Object.keys(Ot.queryParams).map(cn=>({key:cn,value:Ot.queryParams[cn]}));Ot.url=or.default.addAdditionalQueryParameterToUrl(Ot.url,Zt)}}(Ht),function(Ot){const Zt=we.getCommonAccessTokenForUrl(Ot.url);Zt&&(Ot.headers[F.default.COMMON_ACCESS_TOKEN_HEADER]=Zt)}(Ht),he.range&&(he.headers.Range="bytes="+he.range);const hn=ge.getXHRWithCredentialsForType(he.type);st=new Ec({url:he.url,method:Le.HTTPRequest.GET,responseType:he.responseType,headers:he.headers,credentials:hn?"include":"omit",timeout:G,cmcd:se.getCmcdData(he),customData:{request:he}}),ft=new bc({request:st,resourceTiming:{startTime:Date.now(),encodedBodySize:0},status:0});let In=new Date().getTime();if(isNaN(he.delayLoadingTime)||In>=he.delayLoadingTime)return D.push(st),_e(Bt,st,ft);{let Ot={httpRequest:st,httpResponse:ft};return z.push(Ot),Ot.delayTimeout=setTimeout(function(){if(z.indexOf(Ot)!==-1){z.splice(z.indexOf(Ot),1);try{ke=new Date,Ce=ke,D.push(Ot.httpRequest),_e(Bt,Ot.httpRequest,Ot.httpResponse)}catch{Ot.httpRequest.onloadend()}}},he.delayLoadingTime-In),Promise.resolve()}}return V={abort:function(){$.forEach(me=>{clearTimeout(me.timeout),me.config.request&&me.config.abort&&me.config.abort(me.config.request)}),$=[],z.forEach(me=>clearTimeout(me.delayTimeout)),z=[],D.forEach(me=>{const Ie=me.customData;Ie&&(Ie.request&&Ie.request.type===Le.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE||(Ie.onloadend=Ie.onprogress=void 0,Ie.abort&&Ie.abort()))}),D=[]},load:function(me){return me.request?J(me,I.getRetryAttemptsForType(me.request.type)):(me.error&&me.error(me.request,"error"),Promise.resolve())},reset:function(){D=[],z=[],$=[],ce&&ce.reset(),de&&de.reset(),ce=null,de=null},resetInitialSettings:function(){ce&&ce.resetInitialSettings()},setConfig:function(me){me&&(me.commonAccessTokenController&&(we=me.commonAccessTokenController),me.extUrlQueryInfoController&&(U=me.extUrlQueryInfoController))}},X=(0,Be.default)(E).getInstance().getLogger(V),D=[],z=[],$=[],se=el(E).getInstance(),ne=ef(E).getInstance(),ae=Qd(E).getInstance(),ge=(0,Zl.default)(E).getInstance(),we=bg(E).getInstance(),U=vc(E).getInstance(),ie={[Le.HTTPRequest.MPD_TYPE]:B.DOWNLOAD_ERROR_ID_MANIFEST_CODE,[Le.HTTPRequest.XLINK_EXPANSION_TYPE]:B.DOWNLOAD_ERROR_ID_XLINK_CODE,[Le.HTTPRequest.INIT_SEGMENT_TYPE]:B.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE,[Le.HTTPRequest.MEDIA_SEGMENT_TYPE]:B.DOWNLOAD_ERROR_ID_CONTENT_CODE,[Le.HTTPRequest.INDEX_SEGMENT_TYPE]:B.DOWNLOAD_ERROR_ID_CONTENT_CODE,[Le.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:B.DOWNLOAD_ERROR_ID_CONTENT_CODE,[Le.HTTPRequest.OTHER_TYPE]:B.DOWNLOAD_ERROR_ID_CONTENT_CODE},V}nf.__dashjs_factory_name="HTTPLoader";var Tg=Ee.default.getClassFactory(nf);function Jl(){let _,E;function S(){E={}}function x(){S()}return x(),_={getLoader:function(I){for(var N in E)if(E.hasOwnProperty(N)&&I.startsWith(N))return E[N];return Tg},registerLoader:function(I,N){E[I]=N},unregisterLoader:function(I){E[I]&&delete E[I]},unregisterAllLoader:S,reset:x},_}Jl.__dashjs_factory_name="SchemeLoaderFactory";var rf=Ee.default.getSingletonFactory(Jl);function af(_){_=_||{};const E=this.context;let S,x,I;return x=rf(E).getInstance(),S={abort:function(){I&&I.abort()},load:function(N){I||(I=x.getLoader(N&&N.request?N.request.url:null)(E).create({errHandler:_.errHandler,mediaPlayerModel:_.mediaPlayerModel,dashMetrics:_.dashMetrics,boxParser:_.boxParser?_.boxParser:null,constants:_.constants?_.constants:null,dashConstants:_.dashConstants?_.dashConstants:null,urlUtils:_.urlUtils?_.urlUtils:null,requestTimeout:isNaN(_.requestTimeout)?0:_.requestTimeout,errors:_.errors})),I.load(N)},reset:function(){x&&(x.reset(),x=null),I&&typeof I.reset=="function"&&I.reset(),I=null},resetInitialSettings:function(){I&&typeof I.resetInitialSettings=="function"&&I.resetInitialSettings()}},S}af.__dashjs_factory_name="URLLoader";var mo=Ee.default.getClassFactory(af),sf=class extends Ge{constructor(_){super(_),this.checkForExistenceOnly=!0}};function of(_){_=_||{};const E=this.context,S=_.eventBus,x=_.events,I=_.urlUtils,N=_.errors,B=_.streamId;let G,C;return G={abort:function(){C&&C.abort()},checkForExistence:function(K){const V=function(D){S.trigger(x.CHECK_FOR_EXISTENCE_COMPLETED,{request:K,exists:D})};if(K){let D=new sf(K.url);C.load({request:D,success:function(){V(!0)},error:function(){V(!1)}})}else V(!1)},load:function(K){const V=function(D,z){S.trigger(x.LOADING_COMPLETED,{request:K,response:D||null,error:z||null,sender:G})};K?C.load({request:K,progress:function(D){S.trigger(x.LOADING_PROGRESS,{request:K,stream:D.stream,streamId:B}),D.data&&S.trigger(x.LOADING_DATA_PROGRESS,{request:K,response:D.data||null,error:null,sender:G})},success:function(D){V(D)},error:function(D,z,$){V(void 0,new Pe.default(N.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,$,z))},abort:function(D){D&&S.trigger(x.LOADING_ABANDONED,{mediaType:D.mediaType,request:D,sender:G})}}):V(void 0,new Pe.default(N.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,N.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},reset:function(){C&&(C.abort(),C.reset(),C=null)},resetInitialSettings:function(){C&&C.resetInitialSettings()}},C=mo(E).create({errHandler:_.errHandler,errors:N,dashMetrics:_.dashMetrics,mediaPlayerModel:_.mediaPlayerModel,urlUtils:I,constants:F.default,boxParser:_.boxParser,dashConstants:_.dashConstants,requestTimeout:_.settings.get().streaming.fragmentRequestTimeout}),G}of.__dashjs_factory_name="FragmentLoader";var Sg=Ee.default.getClassFactory(of);function lf(_){_=_||{};const E=this.context,S=(0,oe.default)(E).getInstance(),x=_.errHandler,I=_.mediaPlayerModel,N=_.dashMetrics,B=(0,Be.default)(E).getInstance(),G=_.streamInfo;let C,K,V;function D(){return G.id}function z(){for(let ie in V)V[ie].reset();V={}}function $(ie){if(!ie.sender)return;const se=ie.request,ae=ie.response,ce=se.isInitializationRequest(),de=se.representation.mediaInfo.streamInfo;if(ie.error&&(se.mediaType===F.default.AUDIO||se.mediaType===F.default.VIDEO||se.mediaType===F.default.TEXT&&se.representation.mediaInfo.isFragmented)&&S.trigger(L.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:ie.request.serviceLocation}),!ae||!de)return void K.warn("No "+se.mediaType+" bytes to push or stream is inactive.");const ge=function(we,ne,U,X){const J=new Tr;return J.streamId=U,J.segmentType=ne.type,J.start=ne.startTime,J.duration=ne.duration,J.end=J.start+J.duration,J.bytes=we,J.index=ne.index,J.representation=ne.representation,J.endFragment=X,J}(ae,se,G.id,ie.type!==L.default.FRAGMENT_LOADING_PROGRESS);S.trigger(ce?L.default.INIT_FRAGMENT_LOADED:L.default.MEDIA_FRAGMENT_LOADED,{chunk:ge,request:se},{streamId:de.id,mediaType:se.mediaType})}return C={getStreamId:D,getModel:function(ie){let se=V[ie];return se||(se=Dt(E).create({streamInfo:G,type:ie,dashMetrics:N,fragmentLoader:Sg(E).create({dashMetrics:N,mediaPlayerModel:I,errHandler:x,settings:_.settings,boxParser:_.boxParser,eventBus:S,events:L.default,errors:W,dashConstants:_.dashConstants,urlUtils:_.urlUtils,streamId:D()}),debug:B,eventBus:S,events:L.default}),V[ie]=se),se},reset:function(){S.off(pe.default.FRAGMENT_LOADING_COMPLETED,$,this),S.off(pe.default.FRAGMENT_LOADING_PROGRESS,$,this),z()}},K=B.getLogger(C),z(),S.on(pe.default.FRAGMENT_LOADING_COMPLETED,$,C),S.on(pe.default.FRAGMENT_LOADING_PROGRESS,$,C),C}lf.__dashjs_factory_name="FragmentController";var _g=Ee.default.getClassFactory(lf),xg=class{constructor(){this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}},wg=class{constructor(){this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}};class Tc{constructor(E){if(this.offset=E._offset,this.type=E.type,this.size=E.size,this.boxes=[],E.boxes)for(let S=0;S<E.boxes.length;S++)this.boxes.push(new Tc(E.boxes[S]));switch(this.isComplete=!0,E.type){case"sidx":if(this.timescale=E.timescale,this.earliest_presentation_time=E.earliest_presentation_time,this.first_offset=E.first_offset,this.references=E.references,E.references){this.references=[];for(let S=0;S<E.references.length;S++){let x={reference_type:E.references[S].reference_type,referenced_size:E.references[S].referenced_size,subsegment_duration:E.references[S].subsegment_duration};this.references.push(x)}}break;case"emsg":this.id=E.id,this.version=E.version===1?1:0,this.value=E.value,this.timescale=E.timescale,this.scheme_id_uri=E.scheme_id_uri,this.presentation_time_delta=E.version===1?E.presentation_time:E.presentation_time_delta,this.event_duration=E.event_duration,this.message_data=E.message_data;break;case"mdhd":this.timescale=E.timescale;break;case"mfhd":this.sequence_number=E.sequence_number;break;case"subs":this.entry_count=E.entry_count,this.entries=E.entries;break;case"tfhd":this.base_data_offset=E.base_data_offset,this.sample_description_index=E.sample_description_index,this.default_sample_duration=E.default_sample_duration,this.default_sample_size=E.default_sample_size,this.default_sample_flags=E.default_sample_flags,this.flags=E.flags;break;case"tfdt":this.version=E.version,this.baseMediaDecodeTime=E.baseMediaDecodeTime,this.flags=E.flags;break;case"trun":if(this.sample_count=E.sample_count,this.first_sample_flags=E.first_sample_flags,this.data_offset=E.data_offset,this.flags=E.flags,this.samples=E.samples,E.samples){this.samples=[];for(let S=0,x=E.samples.length;S<x;S++){let I={sample_size:E.samples[S].sample_size,sample_duration:E.samples[S].sample_duration,sample_composition_time_offset:E.samples[S].sample_composition_time_offset};this.samples.push(I)}}break;case"prft":this.version=E.version,this.reference_track_ID=E.reference_track_ID,this.ntp_timestamp_sec=E.ntp_timestamp_sec,this.ntp_timestamp_frac=E.ntp_timestamp_frac,this.media_time=E.media_time,this.flags=E.flags}}getChildBox(E){for(let S=0;S<this.boxes.length;S++)if(this.boxes[S].type===E)return this.boxes[S]}getChildBoxes(E){let S=[];for(let x=0;x<this.boxes.length;x++)this.boxes[x].type===E&&S.push(this.boxes[x]);return S}}var Sc=Tc;function po(){let _,E;function S(I){let N=[];if(!I||!E||typeof E.fetchAll!="function")return N;let B,G=E.fetchAll(I);for(let C=0,K=G.length;C<K;C++)B=x(G[C]),B&&N.push(B);return N}function x(I){if(!I)return null;let N=new Sc(I);return I.hasOwnProperty("_incomplete")&&(N.isComplete=!I._incomplete),N}return _={getBox:function(I){return I&&E&&E.boxes&&E.boxes.length!==0&&typeof E.fetch=="function"?x(E.fetch(I)):null},getBoxes:S,setData:function(I){E=I},getLastBox:function(){if(!E||!E.boxes||!E.boxes.length)return null;let I=S(E.boxes[E.boxes.length-1].type);return I.length>0?I[I.length-1]:null}},_}po.__dashjs_factory_name="IsoFile";var Ig=Ee.default.getClassFactory(po),yo=t(6877),eu=class{constructor(_){let{found:E,sizeOfLastCompletedBox:S,sizeOfLastFoundTargetBox:x,startOffsetOfLastCompletedBox:I,startOffsetOfLastFoundTargetBox:N,typeOfLastCompletedBox:B,typeOfLastTargetBox:G}=_;this.found=E!==void 0&&E,this.sizeOfLastCompletedBox=S!==void 0?S:0,this.sizeOfLastFoundTargetBox=x!==void 0?x:0,this.startOffsetOfLastCompletedBox=I!==void 0?I:0,this.startOffsetOfLastFoundTargetBox=N!==void 0?N:0,this.typeOfLastCompletedBox=B!==void 0?B:null,this.typeOfLastTargetBox=G!==void 0?G:null}};function _c(){let _,E,S=this.context;function x(B){if(!B)return null;B.fileStart===void 0&&(B.fileStart=0);let G=yo.parseBuffer(B),C=Ig(S).create();return C.setData(G),C}function I(B,G){return B[G+3]>>>0|B[G+2]<<8>>>0|B[G+1]<<16>>>0|B[G]<<24>>>0}function N(B,G){return String.fromCharCode(B[G++])+String.fromCharCode(B[G++])+String.fromCharCode(B[G++])+String.fromCharCode(B[G])}return E={findInitRange:function(B){let G,C,K=null;const V=x(B);if(!V)return K;const D=V.getBox("ftyp"),z=V.getBox("moov");return _.debug("Searching for initialization."),z&&z.isComplete&&(G=D?D.offset:z.offset,C=z.offset+z.size-1,K=G+"-"+C,_.debug("Found the initialization.  Range: "+K)),K},findLastTopIsoBoxCompleted:function(B,G,C){if(C===void 0&&(C=0),!G||C+8>=G.byteLength)return new eu({found:!1});const K=G instanceof ArrayBuffer?new Uint8Array(G):G;let V,D=0,z=0,$=null;for(;C<K.byteLength;){const ie=I(K,C),se=N(K,C+4);if(ie===0)break;C+ie<=K.byteLength&&(B.indexOf(se)>=0?V=new eu({found:!0,startOffsetOfLastFoundTargetBox:C,sizeOfLastFoundTargetBox:ie,typeOfLastTargetBox:se}):(D=C,z=ie,$=se)),C+=ie}return V||new eu({found:!1,startOffsetOfLastCompletedBox:D,sizeOfLastCompletedBox:z,typeOfLastCompletedBox:$})},getMediaTimescaleFromMoov:function(B){let G=x(B),C=G?G.getBox("mdhd"):void 0;return C?C.timescale:NaN},getSamplesInfo:function(B){if(!B||B.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};let G,C,K,V,D,z,$,ie,se,ae,ce,de,ge,we,ne,U,X,J=x(B),me=J.getBoxes("moof"),Ie=J.getBoxes("mfhd");U=J.getBoxes("moof").length,ne=Ie[Ie.length-1].sequence_number,K=0,z=[];let Te=-1,xe=-1;for(ce=0;ce<me.length;ce++){let Oe=me[ce],je=Oe.getChildBoxes("traf");for(se=0;se<je.length;se++){let ee=je[se],te=ee.getChildBox("tfhd"),Ae=ee.getChildBox("tfdt");D=Ae.baseMediaDecodeTime;let _e=ee.getChildBoxes("trun"),re=ee.getChildBoxes("subs");for(ae=0;ae<_e.length;ae++){let he=_e[ae];for(K=he.sample_count,we=(te.base_data_offset||0)+(he.data_offset||0),ie=0;ie<K;ie++){$=he.samples[ie],G=$.sample_duration!==void 0?$.sample_duration:te.default_sample_duration,V=$.sample_size!==void 0?$.sample_size:te.default_sample_size,C=$.sample_composition_time_offset!==void 0?$.sample_composition_time_offset:0;let ve={dts:D,cts:D+C,duration:G,offset:Oe.offset+we,size:V,subSizes:[V]};if(re)for(de=0;de<re.length;de++){let fe=re[de];if(Te<fe.entry_count-1&&ie>xe&&(Te++,xe+=fe.entries[Te].sample_delta),ie==xe){ve.subSizes=[];let ke=fe.entries[Te];for(ge=0;ge<ke.subsample_count;ge++)ve.subSizes.push(ke.subsamples[ge].subsample_size)}}z.push(ve),we+=V,D+=G}}X=D-Ae.baseMediaDecodeTime}}return{sampleList:z,lastSequenceNumber:ne,totalDuration:X,numSequences:U}},parse:x},_=(0,Be.default)(S).getInstance().getLogger(E),E}_c.__dashjs_factory_name="BoxParser";var rl=Ee.default.getSingletonFactory(_c);function xc(_){const E=this.context,S=_.adapter,x=_.baseURLController,I=_.streamInfo,N=_.timelineConverter,B=_.debug,G=_.eventBus,C=_.events,K=_.dashConstants,V=dn(E).getInstance();let D,z,$,ie,se,ae,ce,de,ge;function we(U,X){const J=new wg;J.id=U.id,J.bitrate=U.bandwidth,J.width=U.width,J.height=U.height,J.tilesHor=1,J.tilesVert=1,U.essentialProperties&&U.essentialProperties.forEach(me=>{if(F.default.THUMBNAILS_SCHEME_ID_URIS.indexOf(me.schemeIdUri)>=0&&me.value){const Ie=me.value.split("x");Ie.length!==2||isNaN(Ie[0])||isNaN(Ie[1])||(J.tilesHor=parseInt(Ie[0],10),J.tilesVert=parseInt(Ie[1],10))}}),X?ce.updateSegmentData(U).then(me=>{(function(Ie,Te,xe){let Oe=[];const je=function(ee,te){const Ae=[];let _e,re,he,ve,fe=0;for(_e=0,re=ee.segments.length;_e<re;_e++)he=ee.segments[_e],ve=Fr(N,S.getIsDynamic(),te,he.startTime,he.duration,he.timescale,he.media,he.mediaRange,fe),ve&&(Ae.push(ve),ve=null,fe++);return Ae}(xe,Te);Te.segments=je,Te.fragmentDuration=Te.segmentDuration||(Te.segments&&Te.segments.length>0?Te.segments[0].duration:NaN),Ie.segmentDuration=Te.segments[0].duration,Ie.readThumbnail=function(ee,te){let Ae=null;Oe.some(_e=>{if(_e.start<=ee&&_e.end>ee)return Ae=_e.url,!0}),Ae?te(Ae):Te.segments.some(_e=>{if(_e.mediaStartTime<=ee&&_e.mediaStartTime+_e.duration>ee){const re=x.resolve(Te.path),he=new Ec({method:"get",url:re.url,responseType:"arraybuffer",customData:{request:{range:_e.mediaRange},onloadend:function(fe){let ke=ge.getSamplesInfo(fe.target.response),Ce=new Blob([fe.target.response.slice(ke.sampleList[0].offset,ke.sampleList[0].offset+ke.sampleList[0].size)],{type:"image/jpeg"}),Ve=window.URL.createObjectURL(Ce);Oe.push({start:_e.mediaStartTime,end:_e.mediaStartTime+_e.duration,url:Ve}),te&&te(Ve)}}}),ve=new bc({request:he});return de.load(he,ve),!0}})}})(J,U,me)}):(J.startNumber=U.startNumber,J.segmentDuration=U.segmentDuration,J.timescale=U.timescale,J.templateUrl=function(me){const Ie=V.isRelative(me.media)?V.resolve(me.media,x.resolve(me.path).url):me.media;return Ie?wr(Ie,me.id):""}(U)),J.tilesHor>0&&J.tilesVert>0&&(J.widthPerTile=J.width/J.tilesHor,J.heightPerTile=J.height/J.tilesVert,z.push(J))}function ne(){z=[],$=[],se=-1,ae=null,ie&&(ie.reset(),ie=null)}return D={addTracks:function(){if(!I||!S||(ae=S.getMediaInfoForType(I,F.default.IMAGE),!ae))return;const U=S.getVoRepresentations(ae);U&&U.length>0&&U.forEach(X=>{(X.segmentInfoType===k.default.SEGMENT_TEMPLATE&&X.segmentDuration>0&&X.media||X.segmentInfoType===k.default.SEGMENT_TIMELINE)&&we(X),X.segmentInfoType===k.default.SEGMENT_BASE&&we(X,!0),$.push(X)}),z.length>0&&z.sort((X,J)=>X.bitrate-J.bitrate)},getCurrentTrack:function(){return se<0?null:z[se]},getCurrentTrackIndex:function(){return se},getRepresentations:function(){return $},getThumbnailRequestForTime:function(U){let X;const J=S.getVoRepresentations(ae);for(let me=0;me<J.length;me++)if(z[se].id===J[me].id){X=J[me];break}return ie.getSegmentRequestForTime(ae,X,U)},getTracks:function(){return z},reset:ne,setTrackById:function(U){if(!z||z.length===0)return;const X=z.findIndex(J=>J.id===U);X!==-1&&(se=X)},setTrackByIndex:function(U){z&&z.length!==0&&(U>=z.length&&(U=z.length-1),se=U)}},ne(),de=Rr(E).create({}),ge=rl(E).getInstance(),ce=Nt(E).create({events:C,eventBus:G,streamInfo:I,timelineConverter:N,dashConstants:K,dashMetrics:_.dashMetrics,segmentBaseController:_.segmentBaseController,type:F.default.IMAGE}),ie=kt(E).create({streamInfo:I,type:F.default.IMAGE,timelineConverter:N,segmentsController:ce,baseURLController:x,debug:B,eventBus:G,events:C,dashConstants:K,urlUtils:V}),ie.initialize(!!S&&S.getIsDynamic()),D}xc.__dashjs_factory_name="ThumbnailTracks";var vo=Ee.default.getClassFactory(xc);function uf(_){const E=this.context,S=_.streamInfo;let x,I;function N(G){I.setTrackByIndex(G)}function B(){I&&I.reset()}return x={getCurrentTrack:function(){return I.getCurrentTrack()},getCurrentTrackIndex:function(){return I.getCurrentTrackIndex()},getPossibleVoRepresentations:function(){return I.getRepresentations()},getStreamId:function(){return S.id},initialize:function(){I.addTracks();const G=I.getTracks();G&&G.length>0&&N(0)},provide:function(G,C){if(typeof C!="function")return;const K=I.getCurrentTrack();let V,D;if(!K||K.segmentDuration<=0||G==null)return void C(null);D=I.getThumbnailRequestForTime(G),D&&(K.segmentDuration=D.duration),V=G%K.segmentDuration;const z=Math.floor(V*K.tilesHor*K.tilesVert/K.segmentDuration),$=new xg;if($.width=Math.floor(K.widthPerTile),$.height=Math.floor(K.heightPerTile),$.x=Math.floor(z%K.tilesHor)*K.widthPerTile,$.y=Math.floor(z/K.tilesHor)*K.heightPerTile,"readThumbnail"in K)return K.readThumbnail(G,ie=>{$.url=ie,C($)});if(D)$.url=D.url,K.segmentDuration=NaN;else{const ie=Math.floor(G/K.segmentDuration);$.url=function(se,ae){const ce=ae+se.startNumber;return wr(se.templateUrl,void 0,ce,void 0,se.bandwidth,(ce-1)*se.segmentDuration*se.timescale)}(K,ie)}C($)},reset:B,setTrackByIndex:N,setTrackById:function(G){I.setTrackById(G)}},B(),I=vo(E).create({streamInfo:S,adapter:_.adapter,baseURLController:_.baseURLController,timelineConverter:_.timelineConverter,debug:_.debug,eventBus:_.eventBus,events:_.events,dashConstants:_.dashConstants,dashMetrics:_.dashMetrics,segmentBaseController:_.segmentBaseController}),x}uf.__dashjs_factory_name="ThumbnailController";var Ag=Ee.default.getClassFactory(uf);function cf(_){let E;_=_||{};let S=[];const x=(0,oe.default)(this.context).getInstance(),I=_.updateEventName,N=_.addBlacklistEventName;function B(C){S.indexOf(C)===-1&&(S.push(C),x.trigger(I,{entry:C}))}function G(C){B(C.entry)}return E={add:B,remove:function(C){const K=S.indexOf(C);K!==-1&&S.splice(K,1)},contains:function(C){return!!(S.length&&C&&C.length)&&S.indexOf(C)!==-1},reset:function(){N&&x.off(N,G,E),S=[]}},N&&x.on(N,G,E),E}cf.__dashjs_factory_name="BlackListController";var tu=Ee.default.getClassFactory(cf);const df=[F.default.VIDEO,F.default.AUDIO,F.default.TEXT,F.default.MUXED,F.default.IMAGE];function Eo(_){_=_||{};const E=this.context,S=(0,oe.default)(E).getInstance(),x=dn(E).getInstance(),I=_.manifestModel,N=_.mediaPlayerModel,B=_.dashMetrics,G=_.manifestUpdater,C=_.adapter,K=_.timelineConverter,V=_.capabilities,D=_.errHandler,z=_.abrController,$=_.playbackController,ie=_.throughputController,se=_.eventController,ae=_.mediaController,ce=_.protectionController,de=_.textController,ge=_.videoModel;let we=_.streamInfo;const ne=_.settings;let U,X,J,me,Ie,Te,xe,Oe,je,ee,te,Ae,_e,re,he,ve;function fe(yt,Yt,tn){return new Promise((jt,on)=>{Bt(),hn();let at=ge.getElement();const At=[];df.forEach(Qt=>{if((Qt!==F.default.TEXT||yt)&&(Qt!==F.default.VIDEO||!at||at&&/^VIDEO$/i.test(at.nodeName))){const nn=tn.find(Et=>Et.mediaInfo.type===Qt);At.push(ke(Qt,yt,nn))}}),Promise.all(At).then(()=>{return Qt=Yt,new Promise(nn=>{const Et={},Ne=J.map(nt=>{const _t=nt.getRepresentation();return nt.createBufferSinks(Qt,_t)});Promise.all(Ne).then(nt=>{nt.forEach(_t=>{_t&&(Et[_t.getType()]=_t)}),nn(Et)}).catch(()=>{nn(Et)})});var Qt}).then(Qt=>{if(J.length===0){const nn="No streams to play.";D.error(new Pe.default(W.MANIFEST_ERROR_ID_NOSTREAMS_CODE,nn,I.getValue())),X.fatal(nn)}else vt();yt&&de.createTracks(we),jt(Qt)}).catch(Qt=>{on(Qt)})})}function ke(yt,Yt,tn){let jt,on=C.getAllMediaInfoForType(we,yt),at=[],At=null;if(!on||on.length===0)return X.info("No "+yt+" data."),Promise.resolve();yt===F.default.VIDEO&&(xe=!0),yt===F.default.AUDIO&&(Oe=!0);for(let nn=0,Et=on.length;nn<Et;nn++)At=on[nn],yt===F.default.TEXT&&At.isEmbedded&&(de.addEmbeddedTrack(we,At),at.push(At)),Ce(At)&&ae.addTrack(At);if(at.length>0&&(ae.setInitialMediaSettingsForType(yt,we),de.addMediaInfosToBuffer(we,yt,at)),on=on.filter(nn=>!nn.isEmbedded),on.length===0)return Promise.resolve();if(yt===F.default.IMAGE)return ee=Ag(E).create({streamInfo:we,adapter:C,baseURLController:_.baseURLController,timelineConverter:_.timelineConverter,debug:re,eventBus:S,events:L.default,dashConstants:k.default,dashMetrics:_.dashMetrics,segmentBaseController:_.segmentBaseController}),ee.initialize(),Promise.resolve();S.trigger(L.default.STREAM_INITIALIZING,{streamInfo:we,mediaInfo:At}),ae.setInitialMediaSettingsForType(yt,we);let Qt=function(nn,Et){const Ne=nn&&nn.length>0?nn[0]:null;let nt=je.getModel(Ne?Ne.type:null);const _t=Ne?Ne.type:null,rt=Ne?Ne.mimeType:null,Ft=Ne?Ne.isFragmented:null;let Vt=rr(E).create({abrController:z,adapter:C,baseURLController:_.baseURLController,boxParser:_e,capabilities:V,dashMetrics:_.dashMetrics,errHandler:D,fragmentModel:nt,manifestModel:I,mediaController:ae,mediaPlayerModel:N,mimeType:rt,playbackController:$,segmentBaseController:_.segmentBaseController,segmentBlacklistController:te,settings:ne,streamInfo:we,textController:de,throughputController:ie,timelineConverter:K,type:_t});return Vt.initialize(Et,xe,Ft),J.push(Vt),Vt.setMediaInfoArray(nn),_t===F.default.TEXT&&de.addMediaInfosToBuffer(we,_t,nn,nt),Vt}(on,Yt);if(jt=ae.getCurrentTrackFor(yt,we.id),jt){const nn=yt===F.default.TEXT&&jt.isEmbedded?on[0]:jt,Et=new gn({newMediaInfo:nn,previouslySelectedRepresentation:tn});return Qt.selectMediaInfo(Et)}return Promise.resolve()}function Ce(yt){const Yt=yt?yt.type:null;let tn;return Yt===F.default.MUXED?(tn="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",X.fatal(tn),D.error(new Pe.default(W.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,tn,I.getValue())),!1):!(Yt!==F.default.TEXT&&Yt!==F.default.IMAGE&&yt.contentProtection&&yt.contentProtection.length>0&&!V.supportsEncryptedMedia()&&(D.error(new Pe.default(W.CAPABILITY_MEDIAKEYS_ERROR_CODE,W.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function Ve(yt){let Yt=J?J.length:0;for(let tn=0;tn<Yt;tn++){let jt=J[tn].getFragmentModel();jt.abortRequests(),jt.resetInitialSettings(),J[tn].reset(!1,yt)}de&&de.deactivateStream(we),ee&&(ee.reset(),ee=null),J=[],Ie=!1,Te=!1,sn(!1),st(!1),S.trigger(L.default.STREAM_DEACTIVATED,{streamInfo:we})}function Ke(yt){Ve(yt),me=!1,xe=!1,Oe=!1,he=!1,ve=[]}function st(yt){he=yt}function ft(){return we?we.start:NaN}function St(){return we?we.id:null}function Bt(){if(!ge||!z)throw new Error(F.default.MISSING_CONFIG_ERROR)}function Ht(yt){yt.error&&(D.error(yt.error),X.fatal(yt.error.message))}function hn(){if(se){const yt=C.getEventsFor(we);yt&&yt.length>0&&se.addInlineEvents(yt,we.id)}}function In(yt){let Yt=Ot(yt);return Yt?Yt.getMediaInfo():null}function Ot(yt){return yt?J.find(Yt=>Yt.getType()===yt):null}function Zt(){let yt=pt();const Yt=yt.length;if(Yt!==0){for(let tn=0;tn<Yt;tn++)if(!yt[tn].isBufferingCompleted()&&(yt[tn].getType()===F.default.AUDIO||yt[tn].getType()===F.default.VIDEO))return void X.debug("onBufferingCompleted - One streamProcessor has finished but",yt[tn].getType(),"one is not buffering completed");X.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),Te=!0,S.trigger(L.default.STREAM_BUFFERING_COMPLETED,{streamInfo:we},{streamInfo:we})}else X.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function cn(yt){se&&se.addInbandEvents(yt.events,we.id)}function Nn(){vt()}function Cn(yt){return yt&&yt.type?We(yt.type):null}function We(yt){return yt?pt().filter(function(Yt){return Yt.getType()===yt})[0]:null}function pt(){let yt,Yt,tn=[];for(let jt=0;jt<J.length;jt++)Yt=J[jt],yt=Yt.getType(),yt!==F.default.AUDIO&&yt!==F.default.VIDEO&&yt!==F.default.TEXT||tn.push(Yt);return tn}function gt(){const yt=J.length;for(let Yt=0;Yt<yt&&J[Yt];Yt++)J[Yt].getScheduleController().startScheduleTimer()}function vt(){const yt=J.length;if(ce){ce.clearMediaInfoArray();for(let Yt=0;Yt<yt&&J[Yt];Yt++){const tn=J[Yt].getType(),jt=J[Yt].getMediaInfo();if(tn===F.default.AUDIO||tn===F.default.VIDEO||tn===F.default.TEXT&&jt&&jt.isFragmented){let on=J[Yt].getMediaInfo();on&&ce.initializeForMedia(on)}}ce.handleKeySystemFromManifest()}me||(me=!0,ge.waitForReadyState(F.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,()=>{S.trigger(L.default.STREAM_INITIALIZED,{streamInfo:we})}))}function sn(yt){Ae=yt}function Tn(){return Ae}return U={activate:function(yt,Yt){let tn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return new Promise((jt,on)=>{if(!Ie)return Tn()?(Ie=!0,S.trigger(L.default.STREAM_ACTIVATED,{streamInfo:we}),void jt(Yt)):void function(at,At){return fe(at,At,arguments.length>2&&arguments[2]!==void 0?arguments[2]:[])}(yt,Yt,tn).then(at=>{Ie=!0,tn&&tn.length>0&&gt(),S.trigger(L.default.STREAM_ACTIVATED,{streamInfo:we}),jt(at)}).catch(at=>{on(at)});jt(Yt)})},checkAndHandleCompletedBuffering:function(){Te||J.forEach(yt=>{yt.checkAndHandleCompletedBuffering()})},deactivate:Ve,getAdapter:function(){return C},getCurrentMediaInfoForType:function(yt){const Yt=We(yt);return Yt?Yt.getMediaInfo():null},getCurrentRepresentationForType:function(yt){const Yt=We(yt);return Yt?Yt.getRepresentation():null},getDuration:function(){return we?we.duration:NaN},getHasAudioTrack:function(){return Oe},getHasFinishedBuffering:function(){return Te},getHasVideoTrack:function(){return xe},getId:St,getIsActive:function(){return Ie},getIsEndedEventSignaled:function(){return he},getPreloaded:Tn,getRepresentationForTypeById:function(yt,Yt){let tn;if(yt===F.default.IMAGE){if(!ee)return null;tn=ee.getPossibleVoRepresentations()}else tn=function(at){let At=Ot(at);return At?At.getAllMediaInfos():[]}(yt).flatMap(at=>z.getPossibleVoRepresentationsFilteredBySettings(at,!0));if(!tn||tn.length===0)return null;const jt=tn.filter(on=>on.id===Yt);return jt&&jt.length>0?jt[0]:null},getRepresentationForTypeByIndex:function(yt,Yt){let tn;if(yt===F.default.IMAGE){if(!ee)return null;tn=ee.getPossibleVoRepresentations()}else{const jt=In(yt);tn=z.getPossibleVoRepresentationsFilteredBySettings(jt,!0)}return tn[Yt=Math.max(Math.min(Yt,tn.length-1),0)]},getRepresentationsByType:function(yt){if(Bt(),yt===F.default.IMAGE)return ee?ee.getPossibleVoRepresentations():[];const Yt=In(yt);return z.getPossibleVoRepresentationsFilteredBySettings(Yt,!0)},getStartTime:ft,getStreamId:function(){return we?we.id:null},getStreamInfo:function(){return we},getStreamProcessors:pt,getThumbnailController:function(){return ee},initialize:function(){S.on(L.default.BUFFERING_COMPLETED,Zt,U),S.on(L.default.INBAND_EVENTS,cn,U),S.on(L.default.DATA_UPDATE_COMPLETED,Nn,U),ce&&(S.on(L.default.KEY_ERROR,Ht,U),S.on(L.default.SERVER_CERTIFICATE_UPDATED,Ht,U),S.on(L.default.LICENSE_REQUEST_COMPLETE,Ht,U),S.on(L.default.KEY_SYSTEM_SELECTED,Ht,U),S.on(L.default.KEY_SESSION_CREATED,Ht,U)),de.initializeForStream(we),S.trigger(L.default.STREAM_UPDATED,{streamInfo:we})},initializeForTextWithMediaSource:function(yt){return new Promise((Yt,tn)=>{ke(F.default.TEXT,yt,null).then(()=>function(){const jt=We(F.default.TEXT);return jt?jt.createBufferSinks():Promise.resolve()}()).then(()=>{de.createTracks(we),Yt()}).catch(jt=>{tn(jt)})})},prepareQualityChange:function(yt){const Yt=We(yt.mediaType);Yt&&Yt.prepareQualityChange(yt)},prepareTrackChange:function(yt){if(!Ie||!we)return;Te=!1;let Yt=yt.newMediaInfo,tn=I.getValue(),jt=Cn(Yt);if(!jt)return;let on=$.getTime();if(X.info("Stream -  Process track changed at current time "+on),tn.refreshManifestOnSwitchTrack)ve.push(yt),G.getIsUpdating()||(X.debug("Stream -  Refreshing manifest for switch track"),G.refreshManifest());else{jt.clearScheduleTimer(),jt.setTrackSwitchInProgress(!0);const at=jt.getRepresentation();jt.selectMediaInfo(new gn({newMediaInfo:Yt})).then(()=>{const At=!!(yt&&yt.options&&yt.options.hasOwnProperty("replaceBuffer"))&&yt.options.replaceBuffer;return jt.prepareTrackSwitch(at,At)}).then(()=>{jt.setTrackSwitchInProgress(!1)})}},reset:function(yt){je&&(je.reset(),je=null),z&&we&&z.clearDataForStream(we.id),te&&(te.reset(),te=null),de&&we&&de.clearDataForStream(we.id),ae&&we&&ae.clearDataForStream(we.id),Ke(yt),we=null,S.off(L.default.BUFFERING_COMPLETED,Zt,U),S.off(L.default.INBAND_EVENTS,cn,U),S.off(L.default.DATA_UPDATE_COMPLETED,Nn,U),ce&&(S.off(L.default.KEY_ERROR,Ht,U),S.off(L.default.SERVER_CERTIFICATE_UPDATED,Ht,U),S.off(L.default.LICENSE_REQUEST_COMPLETE,Ht,U),S.off(L.default.KEY_SYSTEM_SELECTED,Ht,U),S.off(L.default.KEY_SESSION_CREATED,Ht,U))},setIsEndedEventSignaled:st,setMediaSource:function(yt){return new Promise((Yt,tn)=>{const jt=[];for(let on=0;on<J.length;)Ce(J[on].getMediaInfo())?(jt.push(J[on].setMediaSource(yt)),on++):(J[on].reset(),J.splice(on,1));Promise.all(jt).then(()=>{for(let on=0;on<J.length;on++)J[on].dischargePreBuffer();if(J.length===0){const on="No streams to play.";D.error(new Pe.default(W.MANIFEST_ERROR_ID_NOSTREAMS_CODE,on+"nostreams",I.getValue())),X.fatal(on)}Yt()}).catch(on=>{X.error(on),tn(on)})})},startPreloading:function(yt,Yt){let tn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return new Promise((jt,on)=>{Tn()?on():(X.info(`[startPreloading] Preloading next stream with id ${St()}`),sn(!0),fe(yt,Yt,tn).then(()=>{for(let at=0;at<J.length&&J[at];at++)J[at].setExplicitBufferingTime(ft()),J[at].getScheduleController().startScheduleTimer();jt()}).catch(()=>{sn(!1),on()}))})},startScheduleControllers:gt,triggerProtectionError:function(yt){Ht(yt)},updateData:function(yt){return new Promise(Yt=>{we=yt,se&&hn();let tn,jt=[];for(let on=0,at=J.length;on<at;on++){let At=J[on];const Qt=At.getMediaInfo();jt.push(At.updateStreamInfo(we));let nn=C.getAllMediaInfoForType(we,At.getType());if(nn=nn.filter(Et=>!Et.isEmbedded),At.setMediaInfoArray(nn),nn)for(let Et=0;Et<nn.length;Et++)C.areMediaInfosEqual(Qt,nn[Et])&&jt.push(At.selectMediaInfo(new gn({newMediaInfo:nn[Et]})))}Promise.all(jt).then(()=>{let on=[];for(;ve.length>0;){let at=ve.pop(),At=at.newMediaInfo;if(tn=Cn(at.oldMediaInfo),!tn)return;const Qt=tn.getRepresentation();tn.setTrackSwitchInProgress(!0),on.push(tn.prepareTrackSwitch(Qt)),on.push(tn.selectMediaInfo(new gn({newMediaInfo:At})))}return Promise.all(on)}).then(()=>{vt(),tn&&tn.setTrackSwitchInProgress(!1),S.trigger(L.default.STREAM_UPDATED,{streamInfo:we}),Yt()}).catch(on=>{D.error(on)})})}},function(){try{re=(0,Be.default)(E).getInstance(),X=re.getLogger(U),Ke(),_e=rl(E).getInstance(),te=tu(E).create({updateEventName:L.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:L.default.SEGMENT_LOCATION_BLACKLIST_ADD}),je=_g(E).create({streamInfo:we,mediaPlayerModel:N,dashMetrics:B,errHandler:D,settings:ne,boxParser:_e,dashConstants:k.default,urlUtils:x})}catch(yt){throw yt}}(),U}Eo.__dashjs_factory_name="Stream";var il=Ee.default.getClassFactory(Eo),kg=class{constructor(_){this.url=_||null,this.type=Le.HTTPRequest.CONTENT_STEERING_TYPE,this.responseType="json"}},nu=class{constructor(){this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]}};function ff(){const _=this.context,E=dn(_).getInstance();let S,x,I,N,B,G,C,K,V,D,z,$,ie,se,ae;function ce(xe){we(xe,"baseUrl")}function de(xe){we(xe,"location")}function ge(xe){var Oe,je;xe&&xe.throughputValues&&xe.throughputValues.serviceLocation&&(Oe=xe.throughputValues.serviceLocation,je=xe.throughputValues,B[Oe]||(B[Oe]=[]),B[Oe].push(je),B[Oe].length>4&&B[Oe].shift())}function we(xe,Oe){if(xe&&xe.request&&xe.request.serviceLocation){const je=xe.request.serviceLocation;N[Oe].all.indexOf(je)===-1&&N[Oe].all.push(je),N[Oe].current=je}}function ne(){const xe=z.getValue();let Oe=ae.getContentSteering(xe);return Oe||(Oe=$.getServiceDescriptionSettings().contentSteering),Oe}function U(){return new Promise(xe=>{try{const Oe=ne();if(!Oe||!Oe.serverUrl)return void xe();const je=function(te){let Ae=te.serverUrl;I&&I.reloadUri&&(Ae=E.isRelative(I.reloadUri)?E.resolve(I.reloadUri,te.serverUrl):I.reloadUri);const _e=[],re=N.baseUrl.all.concat(N.location.all);if(re.length>0){const he=re.map(ke=>{const Ce=function(Ve){if(!Ve||!B[Ve]||B[Ve].length===0)return-1;const Ke=ie.getArithmeticMean(B[Ve],B[Ve].length,!0);return parseInt(1e3*Ke)}(ke);return{serviceLocation:ke,throughput:Ce}});let ve="",fe="";he.forEach((ke,Ce)=>{Ce!==0&&(ve+=",",fe+=","),ve+=ke.serviceLocation,fe+=ke.throughput>-1?ke.throughput:""}),_e.push({key:"_DASH_pathway",value:`"${ve}"`}),_e.push({key:"_DASH_throughput",value:fe})}return Ae=or.default.addAdditionalQueryParameterToUrl(Ae,_e),Ae}(Oe),ee=new kg(je);C.load({request:ee,success:te=>{(function(Ae){Ae&&Ae[k.default.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(Ae[k.default.CONTENT_STEERING_RESPONSE.VERSION])===1&&(I=new nu,I.version=Ae[k.default.CONTENT_STEERING_RESPONSE.VERSION],Ae[k.default.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(Ae[k.default.CONTENT_STEERING_RESPONSE.TTL])&&(I.ttl=Ae[k.default.CONTENT_STEERING_RESPONSE.TTL]),Ae[k.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(I.reloadUri=Ae[k.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]),Ae[k.default.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(I.pathwayPriority=Ae[k.default.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),Ae[k.default.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(I.pathwayClones=Ae[k.default.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],I.pathwayClones=I.pathwayClones.filter(_e=>function(re){return re[k.default.CONTENT_STEERING_RESPONSE.BASE_ID]&&re[k.default.CONTENT_STEERING_RESPONSE.ID]&&re[k.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&re[k.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][k.default.CONTENT_STEERING_RESPONSE.HOST]}(_e))),me())})(te),se.trigger(pe.default.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:I,url:je}),xe()},error:(te,Ae,_e,re)=>{(function(he,ve){try{switch(x.warn("Error fetching data from content steering server",he),ve.status){case 410:break;case 429:const fe=ve&&ve.getResponseHeader?ve.getResponseHeader("retry-after"):null;fe!==null&&(I||(I={}),I.ttl=parseInt(fe)),me();break;default:me()}}catch(fe){x.error(fe)}})(te,re),xe(te)},complete:()=>{N.baseUrl.all=X(N.baseUrl),N.location.all=X(N.location)}})}catch(Oe){xe(Oe)}})}function X(xe){return xe.all&&xe.all.length!==0&&xe.current?xe.all.filter(Oe=>Oe===xe.current):[]}function J(xe){try{const Oe=[];return xe&&xe.length!==0&&I&&I.pathwayClones&&I.pathwayClones.length!==0&&I.pathwayClones.forEach(je=>{let ee=xe.filter(Ae=>je[k.default.CONTENT_STEERING_RESPONSE.BASE_ID]===Ae.serviceLocation),te=null;if(ee&&ee.length>0&&(te=ee[0]),te){const Ae=new URL(te.url);let _e=je[k.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][k.default.CONTENT_STEERING_RESPONSE.HOST];_e=or.default.stringHasProtocol(_e)?_e:`${Ae.protocol}//${_e}`;const re={synthesizedUrl:`${_e}${Ae.pathname}`,serviceLocation:je[k.default.CONTENT_STEERING_RESPONSE.ID],queryParams:je[k.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][k.default.CONTENT_STEERING_RESPONSE.PARAMS],reference:te};Oe.push(re)}}),Oe}catch(Oe){return x.error(Oe),[]}}function me(){I&&I.ttl&&!isNaN(I.ttl)&&(G&&clearTimeout(G),G=setTimeout(()=>{U()},1e3*I.ttl))}function Ie(){G&&clearTimeout(G),G=null}function Te(){I=null,B={},N={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},Ie()}return S={reset:function(){Te(),se.off(pe.default.FRAGMENT_LOADING_STARTED,ce,S),se.off(pe.default.MANIFEST_LOADING_STARTED,de,S),se.off(pe.default.THROUGHPUT_MEASUREMENT_STORED,ge,S)},setConfig:function(xe){xe&&(xe.adapter&&(ae=xe.adapter),xe.errHandler&&(K=xe.errHandler),xe.dashMetrics&&(V=xe.dashMetrics),xe.mediaPlayerModel&&(D=xe.mediaPlayerModel),xe.manifestModel&&(z=xe.manifestModel),xe.serviceDescriptionController&&($=xe.serviceDescriptionController),xe.throughputController&&(ie=xe.throughputController),xe.eventBus&&(se=xe.eventBus))},loadSteeringData:U,getCurrentSteeringResponseData:function(){return I},shouldQueryBeforeStart:function(){const xe=ne();return!!xe&&xe.queryBeforeStart},getSteeringDataFromManifest:ne,stopSteeringRequestTimer:Ie,getSynthesizedBaseUrlElements:function(xe){try{return J(xe).map(Oe=>{const je=new mi(Oe.synthesizedUrl,Oe.serviceLocation);return je.queryParams=Oe.queryParams,je.dvbPriority=Oe.reference.dvbPriority,je.dvbWeight=Oe.reference.dvbWeight,je.availabilityTimeOffset=Oe.reference.availabilityTimeOffset,je.availabilityTimeComplete=Oe.reference.availabilityTimeComplete,je})}catch(Oe){return x.error(Oe),[]}},getSynthesizedLocationElements:function(xe){try{return J(xe).map(Oe=>{const je=new Sn(Oe.synthesizedUrl,Oe.serviceLocation);return je.queryParams=Oe.queryParams,je})}catch(Oe){return x.error(Oe),[]}},initialize:function(){C=mo(_).create({errHandler:K,dashMetrics:V,mediaPlayerModel:D,errors:W}),se.on(pe.default.FRAGMENT_LOADING_STARTED,ce,S),se.on(pe.default.MANIFEST_LOADING_STARTED,de,S),se.on(pe.default.THROUGHPUT_MEASUREMENT_STORED,ge,S)}},x=(0,Be.default)(_).getInstance().getLogger(S),Te(),S}ff.__dashjs_factory_name="ContentSteeringController";var ru=Ee.default.getSingletonFactory(ff);function iu(){const _=this.context,E=(0,Q.default)(_).getInstance();let S,x,I;return S={select:function(N){if(!N||N.length===0)return null;let B=null;return E.get().streaming.applyContentSteering&&(B=function(G){const C=I.getCurrentSteeringResponseData();return C&&C.pathwayPriority&&C.pathwayPriority.length>0?function(){let K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],D=0,z=null;for(;D<K.length;){const $=K[D],ie=V.findIndex(se=>se.serviceLocation&&se.serviceLocation===$);if(ie!==-1&&!x.contains(V[ie].serviceLocation)){z=V[ie];break}D+=1}return z}(C.pathwayPriority,G):null}(N)),B||(B=function(G){return G[0]}(N)),B},setConfig:function(N){N.blacklistController&&(x=N.blacklistController),N.contentSteeringController&&(I=N.contentSteeringController)},reset:function(){x.reset()}},x=tu(_).create({updateEventName:L.default.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:L.default.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),I=ru(_).getInstance(),S}iu.__dashjs_factory_name="LocationSelector";var wc=Ee.default.getClassFactory(iu);function Ic(){const _=this.context,E=(0,oe.default)(_).getInstance(),S=dn(_).getInstance();let x,I,N,B,G,C,K,V,D,z,$,ie,se,ae;function ce(){N=NaN,K=!1,G=!0,C=!1,de()}function de(){B!==null&&(clearTimeout(B),B=null)}function ge(Te){de(),C||(isNaN(Te)&&!isNaN(N)&&(Te=1e3*N),isNaN(Te)||(I.debug("Refresh manifest in "+Te+" milliseconds."),B=setTimeout(U,Te)))}function we(){let Te=arguments.length>0&&arguments[0]!==void 0&&arguments[0];K=!0;const xe=D.getValue();let Oe=xe.url;Oe&&(Oe=or.default.removeQueryParameterFromUrl(Oe,F.default.CMCD_QUERY_KEY));let je=null;const ee=$.getPatchLocation(xe),te=z.select(ee);let Ae=null;if(te&&!Te)Oe=te.url,je=te.serviceLocation,Ae=te.queryParams;else{const _e=function(he){const ve=$.getLocation(he),fe=se.getSynthesizedLocationElements(ve);return ve.concat(fe)}(xe),re=z.select(_e);re&&(Oe=re.url,je=re.serviceLocation,Ae=re.queryParams)}S.isRelative(Oe)&&(Oe=S.resolve(Oe,xe.url)),V.load(Oe,je,Ae)}function ne(Te){if(Te){if($.getIsPatch(Te)){let je=Te;Te=D.getValue();let ee=$.isPatchValid(Te,je),te=ee;if(ee){let Ae=$.getPublishTime(Te);$.applyPatchToManifest(Te,je);let _e=$.getPublishTime(Te);te=Ae.getTime()!==_e.getTime()}if(!te)return I.debug("Patch provided is invalid, performing full manifest refresh"),void we(!0);Te.loadedTime=new Date}}else(Te=D.getValue()).loadedTime=new Date;if(D.getValue()&&D.getValue().type===k.default.DYNAMIC&&Te.type===k.default.STATIC)return E.trigger(L.default.DYNAMIC_TO_STATIC),K=!1,void(C=!0);D.setValue(Te);const xe=new Date,Oe=(xe.getTime()-Te.loadedTime.getTime())/1e3;N=$.getManifestUpdatePeriod(Te,Oe),1e3*N>2147483647&&(N=2147483647e-3),E.trigger(L.default.MANIFEST_UPDATED,{manifest:Te}),I.info("Manifest has been refreshed at "+xe+"["+xe.getTime()/1e3+"] "),G||ge()}function U(){G||(K?ge(ae.get().streaming.manifestUpdateRetryInterval):we())}function X(Te){Te.error?Te.error.code===W.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&ie.error(Te.error):ne(Te.manifest)}function J(){G=!1,ge()}function me(){G=!ae.get().streaming.scheduling.scheduleWhilePaused,G&&de()}function Ie(){K=!1}return x={initialize:function(){ce(),E.on(L.default.STREAMS_COMPOSED,Ie,this),E.on(pe.default.PLAYBACK_STARTED,J,this),E.on(pe.default.PLAYBACK_PAUSED,me,this),E.on(L.default.INTERNAL_MANIFEST_LOADED,X,this)},setManifest:function(Te){ne(Te)},refreshManifest:we,getIsUpdating:function(){return K},setConfig:function(Te){Te&&(Te.manifestModel&&(D=Te.manifestModel),Te.adapter&&($=Te.adapter),Te.manifestLoader&&(V=Te.manifestLoader),Te.errHandler&&(ie=Te.errHandler),Te.locationSelector&&(z=Te.locationSelector),Te.settings&&(ae=Te.settings),Te.contentSteeringController&&(se=Te.contentSteeringController))},reset:function(){E.off(pe.default.PLAYBACK_STARTED,J,this),E.off(pe.default.PLAYBACK_PAUSED,me,this),E.off(L.default.STREAMS_COMPOSED,Ie,this),E.off(L.default.INTERNAL_MANIFEST_LOADED,X,this),ce()}},I=(0,Be.default)(_).getInstance().getLogger(x),z=wc(_).create(),x}Ic.__dashjs_factory_name="ManifestUpdater";var Ac=Ee.default.getClassFactory(Ic);function au(){const _=this.context,E=(0,oe.default)(_).getInstance(),S=dn(_).getInstance();let x,I,N,B,G,C,K,V,D,z,$,ie,se,ae,ce,de;function ge(){V=[],D=[],z=null,$=null,se=null,ie=NaN,N=!1,B=!1,ae=G.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function we(){G.get().streaming.utcSynchronization.enabled&&!N&&!B&&se&&se.value&&se.schemeIdUri&&!isNaN(ie)&&!isNaN(G.get().streaming.utcSynchronization.backgroundAttempts)&&($&&(Date.now()-$)/1e3<30||(V=[],B=!0,ne(isNaN(G.get().streaming.utcSynchronization.backgroundAttempts)?2:G.get().streaming.utcSynchronization.backgroundAttempts)))}function ne(re){try{if(re<=0)return void Ae();const he=Date.now();C[se.schemeIdUri](se.value,function(ve){const fe=Date.now(),ke=X(he,fe,ve);V.push(ke),ne(re-1)},function(){Ae()})}catch{Ae()}}function U(){let re=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||0;if(!D||D.length===0||re>=D.length)return void J();let he=D[re];if(he)if(C.hasOwnProperty(he.schemeIdUri)){const ve=new Date().getTime();C[he.schemeIdUri](he.value,function(fe){const ke=new Date().getTime(),Ce=X(ve,ke,fe);se=he,J(Ce)},function(){U(re+1)})}else U(re+1);else J()}function X(re,he,ve){return ve-(he-(he-re)/2)}function J(){let re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,he=isNaN(re);he&&G.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?function(){let ve=K.getLatestMPDRequestHeaderValueByID("Date"),fe=ve!==null?new Date(ve).getTime():Number.NaN;isNaN(fe)?te(!0):te(!1,fe-Date.now())}():te(he,re)}function me(re){let he=Date.parse(re);return isNaN(he)&&(he=function(ve){let fe,ke,Ce=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(ve);return fe=Date.UTC(parseInt(Ce[1],10),parseInt(Ce[2],10)-1,parseInt(Ce[3],10),parseInt(Ce[4],10),parseInt(Ce[5],10),Ce[6]&&(parseInt(Ce[6],10)||0),Ce[7]&&1e3*parseFloat(Ce[7])||0),Ce[9]&&Ce[10]&&(ke=60*parseInt(Ce[9],10)+parseInt(Ce[10],10),fe+=(Ce[8]==="+"?-1:1)*ke*60*1e3),new Date(fe).getTime()}(re)),he}function Ie(re){return Date.parse(re)}function Te(re){return Date.parse(re)}function xe(re,he,ve){ve()}function Oe(re,he,ve){let fe=me(re);isNaN(fe)?ve():he(fe)}function je(re,he,ve,fe,ke){let Ce,Ve,Ke=!1,st=new XMLHttpRequest,ft=ke?Le.HTTPRequest.HEAD:Le.HTTPRequest.GET,St=he.match(/\S+/g);if(he=St.shift(),Ce=function(){Ke||(Ke=!0,St.length?je(re,St.join(" "),ve,fe,ke):fe())},Ve=function(){let Bt,Ht;st.status===200&&(Bt=ke?st.getResponseHeader("Date"):st.response,Ht=re(Bt),isNaN(Ht)||(ve(Ht),Ke=!0))},S.isRelative(he)){const Bt=de.resolve();Bt&&(he=S.resolve(he,Bt.url))}st.open(ft,he),st.timeout=5e3,st.onload=Ve,st.onloadend=Ce,st.send()}function ee(re,he,ve){je(Te,re,he,ve,!0)}function te(re,he){if(isNaN(ie)||isNaN(he)||re||function(ve){try{const fe=_e(ve),ke=isNaN(ae)?30:ae,Ce=isNaN(G.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:G.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,Ve=isNaN(G.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:G.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,Ke=isNaN(G.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:G.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;let st;fe?(st=Math.min(ke*Ce,Ve),I.debug(`Increasing timeBetweenSyncAttempts to ${st}`)):(st=Math.max(ke/Ce,Ke),I.debug(`Decreasing timeBetweenSyncAttempts to ${st}`)),ae=st}catch{}}(he),!re&&!isNaN(he)){z=Date.now(),N=!1;const ve=isNaN(ie);ie=he,ve&&we(),I.debug(`Completed UTC sync. Setting client - server offset to ${he}`)}re&&(se=null,N=!1,ce.error(new Pe.default(W.TIME_SYNC_FAILED_ERROR_CODE,W.TIME_SYNC_FAILED_ERROR_MESSAGE))),E.trigger(L.default.UPDATE_TIME_SYNC_OFFSET,{offset:he}),E.trigger(L.default.TIME_SYNCHRONIZATION_COMPLETED)}function Ae(){if(!V||V.length===0)return;const re=V.reduce((he,ve)=>he+ve,0)/V.length;_e(re)?I.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(I.debug(`Completed background UTC sync. Setting client - server offset to ${re}`),ie=re,E.trigger(L.default.UPDATE_TIME_SYNC_OFFSET,{offset:ie})),B=!1,$=Date.now()}function _e(re){try{if(isNaN(ie))return!0;const he=G.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(G.get().streaming.utcSynchronization.maximumAllowedDrift)?G.get().streaming.utcSynchronization.maximumAllowedDrift:100;return re>=ie-he&&re<=ie+he}catch{return!0}}return x={initialize:function(){ge(),C={"urn:mpeg:dash:utc:http-head:2014":ee,"urn:mpeg:dash:utc:http-xsdate:2014":je.bind(null,me),"urn:mpeg:dash:utc:http-iso:2014":je.bind(null,Ie),"urn:mpeg:dash:utc:direct:2014":Oe,"urn:mpeg:dash:utc:http-head:2012":ee,"urn:mpeg:dash:utc:http-xsdate:2012":je.bind(null,me),"urn:mpeg:dash:utc:http-iso:2012":je.bind(null,Ie),"urn:mpeg:dash:utc:direct:2012":Oe,"urn:mpeg:dash:utc:http-ntp:2014":xe,"urn:mpeg:dash:utc:ntp:2014":xe,"urn:mpeg:dash:utc:sntp:2014":xe}},attemptSync:function(re,he){D=re,N||(function(ve){try{if(!ve||!G.get().streaming.utcSynchronization.enabled)return!1;const fe=isNaN(ae)?30:ae;return!(z&&fe&&!isNaN(fe))||(Date.now()-z)/1e3>=fe}catch{return!0}}(he)?(N=!0,U()):E.trigger(L.default.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(re){re&&(re.dashMetrics&&(K=re.dashMetrics),re.baseURLController&&(de=re.baseURLController),re.errHandler&&(ce=re.errHandler),re.settings&&(G=re.settings))},reset:function(){ge(),E.off(L.default.ATTEMPT_BACKGROUND_SYNC,we,x)}},I=(0,Be.default)(_).getInstance().getLogger(x),E.on(L.default.ATTEMPT_BACKGROUND_SYNC,we,x),x}au.__dashjs_factory_name="TimeSyncController";const kc=Ee.default.getSingletonFactory(au);kc.HTTP_TIMEOUT_MS=5e3,Ee.default.updateSingletonFactory(au.__dashjs_factory_name,kc);var Rg=kc;function hf(){let _,E,S,x,I;const N=this.context,B=(0,oe.default)(N).getInstance();return _={attachMediaSource:function(G){let C=window.URL.createObjectURL(E);return G.setSource(C),x==="managedMediaSource"&&(G.setDisableRemotePlayback(!0),E.addEventListener("startstreaming",()=>{B.trigger(pe.default.MANAGED_MEDIA_SOURCE_START_STREAMING)}),E.addEventListener("endstreaming",()=>{B.trigger(pe.default.MANAGED_MEDIA_SOURCE_END_STREAMING)})),C},createMediaSource:function(){let G="WebKitMediaSource"in window,C="MediaSource"in window;return"ManagedMediaSource"in window?(E=new ManagedMediaSource,x="managedMediaSource",I.info("Created ManagedMediaSource")):C?(E=new MediaSource,x="mediaSource",I.info("Created MediaSource")):G&&(E=new WebKitMediaSource,I.info("Created WebkitMediaSource")),E},detachMediaSource:function(G){G.setSource(null)},setConfig:function(G){G&&G.settings&&(S=G.settings)},setDuration:function G(C){E&&E.readyState==="open"&&(C===null&&isNaN(C)||E.duration!==C&&(C!==1/0||S.get().streaming.buffer.mediaSourceDurationInfinity||(C=Math.pow(2,32)),function(K){let V=K.sourceBuffers;for(let D=0;D<V.length;D++)if(V[D].updating)return!0;return!1}(E)?setTimeout(G.bind(null,C),50):(I.info("Set MediaSource duration:"+C),E.duration=C)))},setSeekable:function(G,C){E&&typeof E.setLiveSeekableRange=="function"&&typeof E.clearLiveSeekableRange=="function"&&E.readyState==="open"&&G>=0&&G<C&&(E.clearLiveSeekableRange(),E.setLiveSeekableRange(G,C))},signalEndOfStream:function(G){if(!G||G.readyState!=="open")return;let C=G.sourceBuffers;for(let K=0;K<C.length;K++)if(C[K].updating||C[K].buffered.length===0)return;I.info("call to mediaSource endOfStream"),G.endOfStream()}},I=(0,Be.default)(N).getInstance().getLogger(_),_}hf.__dashjs_factory_name="MediaSourceController";var Cg=Ee.default.getSingletonFactory(hf);function gf(){const _="urn:mpeg:dash:event:2012",S="urn:mpeg:dash:event:callback:2015",N="discarded",B="updated",G="added",C=this.context,K=(0,oe.default)(C).getInstance();let V,D,z,$,ie,se,ae,ce,de,ge,we;function ne(){if(!ae||!ce)throw new Error("setConfig function has to be called previously")}function U(){we=!1,z={},$={},ie=null,ge=!1,se=Date.now()/1e3}function X(){try{if(!ge){ge=!0;const te=ce.getTime();let Ae=te-se;Ae=se>0?Math.max(0,Ae):0,J($,Ae,te),J(z,Ae,te),me($),me(z),se=te,ge=!1}}catch(te){ge=!1,D.error(te)}}function J(te,Ae,_e){try{Oe(te,function(he){if(he!==void 0){const ve=isNaN(he.duration)?0:he.duration;he.calculatedPresentationTime<=_e&&he.calculatedPresentationTime+Ae+ve>=_e?ee(he,pe.default.EVENT_MODE_ON_START):(je(_e,ve+Ae,he.calculatedPresentationTime)||function(fe){try{const ke=fe.eventStream.period.start+fe.eventStream.period.duration;return fe.calculatedPresentationTime>ke}catch(ke){return D.error(ke),!1}}(he))&&(D.debug(`Removing event ${he.id} from period ${he.eventStream.period.id} as it is expired or invalid`),function(fe,ke){try{const Ce=ke.eventStream.schemeIdUri,Ve=ke.eventStream.period.id,Ke=ke.eventStream.value,st=ke.id;fe[Ve][Ce]=fe[Ve][Ce].filter(ft=>Ke&&ft.eventStream.value&&ft.eventStream.value!==Ke||ft.id!==st),fe[Ve][Ce].length===0&&delete fe[Ve][Ce]}catch(Ce){D.error(Ce)}}(te,he))}})}catch(re){D.error(re)}}function me(te){try{for(const Ae in te)te.hasOwnProperty(Ae)&&Object.keys(te[Ae]).length===0&&delete te[Ae]}catch(Ae){D.error(Ae)}}function Ie(te,Ae){let _e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const re=te.eventStream.schemeIdUri,he=te.eventStream.value,ve=te.id;let fe=N;Ae[re]||(Ae[re]=[]);const ke=Ae[re].findIndex(Ce=>(!he||Ce.eventStream.value&&Ce.eventStream.value===he)&&Ce.id===ve);if(ke===-1)Ae[re].push(te),te.triggeredReceivedEvent=!1,te.triggeredStartEvent=!1,fe=G;else if(_e){const Ce=Ae[re][ke];te.triggeredReceivedEvent=Ce.triggeredReceivedEvent,te.triggeredStartEvent=Ce.triggeredStartEvent,Ae[re][ke]=te,fe=B}return fe}function Te(te){try{if(te.eventStream.value==1){const Ae=te.calculatedPresentationTime;let _e;_e=te.calculatedPresentationTime==4294967295?NaN:te.calculatedPresentationTime+te.duration,K.trigger(pe.default.MANIFEST_VALIDITY_CHANGED,{id:te.id,validUntil:Ae,newDuration:_e,newManifestValidAfter:NaN},{mode:pe.default.EVENT_MODE_ON_START})}}catch(Ae){D.error(Ae)}}function xe(te){try{const Ae=ce.getTime();Oe(te,function(_e){const re=_e.eventStream&&_e.eventStream.period&&!isNaN(_e.eventStream.period.duration)?_e.eventStream.period.duration:NaN,he=_e.eventStream&&_e.eventStream.period&&!isNaN(_e.eventStream.period.start)?_e.eventStream.period.start:NaN;if(isNaN(re)||isNaN(he))return;const ve=_e.calculatedPresentationTime;Math.abs(ve-Ae)<300&&ee(_e,pe.default.EVENT_MODE_ON_START)})}catch(Ae){D.error(Ae)}}function Oe(te,Ae){try{if(te){const _e=Object.keys(te);for(let re=0;re<_e.length;re++){const he=te[_e[re]],ve=Object.keys(he);for(let fe=0;fe<ve.length;fe++)he[ve[fe]].forEach(ke=>{ke!==void 0&&Ae(ke)})}}}catch(_e){D.error(_e)}}function je(te,Ae,_e){try{return te-Ae>_e}catch(re){return D.error(re),!1}}function ee(te,Ae){try{const _e=ce.getTime(),re=te.id;if(Ae===pe.default.EVENT_MODE_ON_RECEIVE&&!te.triggeredReceivedEvent)return D.debug(`Received event ${re}`),te.triggeredReceivedEvent=!0,void K.trigger(te.eventStream.schemeIdUri,{event:te},{mode:Ae});te.triggeredStartEvent||(te.eventStream.schemeIdUri===_&&te.eventStream.value==1?te.duration===0&&te.presentationTimeDelta===0||(D.debug(`Starting manifest refresh event ${re} at ${_e}`),function(){try{ne(),ae.refreshManifest()}catch(he){D.error(he)}}()):te.eventStream.schemeIdUri===S&&te.eventStream.value==1?(D.debug(`Starting callback event ${re} at ${_e}`),function(he){try{let ve=Rr(C).create({});const fe=new Ec({method:"get",url:he,responseType:"arraybuffer",customData:{}}),ke=new bc({request:fe});ve.load(fe,ke)}catch(ve){D.error(ve)}}(te.messageData instanceof Uint8Array?or.default.uint8ArrayToString(te.messageData):te.messageData)):(D.debug(`Starting event ${re} from period ${te.eventStream.period.id} at ${_e}`),K.trigger(te.eventStream.schemeIdUri,{event:te},{mode:Ae}),de.get().streaming.events.deleteEventMessageDataTimeout>-1&&setTimeout(()=>{delete te.messageData,delete te.parsedMessageData},de.get().streaming.events.deleteEventMessageDataTimeout)),te.triggeredStartEvent=!0)}catch(_e){D.error(_e)}}return V={addInlineEvents:function(te,Ae){try{if(ne(),z[Ae]||(z[Ae]={}),te)for(let _e=0;_e<te.length;_e++){let re=te[_e];if(!je(ce.getTime(),isNaN(re.duration)?0:re.duration,re.calculatedPresentationTime)){let he=Ie(re,z[Ae],!0);he===G?(D.debug(`Added inline event with id ${re.id} from period ${Ae}`),ee(re,pe.default.EVENT_MODE_ON_RECEIVE)):he===B&&D.debug(`Updated inline event with id ${re.id} from period ${Ae}`)}}}catch(_e){throw _e}},addInbandEvents:function(te,Ae){try{ne(),$[Ae]||($[Ae]={});for(let _e=0;_e<te.length;_e++){let re=te[_e];je(ce.getTime(),isNaN(re.duration)?0:re.duration,re.calculatedPresentationTime)||(Ie(re,$[Ae],!1)===G?(re.eventStream.schemeIdUri===_&&Te(re),D.debug(`Added inband event with id ${re.id} from period ${Ae}`),ee(re,pe.default.EVENT_MODE_ON_RECEIVE)):D.debug(`Inband event with scheme_id_uri ${re.eventStream.schemeIdUri}, value ${re.eventStream.value}, period id ${Ae} and event id ${re.id} was ignored because it has been added before.`))}X()}catch(_e){throw _e}},getInbandEvents:function(){return $},getInlineEvents:function(){return z},start:function(){try{ne(),D.debug("Start Event Controller");const te=de.get().streaming.events.eventControllerRefreshDelay;we||isNaN(te)||(we=!0,ie=setInterval(X,te))}catch(te){throw te}},setConfig:function(te){try{if(!te)return;te.manifestUpdater&&(ae=te.manifestUpdater),te.playbackController&&(ce=te.playbackController),te.settings&&(de=te.settings)}catch(Ae){throw Ae}},reset:function(){(function(){try{ie!==null&&we&&(clearInterval(ie),ie=null,we=!1,function(){try{xe($),xe(z)}catch(te){D.error(te)}}())}catch(te){throw te}})(),U()}},D=(0,Be.default)(C).getInstance().getLogger(V),U(),V}gf.__dashjs_factory_name="EventController";var fa=Ee.default.getSingletonFactory(gf),ka={LEVELS:{WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}},Rc=t(445),Cc=t(1923);function Nc(){const _=this.context,E=(0,oe.default)(_).getInstance();let S,x,I,N,B,G,C,K,V,D,z,$,ie,se,ae,ce,de,ge,we,ne,U,X,J,me,Ie,Te,xe,Oe,je,ee,te,Ae,_e,re,he,ve,fe,ke,Ce,Ve,Ke,st,ft,St,Bt,Ht,hn,In,Ot;function Zt(){if(!(G&&G.hasOwnProperty("load")&&X&&X.hasOwnProperty("initialize")&&X.hasOwnProperty("reset")&&X.hasOwnProperty("getClientTimeOffset")&&C&&U&&V&&he))throw new Error(F.default.MISSING_CONFIG_ERROR)}function cn(){(function(){try{const ot=K.getStreamsInfo();if(!me&&ot.length===0)throw new Error("There are no periods in the MPD");me&&ot.length>0&&V.updateManifestUpdateInfo({currentTime:he.getTime(),buffered:re.getBufferRange(),presentationStartTime:ot[0].start,clientTimeOffset:X.getClientTimeOffset()}),J.length>0&&function(bn){bn.length!==0?J=J.filter(yn=>{const Yn=bn.filter(ir=>ir.id===yn.getId()).length>0||yn.getId()===me.getId();return Yn||(x.debug(`Removing stream ${yn.getId()}`),yn.reset(!0),yn=null),Yn}):x.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(ot);const Ut=[];for(let bn=0,yn=ot.length;bn<yn;bn++){const Yn=ot[bn];Ut.push(Cn(Yn)),V.addManifestUpdateStreamInfo(Yn)}Promise.all(Ut).then(()=>new Promise((bn,yn)=>{me?bn():We(ot,bn,yn)})).then(()=>{E.trigger(L.default.STREAMS_COMPOSED),Vt()}).catch(bn=>{throw bn})}catch(ot){U.error(new Pe.default(W.MANIFEST_ERROR_ID_NOSTREAMS_CODE,ot.message+" nostreamscomposed",C.getValue())),Ae=!0,Cl()}})()}function Nn(){Ht=!0}function Cn(ot){let Ut=yi(ot.id);return Ut?Ut.updateData(ot):(Ut=il(_).create({manifestModel:C,mediaPlayerModel:fe,dashMetrics:V,manifestUpdater:B,adapter:K,timelineConverter:X,capabilities:I,capabilitiesFilter:N,errHandler:U,baseURLController:ie,segmentBaseController:se,textController:Te,abrController:ce,playbackController:he,throughputController:de,eventController:we,mediaController:ge,protectionController:Ie,videoModel:re,streamInfo:ot,settings:Bt}),J.push(Ut),Ut.initialize(),Promise.resolve())}function We(ot,Ut,bn){try{Qt();const yn=V.getCurrentDVRInfo().range;if(yn.end<yn.start){hn&&clearTimeout(hn);const ir=Math.min(1e3*(-1*(yn.end-yn.start)+2),2147483647);return x.debug(`Waiting for ${ir} ms before playback can start`),E.trigger(L.default.AST_IN_FUTURE,{delay:ir}),void(hn=setTimeout(()=>{We(ot,Ut,bn)},ir))}Bt.get().streaming.applyProducerReferenceTime&&ve.calculateProducerReferenceTimeOffsets(ot);const Yn=ot[0].manifestInfo;if(Bt.get().streaming.applyServiceDescription&&ve.applyServiceDescription(Yn),K.getIsDynamic()){const ir=Pa(0,Yn);he.computeAndSetLiveDelay(ir,Yn)}(Bt.get().streaming.applyContentSteering&&$.shouldQueryBeforeStart()?$.loadSteeringData():Promise.resolve()).then(()=>{const ir=C.getValue();ir&&ie.update(ir),pt(),Ut()}).catch(ir=>{x.error(ir),pt(),Ut()})}catch(yn){bn(yn)}}function pt(){const ot=function(){let yn;if(K.getIsDynamic()){const Yn=V.getCurrentDVRInfo();yn=(Yn&&Yn.range?Yn.range.end:0)-he.getOriginalLiveDelay();const ir=Yn?Yn.range:null;if(ir){if(isNaN(In)&&In.toString().indexOf("posix:")===-1){const Bi=yr(!0);isNaN(Bi)||(x.info(`Start time from URI parameters: ${Bi}`),yn=Math.min(yn,Bi))}else{x.info(`Start time provided by the app: ${In}`);const Bi=Ki(!0,In);isNaN(Bi)||(yn=Math.min(yn,Bi))}const Vr=Bt.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;yn=Math.max(yn,ir.start+Vr)}}else if(yn=Fa()[0].getStreamInfo().start,isNaN(In)){const Yn=yr(!1);isNaN(Yn)||(x.info(`Start time from URI parameters: ${Yn}`),yn=Math.max(yn,Yn))}else{x.info(`Start time provided by the app: ${In}`);const Yn=Ki(!1,In);isNaN(Yn)||(yn=Math.max(yn,Yn))}return yn}();let Ut=At(ot);const bn=Ut!==null?Ut:J[0];E.trigger(L.default.INITIAL_STREAM_SWITCH,{startTime:ot}),gt(bn,null,ot),st||(st=setInterval(function(){!ee&&he.getTimeToStreamEnd()<=0&&!he.isSeeking()&&E.trigger(L.default.PLAYBACK_ENDED,{isLast:Oa().isLast})},200))}function gt(ot,Ut,bn){try{if(ee||!ot||Ut===ot&&ot.getIsActive())return;ee=!0,E.trigger(L.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:Ut?Ut.getStreamInfo():null,toStreamInfo:ot.getStreamInfo()});let yn=!1,Yn=[];me=ot,Ut&&(yn=on(ot,Ut),Yn=Tn(Ut),Ut.deactivate(yn)),bn=isNaN(bn)?!yn&&Ut?ot.getStreamInfo().start:NaN:bn,x.info(`Switch to stream ${ot.getId()}. Seektime is ${bn}, current playback time is ${he.getTime()}. Seamless period switch is set to ${yn}`),St=St.filter(ir=>ir.getId()!==me.getId()),he.initialize(Oa(),!!Ut),re.getElement()?vt({seekTime:bn,keepBuffers:yn,streamActivated:!1,representationsFromPreviousPeriod:Yn}):sn({seekTime:bn,keepBuffers:yn})}catch{ee=!1}}function vt(ot){let Ut;function bn(){if(!_e||_e.readyState!=="open")return;x.debug("MediaSource is open!"),window.URL.revokeObjectURL(Ut),_e.removeEventListener("sourceopen",bn),_e.removeEventListener("webkitsourceopen",bn),nr();const Yn=V.getCurrentDVRInfo();D.setSeekable(Yn.range.start,Yn.range.end),ot.streamActivated?(isNaN(ot.seekTime)||he.seek(ot.seekTime,!0,!0),me.setMediaSource(_e).then(()=>{me.initializeForTextWithMediaSource(_e)})):sn(ot)}function yn(){_e.addEventListener("sourceopen",bn,!1),_e.addEventListener("webkitsourceopen",bn,!1),Ut=D.attachMediaSource(re),x.debug("MediaSource attached to element.  Waiting on open...")}_e?ot.keepBuffers?sn(ot):(D.detachMediaSource(re),yn()):(_e=D.createMediaSource(),yn())}function sn(ot){const Ut=ot.representationsFromPreviousPeriod||[];me.activate(_e,ot.keepBuffers?ft:void 0,Ut).then(bn=>{bn&&(ft=bn),isNaN(ot.seekTime)||(E.trigger(L.default.SEEK_TARGET,{time:ot.seekTime},{streamId:me.getId()}),he.seek(ot.seekTime,!1,!0),me.startScheduleControllers()),ee=!1,E.trigger(L.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:Oa()})})}function Tn(ot){return(ot?ot.getStreamProcessors():[]).map(Ut=>Ut.getRepresentation())}function yt(ot){const Ut=At(ot.seekTime);Ut&&Ut!==me?Ut&&Ut!==me&&(Yt(),function(bn,yn){const Yn=bn&&!isNaN(bn.seekTime)?bn.seekTime:NaN,ir=me.getStreamProcessors().map(Vr=>Vr.prepareOuterPeriodPlaybackSeeking(bn));Promise.all(ir).then(()=>{gt(yn,me,Yn)}).catch(Vr=>{U.error(Vr)})}(ot,Ut)):(Yt(),function(bn){me.getStreamProcessors().forEach(yn=>yn.prepareInnerPeriodPlaybackSeeking(bn)),ti(Lt.USER_REQUEST_STOP_REASON)}(ot)),zi(Pt.SEEK_START_REASON)}function Yt(){tn()}function tn(){St&&St.length>0&&(St.forEach(ot=>{ot.deactivate(!0)}),St=[])}function jt(ot){if(ot.newMediaInfo.streamInfo.id===me.getId()){if(tn(),Bt.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&ot.oldMediaInfo&&ot.oldMediaInfo.codec!==ot.newMediaInfo.codec){const Ut=he.getTime();return me.deactivate(!1),void vt({seekTime:Ut,keepBuffers:!1,streamActivated:!1})}me.prepareTrackChange(ot)}}function on(ot,Ut){try{return Bt.get().streaming.buffer.reuseExistingSourceBuffers&&(I.isProtectionCompatible(Ut.getStreamInfo(),ot.getStreamInfo())||Ht)&&I.supportsChangeType()&&Bt.get().streaming.buffer.useChangeType}catch{return!1}}function at(ot){let Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(_e&&!ot.getPreloaded()&&on(ot,Ut)){const bn=Tn(Ut);ot.startPreloading(_e,ft,bn).then(()=>{St.push(ot)})}}function At(ot){if(isNaN(ot))return null;const Ut=J.length;for(let bn=0;bn<Ut;bn++){const yn=J[bn];if(ot<parseFloat((yn.getStartTime()+yn.getDuration()).toFixed(5)))return yn}return null}function Qt(){try{const ot=K.getIsDynamic(),Ut=K.getStreamsInfo()[0].manifestInfo,bn=he.getTime(),yn=X.calcTimeShiftBufferWindow(J,ot),Yn=An();if(yn.start===void 0||yn.end===void 0)return;Yn&&Yn.length!==0?Yn.forEach(ir=>{V.addDVRInfo(ir.getType(),bn,Ut,yn)}):V.addDVRInfo(F.default.VIDEO,bn,Ut,yn)}catch{}}function nn(ot){if(Ve&&je){const Ut=fe.getInitialBufferLevel(),bn=[F.default.TEXT];(isNaN(Ut)||Ut<=he.getBufferLevel(bn)||K.getIsDynamic()&&Ut>he.getLiveDelay())&&(Ve=!1,zi(Pt.INITIAL_PLAYOUT_START_REASON),he.play())}ot&&ot.mediaType&&V.addBufferLevel(ot.mediaType,new Date,1e3*ot.bufferLevel)}function Et(ot){ot.streamInfo.id===me.getId()&&tn(),yi(ot.streamInfo.id).prepareQualityChange(ot)}function Ne(){if(K.getIsDynamic()&&he.getOriginalLiveDelay()!==0&&me){const ot=K.getStreamsInfo();if(ot.length>0){const Ut=ot[0].manifestInfo,bn=Pa(0,Ut);he.computeAndSetLiveDelay(bn,Ut)}}}function nt(){if(ia()){const ot=re.getPlaybackQuality();ot&&V.addDroppedFrames(ot)}}function _t(){x.debug("[onPlaybackStarted]"),!Ve&&Ce&&zi(Pt.RESUME_FROM_PAUSE_START_REASON),Ve&&(Ve=!1),Ke&&(Ke=!1,Bt.get().streaming.applyContentSteering&&!$.shouldQueryBeforeStart()&&$.loadSteeringData()),Ce=!1}function rt(ot){x.debug("[onPlaybackPaused]"),ot.ended||(Ce=!0,ti(Lt.USER_REQUEST_STOP_REASON))}function Ft(ot){x.debug(`Stream with id ${ot.streamInfo.id} finished buffering`);const Ut=ot.streamInfo.isLast;_e&&Ut?(x.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),D.signalEndOfStream(_e)):Vt()}function Vt(){if(!me)return;if(!me.getHasFinishedBuffering())return void me.checkAndHandleCompletedBuffering();const ot=function(){let bn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{const yn=bn||me||null;if(yn){const Yn=yn.getStreamInfo();return J.filter(function(ir){const Vr=ir.getStreamInfo();return Vr.start>Yn.start&&Yn.id!==Vr.id})}}catch{return[]}}(me);let Ut=0;for(;Ut<ot.length;){const bn=ot[Ut],yn=Ut===0?me:ot[Ut-1];!bn.getPreloaded()&&yn.getHasFinishedBuffering()&&_e&&at(bn,yn),Ut+=1}}function _n(){st&&(clearInterval(st),st=null)}function An(){return me?me.getStreamProcessors():[]}function kn(ot){if(me&&!me.getIsEndedEventSignaled()){me.setIsEndedEventSignaled(!0);const Ut=function(){const bn=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||me||null;if(!bn)return null;const yn=bn.getStreamInfo(),Yn=yn.start;let ir=0,Vr=-1,Bi=NaN;for(;ir<J.length;){const _d=J[ir].getStreamInfo(),Gu=_d.start-Yn;Gu>0&&(isNaN(Bi)||Gu<Bi)&&yn.id!==_d.id&&(Bi=Gu,Vr=ir),ir+=1}return Vr>=0?J[Vr]:null}();Ut?(x.debug(`StreamController onEnded, found next stream with id ${Ut.getStreamInfo().id}. Switching from ${me.getStreamInfo().id} to ${Ut.getStreamInfo().id}`),gt(Ut,me,NaN)):(x.debug("StreamController no next stream found"),me.setIsEndedEventSignaled(!1)),ti(Ut?Lt.END_OF_PERIOD_STOP_REASON:Lt.END_OF_CONTENT_STOP_REASON)}ot&&ot.isLast&&(_n(),$.stopSteeringRequestTimer())}function nr(ot){const Ut=ot||Oa().manifestInfo.duration;D.setDuration(Ut)}function yr(ot){const Ut=ae.getURIFragmentData();if(!Ut||!Ut.t)return NaN;const bn=Fa()[0].getStreamInfo().start;return Ut.t=Ut.t.split(",")[0],oi(ot,Ut.t,bn)}function Ki(ot,Ut){let bn=0;return ot||(bn=Fa()[0].getStreamInfo().start),oi(ot,Ut,bn)}function oi(ot,Ut,bn){const yn=K.getRegularPeriods()[0],Yn=Ut.toString(),ir=Yn.indexOf("posix:")!==-1?Yn.substring(6)==="now"?Date.now()/1e3:parseFloat(Yn.substring(6)):NaN;return ot&&!isNaN(ir)?X.calcPresentationTimeFromWallTime(new Date(1e3*ir),yn):parseFloat(Yn)+bn}function Pa(ot,Ut){try{let bn=NaN;return Ut&&!isNaN(Ut.maxFragmentDuration)&&isFinite(Ut.maxFragmentDuration)?Ut.maxFragmentDuration:isFinite(bn)?bn:NaN}catch{return NaN}}function Js(){const ot=C.getValue();ie.initialize(ot)}function Yi(ot){if(ot.error)Ae=!0,Cl();else{x.info("Manifest updated... updating data system wide.");const Ut=ot.manifest;K.updatePeriods(Ut),N.filterUnsupportedFeatures(Ut).then(()=>{ie.initialize(Ut);let bn=K.getUTCTimingSources();!K.getIsDynamic()||bn&&bn.length!==0||E.trigger(pe.default.CONFORMANCE_VIOLATION,{level:ka.LEVELS.WARNING,event:ka.EVENTS.NO_UTC_TIMING_ELEMENT});let yn=K.getIsDynamic()?bn.concat(ke.getUTCTimingSources()):bn;z.attemptSync(yn,K.getIsDynamic()),Oe.createFinalQueryStrings(Ut)})}}function ia(){return!!me&&me.getHasVideoTrack()}function Ma(){return!!me&&me.getHasAudioTrack()}function ti(ot,Ut){Ut=Ut||new Date,An().forEach(bn=>{bn.finalisePlayList(Ut,ot)}),V.addPlayList()}function zi(ot){V.createPlaylistMetrics(1e3*he.getTime(),ot)}function Ui(ot){Ie.updateKeyStatusesMap(ot),function(){const Ut=An();let bn=!1;Ut.forEach(yn=>{const Yn=yn.getMediaInfo();!Yn||I.areKeyIdsUsable(Yn)?Yn&&I.areKeyIdsExpired(Yn)&&function(ir){const Vr=yi(ir.getStreamId());Vr&&Vr.triggerProtectionError({error:new Pe.default(Cc.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,Cc.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)})}(yn):(bn=!0,function(ir){const Vr=ir.getAllMediaInfos().filter(Bi=>I.areKeyIdsUsable(Bi));if(Vr&&Vr.length!==0)ge.setTrack(Vr[0],{replaceBuffer:!0});else{const Bi=ir.getType();U.error(new Pe.default(W.NO_SUPPORTED_KEY_IDS,`Type: ${Bi}: ${W.NO_SUPPORTED_KEY_IDS_MESSAGE}`))}}(yn))}),bn&&(he.getTime()===0?E.once(pe.default.FRAGMENT_LOADING_COMPLETED,()=>{Al()},S):he.isProgressing(500).then(yn=>{yn||Al()}))}()}function Al(){const ot=he.getTime();he.seek(ot+.01,!1,!1)}function kl(ot){if(!ot.error)return;let Ut;switch(ot.error.code){case 1:Ut="MEDIA_ERR_ABORTED";break;case 2:Ut="MEDIA_ERR_NETWORK";break;case 3:Ut="MEDIA_ERR_DECODE",Ot.counts.mediaErrorDecode+=1;break;case 4:Ut="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:Ut="MEDIA_ERR_ENCRYPTED";break;default:Ut="UNKNOWN"}Ut==="MEDIA_ERR_DECODE"&&Bt.get().errors.recoverAttempts.mediaErrorDecode>=Ot.counts.mediaErrorDecode?function(){x.error("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");const bn=he.getTime();me.deactivate(!1),x.info(`MediaSource has been resetted. Resuming playback from time ${bn}`),vt({seekTime:bn,keepBuffers:!1,streamActivated:!1})}():(te=!0,ot.error.message&&(Ut+=" ("+ot.error.message+")"),ot.error.msExtendedCode&&(Ut+=" (0x"+(ot.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),x.fatal("Video Element Error: "+Ut),ot.error&&x.fatal(ot.error),U.error(new Pe.default(ot.error.code,Ut)),Cl())}function Oa(){return me?me.getStreamInfo():null}function yi(ot){for(let Ut=0,bn=J.length;Ut<bn;Ut++)if(J[Ut].getId()===ot)return J[Ut];return null}function Fo(ot){isNaN(ot.newDuration)||nr(ot.newDuration)}function Rl(){J=[],In=NaN,Ie=null,ee=!1,me=null,te=!1,Ae=!1,Ve=!0,Ke=!0,Ce=!1,je=!0,st=null,Ht=!1,St=[],hn=null,Ot={counts:{mediaErrorDecode:0}}}function Cl(){Zt(),z.reset(),ti(te||Ae?Lt.FAILURE_STOP_REASON:Lt.USER_REQUEST_STOP_REASON);for(let ot=0,Ut=J?J.length:0;ot<Ut;ot++)J[ot].reset(te);E.off(pe.default.PLAYBACK_TIME_UPDATED,nt,S),E.off(pe.default.PLAYBACK_SEEKING,yt,S),E.off(pe.default.PLAYBACK_ERROR,kl,S),E.off(pe.default.PLAYBACK_STARTED,_t,S),E.off(pe.default.PLAYBACK_PAUSED,rt,S),E.off(pe.default.PLAYBACK_ENDED,kn,S),E.off(pe.default.METRIC_ADDED,Sd,S),E.off(pe.default.MANIFEST_VALIDITY_CHANGED,Fo,S),E.off(pe.default.BUFFER_LEVEL_UPDATED,nn,S),E.off(pe.default.QUALITY_CHANGE_REQUESTED,Et,S),E.off(pe.default.CONTENT_STEERING_REQUEST_COMPLETED,Js,S),L.default.KEY_SESSION_UPDATED&&E.off(L.default.KEY_SESSION_UPDATED,Nn,S),E.off(L.default.MANIFEST_UPDATED,Yi,S),E.off(L.default.STREAM_BUFFERING_COMPLETED,Ft,S),E.off(L.default.TIME_SYNCHRONIZATION_COMPLETED,cn,S),E.off(L.default.CURRENT_TRACK_CHANGED,jt,S),E.off(L.default.SETTING_UPDATED_LIVE_DELAY,Ne,S),E.off(L.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Ne,S),E.off(Rc.default.INTERNAL_KEY_STATUSES_CHANGED,Ui,S),ie.reset(),B.reset(),we.reset(),V.clearAllCurrentMetrics(),C.setValue(null),G.reset(),X.reset(),ne.reset(),_e&&(D.detachMediaSource(re),_e=null),re=null,Ie&&(Ie=null,xe=null,C.getValue()&&E.trigger(L.default.PROTECTION_DESTROYED,{data:C.getValue().url})),_n(),E.trigger(L.default.STREAM_TEARDOWN_COMPLETE),Rl()}function Sd(ot){if(ot.metric===j.DVR_INFO){const Ut=Ma()?F.default.AUDIO:F.default.VIDEO;ot.mediaType===Ut&&D.setSeekable(ot.value.range.start,ot.value.range.end)}}function Fa(){return J}return S={addDVRMetric:Qt,getActiveStream:function(){return me},getActiveStreamInfo:Oa,getActiveStreamProcessors:An,getAutoPlay:function(){return je},getHasMediaOrInitialisationError:function(){return te||Ae},getInitialPlayback:function(){return Ve},getIsStreamSwitchInProgress:function(){return ee},getStreamById:yi,getStreamForTime:At,getStreams:Fa,getTimeRelativeToStreamId:function(ot,Ut){let bn=null,yn=0,Yn=0,ir=null;for(let Vr=0;Vr<J.length;Vr++){if(bn=J[Vr],Yn=bn.getStartTime(),ir=bn.getDuration(),Number.isFinite(Yn)&&(yn=Yn),bn.getId()===Ut)return ot-yn;Number.isFinite(ir)&&(yn+=ir)}return null},hasAudioTrack:Ma,hasVideoTrack:ia,initialize:function(ot,Ut){Zt(),je=ot,xe=Ut,X.initialize(),B=Ac(_).create(),B.setConfig({manifestModel:C,adapter:K,manifestLoader:G,errHandler:U,settings:Bt,contentSteeringController:$}),B.initialize(),we=fa(_).getInstance(),we.setConfig({manifestUpdater:B,playbackController:he,settings:Bt}),we.start(),Oe=vc(_).getInstance(),z.setConfig({dashMetrics:V,baseURLController:ie,errHandler:U,settings:Bt}),z.initialize(),D.setConfig({settings:Bt}),Ie&&(E.trigger(L.default.PROTECTION_CREATED,{controller:Ie}),Ie.setMediaElement(re.getElement()),xe&&Ie.setProtectionData(xe)),E.on(pe.default.PLAYBACK_TIME_UPDATED,nt,S),E.on(pe.default.PLAYBACK_SEEKING,yt,S),E.on(pe.default.PLAYBACK_ERROR,kl,S),E.on(pe.default.PLAYBACK_STARTED,_t,S),E.on(pe.default.PLAYBACK_PAUSED,rt,S),E.on(pe.default.PLAYBACK_ENDED,kn,S),E.on(pe.default.METRIC_ADDED,Sd,S),E.on(pe.default.MANIFEST_VALIDITY_CHANGED,Fo,S),E.on(pe.default.BUFFER_LEVEL_UPDATED,nn,S),E.on(pe.default.QUALITY_CHANGE_REQUESTED,Et,S),E.on(pe.default.CONTENT_STEERING_REQUEST_COMPLETED,Js,S),L.default.KEY_SESSION_UPDATED&&E.on(L.default.KEY_SESSION_UPDATED,Nn,S),E.on(L.default.MANIFEST_UPDATED,Yi,S),E.on(L.default.STREAM_BUFFERING_COMPLETED,Ft,S),E.on(L.default.TIME_SYNCHRONIZATION_COMPLETED,cn,S),E.on(L.default.CURRENT_TRACK_CHANGED,jt,S),E.on(L.default.SETTING_UPDATED_LIVE_DELAY,Ne,S),E.on(L.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Ne,S),E.on(Rc.default.INTERNAL_KEY_STATUSES_CHANGED,Ui,S)},load:function(ot){let Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Zt(),In=Ut,G.load(ot)},loadWithManifest:function(ot){let Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;(function(){if(!B||!B.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")})(),In=Ut,B.setManifest(ot)},refreshManifest:function(){B.getIsUpdating()||B.refreshManifest()},reset:Cl,setConfig:function(ot){ot&&(ot.capabilities&&(I=ot.capabilities),ot.capabilitiesFilter&&(N=ot.capabilitiesFilter),ot.manifestLoader&&(G=ot.manifestLoader),ot.manifestModel&&(C=ot.manifestModel),ot.mediaPlayerModel&&(fe=ot.mediaPlayerModel),ot.customParametersModel&&(ke=ot.customParametersModel),ot.protectionController&&(Ie=ot.protectionController),ot.adapter&&(K=ot.adapter),ot.dashMetrics&&(V=ot.dashMetrics),ot.errHandler&&(U=ot.errHandler),ot.timelineConverter&&(X=ot.timelineConverter),ot.videoModel&&(re=ot.videoModel),ot.playbackController&&(he=ot.playbackController),ot.throughputController&&(de=ot.throughputController),ot.serviceDescriptionController&&(ve=ot.serviceDescriptionController),ot.contentSteeringController&&($=ot.contentSteeringController),ot.textController&&(Te=ot.textController),ot.abrController&&(ce=ot.abrController),ot.mediaController&&(ge=ot.mediaController),ot.settings&&(Bt=ot.settings),ot.baseURLController&&(ie=ot.baseURLController),ot.uriFragmentModel&&(ae=ot.uriFragmentModel),ot.segmentBaseController&&(se=ot.segmentBaseController),ot.manifestUpdater&&(B=ot.manifestUpdater))},setProtectionData:function(ot){xe=ot,Ie&&Ie.setProtectionData(xe)},switchToVideoElement:function(ot){me&&(he.initialize(Oa()),vt({seekTime:ot,keepBuffers:!1,streamActivated:!0}))}},x=(0,Be.default)(_).getInstance().getLogger(S),z=Rg(_).getInstance(),D=Cg(_).getInstance(),ne=et(_).getInstance(),Rl(),S}Nc.__dashjs_factory_name="StreamController";var Dc=Ee.default.getSingletonFactory(Nc);function su(){const _=this.context,E=(0,oe.default)(_).getInstance();let S,x,I,N,B,G,C,K,V,D,z,$;function ie(){$.debug("Stopping the gap controller"),B&&(clearInterval(B),B=null),function(){E.off(L.default.WALLCLOCK_TIME_UPDATED,ge,this),E.off(L.default.INITIAL_STREAM_SWITCH,de,this),E.off(L.default.PLAYBACK_SEEKING,se,this),E.off(L.default.BUFFER_REPLACEMENT_STARTED,ae,S),E.off(L.default.TRACK_CHANGE_RENDERED,ce,S)}(),B=null,G=NaN,N=0,D=null,z={}}function se(){D&&(clearTimeout(D),D=null)}function ae(U){try{if(U.streamId!==K.getActiveStreamInfo().id||U.mediaType!==F.default.VIDEO&&U.mediaType!==F.default.AUDIO)return;U.streamId===K.getActiveStreamInfo().id&&(z[U.mediaType]=!0)}catch(X){$.error(X)}}function ce(U){U&&U.mediaType&&(z[U.mediaType]=!1)}function de(){B||function(){try{B||($.debug("Starting the gap controller"),B=setInterval(()=>{we()&&ne(C.getTime())},100))}catch{}}()}function ge(){if(we(I.get().streaming.gaps.enableSeekFix)&&(N++,N>=10)){const U=C.getTime();x===U?ne(U,!0):(x=U,G=NaN),N=0}}function we(){let U=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!K.getActiveStream())return!1;const X=Object.keys(z).some(me=>z[me]),J=!!U&&function(){const me=K.getActiveStream(),Ie=parseFloat((me.getStartTime()+me.getDuration()).toFixed(5));return C.getTime()+I.get().streaming.gaps.threshold>=Ie}();return!X&&I.get().streaming.gaps.jumpGaps&&K.getActiveStreamProcessors().length>0&&(!C.isSeeking()||J)&&!C.isPaused()&&!K.getIsStreamSwitchInProgress()&&!K.getHasMediaOrInitialisationError()}function ne(U){let X=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const J=I.get().streaming.gaps.enableStallFix,me=I.get().streaming.gaps.stallSeek,Ie=I.get().streaming.gaps.smallGapLimit,Te=I.get().streaming.gaps.jumpLargeGaps,xe=V.getBufferRange();let Oe,je=NaN,ee=!1;if(Oe=function(Ae,_e){try{if(!Ae||Ae.length<=1&&_e>0)return NaN;let re=NaN,he=0;for(;isNaN(re)&&he<Ae.length;){const ve=he>0?Ae.end(he-1):0;_e<Ae.start(he)&&ve-_e<I.get().streaming.gaps.threshold&&(re=he),he+=1}return re}catch{return null}}(xe,U),!isNaN(Oe)){const Ae=xe.start(Oe),_e=Ae-U;_e>0&&(_e<=Ie||Te)&&(je=Ae)}const te=C.getTimeToStreamEnd();if(isNaN(je)&&X&&isFinite(te)&&!isNaN(te)&&te<Ie&&(je=parseFloat(C.getStreamEndTime().toFixed(5)),ee=!0),J&&isNaN(je)&&X&&isNaN(Oe)&&function(Ae,_e){for(let re=0,he=Ae.length;re<he;re++)if(_e>=Ae.start(re)&&_e<=Ae.end(re))return!0;return!1}(xe,U)&&(me===0?($.warn("Toggle play pause to break stall"),V.pause(),V.play()):($.warn(`Jumping ${me}s to break stall`),je=U+me)),je>0&&G!==je&&je>U&&!D){const Ae=je-U;if(ee){const _e=K.getStreamForTime(je),re=_e&&!!_e.getPreloaded();$.warn(`Jumping to end of stream because of gap from ${U} to ${je}. Gap duration: ${Ae}`),C.seek(je,!0,re)}else{const _e=C.getIsDynamic(),re=Oe>0?xe.end(Oe-1):U,he=_e?1e3*Math.max(0,Ae-.1):0;D=window.setTimeout(()=>{C.seek(je,!0,!0),$.warn(`Jumping gap occuring in period ${K.getActiveStream().getStreamId()} starting at ${re} and ending at ${je}. Jumping by: ${je-re}`),D=null},he)}G=je}}return S={reset:ie,setConfig:function(U){U&&(U.settings&&(I=U.settings),U.playbackController&&(C=U.playbackController),U.streamController&&(K=U.streamController),U.videoModel&&(V=U.videoModel))},initialize:function(){(function(){E.on(L.default.WALLCLOCK_TIME_UPDATED,ge,this),E.on(L.default.INITIAL_STREAM_SWITCH,de,this),E.on(L.default.PLAYBACK_SEEKING,se,this),E.on(L.default.BUFFER_REPLACEMENT_STARTED,ae,S),E.on(L.default.TRACK_CHANGE_RENDERED,ce,S)})()}},$=(0,Be.default)(_).getInstance().getLogger(S),ie(),S}su.__dashjs_factory_name="GapController";var Ng=Ee.default.getSingletonFactory(su);function mf(){const _=this.context,E=(0,oe.default)(_).getInstance();let S,x,I,N,B,G,C,K,V,D;function z(){x=!1;const ne=or.default.parseUserAgent();I=ne&&ne.browser&&ne.browser.name&&ne.browser.name.toLowerCase()==="safari"}function $(){x=!1}function ie(ne){if(ne.streamId!==G.getActiveStreamInfo().id||!V)return;const U=C.getLiveDelay();C.getBufferLevel()>U/2&&(V=!1)}function se(ne){ne.streamId===G.getActiveStreamInfo().id&&(V=ne.state===j.BUFFER_EMPTY)}function ae(){K.getCatchupModeEnabled()||N.setPlaybackRate(1)}function ce(){C.getIsDynamic()&&K.getCatchupModeEnabled()&&(K.getCatchupPlaybackRates().max>0||K.getCatchupPlaybackRates().min<0)&&!C.isPaused()&&!C.isSeeking()&&function(){try{return!C.getTime()>0||x?!1:ge()===F.default.LIVE_CATCHUP_MODE_LOLP?function(ne,U){try{return Math.abs(de())>0||ne<U}catch{return!1}}(C.getBufferLevel(),B.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(de())>0}catch{return!1}}()}catch{return!1}}()&&function(){if(!x&&N){let ne;const U=N.getPlaybackRate(),X=K.getCatchupPlaybackRates(),J=C.getBufferLevel(),me=de(),Ie=K.getCatchupMaxDrift();if(!isNaN(Ie)&&Ie>0&&me>Ie)D.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),x=!0,C.seekToCurrentLive(!0,!1);else{const Te=C.getCurrentLiveLatency(),xe=C.getLiveDelay();ne=ge()===F.default.LIVE_CATCHUP_MODE_LOLP?function(je,ee,te,Ae,_e){let re;if(_e<Ae){const he=Math.abs(je.min),ve=5*(_e-Ae);re=1-he+2*he/(1+Math.pow(Math.E,-ve)),D.debug("[LoL+ playback control_buffer-based] bufferLevel: "+_e+", newRate: "+re)}else{if(Math.abs(ee-te)<=.02*te)re=1;else{const ve=ee-te,fe=ve<0?Math.abs(je.min):je.max,ke=5*ve;re=1-fe+2*fe/(1+Math.pow(Math.E,-ke))}D.debug("[LoL+ playback control_latency-based] latency: "+ee+", newRate: "+re)}return re}(X,Te,xe,B.get().streaming.liveCatchup.playbackBufferMin,J):function(je,ee,te,Ae){if(V)return 1;const _e=ee-te,re=_e<0?Math.abs(je.min):je.max,he=5*_e;let ve=1-re+2*re/(1+Math.pow(Math.E,-he));return C.getPlaybackStalled()&&Ae<=te/2&&_e>0&&(ve=1),ve}(X,Te,xe,J);const Oe=I?.25:.02/(.5/X.max);(ne&&Math.abs(U-ne)>=Oe||ne==1)&&(D.debug(`[CatchupController]: Setting playback rate to ${ne}`),N.setPlaybackRate(ne))}}}()}function de(){return C.getCurrentLiveLatency()-C.getLiveDelay()}function ge(){const ne=B.get().streaming.liveCatchup.playbackBufferMin;return B.get().streaming.liveCatchup.mode!==F.default.LIVE_CATCHUP_MODE_LOLP||ne===null||isNaN(ne)?F.default.LIVE_CATCHUP_MODE_DEFAULT:F.default.LIVE_CATCHUP_MODE_LOLP}function we(){K.getCatchupPlaybackRates(!0)}return S={reset:function(){E.off(pe.default.BUFFER_LEVEL_UPDATED,ie,S),E.off(pe.default.BUFFER_LEVEL_STATE_CHANGED,se,S),E.off(pe.default.PLAYBACK_PROGRESS,ce,S),E.off(pe.default.PLAYBACK_TIME_UPDATED,ce,S),E.off(pe.default.PLAYBACK_SEEKED,$,S),E.off(L.default.SETTING_UPDATED_CATCHUP_ENABLED,ae,S),E.off(L.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,we,S),E.off(L.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,we,S),E.off(pe.default.STREAM_INITIALIZED,we,S),z(),N.setPlaybackRate(1,!0)},setConfig:function(ne){ne&&(ne.settings&&(B=ne.settings),ne.videoModel&&(N=ne.videoModel),ne.streamController&&(G=ne.streamController),ne.playbackController&&(C=ne.playbackController),ne.mediaPlayerModel&&(K=ne.mediaPlayerModel))},initialize:function(){E.on(pe.default.BUFFER_LEVEL_UPDATED,ie,S),E.on(pe.default.BUFFER_LEVEL_STATE_CHANGED,se,S),E.on(pe.default.PLAYBACK_PROGRESS,ce,S),E.on(pe.default.PLAYBACK_TIME_UPDATED,ce,S),E.on(pe.default.PLAYBACK_SEEKED,$,S),E.on(L.default.SETTING_UPDATED_CATCHUP_ENABLED,ae,S),E.on(L.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,we,S),E.on(L.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,we,S),E.on(pe.default.STREAM_INITIALIZED,we,S),we()}},D=(0,Be.default)(_).getInstance().getLogger(S),z(),S}mf.__dashjs_factory_name="CatchupController";var bo=Ee.default.getSingletonFactory(mf);const Lc=[F.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME],To="video",ou="audio";function Pc(){const _=this.context;let E,S,x,I,N;function B(){S={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null,clientDataReporting:null},x=[]}function G(C,K,V){try{S[C][K]=V/1e3}catch(D){I.error(D)}}return E={getServiceDescriptionSettings:function(){return S},getProducerReferenceTimeOffsets:function(){return x},calculateProducerReferenceTimeOffsets:function(C){try{let K=[];if(C&&C.length>0){const V=[F.default.VIDEO,F.default.AUDIO,F.default.TEXT],D=N.getAvailabilityStartTime()/1e3;C.forEach(z=>{const $=V.reduce((ie,se)=>ie.concat(N.getAllMediaInfoForType(z,se)),[]).reduce((ie,se)=>(N.getProducerReferenceTimes(z,se).forEach(ae=>{const ce=N.getVoRepresentations(se);if(ce&&ce.length>0&&ce[0].adaptation&&ce[0].segmentInfoType===k.default.SEGMENT_TEMPLATE){const de=ce[0],ge=new Date(ae[k.default.WALL_CLOCK_TIME]).getTime()/1e3-(ae[k.default.PRESENTATION_TIME]/de[k.default.TIMESCALE]-de[k.default.PRESENTATION_TIME_OFFSET]+z.start),we=D-ge;ie.push({id:ae[k.default.ID],to:we})}}),ie),[]);K=K.concat($)})}x=K}catch(K){I.error(K),x=[]}},applyServiceDescription:function(C){if(!C||!C.serviceDescriptions)return;const K=C.serviceDescriptions.filter(z=>Lc.includes(z.schemeIdUri)),V=C.serviceDescriptions.filter(z=>z.schemeIdUri==null);let D=K.length>0?K[K.length-1]:V[V.length-1];D&&(D.latency&&D.latency.target>0&&function(z){let $;if(z.schemeIdUri,F.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME,$=function(ie){return{liveDelay:ie.latency.target/1e3,maxDrift:!isNaN(ie.latency.max)&&ie.latency.max>ie.latency.target?(ie.latency.max-ie.latency.target+500)/1e3:NaN,referenceId:ie.latency.referenceId||NaN}}(z),x.length>0){let{to:ie,id:se}=function(ae){let ce,de=0,ge=x.filter(we=>we.id===ae.referenceId);return ge.length===0?(de=x.length>0?x[0].to:0,ce=x[0].id||NaN):(de=ge[0].to||0,ce=ge[0].id||NaN),{to:de,id:ce}}($);S.liveDelay=$.liveDelay-ie,S.liveCatchup.maxDrift=$.maxDrift,I.debug(`
                Found latency properties coming from service description. Applied time offset of ${ie} from ProducerReferenceTime element with id ${se}.
                Live Delay: ${$.liveDelay-ie}, Live catchup max drift: ${$.maxDrift}
            `)}else S.liveDelay=$.liveDelay,S.liveCatchup.maxDrift=$.maxDrift,I.debug(`Found latency properties coming from service description: Live Delay: ${$.liveDelay}, Live catchup max drift: ${$.maxDrift}`)}(D),D.playbackRate&&function(z){const $=z.playbackRate.min?Math.round(1e3*(z.playbackRate.min-1))/1e3:NaN,ie=z.playbackRate.max?Math.round(1e3*(z.playbackRate.max-1))/1e3:NaN;S.liveCatchup.playbackRate.min=$,S.liveCatchup.playbackRate.max=ie,I.debug(`Found latency properties coming from service description: Live catchup min playback rate: ${$}`),I.debug(`Found latency properties coming from service description: Live catchup max playback rate: ${ie}`)}(D),D.operatingQuality,D.operatingBandwidth&&function(z){if(!z||!z.operatingBandwidth||!z.operatingBandwidth.mediaType||z.operatingBandwidth.mediaType==="all")return;const $={};$.minBandwidth=z.operatingBandwidth.min,$.maxBandwidth=z.operatingBandwidth.max,$.targetBandwidth=z.operatingBandwidth.target;const ie=[];z.operatingBandwidth.mediaType===To||z.operatingBandwidth.mediaType===ou?ie.push(z.operatingBandwidth.mediaType):z.operatingBandwidth.mediaType==="any"&&(ie.push(ou),ie.push(To)),ie.forEach(se=>{isNaN($.minBandwidth)||G("minBitrate",se,$.minBandwidth),isNaN($.maxBandwidth)||G("maxBitrate",se,$.maxBandwidth),isNaN($.targetBandwidth)||G("initialBitrate",se,$.targetBandwidth)})}(D),D.contentSteering&&function(z){S.contentSteering=z.contentSteering}(D),D.clientDataReporting&&function(z){S.clientDataReporting=z.clientDataReporting}(D))},reset:function(){B()},setConfig:function(C){C&&C.adapter&&(N=C.adapter)}},I=(0,Be.default)(_).getInstance().getLogger(E),B(),E}Pc.__dashjs_factory_name="ServiceDescriptionController";var lu=Ee.default.getSingletonFactory(Pc);function Qi(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},E=[];if(_.irregular)return _.irregular;if(_.regular)return _.regular;if(_.language){E=E.concat(_.language,_.extendedLanguageSubtags||[],_.script||[],_.region||[],_.variants||[]);const S=_.extensions||[];let x=-1;for(;++x<S.length;){const I=S[x];I.singleton&&I.extensions&&I.extensions.length>0&&E.push(I.singleton,...I.extensions)}}return _.privateuse&&_.privateuse.length>0&&E.push("x",..._.privateuse),E.join("-")}function Ti(_){const E=typeof _=="string"?_.charCodeAt(0):_;return E>=97&&E<=122||E>=65&&E<=90}function qs(_){const E=typeof _=="string"?_.charCodeAt(0):_;return E>=48&&E<=57}function ha(_){return Ti(_)||qs(_)}const pf=["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"],Mc={"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"},yf={}.hasOwnProperty;function Ka(_){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const S={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},x=String(_),I=x.toLowerCase();let N=0;if(_==null)throw new Error("Expected string, got `"+_+"`");if(yf.call(Mc,I)){const G=Mc[I];return E.normalize!==void 0&&E.normalize!==null&&!E.normalize||typeof G!="string"?(S[pf.includes(I)?"regular":"irregular"]=x,S):Ka(G)}for(;Ti(I.charCodeAt(N))&&N<9;)N++;if(N>1&&N<9){if(S.language=x.slice(0,N),N<4){let G=0;for(;I.charCodeAt(N)===45&&Ti(I.charCodeAt(N+1))&&Ti(I.charCodeAt(N+2))&&Ti(I.charCodeAt(N+3))&&!Ti(I.charCodeAt(N+4));){if(G>2)return B(N,3,"Too many extended language subtags, expected at most 3 subtags");S.extendedLanguageSubtags.push(x.slice(N+1,N+4)),N+=4,G++}}for(I.charCodeAt(N)===45&&Ti(I.charCodeAt(N+1))&&Ti(I.charCodeAt(N+2))&&Ti(I.charCodeAt(N+3))&&Ti(I.charCodeAt(N+4))&&!Ti(I.charCodeAt(N+5))&&(S.script=x.slice(N+1,N+5),N+=5),I.charCodeAt(N)===45&&(Ti(I.charCodeAt(N+1))&&Ti(I.charCodeAt(N+2))&&!Ti(I.charCodeAt(N+3))?(S.region=x.slice(N+1,N+3),N+=3):qs(I.charCodeAt(N+1))&&qs(I.charCodeAt(N+2))&&qs(I.charCodeAt(N+3))&&!qs(I.charCodeAt(N+4))&&(S.region=x.slice(N+1,N+4),N+=4));I.charCodeAt(N)===45;){const G=N+1;let C=G;for(;ha(I.charCodeAt(C));){if(C-G>7)return B(C,1,"Too long variant, expected at most 8 characters");C++}if(!(C-G>4||C-G>3&&qs(I.charCodeAt(G))))break;S.variants.push(x.slice(G,C)),N=C}for(;I.charCodeAt(N)===45&&I.charCodeAt(N+1)!==120&&ha(I.charCodeAt(N+1))&&I.charCodeAt(N+2)===45&&ha(I.charCodeAt(N+3));){let G=N+2,C=0;for(;I.charCodeAt(G)===45&&ha(I.charCodeAt(G+1))&&ha(I.charCodeAt(G+2));){const K=G+1;for(G=K+2,C++;ha(I.charCodeAt(G));){if(G-K>7)return B(G,2,"Too long extension, expected at most 8 characters");G++}}if(!C)return B(G,4,"Empty extension, extensions must have at least 2 characters of content");S.extensions.push({singleton:x.charAt(N+1),extensions:x.slice(N+3,G).split("-")}),N=G}}else N=0;if(N===0&&I.charCodeAt(N)===120||I.charCodeAt(N)===45&&I.charCodeAt(N+1)===120){N=N?N+2:1;let G=N;for(;I.charCodeAt(G)===45&&ha(I.charCodeAt(G+1));){const C=N+1;for(G=C;ha(I.charCodeAt(G));){if(G-C>7)return B(G,5,"Too long private-use area, expected at most 8 characters");G++}S.privateuse.push(x.slice(N+1,G)),N=G}}return N!==x.length?B(N,6,"Found superfluous content after tag"):S;function B(G,C,K){return E.warning&&E.warning(K,C,G),E.forgiving?S:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}}function vf(_,E){return function(S,x){let I=Ya(S,"tag");const N=Ya(x??"*","range"),B=[];let G=-1;for(;++G<N.length;){const C=N[G].toLowerCase();if(!E&&C==="*")continue;let K=-1;const V=[];for(;++K<I.length;)if(_(I[K].toLowerCase(),C)){if(!E)return I[K];B.push(I[K])}else V.push(I[K]);I=V}return E?B:void 0}}const uu=vf(function(_,E){const S=_.split("-"),x=E.split("-");let I=0,N=0;if(x[N]!=="*"&&S[I]!==x[N])return!1;for(I++,N++;N<x.length;)if(x[N]!=="*"){if(!S[I])return!1;if(S[I]!==x[N]){if(S[I].length===1)return!1;I++}else I++,N++}else N++;return!0},!0);function Ya(_,E){const S=_&&typeof _=="string"?[_]:_;if(!S||typeof S!="object"||!("length"in S))throw new Error("Invalid "+E+" `"+S+"`, expected non-empty string");return S}const al=[{from:"in",to:"id"},{from:"iw",to:"he"},{from:"ji",to:"yi"},{from:"jw",to:"jv"},{from:"mo",to:"ro"},{from:"scc",to:"sr"},{from:"scr",to:"hr"},{from:"aam",to:"aas"},{from:"adp",to:"dz"},{from:"aue",to:"ktz"},{from:"ayx",to:"nun"},{from:"bgm",to:"bcg"},{from:"bjd",to:"drl"},{from:"ccq",to:"rki"},{from:"cjr",to:"mom"},{from:"cka",to:"cmr"},{from:"cmk",to:"xch"},{from:"coy",to:"pij"},{from:"cqu",to:"quh"},{from:"drh",to:"mn"},{from:"drw",to:"fa-af"},{from:"gav",to:"dev"},{from:"gfx",to:"vaj"},{from:"ggn",to:"gvr"},{from:"gti",to:"nyc"},{from:"guv",to:"duz"},{from:"hrr",to:"jal"},{from:"ibi",to:"opa"},{from:"ilw",to:"gal"},{from:"jeg",to:"oyb"},{from:"kgc",to:"tdf"},{from:"kgh",to:"kml"},{from:"koj",to:"kwv"},{from:"krm",to:"bmf"},{from:"ktr",to:"dtp"},{from:"kvs",to:"gdj"},{from:"kwq",to:"yam"},{from:"kxe",to:"tvd"},{from:"kzj",to:"dtp"},{from:"kzt",to:"dtp"},{from:"lii",to:"raq"},{from:"lmm",to:"rmx"},{from:"meg",to:"cir"},{from:"mst",to:"mry"},{from:"mwj",to:"vaj"},{from:"myt",to:"mry"},{from:"nad",to:"xny"},{from:"ncp",to:"kdz"},{from:"nnx",to:"ngv"},{from:"nts",to:"pij"},{from:"oun",to:"vaj"},{from:"pcr",to:"adx"},{from:"pmc",to:"huw"},{from:"pmu",to:"phr"},{from:"ppa",to:"bfy"},{from:"ppr",to:"lcq"},{from:"pry",to:"prt"},{from:"puz",to:"pub"},{from:"sca",to:"hle"},{from:"skk",to:"oyb"},{from:"tdu",to:"dtp"},{from:"thc",to:"tpo"},{from:"thx",to:"oyb"},{from:"tie",to:"ras"},{from:"tkk",to:"twm"},{from:"tlw",to:"weo"},{from:"tmp",to:"tyj"},{from:"tne",to:"kak"},{from:"tnf",to:"fa-af"},{from:"tsf",to:"taj"},{from:"uok",to:"ema"},{from:"xba",to:"cax"},{from:"xia",to:"acn"},{from:"xkh",to:"waw"},{from:"xsj",to:"suj"},{from:"ybd",to:"rki"},{from:"yma",to:"lrr"},{from:"ymt",to:"mtm"},{from:"yos",to:"zom"},{from:"yuu",to:"yug"},{from:"asd",to:"snz"},{from:"dit",to:"dif"},{from:"llo",to:"ngt"},{from:"myd",to:"aog"},{from:"nns",to:"nbr"},{from:"agp",to:"apf"},{from:"ais",to:"ami"},{from:"ajt",to:"aeb"},{from:"baz",to:"nvo"},{from:"bhk",to:"fbl"},{from:"bic",to:"bir"},{from:"bjq",to:"bzc"},{from:"bkb",to:"ebk"},{from:"blg",to:"iba"},{from:"btb",to:"beb"},{from:"daf",to:"dnj"},{from:"dap",to:"njz"},{from:"djl",to:"dze"},{from:"dkl",to:"aqd"},{from:"drr",to:"kzk"},{from:"dud",to:"uth"},{from:"duj",to:"dwu"},{from:"dwl",to:"dbt"},{from:"elp",to:"amq"},{from:"gbc",to:"wny"},{from:"ggo",to:"esg"},{from:"ggr",to:"gtu"},{from:"gio",to:"aou"},{from:"gli",to:"kzk"},{from:"ill",to:"ilm"},{from:"izi",to:"eza"},{from:"jar",to:"jgk"},{from:"kdv",to:"zkd"},{from:"kgd",to:"ncq"},{from:"kpp",to:"jkm"},{from:"kxl",to:"kru"},{from:"kzh",to:"dgl"},{from:"lak",to:"ksp"},{from:"leg",to:"enl"},{from:"mgx",to:"jbk"},{from:"mnt",to:"wnn"},{from:"mof",to:"xnt"},{from:"mwd",to:"dmw"},{from:"nbf",to:"nru"},{from:"nbx",to:"ekc"},{from:"nln",to:"azd"},{from:"nlr",to:"nrk"},{from:"noo",to:"dtd"},{from:"nxu",to:"bpp"},{from:"pat",to:"kxr"},{from:"rmr",to:"emx"},{from:"sap",to:"aqt"},{from:"sgl",to:"isk"},{from:"smd",to:"kmb"},{from:"snb",to:"iba"},{from:"sul",to:"sgd"},{from:"sum",to:"ulw"},{from:"tgg",to:"bjp"},{from:"thw",to:"ola"},{from:"tid",to:"itd"},{from:"unp",to:"wro"},{from:"wgw",to:"wgb"},{from:"wit",to:"nol"},{from:"wiw",to:"nwo"},{from:"xrq",to:"dmw"},{from:"yen",to:"ynq"},{from:"yiy",to:"yrm"},{from:"zir",to:"scv"},{from:"sgn-br",to:"bzs"},{from:"sgn-co",to:"csn"},{from:"sgn-de",to:"gsg"},{from:"sgn-dk",to:"dsl"},{from:"sgn-fr",to:"fsl"},{from:"sgn-gb",to:"bfi"},{from:"sgn-gr",to:"gss"},{from:"sgn-ie",to:"isg"},{from:"sgn-it",to:"ise"},{from:"sgn-jp",to:"jsl"},{from:"sgn-mx",to:"mfs"},{from:"sgn-ni",to:"ncs"},{from:"sgn-nl",to:"dse"},{from:"sgn-no",to:"nsi"},{from:"sgn-pt",to:"psr"},{from:"sgn-se",to:"swl"},{from:"sgn-us",to:"ase"},{from:"sgn-za",to:"sfs"},{from:"sgn-es",to:"ssp"},{from:"zh-cmn",to:"zh"},{from:"zh-cmn-hans",to:"zh-hans"},{from:"zh-cmn-hant",to:"zh-hant"},{from:"zh-gan",to:"gan"},{from:"zh-wuu",to:"wuu"},{from:"zh-yue",to:"yue"},{from:"no-bokmal",to:"nb"},{from:"no-nynorsk",to:"nn"},{from:"aa-saaho",to:"ssy"},{from:"sh",to:"sr-latn"},{from:"cnr",to:"sr-me"},{from:"tl",to:"fil"},{from:"aju",to:"jrb"},{from:"als",to:"sq"},{from:"arb",to:"ar"},{from:"ayr",to:"ay"},{from:"azj",to:"az"},{from:"bcc",to:"bal"},{from:"bcl",to:"bik"},{from:"bxk",to:"luy"},{from:"bxr",to:"bua"},{from:"cld",to:"syr"},{from:"cmn",to:"zh"},{from:"cwd",to:"cr"},{from:"dgo",to:"doi"},{from:"dhd",to:"mwr"},{from:"dik",to:"din"},{from:"diq",to:"zza"},{from:"lbk",to:"bnc"},{from:"ekk",to:"et"},{from:"emk",to:"man"},{from:"esk",to:"ik"},{from:"fat",to:"ak"},{from:"fuc",to:"ff"},{from:"gaz",to:"om"},{from:"gbo",to:"grb"},{from:"gno",to:"gon"},{from:"gug",to:"gn"},{from:"gya",to:"gba"},{from:"hdn",to:"hai"},{from:"hea",to:"hmn"},{from:"ike",to:"iu"},{from:"kmr",to:"ku"},{from:"knc",to:"kr"},{from:"kng",to:"kg"},{from:"knn",to:"kok"},{from:"kpv",to:"kv"},{from:"lvs",to:"lv"},{from:"mhr",to:"chm"},{from:"mup",to:"raj"},{from:"khk",to:"mn"},{from:"npi",to:"ne"},{from:"ojg",to:"oj"},{from:"ory",to:"or"},{from:"pbu",to:"ps"},{from:"pes",to:"fa"},{from:"plt",to:"mg"},{from:"pnb",to:"lah"},{from:"quz",to:"qu"},{from:"rmy",to:"rom"},{from:"spy",to:"kln"},{from:"src",to:"sc"},{from:"swh",to:"sw"},{from:"ttq",to:"tmh"},{from:"tw",to:"ak"},{from:"umu",to:"del"},{from:"uzn",to:"uz"},{from:"xpe",to:"kpe"},{from:"xsl",to:"den"},{from:"ydd",to:"yi"},{from:"zai",to:"zap"},{from:"zsm",to:"ms"},{from:"zyb",to:"za"},{from:"him",to:"srx"},{from:"mnk",to:"man"},{from:"bh",to:"bho"},{from:"prs",to:"fa-af"},{from:"swc",to:"sw-cd"},{from:"aar",to:"aa"},{from:"abk",to:"ab"},{from:"ave",to:"ae"},{from:"afr",to:"af"},{from:"aka",to:"ak"},{from:"amh",to:"am"},{from:"arg",to:"an"},{from:"ara",to:"ar"},{from:"asm",to:"as"},{from:"ava",to:"av"},{from:"aym",to:"ay"},{from:"aze",to:"az"},{from:"bak",to:"ba"},{from:"bel",to:"be"},{from:"bul",to:"bg"},{from:"bih",to:"bho"},{from:"bis",to:"bi"},{from:"bam",to:"bm"},{from:"ben",to:"bn"},{from:"bod",to:"bo"},{from:"bre",to:"br"},{from:"bos",to:"bs"},{from:"cat",to:"ca"},{from:"che",to:"ce"},{from:"cha",to:"ch"},{from:"cos",to:"co"},{from:"cre",to:"cr"},{from:"ces",to:"cs"},{from:"chu",to:"cu"},{from:"chv",to:"cv"},{from:"cym",to:"cy"},{from:"dan",to:"da"},{from:"deu",to:"de"},{from:"div",to:"dv"},{from:"dzo",to:"dz"},{from:"ewe",to:"ee"},{from:"ell",to:"el"},{from:"eng",to:"en"},{from:"epo",to:"eo"},{from:"spa",to:"es"},{from:"est",to:"et"},{from:"eus",to:"eu"},{from:"fas",to:"fa"},{from:"ful",to:"ff"},{from:"fin",to:"fi"},{from:"fij",to:"fj"},{from:"fao",to:"fo"},{from:"fra",to:"fr"},{from:"fry",to:"fy"},{from:"gle",to:"ga"},{from:"gla",to:"gd"},{from:"glg",to:"gl"},{from:"grn",to:"gn"},{from:"guj",to:"gu"},{from:"glv",to:"gv"},{from:"hau",to:"ha"},{from:"heb",to:"he"},{from:"hin",to:"hi"},{from:"hmo",to:"ho"},{from:"hrv",to:"hr"},{from:"hat",to:"ht"},{from:"hun",to:"hu"},{from:"hye",to:"hy"},{from:"her",to:"hz"},{from:"ina",to:"ia"},{from:"ind",to:"id"},{from:"ile",to:"ie"},{from:"ibo",to:"ig"},{from:"iii",to:"ii"},{from:"ipk",to:"ik"},{from:"ido",to:"io"},{from:"isl",to:"is"},{from:"ita",to:"it"},{from:"iku",to:"iu"},{from:"jpn",to:"ja"},{from:"jav",to:"jv"},{from:"kat",to:"ka"},{from:"kon",to:"kg"},{from:"kik",to:"ki"},{from:"kua",to:"kj"},{from:"kaz",to:"kk"},{from:"kal",to:"kl"},{from:"khm",to:"km"},{from:"kan",to:"kn"},{from:"kor",to:"ko"},{from:"kau",to:"kr"},{from:"kas",to:"ks"},{from:"kur",to:"ku"},{from:"kom",to:"kv"},{from:"cor",to:"kw"},{from:"kir",to:"ky"},{from:"lat",to:"la"},{from:"ltz",to:"lb"},{from:"lug",to:"lg"},{from:"lim",to:"li"},{from:"lin",to:"ln"},{from:"lao",to:"lo"},{from:"lit",to:"lt"},{from:"lub",to:"lu"},{from:"lav",to:"lv"},{from:"mlg",to:"mg"},{from:"mah",to:"mh"},{from:"mri",to:"mi"},{from:"mkd",to:"mk"},{from:"mal",to:"ml"},{from:"mon",to:"mn"},{from:"mol",to:"ro"},{from:"mar",to:"mr"},{from:"msa",to:"ms"},{from:"mlt",to:"mt"},{from:"mya",to:"my"},{from:"nau",to:"na"},{from:"nob",to:"nb"},{from:"nde",to:"nd"},{from:"nep",to:"ne"},{from:"ndo",to:"ng"},{from:"nld",to:"nl"},{from:"nno",to:"nn"},{from:"nor",to:"no"},{from:"nbl",to:"nr"},{from:"nav",to:"nv"},{from:"nya",to:"ny"},{from:"oci",to:"oc"},{from:"oji",to:"oj"},{from:"orm",to:"om"},{from:"ori",to:"or"},{from:"oss",to:"os"},{from:"pan",to:"pa"},{from:"pli",to:"pi"},{from:"pol",to:"pl"},{from:"pus",to:"ps"},{from:"por",to:"pt"},{from:"que",to:"qu"},{from:"roh",to:"rm"},{from:"run",to:"rn"},{from:"ron",to:"ro"},{from:"rus",to:"ru"},{from:"kin",to:"rw"},{from:"san",to:"sa"},{from:"srd",to:"sc"},{from:"snd",to:"sd"},{from:"sme",to:"se"},{from:"sag",to:"sg"},{from:"hbs",to:"sr-latn"},{from:"sin",to:"si"},{from:"slk",to:"sk"},{from:"slv",to:"sl"},{from:"smo",to:"sm"},{from:"sna",to:"sn"},{from:"som",to:"so"},{from:"sqi",to:"sq"},{from:"srp",to:"sr"},{from:"ssw",to:"ss"},{from:"sot",to:"st"},{from:"sun",to:"su"},{from:"swe",to:"sv"},{from:"swa",to:"sw"},{from:"tam",to:"ta"},{from:"tel",to:"te"},{from:"tgk",to:"tg"},{from:"tha",to:"th"},{from:"tir",to:"ti"},{from:"tuk",to:"tk"},{from:"tgl",to:"fil"},{from:"tsn",to:"tn"},{from:"ton",to:"to"},{from:"tur",to:"tr"},{from:"tso",to:"ts"},{from:"tat",to:"tt"},{from:"twi",to:"ak"},{from:"tah",to:"ty"},{from:"uig",to:"ug"},{from:"ukr",to:"uk"},{from:"urd",to:"ur"},{from:"uzb",to:"uz"},{from:"ven",to:"ve"},{from:"vie",to:"vi"},{from:"vol",to:"vo"},{from:"wln",to:"wa"},{from:"wol",to:"wo"},{from:"xho",to:"xh"},{from:"yid",to:"yi"},{from:"yor",to:"yo"},{from:"zha",to:"za"},{from:"zho",to:"zh"},{from:"zul",to:"zu"},{from:"alb",to:"sq"},{from:"arm",to:"hy"},{from:"baq",to:"eu"},{from:"bur",to:"my"},{from:"chi",to:"zh"},{from:"cze",to:"cs"},{from:"dut",to:"nl"},{from:"fre",to:"fr"},{from:"geo",to:"ka"},{from:"ger",to:"de"},{from:"gre",to:"el"},{from:"ice",to:"is"},{from:"mac",to:"mk"},{from:"mao",to:"mi"},{from:"may",to:"ms"},{from:"per",to:"fa"},{from:"rum",to:"ro"},{from:"slo",to:"sk"},{from:"tib",to:"bo"},{from:"wel",to:"cy"},{from:"und-aaland",to:"und-ax"},{from:"hy-arevmda",to:"hyw"},{from:"und-arevmda",to:"und"},{from:"und-arevela",to:"und"},{from:"und-lojban",to:"und"},{from:"und-saaho",to:"und"},{from:"und-bokmal",to:"und"},{from:"und-nynorsk",to:"und"},{from:"und-hakka",to:"und"},{from:"und-xiang",to:"und"},{from:"und-hepburn-heploc",to:"und-alalc97"}],Gs=[{from:{field:"script",value:"qaai"},to:{field:"script",value:"zinh"}},{from:{field:"region",value:"bu"},to:{field:"region",value:"mm"}},{from:{field:"region",value:"ct"},to:{field:"region",value:"ki"}},{from:{field:"region",value:"dd"},to:{field:"region",value:"de"}},{from:{field:"region",value:"dy"},to:{field:"region",value:"bj"}},{from:{field:"region",value:"fx"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"hv"},to:{field:"region",value:"bf"}},{from:{field:"region",value:"jt"},to:{field:"region",value:"um"}},{from:{field:"region",value:"mi"},to:{field:"region",value:"um"}},{from:{field:"region",value:"nh"},to:{field:"region",value:"vu"}},{from:{field:"region",value:"nq"},to:{field:"region",value:"aq"}},{from:{field:"region",value:"pu"},to:{field:"region",value:"um"}},{from:{field:"region",value:"pz"},to:{field:"region",value:"pa"}},{from:{field:"region",value:"qu"},to:{field:"region",value:"eu"}},{from:{field:"region",value:"rh"},to:{field:"region",value:"zw"}},{from:{field:"region",value:"tp"},to:{field:"region",value:"tl"}},{from:{field:"region",value:"uk"},to:{field:"region",value:"gb"}},{from:{field:"region",value:"vd"},to:{field:"region",value:"vn"}},{from:{field:"region",value:"wk"},to:{field:"region",value:"um"}},{from:{field:"region",value:"yd"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"zr"},to:{field:"region",value:"cd"}},{from:{field:"region",value:"230"},to:{field:"region",value:"et"}},{from:{field:"region",value:"280"},to:{field:"region",value:"de"}},{from:{field:"region",value:"736"},to:{field:"region",value:"sd"}},{from:{field:"region",value:"886"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"958"},to:{field:"region",value:"aa"}},{from:{field:"region",value:"020"},to:{field:"region",value:"ad"}},{from:{field:"region",value:"784"},to:{field:"region",value:"ae"}},{from:{field:"region",value:"004"},to:{field:"region",value:"af"}},{from:{field:"region",value:"028"},to:{field:"region",value:"ag"}},{from:{field:"region",value:"660"},to:{field:"region",value:"ai"}},{from:{field:"region",value:"008"},to:{field:"region",value:"al"}},{from:{field:"region",value:"051"},to:{field:"region",value:"am"}},{from:{field:"region",value:"024"},to:{field:"region",value:"ao"}},{from:{field:"region",value:"010"},to:{field:"region",value:"aq"}},{from:{field:"region",value:"032"},to:{field:"region",value:"ar"}},{from:{field:"region",value:"016"},to:{field:"region",value:"as"}},{from:{field:"region",value:"040"},to:{field:"region",value:"at"}},{from:{field:"region",value:"036"},to:{field:"region",value:"au"}},{from:{field:"region",value:"533"},to:{field:"region",value:"aw"}},{from:{field:"region",value:"248"},to:{field:"region",value:"ax"}},{from:{field:"region",value:"031"},to:{field:"region",value:"az"}},{from:{field:"region",value:"070"},to:{field:"region",value:"ba"}},{from:{field:"region",value:"052"},to:{field:"region",value:"bb"}},{from:{field:"region",value:"050"},to:{field:"region",value:"bd"}},{from:{field:"region",value:"056"},to:{field:"region",value:"be"}},{from:{field:"region",value:"854"},to:{field:"region",value:"bf"}},{from:{field:"region",value:"100"},to:{field:"region",value:"bg"}},{from:{field:"region",value:"048"},to:{field:"region",value:"bh"}},{from:{field:"region",value:"108"},to:{field:"region",value:"bi"}},{from:{field:"region",value:"204"},to:{field:"region",value:"bj"}},{from:{field:"region",value:"652"},to:{field:"region",value:"bl"}},{from:{field:"region",value:"060"},to:{field:"region",value:"bm"}},{from:{field:"region",value:"096"},to:{field:"region",value:"bn"}},{from:{field:"region",value:"068"},to:{field:"region",value:"bo"}},{from:{field:"region",value:"535"},to:{field:"region",value:"bq"}},{from:{field:"region",value:"076"},to:{field:"region",value:"br"}},{from:{field:"region",value:"044"},to:{field:"region",value:"bs"}},{from:{field:"region",value:"064"},to:{field:"region",value:"bt"}},{from:{field:"region",value:"104"},to:{field:"region",value:"mm"}},{from:{field:"region",value:"074"},to:{field:"region",value:"bv"}},{from:{field:"region",value:"072"},to:{field:"region",value:"bw"}},{from:{field:"region",value:"112"},to:{field:"region",value:"by"}},{from:{field:"region",value:"084"},to:{field:"region",value:"bz"}},{from:{field:"region",value:"124"},to:{field:"region",value:"ca"}},{from:{field:"region",value:"166"},to:{field:"region",value:"cc"}},{from:{field:"region",value:"180"},to:{field:"region",value:"cd"}},{from:{field:"region",value:"140"},to:{field:"region",value:"cf"}},{from:{field:"region",value:"178"},to:{field:"region",value:"cg"}},{from:{field:"region",value:"756"},to:{field:"region",value:"ch"}},{from:{field:"region",value:"384"},to:{field:"region",value:"ci"}},{from:{field:"region",value:"184"},to:{field:"region",value:"ck"}},{from:{field:"region",value:"152"},to:{field:"region",value:"cl"}},{from:{field:"region",value:"120"},to:{field:"region",value:"cm"}},{from:{field:"region",value:"156"},to:{field:"region",value:"cn"}},{from:{field:"region",value:"170"},to:{field:"region",value:"co"}},{from:{field:"region",value:"188"},to:{field:"region",value:"cr"}},{from:{field:"region",value:"192"},to:{field:"region",value:"cu"}},{from:{field:"region",value:"132"},to:{field:"region",value:"cv"}},{from:{field:"region",value:"531"},to:{field:"region",value:"cw"}},{from:{field:"region",value:"162"},to:{field:"region",value:"cx"}},{from:{field:"region",value:"196"},to:{field:"region",value:"cy"}},{from:{field:"region",value:"203"},to:{field:"region",value:"cz"}},{from:{field:"region",value:"278"},to:{field:"region",value:"de"}},{from:{field:"region",value:"276"},to:{field:"region",value:"de"}},{from:{field:"region",value:"262"},to:{field:"region",value:"dj"}},{from:{field:"region",value:"208"},to:{field:"region",value:"dk"}},{from:{field:"region",value:"212"},to:{field:"region",value:"dm"}},{from:{field:"region",value:"214"},to:{field:"region",value:"do"}},{from:{field:"region",value:"012"},to:{field:"region",value:"dz"}},{from:{field:"region",value:"218"},to:{field:"region",value:"ec"}},{from:{field:"region",value:"233"},to:{field:"region",value:"ee"}},{from:{field:"region",value:"818"},to:{field:"region",value:"eg"}},{from:{field:"region",value:"732"},to:{field:"region",value:"eh"}},{from:{field:"region",value:"232"},to:{field:"region",value:"er"}},{from:{field:"region",value:"724"},to:{field:"region",value:"es"}},{from:{field:"region",value:"231"},to:{field:"region",value:"et"}},{from:{field:"region",value:"246"},to:{field:"region",value:"fi"}},{from:{field:"region",value:"242"},to:{field:"region",value:"fj"}},{from:{field:"region",value:"238"},to:{field:"region",value:"fk"}},{from:{field:"region",value:"583"},to:{field:"region",value:"fm"}},{from:{field:"region",value:"234"},to:{field:"region",value:"fo"}},{from:{field:"region",value:"250"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"249"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"266"},to:{field:"region",value:"ga"}},{from:{field:"region",value:"826"},to:{field:"region",value:"gb"}},{from:{field:"region",value:"308"},to:{field:"region",value:"gd"}},{from:{field:"region",value:"268"},to:{field:"region",value:"ge"}},{from:{field:"region",value:"254"},to:{field:"region",value:"gf"}},{from:{field:"region",value:"831"},to:{field:"region",value:"gg"}},{from:{field:"region",value:"288"},to:{field:"region",value:"gh"}},{from:{field:"region",value:"292"},to:{field:"region",value:"gi"}},{from:{field:"region",value:"304"},to:{field:"region",value:"gl"}},{from:{field:"region",value:"270"},to:{field:"region",value:"gm"}},{from:{field:"region",value:"324"},to:{field:"region",value:"gn"}},{from:{field:"region",value:"312"},to:{field:"region",value:"gp"}},{from:{field:"region",value:"226"},to:{field:"region",value:"gq"}},{from:{field:"region",value:"300"},to:{field:"region",value:"gr"}},{from:{field:"region",value:"239"},to:{field:"region",value:"gs"}},{from:{field:"region",value:"320"},to:{field:"region",value:"gt"}},{from:{field:"region",value:"316"},to:{field:"region",value:"gu"}},{from:{field:"region",value:"624"},to:{field:"region",value:"gw"}},{from:{field:"region",value:"328"},to:{field:"region",value:"gy"}},{from:{field:"region",value:"344"},to:{field:"region",value:"hk"}},{from:{field:"region",value:"334"},to:{field:"region",value:"hm"}},{from:{field:"region",value:"340"},to:{field:"region",value:"hn"}},{from:{field:"region",value:"191"},to:{field:"region",value:"hr"}},{from:{field:"region",value:"332"},to:{field:"region",value:"ht"}},{from:{field:"region",value:"348"},to:{field:"region",value:"hu"}},{from:{field:"region",value:"360"},to:{field:"region",value:"id"}},{from:{field:"region",value:"372"},to:{field:"region",value:"ie"}},{from:{field:"region",value:"376"},to:{field:"region",value:"il"}},{from:{field:"region",value:"833"},to:{field:"region",value:"im"}},{from:{field:"region",value:"356"},to:{field:"region",value:"in"}},{from:{field:"region",value:"086"},to:{field:"region",value:"io"}},{from:{field:"region",value:"368"},to:{field:"region",value:"iq"}},{from:{field:"region",value:"364"},to:{field:"region",value:"ir"}},{from:{field:"region",value:"352"},to:{field:"region",value:"is"}},{from:{field:"region",value:"380"},to:{field:"region",value:"it"}},{from:{field:"region",value:"832"},to:{field:"region",value:"je"}},{from:{field:"region",value:"388"},to:{field:"region",value:"jm"}},{from:{field:"region",value:"400"},to:{field:"region",value:"jo"}},{from:{field:"region",value:"392"},to:{field:"region",value:"jp"}},{from:{field:"region",value:"404"},to:{field:"region",value:"ke"}},{from:{field:"region",value:"417"},to:{field:"region",value:"kg"}},{from:{field:"region",value:"116"},to:{field:"region",value:"kh"}},{from:{field:"region",value:"296"},to:{field:"region",value:"ki"}},{from:{field:"region",value:"174"},to:{field:"region",value:"km"}},{from:{field:"region",value:"659"},to:{field:"region",value:"kn"}},{from:{field:"region",value:"408"},to:{field:"region",value:"kp"}},{from:{field:"region",value:"410"},to:{field:"region",value:"kr"}},{from:{field:"region",value:"414"},to:{field:"region",value:"kw"}},{from:{field:"region",value:"136"},to:{field:"region",value:"ky"}},{from:{field:"region",value:"398"},to:{field:"region",value:"kz"}},{from:{field:"region",value:"418"},to:{field:"region",value:"la"}},{from:{field:"region",value:"422"},to:{field:"region",value:"lb"}},{from:{field:"region",value:"662"},to:{field:"region",value:"lc"}},{from:{field:"region",value:"438"},to:{field:"region",value:"li"}},{from:{field:"region",value:"144"},to:{field:"region",value:"lk"}},{from:{field:"region",value:"430"},to:{field:"region",value:"lr"}},{from:{field:"region",value:"426"},to:{field:"region",value:"ls"}},{from:{field:"region",value:"440"},to:{field:"region",value:"lt"}},{from:{field:"region",value:"442"},to:{field:"region",value:"lu"}},{from:{field:"region",value:"428"},to:{field:"region",value:"lv"}},{from:{field:"region",value:"434"},to:{field:"region",value:"ly"}},{from:{field:"region",value:"504"},to:{field:"region",value:"ma"}},{from:{field:"region",value:"492"},to:{field:"region",value:"mc"}},{from:{field:"region",value:"498"},to:{field:"region",value:"md"}},{from:{field:"region",value:"499"},to:{field:"region",value:"me"}},{from:{field:"region",value:"663"},to:{field:"region",value:"mf"}},{from:{field:"region",value:"450"},to:{field:"region",value:"mg"}},{from:{field:"region",value:"584"},to:{field:"region",value:"mh"}},{from:{field:"region",value:"807"},to:{field:"region",value:"mk"}},{from:{field:"region",value:"466"},to:{field:"region",value:"ml"}},{from:{field:"region",value:"496"},to:{field:"region",value:"mn"}},{from:{field:"region",value:"446"},to:{field:"region",value:"mo"}},{from:{field:"region",value:"580"},to:{field:"region",value:"mp"}},{from:{field:"region",value:"474"},to:{field:"region",value:"mq"}},{from:{field:"region",value:"478"},to:{field:"region",value:"mr"}},{from:{field:"region",value:"500"},to:{field:"region",value:"ms"}},{from:{field:"region",value:"470"},to:{field:"region",value:"mt"}},{from:{field:"region",value:"480"},to:{field:"region",value:"mu"}},{from:{field:"region",value:"462"},to:{field:"region",value:"mv"}},{from:{field:"region",value:"454"},to:{field:"region",value:"mw"}},{from:{field:"region",value:"484"},to:{field:"region",value:"mx"}},{from:{field:"region",value:"458"},to:{field:"region",value:"my"}},{from:{field:"region",value:"508"},to:{field:"region",value:"mz"}},{from:{field:"region",value:"516"},to:{field:"region",value:"na"}},{from:{field:"region",value:"540"},to:{field:"region",value:"nc"}},{from:{field:"region",value:"562"},to:{field:"region",value:"ne"}},{from:{field:"region",value:"574"},to:{field:"region",value:"nf"}},{from:{field:"region",value:"566"},to:{field:"region",value:"ng"}},{from:{field:"region",value:"558"},to:{field:"region",value:"ni"}},{from:{field:"region",value:"528"},to:{field:"region",value:"nl"}},{from:{field:"region",value:"578"},to:{field:"region",value:"no"}},{from:{field:"region",value:"524"},to:{field:"region",value:"np"}},{from:{field:"region",value:"520"},to:{field:"region",value:"nr"}},{from:{field:"region",value:"570"},to:{field:"region",value:"nu"}},{from:{field:"region",value:"554"},to:{field:"region",value:"nz"}},{from:{field:"region",value:"512"},to:{field:"region",value:"om"}},{from:{field:"region",value:"591"},to:{field:"region",value:"pa"}},{from:{field:"region",value:"604"},to:{field:"region",value:"pe"}},{from:{field:"region",value:"258"},to:{field:"region",value:"pf"}},{from:{field:"region",value:"598"},to:{field:"region",value:"pg"}},{from:{field:"region",value:"608"},to:{field:"region",value:"ph"}},{from:{field:"region",value:"586"},to:{field:"region",value:"pk"}},{from:{field:"region",value:"616"},to:{field:"region",value:"pl"}},{from:{field:"region",value:"666"},to:{field:"region",value:"pm"}},{from:{field:"region",value:"612"},to:{field:"region",value:"pn"}},{from:{field:"region",value:"630"},to:{field:"region",value:"pr"}},{from:{field:"region",value:"275"},to:{field:"region",value:"ps"}},{from:{field:"region",value:"620"},to:{field:"region",value:"pt"}},{from:{field:"region",value:"585"},to:{field:"region",value:"pw"}},{from:{field:"region",value:"600"},to:{field:"region",value:"py"}},{from:{field:"region",value:"634"},to:{field:"region",value:"qa"}},{from:{field:"region",value:"959"},to:{field:"region",value:"qm"}},{from:{field:"region",value:"960"},to:{field:"region",value:"qn"}},{from:{field:"region",value:"962"},to:{field:"region",value:"qp"}},{from:{field:"region",value:"963"},to:{field:"region",value:"qq"}},{from:{field:"region",value:"964"},to:{field:"region",value:"qr"}},{from:{field:"region",value:"965"},to:{field:"region",value:"qs"}},{from:{field:"region",value:"966"},to:{field:"region",value:"qt"}},{from:{field:"region",value:"967"},to:{field:"region",value:"eu"}},{from:{field:"region",value:"968"},to:{field:"region",value:"qv"}},{from:{field:"region",value:"969"},to:{field:"region",value:"qw"}},{from:{field:"region",value:"970"},to:{field:"region",value:"qx"}},{from:{field:"region",value:"971"},to:{field:"region",value:"qy"}},{from:{field:"region",value:"972"},to:{field:"region",value:"qz"}},{from:{field:"region",value:"638"},to:{field:"region",value:"re"}},{from:{field:"region",value:"642"},to:{field:"region",value:"ro"}},{from:{field:"region",value:"688"},to:{field:"region",value:"rs"}},{from:{field:"region",value:"643"},to:{field:"region",value:"ru"}},{from:{field:"region",value:"646"},to:{field:"region",value:"rw"}},{from:{field:"region",value:"682"},to:{field:"region",value:"sa"}},{from:{field:"region",value:"090"},to:{field:"region",value:"sb"}},{from:{field:"region",value:"690"},to:{field:"region",value:"sc"}},{from:{field:"region",value:"729"},to:{field:"region",value:"sd"}},{from:{field:"region",value:"752"},to:{field:"region",value:"se"}},{from:{field:"region",value:"702"},to:{field:"region",value:"sg"}},{from:{field:"region",value:"654"},to:{field:"region",value:"sh"}},{from:{field:"region",value:"705"},to:{field:"region",value:"si"}},{from:{field:"region",value:"744"},to:{field:"region",value:"sj"}},{from:{field:"region",value:"703"},to:{field:"region",value:"sk"}},{from:{field:"region",value:"694"},to:{field:"region",value:"sl"}},{from:{field:"region",value:"674"},to:{field:"region",value:"sm"}},{from:{field:"region",value:"686"},to:{field:"region",value:"sn"}},{from:{field:"region",value:"706"},to:{field:"region",value:"so"}},{from:{field:"region",value:"740"},to:{field:"region",value:"sr"}},{from:{field:"region",value:"728"},to:{field:"region",value:"ss"}},{from:{field:"region",value:"678"},to:{field:"region",value:"st"}},{from:{field:"region",value:"222"},to:{field:"region",value:"sv"}},{from:{field:"region",value:"534"},to:{field:"region",value:"sx"}},{from:{field:"region",value:"760"},to:{field:"region",value:"sy"}},{from:{field:"region",value:"748"},to:{field:"region",value:"sz"}},{from:{field:"region",value:"796"},to:{field:"region",value:"tc"}},{from:{field:"region",value:"148"},to:{field:"region",value:"td"}},{from:{field:"region",value:"260"},to:{field:"region",value:"tf"}},{from:{field:"region",value:"768"},to:{field:"region",value:"tg"}},{from:{field:"region",value:"764"},to:{field:"region",value:"th"}},{from:{field:"region",value:"762"},to:{field:"region",value:"tj"}},{from:{field:"region",value:"772"},to:{field:"region",value:"tk"}},{from:{field:"region",value:"626"},to:{field:"region",value:"tl"}},{from:{field:"region",value:"795"},to:{field:"region",value:"tm"}},{from:{field:"region",value:"788"},to:{field:"region",value:"tn"}},{from:{field:"region",value:"776"},to:{field:"region",value:"to"}},{from:{field:"region",value:"792"},to:{field:"region",value:"tr"}},{from:{field:"region",value:"780"},to:{field:"region",value:"tt"}},{from:{field:"region",value:"798"},to:{field:"region",value:"tv"}},{from:{field:"region",value:"158"},to:{field:"region",value:"tw"}},{from:{field:"region",value:"834"},to:{field:"region",value:"tz"}},{from:{field:"region",value:"804"},to:{field:"region",value:"ua"}},{from:{field:"region",value:"800"},to:{field:"region",value:"ug"}},{from:{field:"region",value:"581"},to:{field:"region",value:"um"}},{from:{field:"region",value:"840"},to:{field:"region",value:"us"}},{from:{field:"region",value:"858"},to:{field:"region",value:"uy"}},{from:{field:"region",value:"860"},to:{field:"region",value:"uz"}},{from:{field:"region",value:"336"},to:{field:"region",value:"va"}},{from:{field:"region",value:"670"},to:{field:"region",value:"vc"}},{from:{field:"region",value:"862"},to:{field:"region",value:"ve"}},{from:{field:"region",value:"092"},to:{field:"region",value:"vg"}},{from:{field:"region",value:"850"},to:{field:"region",value:"vi"}},{from:{field:"region",value:"704"},to:{field:"region",value:"vn"}},{from:{field:"region",value:"548"},to:{field:"region",value:"vu"}},{from:{field:"region",value:"876"},to:{field:"region",value:"wf"}},{from:{field:"region",value:"882"},to:{field:"region",value:"ws"}},{from:{field:"region",value:"973"},to:{field:"region",value:"xa"}},{from:{field:"region",value:"974"},to:{field:"region",value:"xb"}},{from:{field:"region",value:"975"},to:{field:"region",value:"xc"}},{from:{field:"region",value:"976"},to:{field:"region",value:"xd"}},{from:{field:"region",value:"977"},to:{field:"region",value:"xe"}},{from:{field:"region",value:"978"},to:{field:"region",value:"xf"}},{from:{field:"region",value:"979"},to:{field:"region",value:"xg"}},{from:{field:"region",value:"980"},to:{field:"region",value:"xh"}},{from:{field:"region",value:"981"},to:{field:"region",value:"xi"}},{from:{field:"region",value:"982"},to:{field:"region",value:"xj"}},{from:{field:"region",value:"983"},to:{field:"region",value:"xk"}},{from:{field:"region",value:"984"},to:{field:"region",value:"xl"}},{from:{field:"region",value:"985"},to:{field:"region",value:"xm"}},{from:{field:"region",value:"986"},to:{field:"region",value:"xn"}},{from:{field:"region",value:"987"},to:{field:"region",value:"xo"}},{from:{field:"region",value:"988"},to:{field:"region",value:"xp"}},{from:{field:"region",value:"989"},to:{field:"region",value:"xq"}},{from:{field:"region",value:"990"},to:{field:"region",value:"xr"}},{from:{field:"region",value:"991"},to:{field:"region",value:"xs"}},{from:{field:"region",value:"992"},to:{field:"region",value:"xt"}},{from:{field:"region",value:"993"},to:{field:"region",value:"xu"}},{from:{field:"region",value:"994"},to:{field:"region",value:"xv"}},{from:{field:"region",value:"995"},to:{field:"region",value:"xw"}},{from:{field:"region",value:"996"},to:{field:"region",value:"xx"}},{from:{field:"region",value:"997"},to:{field:"region",value:"xy"}},{from:{field:"region",value:"998"},to:{field:"region",value:"xz"}},{from:{field:"region",value:"720"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"887"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"175"},to:{field:"region",value:"yt"}},{from:{field:"region",value:"710"},to:{field:"region",value:"za"}},{from:{field:"region",value:"894"},to:{field:"region",value:"zm"}},{from:{field:"region",value:"716"},to:{field:"region",value:"zw"}},{from:{field:"region",value:"999"},to:{field:"region",value:"zz"}},{from:{field:"variants",value:"polytoni"},to:{field:"variants",value:"polyton"}},{from:{field:"variants",value:"heploc"},to:{field:"variants",value:"alalc97"}}],Oc={region:{172:["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],200:["cz","sk"],530:["cw","sx","bq"],532:["cw","sx","bq"],536:["sa","iq"],582:["fm","mh","mp","pw"],810:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],830:["je","gg"],890:["rs","me","si","hr","mk","ba"],891:["rs","me"],an:["cw","sx","bq"],cs:["rs","me"],fq:["aq","tf"],nt:["sa","iq"],pc:["fm","mh","mp","pw"],su:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],yu:["rs","me"],"062":["034","143"],ant:["cw","sx","bq"],scg:["rs","me"],ntz:["sa","iq"],sun:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],yug:["rs","me"]}},cu={aa:"aa-latn-et",aaa:"aaa-latn-ng",aab:"aab-latn-ng",aac:"aac-latn-pg",aad:"aad-latn-pg",aae:"aae-latn-it","aae-grek":"aae-grek-it",aaf:"aaf-mlym-in","aaf-arab":"aaf-arab-in",aag:"aag-latn-pg",aah:"aah-latn-pg",aai:"aai-latn-zz",aak:"aak-latn-zz",aal:"aal-latn-cm",aan:"aan-latn-br",aao:"aao-arab-dz",aap:"aap-latn-br",aaq:"aaq-latn-us",aas:"aas-latn-tz",aat:"aat-grek-gr",aau:"aau-latn-zz",aaw:"aaw-latn-pg",aax:"aax-latn-id",aaz:"aaz-latn-id",ab:"ab-cyrl-ge",aba:"aba-latn-ci",abb:"abb-latn-cm",abc:"abc-latn-ph",abd:"abd-latn-ph",abe:"abe-latn-ca",abf:"abf-latn-my",abg:"abg-latn-pg",abh:"abh-arab-tj",abi:"abi-latn-zz",abl:"abl-rjng-id","abl-latn":"abl-latn-id",abm:"abm-latn-ng",abn:"abn-latn-ng",abo:"abo-latn-ng",abp:"abp-latn-ph",abq:"abq-cyrl-zz",abr:"abr-latn-gh",abs:"abs-latn-id",abt:"abt-latn-zz",abu:"abu-latn-ci",abv:"abv-arab-bh",abw:"abw-latn-pg",abx:"abx-latn-ph",aby:"aby-latn-zz",abz:"abz-latn-id",aca:"aca-latn-co",acb:"acb-latn-ng",acd:"acd-latn-zz",ace:"ace-latn-id",acf:"acf-latn-lc",ach:"ach-latn-ug",acm:"acm-arab-iq",acn:"acn-latn-cn",acp:"acp-latn-ng",acq:"acq-arab-ye",acr:"acr-latn-gt",acs:"acs-latn-br",act:"act-latn-nl",acu:"acu-latn-ec",acv:"acv-latn-us",acw:"acw-arab-sa",acx:"acx-arab-om",acy:"acy-latn-cy","acy-arab":"acy-arab-cy","acy-grek":"acy-grek-cy",acz:"acz-latn-sd",ada:"ada-latn-gh",adb:"adb-latn-tl",add:"add-latn-cm",ade:"ade-latn-zz",adf:"adf-arab-om",adg:"adg-latn-au",adh:"adh-latn-ug",adi:"adi-latn-in","adi-tibt":"adi-tibt-cn",adj:"adj-latn-zz",adl:"adl-latn-in",adn:"adn-latn-id",ado:"ado-latn-pg",adp:"adp-tibt-bt",adq:"adq-latn-gh",adr:"adr-latn-id",adt:"adt-latn-au",adu:"adu-latn-ng",adw:"adw-latn-br",adx:"adx-tibt-cn",ady:"ady-cyrl-ru",adz:"adz-latn-zz",ae:"ae-avst-ir",aea:"aea-latn-au",aeb:"aeb-arab-tn",aec:"aec-arab-eg",aee:"aee-arab-af",aek:"aek-latn-nc",ael:"ael-latn-cm",aem:"aem-latn-vn",aeq:"aeq-arab-pk",aer:"aer-latn-au",aeu:"aeu-latn-cn",aew:"aew-latn-pg",aey:"aey-latn-zz",aez:"aez-latn-pg",af:"af-latn-za",afb:"afb-arab-kw",afd:"afd-latn-pg",afe:"afe-latn-ng",afh:"afh-latn-gh",afi:"afi-latn-pg",afk:"afk-latn-pg",afn:"afn-latn-ng",afo:"afo-latn-ng",afp:"afp-latn-pg",afs:"afs-latn-mx",afu:"afu-latn-gh",afz:"afz-latn-id",aga:"aga-latn-pe",agb:"agb-latn-ng",agc:"agc-latn-zz",agd:"agd-latn-zz",age:"age-latn-pg",agf:"agf-latn-id",agg:"agg-latn-zz",agh:"agh-latn-cd",agi:"agi-deva-in",agj:"agj-ethi-et","agj-arab":"agj-arab-et",agk:"agk-latn-ph",agl:"agl-latn-pg",agm:"agm-latn-zz",agn:"agn-latn-ph",ago:"ago-latn-zz",agq:"agq-latn-cm",agr:"agr-latn-pe",ags:"ags-latn-cm",agt:"agt-latn-ph",agu:"agu-latn-gt",agv:"agv-latn-ph",agw:"agw-latn-sb",agx:"agx-cyrl-ru",agy:"agy-latn-ph",agz:"agz-latn-ph",aha:"aha-latn-zz",ahb:"ahb-latn-vu",ahg:"ahg-ethi-et",ahh:"ahh-latn-id",ahi:"ahi-latn-ci",ahk:"ahk-latn-mm","ahk-mymr":"ahk-mymr-mm","ahk-th":"ahk-latn-th","ahk-thai":"ahk-thai-th",ahl:"ahl-latn-zz",ahm:"ahm-latn-ci",ahn:"ahn-latn-ng",aho:"aho-ahom-in",ahp:"ahp-latn-ci",ahr:"ahr-deva-in",ahs:"ahs-latn-ng",aht:"aht-latn-us",aia:"aia-latn-sb",aib:"aib-arab-cn",aic:"aic-latn-pg",aid:"aid-latn-au",aie:"aie-latn-pg",aif:"aif-latn-pg",aig:"aig-latn-ag",aij:"aij-hebr-il",aik:"aik-latn-ng",ail:"ail-latn-pg",aim:"aim-latn-in",ain:"ain-kana-jp","ain-latn":"ain-latn-jp",aio:"aio-mymr-in",aip:"aip-latn-id",aiq:"aiq-arab-af",air:"air-latn-id",ait:"ait-latn-br",aiw:"aiw-latn-et","aiw-arab":"aiw-arab-et","aiw-ethi":"aiw-ethi-et",aix:"aix-latn-pg",aiy:"aiy-latn-cf",aja:"aja-latn-ss",ajg:"ajg-latn-zz",aji:"aji-latn-nc",ajn:"ajn-latn-au",ajp:"ajp-arab-jo",ajt:"ajt-arab-tn",ajw:"ajw-latn-ng",ajz:"ajz-latn-in",ak:"ak-latn-gh",akb:"akb-latn-id","akb-batk":"akb-batk-id",akc:"akc-latn-id",akd:"akd-latn-ng",ake:"ake-latn-gy",akf:"akf-latn-ng",akg:"akg-latn-id",akh:"akh-latn-pg",aki:"aki-latn-pg",akk:"akk-xsux-iq",akl:"akl-latn-ph",ako:"ako-latn-sr",akp:"akp-latn-gh",akq:"akq-latn-pg",akr:"akr-latn-vu",aks:"aks-latn-tg",akt:"akt-latn-pg",aku:"aku-latn-cm",akv:"akv-cyrl-ru",akw:"akw-latn-cg",akz:"akz-latn-us",ala:"ala-latn-zz",alc:"alc-latn-cl",ald:"ald-latn-ci",ale:"ale-latn-us",alf:"alf-latn-ng",alh:"alh-latn-au",ali:"ali-latn-zz",alj:"alj-latn-ph",alk:"alk-laoo-la",all:"all-mlym-in",alm:"alm-latn-vu",aln:"aln-latn-xk",alo:"alo-latn-id",alp:"alp-latn-id",alq:"alq-latn-ca",alr:"alr-cyrl-ru",alt:"alt-cyrl-ru",alu:"alu-latn-sb",alw:"alw-ethi-et",alx:"alx-latn-pg",aly:"aly-latn-au",alz:"alz-latn-cd",am:"am-ethi-et",ama:"ama-latn-br",amb:"amb-latn-ng",amc:"amc-latn-pe",ame:"ame-latn-pe",amf:"amf-latn-et","amf-ethi":"amf-ethi-et",amg:"amg-latn-au",ami:"ami-latn-tw",amj:"amj-latn-td",amk:"amk-latn-id",amm:"amm-latn-zz",amn:"amn-latn-zz",amo:"amo-latn-ng",amp:"amp-latn-zz",amq:"amq-latn-id",amr:"amr-latn-pe",ams:"ams-jpan-jp",amt:"amt-latn-pg",amu:"amu-latn-mx",amv:"amv-latn-id",amw:"amw-syrc-sy","amw-arab":"amw-arab-sy","amw-armi":"amw-armi-sy","amw-latn":"amw-latn-sy",amx:"amx-latn-au",amy:"amy-latn-au",amz:"amz-latn-au",an:"an-latn-es",ana:"ana-latn-co",anb:"anb-latn-pe",anc:"anc-latn-zz",and:"and-latn-id",ane:"ane-latn-nc",anf:"anf-latn-gh",ang:"ang-latn-gb",anh:"anh-latn-pg",ani:"ani-cyrl-ru",anj:"anj-latn-pg",ank:"ank-latn-zz",anl:"anl-latn-mm",anm:"anm-latn-in",ann:"ann-latn-ng",ano:"ano-latn-co",anp:"anp-deva-in",anr:"anr-deva-in",ans:"ans-latn-co",ant:"ant-latn-au",anu:"anu-ethi-et","anu-arab":"anu-arab-ss","anu-latn":"anu-latn-ss",anv:"anv-latn-cm",anw:"anw-latn-ng",anx:"anx-latn-pg",any:"any-latn-zz",anz:"anz-latn-pg",aoa:"aoa-latn-st",aob:"aob-latn-pg",aoc:"aoc-latn-ve",aod:"aod-latn-pg",aoe:"aoe-latn-pg",aof:"aof-latn-pg",aog:"aog-latn-pg",aoi:"aoi-latn-au",aoj:"aoj-latn-zz",aok:"aok-latn-nc",aol:"aol-latn-id",aom:"aom-latn-zz",aon:"aon-latn-pg",aor:"aor-latn-vu",aos:"aos-latn-id",aot:"aot-beng-bd","aot-latn":"aot-latn-in",aox:"aox-latn-gy",aoz:"aoz-latn-id",apb:"apb-latn-sb",apc:"apc-arab-sy",apd:"apd-arab-tg",ape:"ape-latn-zz",apf:"apf-latn-ph",apg:"apg-latn-id",aph:"aph-deva-np",api:"api-latn-br",apj:"apj-latn-us",apk:"apk-latn-us",apl:"apl-latn-us",apm:"apm-latn-us",apn:"apn-latn-br",apo:"apo-latn-pg",app:"app-latn-vu",apr:"apr-latn-zz",aps:"aps-latn-zz",apt:"apt-latn-in",apu:"apu-latn-br",apv:"apv-latn-br",apw:"apw-latn-us",apx:"apx-latn-id",apy:"apy-latn-br",apz:"apz-latn-zz",aqc:"aqc-cyrl-ru",aqd:"aqd-latn-ml",aqg:"aqg-latn-ng",aqk:"aqk-latn-ng",aqm:"aqm-latn-id",aqn:"aqn-latn-ph",aqr:"aqr-latn-nc",aqt:"aqt-latn-py",aqz:"aqz-latn-br",ar:"ar-arab-eg",arc:"arc-armi-ir","arc-nbat":"arc-nbat-jo","arc-palm":"arc-palm-sy",ard:"ard-latn-au",are:"are-latn-au",arh:"arh-latn-zz",ari:"ari-latn-us",arj:"arj-latn-br",ark:"ark-latn-br",arl:"arl-latn-pe",arn:"arn-latn-cl",aro:"aro-latn-bo",arp:"arp-latn-us",arq:"arq-arab-dz",arr:"arr-latn-br",ars:"ars-arab-sa",aru:"aru-latn-br",arw:"arw-latn-sr",arx:"arx-latn-br",ary:"ary-arab-ma",arz:"arz-arab-eg",as:"as-beng-in",asa:"asa-latn-tz",asb:"asb-latn-ca",asc:"asc-latn-id",ase:"ase-sgnw-us",asg:"asg-latn-zz",ash:"ash-latn-pe",asi:"asi-latn-id",asj:"asj-latn-cm",ask:"ask-arab-af",asl:"asl-latn-id",asn:"asn-latn-br",aso:"aso-latn-zz",ass:"ass-latn-cm",ast:"ast-latn-es",asu:"asu-latn-br",asv:"asv-latn-cd",asx:"asx-latn-pg",asy:"asy-latn-id",asz:"asz-latn-id",ata:"ata-latn-zz",atb:"atb-latn-cn","atb-lisu":"atb-lisu-cn",atc:"atc-latn-pe",atd:"atd-latn-ph",ate:"ate-latn-pg",atg:"atg-latn-zz",ati:"ati-latn-ci",atj:"atj-latn-ca",atk:"atk-latn-ph",atl:"atl-latn-ph",atm:"atm-latn-ph",atn:"atn-arab-ir",ato:"ato-latn-cm",atp:"atp-latn-ph",atq:"atq-latn-id",atr:"atr-latn-br",ats:"ats-latn-us",att:"att-latn-ph",atu:"atu-latn-ss",atv:"atv-cyrl-ru",atw:"atw-latn-us",atx:"atx-latn-br",aty:"aty-latn-vu",atz:"atz-latn-ph",aua:"aua-latn-sb",auc:"auc-latn-ec",aud:"aud-latn-sb",aug:"aug-latn-bj",auh:"auh-latn-zm",aui:"aui-latn-pg",auj:"auj-arab-ly","auj-latn":"auj-latn-ly","auj-tfng":"auj-tfng-ly",auk:"auk-latn-pg",aul:"aul-latn-vu",aum:"aum-latn-ng",aun:"aun-latn-pg",auo:"auo-latn-ng",aup:"aup-latn-pg",auq:"auq-latn-id",aur:"aur-latn-pg",aut:"aut-latn-pf",auu:"auu-latn-id",auw:"auw-latn-id",auy:"auy-latn-zz",auz:"auz-arab-uz",av:"av-cyrl-ru",avb:"avb-latn-pg",avd:"avd-arab-ir",avi:"avi-latn-ci",avk:"avk-latn-001",avl:"avl-arab-zz",avm:"avm-latn-au",avn:"avn-latn-zz",avo:"avo-latn-br",avs:"avs-latn-pe",avt:"avt-latn-zz",avu:"avu-latn-zz",avv:"avv-latn-br",awa:"awa-deva-in",awb:"awb-latn-zz",awc:"awc-latn-ng",awe:"awe-latn-br",awg:"awg-latn-au",awh:"awh-latn-id",awi:"awi-latn-pg",awk:"awk-latn-au",awm:"awm-latn-pg",awn:"awn-ethi-et",awo:"awo-latn-zz",awr:"awr-latn-id",aws:"aws-latn-id",awt:"awt-latn-br",awu:"awu-latn-id",awv:"awv-latn-id",aww:"aww-latn-pg",awx:"awx-latn-zz",awy:"awy-latn-id",axb:"axb-latn-ar",axe:"axe-latn-au",axg:"axg-latn-br",axk:"axk-latn-cf",axl:"axl-latn-au",axm:"axm-armn-am",axx:"axx-latn-nc",ay:"ay-latn-bo",aya:"aya-latn-pg",ayb:"ayb-latn-zz",ayc:"ayc-latn-pe",ayd:"ayd-latn-au",aye:"aye-latn-ng",ayg:"ayg-latn-tg",ayh:"ayh-arab-ye",ayi:"ayi-latn-ng",ayk:"ayk-latn-ng",ayl:"ayl-arab-ly",ayn:"ayn-arab-ye",ayo:"ayo-latn-py",ayp:"ayp-arab-iq",ayq:"ayq-latn-pg",ays:"ays-latn-ph",ayt:"ayt-latn-ph",ayu:"ayu-latn-ng",ayz:"ayz-latn-id",az:"az-latn-az","az-arab":"az-arab-ir","az-iq":"az-arab-iq","az-ir":"az-arab-ir","az-ru":"az-cyrl-ru",azb:"azb-arab-ir","azb-cyrl":"azb-cyrl-az","azb-latn":"azb-latn-az",azd:"azd-latn-mx",azg:"azg-latn-mx",azm:"azm-latn-mx",azn:"azn-latn-mx",azo:"azo-latn-cm",azt:"azt-latn-ph",azz:"azz-latn-mx",ba:"ba-cyrl-ru",baa:"baa-latn-sb",bab:"bab-latn-gw",bac:"bac-latn-id",bae:"bae-latn-ve",baf:"baf-latn-cm",bag:"bag-latn-cm",bah:"bah-latn-bs",baj:"baj-latn-id",bal:"bal-arab-pk",ban:"ban-latn-id",bao:"bao-latn-co",bap:"bap-deva-np",bar:"bar-latn-at",bas:"bas-latn-cm",bau:"bau-latn-ng",bav:"bav-latn-zz",baw:"baw-latn-cm",bax:"bax-bamu-cm",bay:"bay-latn-id",bba:"bba-latn-zz",bbb:"bbb-latn-zz",bbc:"bbc-latn-id",bbd:"bbd-latn-zz",bbe:"bbe-latn-cd",bbf:"bbf-latn-pg",bbg:"bbg-latn-ga",bbi:"bbi-latn-cm",bbj:"bbj-latn-cm",bbk:"bbk-latn-cm",bbl:"bbl-geor-ge",bbm:"bbm-latn-cd",bbn:"bbn-latn-pg",bbo:"bbo-latn-bf",bbp:"bbp-latn-zz",bbq:"bbq-latn-cm",bbr:"bbr-latn-zz",bbs:"bbs-latn-ng",bbt:"bbt-latn-ng",bbu:"bbu-latn-ng",bbv:"bbv-latn-pg",bbw:"bbw-latn-cm",bbx:"bbx-latn-cm",bby:"bby-latn-cm",bca:"bca-latn-cn","bca-hani":"bca-hani-cn",bcb:"bcb-latn-sn",bcd:"bcd-latn-id",bce:"bce-latn-cm",bcf:"bcf-latn-zz",bcg:"bcg-latn-gn",bch:"bch-latn-zz",bci:"bci-latn-ci",bcj:"bcj-latn-au",bck:"bck-latn-au",bcm:"bcm-latn-zz",bcn:"bcn-latn-zz",bco:"bco-latn-zz",bcp:"bcp-latn-cd",bcq:"bcq-ethi-zz",bcr:"bcr-latn-ca",bcs:"bcs-latn-ng",bct:"bct-latn-cd",bcu:"bcu-latn-zz",bcv:"bcv-latn-ng",bcw:"bcw-latn-cm",bcy:"bcy-latn-ng",bcz:"bcz-latn-sn",bda:"bda-latn-sn",bdb:"bdb-latn-id",bdc:"bdc-latn-co",bdd:"bdd-latn-zz",bde:"bde-latn-ng",bdf:"bdf-latn-pg",bdg:"bdg-latn-my",bdh:"bdh-latn-ss",bdi:"bdi-latn-sd",bdj:"bdj-latn-ss",bdk:"bdk-latn-az",bdl:"bdl-latn-id",bdm:"bdm-latn-td",bdn:"bdn-latn-cm",bdo:"bdo-latn-td",bdp:"bdp-latn-tz",bdq:"bdq-latn-vn",bdr:"bdr-latn-my",bds:"bds-latn-tz",bdt:"bdt-latn-cf",bdu:"bdu-latn-cm",bdv:"bdv-orya-in",bdw:"bdw-latn-id",bdx:"bdx-latn-id",bdy:"bdy-latn-au",bdz:"bdz-arab-pk",be:"be-cyrl-by",bea:"bea-latn-ca","bea-cans":"bea-cans-ca",beb:"beb-latn-cm",bec:"bec-latn-cm",bed:"bed-latn-id",bee:"bee-deva-in",bef:"bef-latn-zz",beh:"beh-latn-zz",bei:"bei-latn-id",bej:"bej-arab-sd",bek:"bek-latn-pg",bem:"bem-latn-zm",beo:"beo-latn-pg",bep:"bep-latn-id",beq:"beq-latn-cg",bes:"bes-latn-td",bet:"bet-latn-zz",beu:"beu-latn-id",bev:"bev-latn-ci",bew:"bew-latn-id",bex:"bex-latn-zz",bey:"bey-latn-pg",bez:"bez-latn-tz",bfa:"bfa-latn-ss","bfa-arab":"bfa-arab-ss",bfb:"bfb-deva-in",bfc:"bfc-latn-cn",bfd:"bfd-latn-cm",bfe:"bfe-latn-id",bff:"bff-latn-cf",bfg:"bfg-latn-id",bfh:"bfh-latn-pg",bfj:"bfj-latn-cm",bfl:"bfl-latn-cf",bfm:"bfm-latn-cm",bfn:"bfn-latn-tl",bfo:"bfo-latn-bf",bfp:"bfp-latn-cm",bfq:"bfq-taml-in",bfs:"bfs-latn-cn","bfs-hani":"bfs-hani-cn",bft:"bft-arab-pk",bfu:"bfu-tibt-in","bfu-takr":"bfu-takr-in",bfw:"bfw-orya-in",bfx:"bfx-latn-ph",bfy:"bfy-deva-in",bfz:"bfz-deva-in",bg:"bg-cyrl-bg",bga:"bga-latn-ng",bgb:"bgb-latn-id",bgc:"bgc-deva-in",bgd:"bgd-deva-in",bgf:"bgf-latn-cm",bgg:"bgg-latn-in",bgi:"bgi-latn-ph",bgj:"bgj-latn-cm",bgn:"bgn-arab-pk",bgo:"bgo-latn-gn",bgp:"bgp-arab-pk",bgq:"bgq-deva-in",bgr:"bgr-latn-in",bgs:"bgs-latn-ph",bgt:"bgt-latn-sb",bgu:"bgu-latn-ng",bgv:"bgv-latn-id",bgw:"bgw-deva-in",bgx:"bgx-grek-tr",bgy:"bgy-latn-id",bgz:"bgz-latn-id",bha:"bha-deva-in",bhb:"bhb-deva-in",bhc:"bhc-latn-id",bhd:"bhd-deva-in","bhd-arab":"bhd-arab-in","bhd-takr":"bhd-takr-in",bhe:"bhe-arab-pk",bhf:"bhf-latn-pg",bhg:"bhg-latn-zz",bhh:"bhh-cyrl-il","bhh-hebr":"bhh-hebr-il","bhh-latn":"bhh-latn-il",bhi:"bhi-deva-in",bhj:"bhj-deva-np",bhl:"bhl-latn-zz",bhm:"bhm-arab-om",bhn:"bhn-syrc-ge",bho:"bho-deva-in",bhp:"bhp-latn-id",bhq:"bhq-latn-id",bhr:"bhr-latn-mg",bhs:"bhs-latn-cm",bht:"bht-takr-in","bht-deva":"bht-deva-in","bht-latn":"bht-latn-in",bhu:"bhu-deva-in",bhv:"bhv-latn-id",bhw:"bhw-latn-id",bhy:"bhy-latn-zz",bhz:"bhz-latn-id",bi:"bi-latn-vu",bia:"bia-latn-au",bib:"bib-latn-zz",bid:"bid-latn-td",bie:"bie-latn-pg",bif:"bif-latn-gw",big:"big-latn-zz",bik:"bik-latn-ph",bil:"bil-latn-ng",bim:"bim-latn-zz",bin:"bin-latn-ng",bio:"bio-latn-zz",bip:"bip-latn-cd",biq:"biq-latn-zz",bir:"bir-latn-pg",bit:"bit-latn-pg",biu:"biu-latn-in",biv:"biv-latn-gh",biw:"biw-latn-cm",biy:"biy-deva-in",biz:"biz-latn-cd",bja:"bja-latn-cd",bjb:"bjb-latn-au",bjc:"bjc-latn-pg",bjf:"bjf-syrc-il",bjg:"bjg-latn-gw",bjh:"bjh-latn-zz",bji:"bji-ethi-zz",bjj:"bjj-deva-in",bjk:"bjk-latn-pg",bjl:"bjl-latn-pg",bjm:"bjm-arab-iq",bjn:"bjn-latn-id",bjo:"bjo-latn-zz",bjp:"bjp-latn-pg",bjr:"bjr-latn-zz",bjs:"bjs-latn-bb",bjt:"bjt-latn-sn",bju:"bju-latn-cm",bjv:"bjv-latn-td",bjw:"bjw-latn-ci",bjx:"bjx-latn-ph",bjy:"bjy-latn-au",bjz:"bjz-latn-zz",bka:"bka-latn-ng",bkc:"bkc-latn-zz",bkd:"bkd-latn-ph",bkf:"bkf-latn-cd",bkg:"bkg-latn-cf",bkh:"bkh-latn-cm",bki:"bki-latn-vu",bkj:"bkj-latn-cf",bkl:"bkl-latn-id",bkm:"bkm-latn-cm",bkn:"bkn-latn-id",bko:"bko-latn-cm",bkp:"bkp-latn-cd",bkq:"bkq-latn-zz",bkr:"bkr-latn-id",bks:"bks-latn-ph",bkt:"bkt-latn-cd",bku:"bku-latn-ph",bkv:"bkv-latn-zz",bkw:"bkw-latn-cg",bkx:"bkx-latn-tl",bky:"bky-latn-ng",bkz:"bkz-latn-id",bla:"bla-latn-ca",blb:"blb-latn-sb",blc:"blc-latn-ca",bld:"bld-latn-id",ble:"ble-latn-gw",blf:"blf-latn-id",blg:"blg-latn-my",blh:"blh-latn-lr",bli:"bli-latn-cd",blj:"blj-latn-id",blk:"blk-mymr-mm",blm:"blm-latn-ss",bln:"bln-latn-ph",blo:"blo-latn-bj",blp:"blp-latn-sb",blq:"blq-latn-pg",blr:"blr-latn-cn","blr-tale":"blr-tale-cn","blr-thai":"blr-thai-th",bls:"bls-latn-id",blt:"blt-tavt-vn",blv:"blv-latn-ao",blw:"blw-latn-ph",blx:"blx-latn-ph",bly:"bly-latn-bj",blz:"blz-latn-id",bm:"bm-latn-ml",bma:"bma-latn-ng",bmb:"bmb-latn-cd",bmc:"bmc-latn-pg",bmd:"bmd-latn-gn",bme:"bme-latn-cf",bmf:"bmf-latn-sl",bmg:"bmg-latn-cd",bmh:"bmh-latn-zz",bmi:"bmi-latn-td",bmj:"bmj-deva-np",bmk:"bmk-latn-zz",bml:"bml-latn-cd",bmm:"bmm-latn-mg",bmn:"bmn-latn-pg",bmo:"bmo-latn-cm",bmp:"bmp-latn-pg",bmq:"bmq-latn-ml",bmr:"bmr-latn-co",bms:"bms-latn-ne",bmu:"bmu-latn-zz",bmv:"bmv-latn-cm",bmw:"bmw-latn-cg",bmx:"bmx-latn-pg",bmz:"bmz-latn-pg",bn:"bn-beng-bd",bna:"bna-latn-id",bnb:"bnb-latn-my",bnc:"bnc-latn-ph",bnd:"bnd-latn-id",bne:"bne-latn-id",bnf:"bnf-latn-id",bng:"bng-latn-zz",bni:"bni-latn-cd",bnj:"bnj-latn-ph",bnk:"bnk-latn-vu",bnm:"bnm-latn-zz",bnn:"bnn-latn-tw",bno:"bno-latn-ph",bnp:"bnp-latn-zz",bnq:"bnq-latn-id",bnr:"bnr-latn-vu",bns:"bns-deva-in",bnu:"bnu-latn-id",bnv:"bnv-latn-id",bnw:"bnw-latn-pg",bnx:"bnx-latn-cd",bny:"bny-latn-my",bnz:"bnz-latn-cm",bo:"bo-tibt-cn",boa:"boa-latn-pe",bob:"bob-latn-ke",boe:"boe-latn-cm",bof:"bof-latn-bf",boh:"boh-latn-cd",boj:"boj-latn-zz",bok:"bok-latn-cg",bol:"bol-latn-ng",bom:"bom-latn-zz",bon:"bon-latn-zz",boo:"boo-latn-ml",bop:"bop-latn-pg",boq:"boq-latn-pg",bor:"bor-latn-br",bot:"bot-latn-ss",bou:"bou-latn-tz",bov:"bov-latn-gh",bow:"bow-latn-pg",box:"box-latn-bf",boy:"boy-latn-cf",boz:"boz-latn-ml","boz-arab":"boz-arab-ml",bpa:"bpa-latn-vu",bpc:"bpc-latn-cm",bpd:"bpd-latn-cf",bpe:"bpe-latn-pg",bpg:"bpg-latn-id",bph:"bph-cyrl-ru",bpi:"bpi-latn-pg",bpj:"bpj-latn-cd",bpk:"bpk-latn-nc",bpl:"bpl-latn-au",bpm:"bpm-latn-pg",bpo:"bpo-latn-id",bpp:"bpp-latn-id",bpq:"bpq-latn-id",bpr:"bpr-latn-ph",bps:"bps-latn-ph",bpt:"bpt-latn-au",bpu:"bpu-latn-pg",bpv:"bpv-latn-id",bpw:"bpw-latn-pg",bpx:"bpx-deva-in",bpy:"bpy-beng-in",bpz:"bpz-latn-id",bqa:"bqa-latn-bj",bqb:"bqb-latn-id",bqc:"bqc-latn-zz",bqd:"bqd-latn-cm",bqf:"bqf-latn-gn","bqf-arab":"bqf-arab-gn",bqg:"bqg-latn-tg",bqi:"bqi-arab-ir",bqj:"bqj-latn-sn",bqk:"bqk-latn-cf",bql:"bql-latn-pg",bqm:"bqm-latn-cm",bqo:"bqo-latn-cm",bqp:"bqp-latn-zz",bqq:"bqq-latn-id",bqr:"bqr-latn-id",bqs:"bqs-latn-pg",bqt:"bqt-latn-cm",bqu:"bqu-latn-cd",bqv:"bqv-latn-ci",bqw:"bqw-latn-ng",bqx:"bqx-latn-ng",bqz:"bqz-latn-cm",br:"br-latn-fr",bra:"bra-deva-in",brb:"brb-khmr-kh","brb-laoo":"brb-laoo-la","brb-latn":"brb-latn-vn",brc:"brc-latn-gy",brd:"brd-deva-np",brf:"brf-latn-cd",brg:"brg-latn-bo",brh:"brh-arab-pk",bri:"bri-latn-cm",brj:"brj-latn-vu",brk:"brk-arab-sd",brl:"brl-latn-bw",brm:"brm-latn-cd",brn:"brn-latn-cr",brp:"brp-latn-id",brq:"brq-latn-pg",brr:"brr-latn-sb",brs:"brs-latn-id",brt:"brt-latn-ng",bru:"bru-latn-vn","bru-laoo":"bru-laoo-la","bru-thai":"bru-thai-la",brv:"brv-laoo-la",brx:"brx-deva-in",bry:"bry-latn-pg",brz:"brz-latn-zz",bs:"bs-latn-ba",bsa:"bsa-latn-id",bsb:"bsb-latn-bn",bsc:"bsc-latn-sn",bse:"bse-latn-cm",bsf:"bsf-latn-ng",bsh:"bsh-arab-af",bsi:"bsi-latn-cm",bsj:"bsj-latn-zz",bsk:"bsk-arab-pk","bsk-latn":"bsk-latn-pk",bsl:"bsl-latn-ng",bsm:"bsm-latn-id",bsn:"bsn-latn-co",bso:"bso-latn-td",bsp:"bsp-latn-gn",bsq:"bsq-bass-lr",bsr:"bsr-latn-ng",bss:"bss-latn-cm",bst:"bst-ethi-zz",bsu:"bsu-latn-id",bsv:"bsv-latn-gn","bsv-arab":"bsv-arab-gn",bsw:"bsw-latn-et","bsw-ethi":"bsw-ethi-et",bsx:"bsx-latn-ng",bsy:"bsy-latn-my",bta:"bta-latn-ng",btc:"btc-latn-cm",btd:"btd-batk-id",bte:"bte-latn-ng",btf:"btf-latn-td",btg:"btg-latn-ci",bth:"bth-latn-my",bti:"bti-latn-id",btj:"btj-latn-id",btm:"btm-batk-id",btn:"btn-latn-ph",bto:"bto-latn-ph",btp:"btp-latn-pg",btq:"btq-latn-my",btr:"btr-latn-vu",bts:"bts-latn-id","bts-batk":"bts-batk-id",btt:"btt-latn-zz",btu:"btu-latn-ng",btv:"btv-deva-pk",btw:"btw-latn-ph",btx:"btx-latn-id","btx-batk":"btx-batk-id",bty:"bty-latn-id",btz:"btz-latn-id",bua:"bua-cyrl-ru",bub:"bub-latn-td",buc:"buc-latn-yt",bud:"bud-latn-zz",bue:"bue-latn-ca",buf:"buf-latn-cd",bug:"bug-latn-id",buh:"buh-latn-cn",bui:"bui-latn-cg",buj:"buj-latn-ng",buk:"buk-latn-zz",bum:"bum-latn-cm",bun:"bun-latn-sl",buo:"buo-latn-zz",bup:"bup-latn-id",buq:"buq-latn-pg",bus:"bus-latn-zz",but:"but-latn-pg",buu:"buu-latn-zz",buv:"buv-latn-pg",buw:"buw-latn-ga",bux:"bux-latn-ng",buy:"buy-latn-sl",buz:"buz-latn-ng",bva:"bva-latn-td",bvb:"bvb-latn-gq",bvc:"bvc-latn-sb",bvd:"bvd-latn-sb",bve:"bve-latn-id",bvf:"bvf-latn-td",bvg:"bvg-latn-cm",bvh:"bvh-latn-ng",bvi:"bvi-latn-ss",bvj:"bvj-latn-ng",bvk:"bvk-latn-id",bvm:"bvm-latn-cm",bvn:"bvn-latn-pg",bvo:"bvo-latn-td",bvq:"bvq-latn-cf",bvr:"bvr-latn-au",bvt:"bvt-latn-id",bvu:"bvu-latn-id",bvv:"bvv-latn-ve",bvw:"bvw-latn-ng",bvx:"bvx-latn-cg",bvy:"bvy-latn-ph",bvz:"bvz-latn-id",bwa:"bwa-latn-nc",bwb:"bwb-latn-fj",bwc:"bwc-latn-zm",bwd:"bwd-latn-zz",bwe:"bwe-mymr-mm","bwe-latn":"bwe-latn-mm",bwf:"bwf-latn-pg",bwg:"bwg-latn-mz",bwh:"bwh-latn-cm",bwi:"bwi-latn-ve",bwj:"bwj-latn-bf",bwk:"bwk-latn-pg",bwl:"bwl-latn-cd",bwm:"bwm-latn-pg",bwo:"bwo-latn-et","bwo-ethi":"bwo-ethi-et",bwp:"bwp-latn-id",bwq:"bwq-latn-bf",bwr:"bwr-latn-zz",bws:"bws-latn-cd",bwt:"bwt-latn-cm",bwu:"bwu-latn-gh",bww:"bww-latn-cd",bwx:"bwx-latn-cn",bwy:"bwy-latn-bf",bwz:"bwz-latn-cg",bxa:"bxa-latn-sb",bxb:"bxb-latn-ss",bxc:"bxc-latn-gq",bxf:"bxf-latn-pg",bxg:"bxg-latn-cd",bxh:"bxh-latn-zz",bxi:"bxi-latn-au",bxj:"bxj-latn-au",bxl:"bxl-latn-bf",bxm:"bxm-cyrl-mn","bxm-latn":"bxm-latn-mn","bxm-mong":"bxm-mong-mn",bxn:"bxn-latn-au",bxo:"bxo-latn-ng",bxp:"bxp-latn-cm",bxq:"bxq-latn-ng",bxs:"bxs-latn-cm",bxu:"bxu-mong-cn","bxu-cyrl":"bxu-cyrl-cn","bxu-latn":"bxu-latn-cn",bxv:"bxv-latn-td",bxw:"bxw-latn-ml",bxz:"bxz-latn-pg",bya:"bya-latn-ph",byb:"byb-latn-cm",byc:"byc-latn-ng",byd:"byd-latn-id",bye:"bye-latn-zz",byf:"byf-latn-ng",byh:"byh-deva-np",byi:"byi-latn-cd",byj:"byj-latn-ng",byk:"byk-latn-cn",byl:"byl-latn-id",bym:"bym-latn-au",byn:"byn-ethi-er",byp:"byp-latn-ng",byr:"byr-latn-zz",bys:"bys-latn-zz",byv:"byv-latn-cm",byw:"byw-deva-np",byx:"byx-latn-zz",byz:"byz-latn-pg",bza:"bza-latn-zz",bzb:"bzb-latn-id",bzc:"bzc-latn-mg",bzd:"bzd-latn-cr",bze:"bze-latn-ml",bzf:"bzf-latn-zz",bzh:"bzh-latn-zz",bzi:"bzi-thai-th",bzj:"bzj-latn-bz",bzk:"bzk-latn-ni",bzl:"bzl-latn-id",bzm:"bzm-latn-cd",bzn:"bzn-latn-id",bzo:"bzo-latn-cd",bzp:"bzp-latn-id",bzq:"bzq-latn-id",bzr:"bzr-latn-au",bzt:"bzt-latn-001",bzu:"bzu-latn-id",bzv:"bzv-latn-cm",bzw:"bzw-latn-zz",bzx:"bzx-latn-ml",bzy:"bzy-latn-ng",bzz:"bzz-latn-ng",ca:"ca-latn-es",caa:"caa-latn-gt",cab:"cab-latn-hn",cac:"cac-latn-gt",cad:"cad-latn-us",cae:"cae-latn-sn",caf:"caf-latn-ca","caf-cans":"caf-cans-ca",cag:"cag-latn-py",cah:"cah-latn-pe",caj:"caj-latn-ar",cak:"cak-latn-gt",cal:"cal-latn-mp",cam:"cam-latn-nc",can:"can-latn-zz",cao:"cao-latn-bo",cap:"cap-latn-bo",caq:"caq-latn-in",car:"car-latn-ve",cas:"cas-latn-bo",cav:"cav-latn-bo",caw:"caw-latn-bo",cax:"cax-latn-bo",cay:"cay-latn-ca",caz:"caz-latn-bo",cbb:"cbb-latn-co",cbc:"cbc-latn-co",cbd:"cbd-latn-co",cbg:"cbg-latn-co",cbi:"cbi-latn-ec",cbj:"cbj-latn-zz",cbk:"cbk-latn-ph","cbk-brai":"cbk-brai-ph",cbl:"cbl-latn-mm",cbn:"cbn-thai-th",cbo:"cbo-latn-ng",cbq:"cbq-latn-ng",cbr:"cbr-latn-pe",cbs:"cbs-latn-pe",cbt:"cbt-latn-pe",cbu:"cbu-latn-pe",cbv:"cbv-latn-co",cbw:"cbw-latn-ph",cby:"cby-latn-co",ccc:"ccc-latn-pe",ccd:"ccd-latn-br",cce:"cce-latn-mz",ccg:"ccg-latn-ng",cch:"cch-latn-ng",ccj:"ccj-latn-gw",ccl:"ccl-latn-tz",ccm:"ccm-latn-my",cco:"cco-latn-mx",ccp:"ccp-cakm-bd",ccr:"ccr-latn-sv",cde:"cde-telu-in",cdf:"cdf-latn-in","cdf-beng":"cdf-beng-in",cdh:"cdh-deva-in","cdh-takr":"cdh-takr-in",cdi:"cdi-gujr-in",cdj:"cdj-deva-in",cdm:"cdm-deva-np","cdm-latn":"cdm-latn-np",cdo:"cdo-hans-cn","cdo-hant":"cdo-hant-cn","cdo-latn":"cdo-latn-cn",cdr:"cdr-latn-ng",cdz:"cdz-beng-in",ce:"ce-cyrl-ru",cea:"cea-latn-us",ceb:"ceb-latn-ph",ceg:"ceg-latn-py",cek:"cek-latn-mm",cen:"cen-latn-ng",cet:"cet-latn-ng",cey:"cey-latn-mm",cfa:"cfa-latn-zz",cfd:"cfd-latn-ng",cfg:"cfg-latn-ng",cfm:"cfm-latn-mm","cfm-beng":"cfm-beng-in",cga:"cga-latn-pg",cgc:"cgc-latn-ph",cgg:"cgg-latn-ug",cgk:"cgk-tibt-bt",ch:"ch-latn-gu",chb:"chb-latn-co",chd:"chd-latn-mx",chf:"chf-latn-mx",chg:"chg-arab-tm",chh:"chh-latn-us",chj:"chj-latn-mx",chk:"chk-latn-fm",chl:"chl-latn-us",chm:"chm-cyrl-ru",chn:"chn-latn-us","chn-dupl":"chn-dupl-us",cho:"cho-latn-us",chp:"chp-latn-ca",chq:"chq-latn-mx",chr:"chr-cher-us",cht:"cht-latn-pe",chw:"chw-latn-mz",chx:"chx-deva-np",chy:"chy-latn-us",chz:"chz-latn-mx",cia:"cia-latn-id","cia-arab":"cia-arab-id","cia-hang":"cia-hang-id",cib:"cib-latn-bj",cic:"cic-latn-us",cie:"cie-latn-ng",cih:"cih-deva-in",cim:"cim-latn-it",cin:"cin-latn-br",cip:"cip-latn-mx",cir:"cir-latn-nc",ciw:"ciw-latn-us","ciw-cans":"ciw-cans-us",ciy:"ciy-latn-ve",cja:"cja-arab-kh",cje:"cje-latn-vn",cjh:"cjh-latn-us",cji:"cji-cyrl-ru",cjk:"cjk-latn-ao",cjm:"cjm-cham-vn",cjn:"cjn-latn-pg",cjo:"cjo-latn-pe",cjp:"cjp-latn-cr",cjs:"cjs-latn-ru","cjs-cyrl":"cjs-cyrl-ru",cjv:"cjv-latn-zz",cjy:"cjy-hans-cn","cjy-hant":"cjy-hant-cn",ckb:"ckb-arab-iq",ckl:"ckl-latn-zz",ckm:"ckm-latn-hr","ckm-glag":"ckm-glag-hr",ckn:"ckn-latn-mm",cko:"cko-latn-zz",ckq:"ckq-latn-td",ckr:"ckr-latn-pg",cks:"cks-latn-nc",ckt:"ckt-cyrl-ru",cku:"cku-latn-us",ckv:"ckv-latn-tw",ckx:"ckx-latn-cm",cky:"cky-latn-zz",ckz:"ckz-latn-gt",cla:"cla-latn-zz",clc:"clc-latn-ca",cle:"cle-latn-mx",clh:"clh-arab-pk",cli:"cli-latn-gh",clj:"clj-latn-mm",clk:"clk-latn-in","clk-tibt":"clk-tibt-cn",cll:"cll-latn-gh",clm:"clm-latn-us",clo:"clo-latn-mx",clt:"clt-latn-mm",clu:"clu-latn-ph",clw:"clw-cyrl-ru",cly:"cly-latn-mx",cma:"cma-latn-vn",cme:"cme-latn-zz",cmg:"cmg-soyo-mn",cmi:"cmi-latn-co",cml:"cml-latn-id",cmo:"cmo-latn-vn","cmo-kh":"cmo-latn-kh","cmo-khmr":"cmo-khmr-kh",cmr:"cmr-latn-mm",cms:"cms-latn-it",cmt:"cmt-latn-za",cna:"cna-tibt-in",cnb:"cnb-latn-mm",cnc:"cnc-latn-vn",cng:"cng-latn-cn",cnh:"cnh-latn-mm",cni:"cni-latn-pe",cnk:"cnk-latn-mm",cnl:"cnl-latn-mx",cnp:"cnp-hans-cn","cnp-hant":"cnp-hant-cn",cnq:"cnq-latn-cm",cns:"cns-latn-id",cnt:"cnt-latn-mx",cnw:"cnw-latn-mm",cnx:"cnx-latn-gb",co:"co-latn-fr",coa:"coa-latn-au",cob:"cob-latn-mx",coc:"coc-latn-mx",cod:"cod-latn-pe",coe:"coe-latn-co",cof:"cof-latn-ec",cog:"cog-thai-th",coh:"coh-latn-ke",coj:"coj-latn-mx",cok:"cok-latn-mx",col:"col-latn-us",com:"com-latn-us",coo:"coo-latn-ca",cop:"cop-copt-eg",coq:"coq-latn-us",cot:"cot-latn-pe",cou:"cou-latn-sn",cox:"cox-latn-pe",coz:"coz-latn-mx",cpa:"cpa-latn-mx",cpb:"cpb-latn-pe",cpc:"cpc-latn-pe",cpg:"cpg-grek-gr",cpi:"cpi-latn-nr",cpn:"cpn-latn-gh",cpo:"cpo-latn-bf",cps:"cps-latn-ph",cpu:"cpu-latn-pe",cpx:"cpx-latn-cn",cpy:"cpy-latn-pe",cqd:"cqd-latn-cn",cr:"cr-cans-ca",crb:"crb-latn-vc",crc:"crc-latn-vu",crd:"crd-latn-us",crf:"crf-latn-co",crg:"crg-latn-ca",crh:"crh-cyrl-ua",cri:"cri-latn-st",crj:"crj-cans-ca","crj-latn":"crj-latn-ca",crk:"crk-cans-ca",crl:"crl-cans-ca",crm:"crm-cans-ca",crn:"crn-latn-mx",cro:"cro-latn-us",crq:"crq-latn-ar",crs:"crs-latn-sc",crt:"crt-latn-ar",crv:"crv-latn-in",crw:"crw-latn-vn",crx:"crx-latn-ca","crx-cans":"crx-cans-ca",cry:"cry-latn-ng",crz:"crz-latn-us",cs:"cs-latn-cz",csa:"csa-latn-mx",csb:"csb-latn-pl",csh:"csh-mymr-mm","csh-latn":"csh-latn-mm",csj:"csj-latn-mm",csk:"csk-latn-sn",csm:"csm-latn-us",cso:"cso-latn-mx",csp:"csp-hans-cn","csp-hant":"csp-hant-cn",css:"css-latn-us",cst:"cst-latn-us",csv:"csv-latn-mm",csw:"csw-cans-ca",csy:"csy-latn-mm",csz:"csz-latn-us",cta:"cta-latn-mx",ctc:"ctc-latn-us",ctd:"ctd-pauc-mm",cte:"cte-latn-mx",ctg:"ctg-beng-bd","ctg-arab":"ctg-arab-bd","ctg-latn":"ctg-latn-bd",cth:"cth-latn-mm",ctl:"ctl-latn-mx",ctm:"ctm-latn-us",ctn:"ctn-deva-np",cto:"cto-latn-co",ctp:"ctp-latn-mx",cts:"cts-latn-ph",ctt:"ctt-taml-in",ctu:"ctu-latn-mx",ctz:"ctz-latn-mx",cu:"cu-cyrl-ru","cu-glag":"cu-glag-bg",cua:"cua-latn-vn",cub:"cub-latn-co",cuc:"cuc-latn-mx",cuh:"cuh-latn-ke",cui:"cui-latn-co",cuj:"cuj-latn-pe",cuk:"cuk-latn-pa",cul:"cul-latn-br",cuo:"cuo-latn-ve",cup:"cup-latn-us",cut:"cut-latn-mx",cuu:"cuu-lana-cn",cuv:"cuv-latn-cm",cux:"cux-latn-mx",cv:"cv-cyrl-ru",cvg:"cvg-latn-in","cvg-tibt":"cvg-tibt-in",cvn:"cvn-latn-mx",cwa:"cwa-latn-tz",cwb:"cwb-latn-mz",cwe:"cwe-latn-tz",cwg:"cwg-latn-my",cwt:"cwt-latn-sn",cy:"cy-latn-gb",cya:"cya-latn-mx",cyb:"cyb-latn-bo",cyo:"cyo-latn-ph",czh:"czh-hans-cn","czh-hant":"czh-hant-cn",czk:"czk-hebr-cz",czn:"czn-latn-mx",czt:"czt-latn-mm",da:"da-latn-dk",daa:"daa-latn-td",dac:"dac-latn-pg",dad:"dad-latn-zz",dae:"dae-latn-cm",daf:"daf-latn-ci",dag:"dag-latn-zz",dah:"dah-latn-zz",dai:"dai-latn-td",daj:"daj-latn-sd",dak:"dak-latn-us",dal:"dal-latn-ke",dam:"dam-latn-ng",dao:"dao-latn-mm",daq:"daq-deva-in",dar:"dar-cyrl-ru",das:"das-latn-ci",dau:"dau-latn-td",dav:"dav-latn-ke",daw:"daw-latn-ph",dax:"dax-latn-au",daz:"daz-latn-id",dba:"dba-latn-ml",dbb:"dbb-latn-ng",dbd:"dbd-latn-zz",dbe:"dbe-latn-id",dbf:"dbf-latn-id",dbg:"dbg-latn-ml",dbi:"dbi-latn-ng",dbj:"dbj-latn-my","dbj-arab":"dbj-arab-my",dbl:"dbl-latn-au",dbm:"dbm-latn-ng",dbn:"dbn-latn-id",dbo:"dbo-latn-ng",dbp:"dbp-latn-ng",dbq:"dbq-latn-zz",dbt:"dbt-latn-ml",dbu:"dbu-latn-ml",dbv:"dbv-latn-ng",dbw:"dbw-latn-ml",dby:"dby-latn-pg",dcc:"dcc-arab-in",dcr:"dcr-latn-vi",dda:"dda-latn-au",ddd:"ddd-latn-ss",dde:"dde-latn-cg",ddg:"ddg-latn-tl",ddi:"ddi-latn-pg",ddj:"ddj-latn-au",ddn:"ddn-latn-zz",ddo:"ddo-cyrl-ru",ddr:"ddr-latn-au",dds:"dds-latn-ml",ddw:"ddw-latn-id",de:"de-latn-de",dec:"dec-latn-sd",ded:"ded-latn-zz",dee:"dee-latn-lr",def:"def-arab-ir",deg:"deg-latn-ng",deh:"deh-arab-pk",dei:"dei-latn-id",dek:"dek-latn-cm",del:"del-latn-us",dem:"dem-latn-id",den:"den-latn-ca",deq:"deq-latn-cf",der:"der-beng-in","der-latn":"der-latn-in",des:"des-latn-br",dev:"dev-latn-pg",dez:"dez-latn-cd",dga:"dga-latn-zz",dgb:"dgb-latn-ml",dgc:"dgc-latn-ph",dgd:"dgd-latn-bf",dge:"dge-latn-pg",dgg:"dgg-latn-pg",dgh:"dgh-latn-zz",dgi:"dgi-latn-zz",dgk:"dgk-latn-cf",dgl:"dgl-arab-zz",dgn:"dgn-latn-au",dgr:"dgr-latn-ca",dgs:"dgs-latn-bf",dgt:"dgt-latn-au",dgw:"dgw-latn-au",dgx:"dgx-latn-pg",dgz:"dgz-latn-zz",dhg:"dhg-latn-au",dhi:"dhi-deva-np",dhl:"dhl-latn-au",dhm:"dhm-latn-ao",dhn:"dhn-gujr-in",dho:"dho-deva-in",dhr:"dhr-latn-au",dhs:"dhs-latn-tz",dhu:"dhu-latn-au",dhv:"dhv-latn-nc",dhw:"dhw-deva-np",dhx:"dhx-latn-au",dia:"dia-latn-zz",dib:"dib-latn-ss",dic:"dic-latn-ci",did:"did-latn-ss",dif:"dif-latn-au",dig:"dig-latn-ke",dih:"dih-latn-mx",dii:"dii-latn-cm",dij:"dij-latn-id",dil:"dil-latn-sd",din:"din-latn-ss","din-arab":"din-arab-ss",dio:"dio-latn-ng",dip:"dip-latn-ss",dir:"dir-latn-ng",dis:"dis-latn-in","dis-beng":"dis-beng-in",diu:"diu-latn-na",diw:"diw-latn-ss",dix:"dix-latn-vu",diy:"diy-latn-id",diz:"diz-latn-cd",dja:"dja-latn-au",djb:"djb-latn-au",djc:"djc-latn-td",djd:"djd-latn-au",dje:"dje-latn-ne",djf:"djf-latn-au",dji:"dji-latn-au",djj:"djj-latn-au",djk:"djk-latn-sr",djm:"djm-latn-ml",djn:"djn-latn-au",djo:"djo-latn-id",djr:"djr-latn-au",dju:"dju-latn-pg",djw:"djw-latn-au",dka:"dka-tibt-bt",dkg:"dkg-latn-ng",dkk:"dkk-latn-id",dkr:"dkr-latn-my",dks:"dks-latn-ss",dkx:"dkx-latn-cm",dlg:"dlg-cyrl-ru",dlm:"dlm-latn-hr",dln:"dln-latn-in",dma:"dma-latn-ga",dmb:"dmb-latn-ml",dmc:"dmc-latn-pg",dmd:"dmd-latn-au",dme:"dme-latn-cm",dmf:"dmf-medf-ng",dmg:"dmg-latn-my",dmk:"dmk-arab-pk",dml:"dml-arab-pk",dmm:"dmm-latn-cm",dmo:"dmo-latn-cm",dmr:"dmr-latn-id",dms:"dms-latn-id",dmu:"dmu-latn-id",dmv:"dmv-latn-my",dmw:"dmw-latn-au",dmx:"dmx-latn-mz",dmy:"dmy-latn-id",dna:"dna-latn-id",dnd:"dnd-latn-pg",dne:"dne-latn-tz",dng:"dng-cyrl-kg","dng-arab":"dng-arab-kg",dni:"dni-latn-id",dnj:"dnj-latn-ci",dnk:"dnk-latn-id",dnn:"dnn-latn-bf",dno:"dno-latn-cd",dnr:"dnr-latn-pg",dnt:"dnt-latn-id",dnu:"dnu-mymr-mm",dnv:"dnv-mymr-mm",dnw:"dnw-latn-id",dny:"dny-latn-br",doa:"doa-latn-pg",dob:"dob-latn-zz",doc:"doc-latn-cn",doe:"doe-latn-tz",dof:"dof-latn-pg",doh:"doh-latn-ng",doi:"doi-deva-in",dok:"dok-latn-id",dol:"dol-latn-pg",don:"don-latn-pg",doo:"doo-latn-cd",dop:"dop-latn-zz",dor:"dor-latn-sb",dos:"dos-latn-bf",dot:"dot-latn-ng",dov:"dov-latn-zw",dow:"dow-latn-zz",dox:"dox-ethi-et",doy:"doy-latn-gh",dpp:"dpp-latn-my",drc:"drc-latn-pt",dre:"dre-tibt-np",drg:"drg-latn-my",drh:"drh-mong-cn",dri:"dri-latn-zz",drl:"drl-latn-au",drn:"drn-latn-id",dro:"dro-latn-my",drq:"drq-deva-np",drs:"drs-ethi-zz",drt:"drt-latn-nl",dru:"dru-latn-tw",dry:"dry-deva-np",dsb:"dsb-latn-de",dsh:"dsh-latn-ke",dsi:"dsi-latn-td",dsn:"dsn-latn-id",dso:"dso-orya-in",dsq:"dsq-latn-ml","dsq-arab":"dsq-arab-ml",dta:"dta-latn-cn","dta-cyrl":"dta-cyrl-cn","dta-hans":"dta-hans-cn",dtb:"dtb-latn-my",dtd:"dtd-latn-ca",dth:"dth-latn-au",dti:"dti-latn-ml",dtk:"dtk-latn-ml",dtm:"dtm-latn-ml",dto:"dto-latn-ml",dtp:"dtp-latn-my",dtr:"dtr-latn-my",dts:"dts-latn-zz",dtt:"dtt-latn-ml",dtu:"dtu-latn-ml",dty:"dty-deva-np",dua:"dua-latn-cm",dub:"dub-gujr-in",duc:"duc-latn-zz",dud:"dud-latn-zz",due:"due-latn-ph",duf:"duf-latn-nc",dug:"dug-latn-zz",duh:"duh-deva-in","duh-gujr":"duh-gujr-in",dui:"dui-latn-pg",duk:"duk-latn-pg",dul:"dul-latn-ph",dum:"dum-latn-nl",dun:"dun-latn-id",duo:"duo-latn-ph",dup:"dup-latn-id",duq:"duq-latn-id",dur:"dur-latn-cm",dus:"dus-deva-np",duu:"duu-latn-cn",duv:"duv-latn-id",duw:"duw-latn-id",dux:"dux-latn-ml",duy:"duy-latn-ph",duz:"duz-latn-cm",dv:"dv-thaa-mv",dva:"dva-latn-zz",dwa:"dwa-latn-ng",dwk:"dwk-orya-in",dwr:"dwr-latn-et","dwr-ethi":"dwr-ethi-et",dws:"dws-latn-001",dwu:"dwu-latn-au",dww:"dww-latn-zz",dwy:"dwy-latn-au",dwz:"dwz-deva-np",dya:"dya-latn-bf",dyb:"dyb-latn-au",dyd:"dyd-latn-au",dyg:"dyg-latn-ph",dyi:"dyi-latn-ci",dym:"dym-latn-ml",dyn:"dyn-latn-au",dyo:"dyo-latn-sn",dyu:"dyu-latn-bf",dyy:"dyy-latn-au",dz:"dz-tibt-bt",dza:"dza-latn-ng",dze:"dze-latn-au",dzg:"dzg-latn-zz",dzl:"dzl-tibt-bt",dzn:"dzn-latn-cd",eaa:"eaa-latn-au",ebc:"ebc-latn-id",ebg:"ebg-latn-ng",ebk:"ebk-latn-ph",ebo:"ebo-latn-cg",ebr:"ebr-latn-ci",ebu:"ebu-latn-ke",ecr:"ecr-grek-gr",ecy:"ecy-cprt-cy",ee:"ee-latn-gh",efa:"efa-latn-ng",efe:"efe-latn-cd",efi:"efi-latn-ng",ega:"ega-latn-ci",egl:"egl-latn-it",egm:"egm-latn-tz",ego:"ego-latn-ng",egy:"egy-egyp-eg",ehu:"ehu-latn-ng",eip:"eip-latn-id",eit:"eit-latn-pg",eiv:"eiv-latn-pg",eja:"eja-latn-gw",eka:"eka-latn-zz",eke:"eke-latn-ng",ekg:"ekg-latn-id",eki:"eki-latn-ng",ekl:"ekl-latn-bd",ekm:"ekm-latn-cm",eko:"eko-latn-mz","eko-arab":"eko-arab-mz",ekp:"ekp-latn-ng",ekr:"ekr-latn-ng",eky:"eky-kali-mm",el:"el-grek-gr",ele:"ele-latn-pg",elk:"elk-latn-pg",elm:"elm-latn-ng",elo:"elo-latn-ke",elu:"elu-latn-pg",ema:"ema-latn-zz",emb:"emb-latn-id",eme:"eme-latn-gf",emg:"emg-deva-np",emi:"emi-latn-zz",emm:"emm-latn-mx",emn:"emn-latn-cm",emp:"emp-latn-pa",ems:"ems-latn-us","ems-cyrl":"ems-cyrl-us",emu:"emu-deva-in",emw:"emw-latn-id",emx:"emx-latn-fr",emz:"emz-latn-cm",en:"en-latn-us","en-shaw":"en-shaw-gb",ena:"ena-latn-pg",enb:"enb-latn-ke",enc:"enc-latn-vn",end:"end-latn-id",enf:"enf-cyrl-ru",enh:"enh-cyrl-ru",enl:"enl-latn-py",enm:"enm-latn-gb",enn:"enn-latn-zz",eno:"eno-latn-id",enq:"enq-latn-zz",enr:"enr-latn-id",env:"env-latn-ng",enw:"enw-latn-ng",enx:"enx-latn-py",eo:"eo-latn-001",eot:"eot-latn-ci",epi:"epi-latn-ng",era:"era-taml-in",erg:"erg-latn-vu",erh:"erh-latn-ng",eri:"eri-latn-zz",erk:"erk-latn-vu",err:"err-latn-au",ert:"ert-latn-id",erw:"erw-latn-id",es:"es-latn-es",ese:"ese-latn-bo",esg:"esg-gonm-in",esh:"esh-arab-ir",esi:"esi-latn-us",esm:"esm-latn-ci",ess:"ess-latn-us","ess-cyrl":"ess-cyrl-us",esu:"esu-latn-us",esy:"esy-latn-ph",et:"et-latn-ee",etb:"etb-latn-ng",etn:"etn-latn-vu",eto:"eto-latn-cm",etr:"etr-latn-zz",ets:"ets-latn-ng",ett:"ett-ital-it",etu:"etu-latn-zz",etx:"etx-latn-zz",etz:"etz-latn-id",eu:"eu-latn-es",eve:"eve-cyrl-ru",evh:"evh-latn-ng",evn:"evn-cyrl-ru","evn-latn":"evn-latn-cn","evn-mong":"evn-mong-cn",ewo:"ewo-latn-cm",ext:"ext-latn-es",eya:"eya-latn-us",eyo:"eyo-latn-ke",eza:"eza-latn-zz",eze:"eze-latn-ng",fa:"fa-arab-ir",faa:"faa-latn-zz",fab:"fab-latn-zz",fad:"fad-latn-pg",faf:"faf-latn-sb",fag:"fag-latn-zz",fah:"fah-latn-ng",fai:"fai-latn-zz",faj:"faj-latn-pg",fak:"fak-latn-cm",fal:"fal-latn-cm",fam:"fam-latn-ng",fan:"fan-latn-gq",fap:"fap-latn-sn",far:"far-latn-sb",fau:"fau-latn-id",fax:"fax-latn-es",fay:"fay-arab-ir",faz:"faz-arab-ir",fbl:"fbl-latn-ph",fer:"fer-latn-ss",ff:"ff-latn-sn","ff-adlm":"ff-adlm-gn",ffi:"ffi-latn-zz",ffm:"ffm-latn-ml",fgr:"fgr-latn-td",fi:"fi-latn-fi",fia:"fia-arab-sd",fie:"fie-latn-ng",fif:"fif-latn-sa",fil:"fil-latn-ph",fip:"fip-latn-tz",fir:"fir-latn-ng",fit:"fit-latn-se",fiw:"fiw-latn-pg",fj:"fj-latn-fj",fkk:"fkk-latn-ng",fkv:"fkv-latn-no",fla:"fla-latn-us",flh:"flh-latn-id",fli:"fli-latn-ng",fll:"fll-latn-cm",fln:"fln-latn-au",flr:"flr-latn-zz",fly:"fly-latn-za",fmp:"fmp-latn-zz",fmu:"fmu-deva-in",fnb:"fnb-latn-vu",fng:"fng-latn-za",fni:"fni-latn-td",fo:"fo-latn-fo",fod:"fod-latn-zz",foi:"foi-latn-pg",fom:"fom-latn-cd",fon:"fon-latn-bj",for:"for-latn-zz",fos:"fos-latn-tw",fpe:"fpe-latn-zz",fqs:"fqs-latn-zz",fr:"fr-latn-fr",frc:"frc-latn-us",frd:"frd-latn-id",frk:"frk-latn-de",frm:"frm-latn-fr",fro:"fro-latn-fr",frp:"frp-latn-fr",frq:"frq-latn-pg",frr:"frr-latn-de",frs:"frs-latn-de",frt:"frt-latn-vu",fub:"fub-arab-cm",fud:"fud-latn-wf",fue:"fue-latn-zz",fuf:"fuf-latn-gn",fuh:"fuh-latn-zz",fui:"fui-latn-td",fum:"fum-latn-ng",fun:"fun-latn-br",fuq:"fuq-latn-ne",fur:"fur-latn-it",fut:"fut-latn-vu",fuu:"fuu-latn-cd",fuv:"fuv-latn-ng",fuy:"fuy-latn-zz",fvr:"fvr-latn-sd",fwa:"fwa-latn-nc",fwe:"fwe-latn-na",fy:"fy-latn-nl",ga:"ga-latn-ie",gaa:"gaa-latn-gh",gab:"gab-latn-td",gac:"gac-latn-in","gac-deva":"gac-deva-in",gad:"gad-latn-ph",gae:"gae-latn-ve",gaf:"gaf-latn-zz",gag:"gag-latn-md",gah:"gah-latn-zz",gai:"gai-latn-pg",gaj:"gaj-latn-zz",gak:"gak-latn-id",gal:"gal-latn-tl",gam:"gam-latn-zz",gan:"gan-hans-cn",gao:"gao-latn-pg",gap:"gap-latn-pg",gaq:"gaq-orya-in",gar:"gar-latn-pg",gas:"gas-gujr-in",gat:"gat-latn-pg",gau:"gau-telu-in",gaw:"gaw-latn-zz",gax:"gax-latn-et","gax-ethi":"gax-ethi-et",gay:"gay-latn-id",gba:"gba-latn-zz",gbb:"gbb-latn-au",gbd:"gbd-latn-au",gbe:"gbe-latn-pg",gbf:"gbf-latn-zz",gbg:"gbg-latn-cf",gbh:"gbh-latn-bj",gbi:"gbi-latn-id",gbj:"gbj-orya-in",gbk:"gbk-deva-in","gbk-takr":"gbk-takr-in",gbl:"gbl-gujr-in","gbl-deva":"gbl-deva-in",gbm:"gbm-deva-in",gbn:"gbn-latn-ss",gbp:"gbp-latn-cf",gbq:"gbq-latn-cf",gbr:"gbr-latn-ng",gbs:"gbs-latn-bj",gbu:"gbu-latn-au",gbv:"gbv-latn-cf",gbw:"gbw-latn-au",gbx:"gbx-latn-bj",gby:"gby-latn-zz",gbz:"gbz-arab-ir",gcc:"gcc-latn-pg",gcd:"gcd-latn-au",gcf:"gcf-latn-gp",gcl:"gcl-latn-gd",gcn:"gcn-latn-pg",gcr:"gcr-latn-gf",gct:"gct-latn-ve",gd:"gd-latn-gb",gdb:"gdb-orya-in","gdb-telu":"gdb-telu-in",gdc:"gdc-latn-au",gdd:"gdd-latn-pg",gde:"gde-latn-zz",gdf:"gdf-latn-ng",gdg:"gdg-latn-ph",gdh:"gdh-latn-au",gdi:"gdi-latn-cf",gdj:"gdj-latn-au",gdk:"gdk-latn-td",gdl:"gdl-latn-et","gdl-ethi":"gdl-ethi-et",gdm:"gdm-latn-td",gdn:"gdn-latn-zz",gdo:"gdo-cyrl-ru",gdq:"gdq-latn-ye",gdr:"gdr-latn-zz",gdt:"gdt-latn-au",gdu:"gdu-latn-ng",gdx:"gdx-deva-in",gea:"gea-latn-ng",geb:"geb-latn-zz",gec:"gec-latn-lr",ged:"ged-latn-ng",gef:"gef-latn-id",geg:"geg-latn-ng",geh:"geh-latn-ca",gei:"gei-latn-id",gej:"gej-latn-zz",gek:"gek-latn-ng",gel:"gel-latn-zz",geq:"geq-latn-cf",ges:"ges-latn-id",gev:"gev-latn-ga",gew:"gew-latn-ng",gex:"gex-latn-so",gey:"gey-latn-cd",gez:"gez-ethi-et",gfk:"gfk-latn-zz",gga:"gga-latn-sb",ggb:"ggb-latn-lr",ggd:"ggd-latn-au",gge:"gge-latn-au",ggg:"ggg-arab-pk",ggk:"ggk-latn-au",ggl:"ggl-latn-pg",ggn:"ggn-deva-np",ggt:"ggt-latn-pg",ggu:"ggu-latn-ci",ggw:"ggw-latn-pg",gha:"gha-arab-ly","gha-latn":"gha-latn-ly","gha-tfng":"gha-tfng-ly",ghc:"ghc-latn-gb",ghe:"ghe-deva-np",ghk:"ghk-latn-mm",ghn:"ghn-latn-sb",ghr:"ghr-arab-pk",ghs:"ghs-latn-zz",ght:"ght-tibt-np",gia:"gia-latn-au",gib:"gib-latn-ng",gic:"gic-latn-za",gid:"gid-latn-cm",gie:"gie-latn-ci",gig:"gig-arab-pk",gih:"gih-latn-au",gil:"gil-latn-ki",gim:"gim-latn-zz",gin:"gin-cyrl-ru",gip:"gip-latn-pg",giq:"giq-latn-vn",gir:"gir-latn-vn",gis:"gis-latn-cm",git:"git-latn-ca",gix:"gix-latn-cd",giy:"giy-latn-au",giz:"giz-latn-cm",gjk:"gjk-arab-pk",gjm:"gjm-latn-au",gjn:"gjn-latn-zz",gjr:"gjr-latn-au",gju:"gju-arab-pk",gka:"gka-latn-pg",gkd:"gkd-latn-pg",gke:"gke-latn-cm",gkn:"gkn-latn-zz",gko:"gko-latn-au",gkp:"gkp-latn-zz",gku:"gku-latn-za",gl:"gl-latn-es",glb:"glb-latn-ng",glc:"glc-latn-td",gld:"gld-cyrl-ru",glh:"glh-arab-af",glj:"glj-latn-td",glk:"glk-arab-ir",gll:"gll-latn-au",glo:"glo-latn-ng",glr:"glr-latn-lr",glu:"glu-latn-td",glw:"glw-latn-ng",gma:"gma-latn-au",gmb:"gmb-latn-sb",gmd:"gmd-latn-ng",gmg:"gmg-latn-pg",gmh:"gmh-latn-de",gmm:"gmm-latn-zz",gmn:"gmn-latn-cm",gmr:"gmr-latn-au",gmu:"gmu-latn-pg",gmv:"gmv-ethi-zz",gmx:"gmx-latn-tz",gmy:"gmy-linb-gr",gmz:"gmz-latn-ng",gn:"gn-latn-py",gna:"gna-latn-bf",gnb:"gnb-latn-in",gnc:"gnc-latn-es",gnd:"gnd-latn-zz",gne:"gne-latn-ng",gng:"gng-latn-zz",gnh:"gnh-latn-ng",gni:"gni-latn-au",gnj:"gnj-latn-ci",gnk:"gnk-latn-bw",gnl:"gnl-latn-au",gnm:"gnm-latn-pg",gnn:"gnn-latn-au",gnq:"gnq-latn-my",gnr:"gnr-latn-au",gnt:"gnt-latn-pg",gnu:"gnu-latn-pg",gnw:"gnw-latn-bo",gnz:"gnz-latn-cf",goa:"goa-latn-ci",gob:"gob-latn-co",goc:"goc-latn-pg",god:"god-latn-zz",goe:"goe-tibt-bt",gof:"gof-ethi-zz",gog:"gog-latn-tz",goh:"goh-latn-de",goi:"goi-latn-zz",gok:"gok-deva-in",gol:"gol-latn-lr",gom:"gom-deva-in",gon:"gon-telu-in",goo:"goo-latn-fj",gop:"gop-latn-id",goq:"goq-latn-id",gor:"gor-latn-id",gos:"gos-latn-nl",got:"got-goth-ua",gou:"gou-latn-cm",gov:"gov-latn-ci",gow:"gow-latn-tz",gox:"gox-latn-cd",goy:"goy-latn-td",gpa:"gpa-latn-ng",gpe:"gpe-latn-gh",gpn:"gpn-latn-pg",gqa:"gqa-latn-ng",gqn:"gqn-latn-br",gqr:"gqr-latn-td",gra:"gra-deva-in","gra-gujr":"gra-gujr-in",grb:"grb-latn-zz",grc:"grc-cprt-cy","grc-linb":"grc-linb-gr",grd:"grd-latn-ng",grg:"grg-latn-pg",grh:"grh-latn-ng",gri:"gri-latn-sb",grj:"grj-latn-lr",grm:"grm-latn-my",grq:"grq-latn-pg",grs:"grs-latn-id",grt:"grt-beng-in",gru:"gru-ethi-et","gru-latn":"gru-latn-et",grv:"grv-latn-lr",grw:"grw-latn-zz",grx:"grx-latn-pg",gry:"gry-latn-lr",grz:"grz-latn-pg",gsl:"gsl-latn-sn",gsn:"gsn-latn-pg",gso:"gso-latn-cf",gsp:"gsp-latn-pg",gsw:"gsw-latn-ch",gta:"gta-latn-br",gtu:"gtu-latn-au",gu:"gu-gujr-in",gua:"gua-latn-ng",gub:"gub-latn-br",guc:"guc-latn-co",gud:"gud-latn-zz",gue:"gue-latn-au",guf:"guf-latn-au",guh:"guh-latn-co",gui:"gui-latn-bo",guk:"guk-latn-et","guk-ethi":"guk-ethi-et",gul:"gul-latn-us",gum:"gum-latn-co",gun:"gun-latn-br",guo:"guo-latn-co",gup:"gup-latn-au",guq:"guq-latn-py",gur:"gur-latn-gh",gut:"gut-latn-cr",guu:"guu-latn-ve",guw:"guw-latn-zz",gux:"gux-latn-zz",guz:"guz-latn-ke",gv:"gv-latn-im",gva:"gva-latn-py",gvc:"gvc-latn-br",gve:"gve-latn-pg",gvf:"gvf-latn-zz",gvj:"gvj-latn-br",gvl:"gvl-latn-td",gvm:"gvm-latn-ng",gvn:"gvn-latn-au",gvo:"gvo-latn-br",gvp:"gvp-latn-br",gvr:"gvr-deva-np",gvs:"gvs-latn-zz",gvy:"gvy-latn-au",gwa:"gwa-latn-ci",gwb:"gwb-latn-ng",gwc:"gwc-arab-zz",gwd:"gwd-latn-et",gwe:"gwe-latn-tz",gwf:"gwf-arab-pk",gwg:"gwg-latn-ng",gwi:"gwi-latn-ca",gwj:"gwj-latn-bw",gwm:"gwm-latn-au",gwn:"gwn-latn-ng",gwr:"gwr-latn-ug",gwt:"gwt-arab-zz",gwu:"gwu-latn-au",gww:"gww-latn-au",gwx:"gwx-latn-gh",gxx:"gxx-latn-ci",gyb:"gyb-latn-pg",gyd:"gyd-latn-au",gye:"gye-latn-ng",gyf:"gyf-latn-au",gyg:"gyg-latn-cf",gyi:"gyi-latn-zz",gyl:"gyl-latn-et","gyl-ethi":"gyl-ethi-et",gym:"gym-latn-pa",gyn:"gyn-latn-gy",gyo:"gyo-deva-np",gyr:"gyr-latn-bo",gyy:"gyy-latn-au",gyz:"gyz-latn-ng",gza:"gza-latn-sd",gzi:"gzi-arab-ir",gzn:"gzn-latn-id",ha:"ha-latn-ng","ha-cm":"ha-arab-cm","ha-sd":"ha-arab-sd",haa:"haa-latn-us",hac:"hac-arab-ir",had:"had-latn-id",hae:"hae-latn-et",hag:"hag-latn-zz",hah:"hah-latn-pg",hai:"hai-latn-ca",haj:"haj-latn-in","haj-beng":"haj-beng-in",hak:"hak-hans-cn",hal:"hal-latn-vn",ham:"ham-latn-zz",han:"han-latn-tz",hao:"hao-latn-pg",hap:"hap-latn-id",haq:"haq-latn-tz",har:"har-ethi-et","har-arab":"har-arab-et","har-latn":"har-latn-et",has:"has-latn-ca",hav:"hav-latn-cd",haw:"haw-latn-us",hax:"hax-latn-ca",hay:"hay-latn-tz",haz:"haz-arab-af",hba:"hba-latn-cd",hbb:"hbb-latn-zz",hbn:"hbn-latn-sd",hbo:"hbo-hebr-il",hbu:"hbu-latn-tl",hch:"hch-latn-mx",hdy:"hdy-ethi-zz",he:"he-hebr-il",hed:"hed-latn-td",heg:"heg-latn-id",heh:"heh-latn-tz",hei:"hei-latn-ca",hem:"hem-latn-cd",hgm:"hgm-latn-na",hgw:"hgw-latn-pg",hhi:"hhi-latn-pg",hhr:"hhr-latn-sn",hhy:"hhy-latn-zz",hi:"hi-deva-in","hi-latn":"hi-latn-in",hia:"hia-latn-zz",hib:"hib-latn-pe",hid:"hid-latn-us",hif:"hif-latn-fj",hig:"hig-latn-zz",hih:"hih-latn-zz",hii:"hii-takr-in","hii-deva":"hii-deva-in",hij:"hij-latn-cm",hik:"hik-latn-id",hil:"hil-latn-ph",hio:"hio-latn-bw",hir:"hir-latn-br",hit:"hit-xsux-tr",hiw:"hiw-latn-vu",hix:"hix-latn-br",hji:"hji-latn-id",hka:"hka-latn-tz",hke:"hke-latn-cd",hkh:"hkh-arab-in","hkh-deva":"hkh-deva-in","hkh-latn":"hkh-latn-in",hkk:"hkk-latn-pg",hla:"hla-latn-zz",hlb:"hlb-deva-in",hld:"hld-latn-vn",hlt:"hlt-latn-mm",hlu:"hlu-hluw-tr",hma:"hma-latn-cn",hmb:"hmb-latn-ml",hmd:"hmd-plrd-cn",hmf:"hmf-latn-vn",hmj:"hmj-bopo-cn",hmm:"hmm-latn-cn",hmn:"hmn-latn-cn","hmn-bopo":"hmn-bopo-cn","hmn-hmng":"hmn-hmng-cn",hmp:"hmp-latn-cn",hmq:"hmq-bopo-cn",hmr:"hmr-latn-in",hms:"hms-latn-cn",hmt:"hmt-latn-zz",hmu:"hmu-latn-id",hmv:"hmv-latn-vn",hmw:"hmw-latn-cn",hmy:"hmy-latn-cn",hmz:"hmz-latn-cn","hmz-plrd":"hmz-plrd-cn",hna:"hna-latn-cm",hnd:"hnd-arab-pk",hne:"hne-deva-in",hng:"hng-latn-ao",hnh:"hnh-latn-bw",hni:"hni-latn-cn",hnj:"hnj-hmnp-us","hnj-au":"hnj-laoo-au","hnj-cn":"hnj-laoo-cn","hnj-fr":"hnj-laoo-fr","hnj-gf":"hnj-laoo-gf","hnj-la":"hnj-laoo-la","hnj-laoo":"hnj-laoo-la","hnj-mm":"hnj-laoo-mm","hnj-sr":"hnj-laoo-sr","hnj-th":"hnj-laoo-th","hnj-us":"hnj-hmnp-us","hnj-vn":"hnj-laoo-vn",hnn:"hnn-latn-ph",hno:"hno-arab-pk",hns:"hns-latn-sr",ho:"ho-latn-pg",hoa:"hoa-latn-sb",hob:"hob-latn-pg",hoc:"hoc-deva-in",hod:"hod-latn-ng",hoe:"hoe-latn-ng",hoh:"hoh-arab-om",hoi:"hoi-latn-us",hoj:"hoj-deva-in",hol:"hol-latn-ao",hom:"hom-latn-ss",hoo:"hoo-latn-cd",hop:"hop-latn-us",hor:"hor-latn-td",hot:"hot-latn-zz",hov:"hov-latn-id",how:"how-hani-cn",hoy:"hoy-deva-in",hpo:"hpo-mymr-mm",hr:"hr-latn-hr",hra:"hra-latn-in",hrc:"hrc-latn-pg",hre:"hre-latn-vn",hrk:"hrk-latn-id",hrm:"hrm-latn-cn","hrm-hmng":"hrm-hmng-cn",hro:"hro-latn-vn",hrp:"hrp-latn-au",hrt:"hrt-syrc-tr",hru:"hru-latn-in",hrw:"hrw-latn-pg",hrx:"hrx-latn-br",hrz:"hrz-arab-ir",hsb:"hsb-latn-de",hsn:"hsn-hans-cn",hss:"hss-arab-om",ht:"ht-latn-ht",hti:"hti-latn-id",hto:"hto-latn-co",hts:"hts-latn-tz",htu:"htu-latn-id",htx:"htx-xsux-tr",hu:"hu-latn-hu",hub:"hub-latn-pe",huc:"huc-latn-bw",hud:"hud-latn-id",hue:"hue-latn-mx",huf:"huf-latn-pg",hug:"hug-latn-pe",huh:"huh-latn-cl",hui:"hui-latn-zz",huk:"huk-latn-id",hul:"hul-latn-pg",hum:"hum-latn-cd",hup:"hup-latn-us",hur:"hur-latn-ca",hus:"hus-latn-mx",hut:"hut-deva-np","hut-tibt":"hut-tibt-np",huu:"huu-latn-pe",huv:"huv-latn-mx",huw:"huw-latn-id",hux:"hux-latn-pe",huy:"huy-hebr-il",huz:"huz-cyrl-ru",hvc:"hvc-latn-ht",hve:"hve-latn-mx",hvk:"hvk-latn-nc",hvn:"hvn-latn-id",hvv:"hvv-latn-mx",hwa:"hwa-latn-ci",hwc:"hwc-latn-us",hwo:"hwo-latn-ng",hy:"hy-armn-am",hya:"hya-latn-cm",hyw:"hyw-armn-am",hz:"hz-latn-na",ia:"ia-latn-001",iai:"iai-latn-nc",ian:"ian-latn-zz",iar:"iar-latn-zz",iba:"iba-latn-my",ibb:"ibb-latn-ng",ibd:"ibd-latn-au",ibe:"ibe-latn-ng",ibg:"ibg-latn-ph",ibh:"ibh-latn-vn",ibl:"ibl-latn-ph",ibm:"ibm-latn-ng",ibn:"ibn-latn-ng",ibr:"ibr-latn-ng",ibu:"ibu-latn-id",iby:"iby-latn-zz",ica:"ica-latn-zz",ich:"ich-latn-zz",icr:"icr-latn-co",id:"id-latn-id",ida:"ida-latn-ke",idb:"idb-latn-in",idc:"idc-latn-ng",idd:"idd-latn-zz",ide:"ide-latn-ng",idi:"idi-latn-zz",idr:"idr-latn-ss",ids:"ids-latn-ng",idt:"idt-latn-tl",idu:"idu-latn-zz",ie:"ie-latn-001",ifa:"ifa-latn-ph",ifb:"ifb-latn-ph",ife:"ife-latn-tg",iff:"iff-latn-vu",ifk:"ifk-latn-ph",ifm:"ifm-latn-cg",ifu:"ifu-latn-ph",ify:"ify-latn-ph",ig:"ig-latn-ng",igb:"igb-latn-zz",ige:"ige-latn-zz",igg:"igg-latn-pg",igl:"igl-latn-ng",igm:"igm-latn-pg",ign:"ign-latn-bo",igo:"igo-latn-pg",igs:"igs-latn-001","igs-grek":"igs-grek-001",igw:"igw-latn-ng",ihb:"ihb-latn-id",ihi:"ihi-latn-ng",ihp:"ihp-latn-id",ihw:"ihw-latn-au",ii:"ii-yiii-cn",iin:"iin-latn-au",ijc:"ijc-latn-ng",ije:"ije-latn-ng",ijj:"ijj-latn-zz",ijn:"ijn-latn-ng",ijs:"ijs-latn-ng",ik:"ik-latn-us",iki:"iki-latn-ng",ikk:"ikk-latn-zz",ikl:"ikl-latn-ng",iko:"iko-latn-ng",ikp:"ikp-latn-ng",ikr:"ikr-latn-au",ikt:"ikt-latn-ca","ikt-cans":"ikt-cans-ca",ikv:"ikv-latn-ng",ikw:"ikw-latn-zz",ikx:"ikx-latn-zz",ikz:"ikz-latn-tz",ila:"ila-latn-id",ilb:"ilb-latn-zm",ilg:"ilg-latn-au",ili:"ili-latn-cn","ili-arab":"ili-arab-cn","ili-cyrl":"ili-cyrl-kz",ilk:"ilk-latn-ph",ilm:"ilm-latn-my",ilo:"ilo-latn-ph",ilp:"ilp-latn-ph",ilu:"ilu-latn-id",ilv:"ilv-latn-ng",imi:"imi-latn-pg",iml:"iml-latn-us",imn:"imn-latn-pg",imo:"imo-latn-zz",imr:"imr-latn-id",ims:"ims-latn-it",imt:"imt-latn-ss",imy:"imy-lyci-tr",in:"in-latn-id",inb:"inb-latn-co",ing:"ing-latn-us",inh:"inh-cyrl-ru",inj:"inj-latn-co",inn:"inn-latn-ph",ino:"ino-latn-pg",inp:"inp-latn-pe",int:"int-mymr-mm",io:"io-latn-001",ior:"ior-ethi-et",iou:"iou-latn-zz",iow:"iow-latn-us",ipi:"ipi-latn-pg",ipo:"ipo-latn-pg",iqu:"iqu-latn-pe",iqw:"iqw-latn-ng",ire:"ire-latn-id",irh:"irh-latn-id",iri:"iri-latn-zz",irk:"irk-latn-tz",irn:"irn-latn-br",iru:"iru-taml-in","iru-mlym":"iru-mlym-in",irx:"irx-latn-id",iry:"iry-latn-ph",is:"is-latn-is",isa:"isa-latn-pg",isc:"isc-latn-pe",isd:"isd-latn-ph",ish:"ish-latn-ng",isi:"isi-latn-ng",isk:"isk-arab-af","isk-cyrl":"isk-cyrl-tj",ism:"ism-latn-id",isn:"isn-latn-tz",iso:"iso-latn-ng",ist:"ist-latn-hr",isu:"isu-latn-cm",it:"it-latn-it",itb:"itb-latn-ph",itd:"itd-latn-id",ite:"ite-latn-bo",iti:"iti-latn-ph",itk:"itk-hebr-it",itl:"itl-cyrl-ru",itm:"itm-latn-ng",ito:"ito-latn-bo",itr:"itr-latn-pg",its:"its-latn-ng",itt:"itt-latn-ph",itv:"itv-latn-ph",itw:"itw-latn-ng",itx:"itx-latn-id",ity:"ity-latn-ph",itz:"itz-latn-gt",iu:"iu-cans-ca",ium:"ium-latn-cn","ium-hani":"ium-hani-cn","ium-laoo":"ium-laoo-la","ium-thai":"ium-thai-th",ivb:"ivb-latn-ph",ivv:"ivv-latn-ph",iw:"iw-hebr-il",iwk:"iwk-latn-ph",iwm:"iwm-latn-zz",iwo:"iwo-latn-id",iws:"iws-latn-zz",ixc:"ixc-latn-mx",ixl:"ixl-latn-gt",iya:"iya-latn-ng",iyo:"iyo-latn-cm",iyx:"iyx-latn-cg",izh:"izh-latn-ru",izi:"izi-latn-zz",izr:"izr-latn-ng",izz:"izz-latn-ng",ja:"ja-jpan-jp",jaa:"jaa-latn-br",jab:"jab-latn-zz",jac:"jac-latn-gt",jad:"jad-arab-gn",jae:"jae-latn-pg",jaf:"jaf-latn-ng",jah:"jah-latn-my",jaj:"jaj-latn-sb",jak:"jak-latn-my",jal:"jal-latn-id",jam:"jam-latn-jm",jan:"jan-latn-au",jao:"jao-latn-au",jaq:"jaq-latn-id",jar:"jar-latn-zz",jas:"jas-latn-nc",jat:"jat-arab-af",jau:"jau-latn-id",jax:"jax-latn-id",jay:"jay-latn-au",jaz:"jaz-latn-nc",jbe:"jbe-hebr-il",jbi:"jbi-latn-au",jbj:"jbj-latn-id",jbk:"jbk-latn-pg",jbm:"jbm-latn-ng",jbn:"jbn-arab-ly",jbo:"jbo-latn-001",jbr:"jbr-latn-id",jbt:"jbt-latn-br",jbu:"jbu-latn-zz",jbw:"jbw-latn-au",jct:"jct-cyrl-ua","jct-latn":"jct-latn-ua",jda:"jda-tibt-in",jdg:"jdg-arab-pk",jdt:"jdt-cyrl-ru","jdt-hebr":"jdt-hebr-ru","jdt-latn":"jdt-latn-az",jeb:"jeb-latn-pe",jee:"jee-deva-np",jeh:"jeh-latn-vn","jeh-laoo":"jeh-laoo-la",jei:"jei-latn-id",jek:"jek-latn-ci",jel:"jel-latn-id",jen:"jen-latn-zz",jer:"jer-latn-ng",jet:"jet-latn-pg",jeu:"jeu-latn-td",jgb:"jgb-latn-cd",jge:"jge-geor-ge","jge-hebr":"jge-hebr-il",jgk:"jgk-latn-zz",jgo:"jgo-latn-cm",jhi:"jhi-latn-my",ji:"ji-hebr-ua",jia:"jia-latn-cm",jib:"jib-latn-zz",jic:"jic-latn-hn",jid:"jid-latn-ng",jie:"jie-latn-ng",jig:"jig-latn-au",jil:"jil-latn-pg",jim:"jim-latn-cm",jit:"jit-latn-tz",jiu:"jiu-latn-cn",jiv:"jiv-latn-ec",jiy:"jiy-latn-cn",jje:"jje-hang-kr",jjr:"jjr-latn-ng",jka:"jka-latn-id",jkm:"jkm-mymr-mm","jkm-brai":"jkm-brai-mm","jkm-latn":"jkm-latn-mm",jko:"jko-latn-pg",jku:"jku-latn-ng",jle:"jle-latn-sd",jma:"jma-latn-pg",jmb:"jmb-latn-ng",jmc:"jmc-latn-tz",jmd:"jmd-latn-id",jmi:"jmi-latn-ng",jml:"jml-deva-np",jmn:"jmn-latn-mm",jmr:"jmr-latn-gh",jms:"jms-latn-ng",jmw:"jmw-latn-pg",jmx:"jmx-latn-mx",jna:"jna-takr-in",jnd:"jnd-arab-pk",jng:"jng-latn-au",jni:"jni-latn-ng",jnj:"jnj-latn-et","jnj-ethi":"jnj-ethi-et",jnl:"jnl-deva-in",jns:"jns-deva-in","jns-latn":"jns-latn-in","jns-takr":"jns-takr-in",job:"job-latn-cd",jod:"jod-latn-ci",jog:"jog-arab-pk",jor:"jor-latn-bo",jow:"jow-latn-ml",jpa:"jpa-hebr-ps",jpr:"jpr-hebr-il",jqr:"jqr-latn-pe",jra:"jra-latn-zz",jrr:"jrr-latn-ng",jrt:"jrt-latn-ng",jru:"jru-latn-ve",jua:"jua-latn-br",jub:"jub-latn-ng",jud:"jud-latn-ci",juh:"juh-latn-ng",jui:"jui-latn-au",juk:"juk-latn-ng",jul:"jul-deva-np",jum:"jum-latn-sd",jun:"jun-orya-in",juo:"juo-latn-ng",jup:"jup-latn-br",jur:"jur-latn-br",jut:"jut-latn-dk",juu:"juu-latn-ng",juw:"juw-latn-ng",juy:"juy-orya-in",jv:"jv-latn-id",jvd:"jvd-latn-id",jvn:"jvn-latn-sr",jw:"jw-latn-id",jwi:"jwi-latn-gh",jya:"jya-tibt-cn",jye:"jye-hebr-il",jyy:"jyy-latn-td",ka:"ka-geor-ge",kaa:"kaa-cyrl-uz",kab:"kab-latn-dz",kac:"kac-latn-mm",kad:"kad-latn-zz",kag:"kag-latn-my",kah:"kah-latn-cf",kai:"kai-latn-zz",kaj:"kaj-latn-ng",kak:"kak-latn-ph",kam:"kam-latn-ke",kao:"kao-latn-ml",kap:"kap-cyrl-ru",kaq:"kaq-latn-pe",kav:"kav-latn-br",kaw:"kaw-kawi-id",kax:"kax-latn-id",kay:"kay-latn-br",kba:"kba-latn-au",kbb:"kbb-latn-br",kbc:"kbc-latn-br",kbd:"kbd-cyrl-ru",kbe:"kbe-latn-au",kbh:"kbh-latn-co",kbi:"kbi-latn-id",kbj:"kbj-latn-cd",kbk:"kbk-latn-pg",kbl:"kbl-latn-td",kbm:"kbm-latn-zz",kbn:"kbn-latn-cf",kbo:"kbo-latn-ss",kbp:"kbp-latn-zz",kbq:"kbq-latn-zz",kbr:"kbr-latn-et","kbr-ethi":"kbr-ethi-et",kbs:"kbs-latn-ga",kbt:"kbt-latn-pg",kbu:"kbu-arab-pk",kbv:"kbv-latn-id",kbw:"kbw-latn-pg",kbx:"kbx-latn-zz",kby:"kby-arab-ne",kbz:"kbz-latn-ng",kca:"kca-cyrl-ru",kcb:"kcb-latn-pg",kcc:"kcc-latn-ng",kcd:"kcd-latn-id",kce:"kce-latn-ng",kcf:"kcf-latn-ng",kcg:"kcg-latn-ng",kch:"kch-latn-ng",kci:"kci-latn-ng",kcj:"kcj-latn-gw",kck:"kck-latn-zw",kcl:"kcl-latn-zz",kcm:"kcm-latn-cf",kcn:"kcn-latn-ug",kco:"kco-latn-pg",kcp:"kcp-latn-sd",kcq:"kcq-latn-ng",kcs:"kcs-latn-ng",kct:"kct-latn-zz",kcu:"kcu-latn-tz",kcv:"kcv-latn-cd",kcw:"kcw-latn-cd",kcz:"kcz-latn-tz",kda:"kda-latn-au",kdc:"kdc-latn-tz",kdd:"kdd-latn-au",kde:"kde-latn-tz",kdf:"kdf-latn-pg",kdg:"kdg-latn-cd",kdh:"kdh-latn-tg",kdi:"kdi-latn-ug",kdj:"kdj-latn-ug",kdk:"kdk-latn-nc",kdl:"kdl-latn-zz",kdm:"kdm-latn-ng",kdn:"kdn-latn-zw",kdp:"kdp-latn-ng",kdq:"kdq-beng-in",kdr:"kdr-latn-lt","kdr-cyrl":"kdr-cyrl-ua",kdt:"kdt-thai-th",kdw:"kdw-latn-id",kdx:"kdx-latn-ng",kdy:"kdy-latn-id",kdz:"kdz-latn-cm",kea:"kea-latn-cv",keb:"keb-latn-ga",kec:"kec-latn-sd",ked:"ked-latn-tz",kee:"kee-latn-us",kef:"kef-latn-tg",keg:"keg-latn-sd",keh:"keh-latn-pg",kei:"kei-latn-id",kek:"kek-latn-gt",kel:"kel-latn-cd",kem:"kem-latn-tl",ken:"ken-latn-cm",keo:"keo-latn-ug",ker:"ker-latn-td",kes:"kes-latn-ng",ket:"ket-cyrl-ru",keu:"keu-latn-tg",kew:"kew-latn-pg",kex:"kex-deva-in","kex-gujr":"kex-gujr-in",key:"key-telu-in",kez:"kez-latn-zz",kfa:"kfa-knda-in",kfb:"kfb-deva-in",kfc:"kfc-telu-in",kfd:"kfd-knda-in",kfe:"kfe-taml-in",kff:"kff-latn-in","kff-deva":"kff-deva-in","kff-orya":"kff-orya-in","kff-telu":"kff-telu-in",kfh:"kfh-mlym-in",kfi:"kfi-taml-in","kfi-knda":"kfi-knda-in",kfk:"kfk-deva-in","kfk-takr":"kfk-takr-in",kfl:"kfl-latn-cm",kfm:"kfm-arab-ir",kfn:"kfn-latn-cm",kfo:"kfo-latn-ci",kfp:"kfp-deva-in",kfq:"kfq-deva-in",kfr:"kfr-deva-in",kfs:"kfs-deva-in",kfv:"kfv-latn-in",kfw:"kfw-latn-in",kfx:"kfx-deva-in","kfx-takr":"kfx-takr-in",kfy:"kfy-deva-in",kfz:"kfz-latn-bf",kg:"kg-latn-cd",kga:"kga-latn-ci",kgb:"kgb-latn-id",kge:"kge-latn-id",kgf:"kgf-latn-zz",kgj:"kgj-deva-np",kgk:"kgk-latn-br",kgl:"kgl-latn-au",kgm:"kgm-latn-br",kgo:"kgo-latn-sd",kgp:"kgp-latn-br",kgq:"kgq-latn-id",kgr:"kgr-latn-id",kgs:"kgs-latn-au",kgt:"kgt-latn-ng",kgu:"kgu-latn-pg",kgv:"kgv-latn-id",kgw:"kgw-latn-id",kgx:"kgx-latn-id",kgy:"kgy-deva-np",kha:"kha-latn-in",khb:"khb-talu-cn",khc:"khc-latn-id",khd:"khd-latn-id",khe:"khe-latn-id",khf:"khf-thai-la",khg:"khg-tibt-cn",khh:"khh-latn-id",khj:"khj-latn-ng",khl:"khl-latn-pg",khn:"khn-deva-in",khp:"khp-latn-id",khq:"khq-latn-ml",khr:"khr-latn-in","khr-deva":"khr-deva-in",khs:"khs-latn-zz",kht:"kht-mymr-in",khu:"khu-latn-ao",khv:"khv-cyrl-ru",khw:"khw-arab-pk",khx:"khx-latn-cd",khy:"khy-latn-cd",khz:"khz-latn-zz",ki:"ki-latn-ke",kia:"kia-latn-td",kib:"kib-latn-sd",kic:"kic-latn-us",kid:"kid-latn-cm",kie:"kie-latn-td",kif:"kif-deva-np",kig:"kig-latn-id",kih:"kih-latn-pg",kij:"kij-latn-zz",kil:"kil-latn-ng",kim:"kim-cyrl-ru",kio:"kio-latn-us",kip:"kip-deva-np",kiq:"kiq-latn-id",kis:"kis-latn-pg",kit:"kit-latn-pg",kiu:"kiu-latn-tr",kiv:"kiv-latn-tz",kiw:"kiw-latn-zz",kix:"kix-latn-in",kiy:"kiy-latn-id",kiz:"kiz-latn-tz",kj:"kj-latn-na",kja:"kja-latn-id",kjb:"kjb-latn-gt",kjc:"kjc-latn-id",kjd:"kjd-latn-zz",kje:"kje-latn-id",kjg:"kjg-laoo-la",kjh:"kjh-cyrl-ru",kji:"kji-latn-sb",kjj:"kjj-latn-az",kjk:"kjk-latn-id",kjl:"kjl-deva-np",kjm:"kjm-latn-vn",kjn:"kjn-latn-au",kjo:"kjo-deva-in",kjp:"kjp-mymr-mm","kjp-thai":"kjp-thai-th",kjq:"kjq-latn-us",kjr:"kjr-latn-id",kjs:"kjs-latn-zz",kjt:"kjt-thai-th",kju:"kju-latn-us",kjx:"kjx-latn-pg",kjy:"kjy-latn-zz",kk:"kk-cyrl-kz","kk-af":"kk-arab-af","kk-arab":"kk-arab-cn","kk-cn":"kk-arab-cn","kk-ir":"kk-arab-ir","kk-mn":"kk-arab-mn",kka:"kka-latn-ng",kkb:"kkb-latn-id",kkc:"kkc-latn-zz",kkd:"kkd-latn-ng",kke:"kke-latn-gn","kke-arab":"kke-arab-gn",kkf:"kkf-tibt-in",kkg:"kkg-latn-ph",kkh:"kkh-lana-mm",kki:"kki-latn-tz",kkj:"kkj-latn-cm",kkk:"kkk-latn-sb",kkl:"kkl-latn-id",kkm:"kkm-latn-ng",kko:"kko-latn-sd",kkp:"kkp-latn-au",kkq:"kkq-latn-cd",kkr:"kkr-latn-ng",kks:"kks-latn-ng",kkt:"kkt-deva-np",kku:"kku-latn-ng",kkv:"kkv-latn-id",kkw:"kkw-latn-cg",kkx:"kkx-latn-id",kky:"kky-latn-au",kkz:"kkz-latn-ca",kl:"kl-latn-gl",kla:"kla-latn-us",klb:"klb-latn-mx",klc:"klc-latn-cm",kld:"kld-latn-au",kle:"kle-deva-np",klf:"klf-latn-td",klg:"klg-latn-ph",klh:"klh-latn-pg",kli:"kli-latn-id",klj:"klj-arab-ir",klk:"klk-latn-ng",kll:"kll-latn-ph",klm:"klm-latn-pg",kln:"kln-latn-ke",klo:"klo-latn-ng",klp:"klp-latn-pg",klq:"klq-latn-zz",klr:"klr-deva-np",kls:"kls-latn-pk","kls-arab":"kls-arab-pk",klt:"klt-latn-zz",klu:"klu-latn-lr",klv:"klv-latn-vu",klw:"klw-latn-id",klx:"klx-latn-zz",kly:"kly-latn-id",klz:"klz-latn-id",km:"km-khmr-kh",kma:"kma-latn-gh",kmb:"kmb-latn-ao",kmc:"kmc-latn-cn","kmc-hani":"kmc-hani-cn",kmd:"kmd-latn-ph",kme:"kme-latn-cm",kmf:"kmf-latn-pg",kmg:"kmg-latn-pg",kmh:"kmh-latn-zz",kmi:"kmi-latn-ng",kmj:"kmj-deva-in",kmk:"kmk-latn-ph",kml:"kml-latn-ph",kmm:"kmm-latn-in",kmn:"kmn-latn-pg",kmo:"kmo-latn-zz",kmp:"kmp-latn-cm",kmq:"kmq-latn-et",kms:"kms-latn-zz",kmt:"kmt-latn-id",kmu:"kmu-latn-zz",kmv:"kmv-latn-br",kmw:"kmw-latn-zz",kmx:"kmx-latn-pg",kmy:"kmy-latn-ng",kmz:"kmz-arab-ir",kn:"kn-knda-in",kna:"kna-latn-ng",knb:"knb-latn-ph",knd:"knd-latn-id",kne:"kne-latn-ph",knf:"knf-latn-gw",kni:"kni-latn-ng",knj:"knj-latn-gt",knk:"knk-latn-sl","knk-arab":"knk-arab-sl",knl:"knl-latn-id",knm:"knm-latn-br",kno:"kno-latn-sl",knp:"knp-latn-zz",knq:"knq-latn-my",knr:"knr-latn-pg",kns:"kns-latn-my","kns-thai":"kns-thai-th",knt:"knt-latn-br",knu:"knu-latn-gn",knv:"knv-latn-pg",knw:"knw-latn-na",knx:"knx-latn-id",kny:"kny-latn-cd",knz:"knz-latn-bf",ko:"ko-kore-kr",koa:"koa-latn-pg",koc:"koc-latn-ng",kod:"kod-latn-id",koe:"koe-latn-ss",kof:"kof-latn-ng",kog:"kog-latn-co",koh:"koh-latn-cg",koi:"koi-cyrl-ru",kok:"kok-deva-in",kol:"kol-latn-zz",koo:"koo-latn-ug",kop:"kop-latn-pg",koq:"koq-latn-ga",kos:"kos-latn-fm",kot:"kot-latn-cm",kou:"kou-latn-td",kov:"kov-latn-ng",kow:"kow-latn-ng",koy:"koy-latn-us",koz:"koz-latn-zz",kpa:"kpa-latn-ng",kpc:"kpc-latn-co",kpd:"kpd-latn-id",kpe:"kpe-latn-lr",kpf:"kpf-latn-zz",kpg:"kpg-latn-fm",kph:"kph-latn-gh",kpi:"kpi-latn-id",kpj:"kpj-latn-br",kpk:"kpk-latn-ng",kpl:"kpl-latn-cd",kpm:"kpm-latn-vn",kpn:"kpn-latn-br",kpo:"kpo-latn-zz",kpq:"kpq-latn-id",kpr:"kpr-latn-zz",kps:"kps-latn-id",kpt:"kpt-cyrl-ru",kpu:"kpu-latn-id",kpw:"kpw-latn-pg",kpx:"kpx-latn-zz",kpy:"kpy-cyrl-ru",kpz:"kpz-latn-ug",kqa:"kqa-latn-pg",kqb:"kqb-latn-zz",kqc:"kqc-latn-pg",kqd:"kqd-syrc-iq",kqe:"kqe-latn-ph",kqf:"kqf-latn-zz",kqg:"kqg-latn-bf",kqh:"kqh-latn-tz",kqi:"kqi-latn-pg",kqj:"kqj-latn-pg",kqk:"kqk-latn-bj",kql:"kql-latn-pg",kqm:"kqm-latn-ci",kqn:"kqn-latn-zm",kqo:"kqo-latn-lr",kqp:"kqp-latn-td",kqq:"kqq-latn-br",kqr:"kqr-latn-my",kqs:"kqs-latn-zz",kqt:"kqt-latn-my",kqu:"kqu-latn-za",kqv:"kqv-latn-id",kqw:"kqw-latn-pg",kqx:"kqx-latn-cm",kqy:"kqy-ethi-zz",kqz:"kqz-latn-za",kr:"kr-latn-zz",kra:"kra-deva-np",krb:"krb-latn-us",krc:"krc-cyrl-ru",krd:"krd-latn-tl",kre:"kre-latn-br",krf:"krf-latn-vu",krh:"krh-latn-ng",kri:"kri-latn-sl",krj:"krj-latn-ph",krk:"krk-cyrl-ru",krl:"krl-latn-ru",krn:"krn-latn-lr",krp:"krp-latn-ng",krr:"krr-khmr-kh",krs:"krs-latn-zz",krt:"krt-latn-ne",kru:"kru-deva-in",krv:"krv-khmr-kh",krw:"krw-latn-lr",krx:"krx-latn-sn",kry:"kry-latn-az",krz:"krz-latn-id",ks:"ks-arab-in",ksa:"ksa-latn-ng",ksb:"ksb-latn-tz",ksc:"ksc-latn-ph",ksd:"ksd-latn-zz",kse:"kse-latn-pg",ksf:"ksf-latn-cm",ksg:"ksg-latn-sb",ksh:"ksh-latn-de",ksi:"ksi-latn-pg",ksj:"ksj-latn-zz",ksk:"ksk-latn-us",ksl:"ksl-latn-pg",ksm:"ksm-latn-ng",ksn:"ksn-latn-ph",kso:"kso-latn-ng",ksp:"ksp-latn-cf",ksq:"ksq-latn-ng",ksr:"ksr-latn-zz",kss:"kss-latn-lr",kst:"kst-latn-bf",ksu:"ksu-mymr-in",ksv:"ksv-latn-cd",ksw:"ksw-mymr-mm","ksw-latn":"ksw-latn-mm",ksx:"ksx-latn-id",ksz:"ksz-deva-in",kta:"kta-latn-vn",ktb:"ktb-ethi-zz",ktc:"ktc-latn-ng",ktd:"ktd-latn-au",ktf:"ktf-latn-cd",ktg:"ktg-latn-au",kth:"kth-latn-td",kti:"kti-latn-id",ktj:"ktj-latn-ci",ktk:"ktk-latn-pg",ktl:"ktl-arab-ir",ktm:"ktm-latn-zz",ktn:"ktn-latn-br",kto:"kto-latn-zz",ktp:"ktp-plrd-cn",ktq:"ktq-latn-ph",ktr:"ktr-latn-my",kts:"kts-latn-id",ktt:"ktt-latn-id",ktu:"ktu-latn-cd",ktv:"ktv-latn-vn",ktw:"ktw-latn-us",ktx:"ktx-latn-br",kty:"kty-latn-cd",ktz:"ktz-latn-na",ku:"ku-latn-tr","ku-arab":"ku-arab-iq","ku-lb":"ku-arab-lb","ku-yezi":"ku-yezi-ge",kub:"kub-latn-zz",kuc:"kuc-latn-id",kud:"kud-latn-zz",kue:"kue-latn-zz",kuf:"kuf-laoo-la",kug:"kug-latn-ng",kuh:"kuh-latn-ng",kui:"kui-latn-br",kuj:"kuj-latn-zz",kuk:"kuk-latn-id",kul:"kul-latn-ng",kum:"kum-cyrl-ru",kun:"kun-latn-zz",kuo:"kuo-latn-pg",kup:"kup-latn-zz",kuq:"kuq-latn-br",kus:"kus-latn-zz",kut:"kut-latn-ca",kuu:"kuu-latn-us",kuv:"kuv-latn-id",kuw:"kuw-latn-cf",kux:"kux-latn-au",kuy:"kuy-latn-au",kuz:"kuz-latn-cl",kv:"kv-cyrl-ru",kva:"kva-cyrl-ru",kvb:"kvb-latn-id",kvc:"kvc-latn-pg",kvd:"kvd-latn-id",kve:"kve-latn-my",kvf:"kvf-latn-td",kvg:"kvg-latn-zz",kvh:"kvh-latn-id",kvi:"kvi-latn-td",kvj:"kvj-latn-cm",kvl:"kvl-latn-mm",kvm:"kvm-latn-cm",kvn:"kvn-latn-co",kvo:"kvo-latn-id",kvp:"kvp-latn-id",kvq:"kvq-mymr-mm","kvq-latn":"kvq-latn-mm",kvr:"kvr-latn-id",kvt:"kvt-mymr-mm",kvv:"kvv-latn-id",kvw:"kvw-latn-id",kvx:"kvx-arab-pk",kvy:"kvy-kali-mm",kvz:"kvz-latn-id",kw:"kw-latn-gb",kwa:"kwa-latn-br",kwb:"kwb-latn-ng",kwc:"kwc-latn-cg",kwd:"kwd-latn-sb",kwe:"kwe-latn-id",kwf:"kwf-latn-sb",kwg:"kwg-latn-td",kwh:"kwh-latn-id",kwi:"kwi-latn-co",kwj:"kwj-latn-zz",kwk:"kwk-latn-ca",kwl:"kwl-latn-ng",kwm:"kwm-latn-na",kwn:"kwn-latn-na",kwo:"kwo-latn-zz",kwp:"kwp-latn-ci",kwq:"kwq-latn-zz",kwr:"kwr-latn-id",kws:"kws-latn-cd",kwt:"kwt-latn-id",kwu:"kwu-latn-cm",kwv:"kwv-latn-td",kww:"kww-latn-sr",kwy:"kwy-latn-cd",kwz:"kwz-latn-ao",kxa:"kxa-latn-zz",kxb:"kxb-latn-ci",kxc:"kxc-ethi-zz",kxd:"kxd-latn-bn","kxd-arab":"kxd-arab-bn",kxe:"kxe-latn-zz",kxf:"kxf-mymr-mm","kxf-latn":"kxf-latn-mm",kxi:"kxi-latn-my",kxj:"kxj-latn-td",kxk:"kxk-mymr-mm",kxl:"kxl-deva-in",kxm:"kxm-thai-th",kxn:"kxn-latn-my",kxo:"kxo-latn-br",kxp:"kxp-arab-pk",kxq:"kxq-latn-id",kxr:"kxr-latn-pg",kxt:"kxt-latn-pg",kxv:"kxv-orya-in","kxv-latn":"kxv-latn-in","kxv-telu":"kxv-telu-in",kxw:"kxw-latn-zz",kxx:"kxx-latn-cg",kxy:"kxy-latn-vn",kxz:"kxz-latn-zz",ky:"ky-cyrl-kg","ky-arab":"ky-arab-cn","ky-cn":"ky-arab-cn","ky-latn":"ky-latn-tr","ky-tr":"ky-latn-tr",kya:"kya-latn-tz",kyb:"kyb-latn-ph",kyc:"kyc-latn-pg",kyd:"kyd-latn-id",kye:"kye-latn-zz",kyf:"kyf-latn-ci",kyg:"kyg-latn-pg",kyh:"kyh-latn-us",kyi:"kyi-latn-my",kyj:"kyj-latn-ph",kyk:"kyk-latn-ph",kyl:"kyl-latn-us",kym:"kym-latn-cf",kyn:"kyn-latn-ph",kyo:"kyo-latn-id",kyq:"kyq-latn-td",kyr:"kyr-latn-br",kys:"kys-latn-my",kyt:"kyt-latn-id",kyu:"kyu-kali-mm","kyu-latn":"kyu-latn-mm","kyu-mymr":"kyu-mymr-mm",kyv:"kyv-deva-np",kyw:"kyw-deva-in","kyw-beng":"kyw-beng-in","kyw-orya":"kyw-orya-in",kyx:"kyx-latn-zz",kyy:"kyy-latn-pg",kyz:"kyz-latn-br",kza:"kza-latn-bf",kzb:"kzb-latn-id",kzc:"kzc-latn-ci",kzd:"kzd-latn-id",kze:"kze-latn-pg",kzf:"kzf-latn-id",kzh:"kzh-arab-zz",kzi:"kzi-latn-my",kzj:"kzj-latn-my",kzk:"kzk-latn-sb",kzl:"kzl-latn-id",kzm:"kzm-latn-id",kzn:"kzn-latn-mw",kzo:"kzo-latn-ga",kzp:"kzp-latn-id",kzr:"kzr-latn-zz",kzs:"kzs-latn-my",kzt:"kzt-latn-my",kzu:"kzu-latn-id",kzv:"kzv-latn-id",kzw:"kzw-latn-br",kzx:"kzx-latn-id",kzy:"kzy-latn-cd",kzz:"kzz-latn-id",la:"la-latn-va",laa:"laa-latn-ph",lab:"lab-lina-gr",lac:"lac-latn-mx",lad:"lad-hebr-il",lae:"lae-deva-in","lae-tibt":"lae-tibt-in",lag:"lag-latn-tz",lah:"lah-arab-pk",lai:"lai-latn-mw",laj:"laj-latn-ug",lal:"lal-latn-cd",lam:"lam-latn-zm",lan:"lan-latn-ng",lap:"lap-latn-td",laq:"laq-latn-vn",lar:"lar-latn-gh",las:"las-latn-zz",lau:"lau-latn-id",law:"law-latn-id",lax:"lax-latn-in","lax-beng":"lax-beng-in",laz:"laz-latn-pg",lb:"lb-latn-lu",lbb:"lbb-latn-pg",lbc:"lbc-lisu-cn",lbe:"lbe-cyrl-ru",lbf:"lbf-deva-in","lbf-tibt":"lbf-tibt-cn",lbi:"lbi-latn-cm",lbj:"lbj-tibt-in","lbj-arab":"lbj-arab-in",lbl:"lbl-latn-ph",lbm:"lbm-deva-in",lbn:"lbn-latn-la","lbn-laoo":"lbn-laoo-la",lbo:"lbo-laoo-la","lbo-latn":"lbo-latn-us",lbq:"lbq-latn-pg",lbr:"lbr-deva-np",lbt:"lbt-latn-vn",lbu:"lbu-latn-zz",lbv:"lbv-latn-pg",lbw:"lbw-latn-id",lbx:"lbx-latn-id",lby:"lby-latn-au",lbz:"lbz-latn-au",lcc:"lcc-latn-id",lcd:"lcd-latn-id",lce:"lce-latn-id",lcf:"lcf-latn-id",lch:"lch-latn-ao",lcl:"lcl-latn-id",lcm:"lcm-latn-zz",lcp:"lcp-thai-cn",lcq:"lcq-latn-id",lcs:"lcs-latn-id",lda:"lda-latn-ci",ldb:"ldb-latn-zz",ldd:"ldd-latn-ng",ldg:"ldg-latn-ng",ldh:"ldh-latn-ng",ldi:"ldi-latn-cg",ldj:"ldj-latn-ng",ldk:"ldk-latn-ng",ldl:"ldl-latn-ng",ldm:"ldm-latn-gn",ldn:"ldn-latn-001",ldo:"ldo-latn-ng",ldp:"ldp-latn-ng",ldq:"ldq-latn-ng",lea:"lea-latn-cd",leb:"leb-latn-zm",lec:"lec-latn-bo",led:"led-latn-zz",lee:"lee-latn-zz",lef:"lef-latn-gh",leh:"leh-latn-zm",lei:"lei-latn-pg",lej:"lej-latn-cd",lek:"lek-latn-pg",lel:"lel-latn-cd",lem:"lem-latn-zz",len:"len-latn-hn",leo:"leo-latn-cm",lep:"lep-lepc-in",leq:"leq-latn-zz",ler:"ler-latn-pg",les:"les-latn-cd",let:"let-latn-pg",leu:"leu-latn-zz",lev:"lev-latn-id",lew:"lew-latn-id",lex:"lex-latn-id",ley:"ley-latn-id",lez:"lez-cyrl-ru",lfa:"lfa-latn-cm",lfn:"lfn-latn-001","lfn-cyrl":"lfn-cyrl-001",lg:"lg-latn-ug",lga:"lga-latn-sb",lgb:"lgb-latn-sb",lgg:"lgg-latn-zz",lgh:"lgh-latn-vn",lgi:"lgi-latn-id",lgk:"lgk-latn-vu",lgl:"lgl-latn-sb",lgm:"lgm-latn-cd",lgn:"lgn-latn-et",lgo:"lgo-latn-ss",lgq:"lgq-latn-gh",lgr:"lgr-latn-sb",lgt:"lgt-latn-pg",lgu:"lgu-latn-sb",lgz:"lgz-latn-cd",lha:"lha-latn-vn",lhh:"lhh-latn-id",lhi:"lhi-latn-cn",lhm:"lhm-deva-np",lhn:"lhn-latn-my",lhs:"lhs-syrc-sy",lht:"lht-latn-vu",lhu:"lhu-latn-cn",li:"li-latn-nl",lia:"lia-latn-zz",lib:"lib-latn-pg",lic:"lic-latn-cn",lid:"lid-latn-zz",lie:"lie-latn-cd",lif:"lif-deva-np","lif-limb":"lif-limb-in",lig:"lig-latn-zz",lih:"lih-latn-zz",lij:"lij-latn-it",lik:"lik-latn-cd",lil:"lil-latn-ca",lio:"lio-latn-id",lip:"lip-latn-gh",liq:"liq-latn-et",lir:"lir-latn-lr",lis:"lis-lisu-cn",liu:"liu-latn-sd",liv:"liv-latn-lv",liw:"liw-latn-id",lix:"lix-latn-id",liy:"liy-latn-cf",liz:"liz-latn-cd",lja:"lja-latn-au",lje:"lje-latn-id",lji:"lji-latn-id",ljl:"ljl-latn-id",ljp:"ljp-latn-id",ljw:"ljw-latn-au",ljx:"ljx-latn-au",lka:"lka-latn-tl",lkb:"lkb-latn-ke",lkc:"lkc-latn-vn",lkd:"lkd-latn-br",lke:"lke-latn-ug",lkh:"lkh-tibt-bt",lki:"lki-arab-ir",lkj:"lkj-latn-my",lkl:"lkl-latn-pg",lkm:"lkm-latn-au",lkn:"lkn-latn-vu",lko:"lko-latn-ke",lkr:"lkr-latn-ss",lks:"lks-latn-ke",lkt:"lkt-latn-us",lku:"lku-latn-au",lky:"lky-latn-ss",lla:"lla-latn-ng",llb:"llb-latn-mz",llc:"llc-latn-gn",lld:"lld-latn-it",lle:"lle-latn-zz",llf:"llf-latn-pg",llg:"llg-latn-id",lli:"lli-latn-cg",llj:"llj-latn-au",llk:"llk-latn-my",lll:"lll-latn-pg",llm:"llm-latn-id",lln:"lln-latn-zz",llp:"llp-latn-vu",llq:"llq-latn-id",llu:"llu-latn-sb",llx:"llx-latn-fj",lma:"lma-latn-gn",lmb:"lmb-latn-vu",lmc:"lmc-latn-au",lmd:"lmd-latn-sd",lme:"lme-latn-td",lmf:"lmf-latn-id",lmg:"lmg-latn-pg",lmh:"lmh-deva-np",lmi:"lmi-latn-cd",lmj:"lmj-latn-id",lmk:"lmk-latn-in","lmk-mymr":"lmk-mymr-in",lml:"lml-latn-vu",lmn:"lmn-telu-in",lmo:"lmo-latn-it",lmp:"lmp-latn-zz",lmq:"lmq-latn-id",lmr:"lmr-latn-id",lmu:"lmu-latn-vu",lmv:"lmv-latn-fj",lmw:"lmw-latn-us",lmx:"lmx-latn-cm",lmy:"lmy-latn-id",ln:"ln-latn-cd",lna:"lna-latn-cf",lnb:"lnb-latn-na",lnd:"lnd-latn-id",lnh:"lnh-latn-my",lni:"lni-latn-pg",lnj:"lnj-latn-au",lnl:"lnl-latn-cf",lnm:"lnm-latn-pg",lnn:"lnn-latn-vu",lns:"lns-latn-zz",lnu:"lnu-latn-zz",lnw:"lnw-latn-au",lnz:"lnz-latn-cd",lo:"lo-laoo-la",loa:"loa-latn-id",lob:"lob-latn-bf",loc:"loc-latn-ph",loe:"loe-latn-id",log:"log-latn-cd",loh:"loh-latn-ss",loi:"loi-latn-ci",loj:"loj-latn-zz",lok:"lok-latn-zz",lol:"lol-latn-cd",lom:"lom-latn-lr",lon:"lon-latn-mw",loo:"loo-latn-cd",lop:"lop-latn-ng",loq:"loq-latn-cd",lor:"lor-latn-zz",los:"los-latn-zz",lot:"lot-latn-ss","lot-arab":"lot-arab-ss",lou:"lou-latn-us",low:"low-latn-my",lox:"lox-latn-id",loy:"loy-deva-np","loy-tibt":"loy-tibt-np",loz:"loz-latn-zm",lpa:"lpa-latn-vu",lpe:"lpe-latn-id",lpn:"lpn-latn-mm",lpo:"lpo-plrd-cn","lpo-lisu":"lpo-lisu-cn",lpx:"lpx-latn-ss",lqr:"lqr-latn-ss",lra:"lra-latn-my",lrc:"lrc-arab-ir",lrg:"lrg-latn-au",lri:"lri-latn-ke",lrk:"lrk-arab-pk",lrl:"lrl-arab-ir",lrm:"lrm-latn-ke",lrn:"lrn-latn-id",lro:"lro-latn-sd",lrt:"lrt-latn-id",lrv:"lrv-latn-vu",lrz:"lrz-latn-vu",lsa:"lsa-arab-ir",lsd:"lsd-hebr-il",lse:"lse-latn-cd",lsi:"lsi-latn-mm",lsm:"lsm-latn-ug",lsr:"lsr-latn-pg",lss:"lss-arab-pk",lt:"lt-latn-lt",ltg:"ltg-latn-lv",lth:"lth-latn-ug",lti:"lti-latn-id",ltn:"ltn-latn-br",lto:"lto-latn-ke",lts:"lts-latn-ke",ltu:"ltu-latn-id",lu:"lu-latn-cd",lua:"lua-latn-cd",luc:"luc-latn-ug",lud:"lud-latn-ru",lue:"lue-latn-zm",luf:"luf-latn-pg",lui:"lui-latn-us",luj:"luj-latn-cd",luk:"luk-tibt-bt",lul:"lul-latn-ss",lum:"lum-latn-ao",lun:"lun-latn-zm",luo:"luo-latn-ke",lup:"lup-latn-ga",luq:"luq-latn-cu",lur:"lur-latn-id",lus:"lus-latn-in","lus-beng":"lus-beng-bd","lus-brai":"lus-brai-in",lut:"lut-latn-us",luu:"luu-deva-np",luv:"luv-arab-om",luw:"luw-latn-cm",luy:"luy-latn-ke",luz:"luz-arab-ir",lv:"lv-latn-lv",lva:"lva-latn-tl",lvi:"lvi-latn-la",lvk:"lvk-latn-sb",lvu:"lvu-latn-id",lwa:"lwa-latn-cd",lwe:"lwe-latn-id",lwg:"lwg-latn-ke",lwh:"lwh-latn-vn",lwl:"lwl-thai-th",lwm:"lwm-thai-cn",lwo:"lwo-latn-ss","lwo-za":"lwo-latn-za",lwt:"lwt-latn-id",lww:"lww-latn-vu",lxm:"lxm-latn-pg",lya:"lya-tibt-bt",lyn:"lyn-latn-zm",lzh:"lzh-hans-cn",lzl:"lzl-latn-vu",lzn:"lzn-latn-mm",lzz:"lzz-latn-tr",maa:"maa-latn-mx",mab:"mab-latn-mx",mad:"mad-latn-id",mae:"mae-latn-ng",maf:"maf-latn-cm",mag:"mag-deva-in",mai:"mai-deva-in",maj:"maj-latn-mx",mak:"mak-latn-id",mam:"mam-latn-gt",man:"man-latn-gm","man-gn":"man-nkoo-gn","man-nkoo":"man-nkoo-gn",maq:"maq-latn-mx",mas:"mas-latn-ke",mat:"mat-latn-mx",mau:"mau-latn-mx",mav:"mav-latn-br",maw:"maw-latn-zz",max:"max-latn-id",maz:"maz-latn-mx",mba:"mba-latn-ph",mbb:"mbb-latn-ph",mbc:"mbc-latn-br",mbd:"mbd-latn-ph",mbf:"mbf-latn-sg",mbh:"mbh-latn-zz",mbi:"mbi-latn-ph",mbj:"mbj-latn-br",mbk:"mbk-latn-pg",mbl:"mbl-latn-br",mbm:"mbm-latn-cg",mbn:"mbn-latn-co",mbo:"mbo-latn-zz",mbp:"mbp-latn-co",mbq:"mbq-latn-zz",mbr:"mbr-latn-co",mbs:"mbs-latn-ph",mbt:"mbt-latn-ph",mbu:"mbu-latn-zz",mbv:"mbv-latn-gn",mbw:"mbw-latn-zz",mbx:"mbx-latn-pg",mby:"mby-arab-pk",mbz:"mbz-latn-mx",mca:"mca-latn-py",mcb:"mcb-latn-pe",mcc:"mcc-latn-pg",mcd:"mcd-latn-pe",mce:"mce-latn-mx",mcf:"mcf-latn-pe",mcg:"mcg-latn-ve",mch:"mch-latn-ve",mci:"mci-latn-zz",mcj:"mcj-latn-ng",mck:"mck-latn-ao",mcl:"mcl-latn-co",mcm:"mcm-latn-my",mcn:"mcn-latn-td",mco:"mco-latn-mx",mcp:"mcp-latn-zz",mcq:"mcq-latn-zz",mcr:"mcr-latn-zz",mcs:"mcs-latn-cm",mct:"mct-latn-cm",mcu:"mcu-latn-zz",mcv:"mcv-latn-pg",mcw:"mcw-latn-td",mcx:"mcx-latn-cf",mcy:"mcy-latn-pg",mcz:"mcz-latn-pg",mda:"mda-latn-zz",mdb:"mdb-latn-pg",mdc:"mdc-latn-pg",mdd:"mdd-latn-cm",mde:"mde-arab-zz",mdf:"mdf-cyrl-ru",mdg:"mdg-latn-td",mdh:"mdh-latn-ph",mdi:"mdi-latn-cd",mdj:"mdj-latn-zz",mdk:"mdk-latn-cd",mdm:"mdm-latn-cd",mdn:"mdn-latn-cf",mdp:"mdp-latn-cd",mdq:"mdq-latn-cd",mdr:"mdr-latn-id",mds:"mds-latn-pg",mdt:"mdt-latn-cg",mdu:"mdu-latn-cg",mdv:"mdv-latn-mx",mdw:"mdw-latn-cg",mdx:"mdx-ethi-zz",mdy:"mdy-ethi-et","mdy-latn":"mdy-latn-et",mdz:"mdz-latn-br",mea:"mea-latn-cm",meb:"meb-latn-pg",mec:"mec-latn-au",med:"med-latn-zz",mee:"mee-latn-zz",meh:"meh-latn-mx",mej:"mej-latn-id",mek:"mek-latn-zz",mel:"mel-latn-my",mem:"mem-latn-au",men:"men-latn-sl",meo:"meo-latn-my","meo-arab":"meo-arab-my",mep:"mep-latn-au",meq:"meq-latn-cm",mer:"mer-latn-ke",mes:"mes-latn-td",met:"met-latn-zz",meu:"meu-latn-zz",mev:"mev-latn-lr",mew:"mew-latn-ng",mey:"mey-latn-mr","mey-arab":"mey-arab-mr",mez:"mez-latn-us",mfa:"mfa-arab-th",mfb:"mfb-latn-id",mfc:"mfc-latn-cd",mfd:"mfd-latn-cm",mfe:"mfe-latn-mu",mff:"mff-latn-cm",mfg:"mfg-latn-gn","mfg-arab":"mfg-arab-gn",mfh:"mfh-latn-cm",mfi:"mfi-arab-cm","mfi-latn":"mfi-latn-cm",mfj:"mfj-latn-cm",mfk:"mfk-latn-cm",mfl:"mfl-latn-ng",mfm:"mfm-latn-ng",mfn:"mfn-latn-zz",mfo:"mfo-latn-zz",mfp:"mfp-latn-id",mfq:"mfq-latn-zz",mfr:"mfr-latn-au",mft:"mft-latn-pg",mfu:"mfu-latn-ao",mfv:"mfv-latn-gw",mfw:"mfw-latn-pg",mfx:"mfx-latn-et","mfx-ethi":"mfx-ethi-et",mfy:"mfy-latn-mx",mfz:"mfz-latn-ss",mg:"mg-latn-mg",mgb:"mgb-latn-td",mgc:"mgc-latn-ss",mgd:"mgd-latn-ss","mgd-arab":"mgd-arab-ss",mge:"mge-latn-td",mgf:"mgf-latn-id",mgg:"mgg-latn-cm",mgh:"mgh-latn-mz",mgi:"mgi-latn-ng",mgj:"mgj-latn-ng",mgk:"mgk-latn-id",mgl:"mgl-latn-zz",mgm:"mgm-latn-tl",mgn:"mgn-latn-cf",mgo:"mgo-latn-cm",mgp:"mgp-deva-np",mgq:"mgq-latn-tz",mgr:"mgr-latn-zm",mgs:"mgs-latn-tz",mgt:"mgt-latn-pg",mgu:"mgu-latn-pg",mgv:"mgv-latn-tz",mgw:"mgw-latn-tz",mgy:"mgy-latn-tz",mgz:"mgz-latn-tz",mh:"mh-latn-mh",mhb:"mhb-latn-ga",mhc:"mhc-latn-mx",mhd:"mhd-latn-tz",mhe:"mhe-latn-my",mhf:"mhf-latn-pg",mhg:"mhg-latn-au",mhi:"mhi-latn-zz",mhj:"mhj-arab-af",mhk:"mhk-latn-cm",mhl:"mhl-latn-zz",mhm:"mhm-latn-mz",mhn:"mhn-latn-it",mho:"mho-latn-zm",mhp:"mhp-latn-id",mhq:"mhq-latn-us",mhs:"mhs-latn-id",mht:"mht-latn-ve",mhu:"mhu-latn-in",mhw:"mhw-latn-bw",mhx:"mhx-latn-mm",mhy:"mhy-latn-id",mhz:"mhz-latn-id",mi:"mi-latn-nz",mia:"mia-latn-us",mib:"mib-latn-mx",mic:"mic-latn-ca",mid:"mid-mand-iq",mie:"mie-latn-mx",mif:"mif-latn-zz",mig:"mig-latn-mx",mih:"mih-latn-mx",mii:"mii-latn-mx",mij:"mij-latn-cm",mik:"mik-latn-us",mil:"mil-latn-mx",mim:"mim-latn-mx",min:"min-latn-id",mio:"mio-latn-mx",mip:"mip-latn-mx",miq:"miq-latn-ni",mir:"mir-latn-mx",mit:"mit-latn-mx",miu:"miu-latn-mx",miw:"miw-latn-zz",mix:"mix-latn-mx",miy:"miy-latn-mx",miz:"miz-latn-mx",mjb:"mjb-latn-tl",mjc:"mjc-latn-mx",mjd:"mjd-latn-us",mje:"mje-latn-td",mjg:"mjg-latn-cn",mjh:"mjh-latn-tz",mji:"mji-latn-cn",mjj:"mjj-latn-pg",mjk:"mjk-latn-pg",mjl:"mjl-deva-in","mjl-takr":"mjl-takr-in",mjm:"mjm-latn-pg",mjn:"mjn-latn-pg",mjq:"mjq-mlym-in",mjr:"mjr-mlym-in",mjs:"mjs-latn-ng",mjt:"mjt-deva-in","mjt-beng":"mjt-beng-bd",mju:"mju-telu-in",mjv:"mjv-mlym-in",mjw:"mjw-latn-in",mjx:"mjx-latn-bd","mjx-beng":"mjx-beng-bd",mjy:"mjy-latn-us",mjz:"mjz-deva-np",mk:"mk-cyrl-mk",mka:"mka-latn-ci",mkb:"mkb-deva-in",mkc:"mkc-latn-pg",mke:"mke-deva-in",mkf:"mkf-latn-ng",mki:"mki-arab-zz",mkj:"mkj-latn-fm",mkk:"mkk-latn-cm",mkl:"mkl-latn-zz",mkm:"mkm-thai-th",mkn:"mkn-latn-id",mko:"mko-latn-ng",mkp:"mkp-latn-zz",mkr:"mkr-latn-pg",mks:"mks-latn-mx",mkt:"mkt-latn-nc",mku:"mku-latn-gn",mkv:"mkv-latn-vu",mkw:"mkw-latn-zz",mkx:"mkx-latn-ph",mky:"mky-latn-id",mkz:"mkz-latn-tl",ml:"ml-mlym-in",mla:"mla-latn-vu",mlb:"mlb-latn-cm",mlc:"mlc-latn-vn",mle:"mle-latn-zz",mlf:"mlf-thai-la","mlf-latn":"mlf-latn-la",mlh:"mlh-latn-pg",mli:"mli-latn-id",mlj:"mlj-latn-td",mlk:"mlk-latn-ke",mll:"mll-latn-vu",mln:"mln-latn-sb",mlo:"mlo-latn-sn",mlp:"mlp-latn-zz",mlq:"mlq-latn-sn","mlq-arab":"mlq-arab-sn",mlr:"mlr-latn-cm",mls:"mls-latn-sd",mlu:"mlu-latn-sb",mlv:"mlv-latn-vu",mlw:"mlw-latn-cm",mlx:"mlx-latn-vu",mlz:"mlz-latn-ph",mma:"mma-latn-ng",mmb:"mmb-latn-id",mmc:"mmc-latn-mx",mmd:"mmd-latn-cn","mmd-hans":"mmd-hans-cn","mmd-hant":"mmd-hant-cn",mme:"mme-latn-vu",mmf:"mmf-latn-ng",mmg:"mmg-latn-vu",mmh:"mmh-latn-br",mmi:"mmi-latn-pg",mmm:"mmm-latn-vu",mmn:"mmn-latn-ph",mmo:"mmo-latn-zz",mmp:"mmp-latn-pg",mmq:"mmq-latn-pg",mmr:"mmr-latn-cn",mmt:"mmt-latn-pg",mmu:"mmu-latn-zz",mmv:"mmv-latn-br",mmw:"mmw-latn-vu",mmx:"mmx-latn-zz",mmy:"mmy-latn-td",mmz:"mmz-latn-cd",mn:"mn-cyrl-mn","mn-cn":"mn-mong-cn","mn-mong":"mn-mong-cn",mna:"mna-latn-zz",mnb:"mnb-latn-id",mnd:"mnd-latn-br",mne:"mne-latn-td",mnf:"mnf-latn-zz",mng:"mng-latn-vn",mnh:"mnh-latn-cd",mni:"mni-beng-in",mnj:"mnj-arab-af",mnl:"mnl-latn-vu",mnm:"mnm-latn-pg",mnn:"mnn-latn-vn",mnp:"mnp-latn-cn",mnq:"mnq-latn-my",mnr:"mnr-latn-us",mns:"mns-cyrl-ru",mnu:"mnu-latn-id",mnv:"mnv-latn-sb",mnw:"mnw-mymr-mm",mnx:"mnx-latn-id",mny:"mny-latn-mz",mnz:"mnz-latn-id",mo:"mo-latn-ro",moa:"moa-latn-zz",moc:"moc-latn-ar",mod:"mod-latn-us",moe:"moe-latn-ca",mog:"mog-latn-id",moh:"moh-latn-ca",moi:"moi-latn-ng",moj:"moj-latn-cg",mok:"mok-latn-id",mom:"mom-latn-ni",moo:"moo-latn-vn",mop:"mop-latn-bz",moq:"moq-latn-id",mor:"mor-latn-sd",mos:"mos-latn-bf",mot:"mot-latn-co",mou:"mou-latn-td",mov:"mov-latn-us",mow:"mow-latn-cg",mox:"mox-latn-zz",moy:"moy-latn-et","moy-ethi":"moy-ethi-et",moz:"moz-latn-td",mpa:"mpa-latn-tz",mpb:"mpb-latn-au",mpc:"mpc-latn-au",mpd:"mpd-latn-br",mpe:"mpe-latn-et","mpe-ethi":"mpe-ethi-et",mpg:"mpg-latn-td",mph:"mph-latn-au",mpi:"mpi-latn-cm",mpj:"mpj-latn-au",mpk:"mpk-latn-td",mpl:"mpl-latn-pg",mpm:"mpm-latn-mx",mpn:"mpn-latn-pg",mpo:"mpo-latn-pg",mpp:"mpp-latn-zz",mpq:"mpq-latn-br",mpr:"mpr-latn-sb",mps:"mps-latn-zz",mpt:"mpt-latn-zz",mpu:"mpu-latn-br",mpv:"mpv-latn-pg",mpw:"mpw-latn-br",mpx:"mpx-latn-zz",mpy:"mpy-latn-id",mpz:"mpz-thai-th",mqa:"mqa-latn-id",mqb:"mqb-latn-cm",mqc:"mqc-latn-id",mqe:"mqe-latn-pg",mqf:"mqf-latn-id",mqg:"mqg-latn-id",mqh:"mqh-latn-mx",mqi:"mqi-latn-id",mqj:"mqj-latn-id",mqk:"mqk-latn-ph",mql:"mql-latn-zz",mqm:"mqm-latn-pf",mqn:"mqn-latn-id",mqo:"mqo-latn-id",mqp:"mqp-latn-id",mqq:"mqq-latn-my",mqr:"mqr-latn-id",mqs:"mqs-latn-id",mqu:"mqu-latn-ss",mqv:"mqv-latn-pg",mqw:"mqw-latn-pg",mqx:"mqx-latn-id","mqx-bugi":"mqx-bugi-id",mqy:"mqy-latn-id",mqz:"mqz-latn-pg",mr:"mr-deva-in",mra:"mra-thai-th",mrb:"mrb-latn-vu",mrc:"mrc-latn-us",mrd:"mrd-deva-np",mrf:"mrf-latn-id",mrg:"mrg-latn-in","mrg-beng":"mrg-beng-in","mrg-deva":"mrg-deva-in",mrh:"mrh-latn-in",mrj:"mrj-cyrl-ru",mrk:"mrk-latn-nc",mrl:"mrl-latn-fm",mrm:"mrm-latn-vu",mrn:"mrn-latn-sb",mro:"mro-mroo-bd",mrp:"mrp-latn-vu",mrq:"mrq-latn-pf",mrr:"mrr-deva-in",mrs:"mrs-latn-vu",mrt:"mrt-latn-ng",mru:"mru-latn-cm",mrv:"mrv-latn-pf",mrw:"mrw-latn-ph","mrw-arab":"mrw-arab-ph",mrx:"mrx-latn-id",mry:"mry-latn-ph",mrz:"mrz-latn-id",ms:"ms-latn-my","ms-cc":"ms-arab-cc",msb:"msb-latn-ph",msc:"msc-latn-gn",mse:"mse-latn-td",msf:"msf-latn-id",msg:"msg-latn-id",msh:"msh-latn-mg",msi:"msi-latn-my",msj:"msj-latn-cd",msk:"msk-latn-ph",msl:"msl-latn-id",msm:"msm-latn-ph",msn:"msn-latn-vu",mso:"mso-latn-id",msp:"msp-latn-br",msq:"msq-latn-nc",mss:"mss-latn-id",msu:"msu-latn-pg",msv:"msv-latn-cm",msw:"msw-latn-gw",msx:"msx-latn-pg",msy:"msy-latn-pg",msz:"msz-latn-pg",mt:"mt-latn-mt",mta:"mta-latn-ph",mtb:"mtb-latn-ci",mtc:"mtc-latn-zz",mtd:"mtd-latn-id",mte:"mte-latn-sb",mtf:"mtf-latn-zz",mtg:"mtg-latn-id",mth:"mth-latn-id",mti:"mti-latn-zz",mtj:"mtj-latn-id",mtk:"mtk-latn-cm",mtl:"mtl-latn-ng",mtm:"mtm-cyrl-ru",mtn:"mtn-latn-ni",mto:"mto-latn-mx",mtp:"mtp-latn-bo",mtq:"mtq-latn-vn",mtr:"mtr-deva-in",mts:"mts-latn-pe",mtt:"mtt-latn-vu",mtu:"mtu-latn-mx",mtv:"mtv-latn-pg",mtw:"mtw-latn-ph",mtx:"mtx-latn-mx",mty:"mty-latn-pg",mua:"mua-latn-cm",mub:"mub-latn-td",muc:"muc-latn-cm",mud:"mud-cyrl-ru",mue:"mue-latn-ec",mug:"mug-latn-cm",muh:"muh-latn-ss",mui:"mui-latn-id",muj:"muj-latn-td",muk:"muk-tibt-np",mum:"mum-latn-pg",muo:"muo-latn-cm",muq:"muq-latn-cn",mur:"mur-latn-zz",mus:"mus-latn-us",mut:"mut-deva-in",muu:"muu-latn-ke",muv:"muv-taml-in",mux:"mux-latn-pg",muy:"muy-latn-cm",muz:"muz-ethi-et","muz-latn":"muz-latn-et",mva:"mva-latn-zz",mvd:"mvd-latn-id",mvf:"mvf-mong-cn","mvf-phag":"mvf-phag-cn",mvg:"mvg-latn-mx",mvh:"mvh-latn-td",mvk:"mvk-latn-pg",mvl:"mvl-latn-au",mvn:"mvn-latn-zz",mvo:"mvo-latn-sb",mvp:"mvp-latn-id",mvq:"mvq-latn-pg",mvr:"mvr-latn-id",mvs:"mvs-latn-id",mvt:"mvt-latn-vu",mvu:"mvu-latn-td",mvv:"mvv-latn-my",mvw:"mvw-latn-tz",mvx:"mvx-latn-id",mvy:"mvy-arab-pk",mvz:"mvz-ethi-et","mvz-arab":"mvz-arab-et",mwa:"mwa-latn-pg",mwb:"mwb-latn-pg",mwc:"mwc-latn-pg",mwe:"mwe-latn-tz",mwf:"mwf-latn-au",mwg:"mwg-latn-pg",mwh:"mwh-latn-pg",mwi:"mwi-latn-vu",mwk:"mwk-latn-ml",mwl:"mwl-latn-pt",mwm:"mwm-latn-td",mwn:"mwn-latn-zm",mwo:"mwo-latn-vu",mwp:"mwp-latn-au",mwq:"mwq-latn-mm",mwr:"mwr-deva-in",mws:"mws-latn-ke",mwt:"mwt-mymr-mm","mwt-thai":"mwt-thai-th",mwu:"mwu-latn-ss",mwv:"mwv-latn-id",mww:"mww-hmnp-us",mwz:"mwz-latn-cd",mxa:"mxa-latn-mx",mxb:"mxb-latn-mx",mxc:"mxc-latn-zw",mxd:"mxd-latn-id",mxe:"mxe-latn-vu",mxf:"mxf-latn-cm",mxg:"mxg-latn-ao",mxh:"mxh-latn-cd",mxi:"mxi-latn-es",mxj:"mxj-latn-in",mxk:"mxk-latn-pg",mxl:"mxl-latn-bj",mxm:"mxm-latn-zz",mxn:"mxn-latn-id",mxo:"mxo-latn-zm",mxp:"mxp-latn-mx",mxq:"mxq-latn-mx",mxr:"mxr-latn-my",mxs:"mxs-latn-mx",mxt:"mxt-latn-mx",mxu:"mxu-latn-cm",mxv:"mxv-latn-mx",mxw:"mxw-latn-pg",mxx:"mxx-latn-ci",mxy:"mxy-latn-mx",mxz:"mxz-latn-id",my:"my-mymr-mm",myb:"myb-latn-td",myc:"myc-latn-cd",mye:"mye-latn-ga",myf:"myf-latn-et",myg:"myg-latn-cm",myh:"myh-latn-us",myj:"myj-latn-ss",myk:"myk-latn-zz",myl:"myl-latn-id",mym:"mym-ethi-zz",myp:"myp-latn-br",myr:"myr-latn-pe",myu:"myu-latn-br",myv:"myv-cyrl-ru",myw:"myw-latn-zz",myx:"myx-latn-ug",myy:"myy-latn-co",myz:"myz-mand-ir",mza:"mza-latn-mx",mzd:"mzd-latn-cm",mze:"mze-latn-pg",mzh:"mzh-latn-ar",mzi:"mzi-latn-mx",mzj:"mzj-latn-lr",mzk:"mzk-latn-zz",mzl:"mzl-latn-mx",mzm:"mzm-latn-zz",mzn:"mzn-arab-ir",mzo:"mzo-latn-br",mzp:"mzp-latn-zz",mzq:"mzq-latn-id",mzr:"mzr-latn-br",mzt:"mzt-latn-my",mzu:"mzu-latn-pg",mzv:"mzv-latn-cf",mzw:"mzw-latn-zz",mzx:"mzx-latn-gy",mzz:"mzz-latn-zz",na:"na-latn-nr",naa:"naa-latn-id",nab:"nab-latn-br",nac:"nac-latn-zz",nae:"nae-latn-id",naf:"naf-latn-zz",nag:"nag-latn-in",naj:"naj-latn-gn",nak:"nak-latn-zz",nal:"nal-latn-pg",nam:"nam-latn-au",nan:"nan-hans-cn",nao:"nao-deva-np",nap:"nap-latn-it",naq:"naq-latn-na",nar:"nar-latn-ng",nas:"nas-latn-zz",nat:"nat-latn-ng",naw:"naw-latn-gh",nax:"nax-latn-pg",nay:"nay-latn-au",naz:"naz-latn-mx",nb:"nb-latn-no",nba:"nba-latn-ao",nbb:"nbb-latn-ng",nbc:"nbc-latn-in",nbd:"nbd-latn-cd",nbe:"nbe-latn-in",nbh:"nbh-latn-ng",nbi:"nbi-latn-in",nbj:"nbj-latn-au",nbk:"nbk-latn-pg",nbm:"nbm-latn-cf",nbn:"nbn-latn-id",nbo:"nbo-latn-ng",nbp:"nbp-latn-ng",nbq:"nbq-latn-id",nbr:"nbr-latn-ng",nbt:"nbt-latn-in","nbt-deva":"nbt-deva-in",nbu:"nbu-latn-in",nbv:"nbv-latn-cm",nbw:"nbw-latn-cd",nby:"nby-latn-pg",nca:"nca-latn-zz",ncb:"ncb-latn-in","ncb-deva":"ncb-deva-in",ncc:"ncc-latn-pg",ncd:"ncd-deva-np",nce:"nce-latn-zz",ncf:"ncf-latn-zz",ncg:"ncg-latn-ca",nch:"nch-latn-mx",nci:"nci-latn-mx",ncj:"ncj-latn-mx",nck:"nck-latn-au",ncl:"ncl-latn-mx",ncm:"ncm-latn-pg",ncn:"ncn-latn-pg",nco:"nco-latn-zz",ncq:"ncq-laoo-la","ncq-thai":"ncq-thai-la",ncr:"ncr-latn-cm",nct:"nct-latn-in","nct-beng":"nct-beng-in",ncu:"ncu-latn-zz",ncx:"ncx-latn-mx",ncz:"ncz-latn-us",nd:"nd-latn-zw",nda:"nda-latn-cg",ndb:"ndb-latn-cm",ndc:"ndc-latn-mz",ndd:"ndd-latn-ng",ndf:"ndf-cyrl-ru",ndg:"ndg-latn-tz",ndh:"ndh-latn-tz",ndi:"ndi-latn-ng",ndj:"ndj-latn-tz",ndk:"ndk-latn-cd",ndl:"ndl-latn-cd",ndm:"ndm-latn-td",ndn:"ndn-latn-cg",ndp:"ndp-latn-ug",ndq:"ndq-latn-ao",ndr:"ndr-latn-ng",nds:"nds-latn-de",ndt:"ndt-latn-cd",ndu:"ndu-latn-cm",ndv:"ndv-latn-sn",ndw:"ndw-latn-cd",ndx:"ndx-latn-id",ndy:"ndy-latn-cf","ndy-td":"ndy-latn-td",ndz:"ndz-latn-ss",ne:"ne-deva-np",nea:"nea-latn-id",neb:"neb-latn-zz",nec:"nec-latn-id",ned:"ned-latn-ng",nee:"nee-latn-nc",neg:"neg-cyrl-ru",neh:"neh-tibt-bt",nei:"nei-xsux-tr",nej:"nej-latn-pg",nek:"nek-latn-nc",nem:"nem-latn-nc",nen:"nen-latn-nc",neo:"neo-latn-vn",neq:"neq-latn-mx",ner:"ner-latn-id",net:"net-latn-pg",neu:"neu-latn-001",new:"new-deva-np",nex:"nex-latn-zz",ney:"ney-latn-ci",nez:"nez-latn-us",nfa:"nfa-latn-id",nfd:"nfd-latn-ng",nfl:"nfl-latn-sb",nfr:"nfr-latn-zz",nfu:"nfu-latn-cm",ng:"ng-latn-na",nga:"nga-latn-zz",ngb:"ngb-latn-zz",ngc:"ngc-latn-cd",ngd:"ngd-latn-cf",nge:"nge-latn-cm",ngg:"ngg-latn-cf",ngh:"ngh-latn-za",ngi:"ngi-latn-ng",ngj:"ngj-latn-cm",ngk:"ngk-latn-au",ngl:"ngl-latn-mz",ngm:"ngm-latn-fm",ngn:"ngn-latn-cm",ngp:"ngp-latn-tz",ngq:"ngq-latn-tz",ngr:"ngr-latn-sb",ngs:"ngs-latn-ng",ngt:"ngt-laoo-la",ngu:"ngu-latn-mx",ngv:"ngv-latn-cm",ngw:"ngw-latn-ng",ngx:"ngx-latn-ng",ngy:"ngy-latn-cm",ngz:"ngz-latn-cg",nha:"nha-latn-au",nhb:"nhb-latn-zz",nhc:"nhc-latn-mx",nhd:"nhd-latn-py",nhe:"nhe-latn-mx",nhf:"nhf-latn-au",nhg:"nhg-latn-mx",nhi:"nhi-latn-mx",nhk:"nhk-latn-mx",nhm:"nhm-latn-mx",nhn:"nhn-latn-mx",nho:"nho-latn-pg",nhp:"nhp-latn-mx",nhq:"nhq-latn-mx",nhr:"nhr-latn-bw",nht:"nht-latn-mx",nhu:"nhu-latn-cm",nhv:"nhv-latn-mx",nhw:"nhw-latn-mx",nhx:"nhx-latn-mx",nhy:"nhy-latn-mx",nhz:"nhz-latn-mx",nia:"nia-latn-id",nib:"nib-latn-pg",nid:"nid-latn-au",nie:"nie-latn-td",nif:"nif-latn-zz",nig:"nig-latn-au",nih:"nih-latn-tz",nii:"nii-latn-zz",nij:"nij-latn-id",nil:"nil-latn-id",nim:"nim-latn-tz",nin:"nin-latn-zz",nio:"nio-cyrl-ru",niq:"niq-latn-ke",nir:"nir-latn-id",nis:"nis-latn-pg",nit:"nit-telu-in",niu:"niu-latn-nu",niv:"niv-cyrl-ru","niv-latn":"niv-latn-ru",niw:"niw-latn-pg",nix:"nix-latn-cd",niy:"niy-latn-zz",niz:"niz-latn-zz",nja:"nja-latn-ng",njb:"njb-latn-in",njd:"njd-latn-tz",njh:"njh-latn-in",nji:"nji-latn-au",njj:"njj-latn-cm",njl:"njl-latn-ss",njm:"njm-latn-in",njn:"njn-latn-in",njo:"njo-latn-in",njr:"njr-latn-ng",njs:"njs-latn-id",njt:"njt-latn-sr",nju:"nju-latn-au",njx:"njx-latn-cg",njy:"njy-latn-cm",njz:"njz-latn-in","njz-beng":"njz-beng-in",nka:"nka-latn-zm",nkb:"nkb-latn-in",nkc:"nkc-latn-cm",nkd:"nkd-latn-in",nke:"nke-latn-sb",nkf:"nkf-latn-in",nkg:"nkg-latn-zz",nkh:"nkh-latn-in",nki:"nki-latn-in","nki-beng":"nki-beng-in",nkj:"nkj-latn-id",nkk:"nkk-latn-vu",nkm:"nkm-latn-pg",nkn:"nkn-latn-ao",nko:"nko-latn-zz",nkq:"nkq-latn-gh",nkr:"nkr-latn-fm",nks:"nks-latn-id",nkt:"nkt-latn-tz",nku:"nku-latn-ci",nkv:"nkv-latn-mw",nkw:"nkw-latn-cd",nkx:"nkx-latn-ng",nkz:"nkz-latn-ng",nl:"nl-latn-nl",nla:"nla-latn-cm",nlc:"nlc-latn-id",nle:"nle-latn-ke",nlg:"nlg-latn-sb",nli:"nli-arab-af",nlj:"nlj-latn-cd",nlk:"nlk-latn-id",nlm:"nlm-arab-pk",nlo:"nlo-latn-cd",nlq:"nlq-latn-mm",nlu:"nlu-latn-gh",nlv:"nlv-latn-mx",nlw:"nlw-latn-au",nlx:"nlx-deva-in",nly:"nly-latn-au",nlz:"nlz-latn-sb",nma:"nma-latn-in",nmb:"nmb-latn-vu",nmc:"nmc-latn-td",nmd:"nmd-latn-ga",nme:"nme-latn-in",nmf:"nmf-latn-in",nmg:"nmg-latn-cm",nmh:"nmh-latn-in",nmi:"nmi-latn-ng",nmj:"nmj-latn-cf",nmk:"nmk-latn-vu",nml:"nml-latn-cm",nmm:"nmm-deva-np","nmm-tibt":"nmm-tibt-np",nmn:"nmn-latn-bw",nmo:"nmo-latn-in","nmo-beng":"nmo-beng-in",nmp:"nmp-latn-au",nmq:"nmq-latn-zw",nmr:"nmr-latn-cm",nms:"nms-latn-vu",nmt:"nmt-latn-fm",nmu:"nmu-latn-us",nmv:"nmv-latn-au",nmw:"nmw-latn-pg",nmx:"nmx-latn-pg",nmz:"nmz-latn-zz",nn:"nn-latn-no",nna:"nna-latn-au",nnb:"nnb-latn-cd",nnc:"nnc-latn-td",nnd:"nnd-latn-vu",nne:"nne-latn-ao",nnf:"nnf-latn-zz",nng:"nng-latn-in","nng-beng":"nng-beng-in",nnh:"nnh-latn-cm",nni:"nni-latn-id",nnj:"nnj-latn-et",nnk:"nnk-latn-zz",nnl:"nnl-latn-in",nnm:"nnm-latn-zz",nnn:"nnn-latn-td",nnp:"nnp-wcho-in",nnq:"nnq-latn-tz",nnr:"nnr-latn-au",nnt:"nnt-latn-us",nnu:"nnu-latn-gh",nnv:"nnv-latn-au",nnw:"nnw-latn-bf",nny:"nny-latn-au",nnz:"nnz-latn-cm",no:"no-latn-no",noa:"noa-latn-co",noc:"noc-latn-pg",nod:"nod-lana-th",noe:"noe-deva-in",nof:"nof-latn-pg",nog:"nog-cyrl-ru",noh:"noh-latn-pg",noi:"noi-deva-in",noj:"noj-latn-co",nok:"nok-latn-us",nom:"nom-latn-pe",non:"non-runr-se",nop:"nop-latn-zz",noq:"noq-latn-cd",nos:"nos-yiii-cn",not:"not-latn-pe",nou:"nou-latn-zz",nov:"nov-latn-001",now:"now-latn-tz",noy:"noy-latn-td",npb:"npb-tibt-bt",npg:"npg-latn-mm",nph:"nph-latn-in",npl:"npl-latn-mx",npn:"npn-latn-pg",npo:"npo-latn-in",nps:"nps-latn-id",npu:"npu-latn-in",npx:"npx-latn-sb",npy:"npy-latn-id",nqg:"nqg-latn-bj",nqk:"nqk-latn-bj",nql:"nql-latn-ao",nqm:"nqm-latn-id",nqn:"nqn-latn-pg",nqo:"nqo-nkoo-gn",nqq:"nqq-latn-mm",nqt:"nqt-latn-ng",nqy:"nqy-latn-mm",nr:"nr-latn-za",nra:"nra-latn-ga",nrb:"nrb-latn-zz",nre:"nre-latn-in",nrf:"nrf-latn-je",nrg:"nrg-latn-vu",nri:"nri-latn-in",nrk:"nrk-latn-au",nrl:"nrl-latn-au",nrm:"nrm-latn-my",nrp:"nrp-latn-it",nru:"nru-latn-cn","nru-hans":"nru-hans-cn","nru-hant":"nru-hant-cn",nrx:"nrx-latn-au",nrz:"nrz-latn-pg",nsa:"nsa-latn-in",nsb:"nsb-latn-za",nsc:"nsc-latn-ng",nsd:"nsd-yiii-cn",nse:"nse-latn-zm",nsf:"nsf-yiii-cn",nsg:"nsg-latn-tz",nsh:"nsh-latn-cm",nsk:"nsk-cans-ca",nsm:"nsm-latn-in",nsn:"nsn-latn-zz",nso:"nso-latn-za",nsq:"nsq-latn-us",nss:"nss-latn-zz",nst:"nst-tnsa-in",nsu:"nsu-latn-mx",nsv:"nsv-yiii-cn",nsw:"nsw-latn-vu",nsx:"nsx-latn-ao",nsy:"nsy-latn-id",nsz:"nsz-latn-us",ntd:"ntd-latn-my",nte:"nte-latn-mz",ntg:"ntg-latn-au",nti:"nti-latn-bf",ntj:"ntj-latn-au",ntk:"ntk-latn-tz",ntm:"ntm-latn-zz",nto:"nto-latn-cd",ntp:"ntp-latn-mx",ntr:"ntr-latn-zz",ntu:"ntu-latn-sb",ntx:"ntx-latn-mm",nty:"nty-yiii-vn",ntz:"ntz-arab-ir",nua:"nua-latn-nc",nuc:"nuc-latn-br",nud:"nud-latn-pg",nue:"nue-latn-cd",nuf:"nuf-latn-cn",nug:"nug-latn-au",nuh:"nuh-latn-ng",nui:"nui-latn-zz",nuj:"nuj-latn-ug",nuk:"nuk-latn-ca",num:"num-latn-to",nun:"nun-latn-mm",nuo:"nuo-latn-vn",nup:"nup-latn-zz",nuq:"nuq-latn-pg",nur:"nur-latn-pg",nus:"nus-latn-ss",nut:"nut-latn-vn",nuu:"nuu-latn-cd",nuv:"nuv-latn-zz",nuw:"nuw-latn-fm",nux:"nux-latn-zz",nuy:"nuy-latn-au",nuz:"nuz-latn-mx",nv:"nv-latn-us",nvh:"nvh-latn-vu",nvm:"nvm-latn-pg",nvo:"nvo-latn-cm",nwb:"nwb-latn-zz",nwc:"nwc-newa-np","nwc-brah":"nwc-brah-np","nwc-deva":"nwc-deva-np","nwc-sidd":"nwc-sidd-np",nwe:"nwe-latn-cm",nwg:"nwg-latn-au",nwi:"nwi-latn-vu",nwm:"nwm-latn-ss",nwo:"nwo-latn-au",nwr:"nwr-latn-pg",nww:"nww-latn-tz",nwx:"nwx-deva-np",nxa:"nxa-latn-tl",nxd:"nxd-latn-cd",nxe:"nxe-latn-id",nxg:"nxg-latn-id",nxi:"nxi-latn-tz",nxl:"nxl-latn-id",nxn:"nxn-latn-au",nxo:"nxo-latn-ga",nxq:"nxq-latn-cn",nxr:"nxr-latn-zz",nxx:"nxx-latn-id",ny:"ny-latn-mw",nyb:"nyb-latn-gh",nyc:"nyc-latn-cd",nyd:"nyd-latn-ke",nye:"nye-latn-ao",nyf:"nyf-latn-ke",nyg:"nyg-latn-cd",nyh:"nyh-latn-au",nyi:"nyi-latn-sd",nyj:"nyj-latn-cd",nyk:"nyk-latn-ao",nyl:"nyl-thai-th",nym:"nym-latn-tz",nyn:"nyn-latn-ug",nyo:"nyo-latn-ug",nyp:"nyp-latn-ug",nyq:"nyq-arab-ir",nyr:"nyr-latn-mw",nys:"nys-latn-au",nyt:"nyt-latn-au",nyu:"nyu-latn-mz",nyv:"nyv-latn-au",nyx:"nyx-latn-au",nyy:"nyy-latn-tz",nza:"nza-latn-cm",nzb:"nzb-latn-ga",nzd:"nzd-latn-cd",nzi:"nzi-latn-gh",nzk:"nzk-latn-cf",nzm:"nzm-latn-in",nzu:"nzu-latn-cg",nzy:"nzy-latn-td",nzz:"nzz-latn-ml",oaa:"oaa-cyrl-ru",oac:"oac-cyrl-ru",oar:"oar-syrc-sy",oav:"oav-geor-ge",obi:"obi-latn-us",obk:"obk-latn-ph",obl:"obl-latn-cm",obm:"obm-phnx-jo",obo:"obo-latn-ph",obr:"obr-mymr-mm",obt:"obt-latn-fr",obu:"obu-latn-ng",oc:"oc-latn-fr",oca:"oca-latn-pe",oco:"oco-latn-gb",ocu:"ocu-latn-mx",oda:"oda-latn-ng",odk:"odk-arab-pk",odt:"odt-latn-nl",odu:"odu-latn-ng",ofu:"ofu-latn-ng",ogb:"ogb-latn-ng",ogc:"ogc-latn-zz",ogg:"ogg-latn-ng",ogo:"ogo-latn-ng",ogu:"ogu-latn-ng",oht:"oht-xsux-tr",oia:"oia-latn-id",oie:"oie-latn-ss",oin:"oin-latn-pg",oj:"oj-cans-ca",ojb:"ojb-latn-ca","ojb-cans":"ojb-cans-ca",ojc:"ojc-latn-ca",ojs:"ojs-cans-ca",ojv:"ojv-latn-sb",ojw:"ojw-latn-ca","ojw-cans":"ojw-cans-ca",oka:"oka-latn-ca",okb:"okb-latn-ng",okc:"okc-latn-cd",okd:"okd-latn-ng",oke:"oke-latn-ng",okg:"okg-latn-au",oki:"oki-latn-ke",okk:"okk-latn-pg",okm:"okm-hang-kr",oko:"oko-hani-kr",okr:"okr-latn-zz",oks:"oks-latn-ng",oku:"oku-latn-cm",okv:"okv-latn-zz",okx:"okx-latn-ng",okz:"okz-khmr-kh",ola:"ola-deva-np","ola-tibt":"ola-tibt-cn",old:"old-latn-tz",ole:"ole-tibt-bt",olk:"olk-latn-au",olm:"olm-latn-ng",olo:"olo-latn-ru",olr:"olr-latn-vu",olt:"olt-latn-lt",olu:"olu-latn-ao",om:"om-latn-et",oma:"oma-latn-us",omb:"omb-latn-vu",omc:"omc-latn-pe",omg:"omg-latn-pe",omi:"omi-latn-cd",omk:"omk-cyrl-ru",oml:"oml-latn-cd",omo:"omo-latn-pg",omp:"omp-mtei-in",omr:"omr-modi-in",omt:"omt-latn-ke",omu:"omu-latn-pe",omw:"omw-latn-pg",ona:"ona-latn-ar",one:"one-latn-ca",ong:"ong-latn-zz",oni:"oni-latn-id",onj:"onj-latn-pg",onk:"onk-latn-pg",onn:"onn-latn-zz",ono:"ono-latn-ca",onp:"onp-latn-in","onp-deva":"onp-deva-in",onr:"onr-latn-pg",ons:"ons-latn-zz",ont:"ont-latn-pg",onu:"onu-latn-vu",onx:"onx-latn-id",ood:"ood-latn-us",oon:"oon-deva-in",oor:"oor-latn-za",opa:"opa-latn-ng",opk:"opk-latn-id",opm:"opm-latn-zz",opo:"opo-latn-pg",opt:"opt-latn-mx",opy:"opy-latn-br",or:"or-orya-in",ora:"ora-latn-sb",orc:"orc-latn-ke",ore:"ore-latn-pe",org:"org-latn-ng",orn:"orn-latn-my",oro:"oro-latn-zz",orr:"orr-latn-ng",ors:"ors-latn-my",ort:"ort-telu-in",oru:"oru-arab-zz",orv:"orv-cyrl-ru",orw:"orw-latn-br",orx:"orx-latn-ng",orz:"orz-latn-id",os:"os-cyrl-ge",osa:"osa-osge-us",osc:"osc-ital-it","osc-latn":"osc-latn-it",osi:"osi-java-id",oso:"oso-latn-ng",osp:"osp-latn-es",ost:"ost-latn-cm",osu:"osu-latn-pg",osx:"osx-latn-de",ota:"ota-arab-zz",otb:"otb-tibt-cn",otd:"otd-latn-id",ote:"ote-latn-mx",oti:"oti-latn-br",otk:"otk-orkh-mn",otl:"otl-latn-mx",otm:"otm-latn-mx",otn:"otn-latn-mx",otq:"otq-latn-mx",otr:"otr-latn-sd",ots:"ots-latn-mx",ott:"ott-latn-mx",otu:"otu-latn-br",otw:"otw-latn-ca",otx:"otx-latn-mx",oty:"oty-gran-in",otz:"otz-latn-mx",oub:"oub-latn-lr",oue:"oue-latn-pg",oui:"oui-ougr-143",oum:"oum-latn-pg",ovd:"ovd-latn-se",owi:"owi-latn-pg",owl:"owl-latn-gb",oyd:"oyd-latn-et",oym:"oym-latn-br",oyy:"oyy-latn-pg",ozm:"ozm-latn-zz",pa:"pa-guru-in","pa-arab":"pa-arab-pk","pa-pk":"pa-arab-pk",pab:"pab-latn-br",pac:"pac-latn-vn",pad:"pad-latn-br",pae:"pae-latn-cd",paf:"paf-latn-br",pag:"pag-latn-ph",pah:"pah-latn-br",pai:"pai-latn-ng",pak:"pak-latn-br",pal:"pal-phli-ir","pal-phlp":"pal-phlp-cn",pam:"pam-latn-ph",pao:"pao-latn-us",pap:"pap-latn-cw",paq:"paq-cyrl-tj",par:"par-latn-us",pas:"pas-latn-id",pau:"pau-latn-pw",pav:"pav-latn-br",paw:"paw-latn-us",pax:"pax-latn-br",pay:"pay-latn-hn",paz:"paz-latn-br",pbb:"pbb-latn-co",pbc:"pbc-latn-gy",pbe:"pbe-latn-mx",pbf:"pbf-latn-mx",pbg:"pbg-latn-ve",pbh:"pbh-latn-ve",pbi:"pbi-latn-zz",pbl:"pbl-latn-ng",pbm:"pbm-latn-mx",pbn:"pbn-latn-ng",pbo:"pbo-latn-gw",pbp:"pbp-latn-gn",pbr:"pbr-latn-tz",pbs:"pbs-latn-mx",pbt:"pbt-arab-af",pbv:"pbv-latn-in",pby:"pby-latn-pg",pca:"pca-latn-mx",pcb:"pcb-khmr-kh",pcc:"pcc-latn-cn","pcc-hani":"pcc-hani-cn",pcd:"pcd-latn-fr",pce:"pce-mymr-mm","pce-thai":"pce-thai-th",pcf:"pcf-mlym-in",pcg:"pcg-mlym-in","pcg-knda":"pcg-knda-in","pcg-taml":"pcg-taml-in",pch:"pch-deva-in",pci:"pci-deva-in","pci-orya":"pci-orya-in",pcj:"pcj-telu-in",pck:"pck-latn-in",pcm:"pcm-latn-ng",pcn:"pcn-latn-ng",pcp:"pcp-latn-bo",pcw:"pcw-latn-ng",pda:"pda-latn-pg",pdc:"pdc-latn-us",pdn:"pdn-latn-id",pdo:"pdo-latn-id",pdt:"pdt-latn-ca",pdu:"pdu-latn-mm","pdu-mymr":"pdu-mymr-mm",pea:"pea-latn-id",peb:"peb-latn-us",ped:"ped-latn-zz",pee:"pee-latn-id",peg:"peg-orya-in",pei:"pei-latn-mx",pek:"pek-latn-pg",pel:"pel-latn-id",pem:"pem-latn-cd",peo:"peo-xpeo-ir",pep:"pep-latn-pg",peq:"peq-latn-us",pev:"pev-latn-ve",pex:"pex-latn-zz",pey:"pey-latn-id",pez:"pez-latn-my",pfa:"pfa-latn-fm",pfe:"pfe-latn-cm",pfl:"pfl-latn-de",pga:"pga-latn-ss",pgd:"pgd-khar-pk",pgg:"pgg-deva-in",pgi:"pgi-latn-pg",pgk:"pgk-latn-vu",pgl:"pgl-ogam-ie",pgn:"pgn-ital-it",pgs:"pgs-latn-ng",pgu:"pgu-latn-id",phd:"phd-deva-in",phg:"phg-latn-vn",phh:"phh-latn-vn",phk:"phk-mymr-in",phl:"phl-arab-zz",phm:"phm-latn-mz",phn:"phn-phnx-lb",pho:"pho-laoo-la",phr:"phr-arab-pk",pht:"pht-thai-th",phv:"phv-arab-af",phw:"phw-deva-np",pi:"pi-sinh-in","pi-brah":"pi-brah-in","pi-deva":"pi-deva-in","pi-khar":"pi-khar-in","pi-khmr":"pi-khmr-in","pi-mymr":"pi-mymr-in","pi-thai":"pi-thai-in",pia:"pia-latn-mx",pib:"pib-latn-pe",pic:"pic-latn-ga",pid:"pid-latn-ve",pif:"pif-latn-fm",pig:"pig-latn-pe",pih:"pih-latn-nf",pij:"pij-latn-co",pil:"pil-latn-zz",pim:"pim-latn-us",pin:"pin-latn-pg",pio:"pio-latn-co",pip:"pip-latn-zz",pir:"pir-latn-br",pis:"pis-latn-sb",pit:"pit-latn-au",piu:"piu-latn-au",piv:"piv-latn-sb",piw:"piw-latn-tz",pix:"pix-latn-pg",piy:"piy-latn-ng",piz:"piz-latn-nc",pjt:"pjt-latn-au",pka:"pka-brah-in",pkb:"pkb-latn-ke",pkg:"pkg-latn-pg",pkh:"pkh-latn-bd","pkh-deva":"pkh-deva-bd",pkn:"pkn-latn-au",pko:"pko-latn-ke",pkp:"pkp-latn-ck",pkr:"pkr-mlym-in",pku:"pku-latn-id",pl:"pl-latn-pl",pla:"pla-latn-zz",plb:"plb-latn-vu",plc:"plc-latn-ph",pld:"pld-latn-gb",ple:"ple-latn-id",plg:"plg-latn-ar",plh:"plh-latn-id",plj:"plj-latn-ng",plk:"plk-arab-pk",pll:"pll-mymr-mm",pln:"pln-latn-co",plo:"plo-latn-mx",plr:"plr-latn-ci",pls:"pls-latn-mx",plu:"plu-latn-br",plv:"plv-latn-ph",plw:"plw-latn-ph",plz:"plz-latn-my",pma:"pma-latn-vu",pmb:"pmb-latn-cd",pmd:"pmd-latn-au",pme:"pme-latn-nc",pmf:"pmf-latn-id",pmh:"pmh-brah-in",pmi:"pmi-latn-cn",pmj:"pmj-latn-cn",pml:"pml-latn-tn",pmm:"pmm-latn-cm",pmn:"pmn-latn-cm",pmo:"pmo-latn-id",pmq:"pmq-latn-mx",pmr:"pmr-latn-pg",pms:"pms-latn-it",pmt:"pmt-latn-pf",pmw:"pmw-latn-us",pmx:"pmx-latn-in",pmy:"pmy-latn-id",pmz:"pmz-latn-mx",pna:"pna-latn-my",pnc:"pnc-latn-id",pnd:"pnd-latn-ao",pne:"pne-latn-my",png:"png-latn-zz",pnh:"pnh-latn-ck",pni:"pni-latn-id",pnj:"pnj-latn-au",pnk:"pnk-latn-bo",pnl:"pnl-latn-bf",pnm:"pnm-latn-my",pnn:"pnn-latn-zz",pno:"pno-latn-pe",pnp:"pnp-latn-id",pnq:"pnq-latn-bf",pnr:"pnr-latn-pg",pns:"pns-latn-id",pnt:"pnt-grek-gr",pnv:"pnv-latn-au",pnw:"pnw-latn-au",pny:"pny-latn-cm",pnz:"pnz-latn-cf",poc:"poc-latn-gt",poe:"poe-latn-mx",pof:"pof-latn-cd",pog:"pog-latn-br",poh:"poh-latn-gt",poi:"poi-latn-mx",pok:"pok-latn-br",pom:"pom-latn-us",pon:"pon-latn-fm",poo:"poo-latn-us",pop:"pop-latn-nc",poq:"poq-latn-mx",pos:"pos-latn-mx",pot:"pot-latn-us",pov:"pov-latn-gw",pow:"pow-latn-mx",poy:"poy-latn-tz",ppa:"ppa-deva-in",ppe:"ppe-latn-pg",ppi:"ppi-latn-mx",ppk:"ppk-latn-id",ppl:"ppl-latn-sv",ppm:"ppm-latn-id",ppn:"ppn-latn-pg",ppo:"ppo-latn-zz",ppp:"ppp-latn-cd",ppq:"ppq-latn-pg",pps:"pps-latn-mx",ppt:"ppt-latn-pg",pqa:"pqa-latn-ng",pqm:"pqm-latn-ca",pra:"pra-khar-pk",prc:"prc-arab-af",prd:"prd-arab-ir",pre:"pre-latn-st",prf:"prf-latn-ph",prg:"prg-latn-001",prh:"prh-latn-ph",pri:"pri-latn-nc",prk:"prk-latn-mm",prm:"prm-latn-pg",pro:"pro-latn-fr",prp:"prp-gujr-in",prq:"prq-latn-pe",prr:"prr-latn-br",prt:"prt-thai-th",pru:"pru-latn-id",prw:"prw-latn-pg",prx:"prx-arab-in","prx-tibt":"prx-tibt-in",ps:"ps-arab-af",psa:"psa-latn-id",pse:"pse-latn-id",psh:"psh-arab-af",psi:"psi-arab-af",psm:"psm-latn-bo",psn:"psn-latn-id",psq:"psq-latn-pg",pss:"pss-latn-zz",pst:"pst-arab-pk",psw:"psw-latn-vu",pt:"pt-latn-br",pta:"pta-latn-py",pth:"pth-latn-br",pti:"pti-latn-au",ptn:"ptn-latn-id",pto:"pto-latn-br",ptp:"ptp-latn-zz",ptr:"ptr-latn-vu",ptt:"ptt-latn-id",ptu:"ptu-latn-id",ptv:"ptv-latn-vu",pua:"pua-latn-mx",pub:"pub-latn-in",puc:"puc-latn-id",pud:"pud-latn-id",pue:"pue-latn-ar",puf:"puf-latn-id",pug:"pug-latn-bf",pui:"pui-latn-co",puj:"puj-latn-id",pum:"pum-deva-np",puo:"puo-latn-vn",pup:"pup-latn-pg",puq:"puq-latn-pe",pur:"pur-latn-br",put:"put-latn-id",puu:"puu-latn-ga",puw:"puw-latn-fm",pux:"pux-latn-pg",puy:"puy-latn-us",pwa:"pwa-latn-zz",pwb:"pwb-latn-ng",pwg:"pwg-latn-pg",pwm:"pwm-latn-ph",pwn:"pwn-latn-tw",pwo:"pwo-mymr-mm",pwr:"pwr-deva-in",pww:"pww-thai-th",pxm:"pxm-latn-mx",pye:"pye-latn-ci",pym:"pym-latn-ng",pyn:"pyn-latn-br",pyu:"pyu-latn-tw","pyu-hani":"pyu-hani-tw",pyx:"pyx-mymr-mm",pyy:"pyy-latn-mm",pzh:"pzh-latn-tw",pzn:"pzn-latn-mm",qu:"qu-latn-pe",qua:"qua-latn-us",qub:"qub-latn-pe",quc:"quc-latn-gt",qud:"qud-latn-ec",quf:"quf-latn-pe",qug:"qug-latn-ec",qui:"qui-latn-us",quk:"quk-latn-pe",qul:"qul-latn-bo",qum:"qum-latn-gt",qun:"qun-latn-us",qup:"qup-latn-pe",quq:"quq-latn-es",qur:"qur-latn-pe",qus:"qus-latn-ar",quv:"quv-latn-gt",quw:"quw-latn-ec",qux:"qux-latn-pe",quy:"quy-latn-pe",qva:"qva-latn-pe",qvc:"qvc-latn-pe",qve:"qve-latn-pe",qvh:"qvh-latn-pe",qvi:"qvi-latn-ec",qvj:"qvj-latn-ec",qvl:"qvl-latn-pe",qvm:"qvm-latn-pe",qvn:"qvn-latn-pe",qvo:"qvo-latn-pe",qvp:"qvp-latn-pe",qvs:"qvs-latn-pe",qvw:"qvw-latn-pe",qvz:"qvz-latn-ec",qwa:"qwa-latn-pe",qwc:"qwc-latn-pe",qwh:"qwh-latn-pe",qwm:"qwm-latn-ru","qwm-cyrl":"qwm-cyrl-ru","qwm-runr":"qwm-runr-ru",qws:"qws-latn-pe",qwt:"qwt-latn-us",qxa:"qxa-latn-pe",qxc:"qxc-latn-pe",qxh:"qxh-latn-pe",qxl:"qxl-latn-ec",qxn:"qxn-latn-pe",qxo:"qxo-latn-pe",qxp:"qxp-latn-pe",qxq:"qxq-arab-ir",qxr:"qxr-latn-ec",qxt:"qxt-latn-pe",qxu:"qxu-latn-pe",qxw:"qxw-latn-pe",qya:"qya-latn-001",qyp:"qyp-latn-us",raa:"raa-deva-np",rab:"rab-deva-np",rac:"rac-latn-id",rad:"rad-latn-vn",raf:"raf-deva-np",rag:"rag-latn-ke",rah:"rah-beng-in","rah-latn":"rah-latn-in",rai:"rai-latn-zz",raj:"raj-deva-in",rak:"rak-latn-pg",ram:"ram-latn-br",ran:"ran-latn-id",rao:"rao-latn-zz",rap:"rap-latn-cl",rar:"rar-latn-ck",rav:"rav-deva-np",raw:"raw-latn-mm",rax:"rax-latn-ng",ray:"ray-latn-pf",raz:"raz-latn-id",rbb:"rbb-mymr-mm",rbk:"rbk-latn-ph",rbl:"rbl-latn-ph",rbp:"rbp-latn-au",rcf:"rcf-latn-re",rdb:"rdb-arab-ir",rea:"rea-latn-pg",reb:"reb-latn-id",ree:"ree-latn-my",reg:"reg-latn-tz",rei:"rei-orya-in","rei-telu":"rei-telu-in",rej:"rej-latn-id",rel:"rel-latn-zz",rem:"rem-latn-pe",ren:"ren-latn-vn",res:"res-latn-zz",ret:"ret-latn-id",rey:"rey-latn-bo",rga:"rga-latn-vu",rgn:"rgn-latn-it",rgr:"rgr-latn-pe",rgs:"rgs-latn-vn",rgu:"rgu-latn-id",rhg:"rhg-rohg-mm",rhp:"rhp-latn-pg",ria:"ria-latn-in",rif:"rif-latn-ma",ril:"ril-latn-mm",rim:"rim-latn-tz",rin:"rin-latn-ng",rir:"rir-latn-id",rit:"rit-latn-au",riu:"riu-latn-id",rjg:"rjg-latn-id",rji:"rji-deva-np",rjs:"rjs-deva-np",rka:"rka-khmr-kh",rkb:"rkb-latn-br",rkh:"rkh-latn-ck",rki:"rki-mymr-mm",rkm:"rkm-latn-bf",rkt:"rkt-beng-bd",rkw:"rkw-latn-au",rm:"rm-latn-ch",rma:"rma-latn-ni",rmb:"rmb-latn-au",rmc:"rmc-latn-sk",rmd:"rmd-latn-dk",rme:"rme-latn-gb",rmf:"rmf-latn-fi",rmg:"rmg-latn-no",rmh:"rmh-latn-id",rmi:"rmi-armn-am",rmk:"rmk-latn-pg",rml:"rml-latn-pl","rml-cyrl":"rml-cyrl-by",rmm:"rmm-latn-id",rmn:"rmn-latn-rs","rmn-cyrl":"rmn-cyrl-bg","rmn-grek":"rmn-grek-gr",rmo:"rmo-latn-ch",rmp:"rmp-latn-pg",rmq:"rmq-latn-es",rmt:"rmt-arab-ir",rmu:"rmu-latn-se",rmw:"rmw-latn-gb",rmx:"rmx-latn-vn",rmz:"rmz-mymr-in",rn:"rn-latn-bi",rna:"rna-latn-zz",rnd:"rnd-latn-cd",rng:"rng-latn-mz",rnl:"rnl-latn-in",rnn:"rnn-latn-id",rnr:"rnr-latn-au",rnw:"rnw-latn-tz",ro:"ro-latn-ro",rob:"rob-latn-id",roc:"roc-latn-vn",rod:"rod-latn-ng",roe:"roe-latn-pg",rof:"rof-latn-tz",rog:"rog-latn-vn",rol:"rol-latn-ph",rom:"rom-latn-ro","rom-cyrl":"rom-cyrl-ro",roo:"roo-latn-zz",rop:"rop-latn-au",ror:"ror-latn-id",rou:"rou-latn-td",row:"row-latn-id",rpn:"rpn-latn-vu",rpt:"rpt-latn-pg",rri:"rri-latn-sb",rro:"rro-latn-zz",rrt:"rrt-latn-au",rsk:"rsk-cyrl-rs",rtc:"rtc-latn-mm",rth:"rth-latn-id",rtm:"rtm-latn-fj",rtw:"rtw-deva-in",ru:"ru-cyrl-ru",rub:"rub-latn-ug",ruc:"ruc-latn-ug",rue:"rue-cyrl-ua",ruf:"ruf-latn-tz",rug:"rug-latn-sb",rui:"rui-latn-tz",ruk:"ruk-latn-ng",ruo:"ruo-latn-hr",rup:"rup-latn-ro","rup-grek":"rup-grek-gr",ruq:"ruq-latn-gr",rut:"rut-cyrl-ru","rut-latn":"rut-latn-az",ruu:"ruu-latn-my",ruy:"ruy-latn-ng",ruz:"ruz-latn-ng",rw:"rw-latn-rw",rwa:"rwa-latn-pg",rwk:"rwk-latn-tz",rwl:"rwl-latn-tz",rwm:"rwm-latn-ug",rwo:"rwo-latn-zz",rwr:"rwr-deva-in",rxd:"rxd-latn-au",rxw:"rxw-latn-au",ryu:"ryu-kana-jp",sa:"sa-deva-in",saa:"saa-latn-td",sab:"sab-latn-pa",sac:"sac-latn-us",sad:"sad-latn-tz",sae:"sae-latn-br",saf:"saf-latn-gh",sah:"sah-cyrl-ru",saj:"saj-latn-id",sak:"sak-latn-ga",sam:"sam-samr-ps","sam-hebr":"sam-hebr-ps","sam-syrc":"sam-syrc-ps",sao:"sao-latn-id",saq:"saq-latn-ke",sar:"sar-latn-bo",sas:"sas-latn-id",sat:"sat-olck-in",sau:"sau-latn-id",sav:"sav-latn-sn",saw:"saw-latn-id",sax:"sax-latn-vu",say:"say-latn-ng",saz:"saz-saur-in",sba:"sba-latn-zz",sbb:"sbb-latn-sb",sbc:"sbc-latn-pg",sbd:"sbd-latn-bf",sbe:"sbe-latn-zz",sbg:"sbg-latn-id",sbh:"sbh-latn-pg",sbi:"sbi-latn-pg",sbj:"sbj-latn-td",sbk:"sbk-latn-tz",sbl:"sbl-latn-ph",sbm:"sbm-latn-tz",sbn:"sbn-arab-pk",sbo:"sbo-latn-my",sbp:"sbp-latn-tz",sbq:"sbq-latn-pg",sbr:"sbr-latn-id",sbs:"sbs-latn-na",sbt:"sbt-latn-id",sbu:"sbu-tibt-in","sbu-deva":"sbu-deva-in",sbv:"sbv-latn-it",sbw:"sbw-latn-ga",sbx:"sbx-latn-id",sby:"sby-latn-zm",sbz:"sbz-latn-cf",sc:"sc-latn-it",scb:"scb-latn-vn",sce:"sce-latn-cn","sce-arab":"sce-arab-cn",scf:"scf-latn-pa",scg:"scg-latn-id",sch:"sch-latn-in",sci:"sci-latn-lk",sck:"sck-deva-in",scl:"scl-arab-zz",scn:"scn-latn-it",sco:"sco-latn-gb",scp:"scp-deva-np",scs:"scs-latn-ca","scs-cans":"scs-cans-ca",sct:"sct-laoo-la",scu:"scu-takr-in",scv:"scv-latn-ng",scw:"scw-latn-ng",scx:"scx-grek-it",sd:"sd-arab-pk","sd-deva":"sd-deva-in","sd-in":"sd-deva-in","sd-khoj":"sd-khoj-in","sd-sind":"sd-sind-in",sda:"sda-latn-id",sdb:"sdb-arab-iq",sdc:"sdc-latn-it",sde:"sde-latn-ng",sdf:"sdf-arab-iq",sdg:"sdg-arab-af",sdh:"sdh-arab-ir",sdj:"sdj-latn-cg",sdk:"sdk-latn-pg",sdn:"sdn-latn-it",sdo:"sdo-latn-my",sdq:"sdq-latn-id",sds:"sds-arab-tn",sdu:"sdu-latn-id",sdx:"sdx-latn-my",se:"se-latn-no",sea:"sea-latn-my",seb:"seb-latn-ci",sec:"sec-latn-ca",sed:"sed-latn-vn",see:"see-latn-us",sef:"sef-latn-ci",seg:"seg-latn-tz",seh:"seh-latn-mz",sei:"sei-latn-mx",sej:"sej-latn-pg",sek:"sek-latn-ca","sek-cans":"sek-cans-ca",sel:"sel-cyrl-ru",sen:"sen-latn-bf",seo:"seo-latn-pg",sep:"sep-latn-bf",seq:"seq-latn-bf",ser:"ser-latn-us",ses:"ses-latn-ml",set:"set-latn-id",seu:"seu-latn-id",sev:"sev-latn-ci",sew:"sew-latn-pg",sey:"sey-latn-ec",sez:"sez-latn-mm",sfe:"sfe-latn-ph",sfm:"sfm-plrd-cn",sfw:"sfw-latn-gh",sg:"sg-latn-cf",sga:"sga-ogam-ie",sgb:"sgb-latn-ph",sgc:"sgc-latn-ke",sgd:"sgd-latn-ph",sge:"sge-latn-id",sgh:"sgh-cyrl-tj","sgh-arab":"sgh-arab-af","sgh-latn":"sgh-latn-tj",sgi:"sgi-latn-cm",sgj:"sgj-deva-in",sgm:"sgm-latn-ke",sgp:"sgp-latn-in",sgr:"sgr-arab-ir",sgs:"sgs-latn-lt",sgt:"sgt-tibt-bt",sgu:"sgu-latn-id",sgw:"sgw-ethi-zz",sgy:"sgy-arab-af",sgz:"sgz-latn-zz",sha:"sha-latn-ng",shb:"shb-latn-br",shc:"shc-latn-cd",shd:"shd-arab-pk",she:"she-latn-et",shg:"shg-latn-bw",shh:"shh-latn-us",shi:"shi-tfng-ma",shj:"shj-latn-sd",shk:"shk-latn-zz",shm:"shm-arab-ir",shn:"shn-mymr-mm",sho:"sho-latn-ng",shp:"shp-latn-pe",shq:"shq-latn-zm",shr:"shr-latn-cd",shs:"shs-latn-ca",sht:"sht-latn-us",shu:"shu-arab-zz",shv:"shv-arab-om",shw:"shw-latn-sd",shy:"shy-latn-dz","shy-arab":"shy-arab-dz","shy-tfng":"shy-tfng-dz",shz:"shz-latn-ml",si:"si-sinh-lk",sia:"sia-cyrl-ru",sib:"sib-latn-my",sid:"sid-latn-et",sie:"sie-latn-zm",sif:"sif-latn-bf",sig:"sig-latn-zz",sih:"sih-latn-nc",sii:"sii-latn-in",sij:"sij-latn-pg",sik:"sik-latn-br",sil:"sil-latn-zz",sim:"sim-latn-zz",sip:"sip-tibt-in",siq:"siq-latn-pg",sir:"sir-latn-ng",sis:"sis-latn-us",siu:"siu-latn-pg",siv:"siv-latn-pg",siw:"siw-latn-pg",six:"six-latn-pg",siy:"siy-arab-ir",siz:"siz-arab-eg",sja:"sja-latn-co",sjb:"sjb-latn-id",sjd:"sjd-cyrl-ru",sje:"sje-latn-se",sjg:"sjg-latn-td",sjl:"sjl-latn-in",sjm:"sjm-latn-ph",sjp:"sjp-deva-in","sjp-beng":"sjp-beng-in",sjr:"sjr-latn-zz",sjt:"sjt-cyrl-ru",sju:"sju-latn-se",sjw:"sjw-latn-us",sk:"sk-latn-sk",ska:"ska-latn-us",skb:"skb-thai-th",skc:"skc-latn-zz",skd:"skd-latn-us",ske:"ske-latn-vu",skf:"skf-latn-br",skg:"skg-latn-mg",skh:"skh-latn-id",ski:"ski-latn-id",skj:"skj-deva-np",skm:"skm-latn-pg",skn:"skn-latn-ph",sko:"sko-latn-id",skp:"skp-latn-my",skq:"skq-latn-bf",skr:"skr-arab-pk",sks:"sks-latn-zz",skt:"skt-latn-cd",sku:"sku-latn-vu",skv:"skv-latn-id",skw:"skw-latn-gy",skx:"skx-latn-id",sky:"sky-latn-sb",skz:"skz-latn-id",sl:"sl-latn-si",slc:"slc-latn-co",sld:"sld-latn-zz",slg:"slg-latn-id",slh:"slh-latn-us",sli:"sli-latn-pl",slj:"slj-latn-br",sll:"sll-latn-zz",slm:"slm-latn-ph",sln:"sln-latn-us",slp:"slp-latn-id",slq:"slq-arab-ir",slr:"slr-latn-cn",slu:"slu-latn-id",slw:"slw-latn-pg",slx:"slx-latn-cd",sly:"sly-latn-id",slz:"slz-latn-id",sm:"sm-latn-ws",sma:"sma-latn-se",smb:"smb-latn-pg",smc:"smc-latn-pg",smd:"smd-latn-ao",smf:"smf-latn-pg",smg:"smg-latn-pg",smh:"smh-yiii-cn",smj:"smj-latn-se",smk:"smk-latn-ph",sml:"sml-latn-ph",smn:"smn-latn-fi",smp:"smp-samr-il",smq:"smq-latn-zz",smr:"smr-latn-id",sms:"sms-latn-fi",smt:"smt-latn-in",smu:"smu-khmr-kh",smw:"smw-latn-id",smx:"smx-latn-cd",smy:"smy-arab-ir",smz:"smz-latn-pg",sn:"sn-latn-zw",snb:"snb-latn-my",snc:"snc-latn-zz",sne:"sne-latn-my",snf:"snf-latn-sn",sng:"sng-latn-cd","sng-brai":"sng-brai-cd",sni:"sni-latn-pe",snj:"snj-latn-cf",snk:"snk-latn-ml",snl:"snl-latn-ph",snm:"snm-latn-ug",snn:"snn-latn-co",sno:"sno-latn-us",snp:"snp-latn-zz",snq:"snq-latn-ga",snr:"snr-latn-pg",sns:"sns-latn-vu",snu:"snu-latn-id",snv:"snv-latn-my",snw:"snw-latn-gh",snx:"snx-latn-zz",sny:"sny-latn-zz",snz:"snz-latn-pg",so:"so-latn-so",soa:"soa-tavt-th","soa-thai":"soa-thai-th",sob:"sob-latn-id",soc:"soc-latn-cd",sod:"sod-latn-cd",soe:"soe-latn-cd",sog:"sog-sogd-uz",soi:"soi-deva-np",sok:"sok-latn-zz",sol:"sol-latn-pg",soo:"soo-latn-cd",sop:"sop-latn-cd",soq:"soq-latn-zz",sor:"sor-latn-td",sos:"sos-latn-bf",sou:"sou-thai-th",sov:"sov-latn-pw",sow:"sow-latn-pg",sox:"sox-latn-cm",soy:"soy-latn-zz",soz:"soz-latn-tz",spb:"spb-latn-id",spc:"spc-latn-ve",spd:"spd-latn-zz",spe:"spe-latn-pg",spg:"spg-latn-my",spi:"spi-latn-id",spk:"spk-latn-pg",spl:"spl-latn-zz",spm:"spm-latn-pg",spn:"spn-latn-py",spo:"spo-latn-us",spp:"spp-latn-ml",spq:"spq-latn-pe",spr:"spr-latn-id",sps:"sps-latn-zz",spt:"spt-tibt-in",spv:"spv-orya-in",sq:"sq-latn-al",sqa:"sqa-latn-ng",sqh:"sqh-latn-ng",sqm:"sqm-latn-cf",sqo:"sqo-arab-ir",sqq:"sqq-laoo-la",sqt:"sqt-arab-ye","sqt-latn":"sqt-latn-ye",squ:"squ-latn-ca",sr:"sr-cyrl-rs","sr-me":"sr-latn-me","sr-ro":"sr-latn-ro","sr-ru":"sr-latn-ru","sr-tr":"sr-latn-tr",sra:"sra-latn-pg",srb:"srb-sora-in",sre:"sre-latn-id",srf:"srf-latn-pg",srg:"srg-latn-ph",srh:"srh-arab-cn",sri:"sri-latn-co",srk:"srk-latn-my",srl:"srl-latn-id",srm:"srm-latn-sr",srn:"srn-latn-sr",sro:"sro-latn-it",srq:"srq-latn-bo",srr:"srr-latn-sn",srs:"srs-latn-ca",srt:"srt-latn-id",sru:"sru-latn-br",srv:"srv-latn-ph",srw:"srw-latn-id",srx:"srx-deva-in",sry:"sry-latn-pg",srz:"srz-arab-ir",ss:"ss-latn-za",ssb:"ssb-latn-ph",ssc:"ssc-latn-tz",ssd:"ssd-latn-zz",sse:"sse-latn-ph","sse-arab":"sse-arab-ph",ssf:"ssf-latn-tw",ssg:"ssg-latn-zz",ssh:"ssh-arab-ae",ssj:"ssj-latn-pg",ssl:"ssl-latn-gh",ssm:"ssm-latn-my",ssn:"ssn-latn-ke",sso:"sso-latn-pg",ssq:"ssq-latn-id",sss:"sss-laoo-la","sss-thai":"sss-thai-th",sst:"sst-latn-pg",ssu:"ssu-latn-pg",ssv:"ssv-latn-vu",ssx:"ssx-latn-pg",ssy:"ssy-latn-er",ssz:"ssz-latn-pg",st:"st-latn-za",sta:"sta-latn-zm",stb:"stb-latn-ph",ste:"ste-latn-id",stf:"stf-latn-pg",stg:"stg-latn-vn",sth:"sth-latn-ie",sti:"sti-latn-vn","sti-kh":"sti-latn-kh",stj:"stj-latn-bf",stk:"stk-latn-zz",stl:"stl-latn-nl",stm:"stm-latn-pg",stn:"stn-latn-sb",sto:"sto-latn-ca",stp:"stp-latn-mx",stq:"stq-latn-de",str:"str-latn-ca",sts:"sts-arab-af",stt:"stt-latn-vn",stv:"stv-ethi-et","stv-arab":"stv-arab-et",stw:"stw-latn-fm",sty:"sty-cyrl-ru",su:"su-latn-id",sua:"sua-latn-zz",sub:"sub-latn-cd",suc:"suc-latn-ph",sue:"sue-latn-zz",sug:"sug-latn-pg",sui:"sui-latn-pg",suj:"suj-latn-tz",suk:"suk-latn-tz",suo:"suo-latn-pg",suq:"suq-latn-et","suq-ethi":"suq-ethi-et",sur:"sur-latn-zz",sus:"sus-latn-gn",sut:"sut-latn-ni",suv:"suv-latn-in","suv-beng":"suv-beng-in","suv-deva":"suv-deva-in",suw:"suw-latn-tz",suy:"suy-latn-br",suz:"suz-deva-np",sv:"sv-latn-se",sva:"sva-geor-ge","sva-cyrl":"sva-cyrl-ge","sva-latn":"sva-latn-ge",svb:"svb-latn-pg",svc:"svc-latn-vc",sve:"sve-latn-id",svm:"svm-latn-it",svs:"svs-latn-sb",sw:"sw-latn-tz",swb:"swb-arab-yt",swc:"swc-latn-cd",swf:"swf-latn-cd",swg:"swg-latn-de",swi:"swi-hani-cn",swj:"swj-latn-ga",swk:"swk-latn-mw",swm:"swm-latn-pg",swo:"swo-latn-br",swp:"swp-latn-zz",swq:"swq-latn-cm",swr:"swr-latn-id",sws:"sws-latn-id",swt:"swt-latn-id",swu:"swu-latn-id",swv:"swv-deva-in",sww:"sww-latn-vu",swx:"swx-latn-br",swy:"swy-latn-td",sxb:"sxb-latn-ke",sxe:"sxe-latn-ga",sxn:"sxn-latn-id",sxr:"sxr-latn-tw",sxs:"sxs-latn-ng",sxu:"sxu-latn-de","sxu-runr":"sxu-runr-de",sxw:"sxw-latn-zz",sya:"sya-latn-id",syb:"syb-latn-ph",syc:"syc-syrc-tr",syi:"syi-latn-ga",syk:"syk-latn-ng",syl:"syl-beng-bd",sym:"sym-latn-bf",syn:"syn-syrc-ir",syo:"syo-latn-kh",syr:"syr-syrc-iq",sys:"sys-latn-td",syw:"syw-deva-np",syx:"syx-latn-ga",sza:"sza-latn-my",szb:"szb-latn-id",szc:"szc-latn-my",szd:"szd-latn-my",szg:"szg-latn-cd",szl:"szl-latn-pl",szn:"szn-latn-id",szp:"szp-latn-id",szv:"szv-latn-cm",szw:"szw-latn-id",szy:"szy-latn-tw",ta:"ta-taml-in",taa:"taa-latn-us",tab:"tab-cyrl-ru",tac:"tac-latn-mx",tad:"tad-latn-id",tae:"tae-latn-br",taf:"taf-latn-br",tag:"tag-latn-sd",taj:"taj-deva-np",tak:"tak-latn-ng",tal:"tal-latn-zz",tan:"tan-latn-zz",tao:"tao-latn-tw",tap:"tap-latn-cd",taq:"taq-latn-zz",tar:"tar-latn-mx",tas:"tas-latn-vn",tau:"tau-latn-us",tav:"tav-latn-co",taw:"taw-latn-pg",tax:"tax-latn-td",tay:"tay-latn-tw","tay-hans":"tay-hans-tw","tay-hant":"tay-hant-tw",taz:"taz-latn-sd",tba:"tba-latn-br",tbc:"tbc-latn-zz",tbd:"tbd-latn-zz",tbe:"tbe-latn-sb",tbf:"tbf-latn-zz",tbg:"tbg-latn-zz",tbh:"tbh-latn-au",tbi:"tbi-latn-sd",tbj:"tbj-latn-pg",tbk:"tbk-tagb-ph","tbk-hano":"tbk-hano-ph","tbk-latn":"tbk-latn-ph",tbl:"tbl-latn-ph",tbm:"tbm-latn-cd",tbn:"tbn-latn-co",tbo:"tbo-latn-zz",tbp:"tbp-latn-id",tbs:"tbs-latn-pg",tbt:"tbt-latn-cd",tbu:"tbu-latn-mx",tbv:"tbv-latn-pg",tbw:"tbw-latn-ph",tbx:"tbx-latn-pg",tby:"tby-latn-id",tbz:"tbz-latn-zz",tca:"tca-latn-br",tcb:"tcb-latn-us",tcc:"tcc-latn-tz",tcd:"tcd-latn-gh",tce:"tce-latn-ca",tcf:"tcf-latn-mx",tcg:"tcg-latn-id",tch:"tch-latn-tc",tci:"tci-latn-zz",tck:"tck-latn-ga",tcm:"tcm-latn-id",tcn:"tcn-tibt-np",tco:"tco-mymr-mm",tcp:"tcp-latn-mm",tcq:"tcq-latn-id",tcs:"tcs-latn-au",tcu:"tcu-latn-mx",tcw:"tcw-latn-mx",tcx:"tcx-taml-in",tcy:"tcy-knda-in",tcz:"tcz-latn-in",tda:"tda-tfng-ne","tda-arab":"tda-arab-ne","tda-latn":"tda-latn-ne",tdb:"tdb-deva-in","tdb-beng":"tdb-beng-in","tdb-kthi":"tdb-kthi-in",tdc:"tdc-latn-co",tdd:"tdd-tale-cn",tde:"tde-latn-ml",tdg:"tdg-deva-np",tdh:"tdh-deva-np",tdi:"tdi-latn-id",tdj:"tdj-latn-id",tdk:"tdk-latn-ng",tdl:"tdl-latn-ng",tdm:"tdm-latn-gy",tdn:"tdn-latn-id",tdo:"tdo-latn-ng",tdq:"tdq-latn-ng",tdr:"tdr-latn-vn",tds:"tds-latn-id",tdt:"tdt-latn-tl",tdu:"tdu-latn-my",tdv:"tdv-latn-ng",tdx:"tdx-latn-mg",tdy:"tdy-latn-ph",te:"te-telu-in",tea:"tea-latn-my",teb:"teb-latn-ec",tec:"tec-latn-ke",ted:"ted-latn-zz",tee:"tee-latn-mx",teg:"teg-latn-ga",teh:"teh-latn-ar",tei:"tei-latn-pg",tek:"tek-latn-cd",tem:"tem-latn-sl",ten:"ten-latn-co",teo:"teo-latn-ug",tep:"tep-latn-mx",teq:"teq-latn-sd",ter:"ter-latn-br",tes:"tes-java-id",tet:"tet-latn-tl",teu:"teu-latn-ug",tev:"tev-latn-id",tew:"tew-latn-us",tex:"tex-latn-ss",tey:"tey-latn-sd",tfi:"tfi-latn-zz",tfn:"tfn-latn-us",tfo:"tfo-latn-id",tfr:"tfr-latn-pa",tft:"tft-latn-id",tg:"tg-cyrl-tj","tg-arab":"tg-arab-pk","tg-pk":"tg-arab-pk",tga:"tga-latn-ke",tgb:"tgb-latn-my",tgc:"tgc-latn-zz",tgd:"tgd-latn-ng",tge:"tge-deva-np",tgf:"tgf-tibt-bt",tgh:"tgh-latn-tt",tgi:"tgi-latn-pg",tgj:"tgj-latn-in",tgn:"tgn-latn-ph",tgo:"tgo-latn-zz",tgp:"tgp-latn-vu",tgq:"tgq-latn-my",tgs:"tgs-latn-vu",tgt:"tgt-latn-ph","tgt-hano":"tgt-hano-ph","tgt-tagb":"tgt-tagb-ph",tgu:"tgu-latn-zz",tgv:"tgv-latn-br",tgw:"tgw-latn-ci",tgx:"tgx-latn-ca",tgy:"tgy-latn-ss",tgz:"tgz-latn-au",th:"th-thai-th",thd:"thd-latn-au",the:"the-deva-np",thf:"thf-deva-np",thh:"thh-latn-mx",thi:"thi-tale-la",thk:"thk-latn-ke",thl:"thl-deva-np",thm:"thm-thai-th",thp:"thp-latn-ca","thp-dupl":"thp-dupl-ca",thq:"thq-deva-np",thr:"thr-deva-np",ths:"ths-deva-np",tht:"tht-latn-ca",thu:"thu-latn-ss",thv:"thv-latn-dz","thv-arab":"thv-arab-dz","thv-tfng":"thv-tfng-dz",thy:"thy-latn-ng",thz:"thz-latn-ne","thz-tfng":"thz-tfng-ne",ti:"ti-ethi-et",tic:"tic-latn-sd",tif:"tif-latn-zz",tig:"tig-ethi-er",tih:"tih-latn-my",tii:"tii-latn-cd",tij:"tij-deva-np",tik:"tik-latn-zz",til:"til-latn-us",tim:"tim-latn-zz",tin:"tin-cyrl-ru",tio:"tio-latn-zz",tip:"tip-latn-id",tiq:"tiq-latn-bf",tis:"tis-latn-ph",tit:"tit-latn-co",tiu:"tiu-latn-ph",tiv:"tiv-latn-ng",tiw:"tiw-latn-au",tix:"tix-latn-us",tiy:"tiy-latn-ph",tja:"tja-latn-lr",tjg:"tjg-latn-id",tji:"tji-latn-cn",tjj:"tjj-latn-au",tjl:"tjl-mymr-mm",tjn:"tjn-latn-ci",tjo:"tjo-arab-dz",tjp:"tjp-latn-au",tjs:"tjs-latn-cn",tju:"tju-latn-au",tjw:"tjw-latn-au",tk:"tk-latn-tm",tka:"tka-latn-br",tkb:"tkb-deva-in",tkd:"tkd-latn-tl",tke:"tke-latn-mz",tkf:"tkf-latn-br",tkg:"tkg-latn-mg",tkl:"tkl-latn-tk",tkp:"tkp-latn-sb",tkq:"tkq-latn-ng",tkr:"tkr-latn-az",tks:"tks-arab-ir",tkt:"tkt-deva-np",tku:"tku-latn-mx",tkv:"tkv-latn-pg",tkw:"tkw-latn-sb",tkx:"tkx-latn-id",tkz:"tkz-latn-vn",tl:"tl-latn-ph",tla:"tla-latn-mx",tlb:"tlb-latn-id",tlc:"tlc-latn-mx",tld:"tld-latn-id",tlf:"tlf-latn-zz",tlg:"tlg-latn-id",tli:"tli-latn-us","tli-cyrl":"tli-cyrl-us",tlj:"tlj-latn-ug",tlk:"tlk-latn-id",tll:"tll-latn-cd",tlm:"tlm-latn-vu",tln:"tln-latn-id",tlp:"tlp-latn-mx",tlq:"tlq-latn-mm",tlr:"tlr-latn-sb",tls:"tls-latn-vu",tlt:"tlt-latn-id",tlu:"tlu-latn-id",tlv:"tlv-latn-id",tlx:"tlx-latn-zz",tly:"tly-latn-az",tma:"tma-latn-td",tmb:"tmb-latn-vu",tmc:"tmc-latn-td",tmd:"tmd-latn-pg",tme:"tme-latn-br",tmf:"tmf-latn-py",tmg:"tmg-latn-id",tmh:"tmh-latn-ne",tmi:"tmi-latn-vu",tmj:"tmj-latn-id",tmk:"tmk-deva-np",tml:"tml-latn-id",tmm:"tmm-latn-vn",tmn:"tmn-latn-id",tmo:"tmo-latn-my",tmq:"tmq-latn-pg",tmr:"tmr-syrc-il",tmt:"tmt-latn-vu",tmu:"tmu-latn-id",tmv:"tmv-latn-cd",tmw:"tmw-latn-my",tmy:"tmy-latn-zz",tmz:"tmz-latn-ve",tn:"tn-latn-za",tna:"tna-latn-bo",tnb:"tnb-latn-co",tnc:"tnc-latn-co",tnd:"tnd-latn-co",tng:"tng-latn-td",tnh:"tnh-latn-zz",tni:"tni-latn-id",tnk:"tnk-latn-vu",tnl:"tnl-latn-vu",tnm:"tnm-latn-id",tnn:"tnn-latn-vu",tno:"tno-latn-bo",tnp:"tnp-latn-vu",tnq:"tnq-latn-pr",tnr:"tnr-latn-sn",tns:"tns-latn-pg",tnt:"tnt-latn-id",tnv:"tnv-cakm-bd",tnw:"tnw-latn-id",tnx:"tnx-latn-sb",tny:"tny-latn-tz",to:"to-latn-to",tob:"tob-latn-ar",toc:"toc-latn-mx",tod:"tod-latn-gn",tof:"tof-latn-zz",tog:"tog-latn-mw",toh:"toh-latn-mz",toi:"toi-latn-zm",toj:"toj-latn-mx",tok:"tok-latn-001",tol:"tol-latn-us",tom:"tom-latn-id",too:"too-latn-mx",top:"top-latn-mx",toq:"toq-latn-zz",tor:"tor-latn-cd",tos:"tos-latn-mx",tou:"tou-latn-vn",tov:"tov-arab-ir",tow:"tow-latn-us",tox:"tox-latn-pw",toy:"toy-latn-id",toz:"toz-latn-cm",tpa:"tpa-latn-pg",tpc:"tpc-latn-mx",tpe:"tpe-latn-bd","tpe-beng":"tpe-beng-bd",tpf:"tpf-latn-id",tpg:"tpg-latn-id",tpi:"tpi-latn-pg",tpj:"tpj-latn-py",tpk:"tpk-latn-br",tpl:"tpl-latn-mx",tpm:"tpm-latn-zz",tpn:"tpn-latn-br",tpp:"tpp-latn-mx",tpr:"tpr-latn-br",tpt:"tpt-latn-mx",tpu:"tpu-khmr-kh",tpv:"tpv-latn-mp",tpx:"tpx-latn-mx",tpy:"tpy-latn-br",tpz:"tpz-latn-zz",tqb:"tqb-latn-br",tql:"tql-latn-vu",tqm:"tqm-latn-pg",tqn:"tqn-latn-us",tqo:"tqo-latn-zz",tqp:"tqp-latn-pg",tqt:"tqt-latn-mx",tqu:"tqu-latn-sb",tqw:"tqw-latn-us",tr:"tr-latn-tr",tra:"tra-arab-af",trb:"trb-latn-pg",trc:"trc-latn-mx",tre:"tre-latn-id",trf:"trf-latn-tt",trg:"trg-hebr-il",trh:"trh-latn-pg",tri:"tri-latn-sr",trj:"trj-latn-td",trl:"trl-latn-gb",trm:"trm-arab-af",trn:"trn-latn-bo",tro:"tro-latn-in",trp:"trp-latn-in","trp-beng":"trp-beng-in",trq:"trq-latn-mx",trr:"trr-latn-pe",trs:"trs-latn-mx",trt:"trt-latn-id",tru:"tru-latn-tr",trv:"trv-latn-tw",trw:"trw-arab-pk",trx:"trx-latn-my",try:"try-latn-in",trz:"trz-latn-br",ts:"ts-latn-za",tsa:"tsa-latn-cg",tsb:"tsb-latn-et",tsc:"tsc-latn-mz",tsd:"tsd-grek-gr",tsf:"tsf-deva-np",tsg:"tsg-latn-ph",tsh:"tsh-latn-cm",tsi:"tsi-latn-ca",tsj:"tsj-tibt-bt",tsl:"tsl-latn-vn",tsp:"tsp-latn-bf",tsr:"tsr-latn-vu",tst:"tst-latn-ml",tsu:"tsu-latn-tw",tsv:"tsv-latn-ga",tsw:"tsw-latn-zz",tsx:"tsx-latn-pg",tsz:"tsz-latn-mx",tt:"tt-cyrl-ru",ttb:"ttb-latn-ng",ttc:"ttc-latn-gt",ttd:"ttd-latn-zz",tte:"tte-latn-zz",ttf:"ttf-latn-cm",tth:"tth-laoo-la",tti:"tti-latn-id",ttj:"ttj-latn-ug",ttk:"ttk-latn-co",ttl:"ttl-latn-zm",ttm:"ttm-latn-ca",ttn:"ttn-latn-id",tto:"tto-laoo-la",ttp:"ttp-latn-id",ttr:"ttr-latn-zz",tts:"tts-thai-th",ttt:"ttt-latn-az",ttu:"ttu-latn-pg",ttv:"ttv-latn-pg",ttw:"ttw-latn-my",tty:"tty-latn-id",tua:"tua-latn-pg",tub:"tub-latn-us",tuc:"tuc-latn-pg",tud:"tud-latn-br",tue:"tue-latn-co",tuf:"tuf-latn-co",tug:"tug-latn-td",tuh:"tuh-latn-zz",tui:"tui-latn-cm",tuj:"tuj-latn-id",tul:"tul-latn-zz",tum:"tum-latn-mw",tun:"tun-latn-us",tuo:"tuo-latn-br",tuq:"tuq-latn-zz",tus:"tus-latn-ca",tuu:"tuu-latn-us",tuv:"tuv-latn-ke",tux:"tux-latn-br",tuy:"tuy-latn-ke",tuz:"tuz-latn-bf",tva:"tva-latn-sb",tvd:"tvd-latn-zz",tve:"tve-latn-id",tvk:"tvk-latn-vu",tvl:"tvl-latn-tv",tvm:"tvm-latn-id",tvn:"tvn-mymr-mm",tvo:"tvo-latn-id",tvs:"tvs-latn-ke",tvt:"tvt-latn-in",tvu:"tvu-latn-zz",tvw:"tvw-latn-id",tvx:"tvx-latn-tw",twa:"twa-latn-us",twb:"twb-latn-ph",twd:"twd-latn-nl",twe:"twe-latn-id",twf:"twf-latn-us",twg:"twg-latn-id",twh:"twh-latn-zz",twl:"twl-latn-mz",twm:"twm-deva-in",twn:"twn-latn-cm",two:"two-latn-bw",twp:"twp-latn-pg",twq:"twq-latn-ne",twr:"twr-latn-mx",twt:"twt-latn-br",twu:"twu-latn-id",tww:"tww-latn-pg",twx:"twx-latn-mz",twy:"twy-latn-id",txa:"txa-latn-my",txe:"txe-latn-id",txg:"txg-tang-cn",txi:"txi-latn-br",txj:"txj-latn-ng",txm:"txm-latn-id",txn:"txn-latn-id",txo:"txo-toto-in",txq:"txq-latn-id",txs:"txs-latn-id",txt:"txt-latn-id",txu:"txu-latn-br",txx:"txx-latn-my",txy:"txy-latn-mg",ty:"ty-latn-pf",tya:"tya-latn-zz",tye:"tye-latn-ng",tyh:"tyh-latn-vn",tyi:"tyi-latn-cg",tyj:"tyj-latn-vn",tyl:"tyl-latn-vn",tyn:"tyn-latn-id",typ:"typ-latn-au",tyr:"tyr-tavt-vn",tys:"tys-latn-vn",tyt:"tyt-latn-vn","tyt-tavt":"tyt-tavt-vn",tyu:"tyu-latn-bw",tyv:"tyv-cyrl-ru",tyx:"tyx-latn-cg",tyy:"tyy-latn-ng",tyz:"tyz-latn-vn",tzh:"tzh-latn-mx",tzj:"tzj-latn-gt",tzl:"tzl-latn-001",tzm:"tzm-latn-ma",tzn:"tzn-latn-id",tzo:"tzo-latn-mx",tzx:"tzx-latn-pg",uam:"uam-latn-br",uar:"uar-latn-pg",uba:"uba-latn-ng",ubi:"ubi-latn-td",ubl:"ubl-latn-ph",ubr:"ubr-latn-pg",ubu:"ubu-latn-zz",uda:"uda-latn-ng",ude:"ude-cyrl-ru",udg:"udg-mlym-in",udi:"udi-aghb-ru",udj:"udj-latn-id",udl:"udl-latn-cm",udm:"udm-cyrl-ru",udu:"udu-latn-sd",ues:"ues-latn-id",ufi:"ufi-latn-pg",ug:"ug-arab-cn","ug-cyrl":"ug-cyrl-kz","ug-kz":"ug-cyrl-kz","ug-mn":"ug-cyrl-mn",uga:"uga-ugar-sy",ugb:"ugb-latn-au",uge:"uge-latn-sb",ugh:"ugh-cyrl-ru",ugo:"ugo-thai-th",uha:"uha-latn-ng",uhn:"uhn-latn-id",uis:"uis-latn-pg",uiv:"uiv-latn-cm",uji:"uji-latn-ng",uk:"uk-cyrl-ua",uka:"uka-latn-id",ukg:"ukg-latn-pg",ukh:"ukh-latn-cf",uki:"uki-orya-in",ukk:"ukk-latn-mm",ukp:"ukp-latn-ng",ukq:"ukq-latn-ng",uku:"uku-latn-ng",ukv:"ukv-latn-ss",ukw:"ukw-latn-ng",uky:"uky-latn-au",ula:"ula-latn-ng",ulb:"ulb-latn-ng",ulc:"ulc-cyrl-ru",ule:"ule-latn-ar",ulf:"ulf-latn-id",uli:"uli-latn-fm",ulk:"ulk-latn-au",ulm:"ulm-latn-id",uln:"uln-latn-pg",ulu:"ulu-latn-id",ulw:"ulw-latn-ni",uma:"uma-latn-us",umb:"umb-latn-ao",umd:"umd-latn-au",umg:"umg-latn-au",umi:"umi-latn-my",umm:"umm-latn-ng",umn:"umn-latn-mm",umo:"umo-latn-br",ump:"ump-latn-au",umr:"umr-latn-au",ums:"ums-latn-id",una:"una-latn-pg",und:"en-latn-us","und-002":"en-latn-ng","und-003":"en-latn-us","und-005":"pt-latn-br","und-009":"en-latn-au","und-011":"en-latn-ng","und-013":"es-latn-mx","und-014":"sw-latn-tz","und-015":"ar-arab-eg","und-017":"sw-latn-cd","und-018":"en-latn-za","und-019":"en-latn-us","und-021":"en-latn-us","und-029":"es-latn-cu","und-030":"zh-hans-cn","und-034":"hi-deva-in","und-035":"id-latn-id","und-039":"it-latn-it","und-053":"en-latn-au","und-054":"en-latn-pg","und-057":"en-latn-gu","und-061":"sm-latn-ws","und-142":"zh-hans-cn","und-143":"uz-latn-uz","und-145":"ar-arab-sa","und-150":"ru-cyrl-ru","und-151":"ru-cyrl-ru","und-154":"en-latn-gb","und-155":"de-latn-de","und-202":"en-latn-ng","und-419":"es-latn-419","und-ad":"ca-latn-ad","und-adlm":"ff-adlm-gn","und-ae":"ar-arab-ae","und-af":"fa-arab-af","und-aghb":"udi-aghb-ru","und-ahom":"aho-ahom-in","und-al":"sq-latn-al","und-am":"hy-armn-am","und-ao":"pt-latn-ao","und-aq":"und-latn-aq","und-ar":"es-latn-ar","und-arab":"ar-arab-eg","und-arab-cc":"ms-arab-cc","und-arab-cn":"ug-arab-cn","und-arab-gb":"ur-arab-gb","und-arab-id":"ms-arab-id","und-arab-in":"ur-arab-in","und-arab-kh":"cja-arab-kh","und-arab-mm":"rhg-arab-mm","und-arab-mn":"kk-arab-mn","und-arab-mu":"ur-arab-mu","und-arab-ng":"ha-arab-ng","und-arab-pk":"ur-arab-pk","und-arab-tg":"apd-arab-tg","und-arab-th":"mfa-arab-th","und-arab-tj":"fa-arab-tj","und-arab-tr":"apc-arab-tr","und-arab-yt":"swb-arab-yt","und-armi":"arc-armi-ir","und-armn":"hy-armn-am","und-as":"sm-latn-as","und-at":"de-latn-at","und-avst":"ae-avst-ir","und-aw":"nl-latn-aw","und-ax":"sv-latn-ax","und-az":"az-latn-az","und-ba":"bs-latn-ba","und-bali":"ban-bali-id","und-bamu":"bax-bamu-cm","und-bass":"bsq-bass-lr","und-batk":"bbc-batk-id","und-bd":"bn-beng-bd","und-be":"nl-latn-be","und-beng":"bn-beng-bd","und-bf":"fr-latn-bf","und-bg":"bg-cyrl-bg","und-bh":"ar-arab-bh","und-bhks":"sa-bhks-in","und-bi":"rn-latn-bi","und-bj":"fr-latn-bj","und-bl":"fr-latn-bl","und-bn":"ms-latn-bn","und-bo":"es-latn-bo","und-bopo":"zh-bopo-tw","und-bq":"pap-latn-bq","und-br":"pt-latn-br","und-brah":"pka-brah-in","und-brai":"fr-brai-fr","und-bt":"dz-tibt-bt","und-bugi":"bug-bugi-id","und-buhd":"bku-buhd-ph","und-bv":"und-latn-bv","und-by":"be-cyrl-by","und-cakm":"ccp-cakm-bd","und-cans":"iu-cans-ca","und-cari":"xcr-cari-tr","und-cd":"sw-latn-cd","und-cf":"fr-latn-cf","und-cg":"fr-latn-cg","und-ch":"de-latn-ch","und-cham":"cjm-cham-vn","und-cher":"chr-cher-us","und-chrs":"xco-chrs-uz","und-ci":"fr-latn-ci","und-cl":"es-latn-cl","und-cm":"fr-latn-cm","und-cn":"zh-hans-cn","und-co":"es-latn-co","und-copt":"cop-copt-eg","und-cp":"und-latn-cp","und-cpmn":"und-cpmn-cy","und-cpmn-cy":"und-cpmn-cy","und-cprt":"grc-cprt-cy","und-cr":"es-latn-cr","und-cu":"es-latn-cu","und-cv":"pt-latn-cv","und-cw":"pap-latn-cw","und-cy":"el-grek-cy","und-cyrl":"ru-cyrl-ru","und-cyrl-al":"mk-cyrl-al","und-cyrl-ba":"sr-cyrl-ba","und-cyrl-ge":"ab-cyrl-ge","und-cyrl-gr":"mk-cyrl-gr","und-cyrl-md":"uk-cyrl-md","und-cyrl-ro":"bg-cyrl-ro","und-cyrl-sk":"uk-cyrl-sk","und-cyrl-tr":"kbd-cyrl-tr","und-cyrl-xk":"sr-cyrl-xk","und-cz":"cs-latn-cz","und-de":"de-latn-de","und-deva":"hi-deva-in","und-deva-bt":"ne-deva-bt","und-deva-fj":"hif-deva-fj","und-deva-mu":"bho-deva-mu","und-deva-pk":"btv-deva-pk","und-diak":"dv-diak-mv","und-dj":"aa-latn-dj","und-dk":"da-latn-dk","und-do":"es-latn-do","und-dogr":"doi-dogr-in","und-dupl":"fr-dupl-fr","und-dz":"ar-arab-dz","und-ea":"es-latn-ea","und-ec":"es-latn-ec","und-ee":"et-latn-ee","und-eg":"ar-arab-eg","und-egyp":"egy-egyp-eg","und-eh":"ar-arab-eh","und-elba":"sq-elba-al","und-elym":"arc-elym-ir","und-er":"ti-ethi-er","und-es":"es-latn-es","und-et":"am-ethi-et","und-ethi":"am-ethi-et","und-eu":"en-latn-ie","und-ez":"de-latn-ez","und-fi":"fi-latn-fi","und-fo":"fo-latn-fo","und-fr":"fr-latn-fr","und-ga":"fr-latn-ga","und-ge":"ka-geor-ge","und-geor":"ka-geor-ge","und-gf":"fr-latn-gf","und-gh":"ak-latn-gh","und-gl":"kl-latn-gl","und-glag":"cu-glag-bg","und-gn":"fr-latn-gn","und-gong":"wsg-gong-in","und-gonm":"esg-gonm-in","und-goth":"got-goth-ua","und-gp":"fr-latn-gp","und-gq":"es-latn-gq","und-gr":"el-grek-gr","und-gran":"sa-gran-in","und-grek":"el-grek-gr","und-grek-tr":"bgx-grek-tr","und-gs":"und-latn-gs","und-gt":"es-latn-gt","und-gujr":"gu-gujr-in","und-guru":"pa-guru-in","und-gw":"pt-latn-gw","und-hanb":"zh-hanb-tw","und-hang":"ko-hang-kr","und-hani":"zh-hani-cn","und-hano":"hnn-hano-ph","und-hans":"zh-hans-cn","und-hant":"zh-hant-tw","und-hant-ca":"yue-hant-ca","und-hebr":"he-hebr-il","und-hebr-se":"yi-hebr-se","und-hebr-ua":"yi-hebr-ua","und-hebr-us":"yi-hebr-us","und-hira":"ja-hira-jp","und-hk":"zh-hant-hk","und-hluw":"hlu-hluw-tr","und-hm":"und-latn-hm","und-hmng":"hnj-hmng-la","und-hmnp":"hnj-hmnp-us","und-hn":"es-latn-hn","und-hr":"hr-latn-hr","und-ht":"ht-latn-ht","und-hu":"hu-latn-hu","und-hung":"hu-hung-hu","und-ic":"es-latn-ic","und-id":"id-latn-id","und-il":"he-hebr-il","und-in":"hi-deva-in","und-iq":"ar-arab-iq","und-ir":"fa-arab-ir","und-is":"is-latn-is","und-it":"it-latn-it","und-ital":"ett-ital-it","und-jamo":"ko-jamo-kr","und-java":"jv-java-id","und-jo":"ar-arab-jo","und-jp":"ja-jpan-jp","und-jpan":"ja-jpan-jp","und-kali":"eky-kali-mm","und-kana":"ja-kana-jp","und-kawi":"kaw-kawi-id","und-ke":"sw-latn-ke","und-kg":"ky-cyrl-kg","und-kh":"km-khmr-kh","und-khar":"pra-khar-pk","und-khmr":"km-khmr-kh","und-khoj":"sd-khoj-in","und-kits":"zkt-kits-cn","und-km":"ar-arab-km","und-knda":"kn-knda-in","und-kore":"ko-kore-kr","und-kp":"ko-kore-kp","und-kr":"ko-kore-kr","und-kthi":"bho-kthi-in","und-kw":"ar-arab-kw","und-kz":"ru-cyrl-kz","und-la":"lo-laoo-la","und-lana":"nod-lana-th","und-laoo":"lo-laoo-la","und-laoo-au":"hnj-laoo-au","und-laoo-cn":"hnj-laoo-cn","und-laoo-fr":"hnj-laoo-fr","und-laoo-gf":"hnj-laoo-gf","und-laoo-mm":"hnj-laoo-mm","und-laoo-sr":"hnj-laoo-sr","und-laoo-th":"hnj-laoo-th","und-laoo-us":"hnj-laoo-us","und-laoo-vn":"hnj-laoo-vn","und-latn-af":"tk-latn-af","und-latn-am":"ku-latn-am","und-latn-cn":"za-latn-cn","und-latn-cy":"tr-latn-cy","und-latn-dz":"fr-latn-dz","und-latn-et":"en-latn-et","und-latn-ge":"ku-latn-ge","und-latn-ir":"tk-latn-ir","und-latn-km":"fr-latn-km","und-latn-ma":"fr-latn-ma","und-latn-mk":"sq-latn-mk","und-latn-mm":"kac-latn-mm","und-latn-mo":"pt-latn-mo","und-latn-mr":"fr-latn-mr","und-latn-ru":"krl-latn-ru","und-latn-sy":"fr-latn-sy","und-latn-tn":"fr-latn-tn","und-latn-tw":"trv-latn-tw","und-latn-ua":"pl-latn-ua","und-lb":"ar-arab-lb","und-lepc":"lep-lepc-in","und-li":"de-latn-li","und-limb":"lif-limb-in","und-lina":"lab-lina-gr","und-linb":"grc-linb-gr","und-lisu":"lis-lisu-cn","und-lk":"si-sinh-lk","und-ls":"st-latn-ls","und-lt":"lt-latn-lt","und-lu":"fr-latn-lu","und-lv":"lv-latn-lv","und-ly":"ar-arab-ly","und-lyci":"xlc-lyci-tr","und-lydi":"xld-lydi-tr","und-ma":"ar-arab-ma","und-mahj":"hi-mahj-in","und-maka":"mak-maka-id","und-mand":"myz-mand-ir","und-mani":"xmn-mani-cn","und-marc":"bo-marc-cn","und-mc":"fr-latn-mc","und-md":"ro-latn-md","und-me":"sr-latn-me","und-medf":"dmf-medf-ng","und-mend":"men-mend-sl","und-merc":"xmr-merc-sd","und-mero":"xmr-mero-sd","und-mf":"fr-latn-mf","und-mg":"mg-latn-mg","und-mk":"mk-cyrl-mk","und-ml":"bm-latn-ml","und-mlym":"ml-mlym-in","und-mm":"my-mymr-mm","und-mn":"mn-cyrl-mn","und-mo":"zh-hant-mo","und-modi":"mr-modi-in","und-mong":"mn-mong-cn","und-mq":"fr-latn-mq","und-mr":"ar-arab-mr","und-mroo":"mro-mroo-bd","und-mt":"mt-latn-mt","und-mtei":"mni-mtei-in","und-mu":"mfe-latn-mu","und-mult":"skr-mult-pk","und-mv":"dv-thaa-mv","und-mx":"es-latn-mx","und-my":"ms-latn-my","und-mymr":"my-mymr-mm","und-mymr-in":"kht-mymr-in","und-mymr-th":"mnw-mymr-th","und-mz":"pt-latn-mz","und-na":"af-latn-na","und-nagm":"unr-nagm-in","und-nand":"sa-nand-in","und-narb":"xna-narb-sa","und-nbat":"arc-nbat-jo","und-nc":"fr-latn-nc","und-ne":"ha-latn-ne","und-newa":"new-newa-np","und-ni":"es-latn-ni","und-nkoo":"man-nkoo-gn","und-nl":"nl-latn-nl","und-no":"nb-latn-no","und-np":"ne-deva-np","und-nshu":"zhx-nshu-cn","und-ogam":"sga-ogam-ie","und-olck":"sat-olck-in","und-om":"ar-arab-om","und-orkh":"otk-orkh-mn","und-orya":"or-orya-in","und-osge":"osa-osge-us","und-osma":"so-osma-so","und-ougr":"oui-ougr-143","und-pa":"es-latn-pa","und-palm":"arc-palm-sy","und-pauc":"ctd-pauc-mm","und-pe":"es-latn-pe","und-perm":"kv-perm-ru","und-pf":"fr-latn-pf","und-pg":"tpi-latn-pg","und-ph":"fil-latn-ph","und-phag":"lzh-phag-cn","und-phli":"pal-phli-ir","und-phlp":"pal-phlp-cn","und-phnx":"phn-phnx-lb","und-pk":"ur-arab-pk","und-pl":"pl-latn-pl","und-plrd":"hmd-plrd-cn","und-pm":"fr-latn-pm","und-pr":"es-latn-pr","und-prti":"xpr-prti-ir","und-ps":"ar-arab-ps","und-pt":"pt-latn-pt","und-pw":"pau-latn-pw","und-py":"gn-latn-py","und-qa":"ar-arab-qa","und-qo":"en-latn-dg","und-re":"fr-latn-re","und-rjng":"rej-rjng-id","und-ro":"ro-latn-ro","und-rohg":"rhg-rohg-mm","und-rs":"sr-cyrl-rs","und-ru":"ru-cyrl-ru","und-runr":"non-runr-se","und-rw":"rw-latn-rw","und-sa":"ar-arab-sa","und-samr":"smp-samr-il","und-sarb":"xsa-sarb-ye","und-saur":"saz-saur-in","und-sc":"fr-latn-sc","und-sd":"ar-arab-sd","und-se":"sv-latn-se","und-sgnw":"ase-sgnw-us","und-shaw":"en-shaw-gb","und-shrd":"sa-shrd-in","und-si":"sl-latn-si","und-sidd":"sa-sidd-in","und-sind":"sd-sind-in","und-sinh":"si-sinh-lk","und-sj":"nb-latn-sj","und-sk":"sk-latn-sk","und-sm":"it-latn-sm","und-sn":"fr-latn-sn","und-so":"so-latn-so","und-sogd":"sog-sogd-uz","und-sogo":"sog-sogo-uz","und-sora":"srb-sora-in","und-soyo":"cmg-soyo-mn","und-sr":"nl-latn-sr","und-st":"pt-latn-st","und-sund":"su-sund-id","und-sv":"es-latn-sv","und-sy":"ar-arab-sy","und-sylo":"syl-sylo-bd","und-syrc":"syr-syrc-iq","und-tagb":"tbw-tagb-ph","und-takr":"doi-takr-in","und-tale":"tdd-tale-cn","und-talu":"khb-talu-cn","und-taml":"ta-taml-in","und-tang":"txg-tang-cn","und-tavt":"blt-tavt-vn","und-td":"fr-latn-td","und-telu":"te-telu-in","und-tf":"fr-latn-tf","und-tfng":"zgh-tfng-ma","und-tg":"fr-latn-tg","und-tglg":"fil-tglg-ph","und-th":"th-thai-th","und-thaa":"dv-thaa-mv","und-thai":"th-thai-th","und-thai-cn":"lcp-thai-cn","und-thai-kh":"kdt-thai-kh","und-thai-la":"kdt-thai-la","und-tibt":"bo-tibt-cn","und-tirh":"mai-tirh-in","und-tj":"tg-cyrl-tj","und-tk":"tkl-latn-tk","und-tl":"pt-latn-tl","und-tm":"tk-latn-tm","und-tn":"ar-arab-tn","und-tnsa":"nst-tnsa-in","und-to":"to-latn-to","und-toto":"txo-toto-in","und-tr":"tr-latn-tr","und-tv":"tvl-latn-tv","und-tw":"zh-hant-tw","und-tz":"sw-latn-tz","und-ua":"uk-cyrl-ua","und-ug":"sw-latn-ug","und-ugar":"uga-ugar-sy","und-uy":"es-latn-uy","und-uz":"uz-latn-uz","und-va":"it-latn-va","und-vaii":"vai-vaii-lr","und-ve":"es-latn-ve","und-vith":"sq-vith-al","und-vn":"vi-latn-vn","und-vu":"bi-latn-vu","und-wara":"hoc-wara-in","und-wcho":"nnp-wcho-in","und-wf":"fr-latn-wf","und-ws":"sm-latn-ws","und-xk":"sq-latn-xk","und-xpeo":"peo-xpeo-ir","und-xsux":"akk-xsux-iq","und-ye":"ar-arab-ye","und-yezi":"ku-yezi-ge","und-yiii":"ii-yiii-cn","und-yt":"fr-latn-yt","und-zanb":"cmg-zanb-mn","und-zw":"sn-latn-zw",une:"une-latn-ng",ung:"ung-latn-au",uni:"uni-latn-pg",unk:"unk-latn-br",unm:"unm-latn-us",unn:"unn-latn-au",unr:"unr-beng-in","unr-deva":"unr-deva-np","unr-np":"unr-deva-np",unu:"unu-latn-pg",unx:"unx-beng-in",unz:"unz-latn-id",uok:"uok-latn-zz",uon:"uon-latn-tw",upi:"upi-latn-pg",upv:"upv-latn-vu",ur:"ur-arab-pk",ura:"ura-latn-pe",urb:"urb-latn-br",urc:"urc-latn-au",ure:"ure-latn-bo",urf:"urf-latn-au",urg:"urg-latn-pg",urh:"urh-latn-ng",uri:"uri-latn-zz",urk:"urk-thai-th",urm:"urm-latn-pg",urn:"urn-latn-id",uro:"uro-latn-pg",urp:"urp-latn-br",urr:"urr-latn-vu",urt:"urt-latn-zz",uru:"uru-latn-br",urv:"urv-latn-pg",urw:"urw-latn-zz",urx:"urx-latn-pg",ury:"ury-latn-id",urz:"urz-latn-br",usa:"usa-latn-zz",ush:"ush-arab-pk",usi:"usi-latn-bd","usi-beng":"usi-beng-bd",usk:"usk-latn-cm",usp:"usp-latn-gt",uss:"uss-latn-ng",usu:"usu-latn-pg",uta:"uta-latn-ng",ute:"ute-latn-us",uth:"uth-latn-zz",utp:"utp-latn-sb",utr:"utr-latn-zz",utu:"utu-latn-pg",uum:"uum-grek-ge","uum-cyrl":"uum-cyrl-ge",uur:"uur-latn-vu",uve:"uve-latn-nc",uvh:"uvh-latn-zz",uvl:"uvl-latn-zz",uwa:"uwa-latn-au",uya:"uya-latn-ng",uz:"uz-latn-uz","uz-af":"uz-arab-af","uz-arab":"uz-arab-af","uz-cn":"uz-cyrl-cn",uzs:"uzs-arab-af",vaa:"vaa-taml-in",vae:"vae-latn-cf",vaf:"vaf-arab-ir",vag:"vag-latn-zz",vah:"vah-deva-in",vai:"vai-vaii-lr",vaj:"vaj-latn-na",val:"val-latn-pg",vam:"vam-latn-pg",van:"van-latn-zz",vao:"vao-latn-vu",vap:"vap-latn-in",var:"var-latn-mx",vas:"vas-deva-in","vas-gujr":"vas-gujr-in",vau:"vau-latn-cd",vav:"vav-deva-in","vav-gujr":"vav-gujr-in",vay:"vay-deva-np",vbb:"vbb-latn-id",vbk:"vbk-latn-ph",ve:"ve-latn-za",vec:"vec-latn-it",vem:"vem-latn-ng",veo:"veo-latn-us",vep:"vep-latn-ru",ver:"ver-latn-ng",vgr:"vgr-arab-pk",vi:"vi-latn-vn",vic:"vic-latn-sx",vid:"vid-latn-tz",vif:"vif-latn-cg",vig:"vig-latn-bf",vil:"vil-latn-ar",vin:"vin-latn-tz",vit:"vit-latn-ng",viv:"viv-latn-zz",vka:"vka-latn-au",vkj:"vkj-latn-td",vkk:"vkk-latn-id",vkl:"vkl-latn-id",vkm:"vkm-latn-br",vkn:"vkn-latn-ng",vko:"vko-latn-id",vkp:"vkp-latn-in","vkp-deva":"vkp-deva-in",vkt:"vkt-latn-id",vku:"vku-latn-au",vkz:"vkz-latn-ng",vlp:"vlp-latn-vu",vls:"vls-latn-be",vma:"vma-latn-au",vmb:"vmb-latn-au",vmc:"vmc-latn-mx",vmd:"vmd-knda-in",vme:"vme-latn-id",vmf:"vmf-latn-de",vmg:"vmg-latn-pg",vmh:"vmh-arab-ir",vmi:"vmi-latn-au",vmj:"vmj-latn-mx",vmk:"vmk-latn-mz",vml:"vml-latn-au",vmm:"vmm-latn-mx",vmp:"vmp-latn-mx",vmq:"vmq-latn-mx",vmr:"vmr-latn-mz",vms:"vms-latn-id",vmu:"vmu-latn-au",vmw:"vmw-latn-mz",vmx:"vmx-latn-mx",vmy:"vmy-latn-mx",vmz:"vmz-latn-mx",vnk:"vnk-latn-sb",vnm:"vnm-latn-vu",vnp:"vnp-latn-vu",vo:"vo-latn-001",vor:"vor-latn-ng",vot:"vot-latn-ru",vra:"vra-latn-vu",vro:"vro-latn-ee",vrs:"vrs-latn-sb",vrt:"vrt-latn-vu",vto:"vto-latn-id",vum:"vum-latn-ga",vun:"vun-latn-tz",vut:"vut-latn-zz",vwa:"vwa-latn-cn","vwa-mymr":"vwa-mymr-cn",wa:"wa-latn-be",waa:"waa-latn-us",wab:"wab-latn-pg",wac:"wac-latn-us",wad:"wad-latn-id",wae:"wae-latn-ch",waf:"waf-latn-br",wag:"wag-latn-pg",wah:"wah-latn-id",wai:"wai-latn-id",waj:"waj-latn-zz",wal:"wal-ethi-et",wam:"wam-latn-us",wan:"wan-latn-zz",wap:"wap-latn-gy",waq:"waq-latn-au",war:"war-latn-ph",was:"was-latn-us",wat:"wat-latn-pg",wau:"wau-latn-br",wav:"wav-latn-ng",waw:"waw-latn-br",wax:"wax-latn-pg",way:"way-latn-sr",waz:"waz-latn-pg",wba:"wba-latn-ve",wbb:"wbb-latn-id",wbe:"wbe-latn-id",wbf:"wbf-latn-bf",wbh:"wbh-latn-tz",wbi:"wbi-latn-tz",wbj:"wbj-latn-tz",wbk:"wbk-arab-af",wbl:"wbl-latn-pk","wbl-arab":"wbl-arab-af","wbl-cyrl":"wbl-cyrl-tj",wbm:"wbm-latn-cn",wbp:"wbp-latn-au",wbq:"wbq-telu-in",wbr:"wbr-deva-in",wbt:"wbt-latn-au",wbv:"wbv-latn-au",wbw:"wbw-latn-id",wca:"wca-latn-br",wci:"wci-latn-zz",wdd:"wdd-latn-ga",wdg:"wdg-latn-pg",wdj:"wdj-latn-au",wdk:"wdk-latn-au",wdt:"wdt-latn-ca",wdu:"wdu-latn-au",wdy:"wdy-latn-au",wec:"wec-latn-ci",wed:"wed-latn-pg",weg:"weg-latn-au",weh:"weh-latn-cm",wei:"wei-latn-pg",wem:"wem-latn-bj",weo:"weo-latn-id",wep:"wep-latn-de",wer:"wer-latn-zz",wes:"wes-latn-cm",wet:"wet-latn-id",weu:"weu-latn-mm",wew:"wew-latn-id",wfg:"wfg-latn-id",wga:"wga-latn-au",wgb:"wgb-latn-pg",wgg:"wgg-latn-au",wgi:"wgi-latn-zz",wgo:"wgo-latn-id",wgu:"wgu-latn-au",wgy:"wgy-latn-au",wha:"wha-latn-id",whg:"whg-latn-zz",whk:"whk-latn-id",whu:"whu-latn-id",wib:"wib-latn-zz",wic:"wic-latn-us",wie:"wie-latn-au",wif:"wif-latn-au",wig:"wig-latn-au",wih:"wih-latn-au",wii:"wii-latn-pg",wij:"wij-latn-au",wik:"wik-latn-au",wil:"wil-latn-au",wim:"wim-latn-au",win:"win-latn-us",wir:"wir-latn-br",wiu:"wiu-latn-zz",wiv:"wiv-latn-zz",wiy:"wiy-latn-us",wja:"wja-latn-zz",wji:"wji-latn-zz",wka:"wka-latn-tz",wkd:"wkd-latn-id",wkr:"wkr-latn-au",wkw:"wkw-latn-au",wky:"wky-latn-au",wla:"wla-latn-pg",wlg:"wlg-latn-au",wlh:"wlh-latn-tl",wli:"wli-latn-id",wlm:"wlm-latn-gb",wlo:"wlo-arab-id",wlr:"wlr-latn-vu",wls:"wls-latn-wf",wlu:"wlu-latn-au",wlv:"wlv-latn-ar",wlw:"wlw-latn-id",wlx:"wlx-latn-gh",wma:"wma-latn-ng",wmb:"wmb-latn-au",wmc:"wmc-latn-pg",wmd:"wmd-latn-br",wme:"wme-deva-np",wmh:"wmh-latn-tl",wmi:"wmi-latn-au",wmm:"wmm-latn-id",wmn:"wmn-latn-nc",wmo:"wmo-latn-zz",wms:"wms-latn-id",wmt:"wmt-latn-au",wmw:"wmw-latn-mz","wmw-arab":"wmw-arab-mz",wmx:"wmx-latn-pg",wnb:"wnb-latn-pg",wnc:"wnc-latn-zz",wnd:"wnd-latn-au",wne:"wne-arab-pk",wng:"wng-latn-id",wni:"wni-arab-km",wnk:"wnk-latn-id",wnm:"wnm-latn-au",wnn:"wnn-latn-au",wno:"wno-latn-id",wnp:"wnp-latn-pg",wnu:"wnu-latn-zz",wnw:"wnw-latn-us",wny:"wny-latn-au",wo:"wo-latn-sn",woa:"woa-latn-au",wob:"wob-latn-zz",woc:"woc-latn-pg",wod:"wod-latn-id",woe:"woe-latn-fm",wof:"wof-latn-gm","wof-arab":"wof-arab-gm",wog:"wog-latn-pg",woi:"woi-latn-id",wok:"wok-latn-cm",wom:"wom-latn-ng",won:"won-latn-cd",woo:"woo-latn-id",wor:"wor-latn-id",wos:"wos-latn-zz",wow:"wow-latn-id",wpc:"wpc-latn-ve",wrb:"wrb-latn-au",wrg:"wrg-latn-au",wrh:"wrh-latn-au",wri:"wri-latn-au",wrk:"wrk-latn-au",wrl:"wrl-latn-au",wrm:"wrm-latn-au",wro:"wro-latn-au",wrp:"wrp-latn-id",wrr:"wrr-latn-au",wrs:"wrs-latn-zz",wru:"wru-latn-id",wrv:"wrv-latn-pg",wrw:"wrw-latn-au",wrx:"wrx-latn-id",wrz:"wrz-latn-au",wsa:"wsa-latn-id",wsg:"wsg-gong-in",wsi:"wsi-latn-vu",wsk:"wsk-latn-zz",wsr:"wsr-latn-pg",wss:"wss-latn-gh",wsu:"wsu-latn-br",wsv:"wsv-arab-af",wtf:"wtf-latn-pg",wth:"wth-latn-au",wti:"wti-latn-et",wtk:"wtk-latn-pg",wtm:"wtm-deva-in",wtw:"wtw-latn-id","wtw-bugi":"wtw-bugi-id",wua:"wua-latn-au",wub:"wub-latn-au",wud:"wud-latn-tg",wul:"wul-latn-id",wum:"wum-latn-ga",wun:"wun-latn-tz",wur:"wur-latn-au",wut:"wut-latn-pg",wuu:"wuu-hans-cn",wuv:"wuv-latn-zz",wux:"wux-latn-au",wuy:"wuy-latn-id",wwa:"wwa-latn-zz",wwb:"wwb-latn-au",wwo:"wwo-latn-vu",wwr:"wwr-latn-au",www:"www-latn-cm",wxw:"wxw-latn-au",wyb:"wyb-latn-au",wyi:"wyi-latn-au",wym:"wym-latn-pl",wyn:"wyn-latn-us",wyr:"wyr-latn-br",wyy:"wyy-latn-fj",xaa:"xaa-latn-es",xab:"xab-latn-ng",xai:"xai-latn-br",xaj:"xaj-latn-br",xak:"xak-latn-ve",xal:"xal-cyrl-ru",xam:"xam-latn-za",xan:"xan-ethi-et",xao:"xao-latn-vn",xar:"xar-latn-pg",xas:"xas-cyrl-ru",xat:"xat-latn-br",xau:"xau-latn-id",xav:"xav-latn-br",xaw:"xaw-latn-us",xay:"xay-latn-id",xbb:"xbb-latn-au",xbd:"xbd-latn-au",xbe:"xbe-latn-au",xbg:"xbg-latn-au",xbi:"xbi-latn-zz",xbj:"xbj-latn-au",xbm:"xbm-latn-fr",xbn:"xbn-latn-my",xbp:"xbp-latn-au",xbr:"xbr-latn-id",xbw:"xbw-latn-br",xby:"xby-latn-au",xch:"xch-latn-us",xco:"xco-chrs-uz",xcr:"xcr-cari-tr",xda:"xda-latn-au",xdk:"xdk-latn-au",xdo:"xdo-latn-ao",xdq:"xdq-cyrl-ru",xdy:"xdy-latn-id",xed:"xed-latn-cm",xeg:"xeg-latn-za",xem:"xem-latn-id",xer:"xer-latn-br",xes:"xes-latn-zz",xet:"xet-latn-br",xeu:"xeu-latn-pg",xgb:"xgb-latn-ci",xgd:"xgd-latn-au",xgg:"xgg-latn-au",xgi:"xgi-latn-au",xgm:"xgm-latn-au",xgu:"xgu-latn-au",xgw:"xgw-latn-au",xh:"xh-latn-za",xhe:"xhe-arab-pk",xhm:"xhm-khmr-kh",xhv:"xhv-latn-vn",xii:"xii-latn-za",xin:"xin-latn-gt",xir:"xir-latn-br",xis:"xis-orya-in",xiy:"xiy-latn-br",xjb:"xjb-latn-au",xjt:"xjt-latn-au",xka:"xka-arab-pk",xkb:"xkb-latn-bj",xkc:"xkc-arab-ir",xkd:"xkd-latn-id",xke:"xke-latn-id",xkg:"xkg-latn-ml",xkj:"xkj-arab-ir",xkl:"xkl-latn-id",xkn:"xkn-latn-id",xkp:"xkp-arab-ir",xkq:"xkq-latn-id",xkr:"xkr-latn-br",xks:"xks-latn-id",xkt:"xkt-latn-gh",xku:"xku-latn-cg",xkv:"xkv-latn-bw",xkw:"xkw-latn-id",xkx:"xkx-latn-pg",xky:"xky-latn-my",xkz:"xkz-latn-bt",xla:"xla-latn-zz",xlc:"xlc-lyci-tr",xld:"xld-lydi-tr",xly:"xly-elym-ir",xma:"xma-latn-so",xmb:"xmb-latn-cm",xmc:"xmc-latn-mz",xmd:"xmd-latn-cm",xmf:"xmf-geor-ge",xmg:"xmg-latn-cm",xmh:"xmh-latn-au",xmj:"xmj-latn-cm",xmm:"xmm-latn-id",xmn:"xmn-mani-cn",xmo:"xmo-latn-br",xmp:"xmp-latn-au",xmq:"xmq-latn-au",xmr:"xmr-merc-sd",xmt:"xmt-latn-id",xmu:"xmu-latn-au",xmv:"xmv-latn-mg",xmw:"xmw-latn-mg",xmx:"xmx-latn-id",xmy:"xmy-latn-au",xmz:"xmz-latn-id",xna:"xna-narb-sa",xnb:"xnb-latn-tw",xni:"xni-latn-au",xnj:"xnj-latn-tz",xnk:"xnk-latn-au",xnm:"xnm-latn-au",xnn:"xnn-latn-ph",xnq:"xnq-latn-mz",xnr:"xnr-deva-in",xnt:"xnt-latn-us",xnu:"xnu-latn-au",xny:"xny-latn-au",xnz:"xnz-latn-eg","xnz-arab":"xnz-arab-eg",xoc:"xoc-latn-ng",xod:"xod-latn-id",xog:"xog-latn-ug",xoi:"xoi-latn-pg",xok:"xok-latn-br",xom:"xom-latn-sd","xom-ethi":"xom-ethi-et",xon:"xon-latn-zz",xoo:"xoo-latn-br",xop:"xop-latn-pg",xor:"xor-latn-br",xow:"xow-latn-pg",xpa:"xpa-latn-au",xpb:"xpb-latn-au",xpd:"xpd-latn-au",xpf:"xpf-latn-au",xpg:"xpg-grek-tr",xph:"xph-latn-au",xpi:"xpi-ogam-gb",xpj:"xpj-latn-au",xpk:"xpk-latn-br",xpl:"xpl-latn-au",xpm:"xpm-cyrl-ru",xpn:"xpn-latn-br",xpo:"xpo-latn-mx",xpq:"xpq-latn-us",xpr:"xpr-prti-ir",xpt:"xpt-latn-au",xpv:"xpv-latn-au",xpw:"xpw-latn-au",xpx:"xpx-latn-au",xpz:"xpz-latn-au",xra:"xra-latn-br",xrb:"xrb-latn-zz",xrd:"xrd-latn-au",xre:"xre-latn-br",xrg:"xrg-latn-au",xri:"xri-latn-br",xrm:"xrm-cyrl-ru",xrn:"xrn-cyrl-ru",xrr:"xrr-latn-it",xru:"xru-latn-au",xrw:"xrw-latn-pg",xsa:"xsa-sarb-ye",xsb:"xsb-latn-ph",xse:"xse-latn-id",xsh:"xsh-latn-ng",xsi:"xsi-latn-zz",xsm:"xsm-latn-zz",xsn:"xsn-latn-ng",xsp:"xsp-latn-pg",xsq:"xsq-latn-mz",xsr:"xsr-deva-np",xss:"xss-cyrl-ru",xsu:"xsu-latn-ve",xsy:"xsy-latn-tw",xta:"xta-latn-mx",xtb:"xtb-latn-mx",xtc:"xtc-latn-sd",xtd:"xtd-latn-mx",xte:"xte-latn-id",xth:"xth-latn-au",xti:"xti-latn-mx",xtj:"xtj-latn-mx",xtl:"xtl-latn-mx",xtm:"xtm-latn-mx",xtn:"xtn-latn-mx",xtp:"xtp-latn-mx",xts:"xts-latn-mx",xtt:"xtt-latn-mx",xtu:"xtu-latn-mx",xtv:"xtv-latn-au",xtw:"xtw-latn-br",xty:"xty-latn-mx",xub:"xub-taml-in","xub-knda":"xub-knda-in","xub-mlym":"xub-mlym-in",xud:"xud-latn-au",xuj:"xuj-taml-in",xul:"xul-latn-au",xum:"xum-latn-it","xum-ital":"xum-ital-it",xun:"xun-latn-au",xuo:"xuo-latn-td",xut:"xut-latn-au",xuu:"xuu-latn-na",xve:"xve-ital-it",xvi:"xvi-arab-af",xvn:"xvn-latn-es",xvo:"xvo-latn-it",xvs:"xvs-latn-it",xwa:"xwa-latn-br",xwd:"xwd-latn-au",xwe:"xwe-latn-zz",xwj:"xwj-latn-au",xwk:"xwk-latn-au",xwl:"xwl-latn-bj",xwo:"xwo-cyrl-ru",xwr:"xwr-latn-id",xwt:"xwt-latn-au",xww:"xww-latn-au",xxb:"xxb-latn-gh",xxk:"xxk-latn-id",xxm:"xxm-latn-au",xxr:"xxr-latn-br",xxt:"xxt-latn-id",xya:"xya-latn-au",xyb:"xyb-latn-au",xyj:"xyj-latn-au",xyk:"xyk-latn-au",xyl:"xyl-latn-br",xyt:"xyt-latn-au",xyy:"xyy-latn-au",xzh:"xzh-marc-cn",xzp:"xzp-latn-mx",yaa:"yaa-latn-pe",yab:"yab-latn-br",yac:"yac-latn-id",yad:"yad-latn-pe",yae:"yae-latn-ve",yaf:"yaf-latn-cd",yag:"yag-latn-cl",yai:"yai-cyrl-tj",yaj:"yaj-latn-cf",yak:"yak-latn-us",yal:"yal-latn-gn","yal-arab":"yal-arab-gn",yam:"yam-latn-zz",yan:"yan-latn-ni",yao:"yao-latn-mz",yap:"yap-latn-fm",yaq:"yaq-latn-mx",yar:"yar-latn-ve",yas:"yas-latn-zz",yat:"yat-latn-zz",yau:"yau-latn-ve",yav:"yav-latn-cm",yaw:"yaw-latn-br",yax:"yax-latn-ao",yay:"yay-latn-zz",yaz:"yaz-latn-zz",yba:"yba-latn-zz",ybb:"ybb-latn-cm",ybe:"ybe-latn-cn","ybe-ougr":"ybe-ougr-cn",ybh:"ybh-deva-np",ybi:"ybi-deva-np",ybj:"ybj-latn-ng",ybl:"ybl-latn-ng",ybm:"ybm-latn-pg",ybn:"ybn-latn-br",ybo:"ybo-latn-pg",ybx:"ybx-latn-pg",yby:"yby-latn-zz",ycl:"ycl-latn-cn",ycn:"ycn-latn-co",yda:"yda-latn-au",yde:"yde-latn-pg",ydg:"ydg-arab-pk",ydk:"ydk-latn-pg",yea:"yea-mlym-in","yea-knda":"yea-knda-in",yec:"yec-latn-de",yee:"yee-latn-pg",yei:"yei-latn-cm",yej:"yej-grek-il",yel:"yel-latn-cd",yer:"yer-latn-zz",yes:"yes-latn-ng",yet:"yet-latn-id",yeu:"yeu-telu-in",yev:"yev-latn-pg",yey:"yey-latn-bw",yga:"yga-latn-au",ygi:"ygi-latn-au",ygl:"ygl-latn-pg",ygm:"ygm-latn-pg",ygp:"ygp-plrd-cn",ygr:"ygr-latn-zz",ygu:"ygu-latn-au",ygw:"ygw-latn-zz",yhd:"yhd-hebr-il",yi:"yi-hebr-001",yia:"yia-latn-au",yig:"yig-yiii-cn",yih:"yih-hebr-de",yii:"yii-latn-au",yij:"yij-latn-au",yil:"yil-latn-au",yim:"yim-latn-in",yir:"yir-latn-id",yis:"yis-latn-pg",yiv:"yiv-yiii-cn",yka:"yka-latn-ph","yka-arab":"yka-arab-ph",ykg:"ykg-cyrl-ru",yki:"yki-latn-id",ykk:"ykk-latn-pg",ykm:"ykm-latn-pg",yko:"yko-latn-zz",ykr:"ykr-latn-pg",yky:"yky-latn-cf",yla:"yla-latn-pg",ylb:"ylb-latn-pg",yle:"yle-latn-zz",ylg:"ylg-latn-zz",yli:"yli-latn-id",yll:"yll-latn-zz",ylr:"ylr-latn-au",ylu:"ylu-latn-pg",yly:"yly-latn-nc",ymb:"ymb-latn-pg",yme:"yme-latn-pe",ymg:"ymg-latn-cd",ymk:"ymk-latn-mz","ymk-arab":"ymk-arab-mz",yml:"yml-latn-zz",ymm:"ymm-latn-so",ymn:"ymn-latn-id",ymo:"ymo-latn-pg",ymp:"ymp-latn-pg",yna:"yna-plrd-cn",ynd:"ynd-latn-au",yng:"yng-latn-cd",ynk:"ynk-cyrl-ru",ynl:"ynl-latn-pg",ynq:"ynq-latn-ng",yns:"yns-latn-cd",ynu:"ynu-latn-co",yo:"yo-latn-ng",yob:"yob-latn-pg",yog:"yog-latn-ph",yoi:"yoi-jpan-jp",yok:"yok-latn-us",yol:"yol-latn-gb",yom:"yom-latn-cd",yon:"yon-latn-zz",yot:"yot-latn-ng",yoy:"yoy-thai-th",yra:"yra-latn-pg",yrb:"yrb-latn-zz",yre:"yre-latn-zz",yrk:"yrk-cyrl-ru",yrl:"yrl-latn-br",yrm:"yrm-latn-au",yro:"yro-latn-br",yrs:"yrs-latn-id",yrw:"yrw-latn-pg",yry:"yry-latn-au",ysd:"ysd-yiii-cn",ysn:"ysn-yiii-cn",ysp:"ysp-yiii-cn",ysr:"ysr-cyrl-ru",yss:"yss-latn-zz",ysy:"ysy-plrd-cn",ytw:"ytw-latn-pg",yty:"yty-latn-au",yua:"yua-latn-mx",yub:"yub-latn-au",yuc:"yuc-latn-us",yud:"yud-hebr-il",yue:"yue-hant-hk","yue-cn":"yue-hans-cn","yue-hans":"yue-hans-cn",yuf:"yuf-latn-us",yug:"yug-cyrl-ru",yui:"yui-latn-co",yuj:"yuj-latn-zz",yul:"yul-latn-cf",yum:"yum-latn-us",yun:"yun-latn-ng",yup:"yup-latn-co",yuq:"yuq-latn-bo",yur:"yur-latn-us",yut:"yut-latn-zz",yuw:"yuw-latn-zz",yux:"yux-cyrl-ru",yuz:"yuz-latn-bo",yva:"yva-latn-id",yvt:"yvt-latn-ve",ywa:"ywa-latn-pg",ywg:"ywg-latn-au",ywn:"ywn-latn-br",ywq:"ywq-plrd-cn","ywq-yiii":"ywq-yiii-cn",ywr:"ywr-latn-au",ywu:"ywu-plrd-cn","ywu-yiii":"ywu-yiii-cn",yww:"yww-latn-au",yxa:"yxa-latn-au",yxg:"yxg-latn-au",yxl:"yxl-latn-au",yxm:"yxm-latn-au",yxu:"yxu-latn-au",yxy:"yxy-latn-au",yyr:"yyr-latn-au",yyu:"yyu-latn-pg",za:"za-latn-cn",zaa:"zaa-latn-mx",zab:"zab-latn-mx",zac:"zac-latn-mx",zad:"zad-latn-mx",zae:"zae-latn-mx",zaf:"zaf-latn-mx",zag:"zag-latn-sd",zah:"zah-latn-ng",zaj:"zaj-latn-tz",zak:"zak-latn-tz",zam:"zam-latn-mx",zao:"zao-latn-mx",zap:"zap-latn-mx",zaq:"zaq-latn-mx",zar:"zar-latn-mx",zas:"zas-latn-mx",zat:"zat-latn-mx",zau:"zau-tibt-in","zau-arab":"zau-arab-in",zav:"zav-latn-mx",zaw:"zaw-latn-mx",zax:"zax-latn-mx",zay:"zay-latn-et","zay-ethi":"zay-ethi-et",zaz:"zaz-latn-ng",zba:"zba-arab-001",zbc:"zbc-latn-my",zbe:"zbe-latn-my",zbt:"zbt-latn-id",zbu:"zbu-latn-ng",zbw:"zbw-latn-my",zca:"zca-latn-mx",zch:"zch-hani-cn",zdj:"zdj-arab-km",zea:"zea-latn-nl",zeg:"zeg-latn-pg",zeh:"zeh-hani-cn",zen:"zen-tfng-mr","zen-arab":"zen-arab-mr",zga:"zga-latn-tz",zgb:"zgb-hani-cn",zgh:"zgh-tfng-ma",zgm:"zgm-hani-cn",zgn:"zgn-hani-cn",zgr:"zgr-latn-pg",zh:"zh-hans-cn","zh-au":"zh-hant-au","zh-bn":"zh-hant-bn","zh-bopo":"zh-bopo-tw","zh-gb":"zh-hant-gb","zh-gf":"zh-hant-gf","zh-hanb":"zh-hanb-tw","zh-hant":"zh-hant-tw","zh-hk":"zh-hant-hk","zh-id":"zh-hant-id","zh-mo":"zh-hant-mo","zh-pa":"zh-hant-pa","zh-pf":"zh-hant-pf","zh-ph":"zh-hant-ph","zh-sr":"zh-hant-sr","zh-th":"zh-hant-th","zh-tw":"zh-hant-tw","zh-us":"zh-hant-us","zh-vn":"zh-hant-vn",zhd:"zhd-hani-cn","zhd-latn":"zhd-latn-vn",zhi:"zhi-latn-ng",zhn:"zhn-latn-cn","zhn-hani":"zhn-hani-cn",zhw:"zhw-latn-cm",zhx:"zhx-nshu-cn",zia:"zia-latn-zz",zik:"zik-latn-pg",zil:"zil-latn-gn",zim:"zim-latn-td",zin:"zin-latn-tz",ziw:"ziw-latn-tz",ziz:"ziz-latn-ng",zka:"zka-latn-id",zkb:"zkb-cyrl-ru",zkd:"zkd-latn-mm",zko:"zko-cyrl-ru",zkp:"zkp-latn-br",zkt:"zkt-kits-cn",zku:"zku-latn-au",zkz:"zkz-cyrl-ru",zla:"zla-latn-cd",zlj:"zlj-hani-cn","zlj-latn":"zlj-latn-cn",zlm:"zlm-latn-tg",zln:"zln-hani-cn",zlq:"zlq-hani-cn",zma:"zma-latn-au",zmb:"zmb-latn-cd",zmc:"zmc-latn-au",zmd:"zmd-latn-au",zme:"zme-latn-au",zmf:"zmf-latn-cd",zmg:"zmg-latn-au",zmh:"zmh-latn-pg",zmi:"zmi-latn-my",zmj:"zmj-latn-au",zmk:"zmk-latn-au",zml:"zml-latn-au",zmm:"zmm-latn-au",zmn:"zmn-latn-ga",zmo:"zmo-latn-sd",zmp:"zmp-latn-cd",zmq:"zmq-latn-cd",zmr:"zmr-latn-au",zms:"zms-latn-cd",zmt:"zmt-latn-au",zmu:"zmu-latn-au",zmv:"zmv-latn-au",zmw:"zmw-latn-cd",zmx:"zmx-latn-cg",zmy:"zmy-latn-au",zmz:"zmz-latn-cd",zna:"zna-latn-td",zne:"zne-latn-zz",zng:"zng-latn-vn",znk:"znk-latn-au",zns:"zns-latn-ng",zoc:"zoc-latn-mx",zoh:"zoh-latn-mx",zom:"zom-latn-in",zoo:"zoo-latn-mx",zoq:"zoq-latn-mx",zor:"zor-latn-mx",zos:"zos-latn-mx",zpa:"zpa-latn-mx",zpb:"zpb-latn-mx",zpc:"zpc-latn-mx",zpd:"zpd-latn-mx",zpe:"zpe-latn-mx",zpf:"zpf-latn-mx",zpg:"zpg-latn-mx",zph:"zph-latn-mx",zpi:"zpi-latn-mx",zpj:"zpj-latn-mx",zpk:"zpk-latn-mx",zpl:"zpl-latn-mx",zpm:"zpm-latn-mx",zpn:"zpn-latn-mx",zpo:"zpo-latn-mx",zpp:"zpp-latn-mx",zpq:"zpq-latn-mx",zpr:"zpr-latn-mx",zps:"zps-latn-mx",zpt:"zpt-latn-mx",zpu:"zpu-latn-mx",zpv:"zpv-latn-mx",zpw:"zpw-latn-mx",zpx:"zpx-latn-mx",zpy:"zpy-latn-mx",zpz:"zpz-latn-mx",zqe:"zqe-hani-cn","zqe-latn":"zqe-latn-cn",zrn:"zrn-latn-td",zro:"zro-latn-ec",zrp:"zrp-hebr-fr",zrs:"zrs-latn-id",zsa:"zsa-latn-pg",zsr:"zsr-latn-mx",zsu:"zsu-latn-pg",zte:"zte-latn-mx",ztg:"ztg-latn-mx",ztl:"ztl-latn-mx",ztm:"ztm-latn-mx",ztn:"ztn-latn-mx",ztp:"ztp-latn-mx",ztq:"ztq-latn-mx",zts:"zts-latn-mx",ztt:"ztt-latn-mx",ztu:"ztu-latn-mx",ztx:"ztx-latn-mx",zty:"zty-latn-mx",zu:"zu-latn-za",zua:"zua-latn-ng",zuh:"zuh-latn-pg",zum:"zum-arab-om",zun:"zun-latn-us",zuy:"zuy-latn-cm",zyg:"zyg-hani-cn",zyj:"zyj-latn-cn","zyj-hani":"zyj-hani-cn",zyn:"zyn-hani-cn",zyp:"zyp-latn-mm",zza:"zza-latn-tr",zzj:"zzj-hani-cn"},gs={}.hasOwnProperty;function du(_){const{language:E,script:S,region:x}=_;let I;var N,B;return S&&x&&(I=cu[Qi({language:E,script:S,region:x})])?(_.script=void 0,_.region=void 0):S&&(I=cu[Qi({language:E,script:S})])?_.script=void 0:x&&(I=cu[Qi({language:E,region:x})])?_.region=void 0:E&&(I=cu[E]),I&&(_.language=void 0,N=_,B=Ka(I),N.language||(N.language=B.language),N.script||(N.script=B.script),N.region||(N.region=B.region),B.variants&&N.variants.push(...B.variants)),Qi(_)}function sl(_,E){const S={},x=Ka(String(_||"").toLowerCase(),S),I=Qi(x);if(!I)return I;let N=-1;for(;++N<al.length;){let B=al[N].from;B.slice(0,4)==="und-"&&x.language&&(B=x.language+B.slice(3)),uu(I,B).length>0&&Ef(x,B,al[N].to)}for(N=-1;++N<Gs.length;)Pr(x,Gs[N].from.field,Gs[N].from.value)&&fu(x,Gs[N].to.field,Gs[N].to.value);if(function(B){du(B);const{language:G,script:C,region:K}=B;if(!G)return B;const V=Qi({language:G,script:C,region:K});V===du(Ka(G))?(B.script=void 0,B.region=void 0):K&&V===du(Ka(G+"-"+K))?B.script=void 0:C&&V===du(Ka(G+"-"+C))&&(B.region=void 0)}(x),x.variants.sort(),x.extensions.sort(hu),S.warning){let B;for(B in Oc)if(gs.call(Oc,B)){const G=Oc[B],C=x[B];if(C&&gs.call(G,C)){const K=G[C];S.warning("Deprecated "+B+" `"+C+"`, expected one of `"+K.join("`, `")+"`",-1,7)}}}return x.script&&(x.script=x.script.charAt(0).toUpperCase()+x.script.slice(1)),x.region&&(x.region=x.region.toUpperCase()),Qi(x)}function Ef(_,E,S){const x=Ka(E),I=Ka(S),N=[],B=x.language;let G;for(G in x)if(gs.call(x,G)){const C=x[G];C&&Pr(_,G,C)&&N.push(G)}for(G in I)if(gs.call(I,G)){const C=I[G];B&&C&&(N.includes(G)||!_[G])&&fu(_,G,G==="language"&&C==="und"?B:C)}}function Pr(_,E,S){let x,I=!1;if(S){const N=_[E];if(x=N,Array.isArray(N)){x=[];let B=-1;for(;++B<N.length;){const G=N[B];S.includes(G)?I=!0:x.push(G)}}else N===S&&(x=null,I=!0);_[E]=x}return I}function fu(_,E,S){const x=_[E];if(Array.isArray(x)){const I=Array.isArray(S)?S:[S];let N=-1;for(;++N<I.length;){const B=I[N];x.includes(B)||x.push(B)}}else _[E]=S}function hu(_,E){return _.singleton>E.singleton?1:_.singleton<E.singleton?-1:0}const ol={0:void 0,1:1,2:2,3:3,4:4,5:5,6:5,7:7,8:2,9:3,10:4,11:6,12:7,13:22,14:7,15:10,16:9,17:11,18:13,19:11,20:13};function Fc(_){return _==0?0:_.toString(2).match(/1/g).length}function ll(_,E){let S,x=parseInt("0x"+_,16),I=x&E[0],N=x&E[1];return S=Fc(I)+2*Fc(N),S}function $s(){const _=this.context,E=(0,oe.default)(_).getInstance();let S,x,I,N,B,G,C,K,V,D,z;function $(fe){if(!(fe&&fe.currentRepresentation&&fe.currentRepresentation.mediaInfo&&fe.currentRepresentation.mediaInfo.type))return;const ke=fe.currentRepresentation.mediaInfo.type;C[ke]=fe.currentRepresentation}function ie(fe,ke){return fe&&I[ke]&&I[ke][fe]?I[ke][fe].list:[]}function se(fe,ke){return fe&&I[ke]&&I[ke][fe]?I[ke][fe].current:null}function ae(fe){let ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!fe||!fe.streamInfo)return;const Ce=fe.type,Ve=fe.streamInfo.id,Ke=se(Ce,Ve);if(I[Ve]&&I[Ve][Ce]&&(I[Ve][Ce].current=fe,I[Ve][Ce].current&&(Ce!==F.default.TEXT&&!ge(fe,Ke)||Ce===F.default.TEXT&&fe.isFragmented)&&E.trigger(L.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:Ke,newMediaInfo:fe,switchMode:N.get().streaming.trackSwitchMode[Ce],options:ke},{streamId:Ve}),!ke.hasOwnProperty("noSettingsSave")||!ke.noSettingsSave)){let st=function(ft){const St={lang:ft.lang,viewpoint:ft.viewpoint,roles:ft.roles,accessibility:ft.accessibility,audioChannelConfiguration:ft.audioChannelConfiguration,codec:ft.codec};return St.lang||St.viewpoint||St.role&&St.role.length>0||St.accessibility&&St.accessibility.length>0||St.audioChannelConfiguration&&St.audioChannelConfiguration.length>0?St:null}(fe);if(!st||!I[Ve][Ce].storeLastSettings)return;st.roles&&(st.role=st.roles[0],delete st.roles),st.accessibility&&(st.accessibility=st.accessibility[0]),st.audioChannelConfiguration&&(st.audioChannelConfiguration=st.audioChannelConfiguration[0]),G[Ce]=st,z.setSavedMediaSettings(Ce,st)}}function ce(fe,ke){fe&&ke&&(B[fe]=ke)}function de(fe){return fe?B[fe]:null}function ge(fe,ke){if(!fe&&!ke)return!0;if(!fe||!ke)return!1;const Ce=fe.id===ke.id,Ve=JSON.stringify(fe.viewpoint)===JSON.stringify(ke.viewpoint),Ke=fe.lang===ke.lang,st=fe.codec===ke.codec,ft=JSON.stringify(fe.roles)===JSON.stringify(ke.roles),St=JSON.stringify(fe.accessibility)===JSON.stringify(ke.accessibility),Bt=JSON.stringify(fe.audioChannelConfiguration)===JSON.stringify(ke.audioChannelConfiguration);return Ce&&st&&Ve&&Ke&&ft&&St&&Bt}function we(){I={},G={},C={},B={audio:null,video:null,text:null},E.off(pe.default.REPRESENTATION_SWITCH,$,S)}function ne(fe,ke,Ce){let Ve=[];return fe.forEach(function(Ke){ke(Ce,Ke)&&Ve.push(Ke)}),Ve.length!==0||ke===Ie&&N.get().streaming.assumeDefaultRoleAsMain&&ve(Ce.role,{schemeIdUri:F.default.DASH_ROLE_SCHEME_ID,value:k.default.MAIN})&&(x.info("no track with Role set to main - assuming main as default and searching again"),Ve=ne(fe,Te,null),Ve.length!==0)?Ve:(x.info("Filter-Function ("+ke.name+") resulted in no tracks; setting ignored"),fe)}function U(fe,ke){try{return!fe.lang||fe.lang instanceof RegExp?ke.lang.match(fe.lang):ke.lang!==""&&uu(ke.lang,sl(fe.lang)).length>0}catch{return!1}}function X(fe,ke){return fe.index===void 0||fe.index===null||ke.index===fe.index}function J(fe,ke){return fe.id===void 0||fe.id===null||ke.id===fe.id}function me(fe,ke){return!fe.viewpoint||!!ke.viewpoint.filter(function(Ce){return ve(Ce,fe.viewpoint)})[0]}function Ie(fe,ke){let Ce=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return!!ke.roles&&(!fe.role||!!ke.roles.filter(function(Ve){return ve(Ve,fe.role)})[0]||ke.type===F.default.AUDIO&&Ce)}function Te(fe,ke){return!ke.roles||ke.roles.length===0}function xe(fe,ke){let Ce;return Ce=fe.accessibility?!!ke.accessibility.filter(function(Ve){return ve(Ve,fe.accessibility)})[0]:!ke.accessibility.length,Ce}function Oe(fe,ke){return!fe.audioChannelConfiguration||!!ke.audioChannelConfiguration.filter(function(Ce){return ve(Ce,fe.audioChannelConfiguration)})[0]}function je(fe,ke){return!fe.codec||fe.codec===ke.codec}function ee(fe){let ke=0,Ce=[];return fe.forEach(Ve=>{isNaN(Ve.selectionPriority)||(Ve.selectionPriority>ke?(ke=Ve.selectionPriority,Ce=[Ve]):Ve.selectionPriority===ke&&Ce.push(Ve))}),Ce}function te(fe){let ke,Ce=0,Ve=[];return fe.forEach(function(Ke){ke=Math.max.apply(Math,Ke.bitrateList.map(function(st){return st.bandwidth})),ke>Ce?(Ce=ke,Ve=[Ke]):ke===Ce&&Ve.push(Ke)}),Ve}function Ae(fe){return fe[0]&&fe[0].type===F.default.VIDEO?function(ke){let Ce,Ve=1/0,Ke=[];return ke.forEach(function(st){Ce=st.bitrateList.reduce(function(St,Bt){const Ht=Math.max(1,Bt.width*Bt.height);return St+Bt.bandwidth/Ht},0)/st.bitrateList.length,Ce<Ve?(Ve=Ce,Ke=[st]):Ce===Ve&&Ke.push(st)}),Ke}(fe):fe[0]&&fe[0].type===F.default.AUDIO?function(ke){let Ce=1/0,Ve=[];return ke.forEach(function(Ke){let st=Ke.audioChannelConfiguration.reduce(function(St,Bt){return St+(function(Ht){let hn;if(!Ht||!Ht.schemeIdUri||!Ht.value)return;const In=Ht.schemeIdUri,Ot=Ht.value;return In==="urn:mpeg:dash:23003:3:audio_channel_configuration:2011"||In==="urn:mpeg:mpegB:cicp:ChannelConfiguration"?hn=ol[Ot]:In==="tag:dolby.com,2014:dash:audio_channel_configuration:2011"?hn=function(Zt){if(Zt.length===4)return ll(Zt,[63880,1648])}(Ot):In==="tag:dolby.com,2015:dash:audio_channel_configuration:2015"?hn=function(Zt){if(Zt.length===6)return Zt==="800000"?24:ll(Zt,[56834,205245])}(Ot):In==="tag:dts.com,2014:dash:audio_channel_configuration:2012"?hn=parseInt(Ot):In==="tag:dts.com,2018:uhd:audio_channel_configuration"&&(hn=function(Zt){if(!(Zt.length>8))return ll(Zt,[4294901727,0])}(Ot)),hn}(Bt)||0)},0)/Ke.audioChannelConfiguration.length;Ke.hasOwnProperty("supplementalProperties")&&Ke.supplementalProperties.some(St=>St.schemeIdUri==="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&St.value==="JOC")&&(st=16),st||(st=1);let ft=Ke.bitrateList.reduce(function(St,Bt){return St+Bt.bandwidth/st},0)/Ke.bitrateList.length;ft<Ce?(Ce=ft,Ve=[Ke]):ft===Ce&&Ve.push(Ke)}),Ve}(fe):fe}function _e(fe){let ke,Ce=0,Ve=[];return fe.forEach(function(Ke){ke=Ke.representationCount,ke>Ce?(Ce=ke,Ve=[Ke]):ke===Ce&&Ve.push(Ke)}),Ve}function re(fe,ke){if(fe===F.default.TEXT)return function(Ke){if(!Ke||Ke.length===0)return null;const st=Ke.filter(ft=>!(ft&&ft.roles&&ft.roles.length>0)||ft.roles.every(St=>St.schemeIdUri!==F.default.DASH_ROLE_SCHEME_ID||St.value!==k.default.FORCED_SUBTITLE));return st.length>0?st[0]:Ke[0]}(ke);let Ce;const Ve=K.getCustomInitialTrackSelectionFunction();if(Ce=function(Ke){try{let st;return st=function(ft){try{const St=ft.filter(Bt=>{const Ht=Bt.type;return Bt.bitrateList.some(hn=>{const In=V.getAbrBitrateParameter("maxBitrate",Ht),Ot=V.getAbrBitrateParameter("minBitrate",Ht);return!(In>-1&&hn.bandwidth>1e3*In||Ot>-1&&hn.bandwidth<1e3*Ot)})});return St.length>0?St:ft}catch(St){return x.error(St),ft}}(Ke),st=function(ft){try{if(!N.get().streaming.abr.limitBitrateByPortal)return ft;const{elementWidth:St}=D.getVideoElementSize(),Bt=ft.filter(Ht=>Ht.type!==F.default.VIDEO||Ht.bitrateList.some(hn=>hn.width<=St));return Bt.length>0?Bt:ft}catch(St){return x.error(St),ft}}(st),st}catch(st){return x.error(st),Ke}}(ke),Ve&&typeof Ve=="function")Ce=Ve(Ce);else if(C[fe])Ce=function(Ke,st){if(!Ke||Ke.length===0||!st||!C[st])return Ke;const ft=C[st].bandwidth;if(!ft||isNaN(ft))return Ke;let St={min:NaN,track:null};return Ke.forEach(Bt=>{Bt.bitrateList.forEach(Ht=>{const hn=Math.abs(Ht.bandwidth-ft);(isNaN(St.min)||hn<St.min)&&(St.min=hn,St.track=Bt)})}),St.track?[St.track]:Ke}(Ce,fe);else if(N.get().streaming.ignoreSelectionPriority||(x.info("Trying to find track with highest selectionPriority"),Ce=function(Ke){return ee(Ke)}(Ce)),Ce.length>1&&N.get().streaming.prioritizeRoleMain&&(x.info("Trying to find a main track"),Ce=ne(Ce,Ie,{role:{schemeIdUri:F.default.DASH_ROLE_SCHEME_ID,value:k.default.MAIN}})),Ce.length>1){x.info("Selecting track based on selectionModeForInitialTrack");let Ke=N.get().streaming.selectionModeForInitialTrack;switch(Ke){case F.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:Ce=function(st){let ft=te(st);return ft.length>1&&(ft=_e(ft)),ft}(Ce);break;case F.default.TRACK_SELECTION_MODE_FIRST_TRACK:Ce=he(Ce);break;case F.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:Ce=function(st){let ft=Ae(st);return ft.length>1&&(ft=te(ft)),ft}(Ce);break;case F.default.TRACK_SELECTION_MODE_WIDEST_RANGE:Ce=function(st){let ft=_e(st);return ft.length>1&&(ft=te(st)),ft}(Ce);break;default:x.warn(`Track selection mode ${Ke} is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK`),Ce=he(Ce)}}return Ce.length>0?Ce[0]:ke[0]}function he(fe){return fe[0]}function ve(fe,ke){return!(!fe||!ke)&&JSON.stringify({schemeIdUri:fe.schemeIdUri,value:fe.value})===JSON.stringify({schemeIdUri:ke.schemeIdUri,value:ke.value})}return S={addTrack:function(fe){if(!fe)return;const ke=fe.type;if((Ce=ke)!==F.default.AUDIO&&Ce!==F.default.VIDEO&&Ce!==F.default.TEXT&&Ce!==F.default.IMAGE)return;var Ce;let Ve=fe.streamInfo.id;I[Ve]||(I[Ve]=function(){const st=N.get().streaming.saveLastMediaSettingsForCurrentStreamingSession;return{audio:{list:[],storeLastSettings:st,current:null},video:{list:[],storeLastSettings:st,current:null},text:{list:[],storeLastSettings:st,current:null},image:{list:[],storeLastSettings:st,current:null}}}());const Ke=I[Ve][ke].list;for(let st=0,ft=Ke.length;st<ft;++st)if(ge(Ke[st],fe))return;Ke.push(fe)},areTracksEqual:ge,clearDataForStream:function(fe){I[fe]&&delete I[fe]},getCurrentTrackFor:se,getInitialSettings:de,getTracksFor:ie,getTracksWithHighestSelectionPriority:ee,getTracksWithHighestBitrate:te,getTracksWithHighestEfficiency:Ae,getTracksWithWidestRange:_e,initialize:function(){E.on(pe.default.REPRESENTATION_SWITCH,$,S)},isCurrentTrack:function(fe){if(!fe)return!1;const ke=fe.type,Ce=fe.streamInfo.id;return I[Ce]&&I[Ce][ke]&&ge(I[Ce][ke].current,fe)},matchSettings:function(fe,ke){let Ce=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{let Ve=!1;if(fe.lang){if(fe.lang instanceof RegExp)Ve=ke.lang.match(fe.lang);else if(ke.lang!==""){const Ht=sl(fe.lang);Ht&&(Ve=uu(ke.lang,Ht).length>0)}}else Ve=!0;const Ke=fe.index===void 0||fe.index===null||ke.index===fe.index,st=!fe.viewpoint||!!ke.viewpoint.filter(function(Ht){return ve(Ht,fe.viewpoint)})[0],ft=!fe.role||!!ke.roles.filter(function(Ht){return ve(Ht,fe.role)})[0];let St=!fe.accessibility||!!ke.accessibility.filter(function(Ht){return ve(Ht,fe.accessibility)})[0],Bt=!fe.audioChannelConfiguration||!!ke.audioChannelConfiguration.filter(function(Ht){return ve(Ht,fe.audioChannelConfiguration)})[0];return Ve&&Ke&&st&&(ft||ke.type===F.default.AUDIO&&Ce)&&St&&Bt}catch{return!1}},matchSettingsAccessibility:xe,matchSettingsAudioChannelConfig:Oe,matchSettingsIndex:X,matchSettingsLang:U,matchSettingsRole:Ie,matchSettingsViewPoint:me,reset:we,saveTextSettingsDisabled:function(){z.setSavedMediaSettings(F.default.TEXT,null)},selectInitialTrack:re,setConfig:function(fe){fe&&(fe.domStorage&&(z=fe.domStorage),fe.settings&&(N=fe.settings),fe.customParametersModel&&(K=fe.customParametersModel),fe.mediaPlayerModel&&(V=fe.mediaPlayerModel),fe.videoModel&&(D=fe.videoModel))},setInitialMediaSettingsForType:function(fe,ke){let Ce=G[fe]||de(fe);const Ve=ie(fe,ke.id);let Ke=[];Ce&&Object.keys(Ce).length!==0||(Ce=z.getSavedMediaSettings(fe),Ce&&delete Ce.codec,ce(fe,Ce)),Ve&&Ve.length!==0&&(Ce&&(Ke=Array.from(Ve),x.info("Filtering "+Ke.length+" "+fe+" tracks based on settings"),Ke=ne(Ke,J,Ce),Ke=ne(Ke,U,Ce),Ke=ne(Ke,X,Ce),Ke=ne(Ke,me,Ce),fe===F.default.AUDIO&&G[fe]||(Ke=ne(Ke,Ie,Ce)),Ke=ne(Ke,xe,Ce),Ke=ne(Ke,Oe,Ce),Ke=ne(Ke,je,Ce),x.info("Filtering "+fe+" tracks ended, found "+Ke.length+" matching track(s).")),Ke.length===0?ae(re(fe,Ve)):Ke.length>1?ae(re(fe,Ke)):ae(Ke[0]))},setInitialSettings:ce,setTrack:ae},x=(0,Be.default)(_).getInstance().getLogger(S),we(),S}$s.__dashjs_factory_name="MediaController";const ul=Ee.default.getSingletonFactory($s);Ee.default.updateSingletonFactory($s.__dashjs_factory_name,ul);var So=ul;const cl=NaN;class bf{constructor(E,S){this.data={baseUrls:E||null,selectedIdx:S||cl},this.children=[]}}function Tf(){let _,E,S,x;const I=this.context,N=(0,On.default)(I).getInstance();function B(V,D,z){const $=G(z);V[D]?N.areEqual($,V[D].data.baseUrls)||(V[D].data.baseUrls=$,V[D].data.selectedIdx=cl):V[D]=new bf($)}function G(V){let D=S.getBaseURLsFromElement(V);const z=x.getSynthesizedBaseUrlElements(D);return z&&z.length>0&&z.forEach($=>{const ie=D.findIndex(se=>se.serviceLocation===$.serviceLocation);ie!==-1?D[ie]=$:D.push($)}),D}function C(V,D){const z=D||E;V(z.data),z.children&&z.children.forEach($=>C(V,$))}function K(){E=new bf}return _={reset:K,update:function(V){(function(D){(function(){if(!S||!S.hasOwnProperty("getBaseURLsFromElement")||!S.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();const z=G(D);N.areEqual(z,E.data.baseUrls)||(E.data.baseUrls=z,E.data.selectedIdx=cl),D&&D.Period&&D.Period.forEach(($,ie)=>{B(E.children,ie,$),$.AdaptationSet&&$.AdaptationSet.forEach((se,ae)=>{B(E.children[ie].children,ae,se),se.Representation&&se.Representation.sort(S.getRepresentationSortFunction()).forEach((ce,de)=>{B(E.children[ie].children[ae].children,de,ce)})})})})(V)},getForPath:function(V){let D=E;const z=[D.data];return V&&V.forEach($=>{D=D.children[$],D&&z.push(D.data)}),z.filter($=>$.baseUrls.length)},invalidateSelectedIndexes:function(V){C(D=>{isNaN(D.selectedIdx)||V===D.baseUrls[D.selectedIdx].serviceLocation&&(D.selectedIdx=cl)})},setConfig:function(V){V.adapter&&(S=V.adapter),V.contentSteeringController&&(x=V.contentSteeringController)},getBaseUrls:function(V){return G(V)}},K(),_}Tf.__dashjs_factory_name="BaseURLTreeModel";var Sf=Ee.default.getClassFactory(Tf);function dl(_){let E;const S=(_=_||{}).blacklistController;return E={select:function(x){return x&&function(I){let N,B,G=0,C=[],K=0;if(B=I.sort(function(V,D){let z=V.dvbPriority-D.dvbPriority;return isNaN(z)?0:z}).filter(function(V,D,z){return!D||z[0].dvbPriority&&V.dvbPriority&&z[0].dvbPriority===V.dvbPriority}),B.length)return B.length>1&&(B.forEach(V=>{G+=V.dvbWeight,C.push(G)}),N=Math.floor(Math.random()*(G-1)),C.every((V,D)=>(K=D,!(N<V)))),B[K]}(function(I){let N=[];return I.filter(function(B){return!S.contains(B.serviceLocation)||(B.dvbPriority&&N.push(B.dvbPriority),!1)}).filter(function(B){return!N.length||!B.dvbPriority||N.indexOf(B.dvbPriority)===-1})}(x))}},E}dl.__dashjs_factory_name="DVBSelector";var gu=Ee.default.getClassFactory(dl);function mu(_){let E;const S=(_=_||{}).blacklistController;return E={select:function(x){let I,N=0;return x&&x.some((B,G)=>(N=G,!S.contains(B.serviceLocation)))&&(I=x[N]),I}},E}mu.__dashjs_factory_name="BasicSelector";var zc=Ee.default.getClassFactory(mu);function pu(){const _=this.context,E=(0,oe.default)(_).getInstance();let S,x,I,N=[];function B(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],V=0,D=NaN;for(;V<C.length;){const z=C[V],$=K.findIndex(ie=>ie.serviceLocation&&ie.serviceLocation===z);if($!==-1&&!I.contains(K[$].serviceLocation)){D=$;break}V+=1}return D}function G(C){const K=x.getCurrentSteeringResponseData();if(!K)return;const V=C.entry,D=setTimeout(()=>{I.remove(V),N.splice(N.indexOf(D,1))},1e3*K.ttl);N.push(D)}return S={selectBaseUrlIndex:function(C){let K=NaN;if(isNaN(C.selectedIdx)){const D=x.getSteeringDataFromManifest();D&&D.defaultServiceLocationArray.length>0&&(K=B(D.defaultServiceLocationArray,C.baseUrls))}const V=x.getCurrentSteeringResponseData();return C.baseUrls&&C.baseUrls.length&&V&&V.pathwayPriority&&V.pathwayPriority.length&&(K=B(V.pathwayPriority,C.baseUrls)),K},setConfig:function(C){C.blacklistController&&(I=C.blacklistController),C.contentSteeringController&&(x=C.contentSteeringController),E.on(C.addBlacklistEventName,G,S)},reset:function(){N.forEach(C=>clearTimeout(C)),N=[]}},x=ru(_).getInstance(),S}pu.__dashjs_factory_name="ContentSteeringSelector";var Uc=Ee.default.getClassFactory(pu);function _f(){const _=this.context,E=(0,oe.default)(_).getInstance(),S=(0,Q.default)(_).getInstance();let x,I,N,B,G,C;function K(){G.reset(),I.reset()}return x={chooseSelector:function(V){(0,Gt.checkParameterType)(V,"boolean"),C=V?B:N},select:function(V){if(!V)return;if(S.get().streaming.applyContentSteering){const z=G.selectBaseUrlIndex(V);isNaN(z)||z===-1||(V.selectedIdx=z)}if(!isNaN(V.selectedIdx))return V.baseUrls[V.selectedIdx];let D=C.select(V.baseUrls);return D?(V.selectedIdx=V.baseUrls.indexOf(D),D):(E.trigger(L.default.URL_RESOLUTION_FAILED,{error:new Pe.default(W.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,W.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(C===N&&K()))},reset:K,setConfig:function(V){V.selector&&(C=V.selector),V.contentSteeringSelector&&(G=V.contentSteeringSelector)}},I=tu(_).create({updateEventName:L.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:L.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),N=zc(_).create({blacklistController:I}),B=gu(_).create({blacklistController:I}),G=Uc(_).create(),G.setConfig({blacklistController:I,addBlacklistEventName:L.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),C=N,x}_f.__dashjs_factory_name="BaseURLSelector";var xf=Ee.default.getClassFactory(_f);function wf(){let _,E;const S=this.context,x=(0,oe.default)(S).getInstance(),I=dn(S).getInstance();let N,B,G;function C(V){N.update(V),B.chooseSelector(E.getIsDVB(V)),x.trigger(pe.default.BASE_URLS_UPDATED,{baseUrls:K(V)})}function K(V){return N.getBaseUrls(V)}return _={reset:function(){N.reset(),B.reset()},initialize:function(V){N.setConfig({adapter:E,contentSteeringController:G}),C(V)},resolve:function(V){const D=N.getForPath(V).reduce((z,$)=>{const ie=B.select($);return ie?(I.isRelative(ie.url)?z.url=I.resolve(ie.url,z.url):(z.url=ie.url,z.serviceLocation=ie.serviceLocation),z.availabilityTimeOffset=ie.availabilityTimeOffset,z.availabilityTimeComplete=ie.availabilityTimeComplete,z.queryParams=ie.queryParams,z):new mi},new mi);if(!I.isRelative(D.url))return D},setConfig:function(V){V.baseURLTreeModel&&(N=V.baseURLTreeModel),V.baseURLSelector&&(B=V.baseURLSelector),V.adapter&&(E=V.adapter),V.contentSteeringController&&(G=V.contentSteeringController)},getBaseUrls:K,update:C},N=Sf(S).create(),B=xf(S).create(),x.on(L.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(V){N.invalidateSelectedIndexes(V.entry)},_),_}wf.__dashjs_factory_name="BaseURLController";var Dg=Ee.default.getClassFactory(wf),yu=class extends Ge{constructor(_,E){super(),this.url=_||null,this.type=E||null,this.mediaType=F.default.STREAM,this.responseType=""}};function Wa(_){_=_||{};const E=this.context,S=(0,oe.default)(E).getInstance();let x,I=mo(E).create({errHandler:_.errHandler,dashMetrics:_.dashMetrics,mediaPlayerModel:_.mediaPlayerModel,errors:W});return x={load:function(N,B,G){const C=function(K,V){B.resolved=!0,B.resolvedContent=K||null,S.trigger(L.default.XLINK_ELEMENT_LOADED,{element:B,resolveObject:G,error:K||V?null:new Pe.default(W.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,W.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+N)})};if(N==="urn:mpeg:dash:resolve-to-zero:2013")C(null,!0);else{const K=new yu(N,Le.HTTPRequest.XLINK_EXPANSION_TYPE);I.load({request:K,success:function(V){C(V)},error:function(){C(null)}})}},reset:function(){I&&(I.abort(),I=null)}},x}Wa.__dashjs_factory_name="XlinkLoader";var If=Ee.default.getClassFactory(Wa);const ga="onLoad";function ma(_){_=_||{};let E=this.context,S=(0,oe.default)(E).getInstance();const x=dn(E).getInstance();let I,N,B,G;function C($,ie,se){let ae,ce,de={};de.elements=$,de.type=ie,de.resolveType=se,de.elements.length===0&&V(de);for(let ge=0;ge<de.elements.length;ge++)ae=de.elements[ge],ce=x.isHTTPURL(ae.url)?ae.url:ae.originalContent.BaseURL+ae.url,G.load(ce,ae,de)}function K($){let ie,se,ae="";if(ie=$.element,se=$.resolveObject,ie.resolvedContent){let ce=0;ie.resolvedContent.indexOf("<?xml")===0&&(ce=ie.resolvedContent.indexOf("?>")+2),ae=ie.resolvedContent.substr(0,ce)+"<response>"+ie.resolvedContent.substr(ce)+"</response>",ie.resolvedContent=N.parseXml(ae).response}(function(ce){let de,ge;for(de=0;de<ce.elements.length;de++)if(ge=ce.elements[de],ge.resolved===!1)return!1;return!0})(se)&&V(se)}function V($){let ie,se,ae=[];if(function(ce){let de,ge,we,ne,U,X,J=[];for(ne=ce.elements.length-1;ne>=0;ne--){if(de=ce.elements[ne],ge=de.type,de.resolvedContent){if(de.resolvedContent)for(U=0;U<de.resolvedContent[ge].length;U++)we=de.resolvedContent[ge][U],J.push(we)}else delete de.originalContent["xlink:actuate"],delete de.originalContent["xlink:href"],J.push(de.originalContent);for(de.parentElement[ge].splice(de.index,1),X=0;X<J.length;X++)de.parentElement[ge].splice(de.index+X,0,J[X]);J=[]}ce.elements.length>0&&N.getIron().run(B)}($),$.resolveType==="onActuate"&&S.trigger(L.default.XLINK_READY,{manifest:B}),$.resolveType===ga)switch($.type){case k.default.PERIOD:for(ie=0;ie<B[k.default.PERIOD].length;ie++)se=B[k.default.PERIOD][ie],se.hasOwnProperty(k.default.ADAPTATION_SET)&&(ae=ae.concat(D(se[k.default.ADAPTATION_SET],se,k.default.ADAPTATION_SET,ga))),se.hasOwnProperty(k.default.EVENT_STREAM)&&(ae=ae.concat(D(se[k.default.EVENT_STREAM],se,k.default.EVENT_STREAM,ga)));C(ae,k.default.ADAPTATION_SET,ga);break;case k.default.ADAPTATION_SET:S.trigger(L.default.XLINK_READY,{manifest:B})}}function D($,ie,se,ae){let ce,de,ge,we=[];for(de=$.length-1;de>=0;de--)ce=$[de],ce.hasOwnProperty("xlink:href")&&ce["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&$.splice(de,1);for(de=0;de<$.length;de++)ce=$[de],ce.hasOwnProperty("xlink:href")&&ce.hasOwnProperty("xlink:actuate")&&ce["xlink:actuate"]===ae&&(ge=z(ce["xlink:href"],ie,se,de,ae,ce),we.push(ge));return we}function z($,ie,se,ae,ce,de){return{url:$,parentElement:ie,type:se,index:ae,resolveType:ce,originalContent:de,resolvedContent:null,resolved:!1}}return I={resolveManifestOnLoad:function($){let ie;B=$,B.Period?(ie=D(B.Period,B,k.default.PERIOD,ga),C(ie,k.default.PERIOD,ga)):S.trigger(L.default.XLINK_READY,{manifest:B})},setParser:function($){$&&(N=$)},reset:function(){S.off(L.default.XLINK_ELEMENT_LOADED,K,I),G&&(G.reset(),G=null)}},S.on(L.default.XLINK_ELEMENT_LOADED,K,I),G=If(E).create({errHandler:_.errHandler,dashMetrics:_.dashMetrics,mediaPlayerModel:_.mediaPlayerModel,settings:_.settings}),I}ma.__dashjs_factory_name="XlinkController";var fl=Ee.default.getClassFactory(ma);function Ra(_){function E(I,N){for(let B in I)N.hasOwnProperty(B)||(N[B]=I[B])}function S(I,N,B){for(let G=0,C=I.length;G<C;++G){const K=I[G];if(N[K.name])if(B[K.name]){if(K.merge){const V=N[K.name],D=B[K.name];typeof V=="object"&&typeof D=="object"?E(V,D):B[K.name]=V+D}}else B[K.name]=N[K.name]}}function x(I,N){for(let B=0,G=I.children.length;B<G;++B){const C=I.children[B],K=N[C.name];if(K)for(let V=0,D=K.length;V<D;++V){const z=K[V];S(I.properties,N,z),x(C,z)}}}return{run:function(I){if(I===null||typeof I!="object")return I;if(I.Period&&"period"in _){const N=_.period,B=I.Period;for(let G=0,C=B.length;G<C;++G){const K=B[G];if(x(N,K),"adaptationset"in _){const V=K.AdaptationSet;if(V){const D=_.adaptationset;for(let z=0,$=V.length;z<$;++z)x(D,V[z])}}}}return I}}}Ra.__dashjs_factory_name="ObjectIron";var Bc=Ee.default.getClassFactory(Ra),vu=class{constructor(_,E){this._test=_,this._converter=E}get test(){return this._test}get converter(){return this._converter}};const Af=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/;var Hs=class extends vu{constructor(){super((_,E,S)=>{const x=[k.default.MIN_BUFFER_TIME,k.default.MEDIA_PRESENTATION_DURATION,k.default.MINIMUM_UPDATE_PERIOD,k.default.TIMESHIFT_BUFFER_DEPTH,k.default.MAX_SEGMENT_DURATION,k.default.MAX_SUBSEGMENT_DURATION,k.default.SUGGESTED_PRESENTATION_DELAY,k.default.START,F.default.START_TIME,k.default.DURATION],I=x.length;for(let N=0;N<I;N++)if(E===x[N])return Af.test(S);return!1},_=>{const E=Af.exec(_);let S=31536e3*parseFloat(E[3]||0)+2592e3*parseFloat(E[5]||0)+86400*parseFloat(E[7]||0)+3600*parseFloat(E[9]||0)+60*parseFloat(E[11]||0)+parseFloat(E[13]||0);return E[1]!==void 0&&(S=-S),S})}};const _o=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;var xo=class extends vu{constructor(){super((_,E,S)=>_o.test(S),_=>{const E=_o.exec(_);let S;if(S=Date.UTC(parseInt(E[1],10),parseInt(E[2],10)-1,parseInt(E[3],10),parseInt(E[4],10),parseInt(E[5],10),E[6]&&parseInt(E[6],10)||0,E[7]&&1e3*parseFloat(E[7])||0),E[9]&&E[10]){const x=60*parseInt(E[9],10)+parseInt(E[10],10);S+=(E[8]==="+"?-1:1)*x*60*1e3}return new Date(S)})}};const Eu=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,jc=[k.default.ID];var wo=class extends vu{constructor(){super((_,E,S)=>Eu.test(S)&&jc.indexOf(E)===-1,_=>parseFloat(_))}},ms=class extends vu{constructor(){super((_,E)=>{const S={[k.default.ADAPTATION_SET]:[k.default.LANG],[k.default.REPRESENTATION]:[k.default.LANG],[k.default.CONTENT_COMPONENT]:[k.default.LANG],[k.default.LABEL]:[k.default.LANG],[k.default.GROUP_LABEL]:[k.default.LANG]};if(S.hasOwnProperty(_)){let x=S[_];return x!==void 0&&x.indexOf(E)>=0}return!1},_=>sl(_)||String(_))}},zr=class{constructor(_){var E;this._name=_,this._merge=(E=_)&&E.length&&E.charAt(0)===E.charAt(0).toUpperCase()}get name(){return this._name}get merge(){return this._merge}},_r=class{constructor(_,E,S){this._name=_||"",this._properties=[],this._children=S||[],Array.isArray(E)&&E.forEach(x=>{this._properties.push(new zr(x))})}get name(){return this._name}get children(){return this._children}get properties(){return this._properties}},ps=class extends _r{constructor(){const _=[k.default.PROFILES,k.default.WIDTH,k.default.HEIGHT,k.default.SAR,k.default.FRAMERATE,k.default.AUDIO_SAMPLING_RATE,k.default.MIME_TYPE,k.default.SEGMENT_PROFILES,k.default.CODECS,k.default.MAXIMUM_SAP_PERIOD,k.default.START_WITH_SAP,k.default.MAX_PLAYOUT_RATE,k.default.CODING_DEPENDENCY,k.default.SCAN_TYPE,k.default.FRAME_PACKING,k.default.AUDIO_CHANNEL_CONFIGURATION,k.default.CONTENT_PROTECTION,k.default.INBAND_EVENT_STREAM];super(k.default.ADAPTATION_SET,_,[new _r(k.default.REPRESENTATION,_,[new _r(k.default.SUB_REPRESENTATION,_)])])}},Si=class extends _r{constructor(){const _=[k.default.SEGMENT_BASE,k.default.SEGMENT_TEMPLATE,k.default.SEGMENT_LIST];super(k.default.PERIOD,_,[new _r(k.default.ADAPTATION_SET,_,[new _r(k.default.REPRESENTATION,_)])])}};const Ri={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&apos;":"'"};function ys(_,E){const S=E.split(/(&[#a-zA-Z0-9]+;)/);if(S.length<=1)return E;for(let x=1;x<S.length;x+=2){const I=S[x];if(I.charAt(1)==="#"){let N;N=I.charAt(2)==="x"?parseInt(I.substring(3,I.length-1),16):parseInt(I.substring(2,I.length-1),10),!isNaN(N)&&N>=0&&N<=1114111&&(S[x]=String.fromCodePoint(N))}else _.hasOwnProperty(I)&&(S[x]=_[I])}return S.join("")}function Io(_,E){var S=(E=E||{}).pos||0,x=!!E.keepComments,I=!!E.keepWhitespace,N=E.attrMatchers||[],B=E.nodesAsArray||[],G="<",C=60,K=">",V=62,D=45,z=47,$=33,ie=39,se=34,ae=91,ce=93;function de(Ie,Te){for(var xe=[];_[S];)if(_.charCodeAt(S)==C){if(_.charCodeAt(S+1)===z){var Oe=S+2;if(S=_.indexOf(K,S),_.substring(Oe,S).indexOf(Ie)==-1){var je=_.substring(0,S).split(`
`);throw new Error(`Unexpected close tag
Line: `+(je.length-1)+`
Column: `+(je[je.length-1].length+1)+`
Char: `+_[S])}return S+1&&(S+=1),xe}if(_.charCodeAt(S+1)===$){if(_.charCodeAt(S+2)==D){const he=S;for(;S!==-1&&(_.charCodeAt(S)!==V||_.charCodeAt(S-1)!=D||_.charCodeAt(S-2)!=D||S==-1);)S=_.indexOf(K,S+1);S===-1&&(S=_.length),x&&xe.push(_.substring(he,S+1))}else{if(_.charCodeAt(S+2)===ae&&_.charCodeAt(S+8)===ae&&_.substr(S+3,5).toLowerCase()==="cdata"){var ee=_.indexOf("]]>",S);ee==-1?(xe.push(_.substr(S+9)),S=_.length):(xe.push(_.substring(S+9,ee)),S=ee+3);continue}{const he=S+1;S+=2;for(var te=!1;(_.charCodeAt(S)!==V||te===!0)&&_[S];)_.charCodeAt(S)===ae?te=!0:te===!0&&_.charCodeAt(S)===ce&&(te=!1),S++;xe.push(_.substring(he,S))}}S++;continue}var Ae=X();if(xe.push(Ae),Ae.tagName[0]==="?"&&(xe.push(...Ae.children),Ae.children=[]),Te){let he=Ae.tagName;B.indexOf(he)!==-1?(Te[he]||(Te[he]=[]),Te[he].push(Ae)):Te[he]=Ae}}else{var _e=(re=void 0,re=S,(S=_.indexOf(G,S)-1)==-2&&(S=_.length),ys(Ri,_.slice(re,S+1)));I||(_e=_e.trim()),Te?Te.__text=_e:xe.push(_e),S++}var re;return xe}function ge(Ie,Te,xe){if(Ie==="S")return parseInt(xe);let Oe=ys(Ri,xe);return N.forEach(je=>{je.test(Ie,Te,xe)&&(Oe=je.converter(xe))}),Oe}var we=`\r
	>/= `;function ne(){for(var Ie=S;we.indexOf(_[S])===-1&&_[S];)S++;return _.slice(Ie,S)}var U=E.noChildNodes||["img","br","input","meta","link","hr"];function X(){S++;const Ie=ne();let Te=[],xe={tagName:Ie},Oe=xe.tagName.indexOf(":");for(Oe!==-1&&(xe.__prefix=xe.tagName.substr(0,Oe),xe.tagName=xe.tagName.substr(Oe+1));_.charCodeAt(S)!==V&&_[S];){var je=_.charCodeAt(S);if(je>64&&je<91||je>96&&je<123){for(var ee=ne(),te=_.charCodeAt(S);te&&te!==ie&&te!==se&&!(te>64&&te<91||te>96&&te<123)&&te!==V;)S++,te=_.charCodeAt(S);if(te===ie||te===se){var Ae=(_e=void 0,re=void 0,_e=_[S],re=S+1,S=_.indexOf(_e,re),_.slice(re,S));if(S===-1)return xe}else Ae=null,S--;Ae=ge(xe.tagName,ee,Ae),xe[ee]=Ae}S++}var _e,re;if(_.charCodeAt(S-1)!==z)if(Ie=="script"){var he=S+1;S=_.indexOf("<\/script>",S),Te=[_.slice(he,S)],S+=9}else Ie=="style"?(he=S+1,S=_.indexOf("</style>",S),Te=[_.slice(he,S)],S+=8):U.indexOf(Ie)===-1?(S++,Te=de(Ie,xe)):S++;else S++;return xe.__children=Te,xe}var J,me=null;if(E.attrValue!==void 0)for(E.attrName=E.attrName||"id",me=[];J=new RegExp("\\s"+E.attrName+`\\s*=['"]`+E.attrValue+`['"]`).exec(_),(S=J?J.index:-1)!==-1;)(S=_.lastIndexOf("<",S))!==-1&&me.push(X()),_=_.substr(S),S=0;else me=E.parseNode?X():de("");return E.filter&&(me=hl(me,E.filter)),E.simplify?Ci(Array.isArray(me)?me:[me]):(E.setPos&&(me.pos=S),me)}function Ci(_){var E={};if(!_.length)return"";if(_.length===1&&typeof _[0]=="string")return _[0];for(var S in _.forEach(function(x){if(typeof x=="object"){E[x.tagName]||(E[x.tagName]=[]);var I=Ci(x.children);E[x.tagName].push(I),Object.keys(x.attributes).length&&typeof I!="string"&&(I._attributes=x.attributes)}}),E)E[S].length==1&&(E[S]=E[S][0]);return E}function hl(_,E){let S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"";var I=[];return _.forEach(function(N,B){if(typeof N=="object"&&E(N,B,S,x)&&I.push(N),N.children){var G=hl(N.children,E,S+1,(x?x+".":"")+B+"."+N.tagName);I=I.concat(G)}}),I}const kf=[k.default.PERIOD,k.default.BASE_URL,k.default.ADAPTATION_SET,k.default.REPRESENTATION,k.default.CONTENT_PROTECTION,k.default.ROLE,k.default.ACCESSIBILITY,k.default.AUDIO_CHANNEL_CONFIGURATION,k.default.CONTENT_COMPONENT,k.default.ESSENTIAL_PROPERTY,k.default.LABEL,k.default.S,k.default.SEGMENT_URL,k.default.EVENT,k.default.EVENT_STREAM,k.default.LOCATION,k.default.SERVICE_DESCRIPTION,k.default.SUPPLEMENTAL_PROPERTY,k.default.METRICS,k.default.REPORTING,k.default.PATCH_LOCATION,k.default.REPLACE,k.default.ADD,k.default.REMOVE,k.default.UTC_TIMING,k.default.INBAND_EVENT_STREAM,k.default.PRODUCER_REFERENCE_TIME,k.default.CONTENT_STEERING];function qc(_){_=_||{};const E=this.context,S=_.debug;let x,I,N,B;function G(C){try{let K=Io(C,{parseNode:!0,attrMatchers:N,nodesAsArray:kf}),V={};if(K.tagName.toLowerCase().indexOf("xml")!==-1)for(let D in K){if(Array.isArray(K[D])){V[D]=K[D][0];break}if(typeof K[D]=="object"){V[D]=K[D];break}}else V[K.tagName]=K,delete K.tagName;return V}catch{return null}}return x={getIron:function(){return B},parseXml:G,parse:function(C){let K;const V=window.performance.now();if(K=G(C),!K)throw new Error("failed to parse the manifest");K.Patch?(K=K.Patch,K.add&&K.add.forEach(z=>B.run(z)),K.replace&&K.replace.forEach(z=>B.run(z))):(K=K.MPD,B.run(K));const D=window.performance.now();return I.info("Parsing complete: "+(D-V).toPrecision(3)+"ms"),K.protocol="DASH",K}},I=S.getLogger(x),N=[new Hs,new xo,new wo,new ms],B=Bc(E).create({adaptationset:new ps,period:new Si}),x}qc.__dashjs_factory_name="DashParser";var bu=Ee.default.getClassFactory(qc);function Gc(_){_=_||{};const E=this.context,S=_.debug,x=_.settings,I=(0,oe.default)(E).getInstance(),N=dn(E).getInstance();let B,G,C,K,V,D=_.mssHandler,z=_.errHandler;function $(ie){I.trigger(L.default.INTERNAL_MANIFEST_LOADED,{manifest:ie.manifest})}return B={load:function(ie){let se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;const ce=new Date,de=new yu(ie,Le.HTTPRequest.MPD_TYPE);se&&(de.serviceLocation=se),ae&&(de.queryParams=ae),de.startDate||(de.startDate=ce),I.trigger(L.default.MANIFEST_LOADING_STARTED,{request:de}),C.load({request:de,success:function(ge,we,ne){if(!K)return;let U,X,J;if(ne&&ne!==ie?(X=N.parseBaseUrl(ne),U=ne):(N.isRelative(ie)&&(ie=N.resolve(ie,window.location.href)),X=N.parseBaseUrl(ie)),we!="No Content")if(V===null&&(V=function(me){let Ie=null;return me.indexOf("SmoothStreamingMedia")>-1?(D&&(Ie=D.createMssParser(),D.createMssFragmentProcessor(),D.registerEvents()),Ie):me.indexOf("MPD")>-1||me.indexOf("Patch")>-1?bu(E).create({debug:S}):Ie}(ge)),V!==null){K.setParser(V);try{J=V.parse(ge)}catch{return void I.trigger(L.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Pe.default(W.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,W.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${ie}`)})}if(J){if(J.url=U||ie,J.originalUrl||(J.originalUrl=J.url),x&&x.get().streaming.enableManifestDurationMismatchFix&&J.mediaPresentationDuration&&J.Period.length>1){const me=J.Period.reduce((Ie,Te)=>Ie+Te.duration,0);!isNaN(me)&&J.mediaPresentationDuration>me&&(G.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),J.mediaPresentationDuration=me)}J.baseUri=X,J.loadedTime=new Date,K.resolveManifestOnLoad(J),I.trigger(L.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:ge})}else I.trigger(L.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Pe.default(W.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,W.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${ie}`)})}else I.trigger(L.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Pe.default(W.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,W.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${ie}`)});else I.trigger(L.default.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(ge,we,ne){I.trigger(L.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Pe.default(W.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,W.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+`${ie}, ${ne}`)})}})},reset:function(){I.off(L.default.XLINK_READY,$,B),D&&D.reset(),K&&(K.reset(),K=null),C&&(C.abort(),C=null)}},G=S.getLogger(B),I.on(L.default.XLINK_READY,$,B),C=mo(E).create({errHandler:_.errHandler,dashMetrics:_.dashMetrics,mediaPlayerModel:_.mediaPlayerModel,urlUtils:N,constants:F.default,dashConstants:k.default,errors:W,requestTimeout:_.settings.get().streaming.manifestRequestTimeout}),K=fl(E).create({errHandler:z,dashMetrics:_.dashMetrics,mediaPlayerModel:_.mediaPlayerModel,settings:_.settings}),V=null,B}Gc.__dashjs_factory_name="ManifestLoader";var Xa=Ee.default.getClassFactory(Gc);function gl(){let _;const E=this.context,S=(0,oe.default)(E).getInstance();return _={error:function(x){S.trigger(L.default.ERROR,{error:x})}},_}gl.__dashjs_factory_name="ErrorHandler";var $c=Ee.default.getSingletonFactory(gl),Hc=t(559);function Rf(){const _=this.context,E=(0,oe.default)(_).getInstance();let S,x,I,N,B,G,C;function K($,ie,se){const ae=D($,ie,se);return I.isCodecSupportedBasedOnTestedConfigurations(ae,$)}function V($,ie,se,ae,ce){const de=D($,ie,se),ge=JSON.stringify(de);ae.has(ge)||(ae.add(ge),ce.push(de))}function D($,ie,se){let ae=null;switch($){case F.default.VIDEO:ae=function(ce,de){let ge={codec:de,width:ce.width||null,height:ce.height||null,framerate:x.getFramerate(ce)||null,bitrate:ce.bandwidth||null,isSupported:!0};N.get().streaming.capabilities.filterVideoColorimetryEssentialProperties&&Object.assign(ge,function(U){let X={colorGamut:null,transferFunction:null,isSupported:!0};for(const J of U.EssentialProperty||[])J.schemeIdUri===F.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["1","5","6","7"].includes(J.value.toString())?X.colorGamut=F.default.MEDIA_CAPABILITIES_API.COLORGAMUT.SRGB:J.schemeIdUri===F.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["11","12"].includes(J.value.toString())?X.colorGamut=F.default.MEDIA_CAPABILITIES_API.COLORGAMUT.P3:J.schemeIdUri===F.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["9"].includes(J.value.toString())?X.colorGamut=F.default.MEDIA_CAPABILITIES_API.COLORGAMUT.REC2020:J.schemeIdUri===F.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["2"].includes(J.value.toString())?X.colorGamut=null:J.schemeIdUri===F.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&(X.isSupported=!1),J.schemeIdUri===F.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["1","6","13","14","15"].includes(J.value.toString())?X.transferFunction=F.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.SRGB:J.schemeIdUri===F.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["16"].includes(J.value.toString())?X.transferFunction=F.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.PQ:J.schemeIdUri===F.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["18"].includes(J.value.toString())?X.transferFunction=F.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.HLG:J.schemeIdUri===F.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["2"].includes(J.value.toString())?X.transferFunction=null:J.schemeIdUri===F.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&(X.isSupported=!1);return X}(ce));let we=ge.isSupported;N.get().streaming.capabilities.filterHDRMetadataFormatEssentialProperties&&Object.assign(ge,function(U){let X={isSupported:!0,hdrMetadataType:null};for(const J of U.EssentialProperty||[])J.schemeIdUri===F.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&J.value===F.default.HDR_METADATA_FORMAT_VALUES.ST2094_10?X.hdrMetadataType=F.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SMPTE_ST_2094_10:J.schemeIdUri===F.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&J.value===F.default.HDR_METADATA_FORMAT_VALUES.SL_HDR2?X.hdrMetadataType=F.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SLHDR2:J.schemeIdUri===F.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&J.value===F.default.HDR_METADATA_FORMAT_VALUES.ST2094_40?X.hdrMetadataType=F.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SMPTE_ST_2094_40:J.schemeIdUri===F.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&(X.isSupported=!1);return X}(ce));let ne=ge.isSupported;return we&&ne||(ge.isSupported=!1),ge}(ie,se);break;case F.default.AUDIO:ae=function(ce,de){const ge=ce.audioSamplingRate||null;return{codec:de,bitrate:ce.bandwidth||null,samplerate:ge,isSupported:!0}}(ie,se);break;default:return ae}return function(ce,de){return ce&&ce[k.default.CONTENT_PROTECTION]&&ce[k.default.CONTENT_PROTECTION].length>0&&(de.keySystemsMetadata=G.getSupportedKeySystemMetadataFromContentProtection(ce[k.default.CONTENT_PROTECTION])),de}(ie,ae)}function z($){if(!$||$.length===0)return!0;let ie=0;for(;ie<$.length;){if(!I.supportsEssentialProperty($[ie]))return C.debug("[Stream] EssentialProperty not supported: "+$[ie].schemeIdUri),!1;ie+=1}return!0}return S={setConfig:function($){$&&($.adapter&&(x=$.adapter),$.capabilities&&(I=$.capabilities),$.settings&&(N=$.settings),$.protectionController&&(G=$.protectionController),$.customParametersModel&&(B=$.customParametersModel))},filterUnsupportedFeatures:function($){return new Promise(ie=>{const se=[F.default.VIDEO,F.default.AUDIO],ae=[];se.forEach(ce=>{(function(ge,we){if(!ge||!ge.Period||ge.Period.length===0)return[];const ne=new Set,U=[];return ge.Period.forEach(X=>{X.AdaptationSet.forEach(J=>{x.getIsTypeOf(J,we)&&J.Representation.forEach((me,Ie)=>{const Te=x.getCodec(J,Ie,!1);V(we,me,Te,ne,U);const xe=x.getSupplementalCodecs(me);xe.length>0&&V(we,me,xe[0],ne,U)})})}),U})($,ce).forEach(ge=>{ae.push(I.runCodecSupportCheck(ge,ce))})}),Promise.allSettled(ae).then(()=>(se.forEach(ce=>{(function(de,ge){ge&&ge.Period&&ge.Period.length!==0&&ge.Period.forEach(we=>{(function(ne,U){ne&&ne.AdaptationSet&&ne.AdaptationSet.length!==0&&(ne.AdaptationSet=ne.AdaptationSet.filter(X=>{x.getIsTypeOf(X,U)&&function(me,Ie){me.Representation&&me.Representation.length!==0&&(me.Representation=me.Representation.filter((Te,xe)=>{const Oe=x.getCodec(me,xe,!1),je=K(Ie,Te,Oe);let ee=function(te,Ae){let _e=!1;const re=x.getSupplementalCodecs(te);return re.length>0&&(re.length>1&&C.warn("[CapabilitiesFilter] Multiple supplemental codecs not supported; using the first in list"),_e=K(Ae,te,re[0])),_e}(Te,Ie);return ee&&(C.debug(`[CapabilitiesFilter] Codec supported. Upgrading codecs string of Representation with ID ${Te.id}`),Te.codecs=Te[k.default.SUPPLEMENTAL_CODECS]),je||ee||C.warn(`[CapabilitiesFilter] Codec ${Oe} not supported. Removing Representation with ID ${Te.id}`),je||ee}))}(X,U);const J=X.Representation&&X.Representation.length>0;return J||(E.trigger(L.default.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:X}),C.warn(`[CapabilitiesFilter] AdaptationSet with ID ${X.id?X.id:"undefined"} and codec ${X.codecs?X.codecs:"undefined"} has been removed because of no supported Representation`)),J}))})(we,de)})})(ce,$)}),N.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(ce){ce&&ce.Period&&ce.Period.length!==0&&ce.Period.forEach(de=>{de.AdaptationSet=de.AdaptationSet.filter(ge=>!ge.Representation||ge.Representation.length===0||!!z(x.getEssentialPropertiesForAdaptationSet(ge))&&(ge.Representation=ge.Representation.filter(we=>z(x.getEssentialPropertiesForRepresentation(we))),ge.Representation&&ge.Representation.length>0))})}($),function(ce){if(!ce||!ce.Period||ce.Period.length===0)return Promise.resolve();const de=[];return ce.Period.forEach(ge=>{de.push(function(we){return new Promise(ne=>{if(!we||!we.AdaptationSet||we.AdaptationSet.length===0)return void ne();const U=[];we.AdaptationSet.forEach(X=>{U.push(function(J){return new Promise(me=>{if(!J.Representation||J.Representation.length===0)return void me();const Ie=[];J.Representation.forEach(Te=>{Ie.push(function(xe){const Oe=[],je=B.getCustomCapabilitiesFilters();return je&&je.length!==0?je.forEach(ee=>{Oe.push(new Promise(te=>te(ee(xe))))}):Oe.push(Promise.resolve(!0)),Promise.all(Oe)}(Te))}),Promise.all(Ie).then(Te=>{J.Representation=J.Representation.filter((xe,Oe)=>{let je=Te[Oe].every(ee=>ee);return je||C.debug("[Stream] Representation "+xe.id+" has been removed because of unsupported CustomFilter"),je}),me()}).catch(Te=>{C.warn("[Stream] at least one promise rejected in CustomFilter with error: ",Te),me()})})}(X))}),Promise.all(U).then(()=>{we.AdaptationSet=we.AdaptationSet.filter(X=>X.Representation&&X.Representation.length>0),ne()}).catch(()=>{ne()})})}(ge))}),Promise.all(de)}($))).then(()=>{ie()}).catch(ce=>{C.error(ce),ie()})})}},C=(0,Be.default)(_).getInstance().getLogger(S),S}Rf.__dashjs_factory_name="CapabilitiesFilter";var vs=Ee.default.getSingletonFactory(Rf),Ao=class{constructor(){this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null}};function Vs(){let _,E;return _={initialize:function(S){if(E=new Ao,!S)return null;const x=S.indexOf("#");if(x!==-1){const I=S.substr(x+1).split("&");for(let N=0,B=I.length;N<B;++N){const G=I[N],C=G.indexOf("=");if(C!==-1){const K=G.substring(0,C);E.hasOwnProperty(K)&&(E[K]=G.substr(C+1))}}}},getURIFragmentData:function(){return E}},_}Vs.__dashjs_factory_name="URIFragmentModel";var Tu=Ee.default.getSingletonFactory(Vs);function ml(){let _,E,S=this.context,x=(0,oe.default)(S).getInstance();return _={getValue:function(){return E},setValue:function(I){E=I,I&&x.trigger(L.default.MANIFEST_LOADED,{data:I})}},_}ml.__dashjs_factory_name="ManifestModel";var Zi=Ee.default.getSingletonFactory(ml);function $i(){let _,E,S,x;const I=this.context,N=(0,Q.default)(I).getInstance();function B(D,z){return isNaN(D)?0:D>0?(z&&E.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):D<-.5?(z&&E.warn("Supplied minimum playback rate is out of range and will be limited to -0.5: -50% playback speed."),-.5):D}function G(D,z){return isNaN(D)?0:D<0?(z&&E.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):D>1?(z&&E.warn("Supplied maximum playback rate is out of range and will be limited to 1: 200% playback speed."),1):D}function C(){const D=K(),z=S.getLiveDelay();return!isNaN(z)&&z>0?Math.min(D,z):D}function K(){return N.get().streaming.buffer.bufferTimeDefault>0?N.get().streaming.buffer.bufferTimeDefault:V()?20:12}function V(){return N.get().streaming.buffer.fastSwitchEnabled!==null?N.get().streaming.buffer.fastSwitchEnabled:!S.getLowLatencyModeEnabled()}return _={getCatchupMaxDrift:function(){if(!isNaN(N.get().streaming.liveCatchup.maxDrift)&&N.get().streaming.liveCatchup.maxDrift>=0)return N.get().streaming.liveCatchup.maxDrift;const D=x.getServiceDescriptionSettings();return D&&D.liveCatchup&&!isNaN(D.liveCatchup.maxDrift)&&D.liveCatchup.maxDrift>=0?D.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return N.get().streaming.liveCatchup.enabled!==null?N.get().streaming.liveCatchup.enabled:S.getInitialCatchupModeActivated()},getBufferTimeDefault:C,getBufferTimeDefaultUnadjusted:K,getFastSwitchEnabled:V,getInitialBufferLevel:function(){const D=N.get().streaming.buffer.initialBufferLevel;return isNaN(D)||D<0?0:Math.min(C(),D)},getRetryAttemptsForType:function(D){const z=isNaN(N.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:N.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return S.getLowLatencyModeEnabled()?N.get().streaming.retryAttempts[D]*z:N.get().streaming.retryAttempts[D]},getRetryIntervalsForType:function(D){const z=isNaN(N.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:N.get().streaming.retryIntervals.lowLatencyReductionFactor;return S.getLowLatencyModeEnabled()?N.get().streaming.retryIntervals[D]/z:N.get().streaming.retryIntervals[D]},getCatchupPlaybackRates:function(D){const z=N.get().streaming.liveCatchup.playbackRate;if(!isNaN(z.min)||!isNaN(z.max))return{min:B(z.min,D),max:G(z.max,D)};const $=x.getServiceDescriptionSettings();if($&&$.liveCatchup&&(!isNaN($.liveCatchup.playbackRate.min)||!isNaN($.liveCatchup.playbackRate.max))){const ie=$.liveCatchup.playbackRate;return{min:B(ie.min,D),max:G(ie.max,D)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(D,z){try{const $=N.get().streaming.abr[D][z];if(!isNaN($)&&$!==-1)return $;const ie=x.getServiceDescriptionSettings();return ie&&ie[D]&&!isNaN(ie[D][z])?ie[D][z]:-1}catch{return-1}},setConfig:function(D){D.playbackController&&(S=D.playbackController),D.serviceDescriptionController&&(x=D.serviceDescriptionController)},reset:function(){}},E=(0,Be.default)(I).getInstance().getLogger(_),_}$i.__dashjs_factory_name="MediaPlayerModel";var Ks=Ee.default.getSingletonFactory($i);const Hi={DEFAULT:.5,STRONG:1,WEAK:0};function pa(_,E,S,x){let I,N,B,G,C;return N=_===void 0?null:_,B=function(K){let V=Hi.DEFAULT;return K!==Hi.DEFAULT&&K!==Hi.STRONG&&K!==Hi.WEAK||(V=K),V}(S),G=E===void 0?null:E,C=x===void 0?null:x,I={representation:N,reason:G,rule:C,priority:B},I}pa.__dashjs_factory_name="SwitchRequest";const Ca=Ee.default.getClassFactory(pa);Ca.NO_CHANGE=null,Ca.PRIORITY=Hi,Ee.default.updateClassFactory(pa.__dashjs_factory_name,Ca);var pr=Ca;function Su(_){_=_||{};const E=this.context,S=_.dashMetrics;let x,I;return x={getSwitchRequest:function(N){try{const B=pr(E).create();B.rule=this.getClassName();const G=N.getMediaInfo(),C=N.getMediaType(),K=S.getCurrentBufferState(C),V=N.getScheduleController(),D=N.getAbrController(),z=N.getStreamInfo(),$=z?z.id:null,ie=z&&z.manifestInfo?z.manifestInfo.isDynamic:null,se=N.getThroughputController(),ae=se.getSafeAverageThroughput(C),ce=se.getAverageLatency(C);return isNaN(ae)||!K||D.getAbandonmentStateFor($,C)===j.ALLOW_LOAD&&(K.state===j.BUFFER_LOADED||ie)&&(B.representation=D.getOptimalRepresentationForBitrate(G,ae,!0),B.reason={throughput:ae,latency:ce,message:`[ThroughputRule]: Switching to Representation with bitrate ${B.representation?B.representation.bitrateInKbit:"n/a"} kbit/s. Throughput: ${ae}`},V.setTimeToLoadDelay(0)),B}catch(B){return I.error(B),pr(E).create()}},reset:function(){}},I=(0,Be.default)(E).getInstance().getLogger(x),x}Su.__dashjs_factory_name="ThroughputRule";var _u=Ee.default.getClassFactory(Su);function Fi(_){_=_||{};const E=this.context,S=(0,oe.default)(E).getInstance(),x=_.dashMetrics,I=(0,Q.default)(E).getInstance();let N,B,G;function C(){const D=I.get().streaming.abr.rules.insufficientBufferRule.parameters.segmentIgnoreCount;G={},G[F.default.VIDEO]={ignoreCount:D},G[F.default.AUDIO]={ignoreCount:D}}function K(){C()}function V(D){isNaN(D.startTime)||D.mediaType!==F.default.AUDIO&&D.mediaType!==F.default.VIDEO||G[D.mediaType].ignoreCount>0&&G[D.mediaType].ignoreCount--}return N={getSwitchRequest:function(D){const z=pr(E).create();if(z.rule=this.getClassName(),!D||!D.hasOwnProperty("getMediaType"))return z;const $=D.getMediaType(),ie=x.getCurrentBufferState($),se=D.getRepresentation().fragmentDuration;if(!function(de,ge,we){return!de.getLowLatencyModeEnabled()&&G[ge].ignoreCount<=0&&we}(D.getScheduleController().getPlaybackController(),$,se))return z;const ae=D.getMediaInfo(),ce=D.getAbrController();if(ie&&ie.state===j.BUFFER_EMPTY)B.debug("["+$+"] Switch to index 0; buffer is empty."),z.representation=ce.getOptimalRepresentationForBitrate(ae,0,!0),z.reason={message:"[InsufficientBufferRule]: Switching to lowest Representation because buffer is empty"};else{const de=D.getThroughputController(),ge=x.getCurrentBufferLevel($),we=de.getAverageThroughput($,null,NaN)*I.get().streaming.abr.rules.insufficientBufferRule.parameters.throughputSafetyFactor*ge/se;if(isNaN(we)||we<=0)return z;z.representation=ce.getOptimalRepresentationForBitrate(ae,we,!0),z.reason={message:"[InsufficientBufferRule]: Limiting maximum bitrate to avoid a buffer underrun.",bitrate:we}}return z},reset:function(){C(),S.off(pe.default.PLAYBACK_SEEKING,K,N),S.off(L.default.BYTES_APPENDED_END_FRAGMENT,V,N)}},B=(0,Be.default)(E).getInstance().getLogger(N),C(),S.on(pe.default.PLAYBACK_SEEKING,K,N),S.on(L.default.BYTES_APPENDED_END_FRAGMENT,V,N),N}Fi.__dashjs_factory_name="InsufficientBufferRule";var Vi=Ee.default.getClassFactory(Fi);function Ur(_){const E=(_=_||{}).mediaPlayerModel,S=_.dashMetrics,x=this.context,I=(0,Q.default)(x).getInstance();let N,B,G;function C(){G={}}return N={shouldAbandon:function(K){const V=pr(x).create();V.rule=this.getClassName();try{if(!K)return V;const D=K.getCurrentRequest();if(!isNaN(D.index)){if(D.firstByteDate===null||G.hasOwnProperty(D.index))return V;const z=E.getBufferTimeDefault(),$=K.getMediaType();if(S.getCurrentBufferLevel($)>z)return V;const ie=Date.now()-D.firstByteDate.getTime();if(D.traces.length>=I.get().streaming.abr.rules.abandonRequestsRule.parameters.minThroughputSamplesThreshold&&ie>I.get().streaming.abr.rules.abandonRequestsRule.parameters.minSegmentDownloadTimeThresholdInMs&&D.bytesLoaded<D.bytesTotal)return function(se,ae,ce){const de=se.getMediaInfo(),ge=se.getMediaType(),we=ae.traces.reduce((Ie,Te)=>Ie+Te.b[0],0)-ae.traces[0].b[0],ne=Math.max(ae.traces.reduce((Ie,Te)=>Ie+Te.d,0)-ae.traces[0].d,1),U=Math.round(8*we/ne),X=Number(8*ae.bytesTotal/U/1e3).toFixed(2),J=se.getRepresentation(),me=se.getAbrController();if(X<ae.duration*I.get().streaming.abr.rules.abandonRequestsRule.parameters.abandonDurationMultiplier||me.isPlayingAtLowestQuality(J))return ce;if(!G.hasOwnProperty(ae.index)){const Ie=se.getAbrController(),Te=ae.bytesTotal-ae.bytesLoaded,xe=Ie.getOptimalRepresentationForBitrate(de,U,!0),Oe=ae.representation;Te>ae.bytesTotal*xe.bitrateInKbit/Oe.bitrateInKbit&&(ce.representation=xe,ce.reason={throughputInKbit:U,message:`[AbandonRequestRule][${ge} is asking to abandon and switch to quality to ${xe.absoluteIndex}. The measured bandwidth was ${U} kbit/s`},G[ae.index]=!0)}return ce}(K,D,V)}return V}catch(D){return B.error(D),V}},reset:C},B=(0,Be.default)(x).getInstance().getLogger(N),C(),N}Ur.__dashjs_factory_name="AbandonRequestsRule";var ya=Ee.default.getClassFactory(Ur);function Vc(){const _=this.context,E=(0,Q.default)(_).getInstance();let S;return S={getSwitchRequest:function(x){const I=pr(_).create();if(I.rule=this.getClassName(),!x||!x.hasOwnProperty("getDroppedFramesHistory"))return I;const N=x.getDroppedFramesHistory();if(!N)return I;const B=x.getStreamInfo().id,G=x.getMediaInfo(),C=x.getAbrController(),K=N.getFrameHistory(B);if(!K||Object.keys(K).length===0)return I;let V=0,D=0;const z=C.getPossibleVoRepresentationsFilteredBySettings(G,!0);let $=null;for(let ie=1;ie<z.length;ie++){const se=z[ie];if(se&&K[se.id]&&(V=K[se.id].droppedVideoFrames,D=K[se.id].totalVideoFrames,D>E.get().streaming.abr.rules.droppedFramesRule.parameters.minimumSampleSize&&V/D>E.get().streaming.abr.rules.droppedFramesRule.parameters.droppedFramesPercentageThreshold)){$=z[ie-1];break}}return $&&(I.representation=$,I.reason={droppedFrames:V,message:`[DroppedFramesRule]: Switching to index ${$.absoluteIndex}. Dropped Frames: ${V}, Total Frames: ${D}`}),I}},S}Vc.__dashjs_factory_name="DroppedFramesRule";var Cf=Ee.default.getClassFactory(Vc);function xu(){const _=this.context,E=(0,Q.default)(_).getInstance();let S;return S={getSwitchRequest:function(x){const I=pr(_).create();if(I.rule=this.getClassName(),!x)return I;const N=x.getStreamInfo().id,B=x.getMediaType(),G=x?x.getSwitchRequestHistory():null,C=G?G.getSwitchRequests(N,B):{},K=x.getAbrController(),V=x.getMediaInfo(),D=K.getPossibleVoRepresentationsFilteredBySettings(V,!0);let z=0,$=0;for(let ie=0;ie<D.length;ie++){const se=D[ie];if(se&&C[se.id]&&(z+=C[se.id].drops,$+=C[se.id].noDrops,z+$>=E.get().streaming.abr.rules.switchHistoryRule.parameters.sampleSize&&z/$>E.get().streaming.abr.rules.switchHistoryRule.parameters.switchPercentageThreshold)){I.representation=ie>0&&C[se.id].drops>0?D[ie-1]:se,I.reason={drops:z,noDrops:$,message:`[SwitchHistoryRule]: Switch to index: ${I.representation.absoluteIndex} samples: ${z+$} drops:  ${z}`};break}}return I}},S}xu.__dashjs_factory_name="SwitchHistoryRule";var Kc=Ee.default.getClassFactory(xu);const Qa="BOLA_STATE_ONE_BITRATE",Ys="BOLA_STATE_STARTUP",wu="BOLA_STATE_STEADY",va=10;function Iu(_){_=_||{};const E=this.context,S=_.dashMetrics,x=_.mediaPlayerModel,I=(0,oe.default)(E).getInstance(),N=vl(E).getInstance();let B,G,C;function K(X){const J=X.mediaType,me=X.streamId,Ie=J===F.default.AUDIO?[F.default.AUDIO]:C[me];for(const Te in Ie)C[me]&&C[me].hasOwnProperty(Te)&&C[me][Te].state===wu&&(C[me][Te].placeholderBuffer=0)}function V(X){const J=X.streamId;for(const me in C[J])if(C[J].hasOwnProperty(me)){const Ie=C[J][me];Ie.state!==Qa&&(Ie.state=Ys,D(Ie))}}function D(X){X.placeholderBuffer=0,X.mostAdvancedSegmentStart=NaN,X.lastSegmentWasReplacement=!1,X.lastSegmentStart=NaN,X.lastSegmentDurationS=NaN,X.lastSegmentRequestTimeMs=NaN,X.lastSegmentFinishTimeMs=NaN}function z(X){try{if(X&&X.metric===j.HTTP_REQUEST&&X.value&&X.value.type===Le.HTTPRequest.MEDIA_SEGMENT_TYPE&&X.value.trace&&X.value.trace.length){const J=C[X.value._streamId]&&C[X.value._streamId][X.mediaType]?C[X.value._streamId][X.mediaType]:null;J&&J.state!==Qa&&(J.lastSegmentRequestTimeMs=X.value.trequest.getTime(),J.lastSegmentFinishTimeMs=X.value._tfinish.getTime(),$(J,X.mediaType))}}catch(J){G.error(J)}}function $(X,J){if(!isNaN(X.lastSegmentStart)&&!isNaN(X.lastSegmentRequestTimeMs)&&!isNaN(X.placeholderBuffer)){if(X.placeholderBuffer*=.99,!isNaN(X.lastSegmentFinishTimeMs)){const me=S.getCurrentBufferLevel(J)+.001*(X.lastSegmentFinishTimeMs-X.lastSegmentRequestTimeMs),Ie=ce(X,X.currentRepresentation),Te=Math.max(0,Ie-me);X.placeholderBuffer=Math.min(Te,X.placeholderBuffer)}X.lastSegmentWasReplacement&&!isNaN(X.lastSegmentDurationS)&&(X.placeholderBuffer+=X.lastSegmentDurationS),X.lastSegmentStart=NaN,X.lastSegmentRequestTimeMs=NaN}}function ie(X){if(X&&C[X.streamId]&&C[X.streamId][X.mediaType]){const J=C[X.streamId][X.mediaType];J&&J.state!==Qa&&(J.currentRepresentation=X.newRepresentation)}}function se(X,J,me){const Ie=me.reduce((Oe,je,ee)=>je>me[Oe]?ee:Oe,0);if(Ie===0)return null;const Te=Math.max(X,va+2*J.length),xe=(me[Ie]-1)/(Te/va-1);return{gp:xe,Vp:va/xe}}function ae(X,J){const me=x.getBufferTimeDefault();if(X.bufferTimeDefault!==me){const Ie=se(me,X.representations,X.utilities);if(Ie.Vp!==X.Vp||Ie.gp!==X.gp){const Te=S.getCurrentBufferLevel(J);let xe=Te+X.placeholderBuffer;xe-=va,xe*=Ie.Vp/X.Vp,xe+=va,X.bufferTimeDefault=me,X.Vp=Ie.Vp,X.gp=Ie.gp,X.placeholderBuffer=Math.max(0,xe-Te)}}}function ce(X,J){return X.Vp*(X.utilities[J.absoluteIndex]+X.gp)}function de(X){if(X&&X.chunk&&X.chunk.representation.mediaInfo&&C[X.streamId]){const J=C[X.streamId][X.chunk.representation.mediaInfo.type];if(J&&J.state!==Qa){const me=X.chunk.start;isNaN(J.mostAdvancedSegmentStart)||me>J.mostAdvancedSegmentStart?(J.mostAdvancedSegmentStart=me,J.lastSegmentWasReplacement=!1):J.lastSegmentWasReplacement=!0,J.lastSegmentStart=me,J.lastSegmentDurationS=X.chunk.duration,J.currentRepresentation=X.chunk.representation,$(J,X.chunk.representation.mediaInfo.type)}}}function ge(){U()}function we(X,J){const me=J.absoluteIndex,Ie=J.bandwidth,Te=X.utilities[me];let xe=0;for(let Oe=me-1;Oe>=0;--Oe)if(X.utilities[Oe]<X.utilities[me]){const je=X.representations[Oe].bandwidth,ee=X.utilities[Oe],te=X.Vp*(X.gp+(Ie*ee-je*Te)/(Ie-je));xe=Math.max(xe,te)}return xe}function ne(X){if(X&&C[X.streamId]){const J=C[X.streamId][X.mediaType];if(J&&J.state!==Qa){const me=S.getCurrentBufferLevel(X.mediaType);let Ie;Ie=J.currentRepresentation.absoluteIndex>0?we(J,J.currentRepresentation):va;const Te=Math.max(0,Ie-me);J.placeholderBuffer=Math.min(J.placeholderBuffer,Te)}}}function U(){C={}}return B={getSwitchRequest:function(X){try{const J=pr(E).create();X.getScheduleController().setTimeToLoadDelay(0),J.rule=this.getClassName(),J.reason=J.reason||{};const me=function(Ie){const Te=Ie.getMediaType(),xe=Ie.getStreamInfo().id;C[xe]||(C={},C[xe]={});let Oe=C[xe][Te];return Oe?Oe.state!==Qa&&ae(Oe,Te):(Oe=function(je){const ee={},te=je.getMediaInfo(),Ae=N.getPossibleVoRepresentationsFilteredBySettings(te,!0);let _e=Ae.map(ve=>ve.bandwidth).map(ve=>Math.log(ve));_e=_e.map(ve=>ve-_e[0]+1);const re=x.getBufferTimeDefault(),he=se(re,Ae,_e);return he?(ee.state=Ys,ee.representations=Ae,ee.utilities=_e,ee.bufferTimeDefault=re,ee.Vp=he.Vp,ee.gp=he.gp,ee.currentRepresentation=null,D(ee)):ee.state=Qa,ee}(Ie),C[xe][Te]=Oe),Oe}(X);switch(J.reason.state=me.state,me.state){case Qa:break;case Ys:(function(Ie,Te,xe){const Oe=Te.getMediaType(),je=Te.getThroughputController().getSafeAverageThroughput(Oe);if(isNaN(je))return;const ee=Te.getMediaInfo(),te=N.getOptimalRepresentationForBitrate(ee,je,!0),Ae=S.getCurrentBufferLevel(Oe);Ie.representation=te,Ie.reason.throughput=je,xe.placeholderBuffer=Math.max(0,we(xe,te)-Ae),xe.currentRepresentation=te,!isNaN(xe.lastSegmentDurationS)&&Ae>=xe.lastSegmentDurationS&&(xe.state=wu)})(J,X,me);break;case wu:(function(Ie,Te,xe){const Oe=Te.getMediaType(),je=Te.getThroughputController(),ee=Te.getMediaInfo(),te=je.getSafeAverageThroughput(Oe),Ae=Te.getScheduleController();(function(fe,ke){const Ce=Date.now();if(isNaN(fe.lastSegmentFinishTimeMs)){if(!isNaN(fe.lastCallTimeMs)){const Ve=.001*(Ce-fe.lastCallTimeMs);fe.placeholderBuffer+=Math.max(0,Ve)}}else{const Ve=.001*(Ce-fe.lastSegmentFinishTimeMs);fe.placeholderBuffer+=Math.max(0,Ve)}fe.lastCallTimeMs=Ce,fe.lastSegmentStart=NaN,fe.lastSegmentRequestTimeMs=NaN,fe.lastSegmentFinishTimeMs=NaN,ae(fe,ke)})(xe,Oe);const _e=S.getCurrentBufferLevel(Oe);let re=function(fe,ke){const Ce=fe.representations.length;let Ve=NaN,Ke=NaN;for(let st=0;st<Ce;++st){let ft=(fe.Vp*(fe.utilities[st]-1+fe.gp)-ke)/fe.representations[st].bandwidth;(isNaN(Ke)||ft>=Ke)&&(Ke=ft,Ve=st)}return fe.representations[Ve]}(xe,_e+xe.placeholderBuffer);const he=N.getOptimalRepresentationForBitrate(ee,te,!0);re.absoluteIndex>xe.currentRepresentation.absoluteIndex&&re.absoluteIndex>he.absoluteIndex&&(re=he.absoluteIndex>xe.currentRepresentation.absoluteIndex?he:xe.currentRepresentation);let ve=Math.max(0,_e+xe.placeholderBuffer-ce(xe,re));ve<=xe.placeholderBuffer?(xe.placeholderBuffer-=ve,ve=0):(ve-=xe.placeholderBuffer,xe.placeholderBuffer=0,N.isPlayingAtTopQuality(re)?ve=0:Ae.setTimeToLoadDelay(1e3*ve)),Ie.representation=re,Ie.reason.throughput=te,Ie.reason.bufferLevel=_e,Ie.reason.placeholderBuffer=xe.placeholderBuffer,Ie.reason.delay=ve,xe.currentRepresentation=re})(J,X,me);break;default:(function(Ie,Te,xe){G.debug("BOLA ABR rule invoked in bad state.");const Oe=Te.getMediaInfo(),je=Te.getMediaType(),ee=Te.getThroughputController().getSafeAverageThroughput(je);Ie.representation=N.getOptimalRepresentationForBitrate(Oe,ee,!0),Ie.reason.state=xe.state,Ie.reason.throughput=ee,xe.state=Ys,D(xe)})(J,X,me)}return J}catch(J){return G.error(J),pr(E).create()}},handleNewMediaInfo:function(X){X&&X.streamInfo&&X.type&&C[X.streamInfo.id]&&C[X.streamInfo.id][X.type]&&delete C[X.streamInfo.id][X.type]},reset:function(){U(),I.off(pe.default.BUFFER_EMPTY,K,B),I.off(pe.default.PLAYBACK_SEEKING,V,B),I.off(pe.default.METRIC_ADDED,z,B),I.off(pe.default.QUALITY_CHANGE_REQUESTED,ie,B),I.off(pe.default.FRAGMENT_LOADING_ABANDONED,ne,B),I.off(L.default.MEDIA_FRAGMENT_LOADED,de,B),I.off(L.default.SETTING_UPDATED_MAX_BITRATE,ge,B),I.off(L.default.SETTING_UPDATED_MIN_BITRATE,ge,B)}},G=(0,Be.default)(E).getInstance().getLogger(B),U(),I.on(pe.default.BUFFER_EMPTY,K,B),I.on(pe.default.PLAYBACK_SEEKING,V,B),I.on(pe.default.METRIC_ADDED,z,B),I.on(pe.default.QUALITY_CHANGE_REQUESTED,ie,B),I.on(pe.default.FRAGMENT_LOADING_ABANDONED,ne,B),I.on(L.default.MEDIA_FRAGMENT_LOADED,de,B),I.on(L.default.SETTING_UPDATED_MAX_BITRATE,ge,B),I.on(L.default.SETTING_UPDATED_MIN_BITRATE,ge,B),B}Iu.__dashjs_factory_name="BolaRule";var Nf=Ee.default.getClassFactory(Iu);const Es="L2A_STATE_ONE_BITRATE",Ws="L2A_STATE_STARTUP",Yc="L2A_STATE_STEADY",pl=Math.pow(4,.99);function Xs(_){_=_||{};const E=this.context,S=_.dashMetrics,x=(0,oe.default)(E).getInstance();let I,N,B,G;function C(se){se.placeholderBuffer=0,se.mostAdvancedSegmentStart=NaN,se.lastSegmentWasReplacement=!1,se.lastSegmentStart=NaN,se.lastSegmentDurationS=NaN,se.lastSegmentRequestTimeMs=NaN,se.lastSegmentFinishTimeMs=NaN,se.lastSegmentUrl=""}function K(){for(const se in N)if(N.hasOwnProperty(se)){const ae=N[se];ae.state!==Es&&(ae.state=Ws,C(ae))}}function V(se){if(se&&se.chunk&&se.chunk.representation&&se.chunk.representation.mediaInfo){const ae=N[se.chunk.representation.mediaInfo.type],ce=B[se.chunk.representation.mediaInfo.type];if(ae&&ae.state!==Es){const de=se.chunk.start;isNaN(ae.mostAdvancedSegmentStart)||de>ae.mostAdvancedSegmentStart?(ae.mostAdvancedSegmentStart=de,ae.lastSegmentWasReplacement=!1):ae.lastSegmentWasReplacement=!0,ae.lastSegmentStart=de,ae.lastSegmentDurationS=se.chunk.duration,ae.currentRepresentation=se.chunk.representation,z(ae,ce)}}}function D(se){if(se&&se.metric===j.HTTP_REQUEST&&se.value&&se.value.type===Le.HTTPRequest.MEDIA_SEGMENT_TYPE&&se.value.trace&&se.value.trace.length){const ae=N[se.mediaType],ce=B[se.mediaType];ae&&ae.state!==Es&&(ae.lastSegmentRequestTimeMs=se.value.trequest.getTime(),ae.lastSegmentFinishTimeMs=se.value._tfinish.getTime(),z(ae,ce))}}function z(se,ae){isNaN(se.lastSegmentStart)||isNaN(se.lastSegmentRequestTimeMs)||(ae.segment_request_start_s=.001*se.lastSegmentRequestTimeMs,ae.segment_download_finish_s=.001*se.lastSegmentFinishTimeMs,se.lastSegmentStart=NaN,se.lastSegmentRequestTimeMs=NaN)}function $(se,ae){if(se.length!==ae.length)return-1;let ce=0;for(let de=0;de<se.length;de++)ce+=se[de]*ae[de];return ce}function ie(){N={},B={}}return I={getSwitchRequest:function(se){try{const ae=pr(E).create();ae.rule=this.getClassName();const ce=se.getMediaType(),de=se.getScheduleController();if(ae.reason=ae.reason||{},ce===F.default.AUDIO)return ae;de.setTimeToLoadDelay(0);const ge=function(we){const ne=we.getMediaType();let U=N[ne];return U||(U=function(X){const J={},me=X.getMediaInfo();return J.state=Ws,J.currentRepresentation=null,function(Ie){Ie&&Ie.type&&(B[Ie.type]={},B[Ie.type].w=[],B[Ie.type].prev_w=[],B[Ie.type].Q=0,B[Ie.type].segment_request_start_s=0,B[Ie.type].segment_download_finish_s=0,B[Ie.type].B_target=1.5)}(me),C(J),J}(we),N[ne]=U),U}(se);if(!B[ce])return ae;switch(ae.reason.state=ge.state,ge.state){case Es:break;case Ws:(function(we,ne,U){const X=we.getMediaInfo(),J=we.getMediaType(),me=we.getThroughputController().getSafeAverageThroughput(J);if(isNaN(me))return ne;const Ie=we.getAbrController(),Te=Ie.getOptimalRepresentationForBitrate(X,me,!0),xe=S.getCurrentBufferLevel(J,!0),Oe=B[J],je=Ie.getPossibleVoRepresentationsFilteredBySettings(X,!0);if(ne.representation=Te,ne.reason.throughput=me,U.currentRepresentation=Te,!isNaN(U.lastSegmentDurationS)&&xe>=Oe.B_target){U.state=Yc,Oe.Q=pl;for(let ee=0;ee<je.length;++ee)je[ee].id===U.currentRepresentation.id?Oe.prev_w[ee]=1:Oe.prev_w[ee]=0}})(se,ae,ge);break;case Yc:(function(we,ne,U){let X=[];const J=we.getThroughputController(),me=we.getMediaType();let Ie=J.getAverageThroughput(me,F.default.THROUGHPUT_CALCULATION_MODES.ARITHMETIC_MEAN,1),Te=S.getCurrentHttpRequest(me),xe=null;const Oe=B[me];if(Ie<1&&(Ie=1),Te.url===U.lastSegmentUrl||Te.type===Le.HTTPRequest.INIT_SEGMENT_TYPE)xe=U.currentRepresentation;else{let je=U.lastSegmentDurationS,ee=1;const te=we.getAbrController(),Ae=we.getMediaInfo(),_e=te.getPossibleVoRepresentationsFilteredBySettings(Ae,!0);let re=we.getVideoModel().getPlaybackRate();const he=Math.max(Math.pow(4,1),pl*Math.sqrt(4));for(let Ce=0;Ce<_e.length;++Ce){const Ve=_e[Ce];re*Ve.bitrateInKbit>Ie&&(ee=-1),Oe.w[Ce]=Oe.prev_w[Ce]+ee*(je/(2*he))*((Oe.Q+pl)*(re*Ve.bitrateInKbit/Ie))}Oe.w=function(Ce){const Ve=Ce.length;let Ke=!1,st=[];for(let hn=0;hn<Ve;++hn)st[hn]=Ce[hn];let ft=Ce.sort(function(hn,In){return In-hn}),St=0,Bt=0,Ht=[];for(let hn=0;hn<Ve-1;++hn)if(St+=ft[hn],Bt=(St-1)/(hn+1),Bt>=ft[hn+1]){Ke=!0;break}Ke||(Bt=(St+ft[Ve-1]-1)/Ve);for(let hn=0;hn<Ve;++hn)Ht[hn]=Math.max(st[hn]-Bt,0);return Ht}(Oe.w);for(let Ce=0;Ce<_e.length;++Ce)X[Ce]=Oe.w[Ce]-Oe.prev_w[Ce],Oe.prev_w[Ce]=Oe.w[Ce];const ve=_e.map(Ce=>Ce.bandwidth);Oe.Q=Math.max(0,Oe.Q-je+je*re*(($(ve,Oe.prev_w)+$(ve,X))/Ie));let fe=[];for(let Ce=0;Ce<ve.length;++Ce)fe[Ce]=Math.abs(ve[Ce]-$(Oe.w,ve));const ke=fe.indexOf(Math.min(...fe));xe=te.getRepresentationByAbsoluteIndex(ke,Ae,!0),xe.absoluteIndex>U.currentRepresentation.absoluteIndex&&ve[U.currentRepresentation.absoluteIndex+1]<=Ie&&(xe=te.getRepresentationByAbsoluteIndex(U.currentRepresentation.absoluteIndex+1,Ae,!0)),xe.bitrateInKbit>=Ie&&(Oe.Q=2*Math.max(pl,Oe.Q)),U.lastSegmentUrl=Te.url}ne.representation=xe,U.currentRepresentation=ne.representation})(se,ae,ge);break;default:(function(we,ne,U){const X=we.getAbrController(),J=we.getMediaInfo(),me=we.getMediaType(),Ie=we.getThroughputController().getSafeAverageThroughput(me);ne.representation=X.getOptimalRepresentationForBitrate(J,Ie,!0),ne.reason.throughput=Ie,U.state=Ws,C(U)})(se,ae,ge)}return ae}catch(ae){return G.error(ae),pr(E).create()}},reset:function(){ie(),x.off(L.default.PLAYBACK_SEEKING,K,I),x.off(L.default.MEDIA_FRAGMENT_LOADED,V,I),x.off(L.default.METRIC_ADDED,D,I)}},G=(0,Be.default)(E).getInstance().getLogger(I),ie(),x.on(L.default.PLAYBACK_SEEKING,K,I),x.on(L.default.MEDIA_FRAGMENT_LOADED,V,I),x.on(L.default.METRIC_ADDED,D,I),I}Xs.__dashjs_factory_name="L2ARule";var Df=Ee.default.getClassFactory(Xs);function yl(){const _=this.context;let E,S,x,I,N,B,G,C,K;function V(){x=null,I=1,N=100,B=0,G=null,C=null,K="dynamic_weight_selection"}function D(){let ae=0;if(x)for(let ce=0;ce<x.length;ce++){let de=x[ce];de.state.throughput>ae&&(ae=de.state.throughput)}return ae}function z(ae,ce,de){let ge=ae.map((we,ne)=>de[ne]*Math.pow(we-ce[ne],2)).reduce((we,ne)=>we+ne);return(ge<0?-1:1)*Math.sqrt(Math.abs(ge))}function $(ae,ce){return z([ae.state.throughput,ae.state.latency,ae.state.rebuffer,ae.state.switch],[ce.state.throughput,ce.state.latency,ce.state.rebuffer,ce.state.switch],[1,1,1,1])}function ie(ae,ce){for(let de=0;de<x.length;de++){let ge=x[de],we=.1;const ne=$(ge,ae);se(ge,ce,Math.exp(-1*Math.pow(ne,2)/(2*Math.pow(we,2))))}}function se(ae,ce,de){let ge=ae.state,we=[.01,.01,.01,.01];ge.throughput=ge.throughput+(ce[0]-ge.throughput)*we[0]*de,ge.latency=ge.latency+(ce[1]-ge.latency)*we[1]*de,ge.rebuffer=ge.rebuffer+(ce[2]-ge.rebuffer)*we[2]*de,ge.switch=ge.switch+(ce[3]-ge.switch)*we[3]*de}return E={getNextQuality:function(ae,ce,de,ge,we,ne,U,X){let J=ge,me=de;(function(_e,re){if(!x){x=[];const he=re.getPossibleVoRepresentationsFilteredBySettings(_e,!0),ve=he.map(fe=>fe.bandwidth);B=Math.min(...ve),I=function(fe){const ke=fe.map(Ce=>Math.pow(Ce,2)).reduce((Ce,Ve)=>Ce+Ve);return Math.sqrt(ke)}(ve),he.forEach(fe=>{let ke={representation:fe,state:{throughput:fe.bandwidth/I,latency:0,rebuffer:0,switch:0}};x.push(ke)}),C=function(fe){let ke=[],Ce=function(St){let Bt=[];for(let Ht=0;Ht<St;Ht++){let hn=[Math.random()*D(),Math.random(),Math.random(),Math.random()];Bt.push(hn)}return Bt}(Math.pow(fe.length,2));ke.push(Ce[0]);let Ve=[1,1,1,1];for(let St=1;St<fe.length;St++){let Bt=null,Ht=null;for(let hn=0;hn<Ce.length;hn++){let In=Ce[hn],Ot=null;for(let Zt=0;Zt<ke.length;Zt++){let cn=z(In,ke[Zt],Ve);(Ot===null||cn<Ot)&&(Ot=cn)}(Ht===null||Ot>Ht)&&(Bt=In,Ht=Ot)}ke.push(Bt)}let Ke=null,st=null;for(let St=0;St<ke.length;St++){let Bt=0;for(let Ht=0;Ht<ke.length;Ht++)St!==Ht&&(Bt+=z(ke[St],ke[Ht],Ve));(Ke===null||Bt>Ke)&&(Ke=Bt,st=St)}let ft=[];for(ft.push(ke[st]),ke.splice(st,1);ke.length>0;){let St=null,Bt=null;for(let Ht=0;Ht<ke.length;Ht++){let hn=z(ft[0],ke[Ht],Ve);(St===null||hn<St)&&(St=hn,Bt=Ht)}ft.push(ke[Bt]),ke.splice(Bt,1)}return ft}(x)}})(ce,ae);let Ie=de/I;Ie>1&&(Ie=D()),ge/=N;let Te=x.find(_e=>_e.representation.id===U.id),xe=Te.representation.bandwidth*X.getSegmentDuration()/me,Oe=Math.max(0,xe-we);if(we-xe<X.getMinBuffer())return S.debug(`Buffer is low for bitrate= ${Te.representation.bandwidth} downloadTime=${xe} currentBuffer=${we} rebuffer=${Oe}`),function(_e,re){let he=0,ve=_e;if(x)for(let fe=0;fe<x.length;fe++){let ke=x[fe];ke.representation.bandwidth<_e.representation.bandwidth&&ke.representation.bandwidth>he&&re>ke.representation.bandwidth&&(he=ke.representation.bandwidth,ve=ke)}return ve}(Te,me).representation;switch(K){case"manual_weight_selection":G=[.4,.4,.4,.4];break;case"random_weight_selection":G=function(_e){let re=[],he=Math.sqrt(2/_e);for(let ve=0;ve<4;ve++)re.push(Math.random()*he);return G=re,G}(x.length);break;default:(function(_e,re,he,ve,fe,ke){G||(G=C[C.length-1]);let Ce=_e.findWeightVector(x,re,he,ve,fe,ke);Ce!==null&&Ce!==-1&&(G=Ce)})(X,J,we,Oe,me,ne)}let je=null,ee=null,te=null;for(let _e=0;_e<x.length;_e++){let re=x[_e],he=re.state,ve=[he.throughput,he.latency,he.rebuffer,he.switch],fe=G.slice(),ke=X.getNextBufferWithBitrate(re.representation.bandwidth,we,me),Ce=ke<X.getMinBuffer();Ce&&S.debug(`Buffer is low for bitrate=${re.representation.bandwidth} downloadTime=${xe} currentBuffer=${we} nextBuffer=${ke}`),(re.representation.bandwidth>de-1e4||Ce)&&re.representation.bandwidth!==B&&(fe[0]=100);let Ve=z(ve,[Ie,0,0,0],fe);(je===null||Ve<je)&&(je=Ve,ee=re.representation,te=re)}let Ae=Math.abs(Te.representation.bandwidth-te.representation.bandwidth)/I;return ie(Te,[Ie,ge,Oe,Ae]),ie(te,[Ie,0,0,Ae]),ee},reset:function(){V()}},S=(0,Be.default)(_).getInstance().getLogger(E),V(),E}yl.__dashjs_factory_name="LearningAbrController";var Au=Ee.default.getClassFactory(yl),ko=class{constructor(){this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}};function ku(){let _,E,S,x,I;function N(){E=null,S=null,x=null,I=null}function B(C,K,V,D){let z=new ko;return z.type=C,z.weights.bitrateReward=K||1,z.weights.bitrateSwitchPenalty=1,z.weights.rebufferPenalty=V||1e3,z.weights.latencyPenalty=[],z.weights.latencyPenalty.push({threshold:1.1,penalty:.05*D}),z.weights.latencyPenalty.push({threshold:1e8,penalty:.1*V}),z.weights.playbackSpeedPenalty=D||200,z}function G(C,K,V,D,z){z.bitrateWSum+=z.weights.bitrateReward*C,z.lastBitrate&&(z.bitrateSwitchWSum+=z.weights.bitrateSwitchPenalty*Math.abs(C-z.lastBitrate)),z.lastBitrate=C,z.rebufferWSum+=z.weights.rebufferPenalty*K;for(let $=0;$<z.weights.latencyPenalty.length;$++){let ie=z.weights.latencyPenalty[$];if(V<=ie.threshold){z.latencyWSum+=ie.penalty*V;break}}z.playbackSpeedWSum+=z.weights.playbackSpeedPenalty*Math.abs(1-D),z.totalQoe=z.bitrateWSum-z.bitrateSwitchWSum-z.rebufferWSum-z.latencyWSum-z.playbackSpeedWSum}return _={setupPerSegmentQoe:function(C,K,V){E=B("segment",C,K,V),S=C,x=K,I=V},logSegmentMetrics:function(C,K,V,D){E&&G(C,K,V,D,E)},getPerSegmentQoe:function(){return E},calculateSingleUseQoe:function(C,K,V,D){let z=null;return S&&x&&I&&(z=B("segment",S,x,I)),z?(G(C,K,V,D,z),z.totalQoe):0},reset:function(){N()}},N(),_}ku.__dashjs_factory_name="LoLpQoeEvaluator";var Wc=Ee.default.getClassFactory(ku);function Ru(_){let E,S,x,I,N=_.targetLatency,B=_.bufferMin,G=_.segmentDuration,C=_.qoeEvaluator;function K(){return G}function V(D,z){const $=K();let ie;return ie=z>$?D-$:D+$-z,ie}return E={getMinBuffer:function(){return B},getSegmentDuration:K,getNextBufferWithBitrate:function(D,z,$){return V(z,D*G/$)},getNextBuffer:V,findWeightVector:function(D,z,$,ie,se,ae){let ce=null,de=null,ge=null,we=Math.abs(z-I);return D.forEach(ne=>{x.forEach(U=>{U[0];let X,J=U[1],me=U[2],Ie=(U[3],ne.representation.bandwidth*G/se),Te=V($,Ie);X=me===0?10:1/me;let xe=X*Math.max(1e-5,Ie-Te);X=J===0?10:1/J;let Oe=X*ne.state.latency,je=C.calculateSingleUseQoe(ne.representation.bandwidth,xe,Oe,ae);(ce===null||je>ce)&&function(ee,te,Ae){return!(ee>N+Ae)&&te>=B}(z,Te,we)&&(ce=je,de=U,ge=ne.representation.bandwidth)})}),de===null&&ge===null&&(de=-1),I=z,de}},S=[.2,.4,.6,.8,1],x=function(D){let z=D.map(function(ie){return[ie]}),$=function(ie,se,ae){if(ae===se)return ie;let ce=ie.length;for(let de=0;de<ce;de++){let ge=ie.shift();for(let we=0;we<D.length;we++)ie.push(ge.concat(D[we]))}return $(ie,se,ae+1)};return $(z,4,1)}(S),I=0,E}Ru.__dashjs_factory_name="LoLpWeightSelector";var Xc=Ee.default.getClassFactory(Ru);function Qs(_){let E,S,x,I,N=(_=_||{}).dashMetrics,B=this.context;return S={getSwitchRequest:function(G){try{let C=pr(B).create();C.rule=this.getClassName();let K=G.getMediaInfo().type,V=G.getAbrController();const D=G.getStreamInfo();let z=G.getRepresentation();const $=G.getMediaInfo(),ie=N.getCurrentBufferState(K),se=G.getScheduleController(),ae=N.getCurrentBufferLevel(K,!0),ce=se.getPlaybackController();let de=ce.getCurrentLiveLatency();if(K===F.default.AUDIO)return C;de||(de=0);const ge=ce.getPlaybackRate(),we=G.getThroughputController().getSafeAverageThroughput(K);if(E.debug(`Throughput ${Math.round(we)} kbps`),isNaN(we)||!ie||V.getAbandonmentStateFor(D.id,K)===j.ABANDON_LOAD)return C;let ne=V.getPossibleVoRepresentationsFilteredBySettings($,!0).map(je=>je.bandwidth),U=G.getRepresentation().fragmentDuration,X=Math.min(...ne)/1e3,J=Math.max(...ne)/1e3,me=z.bandwidth/1e3,Ie=N.getCurrentHttpRequest(K,!0),Te=(Ie.tresponse.getTime()-Ie.trequest.getTime())/1e3,xe=Te>U?Te-U:0;I.setupPerSegmentQoe(U,J,X),I.logSegmentMetrics(me,xe,de,ge);let Oe=Xc(B).create({targetLatency:1.5,bufferMin:.3,segmentDuration:U,qoeEvaluator:I});return C.representation=x.getNextQuality(V,$,1e3*we,de,ae,ge,z,Oe),C.reason={throughput:we,latency:de},C.priority=pr.PRIORITY.STRONG,se.setTimeToLoadDelay(0),C}catch(C){throw C}},reset:function(){x.reset(),I.reset()}},E=(0,Be.default)(B).getInstance().getLogger(S),x=Au(B).create(),I=Wc(B).create(),S}Qs.__dashjs_factory_name="LoLPRule";var Ji=Ee.default.getClassFactory(Qs);function Za(_){_=_||{};const E=this.context,S=_.mediaPlayerModel,x=_.customParametersModel,I=_.dashMetrics,N=_.settings,B=(0,oe.default)(E).getInstance();let G,C,K,V;function D(){Object.values(F.default.QUALITY_SWITCH_RULES).forEach(ae=>{C=z(ae,C)}),Object.values(F.default.ABANDON_FRAGMENT_RULES).forEach(ae=>{K=z(ae,K)}),x.getAbrCustomRules().forEach(function(ae){ae.type===F.default.RULES_TYPES.QUALITY_SWITCH_RULES&&C.push(ae.rule(E).create()),ae.type===F.default.RULES_TYPES.ABANDON_FRAGMENT_RULES&&K.push(ae.rule(E).create())}),C.length===0&&(C.push(Nf(E).create({dashMetrics:I,mediaPlayerModel:S,settings:N})),C.push(_u(E).create({dashMetrics:I})))}function z(ae,ce){const de=ae.charAt(0).toLowerCase()+ae.slice(1);return N.get().streaming.abr.rules[de].active&&!function(ge,we){return ge.filter(ne=>ne.getClassName()===we).length>0}(ce,ae)?(ce.push(function(ge){switch(ge){case F.default.QUALITY_SWITCH_RULES.BOLA_RULE:return Nf(E).create({dashMetrics:I,mediaPlayerModel:S,settings:N});case F.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE:return _u(E).create({dashMetrics:I});case F.default.QUALITY_SWITCH_RULES.INSUFFICIENT_BUFFER_RULE:return Vi(E).create({dashMetrics:I,settings:N});case F.default.QUALITY_SWITCH_RULES.SWITCH_HISTORY_RULE:return Kc(E).create();case F.default.QUALITY_SWITCH_RULES.DROPPED_FRAMES_RULE:return Cf(E).create();case F.default.QUALITY_SWITCH_RULES.LEARN_TO_ADAPT_RULE:return Df(E).create({dashMetrics:I,settings:N});case F.default.QUALITY_SWITCH_RULES.LOL_PLUS_RULE:return Ji(E).create({dashMetrics:I});case F.default.ABANDON_FRAGMENT_RULES.ABANDON_REQUEST_RULE:return ya(E).create({dashMetrics:I,mediaPlayerModel:S,settings:N})}}(ae)),ce):N.get().streaming.abr.rules[de].active?ce:function(ge,we){return ge.filter(ne=>ne.getClassName()!==we)}(ce,ae)}function $(ae){return ae.filter(ce=>ce.representation!==pr.NO_CHANGE)}function ie(ae){const ce={};let de,ge,we,ne=null;if(ae.length!==0){for(ce[pr.PRIORITY.STRONG]=null,ce[pr.PRIORITY.WEAK]=null,ce[pr.PRIORITY.DEFAULT]=null,de=0,ge=ae.length;de<ge;de+=1)we=ae[de],we.representation!==pr.NO_CHANGE&&(ce[we.priority]===null||ce[we.priority].representation!==pr.NO_CHANGE&&we.representation.bitrateInKbit<ce[we.priority].representation.bitrateInKbit)&&(ce[we.priority]=we);return ce[pr.PRIORITY.WEAK]&&ce[pr.PRIORITY.WEAK].representation!==pr.NO_CHANGE&&(ne=ce[pr.PRIORITY.WEAK]),ce[pr.PRIORITY.DEFAULT]&&ce[pr.PRIORITY.DEFAULT].representation!==pr.NO_CHANGE&&(ne=ce[pr.PRIORITY.DEFAULT]),ce[pr.PRIORITY.STRONG]&&ce[pr.PRIORITY.STRONG].representation!==pr.NO_CHANGE&&(ne=ce[pr.PRIORITY.STRONG]),ne}}function se(){D()}return G={clearDataForStream:function(ae){[C,K].forEach(ce=>{ce&&ce.length&&ce.forEach(de=>de.clearDataForStream&&typeof de.clearDataForStream=="function"&&de.clearDataForStream(ae))})},getAbandonFragmentRules:function(){return K},getBestPossibleSwitchRequest:function(ae){return ae&&ie($(C.filter(ce=>{const de=ce.getClassName();if(de!==F.default.QUALITY_SWITCH_RULES.BOLA_RULE&&de!==F.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE)return!0;const ge=ae.getMediaType();return V[ge]&&de===F.default.QUALITY_SWITCH_RULES.BOLA_RULE||!V[ge]&&de===F.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE}).map(ce=>ce.getSwitchRequest(ae))))||pr(E).create()},getBolaState:function(ae){return V[ae]},getMinSwitchRequest:ie,getQualitySwitchRules:function(){return C},handleNewMediaInfo:function(ae){C.forEach(ce=>ce.handleNewMediaInfo&&ce.handleNewMediaInfo(ae)),K.forEach(ce=>ce.handleNewMediaInfo&&ce.handleNewMediaInfo(ae))},initialize:function(){C=[],K=[],V={},D(),B.on(L.default.SETTING_UPDATED_ABR_ACTIVE_RULES,se,G)},reset:function(){[C,K].forEach(ae=>{ae&&ae.length&&ae.forEach(ce=>ce.reset&&ce.reset())}),C=[],K=[],V={},B.off(L.default.SETTING_UPDATED_ABR_ACTIVE_RULES,se,G)},setBolaState:function(ae,ce){V[ae]=ce},shouldAbandonFragment:function(ae){if(!ae)return pr(E).create();const ce=ie($(K.map(de=>de.shouldAbandon(ae))));return ce&&(ce.reason.forceAbandon=!0),ce||pr(E).create()}},G}Za.__dashjs_factory_name="ABRRulesCollection";const Cu=Ee.default.getClassFactory(Za);Ee.default.updateSingletonFactory(Za.__dashjs_factory_name,Cu);var Lf=Cu;function Na(_){let E;const S=(_=_||{}).abrController,x=_.throughputController,I=_.switchRequestHistory,N=_.droppedFramesHistory,B=_.currentRequest,G=_.streamProcessor?_.streamProcessor.getScheduleController():null,C=_.streamProcessor?_.streamProcessor.getRepresentation():null,K=_.videoModel?_.videoModel:null;function V(){return C?C.mediaInfo:null}return E={getAbrController:function(){return S},getCurrentRequest:function(){return B},getDroppedFramesHistory:function(){return N},getMediaInfo:V,getMediaType:function(){const D=V();return D?D.type:null},getRepresentation:function(){return C},getScheduleController:function(){return G},getStreamInfo:function(){const D=V();return D?D.streamInfo:null},getSwitchRequestHistory:function(){return I},getThroughputController:function(){return x},getVideoModel:function(){return K}},E}Na.__dashjs_factory_name="RulesContext";var Ja=Ee.default.getClassFactory(Na);function Nu(){let _={},E={};const S=this.context,x=(0,Q.default)(S).getInstance();return{clearForStream:function(I){delete _[I],delete E[I]},getSwitchRequests:function(I,N){return I!=null&&N!=null&&_[I]&&_[I][N]?_[I][N]:{}},push:function(I){const N=I.currentRepresentation,B=I.newRepresentation;if(N.mediaInfo.streamInfo.id!==B.mediaInfo.streamInfo.id||B.mediaInfo.id!==N.mediaInfo.id)return;const G=N.mediaInfo.streamInfo.id;_[G]||function(se){_[se]={},E[se]={}}(G);const C=N.mediaInfo.type;_[G][C]||function(se,ae){_[se][ae]={},E[se][ae]=[]}(G,C);const K=I.currentRepresentation.id;_[G][C][K]||function(se,ae,ce){_[se][ae][ce]={noDrops:0,drops:0,dropSize:0}}(G,C,K);let V=I.newRepresentation.absoluteIndex-I.currentRepresentation.absoluteIndex,D=V<0?1:0,z=D?-V:0,$=D?0:1;_[G][C][I.currentRepresentation.id].drops+=D,_[G][C][I.currentRepresentation.id].dropSize+=z,_[G][C][I.currentRepresentation.id].noDrops+=$,E[G][C].push({id:I.currentRepresentation.id,noDrop:$,drop:D,dropSize:z});const ie=function(se,ae){return E[se][ae].length>x.get().streaming.abr.rules.switchHistoryRule.parameters.sampleSize?E[se][ae].shift():null}(G,C);ie&&function(se,ae,ce){_[se][ae][ce.id].drops-=ce.drop,_[se][ae][ce.id].dropSize-=ce.dropSize,_[se][ae][ce.id].noDrops-=ce.noDrop}(G,C,ie)},reset:function(){_={},E={}}}}Nu.__dashjs_factory_name="SwitchRequestHistory";var Pf=Ee.default.getClassFactory(Nu);function Da(){let _={},E={},S={};return{clearForStream:function(x){delete _[x],delete E[x],delete S[x]},getFrameHistory:function(x){return _[x]},push:function(x,I,N){if(!I)return;_[x]||function(D){_[D]=[],E[D]=0,S[D]=0}(x);let B=N&&N.droppedVideoFrames?N.droppedVideoFrames:0,G=N&&N.totalVideoFrames?N.totalVideoFrames:0,C=B-E[x];E[x]=B;let K=G-S[x];S[x]=G;const V=_[x];V[I]?(V[I].droppedVideoFrames+=C,V[I].totalVideoFrames+=K):V[I]={droppedVideoFrames:C,totalVideoFrames:K}},reset:function(){_={},E={},S={}}}}Da.__dashjs_factory_name="DroppedFramesHistory";var bs=Ee.default.getClassFactory(Da);function Ro(){const _=this.context,E=(0,Be.default)(_).getInstance(),S=(0,oe.default)(_).getInstance();let x,I,N,B,G,C,K,V,D,z,$,ie,se,ae,ce,de,ge,we,ne,U;function X(){K={},C={},ge&&ge.reset(),de&&de.reset(),ce=void 0,ge=void 0,de=void 0,clearTimeout(V),V=null}function J(te){let Ae=me(te,!(arguments.length>1&&arguments[1]!==void 0)||arguments[1]);return Ae=function(_e){try{return function(re){try{if(!U.get().streaming.cmsd.enabled||!U.get().streaming.cmsd.abr.applyMb)return re;const he=re.filter(ve=>{const fe=ve.mediaInfo.type;let ke=se.getMaxBitrate(fe);if(fe!==F.default.VIDEO||ke<0)return!0;const Ce=ve.mediaInfo.streamInfo.id;return ke-=C[Ce][F.default.AUDIO].getRepresentation().bitrateInKbit||0,ve.bitrateInKbit<=ke});return he.length>0?he:re}catch(he){return I.error(he),re}}(_e=function(re){try{if(!U.get().streaming.abr.limitBitrateByPortal)return re;const{elementWidth:he}=z.getVideoElementSize(),ve=re.filter(fe=>fe.mediaInfo.type!==F.default.VIDEO||fe.width<=he);return ve.length>0?ve:re}catch(he){return I.error(he),re}}(_e=function(re){try{const he=re.filter(ve=>{const fe=ve.mediaInfo.type,ke=ve.bitrateInKbit,Ce=$.getAbrBitrateParameter("maxBitrate",fe),Ve=$.getAbrBitrateParameter("minBitrate",fe);return!(Ce>-1&&ke>Ce||Ve>-1&&ke<Ve)});return he.length>0?he:re}catch(he){return I.error(he),re}}(_e)))}catch(re){return I.error(re),_e}}(Ae),Ae}function me(te,Ae){let _e=[];return te&&(function(he){try{const ve=[];if(he&&ve.push(he),!U.get().streaming.abr.enableSupplementalPropertyAdaptationSetSwitching||!he.adaptationSetSwitchingCompatibleIds||he.adaptationSetSwitchingCompatibleIds.length===0)return ve;const fe=C[he.streamInfo.id][he.type].getAllMediaInfos().filter(ke=>he.adaptationSetSwitchingCompatibleIds.includes(ke.id));return ve.concat(fe)}catch{return[he]}}(te).forEach(he=>{let ve=D.getVoRepresentations(he);ve&&ve.length>0&&(_e=_e.concat(ve))}),_e=function(he){return he=function(ve){let fe=null;return ve.filter(ke=>(fe||(fe=ke.mediaInfo),!isNaN(ke.qualityRanking)&&D.areMediaInfosEqual(fe,ke.mediaInfo))).length===ve.length}(he)?function(ve){return ve.sort((fe,ke)=>ke.qualityRanking-fe.qualityRanking),ve}(he):function(ve){return ve.sort((fe,ke)=>D.areMediaInfosEqual(fe.mediaInfo,ke.mediaInfo)?isNaN(fe.pixelsPerSecond)||isNaN(ke.pixelsPerSecond)||fe.pixelsPerSecond===ke.pixelsPerSecond?fe.bandwidth-ke.bandwidth:fe.pixelsPerSecond-ke.pixelsPerSecond:isNaN(fe.pixelsPerSecond)||isNaN(ke.pixelsPerSecond)||fe.pixelsPerSecond===ke.pixelsPerSecond?isNaN(fe.bitsPerPixel)||isNaN(ke.bitsPerPixel)?fe.bandwidth-ke.bandwidth:ke.bitsPerPixel-fe.bitsPerPixel:fe.pixelsPerSecond-ke.pixelsPerSecond),ve}(he)}(_e),_e.forEach((he,ve)=>{he.absoluteIndex=ve}),_e=_e.filter(he=>{const ve=!!Ae||D.areMediaInfosEqual(he.mediaInfo,te),fe=!he||!he.mediaInfo||G.areKeyIdsUsable(he.mediaInfo);return ve&&fe})),_e}function Ie(te){const Ae=te.request.mediaType,_e=te.streamId;if(!(Ae&&_e&&C[_e]&&U.get().streaming.abr.autoSwitchBitrate[Ae]))return;const re=C[_e][Ae];if(!re)return;const he=Ja(_).create({abrController:x,streamProcessor:re,currentRequest:te.request,throughputController:we,adapter:D,videoModel:z}),ve=N.shouldAbandonFragment(he);ve&&ve.representation!==pr.NO_CHANGE&&function(fe,ke,Ce,Ve,Ke){if(Ve.getFragmentModel().getRequests({state:Dt.FRAGMENT_MODEL_LOADING,index:fe.request.index})[0]){const st=function(ft,St){return K[ft]&&K[ft][St]?K[ft][St]:null}(ke,Ce);st&&(st.state=j.ABANDON_LOAD),de.reset(),Oe(Ce,B.getActiveStreamInfo(),Ke.representation,Ke.reason),clearTimeout(V),V=setTimeout(()=>{st&&(K[ke][Ce].state=j.ALLOW_LOAD),V=null},U.get().streaming.abandonLoadTimeout)}}(te,_e,Ae,re,ve)}function Te(te){te.mediaType===F.default.VIDEO&&(ce!==void 0&&ge.push(te.streamId,ce,z.getPlaybackQuality()),ce=te.newRepresentation.id)}function xe(te){!ee()||te.metric!==j.BUFFER_LEVEL||te.mediaType!==F.default.AUDIO&&te.mediaType!==F.default.VIDEO||function(Ae,_e){try{const re=$.getBufferTimeDefault(),he=re,ve=.5*re,fe=N.getBolaState(Ae),ke=_e>=(fe?ve:he);N.setBolaState(Ae,ke),ke!==fe&&(ke?I.info("["+Ae+"] switching from throughput to buffer occupancy ABR rule (buffer: "+_e.toFixed(3)+")."):I.info("["+Ae+"] switching from buffer occupancy to throughput ABR rule (buffer: "+_e.toFixed(3)+")."))}catch(re){I.error(re)}}(te.mediaType,.001*te.value.level)}function Oe(te,Ae,_e){let re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!(Ae&&Ae.id&&te&&C&&C[Ae.id]&&C[Ae.id][te]&&_e))return;const he=C[Ae.id][te].getRepresentation();he&&_e.id===he.id||je(he,_e,re)}function je(te,Ae,_e){const re=Ae.mediaInfo.streamInfo.id,he=Ae.mediaInfo.type;if(he&&C[re]&&C[re][he]){const ve=C[re][he].getStreamInfo(),fe=ne.getCurrentBufferLevel(he),ke=te!==null&&!D.areMediaInfosEqual(te.mediaInfo,Ae.mediaInfo),Ce=te?te.bitrateInKbit:0;I.info(`[AbrController]: Switching quality in period ${re} for media type ${he}. Switch from bitrate ${Ce} to bitrate ${Ae.bitrateInKbit}. Current buffer level: ${fe}. Reason:`+(_e?JSON.stringify(_e):"/")),S.trigger(L.default.QUALITY_CHANGE_REQUESTED,{oldRepresentation:te,newRepresentation:Ae,reason:_e,streamInfo:ve,mediaType:he,isAdaptationSetSwitch:ke},{streamId:ve.id,mediaType:he});const Ve=we.getAverageThroughput(he);isNaN(Ve)||ae.setSavedBitrateSettings(he,Ve)}}function ee(){return U.get().streaming.abr.rules.bolaRule.active&&U.get().streaming.abr.rules.throughputRule.active}return x={checkPlaybackQuality:function(te,Ae){try{if(!(te&&C&&C[Ae]&&C[Ae][te]))return!1;if(ge){const ke=z.getPlaybackQuality();ke&&ge.push(Ae,ce,ke)}if(!U.get().streaming.abr.autoSwitchBitrate[te])return!1;const _e=C[Ae][te],re=_e.getRepresentation(),he=Ja(_).create({abrController:x,throughputController:we,switchRequestHistory:de,droppedFramesHistory:ge,streamProcessor:_e,adapter:D,videoModel:z}),ve=N.getBestPossibleSwitchRequest(he);if(!ve||!ve.representation)return!1;let fe=ve.representation;return de.push({currentRepresentation:re,newRepresentation:fe}),fe.id!==re.id&&(K[Ae][te].state===j.ALLOW_LOAD||fe.absoluteIndex<re.absoluteIndex)&&(je(re,fe,ve.reason),!0)}catch(_e){return I.error(_e),!1}},clearDataForStream:function(te){ge&&ge.clearForStream(te),C[te]&&delete C[te],de&&de.clearForStream(te),K[te]&&delete K[te],N.clearDataForStream(te)},getAbandonmentStateFor:function(te,Ae){return K[te]&&K[te][Ae]?K[te][Ae].state:null},getInitialBitrateFor:function(te){if(te===F.default.TEXT)return NaN;let Ae=$.getAbrBitrateParameter("initialBitrate",te);if(Ae>0)return Ae;let _e=NaN;if(ae&&ae.hasOwnProperty("getSavedBitrateSettings")&&(_e=ae.getSavedBitrateSettings(te)),!isNaN(_e))return _e;const re=we.getAverageThroughput(te);return!isNaN(re)&&re>0?re:te===F.default.VIDEO?1e3:100},getOptimalRepresentationForBitrate:function(te,Ae){const _e=J(te,!(arguments.length>2&&arguments[2]!==void 0)||arguments[2]);if(!_e||_e.length===0)return null;const re=_e.reduce((ve,fe)=>ve.bandwidth<fe.bandwidth?ve:fe);if(Ae<=0)return re;const he=_e.filter(ve=>ve.bitrateInKbit<=Ae);return he&&he.length!==0?he.reduce((ve,fe)=>fe.absoluteIndex>ve.absoluteIndex?fe:ve):re},getPossibleVoRepresentations:function(te){return me(te,!(arguments.length>1&&arguments[1]!==void 0)||arguments[1])},getPossibleVoRepresentationsFilteredBySettings:J,getRepresentationByAbsoluteIndex:function(te,Ae){let _e=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return isNaN(te)||te<0?null:J(Ae,_e).find(re=>re.absoluteIndex===te)},handleNewMediaInfo:function(te){N.handleNewMediaInfo(te)},initialize:function(){ge=bs(_).create(),de=Pf(_).create(),N=Lf(_).create({dashMetrics:ne,customParametersModel:ie,mediaPlayerModel:$,settings:U}),N.initialize(),S.on(pe.default.QUALITY_CHANGE_RENDERED,Te,x),S.on(pe.default.METRIC_ADDED,xe,x),S.on(L.default.LOADING_PROGRESS,Ie,x)},isPlayingAtLowestQuality:function(te){return J(te.mediaInfo,!0)[0].id===te.id},isPlayingAtTopQuality:function(te){if(!te)return!0;const Ae=J(te.mediaInfo,!0);return Ae[Ae.length-1].id===te.id},registerStreamType:function(te,Ae){const _e=Ae.getStreamInfo().id;C[_e]||(C[_e]={}),C[_e][te]=Ae,K[_e]||(K[_e]={}),K[_e][te]={},K[_e][te].state=j.ALLOW_LOAD,N.getBolaState(te)===void 0&&N.setBolaState(te,U.get().streaming.abr.rules.bolaRule.active&&!ee())},reset:function(){X(),S.off(pe.default.QUALITY_CHANGE_RENDERED,Te,x),S.off(pe.default.METRIC_ADDED,xe,x),S.off(L.default.LOADING_PROGRESS,Ie,x),N&&N.reset()},setConfig:function(te){te&&(te.streamController&&(B=te.streamController),te.throughputController&&(we=te.throughputController),te.domStorage&&(ae=te.domStorage),te.mediaPlayerModel&&($=te.mediaPlayerModel),te.customParametersModel&&(ie=te.customParametersModel),te.cmsdModel&&(se=te.cmsdModel),te.dashMetrics&&(ne=te.dashMetrics),te.adapter&&(D=te.adapter),te.videoModel&&(z=te.videoModel),te.settings&&(U=te.settings),te.capabilities&&(G=te.capabilities))},setPlaybackQuality:Oe,setWindowResizeEventCalled:function(te){},unRegisterStreamType:function(te,Ae){try{C[te]&&C[te][Ae]&&delete C[te][Ae],K[te]&&K[te][Ae]&&delete K[te][Ae]}catch{}}},I=E.getLogger(x),X(),x}Ro.__dashjs_factory_name="AbrController";const Qc=Ee.default.getSingletonFactory(Ro);Ee.default.updateSingletonFactory(Ro.__dashjs_factory_name,Qc);var vl=Qc;const Mf=new Map([[F.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[F.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[F.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[F.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Co(){let _,E,S,x,I,N,B,G,C,K,V;const D=this.context,z=(0,oe.default)(D).getInstance(),$=[];function ie(Ie){x&&(arguments.length>1&&arguments[1]!==void 0&&arguments[1]?x.playbackRate=Ie:me(F.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,()=>{x.playbackRate=Ie}))}function se(){return $.length>0}function ae(Ie){let Te=$.indexOf(Ie);if(Ie!==null&&(Te!==-1&&$.splice(Te,1),S.get().streaming.buffer.syntheticStallEvents.enabled&&x&&!se())){const xe=()=>{if(ie(K||1,S.get().streaming.buffer.syntheticStallEvents.ignoreReadyState),!x.paused){const Oe=document.createEvent("Event");Oe.initEvent("playing",!0,!1),x.dispatchEvent(Oe)}};S.get().streaming.buffer.syntheticStallEvents.ignoreReadyState?xe():(B&&B.func&&B.event&&ge(B.event,B.func),B=me(F.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,xe))}}function ce(){if(x&&se()&&x.playbackRate===0){const Ie=document.createEvent("Event");Ie.initEvent("waiting",!0,!1),x.dispatchEvent(Ie)}}function de(Ie,Te){x&&x.addEventListener(Ie,Te)}function ge(Ie,Te){x&&x.removeEventListener(Ie,Te)}function we(){return x?x.readyState:NaN}function ne(){return x?x.buffered:null}function U(){return x?x.clientWidth:NaN}function X(){return x?x.clientHeight:NaN}function J(Ie,Te,xe,Oe,je){if(x){for(let ee=0;ee<x.textTracks.length;ee++)if(x.textTracks[ee].kind===Ie&&(!Te||x.textTracks[ee].label==Te)&&x.textTracks[ee].language===xe&&x.textTracks[ee].isTTML===Oe&&x.textTracks[ee].isEmbedded===je)return x.textTracks[ee]}return null}function me(Ie,Te){return Ie===F.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||we()>=Ie?(Te(),null):function(xe,Oe){const je=()=>{ge(xe,je),Oe(xe)};return de(xe,je),{func:je,event:xe}}(Mf.get(Ie),Te)}return _={addEventListener:de,addTextTrack:function(Ie,Te,xe,Oe,je){if(!x)return null;let ee=J(Ie,Te,xe,Oe,je);return ee||(ee=x.addTextTrack(Ie,Te,xe),ee.isEmbedded=je,ee.isTTML=Oe),ee},appendChild:function(Ie){x&&(x.appendChild(Ie),Ie.isTTML!==void 0&&(x.textTracks[x.textTracks.length-1].isTTML=Ie.isTTML,x.textTracks[x.textTracks.length-1].isEmbedded=Ie.isEmbedded))},getBufferRange:ne,getClientHeight:X,getClientWidth:U,getElement:function(){return x},getEnded:function(){return x?x.ended:null},getPlaybackQuality:function(){if(!x)return null;let Ie="webkitDroppedFrameCount"in x&&"webkitDecodedFrameCount"in x,Te=null;return"getVideoPlaybackQuality"in x?Te=x.getVideoPlaybackQuality():Ie&&(Te={droppedVideoFrames:x.webkitDroppedFrameCount,totalVideoFrames:x.webkitDroppedFrameCount+x.webkitDecodedFrameCount,creationTime:new Date}),Te},getPlaybackRate:function(){return x?x.playbackRate:null},getPlayedRanges:function(){return x?x.played:null},getReadyState:we,getSource:function(){return x?x.src:null},getTTMLRenderingDiv:function(){return G},getTextTrack:J,getTextTracks:function(){return x?x.textTracks:[]},getTime:function(){return x?isNaN(I)?x.currentTime:I:null},getVideoElementSize:function(){const Ie=S.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;return{elementWidth:U()*Ie,elementHeight:X()*Ie}},getVideoHeight:function(){return x?x.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(x){const Ie=x.parentNode.host||x.parentNode;return Ie?x.getBoundingClientRect().left-Ie.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(x){const Ie=x.parentNode.host||x.parentNode;return Ie?x.getBoundingClientRect().top-Ie.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return x?x.videoWidth:NaN},getVttRenderingDiv:function(){return C},initialize:function(){z.on(L.default.PLAYBACK_PLAYING,ce,this)},isPaused:function(){return x?x.paused:null},isSeeking:function(){return x?x.seeking||!isNaN(I):null},isStalled:se,pause:function(){x&&(x.pause(),x.autoplay=!1)},play:function(){if(x){x.autoplay=!0;const Ie=x.play();Ie&&Ie.catch&&typeof Promise<"u"&&Ie.catch(Te=>{Te.name==="NotAllowedError"&&z.trigger(L.default.PLAYBACK_NOT_ALLOWED),E.warn(`Caught pending play exception - continuing (${Te})`)})}},removeChild:function(Ie){x&&x.removeChild(Ie)},removeEventListener:ge,reset:function(){clearTimeout(V),z.off(L.default.PLAYBACK_PLAYING,ce,this),$.length=0},setConfig:function(Ie){Ie&&Ie.settings&&(S=Ie.settings)},setCurrentTime:function(Ie,Te){x&&(N&&N.func&&N.event&&ge(N.event,N.func),I=Ie,N=me(F.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,()=>{if(x)if(x.currentTime!==I)try{I=Te?function(xe){const Oe=ne();let je=xe,ee=9999999999;if(Oe)for(let te=0;te<Oe.length;te++){const Ae=Oe.start(te),_e=Oe.end(te),re=Math.abs(Ae-xe),he=Math.abs(_e-xe);if(xe>=Ae&&xe<=_e)return xe;re<ee&&(ee=re,je=Ae),he<ee&&(ee=he,je=_e)}return je}(I):I,isNaN(I)||(x.currentTime=I),I=NaN}catch(xe){x.readyState===0&&xe.code===xe.INVALID_STATE_ERR&&(V=setTimeout(function(){x.currentTime=I,I=NaN},400))}else I=NaN}))},setDisableRemotePlayback:function(Ie){x&&(x.disableRemotePlayback=Ie)},setElement:function(Ie){if(!(Ie==null||Ie&&/^(VIDEO|AUDIO)$/i.test(Ie.nodeName)))throw"element is not video or audio DOM type!";x=Ie,x&&(x.preload="auto")},setPlaybackRate:ie,setSource:function(Ie){x&&(Ie?x.src=Ie:(x.removeAttribute("src"),x.load()))},setStallState:function(Ie,Te){(function(xe,Oe){Oe?function(je){if(je!==null&&x&&!x.seeking&&$.indexOf(je)===-1&&($.push(je),S.get().streaming.buffer.syntheticStallEvents.enabled&&x&&$.length===1&&(S.get().streaming.buffer.syntheticStallEvents.ignoreReadyState||we()>=F.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA))){K=x.playbackRate,ie(0,!0);const ee=document.createEvent("Event");ee.initEvent("waiting",!0,!1),x.dispatchEvent(ee)}}(xe):ae(xe)})(Ie,Te)},setTTMLRenderingDiv:function(Ie){G=Ie,G.style.position="absolute",G.style.display="flex",G.style.overflow="hidden",G.style.pointerEvents="none",G.style.top=0,G.style.left=0},setVttRenderingDiv:function(Ie){C=Ie},waitForReadyState:me},E=(0,Be.default)(D).getInstance().getLogger(_),S=(0,Q.default)(D).getInstance(),I=NaN,_}Co.__dashjs_factory_name="VideoModel";var La=Ee.default.getSingletonFactory(Co);const El=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],No="dashjs_?_bitrate",Ts="dashjs_?_settings",Ss="localStorage",Zs="lastBitrate",Zc="lastMediaSettings";function Du(_){_=_||{};const E=this.context,S=_.settings;let x,I,N;function B(V){if(N!==void 0)return N;let D;N=!1;try{typeof window<"u"&&(D=window[V])}catch(z){return I.warn("DOMStorage access denied: "+z.message),N}if(!D||V!==Ss)return N;try{D.setItem("1","1"),D.removeItem("1"),N=!0}catch(z){I.warn("DOMStorage is supported, but cannot be used: "+z.message)}return N}function G(){return Math.round(new Date().getTime()/6e5)*6e5}function C(V,D){return B(V)&&S.get().streaming[D+"CachingInfo"].enabled}function K(){if(!S)throw new Error(F.default.MISSING_CONFIG_ERROR)}return x={getSavedBitrateSettings:function(V){if(K(),!S.get().streaming.lastBitrateCachingInfo.enabled)return NaN;let D=NaN;if(C(Ss,Zs)){const z=No.replace(/\?/,V);try{const $=JSON.parse(localStorage.getItem(z))||{},ie=new Date().getTime()-parseInt($.timestamp,10)>=S.get().streaming.lastBitrateCachingInfo.ttl||!1,se=parseFloat($.bitrate);isNaN(se)||ie?ie&&localStorage.removeItem(z):(D=se,I.debug("Last saved bitrate for "+V+" was "+se))}catch{return null}}return D},setSavedBitrateSettings:function(V,D){if(C(Ss,Zs)&&D){const z=No.replace(/\?/,V);try{localStorage.setItem(z,JSON.stringify({bitrate:D.toFixed(3),timestamp:G()}))}catch($){I.error($.message)}}},getSavedMediaSettings:function(V){if(K(),!S.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;let D=null;if(C(Ss,Zc)){const z=Ts.replace(/\?/,V);try{const $=JSON.parse(localStorage.getItem(z))||{},ie=new Date().getTime()-parseInt($.timestamp,10)>=S.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;D=$.settings,ie&&(localStorage.removeItem(z),D=null)}catch{return null}}return D},setSavedMediaSettings:function(V,D){if(C(Ss,Zc)){const z=Ts.replace(/\?/,V);try{localStorage.setItem(z,JSON.stringify({settings:D,timestamp:G()}))}catch($){I.error($.message)}}}},I=(0,Be.default)(E).getInstance().getLogger(x),B(Ss)&&El.forEach(V=>{const D=localStorage.getItem(V.oldKey);if(D){localStorage.removeItem(V.oldKey);try{localStorage.setItem(V.newKey,D)}catch(z){I.error(z.message)}}}),x}Du.__dashjs_factory_name="DOMStorage";var $r=Ee.default.getSingletonFactory(Du),Lu=t(8986);function Pu(){const _=this.context;let E,S,x,I,N,B,G,C,K,V,D,z;function $(ce,de,ge,we){let ne=null;const U=ce?z.resolve(ce.path):null,X=we||{init:!0,url:U?U.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:de,representation:ce};S.debug("Start searching for initialization.");const J=ae(X);G.load({request:J,success:function(me){if(X.bytesLoaded=X.range.end,ne=I.findInitRange(me),!ne)return X.range.end=X.bytesLoaded+X.bytesToLoad,$(ce,de,ge,X);ce.range=ne,ge(ce)},error:function(){ge(ce)}}),S.debug("Perform init search: "+X.url)}function ie(ce,de,ge,we,ne,U){if(ge&&(ge.start===void 0||ge.end===void 0)){const Oe=ge?ge.toString().split("-"):null;ge=Oe?{start:parseFloat(Oe[0]),end:parseFloat(Oe[1])}:null}ne=ne||se;let X=null,J=null;const me=!!ge,Ie=ce?z.resolve(ce.path):null,Te={init:!1,url:Ie?Ie.url:void 0,range:me?ge:{start:0,end:1500},searching:!me,bytesLoaded:U?U.bytesLoaded:0,bytesToLoad:1500,mediaType:de,representation:ce},xe=ae(Te);G.load({request:xe,success:function(Oe){const je=Te.bytesToLoad,ee=Oe.byteLength;if(Te.bytesLoaded=Te.range.end-Te.range.start,X=I.parse(Oe),J=X.getBox("sidx"),J&&J.isComplete){const te=J.references;let Ae,_e;if(te!=null&&te.length>0&&(Ae=te[0].reference_type===1),Ae){let re,he,ve,fe,ke;S.debug("Initiate multiple SIDX load."),Te.range.end=Te.range.start+J.size;let Ce=[],Ve=0,Ke=(J.offset||Te.range.start)+J.size;const st=function(ft){ft?(Ce=Ce.concat(ft),Ve++,Ve>=he&&(Ce.sort(function(St,Bt){return St.startTime-Bt.startTime<0?-1:0}),ne(Ce,ce,we))):ne(null,ce,we)};for(re=0,he=te.length;re<he;re++)ve=Ke,fe=Ke+te[re].referenced_size-1,Ke+=te[re].referenced_size,ke={start:ve,end:fe},ie(ce,de,ke,we,st,Te)}else S.debug("Parsing segments from SIDX. representation "+de+" - id: "+ce.id+" for range : "+Te.range.start+" - "+Te.range.end),_e=function(re,he){const ve=re.references,fe=ve.length,ke=re.timescale;let Ce=re.earliest_presentation_time,Ve=he.range.start+re.offset+re.first_offset+re.size;const Ke=[];let st,ft,St,Bt;for(let Ht=0;Ht<fe;Ht++)St=ve[Ht].subsegment_duration,Bt=ve[Ht].referenced_size,st=new qt,st.duration=St,st.startTime=Ce,st.timescale=ke,ft=Ve+Bt-1,st.mediaRange=Ve+"-"+ft,Ke.push(st),Ce+=St,Ve+=Bt;return Ke}(J,Te),ne(_e,ce,we)}else{if(J)Te.range.start=J.offset||Te.range.start,Te.range.end=Te.range.start+(J.size||je);else{if(ee<Te.bytesLoaded)return void ne(null,ce,we);{const te=X.getLastBox();te&&te.size?(Te.range.start=te.offset+te.size,Te.range.end=Te.range.start+je):Te.range.end+=je}}ie(ce,de,Te.range,we,null,Te)}},error:function(){ne(null,ce,we)}}),S.debug(`Perform SIDX load for type ${de} : ${Te.url} with range ${Te.range.start} - ${Te.range.end}`)}function se(ce,de,ge){ge({segments:ce,representation:de,error:ce?void 0:new Pe.default(C.SEGMENT_BASE_LOADER_ERROR_CODE,C.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function ae(ce){if(!ce.url)return;const de=new Ge;return de.setInfo(ce),de}return E={setConfig:function(ce){ce.baseURLController&&(z=ce.baseURLController),ce.dashMetrics&&(N=ce.dashMetrics),ce.mediaPlayerModel&&(B=ce.mediaPlayerModel),ce.errHandler&&(x=ce.errHandler),ce.boxParser&&(I=ce.boxParser),ce.debug&&(S=ce.debug.getLogger(E)),ce.errors&&(C=ce.errors),ce.urlUtils&&(D=ce.urlUtils),ce.constants&&(K=ce.constants),ce.dashConstants&&(V=ce.dashConstants)},initialize:function(){G=mo(_).create({errHandler:x,dashMetrics:N,mediaPlayerModel:B,boxParser:I,errors:C,urlUtils:D,constants:K,dashConstants:V})},loadInitialization:function(ce,de){return new Promise(ge=>{$(ce,de,ge)})},loadSegments:function(ce,de,ge){return new Promise(we=>{ie(ce,de,ge,we)})},reset:function(){G&&(G.abort(),G=null)}},E}Pu.__dashjs_factory_name="SegmentBaseLoader";var Jc=Ee.default.getSingletonFactory(Pu);function bl(_){let E;_=_||{};let S=new DataView(_.data),x=0;function I(B,G){let C,K,V=!0,D=0;if(G===void 0&&(G=!1),B.tag>16777215?(S.getUint32(x)!==B.tag&&(V=!1),D=4):B.tag>65535?(C=S.getUint16(x),K=S.getUint8(x+2),256*C+K!==B.tag&&(V=!1),D=3):B.tag>255?(S.getUint16(x)!==B.tag&&(V=!1),D=2):(S.getUint8(x)!==B.tag&&(V=!1),D=1),!V&&B.required&&!G)throw new Error("required tag not found");return V&&(x+=D),V}function N(B){let G=1,C=128,K=-1,V=0,D=S.getUint8(x),z=0;for(z=0;z<8;z+=1){if((D&C)===C){V=B===void 0?D&~C:D,K=z;break}C>>=1}for(z=0;z<K;z+=1,G+=1)V=V<<8|255&S.getUint8(x+G);return x+=G,V}return E={getPos:function(){return x},setPos:function(B){x=B},consumeTag:I,consumeTagAndSize:function(B,G){let C=I(B,G);return C&&N(),C},parseTag:function(B){let G;return I(B),G=N(),E[B.parse](G)},skipOverElement:function(B,G){let C,K=I(B,G);return K&&(C=N(),x+=C),K},getMatroskaCodedNum:N,getMatroskaFloat:function(B){let G;switch(B){case 4:G=S.getFloat32(x),x+=4;break;case 8:G=S.getFloat64(x),x+=8}return G},getMatroskaUint:function(B){if(B>4)return function(C){const K=Math.floor(Number.MAX_SAFE_INTEGER/256);let V=0;for(let D=0;D<C;D+=1){if(V>K)throw new Error("Value exceeds safe integer limit");V*=256;const z=S.getUint8(x+D);if(V>Number.MAX_SAFE_INTEGER-z)throw new Error("Value exceeds safe integer limit");V+=z}return x+=C,V}(B);let G=0;for(let C=0;C<B;C+=1)G<<=8,G|=255&S.getUint8(x+C);return x+=B,G>>>0},moreData:function(){return x<S.byteLength}},E}bl.__dashjs_factory_name="EBMLParser";var Mu=Ee.default.getClassFactory(bl);function _s(){const _=this.context;let E,S,x,I,N,B,G,C,K;function V(D){const z=new Ge;return z.setInfo(D),z}return E={setConfig:function(D){if(!(D.baseURLController&&D.dashMetrics&&D.mediaPlayerModel&&D.errHandler))throw new Error(F.default.MISSING_CONFIG_ERROR);K=D.baseURLController,N=D.dashMetrics,B=D.mediaPlayerModel,I=D.errHandler,C=D.errors,S=D.debug.getLogger(E)},initialize:function(){G=mo(_).create({errHandler:I,dashMetrics:N,mediaPlayerModel:B,errors:C})},loadInitialization:function(D,z){return new Promise($=>{let ie=null,se=D?K.resolve(D.path):null,ae=D?D.range.split("-"):null,ce={range:{start:ae?parseFloat(ae[0]):null,end:ae?parseFloat(ae[1]):null},request:ie,url:se?se.url:void 0,init:!0,mediaType:z};S.info("Start loading initialization."),ie=V(ce),G.load({request:ie,success:function(){$(D)},error:function(){$(D)}}),S.debug("Perform init load: "+ce.url)})},loadSegments:function(D,z,$){return new Promise(ie=>{let se=null,ae=D?K.resolve(D.path):null,ce=ae?ae.url:void 0;se=V({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:se,url:ce,init:!1,mediaType:z,representation:D}),S.debug("Parsing ebml header"),G.load({request:se,success:function(de){(function(ge,we,ne,U){if(!ge||ge.byteLength===0)return void U(null);let X,J,me,Ie,Te=Mu(_).create({data:ge}),xe=ne?ne.split("-"):null,Oe=null,je={url:we,range:{start:xe?parseFloat(xe[0]):null,end:xe?parseFloat(xe[1]):null},request:Oe};for(S.debug("Parse EBML header: "+je.url),Te.skipOverElement(x.EBML),Te.consumeTag(x.Segment),me=Te.getMatroskaCodedNum(),me+=Te.getPos(),Ie=Te.getPos();Te.moreData()&&!Te.consumeTagAndSize(x.Segment.Info,!0);)if(!(Te.skipOverElement(x.Segment.SeekHead,!0)||Te.skipOverElement(x.Segment.Tracks,!0)||Te.skipOverElement(x.Segment.Cues,!0)||Te.skipOverElement(x.Void,!0)))throw new Error("no valid top level element found");for(;X===void 0;){let ee=Te.getMatroskaCodedNum(!0),te=Te.getMatroskaCodedNum();ee===x.Segment.Info.Duration.tag?X=Te[x.Segment.Info.Duration.parse](te):Te.setPos(Te.getPos()+te)}Oe=V(je),G.load({request:Oe,success:function(ee){J=function(te,Ae,_e,re){let he,ve,fe,ke,Ce,Ve,Ke,st;for(ve=function(ft){let St,Bt,Ht=[],hn=Mu(_).create({data:ft});for(hn.consumeTagAndSize(x.Segment.Cues);hn.moreData()&&hn.consumeTagAndSize(x.Segment.Cues.CuePoint,!0);){for(St={},St.CueTime=hn.parseTag(x.Segment.Cues.CuePoint.CueTime),St.CueTracks=[];hn.moreData()&&hn.consumeTag(x.Segment.Cues.CuePoint.CueTrackPositions,!0);){const In=hn.getMatroskaCodedNum(),Ot=hn.getPos();if(Bt={},Bt.Track=hn.parseTag(x.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),Bt.Track===0)throw new Error("Cue track cannot be 0");Bt.ClusterPosition=hn.parseTag(x.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),St.CueTracks.push(Bt),hn.setPos(Ot+In)}if(St.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");Ht.push(St)}if(Ht.length===0)throw new Error("mandatory cuepoint not found");return Ht}(te),fe=[],Ce=0,Ve=ve.length;Ce<Ve;Ce+=1)ke=new qt,he=0,he=Ce<ve.length-1?ve[Ce+1].CueTime-ve[Ce].CueTime:re-ve[Ce].CueTime,ke.duration=he,ke.startTime=ve[Ce].CueTime,ke.timescale=1e3,Ke=ve[Ce].CueTracks[0].ClusterPosition+Ae,st=Ce<ve.length-1?ve[Ce+1].CueTracks[0].ClusterPosition+Ae-1:_e-1,ke.mediaRange=Ke+"-"+st,fe.push(ke);return S.debug("Parsed cues: "+fe.length+" cues."),fe}(ee,Ie,me,X),U(J)},error:function(){S.error("Download Error: Cues "+je.url),U(null)}}),S.debug("Perform cues load: "+je.url+" bytes="+je.range.start+"-"+je.range.end)})(de,ce,$,function(ge){ie({segments:ge,representation:D,error:ge?void 0:new Pe.default(C.SEGMENT_BASE_LOADER_ERROR_CODE,C.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){ie({representation:D,error:new Pe.default(C.SEGMENT_BASE_LOADER_ERROR_CODE,C.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){G&&(G.abort(),G=null)}},x={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},E}_s.__dashjs_factory_name="WebmSegmentBaseLoader";var Hr=Ee.default.getSingletonFactory(_s);function ei(_){_=_||{};const E=this.context,S=_.eventBus,x=_.events,I=_.dashMetrics,N=_.mediaPlayerModel,B=_.errHandler,G=_.baseURLController,C=_.debug,K=_.boxParser,V=_.errors;let D,z,$;function ie(se){return(se?se.split("/")[1]:"").toLowerCase()==="webm"}return D={initialize:function(){z.initialize(),$.initialize()},getSegmentBaseInitSegment:function(se){return ie(se.representation.mimeType)?$.loadInitialization(se.representation,se.mediaType):z.loadInitialization(se.representation,se.mediaType)},getSegmentList:function(se){return ie(se.mimeType)?$.loadSegments(se.representation,se.mediaType,se.representation?se.representation.indexRange:null):z.loadSegments(se.representation,se.mediaType,se.representation?se.representation.indexRange:null)},reset:function(){z.reset(),$.reset()}},z=Jc(E).getInstance(),$=Hr(E).getInstance(),z.setConfig({baseURLController:G,dashMetrics:I,mediaPlayerModel:N,errHandler:B,eventBus:S,events:x,errors:V,debug:C,boxParser:K}),$.setConfig({baseURLController:G,dashMetrics:I,mediaPlayerModel:N,errHandler:B,eventBus:S,events:x,errors:V,debug:C}),D}ei.__dashjs_factory_name="SegmentBaseController";var hi=Ee.default.getSingletonFactory(ei),Do=class{constructor(){this.accessibility=null,this.adaptationSetSwitchingCompatibleIds=[],this.audioChannelConfiguration=null,this.bitrateList=null,this.codec=null,this.contentProtection=null,this.essentialProperties=[],this.id=null,this.index=null,this.isEmbedded=null,this.isFragmented=null,this.isText=!1,this.labels=null,this.lang=null,this.mimeType=null,this.normalizedKeyIds=new Set,this.representationCount=0,this.roles=null,this.segmentAlignment=!1,this.selectionPriority=1,this.streamInfo=null,this.subSegmentAlignment=!1,this.supplementalProperties=[],this.type=null,this.viewpoint=null}},Lo=class{constructor(){this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0,this.isEncrypted=!1}},Tl=class{constructor(){this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null}},Lg=class{constructor(_){this.valid=_[0]=="/",this.path=_.split("/").filter(E=>E.length!==0).map(E=>{let S={name:E},x=E.indexOf("[");if(x!=-1){S.name=E.substring(0,x);let I=E.substring(x+1,E.length-1);this.valid=this.valid&&I.indexOf("[")==-1;let N=I.indexOf("=");N!=-1?(S.attribute={name:I.substring(1,N),value:I.substring(N+1)},["'",'"'].indexOf(S.attribute.value[0])!=-1&&(S.attribute.value=S.attribute.value.substring(1,S.attribute.value.length-1))):S.position=parseInt(I,10)-1}return S})}isValid(){return this.valid}findsElement(){return!this.findsAttribute()}findsAttribute(){return this.path[this.path.length-1].name.startsWith("@")}findsTextReplace(){return this.path[this.path.length-1].name==="text()"}getMpdTarget(_,E){let S=null,x=_,I=1,N="MPD";for(;I<this.path.length&&x!==null;){S=x;let B=this.path[I];if(N=B.name,I!==this.path.length-1||!N.startsWith("@")&&N!=="text()"){let G=S[N]||[];if(G.length===0&&S[N]&&G.push(S[N]),B.position)x=G[B.position]||null;else if(B.attribute){let C=B.attribute;x=G.filter(K=>K[C.name]==C.value)[0]||null}else x=Array.isArray(G)?G[0]:G}I++}return x===null?null:N.startsWith("@")?{name:N.substring(1),leaf:x,target:x}:N==="text()"?{name:"__text",leaf:x,target:x}:{name:N,leaf:x,target:E?S:x}}},_i=class{constructor(_,E,S){this.action=_,this.xpath=E,this.value=S,this.position=null}getMpdTarget(_){let E=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(_,E)}};function Ou(){let _,E;const S=this.context;return _={getIsPatch:function(x){return x&&x.hasOwnProperty(k.default.ORIGINAL_MPD_ID)||!1},getMpdId:function(x){return x&&x[k.default.ORIGINAL_MPD_ID]||null},getOriginalPublishTime:function(x){return x&&x.hasOwnProperty(k.default.ORIGINAL_PUBLISH_TIME)?new Date(x[k.default.ORIGINAL_PUBLISH_TIME]):null},getPatchOperations:function(x){return x?(x.__children||[]).map(I=>{const N=I.tagName;if(N!=="add"&&N!=="remove"&&N!=="replace")return E.warn(`Ignoring node of invalid action: ${N}`),null;let B=I.sel;if(N==="add"&&I.type){if(!I.type.startsWith("@"))return E.warn(`Ignoring add action for prefixed namespace declaration: ${I.type}=${I.__text}`),null;B=`${B}/${I.type}`}let G=new Lg(B);if(!G.isValid())return E.warn(`Ignoring action with invalid selector: ${N} - ${B}`),null;let C=null;G.findsAttribute()||G.findsTextReplace()?C=I.__text||"":N!=="remove"&&(C=I.__children.reduce((V,D)=>{let z=D.tagName;return z!=="#text"&&(V[z]=V[z]||[],V[z].push(D)),V},{}));let K=new _i(N,G,C);return N==="add"&&(K.position=I.pos),K}).filter(I=>!!I):[]},getPublishTime:function(x){return x&&x.hasOwnProperty(k.default.PUBLISH_TIME)?new Date(x[k.default.PUBLISH_TIME]):null}},E=(0,Be.default)(S).getInstance().getLogger(_),_}Ou.__dashjs_factory_name="PatchManifestModel";var ed=Ee.default.getSingletonFactory(Ou);function ea(_){let E=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(typeof TextDecoder<"u"){const C=new TextDecoder("utf-8").decode(_);if(E){const K=C.indexOf("\0");return K!==-1?C.substring(0,K):C}return C.replace(/\0/g,"")}const S=_.length;let x,I,N,B="",G=0;for(;G<S;){if(x=_[G++],x===0&&E)return B;if(x!==0&&x!==3)switch(x>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:B+=String.fromCharCode(x);break;case 12:case 13:I=_[G++],B+=String.fromCharCode((31&x)<<6|63&I);break;case 14:I=_[G++],N=_[G++],B+=String.fromCharCode((15&x)<<12|(63&I)<<6|63&N)}}return B}function ta(_){return function(E,S,x,I){const N=(B=E)instanceof ArrayBuffer?B:B.buffer;var B;let G=1;"BYTES_PER_ELEMENT"in I&&(G=I.BYTES_PER_ELEMENT);const C=(z=E)&&z.buffer instanceof ArrayBuffer&&z.byteLength!==void 0&&z.byteOffset!==void 0?E.byteOffset:0,K=(C+E.byteLength)/G,V=(C+S)/G,D=Math.floor(Math.max(0,Math.min(V,K)));var z;return new I(N,D,Math.floor(Math.min(D+Math.max(x,0),K))-D)}(_,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,arguments.length>2&&arguments[2]!==void 0?arguments[2]:1/0,Uint8Array)}function na(_){return _.type==="PRIV"?function(E){if(E.size<2)return;const S=ea(E.data,!0),x=new Uint8Array(E.data.subarray(S.length+1));return{key:E.type,info:S,data:x.buffer}}(_):_.type[0]==="W"?function(E){if(E.type==="WXXX"){if(E.size<2)return;let x=1;const I=ea(E.data.subarray(x),!0);x+=I.length+1;const N=ea(E.data.subarray(x));return{key:E.type,info:I,data:N}}const S=ea(E.data);return{key:E.type,info:"",data:S}}(_):_.type==="APIC"?function(E){const S={key:E.type,description:"",data:"",mimeType:null,pictureType:null};if(E.size<2)return;if(E.data[0]!==3)return void console.log("Ignore frame with unrecognized character encoding");const x=E.data.subarray(1).indexOf(0);if(x===-1)return;const I=ea(ta(E.data,1,x)),N=E.data[2+x],B=E.data.subarray(3+x).indexOf(0);if(B===-1)return;const G=ea(ta(E.data,3+x,B));let C;return C=I==="-->"?ea(ta(E.data,4+x+B)):(K=E.data.subarray(4+x+B))instanceof ArrayBuffer?K:K.byteOffset==0&&K.byteLength==K.buffer.byteLength?K.buffer:new Uint8Array(K).buffer,S.mimeType=I,S.pictureType=N,S.description=G,S.data=C,S;var K}(_):function(E){if(E.size<2)return;if(E.type==="TXXX"){let x=1;const I=ea(E.data.subarray(x),!0);x+=I.length+1;const N=ea(E.data.subarray(x));return{key:E.type,info:I,data:N}}const S=ea(E.data.subarray(1));return{key:E.type,info:"",data:S}}(_)}function Po(_,E){let S=0;return S=(127&_[E])<<21,S|=(127&_[E+1])<<14,S|=(127&_[E+2])<<7,S|=127&_[E+3],S}function td(_){const E=String.fromCharCode(_[0],_[1],_[2],_[3]),S=Po(_,4);return{type:E,size:S,data:_.subarray(10,10+S)}}function nd(_,E){return E+10<=_.length&&_[E]===51&&_[E+1]===68&&_[E+2]===73&&_[E+3]<255&&_[E+4]<255&&_[E+6]<128&&_[E+7]<128&&_[E+8]<128&&_[E+9]<128}function Of(_,E){return E+10<=_.length&&_[E]===73&&_[E+1]===68&&_[E+2]===51&&_[E+3]<255&&_[E+4]<255&&_[E+6]<128&&_[E+7]<128&&_[E+8]<128&&_[E+9]<128}function rd(){let _,E,S,x,I,N;const B=this.context;function G(ne,U){const X=U?U.index:0,J=E.getAdaptationsForType(x[X].mpd.manifest,X,ne);if(!J||J.length===0)return null;if(J.length>1&&U){for(let Ie=0,Te=J.length;Ie<Te;Ie++)if(me=J[Ie],E.getRolesForAdaptation(me).filter(function(xe){return xe.schemeIdUri===F.default.DASH_ROLE_SCHEME_ID&&xe.value===k.default.MAIN})[0])return J[Ie]}var me;return J[0]}function C(ne,U,X,J,me,Ie){let Te,xe,Oe,je,ee,te,Ae=[];if(!J||J.length===0)return[];const _e=E.getAdaptationsForPeriod(U);for(je=0,te=J.length;je<te;je++)if(Te=J[je],Oe=E.getIndexForAdaptation(Te,ne,X.index),xe=se(_e[Oe]),Ie){let re=xe.accessibility.length;for(ee=0;ee<re;ee++){if(!xe)continue;let he=xe.accessibility[ee];if(he.schemeIdUri===I.ACCESSIBILITY_CEA608_SCHEME)if(he.value&&he.value!==""){let ve=he.value.split(";");if(ve[0].substring(0,2)==="CC")for(ee=0;ee<ve.length;ee++)xe||(xe=se.call(this,_e[Oe])),ae(xe,ve[ee].substring(0,3),ve[ee].substring(4)),Ae.push(xe),xe=null;else for(ee=0;ee<ve.length;ee++)xe||(xe=se.call(this,_e[Oe])),ae(xe,"CC"+(ee+1),ve[ee]),Ae.push(xe),xe=null}else ae(xe,I.CC1,"eng"),Ae.push(xe),xe=null}}else me===I.IMAGE?(xe.type=I.IMAGE,Ae.push(xe),xe=null):xe&&Ae.push(xe);return Ae}function K(ne){const U=V(ne);return E.getRegularPeriods(U)}function V(ne){const U=z(ne);return E.getMpd(U)}function D(){x=[]}function z(ne){return ne||(x.length>0?x[0].mpd.manifest:null)}function $(ne){try{const U=ie(ne.streamInfo,x),X=E.getAdaptationsForPeriod(U);return ne&&ne.streamInfo&&ne.streamInfo.id!==void 0&&X?X[ne.index]:null}catch{return null}}function ie(ne,U){const X=U.length;for(let J=0;J<X;J++){let me=U[J];if(ne&&ne.id===me.id)return me}return null}function se(ne){if(!ne)return null;let U=new Do;const X=ne.period.mpd.manifest.Period[ne.period.index].AdaptationSet[ne.index];return U.id=ne.id,U.index=ne.index,U.type=ne.type,U.streamInfo=ce(ne.period),U.representationCount=E.getRepresentationCount(X),U.labels=E.getLabelsForAdaptation(X),U.lang=E.getLanguageForAdaptation(X),U.segmentAlignment=E.getSegmentAlignment(X),U.subSegmentAlignment=E.getSubSegmentAlignment(X),U.viewpoint=E.getViewpointForAdaptation(X),U.accessibility=E.getAccessibilityForAdaptation(X),U.accessibility.filter(function(J){if(J.schemeIdUri&&J.schemeIdUri.search("cea-608")>=0&&N!==void 0)return!0})[0]&&(U.embeddedCaptions=!0),U.audioChannelConfiguration=E.getAudioChannelConfigurationForAdaptation(X),U.audioChannelConfiguration.length===0&&X.Representation&&X.Representation.length>0&&(U.audioChannelConfiguration=E.getAudioChannelConfigurationForRepresentation(X.Representation[0])),U.roles=E.getRolesForAdaptation(X),U.codec=E.getCodec(X),U.mimeType=E.getMimeType(X),U.contentProtection=E.getContentProtectionByAdaptation(X),U.bitrateList=E.getBitrateListForAdaptation(X),U.selectionPriority=E.getSelectionPriority(X),U.contentProtection&&U.contentProtection.length>0&&(U.contentProtection=function(J,me){if(!J||!J.length||!me)return J;const Ie=E.getContentProtectionByManifest(me);if(!Ie||!Ie.length)return J;const Te=Ie.reduce((xe,Oe)=>(Oe.refId&&xe.set(Oe.refId,Oe),xe),new Map);return J.map(xe=>{if(xe.ref){const Oe=Te.get(xe.ref);Oe&&xe.mergeAttributesFromReference(Oe)}return xe})}(U.contentProtection,ne.period.mpd.manifest),U.contentProtection=function(J){const me=J.map(Ie=>Ie.cencDefaultKid).filter(Ie=>Ie!==null);if(me.length){const Ie=me[0];J.forEach(Te=>{Te.keyId=Ie})}return J}(U.contentProtection),U.normalizedKeyIds=function(J){const me=new Set;return J.forEach(Ie=>{Ie.cencDefaultKid&&typeof Ie.cencDefaultKid=="string"&&me.add(Ie.cencDefaultKid.replace(/-/g,"").toLowerCase())}),me}(U.contentProtection)),U.isText=E.getIsText(X),U.essentialProperties=E.getCombinedEssentialPropertiesForAdaptationSet(X),U.supplementalProperties=E.getCombinedSupplementalPropertiesForAdaptationSet(X),U.isFragmented=E.getIsFragmented(X),U.isEmbedded=!1,U.adaptationSetSwitchingCompatibleIds=function(J){if(!J||!J.supplementalProperties)return[];let me=[];const Ie=J.supplementalProperties.filter(Te=>Te.schemeIdUri===k.default.ADAPTATION_SET_SWITCHING_SCHEME_ID_URI);return Ie&&Ie.length>0&&(me=Ie[0].value.toString().split(",").map(Te=>Te)),me}(U),U}function ae(ne,U,X){ne.id=U,ne.index=100+parseInt(U.substring(2,3)),ne.type=I.TEXT,ne.codec="cea-608-in-SEI",ne.isEmbedded=!0,ne.isFragmented=!1,ne.lang=sl(X),ne.roles=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function ce(ne){let U=new Lo;return U.id=ne.id,U.index=ne.index,U.start=ne.start,U.duration=ne.duration,U.manifestInfo=function(X){let J=new Tl;return J.dvrWindowSize=X.timeShiftBufferDepth,J.loadedTime=X.manifest.loadedTime,J.availableFrom=X.availabilityStartTime,J.minBufferTime=X.manifest.minBufferTime,J.maxFragmentDuration=X.maxSegmentDuration,J.duration=E.getDuration(X.manifest),J.isDynamic=E.getIsDynamic(X.manifest),J.serviceDescriptions=E.getServiceDescriptions(X.manifest),J.protocol=X.manifest.protocol,J}(ne.mpd),U.isLast=ne.mpd.manifest.Period.length===1||Math.abs(U.start+U.duration-U.manifestInfo.duration)<1,U.isEncrypted=ne.isEncrypted,U}function de(){if(!I)throw new Error("setConfig function has to be called previously")}function ge(ne){return x.length>0?x[0].mpd.manifest.Period[ne]:null}function we(ne,U,X){let J,me,Ie,Te,xe,Oe;if(ne){for(me=ne.AdaptationSet,xe=0;xe<me.length;xe+=1)for(J=me[xe],Te=J.Representation,Oe=0;Oe<Te.length;Oe+=1)if(Ie=Te[Oe],U===Ie.id)return X?Oe:Ie}return null}return _={applyPatchToManifest:function(ne,U){S.getPatchOperations(U).forEach(X=>{let J=X.getMpdTarget(ne);if(J===null)return;let{name:me,target:Ie,leaf:Te}=J;if(X.xpath.findsAttribute()||me==="__text"){switch(X.action){case"add":case"replace":Ie[me]=X.value;break;case"remove":delete Ie[me]}return}let xe=(Ie[me]||[]).indexOf(Te),Oe=X.position==="prepend"||X.position==="before";if(X.action==="remove"||X.action==="replace")if(Array.isArray(Ie[me])){if(xe!=-1){let je=Ie[me];je.splice(xe,1),je.length>0?Ie[me]=je:delete Ie[me]}}else delete Ie[me];X.action!=="add"&&X.action!=="replace"||Object.keys(X.value).forEach(je=>{let ee=X.value[je],te=Ie[je]||[];if(te.length===0&&Ie[je]&&te.push(Ie[je]),te.length===0)te=ee;else{let Ae=te.length;Ae=je==me&&xe!=-1?xe+(Oe?0:1)+(X.action==="replace"?-1:0):Oe?0:te.length,te.splice.apply(te,[Ae,0].concat(ee))}Ie[je]=te})})},areMediaInfosEqual:function(ne,U){if(!ne||!U)return!1;const X=ne.id===U.id,J=ne.codec===U.codec,me=JSON.stringify(ne.viewpoint)===JSON.stringify(U.viewpoint),Ie=ne.lang===U.lang,Te=JSON.stringify(ne.roles)===JSON.stringify(U.roles),xe=JSON.stringify(ne.accessibility)===JSON.stringify(U.accessibility),Oe=JSON.stringify(ne.audioChannelConfiguration)===JSON.stringify(U.audioChannelConfiguration);return X&&J&&me&&Ie&&Te&&xe&&Oe},getAllMediaInfoForType:function(ne,U,X){let J=x,me=X,Ie=[];if(me)de(),J=K(me);else{if(!(x.length>0))return Ie;me=x[0].mpd.manifest}const Te=ie(ne,J);let xe=E.getAdaptationsForType(me,ne?ne.index:null,U);return Ie=C(me,Te,ne,xe,U),U===I.TEXT&&(xe=E.getAdaptationsForType(me,ne?ne.index:null,I.VIDEO),Ie=Ie.concat(C(me,Te,ne,xe,U,!0))),Ie},getAvailabilityStartTime:function(ne){const U=V(ne);return E.getAvailabilityStartTime(U)},getBandwidthForRepresentation:function(ne,U){let X;return X=we(ge(U),ne),X?X.bandwidth:null},getBaseURLsFromElement:function(ne){return E.getBaseURLsFromElement(ne)},getCodec:function(ne,U,X){return E.getCodec(ne,U,X)},getContentSteering:function(ne){return E.getContentSteering(ne)},getDuration:function(ne){const U=z(ne);return E.getDuration(U)},getEssentialPropertiesForAdaptationSet:function(ne){try{return E.getEssentialPropertiesForRepresentation(ne)}catch{return[]}},getEssentialPropertiesForRepresentation:function(ne){try{return E.getEssentialPropertiesForRepresentation(ne)}catch{return[]}},getEvent:function(ne,U,X,J){try{if(!ne||!U||isNaN(X)||!J)return null;const me=ne.scheme_id_uri,Ie=ne.value;if(!U[me+"/"+Ie])return null;const Te=new us,xe=ne.timescale||1,Oe=J.adaptation.period.start,je=U[me+"/"+Ie],ee=isNaN(J.presentationTimeOffset)?isNaN(je.presentationTimeOffset)?0:je.presentationTimeOffset:J.presentationTimeOffset;let te,Ae=ne.presentation_time_delta/xe;te=ne.version===0?Oe+X-ee+Ae:Oe-ee+Ae;const _e=ne.event_duration/xe,re=ne.id,he=ne.message_data;return Te.eventStream=je,Te.eventStream.value=Ie,Te.eventStream.timescale=xe,Te.duration=_e,Te.id=re,Te.calculatedPresentationTime=te,Te.messageData=he,Te.presentationTimeDelta=Ae,Te.parsedMessageData=me===F.default.ID3_SCHEME_ID_URI?function(ve){let fe=0;const ke=[];for(;Of(ve,fe);){const Ce=Po(ve,fe+6);ve[fe+5]>>6&1&&(fe+=10),fe+=10;const Ve=fe+Ce;for(;fe+10<Ve;){const Ke=td(ve.subarray(fe)),st=na(Ke);st&&ke.push(st),fe+=Ke.size+10}nd(ve,fe)&&(fe+=10)}return ke}(he):null,Te}catch{return null}},getEventsFor:function(ne,U,X){let J=[];if(x.length>0){const me=x[0].mpd.manifest;if(ne instanceof Lo){const Ie=ie(ne,x);J=E.getEventsForPeriod(Ie)}else if(ne instanceof Do){const Ie=ie(X,x);J=E.getEventStreamForAdaptationSet(me,$(ne),Ie)}else if(ne instanceof fr){const Ie=ie(X,x);J=E.getEventStreamForRepresentation(me,U,Ie)}}return J},getFramerate:function(ne){return E.getFramerate(ne)},getIndexForRepresentation:function(ne,U){return function(X,J){const me=we(X,J,!0);return me!==null?me:-1}(ge(U),ne)},getIsDVB:function(ne){return E.hasProfile(ne,"urn:dvb:dash:profile:dvb-dash:2014")},getIsDynamic:function(ne){const U=z(ne);return E.getIsDynamic(U)},getIsPatch:function(ne){return S.getIsPatch(ne)},getIsTextTrack:function(ne){return E.getIsText(ne)},getIsTypeOf:function(ne,U){return E.getIsTypeOf(ne,U)},getLocation:function(ne){return E.getLocation(ne)},getMainAdaptationForType:G,getManifestUpdatePeriod:function(ne){let U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return E.getManifestUpdatePeriod(ne,U)},getMediaInfoForType:function(ne,U){if(x.length===0||!ne)return null;let X=ie(ne,x);if(!X)return null;const J=E.getAdaptationsForPeriod(X);let me=G(U,ne);return me?se(J[E.getIndexForAdaptation(me,x[0].mpd.manifest,ne.index)]):null},getMpd:V,getPatchLocation:function(ne){const U=E.getPatchLocation(ne),X=E.getPublishTime(ne);return U&&U.length!==0&&X?U.filter(J=>isNaN(J.ttl)||X.getTime()+J.ttl>new Date().getTime()):[]},getPeriodById:function(ne){if(!ne||x.length===0)return null;const U=x.filter(X=>X.id===ne);return U&&U.length>0?U[0]:null},getProducerReferenceTimes:function(ne,U){let X,J;const me=ie(ne,x);return X=U?U.id:null,x.length>0&&me&&(J=X?E.getAdaptationForId(X,x[0].mpd.manifest,me.index):E.getAdaptationForIndex(U?U.index:null,x[0].mpd.manifest,me.index)),J?E.getProducerReferenceTimesForAdaptation(J):[]},getPublishTime:function(ne){return E.getPublishTime(ne)},getRealAdaptation:function(ne,U){let X,J;const me=ie(ne,x);return X=U?U.id:null,x.length>0&&me&&(J=X?E.getAdaptationForId(X,x[0].mpd.manifest,me.index):E.getAdaptationForIndex(U?U.index:null,x[0].mpd.manifest,me.index)),J},getRealPeriodByIndex:function(ne){return E.getRealPeriodForIndex(ne,x[0].mpd.manifest)},getRegularPeriods:K,getRepresentationSortFunction:function(){return E.getRepresentationSortFunction()},getStreamsInfo:function(ne,U){const X=[];let J=x;if(ne&&(de(),J=K(ne)),J.length>0){(!U||U>J.length)&&(U=J.length);for(let me=0;me<U;me++)X.push(ce(J[me]))}return X},getSuggestedPresentationDelay:function(){const ne=x.length>0?x[0].mpd:null;return E.getSuggestedPresentationDelay(ne)},getSupplementalCodecs:function(ne){const U=ne[k.default.SUPPLEMENTAL_CODECS];return U?U.split(" ").map(X=>ne.mimeType+';codecs="'+X+'"'):[]},getUTCTimingSources:function(){const ne=z();return E.getUTCTimingSources(ne)},getVoRepresentations:function(ne){let U;const X=$(ne);return U=E.getRepresentationsForAdaptation(X,ne),U},isPatchValid:function(ne,U){let X=E.getId(ne),J=S.getMpdId(U),me=E.getPublishTime(ne),Ie=S.getPublishTime(U),Te=S.getOriginalPublishTime(U);return!!(X&&J&&X==J&&me&&Te&&me.getTime()==Te.getTime()&&Ie&&me.getTime()<Ie.getTime())},reset:D,setConfig:function(ne){ne&&(ne.constants&&(I=ne.constants),ne.cea608parser&&(N=ne.cea608parser),ne.errHandler&&E.setConfig({errHandler:ne.errHandler}),ne.BASE64&&E.setConfig({BASE64:ne.BASE64}))},updatePeriods:function(ne){if(!ne)return null;de(),x=K(ne)}},E=Er(B).getInstance(),S=ed(B).getInstance(),D(),_}rd.__dashjs_factory_name="DashAdapter";var Ff=Ee.default.getSingletonFactory(rd);class zf{static round10(E,S){return function(x,I,N){return N===void 0||+N==0?Math[x](I):(N=+N,(I=+I)===null||isNaN(I)||typeof N!="number"||N%1!=0?NaN:(I=I.toString().split("e"),+((I=(I=Math[x](+(I[0]+"e"+(I[1]?+I[1]-N:-N)))).toString().split("e"))[0]+"e"+(I[1]?+I[1]+N:N))))}("round",E,S)}}var Uf=class{constructor(){this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]}},Bf=class{constructor(){this.t=null,this.mt=null,this.to=null,this.lto=null}},jf=class{constructor(){this.t=null,this.level=null}},qf=class{constructor(){this.target=null,this.state=j.BUFFER_EMPTY}},Sl=class{constructor(){this.time=null,this.range=null,this.manifestInfo=null}},Gf=class{constructor(){this.time=null,this.droppedFrames=null}};class Fu{constructor(){this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]}}class zu{constructor(){this.id=null,this.index=null,this.start=null,this.duration=null}}class $f{constructor(){this.id=null,this.index=null,this.mediaType=null,this.presentationTimeOffset=null,this.startNumber=null}}var id=class{constructor(){this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.bandwidth=null,this.range=null,this.state=null}},Hf=class{constructor(){this.loadingRequests=[],this.executedRequests=[]}};function ad(_){const E=(_=_||{}).settings;let S,x,I=this.context,N=(0,oe.default)(I).getInstance();function B(){N.trigger(L.default.METRICS_CHANGED)}function G($){N.trigger(L.default.METRIC_CHANGED,{mediaType:$}),B()}function C($,ie,se){N.trigger(L.default.METRIC_UPDATED,{mediaType:$,metric:ie,value:se}),G($)}function K($,ie,se){N.trigger(L.default.METRIC_ADDED,{mediaType:$,metric:ie,value:se}),G($)}function V($,ie){let se=null;return $&&(x.hasOwnProperty($)?se=x[$]:ie||(se=new Uf,x[$]=se)),se}function D($,ie,se){let ae=V($);ae!==null&&(ae[ie].push(se),ae[ie].length>E.get().streaming.metrics.maxListDepth&&ae[ie].shift())}function z($,ie,se){D($,ie,se),K($,ie,se)}return S={addBufferLevel:function($,ie,se){let ae=new jf;ae.t=ie,ae.level=se,z($,j.BUFFER_LEVEL,ae)},addBufferState:function($,ie,se){let ae=new qf;ae.target=se,ae.state=ie,z($,j.BUFFER_STATE,ae)},addDVBErrors:function($){z(F.default.STREAM,j.DVB_ERRORS,$)},addDVRInfo:function($,ie,se,ae){let ce=new Sl;ce.time=ie,ce.range=ae,ce.manifestInfo=se,z($,j.DVR_INFO,ce)},addDroppedFrames:function($,ie){let se=new Gf,ae=V($).DroppedFrames;ie&&(se.time=ie.creationTime,se.droppedFrames=ie.droppedVideoFrames,ae.length>0&&ae[ae.length-1]==se||z($,j.DROPPED_FRAMES,se))},addHttpRequest:function $(ie,se,ae,ce){let de=new Le.HTTPRequest;se.url&&se.url!==ie.url&&($({mediaType:ie.mediaType,type:ie.type,url:ie.url,serviceLocation:null,range:ie.range,startDate:ie.startDate,firstByteDate:null,endDate:null,duration:ie.duration,fileLoaderType:ie.fileLoaderType,resourceTimingValues:ie.resourceTimingValues},{url:null,status:null,headers:null},null,ce),de.actualurl=se.url),de.tcpid=null,de.type=ie.type,de.url=ie.url,de.range=ie.range||null,de.trequest=ie.startDate,de.tresponse=ie.firstByteDate,de.responsecode=se.status,de.cmsd=ce,de._tfinish=ie.endDate,de._stream=ie.mediaType,de._mediaduration=ie.duration,de._responseHeaders="";for(const ge in se.headers)de._responseHeaders+=ge+": "+se.headers[ge]+`\r
`;de._serviceLocation=ie.serviceLocation||null,de._fileLoaderType=ie.fileLoaderType,de._resourceTimingValues=ie.resourceTimingValues,de._streamId=ie&&ie.representation&&ie.representation.mediaInfo&&ie.representation.mediaInfo.streamInfo?ie.representation.mediaInfo.streamInfo.id:null,ae?ae.forEach(ge=>{(function(we,ne,U,X){let J=new Le.HTTPRequestTrace;J.s=ne,J.d=U,J.b=X,we.trace.push(J),we.interval||(we.interval=0),we.interval+=U})(de,ge.s,ge.d,ge.b,ge.t)}):(delete de.interval,delete de.trace),z(ie.mediaType,j.HTTP_REQUEST,de)},addManifestUpdate:function($,ie,se,ae){let ce=new Fu;ce.mediaType=$,ce.type=ie,ce.requestTime=se,ce.fetchTime=ae,D(F.default.STREAM,j.MANIFEST_UPDATE,ce),K($,j.MANIFEST_UPDATE,ce)},addManifestUpdateRepresentationInfo:function($,ie,se){if($&&$.representationInfo){const ae=new $f;ae.id=ie?ie.id:null,ae.index=ie?ie.index:null,ae.mediaType=se,ae.startNumber=ie?ie.startNumber:null,ae.presentationTimeOffset=ie?ie.presentationTimeOffset:null,$.representationInfo.push(ae),C($.mediaType,j.MANIFEST_UPDATE_TRACK_INFO,$)}},addManifestUpdateStreamInfo:function($,ie,se,ae,ce){if($){let de=new zu;de.id=ie,de.index=se,de.start=ae,de.duration=ce,$.streamInfo.push(de),C($.mediaType,j.MANIFEST_UPDATE_STREAM_INFO,$)}},addPlayList:function($){$.trace&&Array.isArray($.trace)?$.trace.forEach(ie=>{ie.hasOwnProperty("subreplevel")&&!ie.subreplevel&&delete ie.subreplevel}):delete $.trace,z(F.default.STREAM,j.PLAY_LIST,$)},addRepresentationSwitch:function($,ie,se,ae,ce){let de=new Bf;de.t=ie,de.mt=se,de.to=ae,ce?de.lto=ce:delete de.lto,z($,j.TRACK_SWITCH,de)},addRequestsQueue:function($,ie,se){let ae=new Hf;ae.loadingRequests=ie,ae.executedRequests=se,V($).RequestsQueue=ae,K($,j.REQUESTS_QUEUE,ae)},addSchedulingInfo:function($,ie,se,ae,ce,de,ge,we,ne){let U=new id;U.mediaType=$,U.t=ie,U.type=se,U.startTime=ae,U.availabilityStartTime=ce,U.duration=de,U.bandwidth=ge,U.range=we,U.state=ne,z($,j.SCHEDULING_INFO,U)},clearAllCurrentMetrics:function(){x={},B()},clearCurrentMetricsForType:function($){delete x[$],G($)},getMetricsFor:V,updateManifestUpdateInfo:function($,ie){if($){for(let se in ie)$[se]=ie[se];C($.mediaType,j.MANIFEST_UPDATE,$)}}},x={},S}ad.__dashjs_factory_name="MetricsModel";var Vf=Ee.default.getSingletonFactory(ad);function sd(_){_=_||{};const E=this.context;let S,x,I,N,B=_.metricsModel;function G(V){const D=B.getMetricsFor(V,!0);if(!D)return null;const z=D.HttpList;let $,ie=null;if(!z||z.length<=0)return null;for($=z.length-1;$>=0;){if(z[$].responsecode){ie=z[$];break}$--}return ie}function C(V){const D=B.getMetricsFor(V,!0);return D&&D.HttpList?D.HttpList:[]}function K(V,D){if(!V)return null;const z=V[D];return z&&z.length!==0?z[z.length-1]:null}return S={getCurrentRepresentationSwitch:function(V){return K(B.getMetricsFor(V,!0),j.TRACK_SWITCH)},getCurrentBufferState:function(V){return K(B.getMetricsFor(V,!0),j.BUFFER_STATE)},getCurrentBufferLevel:function(V){const D=K(B.getMetricsFor(V,!0),j.BUFFER_LEVEL);return D?zf.round10(D.level/1e3,-3):0},getCurrentHttpRequest:G,getHttpRequests:C,getCurrentDroppedFrames:function(){return K(B.getMetricsFor(F.default.VIDEO,!0),j.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(V){return K(B.getMetricsFor(V,!0),j.SCHEDULING_INFO)},getCurrentDVRInfo:function(V){return K(V?B.getMetricsFor(V,!0):B.getMetricsFor(F.default.VIDEO,!0)||B.getMetricsFor(F.default.AUDIO,!0),j.DVR_INFO)},getCurrentManifestUpdate:function(){return K(B.getMetricsFor(F.default.STREAM),j.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(V,D){if(!D)return null;let z={},$=G(V);$&&(z=or.default.parseHttpHeaders($._responseHeaders));const ie=z[D.toLowerCase()];return ie===void 0?null:ie},getLatestMPDRequestHeaderValueByID:function(V){if(!V)return null;let D,z,$,ie={};for(D=C(F.default.STREAM),$=D.length-1;$>=0;$--)if(z=D[$],z.type===Le.HTTPRequest.MPD_TYPE){ie=or.default.parseHttpHeaders(z._responseHeaders);break}const se=ie[V.toLowerCase()];return se===void 0?null:se},addRepresentationSwitch:function(V,D,z,$,ie){B.addRepresentationSwitch(V,D,z,$,ie)},addDVRInfo:function(V,D,z,$){B.addDVRInfo(V,D,z,$)},updateManifestUpdateInfo:function(V){const D=this.getCurrentManifestUpdate();B.updateManifestUpdateInfo(D,V)},addManifestUpdateStreamInfo:function(V){if(V){const D=this.getCurrentManifestUpdate();B.addManifestUpdateStreamInfo(D,V.id,V.index,V.start,V.duration)}},addManifestUpdateRepresentationInfo:function(V,D){if(V){const z=this.getCurrentManifestUpdate();B.addManifestUpdateRepresentationInfo(z,V,D)}},addManifestUpdate:function(V){B.addManifestUpdate(F.default.STREAM,V.type,V.startDate,V.endDate)},addHttpRequest:function(V,D,z,$,ie,se){const ae={status:z,headers:$,url:D};B.addHttpRequest(V,ae,ie,se)},addSchedulingInfo:function(V,D){B.addSchedulingInfo(V.mediaType,new Date,V.type,V.startTime,V.availabilityStartTime,V.duration,V.bandwidth,V.range,D)},addRequestsQueue:function(V,D,z){B.addRequestsQueue(V,D,z)},addBufferLevel:function(V,D,z){B.addBufferLevel(V,D,z)},addBufferState:function(V,D,z){B.addBufferState(V,D,z)},addDroppedFrames:function(V){B.addDroppedFrames(F.default.VIDEO,V)},addPlayList:function(){N&&(B.addPlayList(N),N=null)},addDVBErrors:function(V){B.addDVBErrors(V)},createPlaylistMetrics:function(V,D){N=new Pt,N.start=new Date,N.mstart=V,N.starttype=D},createPlaylistTraceMetrics:function(V,D,z){x===!0&&(x=!1,I=new Lt,I.representationid=V,I.start=new Date,I.mstart=D,I.playbackspeed=z!==null?z.toString():null)},updatePlayListTraceMetrics:function(V){if(I)for(let D in I)I[D]=V[D]},pushPlayListTraceMetrics:function(V,D){if(x===!1&&N&&I&&I.start){const z=I.start;I.duration=V.getTime()-z.getTime(),I.stopreason=D,N.trace.push(I),x=!0}},clearAllCurrentMetrics:function(){B.clearAllCurrentMetrics()}},B=B||Vf(E).getInstance({settings:_.settings}),x=!0,I=null,N=null,S}sd.__dashjs_factory_name="DashMetrics";var od=Ee.default.getSingletonFactory(sd);function ld(){const _=this.context,E=(0,oe.default)(_).getInstance(),S=(0,Q.default)(_).getInstance();let x,I,N,B;function G(ce){B=ce}function C(ce,de,ge,we){let ne,U=de.adaptation.period.mpd;const X=U.availabilityStartTime;if(we)ne=ge&&U.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(X.getTime()+1e3*(ce+U.timeShiftBufferDepth)):U.availabilityEndTime;else if(ge){const J=de.availabilityTimeOffset;ne=new Date(X.getTime()+1e3*(ce-J))}else ne=X;return ne}function K(ce,de){return(ce.getTime()-de.mpd.availabilityStartTime.getTime()+1e3*B)/1e3}function V(ce,de){return ce+(de.adaptation.period.start-de.presentationTimeOffset)}function D(ce){const de={start:NaN,end:NaN},ge=ce[0].getAdapter().getRegularPeriods()[0],we=K(new Date,ge);if(!ce||ce.length===0)return{range:de,now:we};ce.forEach(U=>{let X=U.getCurrentRepresentationForType(F.default.VIDEO);if(X||(X=U.getCurrentRepresentationForType(F.default.AUDIO)),!X){const me=U.getAdapter(),Ie=me.getMediaInfoForType(U.getStreamInfo(),F.default.VIDEO)||me.getMediaInfoForType(U.getStreamInfo(),F.default.AUDIO);X=me.getVoRepresentations(Ie)[0]}let J={start:NaN,end:NaN};if(X)if(X.segmentInfoType===k.default.SEGMENT_TIMELINE)J=function(me){const Ie=me.adaptation.period.mpd.manifest.Period[me.adaptation.period.index].AdaptationSet[me.adaptation.index],Te=I.getRepresentationFor(me.index,Ie),xe=Te.SegmentTemplate||Te.SegmentList,Oe=xe.SegmentTimeline,je=xe.timescale,ee=Oe.S,te={start:0,end:0},Ae=ee[0].t,_e=!isNaN(Ae),re=_e?Ae:0;let he,ve,fe,ke,Ce=0;for(_e&&(te.start=V(re/je,me)),fe=0,ke=ee.length;fe<ke;fe++)he=ee[fe],ve=0,he.hasOwnProperty("r")&&(ve=he.r),Ce+=he.d*(1+ve);return te.end=V((re+Ce)/je,me),te}(X);else{const me=X.adaptation.period;J.start=me.start,J.end=Math.max(we,me.start+me.duration)}!isNaN(J.start)&&(isNaN(de.start)||de.start>J.start)&&(de.start=J.start),!isNaN(J.end)&&(isNaN(de.end)||de.end<J.end)&&(de.end=J.end)}),de.end=Math.min(we,de.end);const ne=$(ce,de.end,!0);return de.end=isNaN(ne)?de.end:ne,de.start=ge&&ge.mpd&&ge.mpd.timeShiftBufferDepth&&!isNaN(ge.mpd.timeShiftBufferDepth)&&!isNaN(de.end)?Math.max(de.end-ge.mpd.timeShiftBufferDepth,de.start):de.start,de.start=$(ce,de.start),{range:de,now:we}}function z(ce,de){N=ce-de.end}function $(ce,de){let ge=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{let we=0,ne=!1,U=NaN;for(;!ne&&we<ce.length;){const X=ce[we].getStreamInfo();X.start<=de&&(!isFinite(X.duration)||X.start+X.duration>=de)?(U=de,ne=!0):!ge&&X.start>de&&(isNaN(U)||X.start<U)?U=X.start:ge&&X.start+X.duration<de&&(isNaN(U)||X.start+X.duration>U)&&(U=X.start+X.duration),we+=1}return U}catch{return de}}function ie(ce){ce.offset===void 0||isNaN(ce.offset)||G(ce.offset/1e3)}function se(){B=0,N=0}function ae(){E.off(L.default.UPDATE_TIME_SYNC_OFFSET,ie,this),se()}return x={initialize:function(){se(),E.on(L.default.UPDATE_TIME_SYNC_OFFSET,ie,this)},getClientTimeOffset:function(){return B},setClientTimeOffset:G,getClientReferenceTime:function(){return Date.now()-1e3*N+1e3*B},calcAvailabilityStartTimeFromPresentationTime:function(ce,de,ge){return C(ce,de,ge)},calcAvailabilityEndTimeFromPresentationTime:function(ce,de,ge){return C(ce,de,ge,!0)},calcPresentationTimeFromWallTime:K,calcPresentationTimeFromMediaTime:V,calcPeriodRelativeTimeFromMpdRelativeTime:function(ce,de){return de-ce.adaptation.period.start},calcMediaTimeFromPresentationTime:function(ce,de){return ce-de.adaptation.period.start+de.presentationTimeOffset},calcWallTimeForSegment:function(ce,de){let ge,we,ne;return de&&(ge=ce.representation.adaptation.period.mpd.suggestedPresentationDelay,we=ce.presentationStartTime+ge,ne=new Date(ce.availabilityStartTime.getTime()+1e3*we)),ne},calcTimeShiftBufferWindow:function(ce,de){if(!de)return function(ge){const we={start:NaN,end:NaN};let ne=0,U=NaN;return ge.forEach(X=>{const J=X.getStreamInfo();ne+=J.duration,(isNaN(U)||J.start<U)&&(U=J.start)}),we.start=U,we.end=U+ne,we}(ce);if(S.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){const ge=D(ce);return z(ge.now,ge.range),ge.range}return function(ge){const we={start:NaN,end:NaN};if(!ge||ge.length===0)return we;const ne=ge[0].getAdapter().getRegularPeriods()[0],U=K(new Date,ne),X=ne.mpd.timeShiftBufferDepth,J=isNaN(X)?0:U-X;if(we.start=$(ge,J),we.end=!isNaN(we.start)&&U<we.start?U:$(ge,U,!0),!isNaN(X)&&we.end<U-X&&(we.end=NaN),S.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){const me=D(ge);if(me.range.end<we.start)return E.trigger(pe.default.CONFORMANCE_VIOLATION,{level:ka.LEVELS.WARNING,event:ka.EVENTS.INVALID_DVR_WINDOW}),z(me.now,me.range),me.range}return we}(ce)},reset:ae},I=Er(_).getInstance(),ae(),x}ld.__dashjs_factory_name="TimelineConverter";var ra,Uu,_l,xl,ud,Pg=Ee.default.getSingletonFactory(ld),Kf=function(_){for(var E=[],S=0;S<_.length;++S){var x=_.charCodeAt(S);x<128?E.push(x):x<2048?(E.push(192|x>>6),E.push(128|63&x)):x<65536?(E.push(224|x>>12),E.push(128|63&x>>6),E.push(128|63&x)):(E.push(240|x>>18),E.push(128|63&x>>12),E.push(128|63&x>>6),E.push(128|63&x))}return E},Yf=function(_){for(var E=[],S=0;S<_.length;){var x=_[S++];x<128||(x<224?(x=(31&x)<<6,x|=63&_[S++]):x<240?(x=(15&x)<<12,x|=(63&_[S++])<<6,x|=63&_[S++]):(x=(7&x)<<18,x|=(63&_[S++])<<12,x|=(63&_[S++])<<6,x|=63&_[S++])),E.push(String.fromCharCode(x))}return E.join("")},Ea={};ra="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Uu=function(_){for(var E=0,S=[],x=0|_.length/3;0<x--;){var I=(_[E]<<16)+(_[E+1]<<8)+_[E+2];E+=3,S.push(ra.charAt(63&I>>18)),S.push(ra.charAt(63&I>>12)),S.push(ra.charAt(63&I>>6)),S.push(ra.charAt(63&I))}return _.length-E==2?(I=(_[E]<<16)+(_[E+1]<<8),S.push(ra.charAt(63&I>>18)),S.push(ra.charAt(63&I>>12)),S.push(ra.charAt(63&I>>6)),S.push("=")):_.length-E==1&&(I=_[E]<<16,S.push(ra.charAt(63&I>>18)),S.push(ra.charAt(63&I>>12)),S.push("==")),S.join("")},_l=function(){for(var _=[],E=0;E<64;++E)_[ra.charCodeAt(E)]=E;return _[61]=0,_}(),xl=function(_){for(var E=0,S=[],x=0|_.length/4;0<x--;){var I=(_l[_.charCodeAt(E)]<<18)+(_l[_.charCodeAt(E+1)]<<12)+(_l[_.charCodeAt(E+2)]<<6)+_l[_.charCodeAt(E+3)];S.push(255&I>>16),S.push(255&I>>8),S.push(255&I),E+=4}return S&&(_.charAt(E-2)=="="?(S.pop(),S.pop()):_.charAt(E-1)=="="&&S.pop()),S},ud={encode:function(_){for(var E=[],S=0;S<_.length;++S)E.push(_.charCodeAt(S));return E},decode:function(_){for(var E=0;E<s.length;++E)a[E]=String.fromCharCode(a[E]);return a.join("")}},Ea.decodeArray=function(_){var E=xl(_);return new Uint8Array(E)},Ea.encodeASCII=function(_){var E=ud.encode(_);return Uu(E)},Ea.decodeASCII=function(_){var E=xl(_);return ud.decode(E)},Ea.encode=function(_){var E=Kf(_);return Uu(E)},Ea.decode=function(_){var E=xl(_);return Yf(E)},typeof ec<"u"&&(ec.decode=Ea.decode,ec.decodeArray=Ea.decodeArray,ec.encode=Ea.encode,ec.encodeASCII=Ea.encodeASCII);var Mo=Ea,Mg=class extends Do{constructor(){super(),this.captionData=null,this.label=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1,this.isTTML=null}},Og=t(7377);function Wf(){let _,E=0;function S(C){let K="";for(let V=0;V<C.length;++V)K+=C[V].uchar;return K.length-K.replace(/^\s+/,"").length}function x(C){return"left: "+3.125*C.x+"%; top: "+6.66*C.y1+"%; width: "+(100-3.125*C.x)+"%; height: "+6.66*Math.max(C.y2-1-C.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function I(C){return C==="red"?"rgb(255, 0, 0)":C==="green"?"rgb(0, 255, 0)":C==="blue"?"rgb(0, 0, 255)":C==="cyan"?"rgb(0, 255, 255)":C==="magenta"?"rgb(255, 0, 255)":C==="yellow"?"rgb(255, 255, 0)":C==="white"?"rgb(255, 255, 255)":C==="black"?"rgb(0, 0, 0)":C}function N(C,K){const V=C.videoHeight/15;return K?"font-size: "+V+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(K.foreground?I(K.foreground):"rgb(255, 255, 255)")+"; font-style: "+(K.italics?"italic":"normal")+"; text-decoration: "+(K.underline?"underline":"none")+"; white-space: pre; background-color: "+(K.background?I(K.background):"transparent")+";":"font-size: "+V+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function B(C){return C.replace(/^\s+/g,"")}function G(C){return C.replace(/\s+$/g,"")}return _={createHTMLCaptionsFromScreen:function(C,K,V,D){let z=null,$=null,ie=!1,se=-1,ae={start:K,end:V,spans:[]},ce="style_cea608_white_black";const de={},ge={},we=[];let ne,U;for(ne=0;ne<15;++ne){const J=D.rows[ne];let me="",Ie=null;if(J.isEmpty()===!1){const Te=S(J.chars);z===null&&(z={x:Te,y1:ne,y2:ne+1,p:[]}),Te!==se&&ie&&(z.p.push(ae),ae={start:K,end:V,spans:[]},z.y2=ne,z.name="region_"+z.x+"_"+z.y1+"_"+z.y2,de.hasOwnProperty(z.name)===!1?(we.push(z),de[z.name]=z):($=de[z.name],$.p.contat(z.p)),z={x:Te,y1:ne,y2:ne+1,p:[]});for(let xe=0;xe<J.chars.length;++xe){const Oe=J.chars[xe],je=Oe.penState;if(Ie===null||!je.equals(Ie)){me.trim().length>0&&(ae.spans.push({name:ce,line:me,row:ne}),me="");let ee="style_cea608_"+je.foreground+"_"+je.background;je.underline&&(ee+="_underline"),je.italics&&(ee+="_italics"),ge.hasOwnProperty(ee)||(ge[ee]=JSON.parse(JSON.stringify(je))),Ie=je,ce=ee}me+=Oe.uchar}me.trim().length>0&&ae.spans.push({name:ce,line:me,row:ne}),ie=!0,se=Te}else ie=!1,se=-1,z&&(z.p.push(ae),ae={start:K,end:V,spans:[]},z.y2=ne,z.name="region_"+z.x+"_"+z.y1+"_"+z.y2,de.hasOwnProperty(z.name)===!1?(we.push(z),de[z.name]=z):($=de[z.name],$.p.contat(z.p)),z=null)}z&&(z.p.push(ae),z.y2=ne+1,z.name="region_"+z.x+"_"+z.y1+"_"+z.y2,de.hasOwnProperty(z.name)===!1?(we.push(z),de[z.name]=z):($=de[z.name],$.p.contat(z.p)),z=null);const X=[];for(ne=0;ne<we.length;++ne){const J=we[ne],me="sub_cea608_"+E++,Ie=document.createElement("div");Ie.id=me;const Te=x(J);Ie.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+Te;const xe=document.createElement("div");xe.className="paragraph bodyStyle",xe.style.cssText=N(C);const Oe=document.createElement("div");Oe.className="cueUniWrapper",Oe.style.cssText="unicode-bidi: normal; direction: ltr;";for(let ee=0;ee<J.p.length;++ee){const te=J.p[ee];let Ae=0;for(U=0;U<te.spans.length;++U){let _e=te.spans[U];if(_e.line.length>0){if(U!==0&&Ae!=_e.row){const fe=document.createElement("br");fe.className="lineBreak",Oe.appendChild(fe)}let re=!1;Ae===_e.row&&(re=!0),Ae=_e.row;const he=ge[_e.name],ve=document.createElement("span");ve.className="spanPadding "+_e.name+" customSpanColor",ve.style.cssText=N(C,he),U!==0&&re?U===te.spans.length-1?ve.textContent=G(_e.line):ve.textContent=_e.line:te.spans.length>1&&U<te.spans.length-1&&_e.row===te.spans[U+1].row?ve.textContent=B(_e.line):ve.textContent=_e.line.trim(),Oe.appendChild(ve)}}}xe.appendChild(Oe),Ie.appendChild(xe);const je={bodyStyle:["%",90]};for(const ee in ge)ge.hasOwnProperty(ee)&&(je[ee]=["%",90]);X.push({type:"html",start:K,end:V,cueHTMLElement:Ie,cueID:me,cellResolution:[32,15],isFromCEA608:!0,fontSize:je,lineHeight:{},linePadding:{}})}return X}},_}Wf.__dashjs_factory_name="EmbeddedTextHtmlRender";var ba=Ee.default.getSingletonFactory(Wf);function cd(_,E,S){const x=[];for(let I=E;I<S;I++)I+2<S&&_.getUint8(I)===0&&_.getUint8(I+1)===0&&_.getUint8(I+2)===3?(x.push(0),x.push(0),I+=2):x.push(_.getUint8(I));return new DataView(new Uint8Array(x).buffer)}function Bu(_,E,S,x){return!(_!==4||E<8)&&S.getUint8(x)===181&&S.getUint16(x+1)===49&&S.getUint32(x+3)===1195456820&&S.getUint8(x+7)===3}function Xf(_,E){return(127&_)>0||(127&E)>0}function Qf(_,E){let S=0;for(;S<_.byteLength;){let I,N=0,B=0;do N+=I=_.getUint8(S++);while(I===255);do B+=I=_.getUint8(S++);while(I===255);if(Bu(N,B,_,S)){const G=S+10,C=G+3*(31&_.getUint8(G-2));for(let K=G;K<C;K+=3){const V=_.getUint8(K);if(4&V){const D=3&V;if((x=D)===0||x===1){const z=_.getUint8(K+1),$=_.getUint8(K+2);Xf(z,$)&&E[D].push(z,$)}}}}S+=B}var x}function Zf(_,E,S){let x=0,I=0;const N=[[],[]];for(let B=E;B<E+S-5&&(x=_.getUint32(B),I=31&_.getUint8(B+4),!(B+5+x>E+S));B++)I===6&&B+5+x<=_.byteLength&&Qf(cd(_,B+5,B+5+x),N),B+=x+3;return N}function ju(_){const E=_.errHandler,S=_.manifestModel,x=_.mediaController,I=_.videoModel,N=_.textTracks,B=_.vttParser,G=_.vttCustomRenderingParser,C=_.ttmlParser,K=_.streamInfo,V=_.settings,D=this.context,z=(0,oe.default)(D).getInstance();let $,ie,se,ae,ce,de,ge,we,ne,U,X,J,me,Ie,Te,xe,Oe,je=!1;function ee(){de=null,we=NaN,ne=[],U=null,ge=!1,ce=[],ae=null}function te(Ve){const Ke={};Ke[k.default.SUBTITLE]="subtitles",Ke[k.default.CAPTION]="captions",Ke[k.default.FORCED_SUBTITLE]="subtitles";const st=new Mg;for(let ft in Ve)st[ft]=Ve[ft];st.defaultTrack=function(ft){let St=!1;return J.length>1&&ft.isEmbedded?St=ft.id&&ft.id===F.default.CC1:J.length===1?ft.id&&typeof ft.id=="string"&&ft.id.substring(0,2)==="CC"&&(St=!0):J.length===0&&(St=ft.index===ce[0].index),St}(Ve),st.isTTML=function(ft){return ft.codec&&ft.codec.search(F.default.STPP)>=0||ft.mimeType&&ft.mimeType.search(F.default.TTML)>=0}(Ve),st.kind=function(ft,St){let Bt=ft.roles&&ft.roles.length>0?St[ft.roles[0].value]:St.caption;return Bt=Object.values(St).includes(Bt)?Bt:St.caption,Bt}(Ve,Ke),N.addTextTrackInfo(st)}function Ae(Ve){const Ke=Ve.chunk;Ke.representation.mediaInfo.embeddedCaptions&&re(Ke.bytes,Ke)}function _e(Ve){X=Ve}function re(Ve,Ke){const st=Ke.representation.mediaInfo,ft=st.type,St=st.mimeType,Bt=st.codec||St;Bt?st.codec.indexOf("application/mp4")!==-1?function(Ht,hn,In){let Ot,Zt;if(hn.segmentType==="InitializationSegment")ge=!0,we=se.getMediaTimescaleFromMoov(Ht);else{if(!ge)return;Zt=se.getSamplesInfo(Ht),Ot=Zt.sampleList,Ot.length>0&&(U=Ot[0].cts-hn.start*we),In.search(F.default.STPP)>=0?function(cn,Nn,Cn){let We,pt;for(ae=ae!==null?ae:fe(Cn),We=0;We<Nn.length;We++){const gt=Nn[We],vt=gt.cts,sn=ve(),Tn=sn+vt/we,yt=Tn+gt.duration/we;$.buffered.add(Tn,yt);const Yt=new DataView(cn,gt.offset,gt.subSizes[0]);let tn=yo.Utils.dataViewToString(Yt,F.default.UTF8);const jt=[];let on=gt.offset+gt.subSizes[0];for(pt=1;pt<gt.subSizes.length;pt++){const at=new Uint8Array(cn,on,gt.subSizes[pt]),At=String.fromCharCode.apply(null,at);jt.push(At),on+=gt.subSizes[pt]}try{const at=S.getValue().ttmlTimeIsRelative?vt/we:0,At=ae.parse(tn,at,vt/we,(vt+gt.duration)/we,jt);N.addCaptions(X,sn,At)}catch(at){de.removeExecutedRequestsBeforeTime(),ke(),ie.error("TTML parser error: "+at)}}}(Ht,Ot,In):function(cn,Nn){let Cn,We,pt;const gt=[];for(Cn=0;Cn<Nn.length;Cn++){const vt=Nn[Cn];vt.cts-=U;const sn=ve()+vt.cts/we,Tn=sn+vt.duration/we;$.buffered.add(sn,Tn);const yt=cn.slice(vt.offset,vt.offset+vt.size),Yt=yo.parseBuffer(yt);for(We=0;We<Yt.boxes.length;We++){const tn=Yt.boxes[We];if(ie.debug("VTT box1: "+tn.type),tn.type!=="vtte"&&tn.type==="vttc"){ie.debug("VTT vttc boxes.length = "+tn.boxes.length);let jt={styles:{}};for(pt=0;pt<tn.boxes.length;pt++){const on=tn.boxes[pt];if(ie.debug("VTT box2: "+on.type),on.type==="payl")jt.start=vt.cts/we,jt.end=(vt.cts+vt.duration)/we,jt.data=on.cue_text;else if(on.type==="sttg"&&on.settings&&on.settings!=="")try{const at=on.settings.split(" ");jt.styles=B.getCaptionStyles(at)}catch{}}jt&&jt.data&&(gt.push(jt),ie.debug(`VTT  ${jt.start} - ${jt.end} :  ${jt.data}`))}}}gt.length>0&&N.addCaptions(X,0,gt)}(Ht,Ot)}}(Ve,Ke,Bt):ft===F.default.VIDEO?function(Ht,hn){let In,Ot;if(hn.segmentType===Le.HTTPRequest.INIT_SEGMENT_TYPE)me===0&&(me=se.getMediaTimescaleFromMoov(Ht));else if(hn.segmentType===Le.HTTPRequest.MEDIA_SEGMENT_TYPE){if(me===0)return void ie.warn("CEA-608: No timescale for embeddedTextTrack yet");Ot=se.getSamplesInfo(Ht);const Zt=Ot.lastSequenceNumber,cn=Math.trunc(hn.start),Nn=Math.trunc(hn.end);if(xe[0]||xe[1]||function(){let Cn;for(let We=0;We<J.length;We++){if(Cn=N.getTrackIdxForId(J[We].id),Cn===-1)return void ie.warn("CEA-608: data before track is ready.");const pt=he(Cn);xe[We]=new Re(We+1,{newCue:pt},null)}}(),me){if(function(We,pt,gt,vt,sn){return We!==null&&pt!==null&&vt!==null&&sn!==null&&(pt===We?vt!==sn:pt!==We+gt)}(Ie,Zt,Ot.numSequences,Te,cn))for(In=0;In<xe.length;In++)xe[In]&&xe[In].reset();const Cn=function(We,pt){if(pt.length===0)return null;const gt={splits:[],fields:[[],[]]},vt=new DataView(We);for(let sn=0;sn<pt.length;sn++){const Tn=pt[sn],yt=Zf(vt,Tn.offset,Tn.size);let Yt=null,tn=0;for(let jt=0;jt<2;jt++)if(yt[jt].length>0){Tn.cts!==Yt?tn=0:tn+=1;const on=ve();gt.fields[jt].push([Tn.cts+on*me,yt[jt],tn]),Yt=Tn.cts}}return gt.fields.forEach(function(sn){sn.sort(function(Tn,yt){return Tn[0]===yt[0]?Tn[2]-yt[2]:Tn[0]-yt[0]})}),gt}(Ht,Ot.sampleList);for(let We=0;We<xe.length;We++){const pt=Cn.fields[We],gt=xe[We];if(gt)for(In=0;In<pt.length;In++)gt.addData(pt[In][0]/me,pt[In][1])}Ie=Zt,Te=Nn}}}(Ve,Ke):function(Ht,hn,In){let Ot,Zt;const cn=new DataView(Ht,0,Ht.byteLength);Zt=yo.Utils.dataViewToString(cn,F.default.UTF8);try{Ot=fe(In).parse(Zt,0),N.addCaptions(N.getCurrentTrackIdx(),0,Ot),$.buffered&&$.buffered.add(hn.start,hn.end)}catch(Nn){E.error(new Pe.default(W.TIMED_TEXT_ERROR_ID_PARSE_CODE,W.TIMED_TEXT_ERROR_MESSAGE_PARSE+Nn.message,Zt))}}(Ve,Ke,Bt):ie.error("No text type defined")}function he(Ve){return function(Ke,st,ft){let St;St=I.getTTMLRenderingDiv()?Oe.createHTMLCaptionsFromScreen(I.getElement(),Ke,st,ft):[{start:Ke,end:st,data:ft.getDisplayText(),styles:{}}],St&&N.addCaptions(Ve,0,St)}}function ve(){return isNaN($.timestampOffset)?0:$.timestampOffset}function fe(Ve){let Ke;return Ve.search(F.default.VTT)>=0?Ke=V.get().streaming.text.webvtt.customRenderingEnabled&&G?G:B:(Ve.search(F.default.TTML)>=0||Ve.search(F.default.STPP)>=0)&&(Ke=C),Ke}function ke(Ve,Ke){Ve===void 0&&Ve===Ke&&(Ve=$.buffered.start(0),Ke=$.buffered.end($.buffered.length-1)),$.buffered.remove(Ve,Ke),N.deleteCuesFromTrackIdx(X,Ve,Ke)}function Ce(Ve){J.forEach(function(Ke){const st=N.getTrackIdxForId(Ke.id);st>=0&&N.deleteCuesFromTrackIdx(st,Ve.from,Ve.to)})}return $={initialize:function(){je||(J=[],X=null,me=0,xe=[],Ie=null,Te=null,je=!0,Oe=ba(D).getInstance(),z.on(L.default.VIDEO_CHUNK_RECEIVED,Ae,$),z.on(L.default.BUFFER_CLEARED,Ce,$))},addMediaInfos:function(Ve,Ke,st){if(ce=ce.concat(Ke),Ve===F.default.TEXT&&Ke[0].isFragmented&&!Ke[0].isEmbedded){de=st,$.buffered=(0,Og.default)(D).create(),ne=x.getTracksFor(F.default.TEXT,K.id).filter(St=>St.isFragmented);const ft=x.getCurrentTrackFor(F.default.TEXT,K.id);for(let St=0;St<ne.length;St++)if(ne[St]===ft){_e(St);break}}for(let ft=0;ft<Ke.length;ft++)te(Ke[ft])},resetMediaInfos:function(){ce=[]},getStreamId:function(){return K.id},append:re,abort:function(){},addEmbeddedTrack:function(Ve){if(je&&Ve)if(Ve.id===F.default.CC1||Ve.id===F.default.CC3){for(let Ke=0;Ke<J.length;Ke++)if(J[Ke].id===Ve.id)return;J.push(Ve)}else ie.warn("Embedded track "+Ve.id+" not supported!")},resetEmbedded:function(){z.off(L.default.VIDEO_CHUNK_RECEIVED,Ae,$),z.off(L.default.BUFFER_CLEARED,Ce,$),N&&N.deleteAllTextTracks(),je=!1,J=[],xe=[null,null],Ie=null,Te=null},getConfig:function(){return{fragmentModel:de,fragmentedTracks:ne,videoModel:I}},setCurrentFragmentedTrackIdx:_e,remove:ke,reset:function(){ee(),ce=[],se=null}},ie=(0,Be.default)(D).getInstance().getLogger($),se=rl(D).getInstance(),ee(),$}ju.__dashjs_factory_name="TextSourceBuffer";var Oo=Ee.default.getClassFactory(ju);class dd{constructor(E){if(this.cues=new Map,E)for(const S of E)this.addCue(S)}hasCue(E){const S=this.cues.get(E.startTime);return S&&S.some(x=>{return N=E,(I=x).startTime===N.startTime&&I.endTime===N.endTime&&I instanceof VTTCue&&N instanceof VTTCue&&I.text===N.text;var I,N})}addCue(E){const S=this.cues.get(E.startTime);S?this.hasCue(E)||S.push(E):this.cues.set(E.startTime,[E])}}var wl=t(7640);const Fg=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function fd(_){const E=this.context,S=(0,oe.default)(E).getInstance(),x=_.videoModel,I=_.streamInfo,N=_.settings;let B,G,C,K,V,D,z,$,ie,se,ae,ce,de,ge,we,ne,U,X,J,me;function Ie(We){const pt=We.kind,gt=We.id!==void 0?We.id:We.lang,vt=We.lang,sn=We.isTTML,Tn=We.isEmbedded;return x.addTextTrack(pt,gt,vt,sn,Tn)}function Te(We,pt,gt,vt,sn,Tn){let yt=0,Yt=0;We/pt>gt/vt?(Yt=pt,yt=Yt/vt*gt):(yt=We,Yt=yt/gt*vt);let tn=0,jt=0,on=0,at=0;return yt/Yt>sn?(at=Yt,on=Yt*sn):(on=yt,at=yt/sn),tn=(We-on)/2,jt=(pt-at)/2,Tn?{x:tn+.1*on,y:jt+.1*at,w:.8*on,h:.8*at}:{x:tn,y:jt,w:on,h:at}}function xe(We,pt){const gt=x.getClientWidth(),vt=x.getClientHeight(),sn=x.getVideoWidth(),Tn=x.getVideoHeight(),yt=x.getVideoRelativeOffsetTop(),Yt=x.getVideoRelativeOffsetLeft();if(sn!==0&&Tn!==0){let tn=sn/Tn,jt=!1;We.isFromCEA608&&(tn=3.5/3,jt=!0);const on=Te.call(this,gt,vt,sn,Tn,tn,jt),at=on.w,At=on.h,Qt=on.x,nn=on.y;if(at!=ie||At!=se||Qt!=z||nn!=$||pt){if(z=Qt+Yt,$=nn+yt,ie=at,se=At,ae){const Ne=ae.style;Ne&&(Ne.left=z+"px",Ne.top=$+"px",Ne.width=ie+"px",Ne.height=se+"px",Ne.zIndex=ge&&document[ge]||we?U:null,S.trigger(pe.default.CAPTION_CONTAINER_RESIZE))}const Et=We.activeCues;if(Et){const Ne=Et.length;for(let nt=0;nt<Ne;++nt){const _t=Et[nt];_t.scaleCue(_t)}}}}}function Oe(We){const pt=ie,gt=se;let vt,sn,Tn,yt,Yt;if(We.cellResolution){const tn=[pt/We.cellResolution[0],gt/We.cellResolution[1]];if(We.linePadding){for(vt in We.linePadding)if(We.linePadding.hasOwnProperty(vt)){sn=(We.linePadding[vt]*tn[0]).toString();const jt=document.getElementsByClassName("spanPadding");for(let on=0;on<jt.length;on++)jt[on].style.cssText=jt[on].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+sn),jt[on].style.cssText=jt[on].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+sn)}}if(We.fontSize){for(vt in We.fontSize)if(We.fontSize.hasOwnProperty(vt)){We.fontSize[vt][0]==="%"?Tn=We.fontSize[vt][1]/100:We.fontSize[vt][0]==="c"&&(Tn=We.fontSize[vt][1]),sn=(Tn*tn[1]).toString(),Yt=vt!=="defaultFontSize"?document.getElementsByClassName(vt):document.getElementsByClassName("paragraph");for(let jt=0;jt<Yt.length;jt++)Yt[jt].style.cssText=Yt[jt].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+sn)}if(We.lineHeight){for(vt in We.lineHeight)if(We.lineHeight.hasOwnProperty(vt)){We.lineHeight[vt][0]==="%"?yt=We.lineHeight[vt][1]/100:We.fontSize[vt][0]==="c"&&(yt=We.lineHeight[vt][1]),sn=(yt*tn[1]).toString(),Yt=document.getElementsByClassName(vt);for(let jt=0;jt<Yt.length;jt++)Yt[jt].style.cssText=Yt[jt].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+sn)}}}}if(We.isd){let tn=document.getElementById(We.cueID);tn&&ae.removeChild(tn),ee(We)}}function je(We,pt){const gt=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,vt=/^#(.*)$/;if(gt.test(pt)){const sn=gt.exec(pt),Tn=parseInt(sn[4],10)-1;return"data:image/png;base64,"+btoa(We.images[Tn])}if(vt.test(pt)){const sn=vt.exec(pt)[1];return"data:image/png;base64,"+We.embeddedImages[sn]}return pt}function ee(We){if(ae){Cn.call(this);const pt=document.createElement("div");ae.appendChild(pt),ne=(0,wl.renderHTML)(We.isd,pt,function(gt){return je(We,gt)},ae.clientHeight,ae.clientWidth,N.get().streaming.text.imsc.displayForcedOnlyMode,function(gt){G.info("renderCaption :",gt)},ne,N.get().streaming.text.imsc.enableRollUp),pt.id=We.cueID,S.trigger(pe.default.CAPTION_RENDERED,{captionDiv:pt,currentTrackIdx:D})}}function te(We,pt){return!!pt&&pt.endTime>=We.startTime}function Ae(We,pt){return!!N.get().streaming.text.extendSegmentedCues&&!!function(gt,vt,sn){for(let Tn=0;Tn<sn.length;Tn++){const yt=sn[Tn];if(JSON.stringify(gt[yt])!==JSON.stringify(vt[yt]))return!1}return!0}(pt,We,Fg)&&(pt.endTime=Math.max(pt.endTime,We.endTime),!0)}function _e(We,pt){pt&&pt.forEach(gt=>{gt.kind&&gt.kind==="image"&&(gt.src=je(We,gt.src)),_e(We,gt.contents)})}function re(We,pt,gt){const vt=St(We),sn=N.get().streaming.text.dispatchForManualRendering;if(!vt||!Array.isArray(gt)||gt.length===0)return;const Tn=new dd(vt.cues);for(let yt=0;yt<gt.length;yt++){let Yt=null;const tn=gt[yt];vt.cellResolution=tn.cellResolution,vt.isFromCEA608=tn.isFromCEA608,isNaN(tn.start)||isNaN(tn.end)||(sn?Yt=he(tn,pt):Ve(tn)&&ae?Yt=ke(tn,pt,vt):tn.data&&(Yt=Ce(tn,pt,vt)));try{if(Yt){if(!Tn.hasCue(Yt))if(Tn.addCue(Yt),N.get().streaming.text.webvtt.customRenderingEnabled)vt.manualCueList||(vt.manualCueList=[]),vt.manualCueList.push(Yt);else{let on;vt.cues&&vt.cues.length!==0&&(on=vt.cues[vt.cues.length-1]),te(Yt,on)?Ae(Yt,on)||(on.isd&&(on.onexit=function(){}),vt.mode!==F.default.TEXT_DISABLED&&vt.addCue(Yt)):vt.mode!==F.default.TEXT_DISABLED&&vt.addCue(Yt)}const jt=N.get().streaming.buffer.bufferToKeep;In(vt,0,x.getTime()-jt)}else G.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(jt){throw Ot(vt),vt.addCue(Yt),jt}}}function he(We,pt){let gt=Ke(We,pt);return gt.onenter=function(){Ve(We)&&me&&me.cueID!==gt.cueID&&fe(me),delete gt.type,me=gt,ve(gt)},gt.onexit=function(){fe(gt),me=null},gt}function ve(We){S.trigger(pe.default.CUE_ENTER,We)}function fe(We){S.trigger(pe.default.CUE_EXIT,{cueID:We.cueID})}function ke(We,pt,gt){const vt=this;let sn=Ke(We,pt);return ae.style.left=z+"px",ae.style.top=$+"px",ae.style.width=ie+"px",ae.style.height=se+"px",sn.onenter=function(){gt.mode===F.default.TEXT_SHOWING&&(this.isd?(J?requestAnimationFrame(()=>ee(this)):ee(this),G.debug("Cue enter id:"+this.cueID)):(ae.appendChild(this.cueHTMLElement),Oe.call(vt,this),S.trigger(pe.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:D})))},sn.onexit=function(){if(ae){const Tn=ae.childNodes;for(let yt=0;yt<Tn.length;++yt)Tn[yt].id===this.cueID&&(G.debug("Cue exit id:"+Tn[yt].id),ae.removeChild(Tn[yt]),--yt)}},sn}function Ce(We,pt,gt){let vt=Ke(We,pt);if(vt.isActive=!1,We.styles)try{We.styles.align!==void 0&&"align"in vt&&(vt.align=We.styles.align),We.styles.line!==void 0&&"line"in vt&&(vt.line=We.styles.line),We.styles.lineAlign!==void 0&&(vt.lineAlign=We.styles.lineAlign),We.styles.snapToLines!==void 0&&"snapToLines"in vt&&(vt.snapToLines=We.styles.snapToLines),We.styles.position!==void 0&&"position"in vt&&(vt.position=We.styles.position),We.styles.positionAlign!==void 0&&(vt.positionAlign=We.styles.positionAlign),We.styles.size!==void 0&&"size"in vt&&(vt.size=We.styles.size)}catch(sn){G.error(sn)}return vt.onenter=function(){gt.mode===F.default.TEXT_SHOWING&&S.trigger(pe.default.CAPTION_RENDERED,{currentTrackIdx:D})},vt}function Ve(We){return We.type==="html"}function Ke(We,pt){return Ve(We)?function(gt,vt){let sn=new C(gt.start+vt,gt.end+vt,"");return sn.cueHTMLElement=gt.cueHTMLElement,sn.isd=gt.isd,sn.images=gt.images,sn.embeddedImages=gt.embeddedImages,sn.cueID=gt.cueID,sn.scaleCue=Oe.bind(self),sn.cellResolution=gt.cellResolution,sn.lineHeight=gt.lineHeight,sn.linePadding=gt.linePadding,sn.fontSize=gt.fontSize,sn.isd&&_e(sn,sn.isd.contents),sn}(We,pt):function(gt,vt){let sn=new C(gt.start-vt,gt.end-vt,gt.data);return sn.cueID=or.default.generateUuid(),sn}(We,pt)}function st(We){if(ce){const pt=ce.childNodes;for(let gt=0;gt<pt.length;++gt)pt[gt].id===We.cueID&&(ce.removeChild(pt[gt]),--gt)}}function ft(){const We=x.getTextTracks(),pt=[];for(const gt of We)gt.manualMode===F.default.TEXT_SHOWING&&pt.push(gt);return pt}function St(We){return We>=0&&K[We]?x.getTextTrack(K[We].kind,K[We].id,K[We].lang,K[We].isTTML,K[We].isEmbedded):null}function Bt(We){if(We===D)return;D=We;const pt=St(D);Ht.call(this,pt),de&&(clearInterval(de),de=null),pt&&pt.renderingType==="html"&&(xe.call(this,pt,!0),window.ResizeObserver?(X=new window.ResizeObserver(()=>{xe.call(this,pt,!0)}),X.observe(x.getElement())):de=setInterval(xe.bind(this,pt),500))}function Ht(We){Cn.call(this),We&&We.renderingType==="html"?cn.call(this):Nn.call(this)}function hn(We,pt,gt){let vt=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return!!We&&(isNaN(pt)||(vt?We.startTime:We.endTime)>=pt)&&(isNaN(gt)||(vt?We.endTime:We.startTime)<=gt)}function In(We,pt,gt){if(!(gt<pt)&&We&&(We.cues||We.manualCueList)){const vt=We.cues&&We.cues.length>0?"native":"custom",sn=vt==="native"?We.cues:We.manualCueList;if(!sn||sn.length===0)return;for(let Tn=sn.length-1;Tn>=0;Tn--)hn(sn[Tn],pt,gt,!0)&&!Zt(sn[Tn])&&(vt==="native"?We.removeCue(sn[Tn]):(st(sn[Tn]),delete We.manualCueList[Tn]))}}function Ot(We,pt,gt){let vt=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(We&&(We.cues||We.manualCueList)){const sn=We.cues&&We.cues.length>0?"native":"custom",Tn=sn==="native"?We.cues:We.manualCueList;if(!Tn||Tn.length===0)return;for(let yt=Tn.length-1;yt>=0;yt--)hn(Tn[yt],pt,gt,vt)&&(sn==="native"?(Tn[yt].onexit&&Tn[yt].onexit(),We.removeCue(Tn[yt])):(st(Tn[yt]),delete We.manualCueList[yt]))}}function Zt(We){const pt=x.getTime();return pt>=We.startTime&&pt<=We.endTime}function cn(){let We=document.getElementById("native-cue-style");if(We)return;We=document.createElement("style"),We.id="native-cue-style",document.head.appendChild(We);const pt=We.sheet,gt=x.getElement();try{gt&&(gt.id?pt.insertRule("#"+gt.id+"::cue {background: transparent}",0):gt.classList.length!==0?pt.insertRule("."+gt.className+"::cue {background: transparent}",0):pt.insertRule("video::cue {background: transparent}",0))}catch(vt){G.info(""+vt.message)}}function Nn(){const We=document.getElementById("native-cue-style");We&&document.head.removeChild(We)}function Cn(){if(ae)for(;ae.firstChild;)ae.removeChild(ae.firstChild)}return B={addCaptions:re,addTextTrackInfo:function(We){K.push(We)},createTracks:function(){K.sort(function(pt,gt){return pt.index-gt.index}),ae=x.getTTMLRenderingDiv(),ce=x.getVttRenderingDiv();let We=-1;for(let pt=0;pt<K.length;pt++){const gt=Ie(K[pt]);V.push(gt),K[pt].defaultTrack&&(gt.default=!0,We=pt);const vt=St(pt);vt&&(vt.mode=F.default.TEXT_SHOWING,ae&&(K[pt].isTTML||K[pt].isEmbedded)?vt.renderingType="html":vt.renderingType="default"),re(pt,0,K[pt].captionData),S.trigger(pe.default.TEXT_TRACK_ADDED)}if(Bt.call(this,We),We>=0){let pt=function(){const gt=St(We);gt&&gt.renderingType==="html"&&xe.call(this,gt,!0),S.off(pe.default.PLAYBACK_METADATA_LOADED,pt,this)};S.on(pe.default.PLAYBACK_METADATA_LOADED,pt,this);for(let gt=0;gt<K.length;gt++){const vt=St(gt);if(vt){const sn=N.get().streaming.text.dispatchForManualRendering;vt.mode=gt!==We||sn?F.default.TEXT_HIDDEN:F.default.TEXT_SHOWING,vt.manualMode=gt===We?F.default.TEXT_SHOWING:F.default.TEXT_HIDDEN}}}S.trigger(L.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:D,tracks:K,streamId:I.id})},deleteAllTextTracks:function(){const We=V?V.length:0;for(let pt=0;pt<We;pt++){const gt=St(pt);gt&&Ot.call(this,gt,I.start,I.start+I.duration,!1)}V=[],K=[],de&&(clearInterval(de),de=null),X&&x&&(X.unobserve(x.getElement()),X=null),D=-1,Cn.call(this)},deleteCuesFromTrackIdx:function(We,pt,gt){const vt=St(We);vt&&Ot(vt,pt,gt)},disableManualTracks:function(){const We=ft();if(We&&We.length>0){const pt=We[0].manualCueList;pt&&pt.length>0&&pt.forEach(gt=>{if(gt.isActive){if(gt.isActive=!1,N.get().streaming.text.dispatchForManualRendering)fe(gt);else if(ce){const vt=ce.childNodes;for(let sn=0;sn<vt.length;++sn)vt[sn].id===gt.cueID&&(ce.removeChild(vt[sn]),--sn)}}})}},getCurrentTrackIdx:function(){return D},getCurrentTextTrackInfo:function(){return K[D]},getStreamId:function(){return I.id},getTextTrackInfos:function(){return K},getTrackIdxForId:function(We){let pt=-1;for(let gt=0;gt<K.length;gt++)if(K[gt].id===We){pt=gt;break}return pt},initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(C=window.VTTCue||window.TextTrackCue,K=[],V=[],D=-1,z=0,$=0,ie=0,se=0,ae=null,ce=null,de=null,we=!1,U=2147483647,ne=null,J="requestAnimationFrame"in window,document.fullscreenElement!==void 0?ge="fullscreenElement":document.webkitIsFullScreen!==void 0?ge="webkitIsFullScreen":document.msFullscreenElement?ge="msFullscreenElement":document.mozFullScreen&&(ge="mozFullScreen"))},manualCueProcessing:function(We){const pt=ft();if(pt&&pt.length>0){const gt=pt[0].manualCueList;gt&&gt.length>0&&gt.forEach(vt=>{vt.startTime<=We&&vt.endTime>=We&&!vt.isActive?(vt.isActive=!0,N.get().streaming.text.dispatchForManualRendering?ve(vt):WebVTT.processCues(window,[vt],ce,vt.cueID)):vt.isActive&&(vt.startTime>We||vt.endTime<We)&&(vt.isActive=!1,N.get().streaming.text.dispatchForManualRendering?fe(vt):st(vt))})}},setCurrentTrackIdx:Bt,setModeForTrackIdx:function(We,pt){const gt=St(We);gt&&gt.mode!==pt&&(gt.mode=pt),gt&&gt.manualMode!==pt&&(gt.manualMode=pt)}},G=(0,Be.default)(E).getInstance().getLogger(B),B}fd.__dashjs_factory_name="TextTracks";var Jf=Ee.default.getClassFactory(fd);function hd(){const _=this.context;let E,S,x,I,N,B;function G(D){const z=D.split(":"),$=z.length-1;return D=60*parseInt(z[$-1],10)+parseFloat(z[$]),$===2&&(D+=3600*parseInt(z[0],10)),D}function C(D){const z=D.split(I),$=z[1].split(B);return $.shift(),z[1]=$[0],$.shift(),{cuePoints:z,styles:K($)}}function K(D){const z={};return D.forEach(function($){const ie=$.split(":");if(ie.length>1){const[se,ae]=ie;switch(se){case"align":case"A":z.align=ae;break;case"line":case"L":const[ce,de]=ae.split(","),ge=ce.endsWith("%");z.line=ce==="auto"?ce:parseInt(ce,10),ge&&(z.snapToLines=!1),de&&(z.lineAlign=de);break;case"position":case"P":const[we,ne]=ae.split(",");z.position=parseInt(we,10),ne&&(z.positionAlign=ne);break;case"size":case"S":z.size=parseInt(ae,10)}}}),z}function V(D,z){let $,ie=z,se="",ae="";for(;D[ie]!==""&&ie<D.length;)ie++;if($=ie-z,$>1)for(let ce=0;ce<$;ce++){if(ae=D[z+ce],ae.match(I)){se="";break}se+=ae,ce!==$-1&&(se+=`
`)}else ae=D[z],ae.match(I)||(se=ae);return se}return E={parse:function(D){const z=[];let $,ie;if(!D)return z;$=(D=D.split(x)).length,ie=-1;for(let se=0;se<$;se++){let ae=D[se];if(ae.length>0&&ae!=="WEBVTT"&&ae.match(I)){const ce=C(ae),de=ce.cuePoints,ge=ce.styles,we=V(D,se+1),ne=G(de[0].replace(N,"")),U=G(de[1].replace(N,""));!isNaN(ne)&&!isNaN(U)&&ne>=ie&&U>ne?we!==""?(ie=ne,z.push({start:ne,end:U,data:we,styles:ge})):S.error("Skipping cue due to empty/malformed cue text"):S.error("Skipping cue due to incorrect cue timing")}}return z},getCaptionStyles:K},S=(0,Be.default)(_).getInstance().getLogger(E),x=/(?:\r\n|\r|\n)/gm,I=/-->/,N=/(^[\s]+|[\s]+$)/g,B=/\s\b/g,E}hd.__dashjs_factory_name="VTTParser";var eh=Ee.default.getSingletonFactory(hd);function gd(){let _,E;return _={parse:function(S){let x=[];return E.oncue=function(I){I.start=I.startTime,I.end=I.endTime,I.data=I.text,I.styles={align:I.align,line:I.line,position:I.position,size:I.size},x.push(I)},E.parse(S),x}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(E=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch{}}(),_}gd.__dashjs_factory_name="VttCustomRenderingParser";var zg=Ee.default.getSingletonFactory(gd);function Ni(){const _=this.context,E=(0,oe.default)(_).getInstance();let S,x,I=0;function N(){const B="cue_TTML_"+I;return I++,B}return S={parse:function(B,G,C,K,V){let D="";const z=[];let $,ie,se;const ae={},ce={};let de="",ge="",we={onOpenTag:function(X,J,me){if(me[" imagetype"]&&!me[" imageType"]&&(E.trigger(pe.default.CONFORMANCE_VIOLATION,{level:ka.LEVELS.ERROR,event:ka.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),me[" imageType"]=me[" imagetype"]),J==="image"&&(X==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||X==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!me[" imageType"]||me[" imageType"].value!=="PNG")return void x.warn("smpte-tt imageType != PNG. Discarded");de=me["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){de&&(ce[de]=ge.trim()),ge="",de=""},onText:function(X){de&&(ge+=X)}};if(!B)throw D="no ttml data to parse",new Error(D);ae.data=B,E.trigger(L.default.TTML_TO_PARSE,ae);let ne=(0,wl.fromXML)(ae.data,function(X){D=X},we);E.trigger(L.default.TTML_PARSED,{ttmlString:ae.data,ttmlDoc:ne});const U=ne.getMediaTimeEvents();for(se=0;se<U.length;se++){let X=(0,wl.generateISD)(ne,U[se],function(J){D=J});X.contents.some(J=>J.contents.length)&&($=U[se]+G,ie=U[se+1]+G,$<ie&&z.push({start:$,end:ie,type:"html",cueID:N(),isd:X,images:V,embeddedImages:ce}))}if(D!=="")throw x.error(D),new Error(D);return z}},x=(0,Be.default)(_).getInstance().getLogger(S),S}Ni.__dashjs_factory_name="TTMLParser";var Di=Ee.default.getSingletonFactory(Ni);function md(_){let E=this.context;const S=(0,oe.default)(E).getInstance(),x=dn(E).getInstance(),I=_.adapter,N=_.baseURLController,B="error",G="loaded",C="unloaded";let K,V,D;function z(se,ae){let ce,de,ge=!1;if(N.resolve()){const U=I.getVoRepresentations(se);U&&U.length>0&&(ce=N.resolve(U[0].path).url)}const we=se.essentialProperties.filter(U=>U.schemeIdUri&&U.schemeIdUri===F.default.FONT_DOWNLOAD_DVB_SCHEME),ne=se.supplementalProperties.filter(U=>U.schemeIdUri&&U.schemeIdUri===F.default.FONT_DOWNLOAD_DVB_SCHEME);we.length>0?(ge=!0,de=we):de=ne,de.forEach(U=>{if(function(me){return!(!(me.value&&parseInt(me.value)===1&&me.dvbUrl&&me.dvbUrl.length>0&&me.dvbFontFamily&&me.dvbFontFamily.length>0&&me.dvbMimeType)||me.dvbMimeType!==F.default.OFF_MIMETYPE&&me.dvbMimeType!==F.default.WOFF_MIMETYPE)}(U)){let me=(X=U.dvbUrl,J=ce,x.isPathAbsolute(X)?X:x.isRelative(X)?J?x.resolve(X,J):x.resolve(X):X);D.push({fontFamily:U.dvbFontFamily,url:me,mimeType:U.dvbMimeType,trackId:se.id,streamId:ae,isEssential:ge,status:C,fontFace:new FontFace(U.dvbFontFamily,`url(${me})`,{display:"swap"})})}var X,J})}function $(se,ae){const ce=D[se];D[se]={...ce,status:ae}}function ie(){D=[]}return K={addFontsFromTracks:function(se,ae){if(se&&Array.isArray(se)&&ae)for(let ce=0;ce<se.length;ce++)z(se[ce],ae)},downloadFonts:function(){for(let se=0;se<D.length;se++){let ae=D[se];document.fonts.add(ae.fontFace),S.trigger(pe.default.DVB_FONT_DOWNLOAD_ADDED,ae),ae.fontFace.load().then(()=>{$(se,G),S.trigger(pe.default.DVB_FONT_DOWNLOAD_COMPLETE,ae)},ce=>{$(se,B),V.debug("Font download error: ",ce),S.trigger(pe.default.DVB_FONT_DOWNLOAD_FAILED,ae)})}},getFonts:function(){return D},getFontsForTrackId:function(se){return D.filter(ae=>ae.trackId&&ae.trackId===se)},reset:function(){(function(){for(const se of D){let ae=document.fonts.delete(se.fontFace);V.debug(`Removal of fontFamily: ${se.fontFamily} was ${ae?"successful":"unsuccessful"}`)}})(),ie()}},V=(0,Be.default)(E).getInstance().getLogger(K),ie(),K}md.__dashjs_factory_name="DVBFonts";var th=Ee.default.getClassFactory(md);function pd(_){let E=this.context;const S=_.adapter,x=_.errHandler,I=_.manifestModel,N=_.mediaController,B=_.baseURLController,G=_.videoModel,C=_.settings;let K,V,D,z,$,ie,se,ae,ce,de,ge,we,ne,U;function X(re){if(U.error(`Could not download ${re.isEssential?"an essential":"a"} font - fontFamily: ${re.fontFamily}, url: ${re.url}`),re.isEssential){let he=z[re.streamId].getTrackIdxForId(re.trackId);z[re.streamId].setModeForTrackIdx(he,F.default.TEXT_DISABLED)}}function J(re){if(U.debug(`Successfully downloaded ${re.isEssential?"an essential":"a"} font - fontFamily: ${re.fontFamily}, url: ${re.url}`),re.isEssential){let he=z[re.streamId].getTrackIdxForId(re.trackId);he===z[re.streamId].getCurrentTrackIdx()?z[re.streamId].setModeForTrackIdx(he,F.default.TEXT_SHOWING):z[re.streamId].setModeForTrackIdx(he,F.default.TEXT_HIDDEN)}}function me(re){let he=re.tracks,ve=re.index;const fe=re.streamId;if(C.get().streaming.text.defaultEnabled===!1&&!Oe()||we)je(fe,-1);else{const ke=N.getCurrentTrackFor(F.default.TEXT,fe);if(ke){const Ce={lang:ke.lang,role:ke.roles[0],index:ke.index,codec:ke.codec,accessibility:ke.accessibility[0]};he.some((Ve,Ke)=>{if(N.matchSettings(Ce,Ve))return je(fe,Ke),ve=Ke,!0})}ce=!1}V[fe].lastEnabledIndex=ve,ae.trigger(pe.default.TEXT_TRACKS_ADDED,{enabled:Oe(),index:ve,tracks:he,streamId:fe}),ge=!0,ne.addFontsFromTracks(he,fe),ne.getFonts().forEach(ke=>{if(ke.isEssential){let Ce=z[ke.streamId].getTrackIdxForId(ke.trackId);z[ke.streamId].setModeForTrackIdx(Ce,F.default.TEXT_DISABLED)}}),ne.downloadFonts()}function Ie(re){try{const he=re.streamId;if(!z[he]||isNaN(re.time))return;z[he].manualCueProcessing(re.time)}catch{}}function Te(re){try{const he=re.streamId;if(!z[he])return;z[he].disableManualTracks()}catch{}}function xe(re){try{if(!re||!re.mediaType||re.mediaType!==F.default.AUDIO||!re.currentMediaInfo)return;const he=z[re.streamId].getCurrentTextTrackInfo();let ve=NaN;ce?ve=ee(re.streamId):te(he)&&re.currentMediaInfo.lang&&re.currentMediaInfo.lang!==he.lang&&(ve=ee(re.streamId),isNaN(ve)&&(ve=-1)),isNaN(ve)||je(re.streamId,ve)}catch(he){U.error(he)}}function Oe(){let re=!0;return ce&&!de&&(re=!1),re}function je(re,he){ce=he===-1,ce&&N&&N.saveTextSettingsDisabled();let ve=Ae(re);if(ve===he||!z[re])return;z[re].disableManualTracks();let fe=z[re].getCurrentTextTrackInfo(),ke=fe?G.getTextTrack(fe.kind,fe.id,fe.lang,fe.isTTML,fe.isEmbedded):null;ke&&ke.mode!==F.default.TEXT_DISABLED&&z[re].setModeForTrackIdx(ve,F.default.TEXT_HIDDEN),z[re].setCurrentTrackIdx(he),fe=z[re].getCurrentTextTrackInfo();const Ce=C.get().streaming.text.dispatchForManualRendering;if(fe&&!Ce&&fe.mode!==F.default.TEXT_DISABLED&&z[re].setModeForTrackIdx(he,F.default.TEXT_SHOWING),fe&&fe.isFragmented&&!fe.isEmbedded)(function(Ve,Ke,st){if(!D[Ve])return;let ft=D[Ve].getConfig().fragmentedTracks;for(let St=0;St<ft.length;St++){let Bt=ft[St];if(Ke.lang===Bt.lang&&(Bt.id?Ke.id===Bt.id:Ke.index===Bt.index)){let Ht=N.getCurrentTrackFor(F.default.TEXT,Ve);(Bt.id?Ht.id!==Bt.id:Ht.index!==Bt.index)?(z[Ve].deleteCuesFromTrackIdx(st),D[Ve].setCurrentFragmentedTrackIdx(St)):st===-1&&ae.trigger(L.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:Ve,mediaType:F.default.TEXT})}}})(re,fe,ve);else if(fe&&!fe.isFragmented)(function(Ve,Ke){ae.trigger(L.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:Ke},{streamId:Ve,mediaType:F.default.TEXT})})(re,fe);else if(!fe&&ce){const Ve=ee(re);return void(isNaN(Ve)||je(re,Ve))}N.setTrack(fe)}function ee(re){const he=function(ke){return z[ke].getTextTrackInfos().filter((Ce,Ve)=>(Ce._indexToSelect=Ve,!!(Ce&&Ce.roles&&Ce.roles.length>0)&&te(Ce)))}(re);if(!he||he.length<=0)return NaN;const ve=N.getCurrentTrackFor(F.default.AUDIO,re);if(!ve)return NaN;const fe=he.find(ke=>ve.lang===ke.lang);return fe?fe._indexToSelect:NaN}function te(re){return!(!re||!re.roles||re.roles.length===0)&&re.roles.some(he=>he.schemeIdUri===F.default.DASH_ROLE_SCHEME_ID&&he.value===k.default.FORCED_SUBTITLE)}function Ae(re){return z[re].getCurrentTrackIdx()}function _e(){D={},z={},V={},ce=!0,ge=!1,we=!1}return K={addEmbeddedTrack:function(re,he){const ve=re.id;D[ve]&&D[ve].addEmbeddedTrack(he)},addMediaInfosToBuffer:function(re,he,ve){let fe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;const ke=re.id;D[ke]&&D[ke].addMediaInfos(he,ve,fe)},createTracks:function(re){const he=re.id;z[he]&&z[he].createTracks()},deactivateStream:function(re){if(!re)return;const he=re.id;D[he]&&D[he].resetMediaInfos(),z[he]&&z[he].deleteAllTextTracks()},enableForcedTextStreaming:function(re){return(0,Gt.checkParameterType)(re,"boolean"),de=re,!0},enableText:function(re,he){return(0,Gt.checkParameterType)(he,"boolean"),Oe()!==he&&(he&&je(re,V[re].lastEnabledIndex),he||(V[re].lastEnabledIndex=Ae(re),ge?je(re,-1):we=!0)),!0},getAllTracksAreDisabled:function(){return ce},getCurrentTrackIdx:Ae,getTextSourceBuffer:function(re){const he=re.id;if(D&&D[he])return D[he]},initialize:function(){ne=th(E).create({adapter:S,baseURLController:B}),ae.on(L.default.TEXT_TRACKS_QUEUE_INITIALIZED,me,K),ae.on(L.default.DVB_FONT_DOWNLOAD_FAILED,X,K),ae.on(L.default.DVB_FONT_DOWNLOAD_COMPLETE,J,K),ae.on(L.default.MEDIAINFO_UPDATED,xe,K),C.get().streaming.text.webvtt.customRenderingEnabled&&(ae.on(L.default.PLAYBACK_TIME_UPDATED,Ie,K),ae.on(L.default.PLAYBACK_SEEKING,Te,K))},initializeForStream:function(re){const he=re.id,ve=Jf(E).create({videoModel:G,settings:C,streamInfo:re});ve.initialize(),z[he]=ve;const fe=Oo(E).create({errHandler:x,adapter:S,dvbFonts:ne,manifestModel:I,mediaController:N,videoModel:G,textTracks:ve,vttParser:$,vttCustomRenderingParser:ie,ttmlParser:se,streamInfo:re,settings:C});fe.initialize(),D[he]=fe,V[he]={},V[he].lastEnabledIndex=-1},isTextEnabled:Oe,reset:function(){Object.keys(D).forEach(re=>{D[re].resetEmbedded(),D[re].reset()}),ne.reset(),_e(),ae.off(L.default.TEXT_TRACKS_QUEUE_INITIALIZED,me,K),ae.off(L.default.DVB_FONT_DOWNLOAD_FAILED,X,K),ae.off(L.default.DVB_FONT_DOWNLOAD_COMPLETE,J,K),ae.off(L.default.MEDIAINFO_UPDATED,xe,K),C.get().streaming.text.webvtt.customRenderingEnabled&&(ae.off(L.default.PLAYBACK_TIME_UPDATED,Ie,K),ae.off(L.default.PLAYBACK_SEEKING,Te,K))},setTextTrack:je,clearDataForStream:function(re){D[re]&&(D[re].resetEmbedded(),D[re].reset(),delete D[re]),z[re]&&(z[re].deleteAllTextTracks(),delete z[re]),V[re]&&delete V[re]}},de=!1,ge=!1,we=!1,$=eh(E).getInstance(),ie=zg(E).getInstance(),se=Di(E).getInstance(),ae=(0,oe.default)(E).getInstance(),U=(0,Be.default)(E).getInstance().getLogger(K),_e(),K}pd.__dashjs_factory_name="TextController";var nh=Ee.default.getClassFactory(pd);function yd(_){_=_||{};const E=this.context,S=(0,Be.default)(E).getInstance(),x=_.settings,I=(0,oe.default)(E).getInstance();let N,B,G,C,K,V;function D(){return navigator&&navigator.connection&&!isNaN(navigator.connection.downlink)&&navigator.connection.downlink>0?1e3*navigator.connection.downlink:NaN}function z(se,ae,ce,de){const ge=Math.pow(.5,ce/de.fast);se.fastEstimate=(1-ge)*ae+ge*se.fastEstimate;const we=Math.pow(.5,ce/de.slow);se.slowEstimate=(1-we)*ae+we*se.slowEstimate,se.totalWeight+=ce}function $(){N={},B={},G={},C={}}const ie={addEntry:function(se,ae){try{if(!(se&&ae&&ae.trace&&ae.trace.length))return;(function(ge){N[ge]=N[ge]||[],B[ge]=B[ge]||[],G[ge]=G[ge]||{fastEstimate:0,slowEstimate:0,totalWeight:0},C[ge]=C[ge]||{fastEstimate:0,slowEstimate:0,totalWeight:0}})(se);const ce=ae.tresponse.getTime()-ae.trequest.getTime()||1;let de=function(ge,we){return ge._fileLoaderType&&ge._fileLoaderType===F.default.FILE_LOADER_TYPES.FETCH?function(ne){const U=ne.trace.reduce((me,Ie)=>me+Ie.b[0],0),X=ne.trace.reduce((me,Ie)=>me+Ie.d,0);let J=NaN;return x.get().streaming.abr.throughput.useNetworkInformationApi.fetch&&(J=D()),isNaN(J)&&(J=Math.round(8*U/X)),{downloadedBytes:U,value:J,downloadTimeInMs:X}}(ge):function(ne,U){let X=NaN,J=NaN,me=!1;if(x.get().streaming.abr.throughput.useResourceTimingApi&&ne._resourceTimingValues)X=ne._resourceTimingValues.transferSize,J=ne._resourceTimingValues.responseEnd-ne._resourceTimingValues.responseStart,me=!0;else{if(ne.trace.length<=1)return{throughput:NaN,downloadTimeInMs:NaN};X=ne.trace.reduce((Te,xe)=>Te+xe.b[0],0)-ne.trace[0].b[0],J=Math.max(ne.trace.reduce((Te,xe)=>Te+xe.d,0)-ne.trace[0].d,1)}let Ie=NaN;if(!me&&x.get().streaming.abr.throughput.useNetworkInformationApi.xhr&&(Ie=D()),isNaN(Ie)){const Te=x.get().streaming.abr.throughput.useDeadTimeLatency?J:J+U;Ie=Math.round(8*X/Te)}return{downloadedBytes:X,value:Ie,downloadTimeInMs:J}}(ge,we)}(ae,ce);if(de.latencyInMs=ce,isNaN(de.value)||!isFinite(de.value))return;if(ae.cmsd){const ge=ae.cmsd.dynamic&&ae.cmsd.dynamic.etp?ae.cmsd.dynamic.etp:null;if(ge){const we=x.get().streaming.cmsd.abr.etpWeightRatio;we>0&&we<=1&&(de.value=de.value*(1-we)+ge*we)}}if(function(ge,we,ne){return x.get().streaming.abr.throughput.useResourceTimingApi&&ne._resourceTimingValues?ne._resourceTimingValues.transferSize===0&&ne._resourceTimingValues.decodedBodySize>0:!isNaN(we)&&(ge===F.default.VIDEO?we<x.get().streaming.cacheLoadThresholds[F.default.VIDEO]:ge===F.default.AUDIO?we<x.get().streaming.cacheLoadThresholds[F.default.AUDIO]:void 0)}(se,ae._tfinish.getTime()-ae.trequest.getTime(),ae))return void V.debug(`${se} Assuming segment ${ae.url} came from cache, ignoring it for throughput calculation`);V.debug(`Added throughput entry for ${se}: ${de.value} kbit/s`),de.serviceLocation=ae._serviceLocation,N[se].push(de),B[se].push({value:ce}),function(ge){N[ge].length>x.get().streaming.abr.throughput.sampleSettings.maxMeasurementsToKeep&&N[ge].shift(),B[ge].length>x.get().streaming.abr.throughput.sampleSettings.maxMeasurementsToKeep&&B[ge].shift()}(se),I.trigger(pe.default.THROUGHPUT_MEASUREMENT_STORED,{throughputValues:de}),ae.type!==Le.HTTPRequest.MPD_TYPE&&(z(G[se],de.value,x.get().streaming.abr.throughput.ewma.weightDownloadTimeMultiplicationFactor*de.downloadTimeInMs,K.bandwidthHalfLife),z(C[se],ce,1,K.latencyHalfLife))}catch(ce){V.error(ce)}},getThroughputDict:function(se){return se?N[se]:N},getEwmaThroughputDict:function(se){return se?G[se]:G},getEwmaLatencyDict:function(se){return se?C[se]:C},getEwmaHalfLife:function(){return K},getLatencyDict:function(se){return se?B[se]:B},reset:$};return V=S.getLogger(ie),K={bandwidthHalfLife:{fast:x.get().streaming.abr.throughput.ewma.throughputFastHalfLifeSeconds,slow:x.get().streaming.abr.throughput.ewma.throughputSlowHalfLifeSeconds},latencyHalfLife:{fast:x.get().streaming.abr.throughput.ewma.latencyFastHalfLifeCount,slow:x.get().streaming.abr.throughput.ewma.latencySlowHalfLifeCount}},$(),ie}yd.__dashjs_factory_name="ThroughputModel";var vd=Ee.default.getClassFactory(yd);function Ed(){const _=this.context,E=(0,oe.default)(_).getInstance();let S,x,I;function N(){performance.clearResourceTimings()}function B(ge){ge.metric!==j.HTTP_REQUEST||!ge.value||ge.value.type!==Le.HTTPRequest.MPD_TYPE&&(ge.value.type!==Le.HTTPRequest.MEDIA_SEGMENT_TYPE||ge.mediaType!==F.default.AUDIO&&ge.mediaType!==F.default.VIDEO)||S.addEntry(ge.mediaType,ge.value)}function G(ge,we){let ne,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,X=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN,J=null,me=S.getEwmaHalfLife(),Ie=null,Te=!0;switch(U||(U=I.get().streaming.abr.throughput.averageCalculationMode),ge){case F.default.THROUGHPUT_TYPES.BANDWIDTH:J=U===F.default.THROUGHPUT_CALCULATION_MODES.EWMA?S.getEwmaThroughputDict(we):S.getThroughputDict(we),Ie=me.bandwidthHalfLife,Te=!0,X=isNaN(X)?x.getIsDynamic()?I.get().streaming.abr.throughput.sampleSettings.live:I.get().streaming.abr.throughput.sampleSettings.vod:X;break;case F.default.THROUGHPUT_TYPES.LATENCY:J=U===F.default.THROUGHPUT_CALCULATION_MODES.EWMA?S.getEwmaLatencyDict(we):S.getLatencyDict(we),Ie=me.latencyHalfLife,Te=!1,X=isNaN(X)?I.get().streaming.abr.throughput.sampleSettings.averageLatencySampleAmount:X}if(!J||J.length===0)return NaN;switch(U){case F.default.THROUGHPUT_CALCULATION_MODES.ARITHMETIC_MEAN:return ne=C(J,X,ge),K(J,ne);case F.default.THROUGHPUT_CALCULATION_MODES.BYTE_SIZE_WEIGHTED_ARITHMETIC_MEAN:return ne=C(J,X,ge),V(J,ne);case F.default.THROUGHPUT_CALCULATION_MODES.DATE_WEIGHTED_ARITHMETIC_MEAN:return ne=C(J,X,ge),D(J,ne);case F.default.THROUGHPUT_CALCULATION_MODES.HARMONIC_MEAN:return ne=C(J,X,ge),z(J,ne);case F.default.THROUGHPUT_CALCULATION_MODES.BYTE_SIZE_WEIGHTED_HARMONIC_MEAN:return ne=C(J,X,ge),$(J,ne);case F.default.THROUGHPUT_CALCULATION_MODES.DATE_WEIGHTED_HARMONIC_MEAN:return ne=C(J,X,ge),ie(J,ne);case F.default.THROUGHPUT_CALCULATION_MODES.EWMA:return se(J,Ie,Te);case F.default.THROUGHPUT_CALCULATION_MODES.ZLEMA:return ne=C(J,X,ge),ae(J,ne)}}function C(ge,we,ne){if(ge){if(we>=ge.length)we=ge.length;else if(ne===F.default.THROUGHPUT_TYPES.BANDWIDTH&&I.get().streaming.abr.throughput.sampleSettings.enableSampleSizeAdjustment)for(let U=1;U<we;++U){const X=ge[ge.length-U].value/ge[ge.length-U-1].value;if((X>=I.get().streaming.abr.throughput.sampleSettings.increaseScale||X<=I.get().streaming.abr.throughput.sampleSettings.decreaseScale)&&(we+=1)===ge.length)break}}else we=0;return we}function K(ge,we){let ne=ge;return we!==0&&ne&&ne.length!==0?(ne=ne.slice(-we),ne.reduce((U,X)=>U+X.value,0)/ne.length):NaN}function V(ge,we){let ne=ge;if(we===0||!ne||ne.length===0)return NaN;ne=ne.slice(-we);let U=0;return ne.reduce((X,J)=>{let me=Math.sqrt(J.downloadedBytes);return U+=me,X+J.value*me},0)/U}function D(ge,we){let ne=ge;if(we===0||!ne||ne.length===0)return NaN;ne=ne.slice(-we);let U=0;return ne.reduce((X,J,me)=>{let Ie=me+1;return U+=Ie,X+J.value*Ie},0)/U}function z(ge,we){let ne=ge;if(we===0||!ne||ne.length===0)return NaN;ne=ne.slice(-we);const U=ne.reduce((X,J)=>X+1/J.value,0);return ne.length/U}function $(ge,we){let ne=ge;if(we===0||!ne||ne.length===0)return NaN;ne=ne.slice(-we);let U=0;const X=ne.reduce((J,me)=>{let Ie=Math.sqrt(me.downloadedBytes);return U+=Ie,J+1/me.value*Ie},0);return U/X}function ie(ge,we){let ne=ge;if(we===0||!ne||ne.length===0)return NaN;ne=ne.slice(-we);let U=0;const X=ne.reduce((J,me,Ie)=>{let Te=Ie+1;return U+=Te,J+1/me.value*Te},0);return U/X}function se(ge,we){let ne=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(!ge||ge.totalWeight<=0)return NaN;const U=ge.fastEstimate/(1-Math.pow(.5,ge.totalWeight/we.fast)),X=ge.slowEstimate/(1-Math.pow(.5,ge.totalWeight/we.slow));return ne?Math.min(U,X):Math.max(U,X)}function ae(ge,we){if(we===0||!ge||ge.length===0)return NaN;let ne=ge.slice(-we).map(me=>me.value),U=2/(ne.length+1),X=ne[ne.length-1],J=ne[ne.length-1];for(let me=0;me<ne.length;me++)X=U*ne[me]+(1-U)*X,J=U*X+(1-U)*J;return J}function ce(ge){let we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;const U=G(F.default.THROUGHPUT_TYPES.BANDWIDTH,ge,we,ne);return Math.round(U)}const de={getArithmeticMean:K,getAverageLatency:function(ge){let we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;const U=G(F.default.THROUGHPUT_TYPES.LATENCY,ge,we,ne);return Math.round(U)},getAverageThroughput:ce,getByteSizeWeightedArithmeticMean:V,getByteSizeWeightedHarmonicMean:$,getDateWeightedArithmeticMean:D,getDateWeightedHarmonicMean:ie,getEwma:se,getHarmonicMean:z,getRawThroughputData:function(ge){return ge?S.getThroughputDict(ge):[]},getSafeAverageThroughput:function(ge){let we=ce(ge,arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN);return isNaN(we)||(we*=I.get().streaming.abr.throughput.bandwidthSafetyFactor),we},getZlema:ae,initialize:function(){S=vd(_).create({settings:I}),E.on(pe.default.METRIC_ADDED,B,de),performance&&performance.addEventListener("resourcetimingbufferfull",N)},reset:function(){S.reset(),E.off(pe.default.METRIC_ADDED,B,de),performance&&performance.removeEventListener("resourcetimingbufferfull",N)},setConfig:function(ge){ge.settings&&(I=ge.settings),ge.playbackController&&(x=ge.playbackController)}};return de}Ed.__dashjs_factory_name="ThroughputController";var bd=Ee.default.getSingletonFactory(Ed);function qu(){const _="You must first call initialize() and set a source before calling this method",E="You must first call initialize() and set a valid source and view before calling this method",S="You must first call attachView() to set the video element before calling this method",x="You must first call attachSource() with a valid source before calling this method",I="MediaPlayer not initialized!",N=this.context,B=(0,oe.default)(N).getInstance();let G=(0,Q.default)(N).getInstance();const C=(0,Be.default)(N).getInstance({settings:G});let K,V,D,z,$,ie,se,ae,ce,de,ge,we,ne,U,X,J,me,Ie,Te,xe,Oe,je,ee,te,Ae,_e,re,he,ve,fe,ke,Ce,Ve,Ke,st,ft,St,Bt,Ht,hn,In;function Ot(){jt(null),Yt(null),z=null,X&&(X.reset(),X=null),J&&(J.reset(),J=null),Oe&&Oe.reset(),G.reset(),Ie&&(Ie.reset(),Ie=null)}function Zt(){return!!D&&!!St.getElement()}function cn(){return(0,Lu.getVersionString)()}function Nn(){if(!se)throw E;return ve.isPaused()}function Cn(){if(!se)throw E;return ve.getIsDynamic()}function We(Ne){const nt=_e&&_e.hasVideoTrack()?F.default.VIDEO:F.default.AUDIO;let _t=Ve.getCurrentDVRInfo(nt);return _t?pt(_t.range.start+Ne,_t):0}function pt(Ne,nt){let _t=ve.getOriginalLiveDelay();return Ne>nt.range.end-_t&&(Ne=nt.range.end-_t),Ne}function gt(){let Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(!se)throw E;let nt=yt().currentTime;return Ne!==""&&(nt=_e.getTimeRelativeToStreamId(nt,Ne)),nt}function vt(Ne){(0,Gt.checkParameterType)(Ne,"boolean"),ae=Ne}function sn(){Oe.restoreDefaultUTCTimingSources()}function Tn(){return Ve}function yt(){if(!St.getElement())throw S;return St.getElement()}function Yt(Ne){if(!$)throw I;St.setElement(Ne),Ne&&(Qt(),function(){if(J||typeof dashjs>"u")return;let nt=dashjs.MetricsReporting;typeof nt=="function"&&(J=nt(N).create().createMetricsReporting({debug:C,eventBus:B,mediaElement:yt(),adapter:Te,dashMetrics:Ve,mediaPlayerModel:xe,events:L.default,constants:F.default,metricsConstants:j}))}(),function(){if(me||typeof dashjs>"u")return;let nt=dashjs.MssHandler;typeof nt=="function"&&(W.extend(nt.errors),me=nt(N).create({eventBus:B,mediaPlayerModel:xe,dashMetrics:Ve,manifestModel:Ke,playbackController:ve,streamController:_e,protectionController:X,baseURLController:ee,errHandler:je,events:L.default,constants:F.default,debug:C,initSegmentType:Le.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:Mo,ISOBoxer:yo,settings:G}))}(),_e&&_e.switchToVideoElement(ce)),se&&at(),Et(ce)}function tn(Ne){if(!ie)throw _;let nt=_e.getActiveStreamInfo();return nt?U.getTracksFor(Ne,nt.id).filter(_t=>!X||X.areKeyIdsUsable(_t.normalizedKeyIds)):[]}function jt(Ne){let nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!$)throw I;typeof Ne=="string"&&Bt.initialize(Ne),nt==null&&(nt=NaN),isNaN(nt)||(nt=Math.max(0,nt)),ce=nt,D=Ne,(ie||se)&&at(),Zt()&&Et(ce)}function on(){if(!ie)throw _;let Ne=_e.getActiveStreamInfo();return Ne?_e.getStreamById(Ne.id):null}function at(){se=!1,ie=!1,Te.reset(),_e.reset(),he.reset(),Ce.reset(),ve.reset(),fe.reset(),ke.reset(),de.reset(),ge.reset(),U.reset(),hn.reset(),X&&(G.get().streaming.protection.keepProtectionMediaKeys?X.stop():(X.reset(),X=null,Qt())),re.reset(),st.reset(),ft.reset()}function At(){return Xa(N).create({debug:C,errHandler:je,dashMetrics:Ve,mediaPlayerModel:xe,mssHandler:me,settings:G})}function Qt(){if(X)return X;if(typeof dashjs>"u")return null;let Ne=dashjs.Protection;if(typeof Ne=="function"){let nt=Ne(N).create();return L.default.extend(Ne.events),pe.default.extend(Ne.events,{publicOnly:!0}),W.extend(Ne.errors),X=nt.createProtectionSystem({debug:C,errHandler:je,videoModel:St,customParametersModel:Oe,capabilities:te,eventBus:B,events:L.default,BASE64:Mo,constants:F.default,cmcdModel:st,settings:G}),te||(te=(0,Hc.default)(N).getInstance()),te.setProtectionController(X),X}return null}function nn(){if(!$)throw I;if(Ie)return Ie;if(typeof dashjs>"u")return null;let Ne=dashjs.OfflineController;if(typeof Ne=="function"){L.default.extend(Ne.events),pe.default.extend(Ne.events,{publicOnly:!0}),W.extend(Ne.errors);const nt=At(),_t=Ac(N).create();return _t.setConfig({manifestModel:Ke,adapter:Te,manifestLoader:nt,errHandler:je,contentSteeringController:ke}),Ie=Ne(N).create({debug:C,manifestUpdater:_t,baseURLController:ee,manifestLoader:nt,manifestModel:Ke,mediaPlayerModel:xe,abrController:de,playbackController:ve,adapter:Te,errHandler:je,dashMetrics:Ve,timelineConverter:ne,segmentBaseController:hn,schemeLoaderFactory:we,eventBus:B,events:L.default,errors:W,constants:F.default,settings:G,dashConstants:k.default,urlUtils:dn(N).getInstance()}),Ie}return null}function Et(){let Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;Ie&&Ie.resetRecords(),!ie&&D&&(ie=!0,V.info("Streaming Initialized"),function(){const nt=At();_e||(_e=Dc(N).getInstance()),re||(re=nh(N).create({errHandler:je,manifestModel:Ke,adapter:Te,mediaController:U,baseURLController:ee,videoModel:St,settings:G})),Ae.setConfig({capabilities:te,customParametersModel:Oe,adapter:Te,settings:G,protectionController:X,manifestModel:Ke,errHandler:je}),_e.setConfig({capabilities:te,capabilitiesFilter:Ae,manifestLoader:nt,manifestModel:Ke,mediaPlayerModel:xe,customParametersModel:Oe,protectionController:X,textController:re,adapter:Te,dashMetrics:Ve,errHandler:je,timelineConverter:ne,videoModel:St,playbackController:ve,serviceDescriptionController:fe,contentSteeringController:ke,abrController:de,throughputController:ge,mediaController:U,settings:G,baseURLController:ee,uriFragmentModel:Bt,segmentBaseController:hn}),he.setConfig({settings:G,playbackController:ve,streamController:_e,videoModel:St,timelineConverter:ne,adapter:Te}),ve.setConfig({streamController:_e,serviceDescriptionController:fe,dashMetrics:Ve,adapter:Te,videoModel:St,timelineConverter:ne,settings:G}),Ce.setConfig({streamController:_e,playbackController:ve,mediaPlayerModel:xe,videoModel:St,settings:G}),ge.setConfig({settings:G,playbackController:ve}),de.setConfig({streamController:_e,capabilities:te,domStorage:Ht,mediaPlayerModel:xe,customParametersModel:Oe,throughputController:ge,cmsdModel:ft,dashMetrics:Ve,adapter:Te,videoModel:St,settings:G}),st.setConfig({abrController:de,dashMetrics:Ve,playbackController:ve,serviceDescriptionController:fe,throughputController:ge}),In.setConfig({serviceDescriptionController:fe}),ft.setConfig({}),U.initialize(),ge.initialize(),de.initialize(),_e.initialize(ae,z),re.initialize(),he.initialize(),Ce.initialize(),st.initialize(ae),ft.initialize(),ke.initialize(),hn.initialize()}(),typeof D=="string"?_e.load(D,Ne):_e.loadWithManifest(D,Ne)),!se&&Zt()&&(se=!0,B.trigger(pe.default.PLAYBACK_INITIALIZED),V.info("Playback Initialized"))}return K={addABRCustomRule:function(Ne,nt,_t){Oe.addAbrCustomRule(Ne,nt,_t)},addRequestInterceptor:function(Ne){Oe.addRequestInterceptor(Ne)},addResponseInterceptor:function(Ne){Oe.addResponseInterceptor(Ne)},addUTCTimingSource:function(Ne,nt){Oe.addUTCTimingSource(Ne,nt)},attachProtectionController:function(Ne){X=Ne},attachSource:jt,attachTTMLRenderingDiv:function(Ne){if(!St.getElement())throw S;St.setTTMLRenderingDiv(Ne)},attachView:Yt,attachVttRenderingDiv:function(Ne){if(!St.getElement())throw S;St.setVttRenderingDiv(Ne)},clearDefaultUTCTimingSources:function(){Oe.clearDefaultUTCTimingSources()},convertToTimeCode:function(Ne){Ne=Math.max(Ne,0);let nt=Math.floor(Ne/3600),_t=Math.floor(Ne%3600/60),rt=Math.floor(Ne%3600%60);return(nt===0?"":nt<10?"0"+nt.toString()+":":nt.toString()+":")+(_t<10?"0"+_t.toString():_t.toString())+":"+(rt<10?"0"+rt.toString():rt.toString())},destroy:function(){Ot(),Ee.default.deleteSingletonInstances(N)},duration:function(){if(!se)throw E;let Ne=yt().duration;if(ve.getIsDynamic()){const nt=_e&&_e.hasVideoTrack()?F.default.VIDEO:F.default.AUDIO;let _t=Ve.getCurrentDVRInfo(nt);Ne=_t?_t.range.end-_t.range.start:0}return Ne},enableForcedTextStreaming:function(Ne){return!(!_e.getActiveStreamInfo()||!re)&&re.enableForcedTextStreaming(Ne)},enableText:function(Ne){const nt=_e.getActiveStreamInfo();return!(!nt||!re)&&re.enableText(nt.id,Ne)},extend:function(Ne,nt,_t){Ee.default.extend(Ne,nt,_t,N)},formatUTC:function(Ne,nt,_t){let rt=arguments.length>3&&arguments[3]!==void 0&&arguments[3];const Ft=new Date(1e3*Ne),Vt=Ft.toLocaleDateString(nt),_n=Ft.toLocaleTimeString(nt,{hour12:_t});return rt?_n+" "+Vt:_n},getABRCustomRules:function(){return Oe.getAbrCustomRules()},getActiveStream:on,getAutoPlay:function(){return ae},getAvailableBaseUrls:function(){const Ne=Ke.getValue();return Ne?ee.getBaseUrls(Ne):[]},getAvailableLocations:function(){const Ne=Ke.getValue();if(!Ne)return[];const nt=Te.getLocation(Ne),_t=ke.getSynthesizedLocationElements(nt);return nt.concat(_t)},getAverageLatency:function(){let Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:F.default.VIDEO,nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,_t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;return ge?ge.getAverageLatency(Ne,nt,_t):0},getAverageThroughput:function(){let Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:F.default.VIDEO,nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,_t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;return ge?ge.getAverageThroughput(Ne,nt,_t):0},getBufferLength:function(Ne){const nt=[F.default.VIDEO,F.default.AUDIO,F.default.TEXT];if(Ne)return nt.indexOf(Ne)!==-1?Tn().getCurrentBufferLevel(Ne)||NaN:(V.warn("getBufferLength requested for invalid type"),NaN);{const _t=nt.map(rt=>tn(rt).length>0?Tn().getCurrentBufferLevel(rt):Number.MAX_VALUE).reduce((rt,Ft)=>Math.min(rt,Ft));return _t===Number.MAX_VALUE?NaN:_t}},getCurrentLiveLatency:function(){if(!$)throw I;return se?ve.getCurrentLiveLatency():NaN},getCurrentRepresentationForType:function(Ne){if(!ie)throw _;if(Ne!==F.default.IMAGE&&Ne!==F.default.VIDEO&&Ne!==F.default.AUDIO)return null;const nt=on();if(!nt)return null;if(Ne===F.default.IMAGE){const _t=nt.getThumbnailController();return _t?_t.getCurrentTrack():-1}return nt.getCurrentRepresentationForType(Ne)},getCurrentSteeringResponseData:function(){if(ke)return ke.getCurrentSteeringResponseData()},getCurrentTextTrackIndex:function(){let Ne=NaN;const nt=_e.getActiveStreamInfo();if(nt&&re)return Ne=re.getCurrentTrackIdx(nt.id),Ne},getCurrentTrackFor:function(Ne){if(!ie)throw _;let nt=_e.getActiveStreamInfo();return nt?U.getCurrentTrackFor(Ne,nt.id):null},getDashAdapter:function(){return Te},getDashMetrics:Tn,getDebug:function(){return C},getDvrSeekOffset:We,getDvrWindow:function(){if(!se)throw E;const Ne=_e&&_e.hasVideoTrack()?F.default.VIDEO:F.default.AUDIO;let nt=Ve.getCurrentDVRInfo(Ne);if(!nt)return{};let _t=0;const rt=ve.getIsDynamic();return rt&&(_t=nt.manifestInfo.availableFrom.getTime()/1e3),{start:nt.range.start,end:nt.range.end,startAsUtc:rt?_t+nt.range.start:NaN,endAsUtc:rt?_t+nt.range.end:NaN,size:nt.range.end-nt.range.start}},getInitialMediaSettingsFor:function(Ne){if(!$)throw I;return U.getInitialSettings(Ne)},getLowLatencyModeEnabled:function(){if(!se)throw E;return ve.getLowLatencyModeEnabled()},getManifest:function(){return Ke.getValue()},getOfflineController:function(){return nn()},getPlaybackRate:function(){return yt().playbackRate},getProtectionController:function(){return Qt()},getRawThroughputData:function(){let Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:F.default.VIDEO;return ge?ge.getRawThroughputData(Ne):[]},getRepresentationsByType:function(Ne){let nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!ie)throw _;let _t=nt?_e.getStreamById(nt):on();return _t?_t.getRepresentationsByType(Ne):[]},getSafeAverageThroughput:function(){let Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:F.default.VIDEO,nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,_t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;return ge?ge.getSafeAverageThroughput(Ne,nt,_t):0},getSettings:function(){return G.get()},getSource:function(){if(!D)throw x;return D},getStreamsFromManifest:function(Ne){if(!ie)throw _;return Te.getStreamsInfo(Ne)},getTTMLRenderingDiv:function(){return St?St.getTTMLRenderingDiv():null},getTargetLiveDelay:function(){if(!se)throw E;return ve.getOriginalLiveDelay()},getTracksFor:tn,getTracksForTypeFromManifest:function(Ne,nt,_t){if(!ie)throw _;return(_t=_t||Te.getStreamsInfo(nt,1)[0])?Te.getAllMediaInfoForType(_t,Ne,nt):[]},getVersion:cn,getVideoElement:yt,getVolume:function(){return yt().volume},getXHRWithCredentialsForType:function(Ne){return Oe.getXHRWithCredentialsForType(Ne)},initialize:function(Ne,nt,_t){let rt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;te||(te=(0,Hc.default)(N).getInstance(),te.setConfig({settings:G,protectionController:X})),je||(je=$c(N).getInstance()),te.supportsMediaSource()?($||($=!0,ne=Pg(N).getInstance(),ge||(ge=bd(N).getInstance()),de||(de=vl(N).getInstance()),we||(we=rf(N).getInstance()),ve||(ve=Ye(N).getInstance()),U||(U=So(N).getInstance()),_e||(_e=Dc(N).getInstance()),he||(he=Ng(N).getInstance()),Ce||(Ce=bo(N).getInstance()),fe||(fe=lu(N).getInstance()),ke||(ke=ru(N).getInstance()),Ae||(Ae=vs(N).getInstance()),Te=Ff(N).getInstance(),Ke=Zi(N).getInstance(),st=el(N).getInstance(),ft=Qd(N).getInstance(),In=ef(N).getInstance(),Ve=od(N).getInstance({settings:G}),Ht=$r(N).getInstance({settings:G}),Te.setConfig({constants:F.default,cea608parser:new Re,errHandler:je,BASE64:Mo}),ee||(ee=Dg(N).create()),ee.setConfig({adapter:Te,contentSteeringController:ke}),fe.setConfig({adapter:Te}),hn||(hn=hi(N).getInstance({dashMetrics:Ve,mediaPlayerModel:xe,errHandler:je,baseURLController:ee,events:L.default,eventBus:B,debug:C,boxParser:rl(N).getInstance(),errors:W})),U.setConfig({domStorage:Ht,settings:G,mediaPlayerModel:xe,customParametersModel:Oe,videoModel:St}),xe.setConfig({playbackController:ve,serviceDescriptionController:fe}),ke.setConfig({adapter:Te,errHandler:je,dashMetrics:Ve,mediaPlayerModel:xe,manifestModel:Ke,serviceDescriptionController:fe,throughputController:ge,eventBus:B}),sn(),vt(_t===void 0||_t),nn()),Ne&&Yt(Ne),nt&&jt(nt,rt),V.info("[dash.js "+cn()+"] MediaPlayer has been initialized")):je.error(new Pe.default(W.CAPABILITY_MEDIASOURCE_ERROR_CODE,W.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},isDynamic:Cn,isMuted:function(){return yt().muted},isPaused:Nn,isReady:Zt,isSeeking:function(){if(!se)throw E;return ve.isSeeking()},isTextEnabled:function(){const Ne=_e.getActiveStreamInfo();return!(!Ne||!re)&&re.isTextEnabled(Ne)},off:function(Ne,nt,_t){B.off(Ne,nt,_t)},on:function(Ne,nt,_t,rt){B.on(Ne,nt,_t,rt)},pause:function(){if(!se)throw E;ve.pause()},play:function(){if(!se)throw E;(!ae||Nn()&&se)&&ve.play(!0)},preload:function(){if(!St.getElement()&&!ie){if(!D)throw x;Et(ce)}},provideThumbnail:function(Ne,nt){if(typeof nt!="function")return;if(Ne<0)return void nt(null);const _t=ve.getIsDynamic()?We(Ne):Ne,rt=_e.getStreamForTime(_t);if(rt===null)return void nt(null);const Ft=rt.getThumbnailController();if(Ft)return Ft.provide(_t,nt);nt(null)},refreshManifest:function(Ne){if(!$)throw I;if(!Zt())return Ne(null,x);let nt=this;if(typeof Ne=="function"){const _t=function(rt){B.off(L.default.INTERNAL_MANIFEST_LOADED,_t,nt),rt.error?Ne(null,rt.error):Ne(rt.manifest)};B.on(L.default.INTERNAL_MANIFEST_LOADED,_t,nt)}_e.refreshManifest()},registerCustomCapabilitiesFilter:function(Ne){Oe.registerCustomCapabilitiesFilter(Ne)},registerLicenseRequestFilter:function(Ne){Oe.registerLicenseRequestFilter(Ne)},registerLicenseResponseFilter:function(Ne){Oe.registerLicenseResponseFilter(Ne)},removeABRCustomRule:function(Ne){Oe.removeAbrCustomRule(Ne)},removeAllABRCustomRule:function(){Oe.removeAllAbrCustomRule()},removeRequestInterceptor:function(Ne){Oe.removeRequestInterceptor(Ne)},removeResponseInterceptor:function(Ne){Oe.removeResponseInterceptor(Ne)},removeUTCTimingSource:function(Ne,nt){Oe.removeUTCTimingSource(Ne,nt)},reset:Ot,resetCustomInitialTrackSelectionFunction:function(){Oe.resetCustomInitialTrackSelectionFunction(null)},resetSettings:function(){G.reset()},restoreDefaultUTCTimingSources:sn,retrieveManifest:function(Ne,nt){let _t=At(),rt=this;const Ft=function(Vt){Vt.error?nt(null,Vt.error):nt(Vt.manifest),B.off(L.default.INTERNAL_MANIFEST_LOADED,Ft,rt),_t.reset()};B.on(L.default.INTERNAL_MANIFEST_LOADED,Ft,rt),Bt.initialize(Ne),_t.load(Ne)},seek:function(Ne){if(!se)throw E;if((0,Gt.checkParameterType)(Ne,"number"),isNaN(Ne))throw F.default.BAD_ARGUMENT_ERROR;Ne<0&&(Ne=0);let nt=ve.getIsDynamic()?We(Ne):Ne;const _t=yt();!ve.getIsDynamic()&&_t.duration&&(nt=Math.min(_t.duration,nt)),ve.seek(nt,!1,!1,!0)},seekToOriginalLive:function(){se&&Cn()&&ve.seekToOriginalLive()},seekToPresentationTime:function(Ne){if(!se)throw E;if((0,Gt.checkParameterType)(Ne,"number"),isNaN(Ne))throw F.default.BAD_ARGUMENT_ERROR;Ne<0&&(Ne=0);const nt=yt();if(!ve.getIsDynamic()&&nt.duration&&(Ne=Math.min(nt.duration,Ne)),ve.getIsDynamic()){const _t=_e&&_e.hasVideoTrack()?F.default.VIDEO:F.default.AUDIO;let rt=Ve.getCurrentDVRInfo(_t);if(!rt)return;(Ne=pt(Ne,rt))<rt.range.start&&(Ne=rt.range.start)}ve.seek(Ne,!1,!1,!0)},setAutoPlay:vt,setConfig:function(Ne){Ne&&(Ne.capabilities&&(te=Ne.capabilities),Ne.capabilitiesFilter&&(Ae=Ne.capabilitiesFilter),Ne.streamController&&(_e=Ne.streamController),Ne.textController&&(re=Ne.textController),Ne.gapController&&(he=Ne.gapController),Ne.throughputController&&(ge=Ne.throughputController),Ne.playbackController&&(ve=Ne.playbackController),Ne.serviceDescriptionController&&(fe=Ne.serviceDescriptionController),Ne.contentSteeringController&&(ke=Ne.contentSteeringController),Ne.clientDataReportingController&&(In=Ne.clientDataReportingController),Ne.catchupController&&(Ce=Ne.catchupController),Ne.mediaPlayerModel&&(xe=Ne.mediaPlayerModel),Ne.customParametersModel&&(Oe=Ne.customParametersModel),Ne.abrController&&(de=Ne.abrController),Ne.schemeLoaderFactory&&(we=Ne.schemeLoaderFactory),Ne.mediaController&&(U=Ne.mediaController),Ne.settings&&(G=Ne.settings),Ne.dashMetrics&&(Ve=Ne.dashMetrics))},setCurrentTrack:function(Ne){let nt=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!ie)throw _;!X||X.areKeyIdsUsable(Ne.normalizedKeyIds)?U.setTrack(Ne,{noSettingsSave:nt}):V.error(`Can not switch to track with index ${Ne.index} because key is not usable`)},setCustomInitialTrackSelectionFunction:function(Ne){Oe.setCustomInitialTrackSelectionFunction(Ne)},setInitialMediaSettingsFor:function(Ne,nt){if(!$)throw I;let _t=function(rt){const Ft=G.get().streaming.defaultSchemeIdUri;let Vt={};function _n(An,kn,nr){let yr={};if(kn){if(kn instanceof Array)throw"Array type not supported for settings!";return kn instanceof Object?(yr.schemeIdUri=kn.schemeIdUri?kn.schemeIdUri:"",yr.value=kn.value?kn.value:""):(yr.schemeIdUri=nr,yr.value=kn,V.warn("No schemeIdUri provided for "+An+', using default "'+nr+'"')),yr}return null}return rt.id!==void 0&&(Vt.id=rt.id),rt.lang!==void 0&&(Vt.lang=rt.lang),isNaN(rt.index)||(Vt.index=rt.index),rt.viewpoint!==void 0&&(Vt.viewpoint=_n("viewpoint",rt.viewpoint,Ft.viewpoint)),rt.audioChannelConfiguration!==void 0&&(Vt.audioChannelConfiguration=_n("audioChannelConfiguration",rt.audioChannelConfiguration,Ft.audioChannelConfiguration)),rt.role!==void 0&&(Vt.role=_n("role",rt.role,Ft.role),Vt.role.schemeIdUri===F.default.DASH_ROLE_SCHEME_ID&&Vt.role.value==="Main"&&(Vt.role.value=k.default.MAIN)),rt.accessibility!==void 0&&(Vt.accessibility=_n("accessibility",rt.accessibility,Ft.accessibility)),Vt}(nt);U.setInitialSettings(Ne,_t)},setMute:function(Ne){(0,Gt.checkParameterType)(Ne,"boolean"),yt().muted=Ne},setPlaybackRate:function(Ne){yt().playbackRate=Ne},setProtectionData:function(Ne){z=Ne,_e&&_e.setProtectionData(z)},setRepresentationForTypeById:function(Ne,nt){let _t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(Ne!==F.default.IMAGE&&Ne!==F.default.VIDEO&&Ne!==F.default.AUDIO)return;if(!ie)throw _;const rt=on();if(rt)if(Ne===F.default.IMAGE){const Ft=rt.getThumbnailController();Ft&&Ft.setTrackById(nt)}else{const Ft=rt.getRepresentationForTypeById(Ne,nt);Ft&&de.setPlaybackQuality(Ne,_e.getActiveStreamInfo(),Ft,{forceReplace:_t})}},setRepresentationForTypeByIndex:function(Ne,nt){let _t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(Ne!==F.default.IMAGE&&Ne!==F.default.VIDEO&&Ne!==F.default.AUDIO)return;if(!ie)throw _;const rt=on();if(rt)if(Ne===F.default.IMAGE){const Ft=rt.getThumbnailController();Ft&&Ft.setTrackByIndex(nt)}else{const Ft=rt.getRepresentationForTypeByIndex(Ne,nt);Ft&&de.setPlaybackQuality(Ne,_e.getActiveStreamInfo(),Ft,{forceReplace:_t})}},setTextTrack:function(Ne){if(!se)throw E;const nt=_e.getActiveStreamInfo();nt&&re&&re.setTextTrack(nt.id,Ne)},setVolume:function(Ne){if(typeof Ne!="number"||isNaN(Ne)||Ne<0||Ne>1)throw F.default.BAD_ARGUMENT_ERROR;yt().volume=Ne},setXHRWithCredentialsForType:function(Ne,nt){Oe.setXHRWithCredentialsForType(Ne,nt)},time:gt,timeAsUTC:function(){if(!se)throw E;if(!ve.getIsDynamic()||gt()<0)return NaN;const Ne=_e&&_e.hasVideoTrack()?F.default.VIDEO:F.default.AUDIO;let nt,_t,rt=Ve.getCurrentDVRInfo(Ne);return rt?(nt=rt.manifestInfo.availableFrom.getTime()/1e3,_t=nt+gt(),_t):0},timeInDvrWindow:function(){if(!se)throw E;if(!ve.getIsDynamic())return gt();let Ne=yt().currentTime;const nt=_e&&_e.hasVideoTrack()?F.default.VIDEO:F.default.AUDIO;let _t=Ve.getCurrentDVRInfo(nt);return Ne=_t===null||Ne===0?0:Math.max(0,Ne-_t.range.start),Ne},trigger:function(Ne,nt,_t){B.trigger(Ne,nt,_t)},triggerSteeringRequest:function(){if(ke)return ke.loadSteeringData()},unregisterCustomCapabilitiesFilter:function(Ne){Oe.unregisterCustomCapabilitiesFilter(Ne)},unregisterLicenseRequestFilter:function(Ne){Oe.unregisterLicenseRequestFilter(Ne)},unregisterLicenseResponseFilter:function(Ne){Oe.unregisterLicenseResponseFilter(Ne)},updateSettings:function(Ne){G.update(Ne)},updateSource:function(Ne){D=Ne,_e.load(D)}},V=C.getLogger(K),$=!1,se=!1,ie=!1,ae=!0,ce=NaN,X=null,Ie=null,z=null,Te=null,hn=null,L.default.extend(pe.default),xe=Ks(N).getInstance(),Oe=(0,Zl.default)(N).getInstance(),St=La(N).getInstance(),Bt=Tu(N).getInstance(),K}qu.__dashjs_factory_name="MediaPlayer";const Il=Ee.default.getClassFactory(qu);Il.events=pe.default,Il.errors=W,Ee.default.updateClassFactory(qu.__dashjs_factory_name,Il);var Td=Il},1191:function(o,e,t){t.r(e);var n=t(7252);class r extends n.default{constructor(){super(),this.AST_IN_FUTURE="astInFuture",this.BASE_URLS_UPDATED="baseUrlsUpdated",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",this.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",this.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",this.DYNAMIC_TO_STATIC="dynamicToStatic",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADING_STARTED="manifestLoadingStarted",this.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.NEW_TRACK_SELECTED="newTrackSelected",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.STREAM_INITIALIZING="streamInitializing",this.STREAM_UPDATED="streamUpdated",this.STREAM_ACTIVATED="streamActivated",this.STREAM_DEACTIVATED="streamDeactivated",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.CUE_ENTER="cueEnter",this.CUE_EXIT="cueExit",this.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.CAN_PLAY_THROUGH="canPlayThrough",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_INITIALIZED="playbackInitialized",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_LOADED_DATA="playbackLoadedData",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",this.EVENT_MODE_ON_START="eventModeOnStart",this.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",this.CONFORMANCE_VIOLATION="conformanceViolation",this.REPRESENTATION_SWITCH="representationSwitch",this.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",this.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",this.INBAND_PRFT="inbandPrft",this.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",this.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming"}}let i=new r;e.default=i},5212:function(o,e,t){t.r(e),e.default={STREAM:"stream",VIDEO:"video",AUDIO:"audio",TEXT:"text",MUXED:"muxed",IMAGE:"image",STPP:"stpp",TTML:"ttml",VTT:"vtt",WVTT:"wvtt",CONTENT_STEERING:"contentSteering",LIVE_CATCHUP_MODE_DEFAULT:"liveCatchupModeDefault",LIVE_CATCHUP_MODE_LOLP:"liveCatchupModeLoLP",MOVING_AVERAGE_SLIDING_WINDOW:"slidingWindow",MOVING_AVERAGE_EWMA:"ewma",BAD_ARGUMENT_ERROR:"Invalid Arguments",MISSING_CONFIG_ERROR:"Missing config parameter(s)",TRACK_SWITCH_MODE_ALWAYS_REPLACE:"alwaysReplace",TRACK_SWITCH_MODE_NEVER_REPLACE:"neverReplace",TRACK_SELECTION_MODE_FIRST_TRACK:"firstTrack",TRACK_SELECTION_MODE_HIGHEST_BITRATE:"highestBitrate",TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:"highestEfficiency",TRACK_SELECTION_MODE_WIDEST_RANGE:"widestRange",CMCD_QUERY_KEY:"CMCD",CMCD_MODE_QUERY:"query",CMCD_MODE_HEADER:"header",CMCD_AVAILABLE_KEYS:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"],CMCD_V2_AVAILABLE_KEYS:["msd","ltc"],CMCD_AVAILABLE_REQUESTS:["segment","mpd","xlink","steering","other"],INITIALIZE:"initialize",TEXT_SHOWING:"showing",TEXT_HIDDEN:"hidden",TEXT_DISABLED:"disabled",ACCESSIBILITY_CEA608_SCHEME:"urn:scte:dash:cc:cea-608:2015",CC1:"CC1",CC3:"CC3",UTF8:"utf-8",SCHEME_ID_URI:"schemeIdUri",START_TIME:"starttime",SERVICE_DESCRIPTION_DVB_LL_SCHEME:"urn:dvb:dash:lowlatency:scope:2019",SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME:"urn:dvb:dash:lowlatency:critical:2019",CTA_5004_2023_SCHEME:"urn:mpeg:dash:cta-5004:2023",THUMBNAILS_SCHEME_ID_URIS:["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"],FONT_DOWNLOAD_DVB_SCHEME:"urn:dvb:dash:fontdownload:2014",COLOUR_PRIMARIES_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:ColourPrimaries",URL_QUERY_INFO_SCHEME:"urn:mpeg:dash:urlparam:2014",EXT_URL_QUERY_INFO_SCHEME:"urn:mpeg:dash:urlparam:2016",MATRIX_COEFFICIENTS_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:MatrixCoefficients",TRANSFER_CHARACTERISTICS_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:TransferCharacteristics",HDR_METADATA_FORMAT_SCHEME_ID_URI:"urn:dvb:dash:hdr-dmi",HDR_METADATA_FORMAT_VALUES:{ST2094_10:"ST2094-10",SL_HDR2:"SL-HDR2",ST2094_40:"ST2094-40"},MEDIA_CAPABILITIES_API:{COLORGAMUT:{SRGB:"srgb",P3:"p3",REC2020:"rec2020"},TRANSFERFUNCTION:{SRGB:"srgb",PQ:"pq",HLG:"hlg"},HDR_METADATATYPE:{SMPTE_ST_2094_10:"smpteSt2094-10",SLHDR2:"slhdr2",SMPTE_ST_2094_40:"smpteSt2094-40"}},XML:"XML",ARRAY_BUFFER:"ArrayBuffer",DVB_REPORTING_URL:"dvb:reportingUrl",DVB_PROBABILITY:"dvb:probability",OFF_MIMETYPE:"application/font-sfnt",WOFF_MIMETYPE:"application/font-woff",VIDEO_ELEMENT_READY_STATES:{HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},FILE_LOADER_TYPES:{FETCH:"fetch_loader",XHR:"xhr_loader"},THROUGHPUT_TYPES:{LATENCY:"throughput_type_latency",BANDWIDTH:"throughput_type_bandwidth"},THROUGHPUT_CALCULATION_MODES:{EWMA:"throughputCalculationModeEwma",ZLEMA:"throughputCalculationModeZlema",ARITHMETIC_MEAN:"throughputCalculationModeArithmeticMean",BYTE_SIZE_WEIGHTED_ARITHMETIC_MEAN:"throughputCalculationModeByteSizeWeightedArithmeticMean",DATE_WEIGHTED_ARITHMETIC_MEAN:"throughputCalculationModeDateWeightedArithmeticMean",HARMONIC_MEAN:"throughputCalculationModeHarmonicMean",BYTE_SIZE_WEIGHTED_HARMONIC_MEAN:"throughputCalculationModeByteSizeWeightedHarmonicMean",DATE_WEIGHTED_HARMONIC_MEAN:"throughputCalculationModeDateWeightedHarmonicMean"},LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE:{MOOF_PARSING:"lowLatencyDownloadTimeCalculationModeMoofParsing",DOWNLOADED_DATA:"lowLatencyDownloadTimeCalculationModeDownloadedData",AAST:"lowLatencyDownloadTimeCalculationModeAast"},RULES_TYPES:{QUALITY_SWITCH_RULES:"qualitySwitchRules",ABANDON_FRAGMENT_RULES:"abandonFragmentRules"},QUALITY_SWITCH_RULES:{BOLA_RULE:"BolaRule",THROUGHPUT_RULE:"ThroughputRule",INSUFFICIENT_BUFFER_RULE:"InsufficientBufferRule",SWITCH_HISTORY_RULE:"SwitchHistoryRule",DROPPED_FRAMES_RULE:"DroppedFramesRule",LEARN_TO_ADAPT_RULE:"L2ARule",LOL_PLUS_RULE:"LoLPRule"},ABANDON_FRAGMENT_RULES:{ABANDON_REQUEST_RULE:"AbandonRequestsRule"},ID3_SCHEME_ID_URI:"https://aomedia.org/emsg/ID3",COMMON_ACCESS_TOKEN_HEADER:"common-access-token",DASH_ROLE_SCHEME_ID:"urn:mpeg:dash:role:2011",CODEC_FAMILIES:{MP3:"mp3",AAC:"aac",AC3:"ac3",EC3:"ec3",DTSX:"dtsx",DTSC:"dtsc",AVC:"avc",HEVC:"hevc"}}},2861:function(o,e,t){t.r(e),e.default={CLEARKEY_KEYSTEM_STRING:"org.w3.clearkey",WIDEVINE_KEYSTEM_STRING:"com.widevine.alpha",PLAYREADY_KEYSTEM_STRING:"com.microsoft.playready",PLAYREADY_RECOMMENDATION_KEYSTEM_STRING:"com.microsoft.playready.recommendation",WIDEVINE_UUID:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",PLAYREADY_UUID:"9a04f079-9840-4286-ab92-e65be0885f95",CLEARKEY_UUID:"e2719d58-a985-b3c9-781a-b030af78d30e",W3C_CLEARKEY_UUID:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",INITIALIZATION_DATA_TYPE_CENC:"cenc",INITIALIZATION_DATA_TYPE_KEYIDS:"keyids",INITIALIZATION_DATA_TYPE_WEBM:"webm",ENCRYPTION_SCHEME_CENC:"cenc",ENCRYPTION_SCHEME_CBCS:"cbcs",MEDIA_KEY_MESSAGE_TYPES:{LICENSE_REQUEST:"license-request",LICENSE_RENEWAL:"license-renewal",LICENSE_RELEASE:"license-release",INDIVIDUALIZATION_REQUEST:"individualization-request"},ROBUSTNESS_STRINGS:{WIDEVINE:{SW_SECURE_CRYPTO:"SW_SECURE_CRYPTO",SW_SECURE_DECODE:"SW_SECURE_DECODE",HW_SECURE_CRYPTO:"HW_SECURE_CRYPTO",HW_SECURE_DECODE:"HW_SECURE_DECODE",HW_SECURE_ALL:"HW_SECURE_ALL"}},MEDIA_KEY_STATUSES:{USABLE:"usable",EXPIRED:"expired",RELEASED:"released",OUTPUT_RESTRICTED:"output-restricted",OUTPUT_DOWNSCALED:"output-downscaled",STATUS_PENDING:"status-pending",INTERNAL_ERROR:"internal-error"}}},4469:function(o,e,t){t.r(e),t.d(e,{default:function(){return H}});class n{constructor(){this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null}}n.SSL_CONNECTION_FAILED_PREFIX="SSL",n.DNS_RESOLUTION_FAILED="C00",n.HOST_UNREACHABLE="C01",n.CONNECTION_REFUSED="C02",n.CONNECTION_ERROR="C03",n.CORRUPT_MEDIA_ISOBMFF="M00",n.CORRUPT_MEDIA_OTHER="M01",n.BASE_URL_CHANGED="F00",n.BECAME_REPORTER="S00";var r=n,i=t(913),l=t(138);function c(be){let ue,Ue;const et=(be=be||{}).eventBus,qe=be.dashMetrics,Xe=be.metricsConstants,He=be.events;function it(fn){let qt=new r;if(Ue){for(const Vn in fn)fn.hasOwnProperty(Vn)&&(qt[Vn]=fn[Vn]);qt.mpdurl||(qt.mpdurl=Ue.originalUrl||Ue.url),qt.terror||(qt.terror=new Date),qe.addDVBErrors(qt)}}function bt(fn){fn.error||(Ue=fn.manifest)}function ht(fn){it({errorcode:r.BASE_URL_CHANGED,servicelocation:fn.entry})}function Ct(){it({errorcode:r.BECAME_REPORTER})}function pn(fn){var qt;fn.metric===Xe.HTTP_REQUEST&&((qt=fn.value).responsecode===0||qt.responsecode==null||qt.responsecode>=400||qt.responsecode<100||qt.responsecode>=600)&&it({errorcode:qt.responsecode||r.CONNECTION_ERROR,url:qt.url,terror:qt.tresponse,servicelocation:qt._serviceLocation})}function Xt(fn){let qt;switch(fn.error?fn.error.code:0){case MediaError.MEDIA_ERR_NETWORK:qt=r.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:qt=r.CORRUPT_MEDIA_OTHER;break;default:return}it({errorcode:qt})}return ue={initialize:function(){et.on(He.MANIFEST_UPDATED,bt,ue),et.on(He.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,ht,ue),et.on(He.METRIC_ADDED,pn,ue),et.on(He.METRIC_UPDATED,pn,ue),et.on(He.PLAYBACK_ERROR,Xt,ue),et.on(i.default.BECAME_REPORTING_PLAYER,Ct,ue)},reset:function(){et.off(He.MANIFEST_UPDATED,bt,ue),et.off(He.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,ht,ue),et.off(He.METRIC_ADDED,pn,ue),et.off(He.METRIC_UPDATED,pn,ue),et.off(He.PLAYBACK_ERROR,Xt,ue),et.off(i.default.BECAME_REPORTING_PLAYER,Ct,ue)}},ue}c.__dashjs_factory_name="DVBErrorsTranslator";var f=l.default.getSingletonFactory(c),h=t(7377);function g(be){be=be||{};let ue,Ue,et=!1,qe=this.context,Xe=be.mediaElement;return ue={initialize:function(He){He&&He.length&&(He.forEach(it=>{let bt=it.starttime,ht=bt+it.duration;Ue.add(bt,ht)}),et=!!He[0]._useWallClockTime)},reset:function(){Ue.clear()},isEnabled:function(){let He,it=Ue.length;if(!it)return!0;He=et?new Date().getTime()/1e3:Xe.currentTime;for(let bt=0;bt<it;bt+=1){let ht=Ue.start(bt),Ct=Ue.end(bt);if(ht<=He&&He<Ct)return!0}return!1}},Ue=(0,h.default)(qe).create(),ue}g.__dashjs_factory_name="RangeController";var p=l.default.getClassFactory(g);function y(){return{serialise:function be(ue){let Ue,et,qe=[],Xe=[];for(Ue in ue)if(ue.hasOwnProperty(Ue)&&Ue.indexOf("_")!==0){if(et=ue[Ue],et==null&&(et=""),Array.isArray(et)){if(!et.length)continue;Xe=[],et.forEach(function(He){let it=Object.prototype.toString.call(He).slice(8,-1)!=="Object";Xe.push(it?He:be(He))}),et=Xe.map(encodeURIComponent).join(",")}else typeof et=="string"?et=encodeURIComponent(et):et instanceof Date?et=et.toISOString():typeof et=="number"&&(et=Math.round(et));qe.push(Ue+"="+et)}return qe.join("&")}}}y.__dashjs_factory_name="MetricSerialiser";var T=l.default.getSingletonFactory(y);function b(){let be,ue,Ue,et=window.crypto||window.msCrypto,qe=Uint32Array,Xe=Math.pow(2,8*qe.BYTES_PER_ELEMENT)-1;function He(){et&&(be||(be=new qe(10)),et.getRandomValues(be),ue=0)}return Ue={random:function(it,bt){let ht;return it||(it=0),bt||(bt=1),et?(ue===be.length&&He(),ht=be[ue]/Xe,ue+=1):ht=Math.random(),ht*(bt-it)+it}},He(),Ue}b.__dashjs_factory_name="RNG";var w=l.default.getSingletonFactory(b),R=t(1926);function M(be){let ue;be=be||{};let Ue,et,qe,Xe,He,it,bt,ht=this.context,Ct=[];const pn=be.metricsConstants;function Xt(){Xe=!1,He=!1,it=null,bt=null}return ue={report:function(fn,qt){Array.isArray(qt)||(qt=[qt]),He&&bt.isEnabled()&&qt.forEach(function(Vn){let sr=Ue.serialise(Vn);fn!==pn.DVB_ERRORS&&(sr=`metricname=${fn}&${sr}`),sr=`${it}?${sr}`,function(wr,Zr,Fr){let ii=new XMLHttpRequest;ii.withCredentials=et.getXHRWithCredentialsForType(pn.HTTP_REQUEST_DVB_REPORTING_TYPE);const rn=function(){let Gt=Ct.indexOf(ii);Gt!==-1&&(Ct.splice(Gt,1),!(ii.status>=200&&ii.status<300)&&Fr&&Fr())};Ct.push(ii);try{ii.open("GET",wr),ii.onloadend=rn,ii.onerror=rn,ii.send()}catch{ii.onerror()}}(sr,0,function(){He=!1})})},initialize:function(fn,qt){let Vn;if(bt=qt,it=fn.dvbReportingUrl,!it)throw new Error("required parameter missing (dvb:reportingUrl)");Xe||(Vn=fn.dvbProbability,Vn&&(Vn===1e3||Vn/1e3>=qe.random())&&(He=!0),Xe=!0)},reset:function(){Xt()}},Ue=T(ht).getInstance(),qe=w(ht).getInstance(),et=(0,R.default)(ht).getInstance(),Xt(),ue}M.__dashjs_factory_name="DVBReporting";var Y=l.default.getClassFactory(M);function Z(be){be=be||{};const ue={"urn:dvb:dash:reporting:2014":Y},Ue=this.context;let et;const qe=be.debug?be.debug.getLogger(et):{},Xe=be.metricsConstants,He=be.mediaPlayerModel||{};return et={create:function(it,bt){let ht;try{ht=ue[it.schemeIdUri](Ue).create({metricsConstants:Xe,mediaPlayerModel:He}),ht.initialize(it,bt)}catch(Ct){ht=null,qe.error(`ReportingFactory: could not create Reporting with schemeIdUri ${it.schemeIdUri} (${Ct.message})`)}return ht},register:function(it,bt){ue[it]=bt},unregister:function(it){delete ue[it]}},et}Z.__dashjs_factory_name="ReportingFactory";var ye=l.default.getSingletonFactory(Z);function Re(be){let ue,Ue=[];const et=ye(this.context).getInstance(be);return ue={initialize:function(qe,Xe){qe.some(He=>{let it=et.create(He,Xe);if(it)return Ue.push(it),!0})},reset:function(){Ue.forEach(qe=>qe.reset()),Ue=[]},report:function(qe,Xe){Ue.forEach(He=>He.report(qe,Xe))}},ue}Re.__dashjs_factory_name="ReportingController";var F=l.default.getClassFactory(Re);function k(){return{reconstructFullMetricName:function(be,ue,Ue){let et=be;return ue&&(et+="("+ue,Ue&&Ue.length&&(et+=","+Ue),et+=")"),et},validateN:function(be){if(!be)throw new Error("missing n");if(isNaN(be))throw new Error("n is NaN");if(be<0)throw new Error("n must be positive");return be}}}k.__dashjs_factory_name="HandlerHelpers";var j=l.default.getSingletonFactory(k);function oe(be){let ue,Ue,et,qe,Xe,He;be=be||{};let it=this.context,bt=j(it).getInstance(),ht=[];const Ct=be.metricsConstants;function pn(){let Xt=function(){try{return Object.keys(ht).map(fn=>ht[fn]).reduce((fn,qt)=>fn.level<qt.level?fn:qt)}catch{return}}();Xt&&He!==Xt.t&&(He=Xt.t,Ue.report(qe,Xt))}return ue={initialize:function(Xt,fn,qt){fn&&(et=bt.validateN(qt),Ue=fn,qe=bt.reconstructFullMetricName(Xt,qt),Xe=setInterval(pn,et))},reset:function(){clearInterval(Xe),Xe=null,et=0,Ue=null,He=null},handleNewMetric:function(Xt,fn,qt){Xt===Ct.BUFFER_LEVEL&&(ht[qt]=fn)}},ue}oe.__dashjs_factory_name="BufferLevelHandler";var L=l.default.getClassFactory(oe),Ee=l.default.getClassFactory(function(be){let ue,Ue,et=(be=be||{}).eventBus;const qe=be.metricsConstants;function Xe(){et.off(i.default.METRICS_INITIALISATION_COMPLETE,Xe,this),et.trigger(i.default.BECAME_REPORTING_PLAYER)}return ue={initialize:function(He,it){it&&(Ue=it,et.on(i.default.METRICS_INITIALISATION_COMPLETE,Xe,this))},reset:function(){Ue=null},handleNewMetric:function(He,it){He===qe.DVB_ERRORS&&Ue&&Ue.report(He,it)}},ue});function Be(be){let ue,Ue,et,qe,Xe,He;be=be||{};let it=[],bt=j(this.context).getInstance();const ht=be.metricsConstants;function Ct(){var pn=it;pn.length&&Ue&&Ue.report(Xe,pn),it=[]}return ue={initialize:function(pn,Xt,fn,qt){Xt&&(et=bt.validateN(fn),Ue=Xt,qt&&qt.length&&(qe=qt),Xe=bt.reconstructFullMetricName(pn,fn,qt),He=setInterval(Ct,et))},reset:function(){clearInterval(He),He=null,et=null,qe=null,it=[],Ue=null},handleNewMetric:function(pn,Xt){pn===ht.HTTP_REQUEST&&(qe&&qe!==Xt.type||it.push(Xt))}},ue}Be.__dashjs_factory_name="HttpListHandler";var pe=l.default.getClassFactory(Be);function ct(){let be,ue,Ue;return be={initialize:function(et,qe){ue=et,Ue=qe},reset:function(){Ue=null,ue=void 0},handleNewMetric:function(et,qe){et===ue&&Ue&&Ue.report(ue,qe)}},be}ct.__dashjs_factory_name="GenericMetricHandler";var Ye=l.default.getClassFactory(ct);function Le(be){let ue;const Ue=(be=be||{}).debug?be.debug.getLogger(ue):{};let et=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/;const qe=this.context;let Xe={BufferLevel:L,DVBErrors:Ee,HttpList:pe,PlayList:Ye,RepSwitchList:Ye,TcpList:Ye};return ue={create:function(He,it){var bt,ht=He.match(et);if(ht){try{(bt=Xe[ht[1]](qe).create({eventBus:be.eventBus,metricsConstants:be.metricsConstants})).initialize(ht[1],it,ht[3],ht[5])}catch(Ct){bt=null,Ue.error(`MetricsHandlerFactory: Could not create handler for type ${ht[1]} with args ${ht[3]}, ${ht[5]} (${Ct.message})`)}return bt}},register:function(He,it){Xe[He]=it},unregister:function(He){delete Xe[He]}},ue}Le.__dashjs_factory_name="MetricsHandlerFactory";var Je=l.default.getSingletonFactory(Le);function Ge(be){be=be||{};let ue,Ue=[];const et=this.context,qe=be.eventBus,Xe=be.events;let He=Je(et).getInstance({debug:be.debug,eventBus:be.eventBus,metricsConstants:be.metricsConstants});function it(bt){Ue.forEach(ht=>{ht.handleNewMetric(bt.metric,bt.value,bt.mediaType)})}return ue={initialize:function(bt,ht){bt.split(",").forEach((Ct,pn,Xt)=>{let fn;if(Ct.indexOf("(")!==-1&&Ct.indexOf(")")===-1){let qt=Xt[pn+1];qt&&qt.indexOf("(")===-1&&qt.indexOf(")")!==-1&&(Ct+=","+qt,delete Xt[pn+1])}fn=He.create(Ct,ht),fn&&Ue.push(fn)}),qe.on(Xe.METRIC_ADDED,it,ue),qe.on(Xe.METRIC_UPDATED,it,ue)},reset:function(){qe.off(Xe.METRIC_ADDED,it,ue),qe.off(Xe.METRIC_UPDATED,it,ue),Ue.forEach(bt=>bt.reset()),Ue=[]}},ue}Ge.__dashjs_factory_name="MetricsHandlersController";var tt=l.default.getClassFactory(Ge);function Ze(be){let ue,Ue,et,qe;be=be||{};let Xe=this.context;function He(){ue&&ue.reset(),Ue&&Ue.reset(),et&&et.reset()}return qe={initialize:function(it){try{et=p(Xe).create({mediaElement:be.mediaElement}),et.initialize(it.Range),Ue=F(Xe).create({debug:be.debug,metricsConstants:be.metricsConstants,mediaPlayerModel:be.mediaPlayerModel}),Ue.initialize(it.Reporting,et),ue=tt(Xe).create({debug:be.debug,eventBus:be.eventBus,metricsConstants:be.metricsConstants,events:be.events}),ue.initialize(it.metrics,Ue)}catch(bt){throw He(),bt}},reset:He},qe}Ze.__dashjs_factory_name="MetricsController";var Me=l.default.getClassFactory(Ze),$e=class{constructor(){this.metrics="",this.Range=[],this.Reporting=[]}},mt=class{constructor(){this.starttime=0,this.duration=1/0,this._useWallClockTime=!1}},Dt=class{constructor(){this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3}};function Pe(be){let ue,Ue=(be=be||{}).adapter;const et=be.constants;return ue={getMetrics:function(qe){let Xe=[];return qe&&qe.Metrics&&qe.Metrics.forEach(He=>{var it=new $e,bt=Ue.getIsDynamic(qe);He.hasOwnProperty("metrics")&&(it.metrics=He.metrics,He.Range&&He.Range.forEach(ht=>{var Ct=new mt;Ct.starttime=function(pn,Xt,fn){let qt,Vn,sr=0;return Xt?sr=Ue.getAvailabilityStartTime(pn)/1e3:(qt=Ue.getRegularPeriods(pn),qt.length&&(sr=qt[0].start)),Vn=sr,fn&&fn.hasOwnProperty(et.START_TIME)&&(Vn+=fn.starttime),Vn}(qe,bt,ht),ht.hasOwnProperty("duration")?Ct.duration=ht.duration:Ct.duration=Ue.getDuration(qe),Ct._useWallClockTime=bt,it.Range.push(Ct)}),He.Reporting&&(He.Reporting.forEach(ht=>{var Ct=new Dt;ht.hasOwnProperty(et.SCHEME_ID_URI)&&(Ct.schemeIdUri=ht.schemeIdUri,ht.hasOwnProperty("value")&&(Ct.value=ht.value),ht.hasOwnProperty(et.DVB_REPORTING_URL)&&(Ct.dvbReportingUrl=ht[et.DVB_REPORTING_URL]),ht.hasOwnProperty(et.DVB_PROBABILITY)&&(Ct.dvbProbability=ht[et.DVB_PROBABILITY]),it.Reporting.push(Ct))}),Xe.push(it)))}),Xe}},ue}Pe.__dashjs_factory_name="ManifestParsing";var Fe=l.default.getSingletonFactory(Pe);function ut(be){let ue;be=be||{};let Ue={},et=this.context,qe=be.eventBus;const Xe=be.events;function He(bt){if(bt.error)return;let ht=Object.keys(Ue);Fe(et).getInstance({adapter:be.adapter,constants:be.constants}).getMetrics(bt.manifest).forEach(Ct=>{const pn=JSON.stringify(Ct);if(Ue.hasOwnProperty(pn))ht.splice(pn,1);else try{let Xt=Me(et).create(be);Xt.initialize(Ct),Ue[pn]=Xt}catch{}}),ht.forEach(Ct=>{Ue[Ct].reset(),delete Ue[Ct]}),qe.trigger(i.default.METRICS_INITIALISATION_COMPLETE)}function it(){Object.keys(Ue).forEach(bt=>{Ue[bt].reset()}),Ue={}}return ue={reset:function(){qe.off(Xe.MANIFEST_UPDATED,He,ue),qe.off(Xe.STREAM_TEARDOWN_COMPLETE,it,ue)}},qe.on(Xe.MANIFEST_UPDATED,He,ue),qe.on(Xe.STREAM_TEARDOWN_COMPLETE,it,ue),ue}ut.__dashjs_factory_name="MetricsCollectionController";var W=l.default.getClassFactory(ut);function Q(){let be,ue,Ue=this.context;return be={createMetricsReporting:function(et){return ue=f(Ue).getInstance({eventBus:et.eventBus,dashMetrics:et.dashMetrics,metricsConstants:et.metricsConstants,events:et.events}),ue.initialize(),W(Ue).create(et)},getReportingFactory:function(){return ye(Ue).getInstance()},getMetricsHandlerFactory:function(){return Je(Ue).getInstance()}},be}Q.__dashjs_factory_name="MetricsReporting";const P=dashjs.FactoryMaker.getClassFactory(Q);P.events=i.default,dashjs.FactoryMaker.updateClassFactory(Q.__dashjs_factory_name,P);var H=P},913:function(o,e,t){t.r(e);var n=t(7252);class r extends n.default{constructor(){super(),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",this.CMCD_DATA_GENERATED="cmcdDataGenerated"}}let i=new r;e.default=i},1926:function(o,e,t){t.r(e);var n=t(5717),r=t(138),i=t(8261),l=t(656),c=t(5212);function f(){let h,g,p,y,T,b,w,R,M,Y;const Z=this.context,ye=(0,i.default)(Z).getInstance();function Re(){y=[],T=[],b=[],w=[],R=[],Y=[],M=null,g=[]}function F(L,Ee){let Be=-1;L.some((pe,ct)=>{if(pe===Ee)return Be=ct,!0}),Be<0||L.splice(Be,1)}function k(L){let Ee;for(Ee=0;Ee<Y.length;Ee++)if(Y[Ee].rulename===L)return Ee;return-1}function j(L,Ee){oe(L,Ee);let Be=new n.default;Be.schemeIdUri=L,Be.value=Ee,g.push(Be)}function oe(L,Ee){(0,l.checkParameterType)(L,"string"),(0,l.checkParameterType)(Ee,"string"),g.forEach(function(Be,pe){Be.schemeIdUri===L&&Be.value===Ee&&g.splice(pe,1)})}return h={addAbrCustomRule:function(L,Ee,Be){if(typeof L!="string"||L!==c.default.RULES_TYPES.ABANDON_FRAGMENT_RULES&&L!==c.default.RULES_TYPES.QUALITY_SWITCH_RULES||typeof Ee!="string")throw c.default.BAD_ARGUMENT_ERROR;let pe=k(Ee);pe===-1?Y.push({type:L,rulename:Ee,rule:Be}):(Y[pe].type=L,Y[pe].rule=Be)},addRequestInterceptor:function(L){y.push(L)},addResponseInterceptor:function(L){T.push(L)},addUTCTimingSource:j,clearDefaultUTCTimingSources:function(){g=[]},getAbrCustomRules:function(){return Y},getCustomCapabilitiesFilters:function(){return R},getCustomInitialTrackSelectionFunction:function(){return M},getLicenseRequestFilters:function(){return b},getLicenseResponseFilters:function(){return w},getRequestInterceptors:function(){return y},getResponseInterceptors:function(){return T},getUTCTimingSources:function(){return g},getXHRWithCredentialsForType:function(L){const Ee=p[L];return Ee===void 0?p.default:Ee},registerCustomCapabilitiesFilter:function(L){R.push(L)},registerLicenseRequestFilter:function(L){b.push(L)},registerLicenseResponseFilter:function(L){w.push(L)},removeAbrCustomRule:function(L){if(L){let Ee=k(L);Ee!==-1&&Y.splice(Ee,1)}else Y=[]},removeAllAbrCustomRule:function(){Y=[]},removeRequestInterceptor:function(L){F(y,L)},removeResponseInterceptor:function(L){F(T,L)},removeUTCTimingSource:oe,reset:function(){Re()},resetCustomInitialTrackSelectionFunction:function(){M=null},restoreDefaultUTCTimingSources:function(){let L=ye.get().streaming.utcSynchronization.defaultTimingSource;j(L.scheme,L.value)},setConfig:function(){},setCustomInitialTrackSelectionFunction:function(L){M=L},setXHRWithCredentialsForType:function L(Ee,Be){Ee?p[Ee]=!!Be:Object.keys(p).forEach(pe=>{L(pe,Be)})},unregisterCustomCapabilitiesFilter:function(L){F(R,L)},unregisterLicenseRequestFilter:function(L){F(b,L)},unregisterLicenseResponseFilter:function(L){F(w,L)}},p={default:!1},Re(),h}f.__dashjs_factory_name="CustomParametersModel",e.default=r.default.getSingletonFactory(f)},3888:function(o,e,t){t.r(e),t.d(e,{default:function(){return ii}});var n=t(8854),r=t(2861);const i={prefixes:["clearkey","dashif","ck"]};class l{static findMp4ProtectionElement(Gt){let zt=null;for(let kt=0;kt<Gt.length;++kt){let Jt=Gt[kt];Jt.schemeIdUri&&Jt.schemeIdUri.toLowerCase()===n.default.MP4_PROTECTION_SCHEME&&Jt.value&&(Jt.value.toLowerCase()===r.default.ENCRYPTION_SCHEME_CENC||Jt.value.toLowerCase()===r.default.ENCRYPTION_SCHEME_CBCS)&&(zt=Jt)}return zt}static getPSSHData(Gt){let zt=8,kt=new DataView(Gt),Jt=kt.getUint8(zt);return zt+=20,Jt>0&&(zt+=4+16*kt.getUint32(zt)),zt+=4,Gt.slice(zt)}static getPSSHForKeySystem(Gt,zt){let kt=l.parsePSSHList(zt);return Gt&&kt.hasOwnProperty(Gt.uuid.toLowerCase())?kt[Gt.uuid.toLowerCase()]:null}static parseInitDataFromContentProtection(Gt,zt){return"pssh"in Gt&&Gt.pssh?(Gt.pssh.__text=Gt.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),zt.decodeArray(Gt.pssh.__text).buffer):null}static parsePSSHList(Gt){if(Gt==null)return[];let zt=new DataView(Gt.buffer||Gt),kt={},Jt=0;for(;;){let en,ln,dn,Pt,Lt,un,Kn=Jt;if(Jt>=zt.buffer.byteLength)break;if(en=zt.getUint32(Jt),ln=Jt+en,Jt+=4,zt.getUint32(Jt)===1886614376)if(Jt+=4,dn=zt.getUint8(Jt),dn===0||dn===1){for(Jt++,Jt+=3,Pt="",Lt=0;Lt<4;Lt++)un=zt.getUint8(Jt+Lt).toString(16),Pt+=un.length===1?"0"+un:un;for(Jt+=4,Pt+="-",Lt=0;Lt<2;Lt++)un=zt.getUint8(Jt+Lt).toString(16),Pt+=un.length===1?"0"+un:un;for(Jt+=2,Pt+="-",Lt=0;Lt<2;Lt++)un=zt.getUint8(Jt+Lt).toString(16),Pt+=un.length===1?"0"+un:un;for(Jt+=2,Pt+="-",Lt=0;Lt<2;Lt++)un=zt.getUint8(Jt+Lt).toString(16),Pt+=un.length===1?"0"+un:un;for(Jt+=2,Pt+="-",Lt=0;Lt<6;Lt++)un=zt.getUint8(Jt+Lt).toString(16),Pt+=un.length===1?"0"+un:un;Jt+=6,Pt=Pt.toLowerCase(),Jt+=4,kt[Pt]=zt.buffer.slice(Kn,ln),Jt=ln}else Jt=ln;else Jt=ln}return kt}static getLicenseServerUrlFromMediaInfo(Gt,zt){try{if(!Gt||Gt.length===0)return null;let kt=0,Jt=null;for(;kt<Gt.length&&!Jt;){const en=Gt[kt];if(en&&en.contentProtection&&en.contentProtection.length>0){const ln=en.contentProtection.filter(dn=>dn.schemeIdUri&&dn.schemeIdUri===zt);if(ln&&ln.length>0){let dn=0;for(;dn<ln.length&&!Jt;){const Pt=ln[dn];Pt.laUrl&&Pt.laUrl.__prefix&&i.prefixes.includes(Pt.laUrl.__prefix)&&Pt.laUrl.__text&&(Jt=Pt.laUrl.__text),dn+=1}}}kt+=1}return Jt}catch{return null}}static hexKidToBufferSource(Gt){const zt=Gt.replace(/-/g,"");return new Uint8Array(zt.match(/[\da-f]{2}/gi).map(function(kt){return parseInt(kt,16)})).buffer}}var c=l,f=class{constructor(rn,Gt){this.contentType=rn,this.robustness=Gt}},h=class{constructor(rn,Gt,zt,kt,Jt,en){this.initDataTypes=en&&en.length>0?en:[r.default.INITIALIZATION_DATA_TYPE_CENC],rn&&rn.length&&(this.audioCapabilities=rn),Gt&&Gt.length&&(this.videoCapabilities=Gt),this.distinctiveIdentifier=zt,this.persistentState=kt,this.sessionTypes=Jt}},g=t(1923),p=t(1944),y=class{constructor(rn,Gt,zt,kt,Jt,en,ln,dn){this.url=rn,this.method=Gt,this.responseType=zt,this.headers=kt,this.withCredentials=Jt,this.messageType=en,this.sessionId=ln,this.data=dn}},T=class{constructor(rn,Gt,zt){this.url=rn,this.headers=Gt,this.data=zt}},b=t(7568),w=t(7263),R=t(5212),M=t(138);function Y(rn){const Gt=(rn=rn||{}).BASE64,zt=rn.cmcdModel,kt=rn.constants,Jt=rn.customParametersModel,en=rn.debug,ln=rn.eventBus,dn=rn.events,Pt=rn.protectionKeyController,Lt=rn.settings;let un,Kn,Kt,Rn,$n,Pn,zn,er,wn,Nt,Tt,an,gn=rn.protectionModel,Mn=[];function rr(){if(!(ln&&ln.hasOwnProperty("on")&&Pt&&Pt.hasOwnProperty("getSupportedKeySystemMetadataFromContentProtection")))throw new Error("Missing config parameter(s)")}function Tr($t,Sn){Tt||Rn?Tt&&or():function(On,ar){if(Rn)return;var Wn;Rn=!0;const Yr=function(fr){const hr=[];for(let ur=0;ur<fr.length;ur++){const Er=Ar(fr[ur]);hr.push({ks:fr[ur].ks,configs:[Er],protData:fr[ur].protData})}return hr}(On=(Wn=On).sort((fr,hr)=>(un&&un[fr.ks.systemString]&&un[fr.ks.systemString].priority>=0?un[fr.ks.systemString].priority:Wn.length)-(un&&un[hr.ks.systemString]&&un[hr.ks.systemString].priority>=0?un[hr.ks.systemString].priority:Wn.length)));let lr;gn.requestKeySystemAccess(Yr).then(fr=>(lr=fr.data,function(hr){let ur=hr&&hr.selectedSystemString?hr.selectedSystemString:hr.keySystem.systemString;return zn.info("DRM: KeySystem Access Granted for system string ("+ur+")!  Selecting key system..."),gn.selectKeySystem(hr)}(lr))).then(fr=>{(function(hr,ur){Tt=hr,Rn=!1,ln.trigger(dn.KEY_SYSTEM_SELECTED,{data:ur});const Er=ji(Tt);Er&&Er.serverCertificate&&Er.serverCertificate.length>0&&gn.setServerCertificate(Gt.decodeArray(Er.serverCertificate).buffer),or()})(fr,lr)}).catch(fr=>{(function(hr,ur){Tt=null,Rn=!1,ur||ln.trigger(dn.KEY_SYSTEM_SELECTED,{data:null,error:new p.default(g.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,g.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+hr.error)})})(fr,ar)})}($t,Sn)}function or(){let $t;for(let On=0;On<wn.length;On++)for($t=0;$t<wn[On].length;$t++)if(Tt===wn[On][$t].ks){Sn=wn[On][$t],Pt.isClearKey(Tt)&&function(ar){if(ar.protData&&ar.protData.hasOwnProperty("clearkeys")&&Object.keys(ar.protData.clearkeys).length!==0){const Wn={kids:Object.keys(ar.protData.clearkeys)};ar.initData=new TextEncoder().encode(JSON.stringify(Wn))}}(Sn),Sn.sessionId?Rr(Sn):Sn.initData!==null&&Lr(Sn);break}var Sn;wn=[]}function Ar($t){const Sn=$t.protData,On=[],ar=[],Wn=Sn&&Sn.initDataTypes&&Sn.initDataTypes.length>0?Sn.initDataTypes:[r.default.INITIALIZATION_DATA_TYPE_CENC],Yr=Sn&&Sn.audioRobustness&&Sn.audioRobustness.length>0?Sn.audioRobustness:Nt,lr=Sn&&Sn.videoRobustness&&Sn.videoRobustness.length>0?Sn.videoRobustness:Nt,fr=$t.sessionType,hr=Sn&&Sn.distinctiveIdentifier?Sn.distinctiveIdentifier:"optional",ur=Sn&&Sn.persistentState?Sn.persistentState:fr==="temporary"?"optional":"required";return er.forEach(Er=>{Er.type===kt.AUDIO?On.push(new f(Er.codec,Yr)):Er.type===kt.VIDEO&&ar.push(new f(Er.codec,lr))}),new h(On,ar,hr,ur,[fr],Wn)}function Rr($t){rr(),gn.loadKeySession($t)}function Lr($t){if($t&&function(On){if(!On)return!1;try{const ar=gn.getSessionTokens();for(let Wn=0;Wn<ar.length;Wn++)if(ar[Wn].getKeyId()===On)return!0;return!1}catch{return!1}}($t.keyId))return;const Sn=c.getPSSHForKeySystem(Tt,$t?$t.initData:null);if(Sn){if(qi(Sn))return;try{$t.initData=Sn,gn.createKeySession($t)}catch(On){ln.trigger(dn.KEY_SESSION_CREATED,{data:null,error:new p.default(g.default.KEY_SESSION_CREATED_ERROR_CODE,g.default.KEY_SESSION_CREATED_ERROR_MESSAGE+On.message)})}}else $t&&$t.initData?gn.createKeySession($t):ln.trigger(dn.KEY_SESSION_CREATED,{data:null,error:new p.default(g.default.KEY_SESSION_CREATED_ERROR_CODE,g.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(Tt?Tt.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function ji($t){if($t){const Sn=$t.systemString;if(un)return Sn in un?un[Sn]:null}return null}function qi($t){if(!$t)return!1;try{const Sn=gn.getAllInitData();for(let On=0;On<Sn.length;On++)if(Pt.initDataEquals($t,Sn[On]))return zn.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch{return!1}}function wa($t){rr(),$t?(gn.setMediaElement($t),ln.on(dn.NEED_KEY,us,Kn)):$t===null&&(gn.setMediaElement($t),ln.off(dn.NEED_KEY,us,Kn))}function ai($t){zn.debug("DRM: onKeyMessage");const Sn=$t.data;ln.trigger(dn.KEY_MESSAGE,{data:Sn});const On=Sn.messageType?Sn.messageType:r.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST,ar=Sn.message,Wn=Sn.sessionToken,Yr=ji(Tt),lr=Pt.getLicenseServerModelInstance(Tt,Yr,On),fr={sessionToken:Wn,messageType:On};if(ar&&ar.byteLength!==0){if(!lr)return zn.debug("DRM: License server request not required for this message (type = "+$t.data.messageType+").  Session ID = "+Wn.getSessionId()),void mi(fr);if(Pt.isClearKey(Tt)){const hr=Pt.processClearKeyLicenseRequest(Tt,Yr,ar);if(hr&&hr.keyPairs&&hr.keyPairs.length>0)return zn.debug("DRM: ClearKey license request handled by application!"),mi(fr),void gn.updateKeySession(Wn,hr)}(function(hr,ur,Er){const Gi=hr.sessionToken,Wr=hr.messageType?hr.messageType:r.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST,ua={sessionToken:Gi,messageType:Wr},cs=Tt?Tt.systemString:null;let $l=function(Sr,Aa,di,ki,ca){let fi=null;const hs=ki.message;if(Sr&&Sr.serverURL){const si=Sr.serverURL;typeof si=="string"&&si!==""?fi=si:typeof si=="object"&&si.hasOwnProperty(Aa)&&(fi=si[Aa])}else if(Sr&&Sr.laURL&&Sr.laURL!=="")fi=Sr.laURL;else if(fi=c.getLicenseServerUrlFromMediaInfo(er,Tt.schemeIdURI),!fi&&!Pt.isClearKey(Tt)){const si=c.getPSSHData(di.initData);fi=Tt.getLicenseServerURLFromInitData(si),fi||(fi=ki.laURL)}return fi=ca.getServerURLFromMessage(fi,hs,Aa),fi}(Er,Wr,Gi,hr,ur);if(!$l)return void mi(ua,new p.default(g.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,g.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE));const ds={};let Mi=!1;Er&&ql(ds,Er.httpRequestHeaders);const Ia=hr.message;ql(ds,Tt.getRequestHeadersFromMessage(Ia)),Object.keys(ds).forEach(Sr=>{Sr.toLowerCase()==="authorization"&&(Mi=!0)}),Er&&typeof Er.withCredentials=="boolean"&&(Mi=Er.withCredentials);const fs=function(Sr){if(gn)if(Sr.status>=200&&Sr.status<=299){const Aa=w.default.parseHttpHeaders(Sr.getAllResponseHeaders?Sr.getAllResponseHeaders():null);let di=new T(Sr.responseURL,Aa,Sr.response);Gl(Jt.getLicenseResponseFilters(),di).then(()=>{const ki=ur.getLicenseMessage(di.data,cs,Wr);ki!==null?(mi(ua),gn.updateKeySession(Gi,ki)):qr(Sr,ua,cs,Wr,ur)})}else qr(Sr,ua,cs,Wr,ur)},Xi=function(Sr){mi(ua,new p.default(g.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,g.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+cs+' update, XHR aborted. status is "'+Sr.statusText+'" ('+Sr.status+"), readyState is "+Sr.readyState))},lo=function(Sr){mi(ua,new p.default(g.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,g.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+cs+' update, XHR error. status is "'+Sr.statusText+'" ('+Sr.status+"), readyState is "+Sr.readyState))},br=Tt.getLicenseRequestFromMessage(Ia),uo=ur.getHTTPMethod(Wr),co=ur.getResponseType(cs,Wr),fo=Er&&!isNaN(Er.httpTimeout)?Er.httpTimeout:8e3,Xo=Gi.getSessionId()||null;let ho=new y($l,uo,co,ds,Mi,Wr,Xo,br);const Qo=isNaN(Lt.get().streaming.retryAttempts[b.HTTPRequest.LICENSE])?3:Lt.get().streaming.retryAttempts[b.HTTPRequest.LICENSE];Gl(Jt.getLicenseRequestFilters(),ho).then(()=>{ci(ho,Qo,fo,fs,Xi,lo)})})(Sn,lr,Yr)}else mi(fr,new p.default(g.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,g.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function mi($t){let Sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;ln.trigger(dn.LICENSE_REQUEST_COMPLETE,{data:$t,error:Sn})}function ci($t,Sn,On,ar,Wn,Yr){const lr=new XMLHttpRequest,fr=zt.getCmcdParametersFromManifest();if(zt.isCmcdEnabled()&&(fr.mode?fr.mode:Lt.get().streaming.cmcd.mode)===R.default.CMCD_MODE_QUERY){const ur=zt.getQueryParameter({url:$t.url,type:b.HTTPRequest.LICENSE});ur&&($t.url=w.default.addAdditionalQueryParameterToUrl($t.url,[ur]))}lr.open($t.method,$t.url,!0),lr.responseType=$t.responseType,lr.withCredentials=$t.withCredentials,On>0&&(lr.timeout=On);for(const ur in $t.headers)lr.setRequestHeader(ur,$t.headers[ur]);if(zt.isCmcdEnabled()&&(fr.mode?fr.mode:Lt.get().streaming.cmcd.mode)===R.default.CMCD_MODE_HEADER){const ur=zt.getHeaderParameters({url:$t.url,type:b.HTTPRequest.LICENSE});if(ur)for(const Er in ur){let Gi=ur[Er];Gi&&lr.setRequestHeader(Er,Gi)}}const hr=function(){Sn--;const ur=isNaN(Lt.get().streaming.retryIntervals[b.HTTPRequest.LICENSE])?1e3:Lt.get().streaming.retryIntervals[b.HTTPRequest.LICENSE];$n=setTimeout(function(){ci($t,Sn,On,ar,Wn,Yr)},ur)};lr.onload=function(){Pn=null,this.status>=200&&this.status<=299||Sn<=0?ar(this):(zn.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+Sn),hr())},lr.ontimeout=lr.onerror=function(){Pn=null,Sn<=0?Yr(this):(zn.warn("License request network request failed . Retrying it... Pending retries: "+Sn),hr())},lr.onabort=function(){Wn(this)},ln.trigger(dn.LICENSE_REQUEST_SENDING,{url:$t.url,headers:$t.headers,payload:$t.data,sessionId:$t.sessionId}),Pn=lr,lr.send($t.data)}function jl(){Pn&&(Pn.onloadend=Pn.onerror=Pn.onprogress=void 0,Pn.abort(),Pn=null),$n&&(clearTimeout($n),$n=null)}function ql($t,Sn){if(Sn)for(const On in Sn)$t[On]=Sn[On]}function qr($t,Sn,On,ar,Wn){let Yr="NONE",lr=null;$t.response&&(Yr=Wn.getErrorResponse($t.response,On,ar),lr={serverResponse:$t.response||null,responseCode:$t.status||null,responseText:$t.statusText||null}),mi(Sn,new p.default(g.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,g.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+On+' update, XHR complete. status is "'+$t.statusText+'" ('+$t.status+"), readyState is "+$t.readyState+".  Response is "+Yr,lr))}function Gl($t,Sn){return $t?$t.reduce((On,ar)=>On.then(()=>ar(Sn)),Promise.resolve()):Promise.resolve()}function us($t,Sn){if(Lt.get().streaming.protection.ignoreEmeEncryptedEvent)return;if(zn.debug("DRM: onNeedKey"),$t.key.initDataType!==r.default.INITIALIZATION_DATA_TYPE_CENC)return void zn.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+$t.key.initDataType);if(er.length===0&&(zn.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(Sn=Sn===void 0?1:Sn+1)<5))return void Mn.push(setTimeout(()=>{us($t,Sn)},500));let On=$t.key.initData;if(ArrayBuffer.isView(On)&&(On=On.buffer),Tt){const Wn=c.getPSSHForKeySystem(Tt,On);if(Wn&&qi(Wn))return}zn.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(On)));const ar=Pt.getSupportedKeySystemMetadataFromSegmentPssh(On,un,an);ar.length!==0?function(Wn){wn.push(Wn),Tr(Wn,!1)}(ar):zn.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}function oo($t,Sn){if($t.size<=0)return!1;if(Sn.size>0&&[...$t].every(ar=>{const Wn=Sn.get(ar);return Wn!==void 0&&Wn!==""}))return!0;const On=gn.getSessionTokens();if(On&&On.length>0){const ar=On.filter(Wn=>[...$t].includes(Wn.normalizedKeyId));if(ar.some(Wn=>!Wn.hasTriggeredKeyStatusMapUpdate)||ar.length===0)return!1}return!Lt.get().streaming.protection.ignoreKeyStatuses&&$t&&$t.size>0&&Sn&&Sn.size>0}return Kn={areKeyIdsExpired:function($t){try{return!!oo($t,Kt)&&[...$t].every(Sn=>Kt.get(Sn)===r.default.MEDIA_KEY_STATUSES.EXPIRED)}catch(Sn){return zn.error(Sn),!1}},areKeyIdsUsable:function($t){try{return!oo($t,Kt)||[...$t].some(Sn=>{const On=Kt.get(Sn);return On&&On!==r.default.MEDIA_KEY_STATUSES.INTERNAL_ERROR&&On!==r.default.MEDIA_KEY_STATUSES.OUTPUT_RESTRICTED})}catch(Sn){return zn.error(Sn),!0}},clearMediaInfoArray:function(){er=[]},closeKeySession:function($t){rr(),gn.closeKeySession($t)},createKeySession:Lr,getKeySystems:function(){return Pt?Pt.getKeySystems():[]},getSupportedKeySystemMetadataFromContentProtection:function($t){return rr(),Pt.getSupportedKeySystemMetadataFromContentProtection($t,un,an)},handleKeySystemFromManifest:function(){if(!er||er.length===0)return;let $t=[];er.forEach(Sn=>{const On=Pt.getSupportedKeySystemMetadataFromContentProtection(Sn.contentProtection,un,an);On.length>0&&($t.length===0&&($t=On),wn.push(On))}),$t&&$t.length>0&&Tr($t,!0)},initializeForMedia:function($t){if(!$t)throw new Error("mediaInfo can not be null or undefined");rr(),er.push($t)},loadKeySession:Rr,removeKeySession:function($t){rr(),gn.removeKeySession($t)},reset:function(){ln.off(dn.INTERNAL_KEY_MESSAGE,ai,Kn),rr(),jl(),wa(null),Tt=null,Rn=!1,Kt=new Map,gn&&(gn.reset(),gn=null),Mn.forEach($t=>clearTimeout($t)),Mn=[],er=[],wn=[]},setKeySystems:function($t){Pt&&Pt.setKeySystems($t)},setMediaElement:wa,setProtectionData:function($t){un=$t,Pt.setProtectionData($t)},setRobustnessLevel:function($t){Nt=$t},setServerCertificate:function($t){rr(),gn.setServerCertificate($t)},setSessionType:function($t){an=$t},stop:function(){jl(),gn&&gn.stop()},updateKeyStatusesMap:function($t){try{if(!$t||!$t.sessionToken||!$t.parsedKeyStatuses)return;$t.sessionToken.hasTriggeredKeyStatusMapUpdate=!0;const Sn=$t.parsedKeyStatuses,On=w.default.parseUserAgent(),ar=On&&On.browser&&On.browser.name&&On.browser.name.toLowerCase()==="edge";Sn.forEach(Wn=>{ar&&Tt.uuid===r.default.PLAYREADY_UUID&&Wn.keyId&&Wn.keyId.byteLength===16&&function(lr){const fr=w.default.bufferSourceToDataView(lr),hr=fr.getUint32(0,!0),ur=fr.getUint16(4,!0),Er=fr.getUint16(6,!0);fr.setUint32(0,hr,!1),fr.setUint16(4,ur,!1),fr.setUint16(6,Er,!1)}(Wn.keyId);const Yr=w.default.bufferSourceToHex(Wn.keyId).slice(0,32);Yr&&Yr!==""&&Kt.set(Yr,Wn.status)}),ln.trigger(dn.KEY_STATUSES_MAP_UPDATED,{keyStatusMap:Kt})}catch(Sn){zn.error(Sn)}}},zn=en.getLogger(Kn),wn=[],er=[],an="temporary",Nt="",Pn=null,$n=null,Kt=new Map,ln.on(dn.INTERNAL_KEY_MESSAGE,ai,Kn),Kn}Y.__dashjs_factory_name="ProtectionController";var Z=M.default.getClassFactory(Y),ye=class{constructor(rn,Gt){this.keyID=rn,this.key=Gt}},Re=class{constructor(rn,Gt){if(Gt&&Gt!=="persistent"&&Gt!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=rn,this.type=Gt}toJWK(){let rn,Gt=this.keyPairs.length,zt={keys:[]};for(rn=0;rn<Gt;rn++){let dn={kty:"oct",alg:"A128KW",kid:this.keyPairs[rn].keyID,k:this.keyPairs[rn].key};zt.keys.push(dn)}this.type&&(zt.type=this.type);let kt=JSON.stringify(zt);const Jt=kt.length;let en=new ArrayBuffer(Jt),ln=new Uint8Array(en);for(rn=0;rn<Jt;rn++)ln[rn]=kt.charCodeAt(rn);return en}};const F=r.default.CLEARKEY_UUID,k=r.default.CLEARKEY_KEYSTEM_STRING,j="urn:uuid:"+F;function oe(rn){let Gt;const zt=(rn=rn||{}).BASE64;return Gt={uuid:F,schemeIdURI:j,systemString:k,getInitData:function(kt,Jt){try{let en=c.parseInitDataFromContentProtection(kt,zt);if(!en&&Jt){const ln={kids:[function(dn){try{let Pt=dn.replace(/-/g,"");return Pt=btoa(Pt.match(/\w{2}/g).map(Lt=>String.fromCharCode(parseInt(Lt,16))).join("")),Pt.replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch{return null}}(Jt.cencDefaultKid)]};en=new TextEncoder().encode(JSON.stringify(ln))}return en}catch{return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(kt){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(kt))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(kt,Jt){let en=null;if(kt){const ln=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Jt))),dn=[];for(let Pt=0;Pt<ln.kids.length;Pt++){const Lt=ln.kids[Pt],un=kt.clearkeys&&kt.clearkeys.hasOwnProperty(Lt)?kt.clearkeys[Lt]:null;if(!un)throw new Error("DRM: ClearKey keyID ("+Lt+") is not known!");dn.push(new ye(Lt,un))}en=new Re(dn)}return en}},Gt}oe.__dashjs_factory_name="KeySystemClearKey";var L=M.default.getSingletonFactory(oe);const Ee=r.default.W3C_CLEARKEY_UUID,Be=r.default.CLEARKEY_KEYSTEM_STRING,pe="urn:uuid:"+Ee;function ct(rn){let Gt;const zt=rn.BASE64,kt=rn.debug.getLogger(Gt);return Gt={uuid:Ee,schemeIdURI:pe,systemString:Be,getInitData:function(Jt){return c.parseInitDataFromContentProtection(Jt,zt)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(Jt){return new Uint8Array(Jt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(Jt,en){let ln=null;if(Jt){const dn=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(en))),Pt=[];for(let Lt=0;Lt<dn.kids.length;Lt++){const un=dn.kids[Lt],Kn=Jt.clearkeys&&Jt.clearkeys.hasOwnProperty(un)?Jt.clearkeys[un]:null;if(!Kn)throw new Error("DRM: ClearKey keyID ("+un+") is not known!");Pt.push(new ye(un,Kn))}ln=new Re(Pt),kt.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return ln}},Gt}ct.__dashjs_factory_name="KeySystemW3CClearKey";var Ye=M.default.getSingletonFactory(ct);const Le=r.default.WIDEVINE_UUID,Je=r.default.WIDEVINE_KEYSTEM_STRING,Ge="urn:uuid:"+Le;function tt(rn){let Gt;const zt=(rn=rn||{}).BASE64;return Gt={uuid:Le,schemeIdURI:Ge,systemString:Je,getInitData:function(kt){return c.parseInitDataFromContentProtection(kt,zt)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(kt){return new Uint8Array(kt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}},Gt}tt.__dashjs_factory_name="KeySystemWidevine";var Ze=M.default.getSingletonFactory(tt);const Me=r.default.PLAYREADY_UUID,$e=r.default.PLAYREADY_KEYSTEM_STRING,mt="urn:uuid:"+Me;function Dt(rn){let Gt,zt="utf-16";const kt=(rn=rn||{}).BASE64,Jt=rn.settings;function en(){if(!kt||!kt.hasOwnProperty("decodeArray")||!kt.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return Gt={uuid:Me,schemeIdURI:mt,systemString:$e,getInitData:function(ln){const dn=new Uint8Array([112,115,115,104,0,0,0,0]),Pt=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);let Lt,un,Kn,Kt,Rn,$n=0,Pn=null;if(en(),!ln)return null;if("pssh"in ln&&ln.pssh)return c.parseInitDataFromContentProtection(ln,kt);if("pro"in ln&&ln.pro)Pn=kt.decodeArray(ln.pro.__text);else{if(!("prheader"in ln)||!ln.prheader)return null;Pn=kt.decodeArray(ln.prheader.__text)}return Lt=Pn.length,un=4+dn.length+Pt.length+4+Lt,Kn=new ArrayBuffer(un),Kt=new Uint8Array(Kn),Rn=new DataView(Kn),Rn.setUint32($n,un),$n+=4,Kt.set(dn,$n),$n+=dn.length,Kt.set(Pt,$n),$n+=Pt.length,Rn.setUint32($n,Lt),$n+=4,Kt.set(Pn,$n),$n+=Lt,Kt.buffer},getRequestHeadersFromMessage:function(ln){let dn,Pt;const Lt={},un=new DOMParser;if(Jt&&Jt.get().streaming.protection.detectPlayreadyMessageFormat&&zt==="utf-16"&&ln&&ln.byteLength%2==1)return Lt["Content-Type"]="text/xml; charset=utf-8",Lt;const Kn=zt==="utf-16"?new Uint16Array(ln):new Uint8Array(ln);dn=String.fromCharCode.apply(null,Kn),Pt=un.parseFromString(dn,"application/xml");const Kt=Pt.getElementsByTagName("name"),Rn=Pt.getElementsByTagName("value");for(let $n=0;$n<Kt.length;$n++)Lt[Kt[$n].childNodes[0].nodeValue]=Rn[$n].childNodes[0].nodeValue;return Lt.hasOwnProperty("Content")&&(Lt["Content-Type"]=Lt.Content,delete Lt.Content),Lt.hasOwnProperty("Content-Type")||(Lt["Content-Type"]="text/xml; charset=utf-8"),Lt},getLicenseRequestFromMessage:function(ln){let dn=null;const Pt=new DOMParser;if(Jt&&Jt.get().streaming.protection.detectPlayreadyMessageFormat&&zt==="utf-16"&&ln&&ln.byteLength%2==1)return ln;const Lt=zt==="utf-16"?new Uint16Array(ln):new Uint8Array(ln);en();const un=String.fromCharCode.apply(null,Lt),Kn=Pt.parseFromString(un,"application/xml");if(!Kn.getElementsByTagName("PlayReadyKeyMessage")[0])return ln;{const Kt=Kn.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;Kt&&(dn=kt.decode(Kt))}return dn},getLicenseServerURLFromInitData:function(ln){if(ln){const dn=new DataView(ln),Pt=dn.getUint16(4,!0);let Lt=6;const un=new DOMParser;for(let Kn=0;Kn<Pt;Kn++){const Kt=dn.getUint16(Lt,!0);Lt+=2;const Rn=dn.getUint16(Lt,!0);if(Lt+=2,Kt!==1){Lt+=Rn;continue}const $n=ln.slice(Lt,Lt+Rn),Pn=String.fromCharCode.apply(null,new Uint16Array($n)),zn=un.parseFromString(Pn,"application/xml");if(zn.getElementsByTagName("LA_URL")[0]){const er=zn.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(er)return er}if(zn.getElementsByTagName("LUI_URL")[0]){const er=zn.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(er)return er}}}return null},getCDMData:function(ln){let dn,Pt,Lt,un;if(en(),!ln)return null;for(dn=[],un=0;un<ln.length;++un)dn.push(ln.charCodeAt(un)),dn.push(0);for(dn=String.fromCharCode.apply(null,dn),dn=kt.encode(dn),Pt='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",dn),Lt=[],un=0;un<Pt.length;++un)Lt.push(Pt.charCodeAt(un)),Lt.push(0);return new Uint8Array(Lt).buffer},setPlayReadyMessageFormat:function(ln){if(ln!=="utf-8"&&ln!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');zt=ln}},Gt}Dt.__dashjs_factory_name="KeySystemPlayReady";var Pe=M.default.getSingletonFactory(Dt);function Fe(rn){const Gt=(rn=rn||{}).BASE64,zt={};let kt;return zt[r.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(Jt){return Gt.decodeArray(Jt.license)},getErrorResponse:function(Jt){return Jt}},zt[r.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(Jt){return Jt},getErrorResponse:function(Jt){return String.fromCharCode.apply(null,new Uint8Array(Jt))}},kt={getServerURLFromMessage:function(Jt){return Jt},getHTTPMethod:function(){return"POST"},getResponseType:function(Jt){return zt[Jt].responseType},getLicenseMessage:function(Jt,en){return function(){if(!Gt||!Gt.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),zt[en].getLicenseMessage(Jt)},getErrorResponse:function(Jt,en){return zt[en].getErrorResponse(Jt)}},kt}Fe.__dashjs_factory_name="DRMToday";var ut=M.default.getSingletonFactory(Fe);function W(){let rn;const Gt="http://schemas.xmlsoap.org/soap/envelope/";function zt(en){const ln=String.fromCharCode.apply(null,new Uint8Array(en));return decodeURIComponent(escape(ln))}function kt(en){if(window.DOMParser){const ln=zt(en),dn=new window.DOMParser().parseFromString(ln,"text/xml"),Pt=dn?dn.getElementsByTagNameNS(Gt,"Envelope")[0]:null,Lt=Pt?Pt.getElementsByTagNameNS(Gt,"Body")[0]:null;if(Lt&&Lt.getElementsByTagNameNS(Gt,"Fault")[0])return null}return en}function Jt(en){let ln="",dn="",Pt="",Lt=-1,un=-1;if(window.DOMParser){const Kt=zt(en),Rn=new window.DOMParser().parseFromString(Kt,"text/xml"),$n=Rn?Rn.getElementsByTagNameNS(Gt,"Envelope")[0]:null,Pn=$n?$n.getElementsByTagNameNS(Gt,"Body")[0]:null,zn=Pn?Pn.getElementsByTagNameNS(Gt,"Fault")[0]:null,er=zn?zn.getElementsByTagName("detail")[0]:null,wn=er?er.getElementsByTagName("Exception")[0]:null;let Nt=null;if(zn===null)return Kt;Nt=zn.getElementsByTagName("faultstring")[0].firstChild,ln=Nt?Nt.nodeValue:null,wn!==null&&(Nt=wn.getElementsByTagName("StatusCode")[0],dn=Nt?Nt.firstChild.nodeValue:null,Nt=wn.getElementsByTagName("Message")[0],Pt=Nt?Nt.firstChild.nodeValue:null,Lt=Pt?Pt.lastIndexOf("[")+1:-1,un=Pt?Pt.indexOf("]"):-1,Pt=Pt?Pt.substring(Lt,un):"")}let Kn=`code: ${dn}, name: ${ln}`;return Pt&&(Kn+=`, message: ${Pt}`),Kn}return rn={getServerURLFromMessage:function(en){return en},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(en){return kt.call(this,en)},getErrorResponse:function(en){return Jt.call(this,en)}},rn}W.__dashjs_factory_name="PlayReady";var Q=M.default.getSingletonFactory(W);function P(){let rn;return rn={getServerURLFromMessage:function(Gt){return Gt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(Gt){return Gt},getErrorResponse:function(Gt){return String.fromCharCode.apply(null,new Uint8Array(Gt))}},rn}P.__dashjs_factory_name="Widevine";var H=M.default.getSingletonFactory(P);function be(){let rn;return rn={getServerURLFromMessage:function(Gt){return Gt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(Gt){if(!Gt.hasOwnProperty("keys"))return null;let zt=[];for(let kt=0;kt<Gt.keys.length;kt++){let Jt=Gt.keys[kt],en=Jt.kid.replace(/=/g,""),ln=Jt.k.replace(/=/g,"");zt.push(new ye(en,ln))}return new Re(zt)},getErrorResponse:function(Gt){return String.fromCharCode.apply(null,new Uint8Array(Gt))}},rn}be.__dashjs_factory_name="ClearKey";var ue=M.default.getSingletonFactory(be),Ue=class{constructor(rn){this.ks=rn.ks,this.keyId=rn.keyId,this.initData=rn.initData,this.protData=rn.protData,this.cdmData=rn.cdmData,this.sessionId=rn.sessionId,this.sessionType=rn.sessionType}};function et(){let rn,Gt,zt,kt,Jt,en,ln,dn,Pt=this.context;function Lt(Kt,Rn){return Rn&&Kt in Rn?Rn[Kt]:null}function un(Kt,Rn){return Kt&&Kt.sessionId?Kt.sessionId:Rn&&Rn.sessionId?Rn.sessionId:null}function Kn(Kt,Rn){return Kt&&Kt.sessionType?Kt.sessionType:Rn}return rn={getKeySystemBySystemString:function(Kt){for(let Rn=0;Rn<kt.length;Rn++)if(kt[Rn].systemString===Kt)return kt[Rn];return null},getKeySystems:function(){return kt},getLicenseServerModelInstance:function(Kt,Rn,$n){if($n===r.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_RELEASE||$n===r.default.MEDIA_KEY_MESSAGE_TYPES.INDIVIDUALIZATION_REQUEST)return null;let Pn=null;return Rn&&Rn.hasOwnProperty("drmtoday")?Pn=ut(Pt).getInstance({BASE64:Jt}):Kt.systemString===r.default.WIDEVINE_KEYSTEM_STRING?Pn=H(Pt).getInstance():Kt.systemString===r.default.PLAYREADY_KEYSTEM_STRING?Pn=Q(Pt).getInstance():Kt.systemString===r.default.CLEARKEY_KEYSTEM_STRING&&(Pn=ue(Pt).getInstance()),Pn},getSupportedKeySystemMetadataFromContentProtection:function(Kt,Rn,$n){let Pn,zn,er,wn,Nt=[];if(!Kt||!Kt.length)return Nt;const Tt=c.findMp4ProtectionElement(Kt);for(er=0;er<kt.length;er++){zn=kt[er];const an=Lt(zn.systemString,Rn);for(wn=0;wn<Kt.length;wn++)if(Pn=Kt[wn],Pn.schemeIdUri.toLowerCase()===zn.schemeIdURI){let gn=zn.getInitData(Pn,Tt);const Mn=new Ue({ks:kt[er],keyId:Pn.keyId,initData:gn,protData:an,cdmData:zn.getCDMData(an?an.cdmData:null),sessionId:un(an,Pn),sessionType:Kn(an,$n)});an?Nt.unshift(Mn):Nt.push(Mn)}}return Nt},getSupportedKeySystemMetadataFromSegmentPssh:function(Kt,Rn,$n){let Pn,zn,er=[],wn=c.parsePSSHList(Kt);for(let Nt=0;Nt<kt.length;++Nt){Pn=kt[Nt],zn=Pn.systemString;const Tt=Lt(zn,Rn);Pn.uuid in wn&&er.push({ks:Pn,initData:wn[Pn.uuid],protData:Tt,cdmData:Pn.getCDMData(Tt?Tt.cdmData:null),sessionId:un(Tt),sessionType:Kn(Tt,$n)})}return er},initDataEquals:function(Kt,Rn){if(Kt.byteLength===Rn.byteLength){let $n=new Uint8Array(Kt),Pn=new Uint8Array(Rn);for(let zn=0;zn<$n.length;zn++)if($n[zn]!==Pn[zn])return!1;return!0}return!1},initialize:function(){let Kt;kt=[],Kt=Pe(Pt).getInstance({BASE64:Jt,settings:en}),kt.push(Kt),Kt=Ze(Pt).getInstance({BASE64:Jt}),kt.push(Kt),Kt=L(Pt).getInstance({BASE64:Jt}),kt.push(Kt),ln=Kt,Kt=Ye(Pt).getInstance({BASE64:Jt,debug:Gt}),kt.push(Kt),dn=Kt},isClearKey:function(Kt){return Kt===ln||Kt===dn},processClearKeyLicenseRequest:function(Kt,Rn,$n){try{return Kt.getClearKeysFromProtectionData(Rn,$n)}catch{return zt.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(Kt){Kt&&(Kt.debug&&(Gt=Kt.debug,zt=Gt.getLogger(rn)),Kt.BASE64&&(Jt=Kt.BASE64),Kt.settings&&(en=Kt.settings))},setKeySystems:function(Kt){kt=Kt},setProtectionData:function(Kt){for(var Rn,$n,Pn=0;Pn<kt.length;Pn++){var zn=kt[Pn];zn.hasOwnProperty("init")&&zn.init((Rn=zn.systemString,$n=void 0,$n=null,Kt&&($n=Rn in Kt?Kt[Rn]:null),$n))}}},rn}et.__dashjs_factory_name="ProtectionKeyController";var qe=M.default.getSingletonFactory(et),Xe=t(445),He=class{constructor(rn,Gt){this.initData=rn,this.initDataType=Gt}},it=class{constructor(rn,Gt,zt,kt){this.sessionToken=rn,this.message=Gt,this.defaultURL=zt,this.messageType=kt||r.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST}},bt=class{constructor(rn,Gt){this.keySystem=rn,this.ksConfiguration=Gt,this.nativeMediaKeySystemAccessObject=null,this.selectedSystemString=null}};const ht={};function Ct(rn){rn=rn||{};const Gt=this.context,zt=rn.eventBus,kt=rn.events,Jt=rn.debug;let en,ln,dn,Pt,Lt,un,Kn,Kt;function Rn(Nt,Tt,an,gn){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){const Ar="Insecure origins are not allowed";return zt.trigger(kt.KEY_SYSTEM_ACCESS_COMPLETE,{error:Ar}),void gn({error:Ar})}const Mn=Nt[Tt].protData&&Nt[Tt].protData.systemStringPriority?Nt[Tt].protData.systemStringPriority:null,rr=Nt[Tt].configs,Tr=Nt[Tt].ks;let or=Tr.systemString;(function(Ar,Rr){return new Promise((Lr,ji)=>{$n(Ar,Rr,0,Lr,ji)})})(Mn||(ht[or]?ht[or]:[or]),rr).then(Ar=>{const Rr=Ar&&Ar.nativeMediaKeySystemAccessObject&&typeof Ar.nativeMediaKeySystemAccessObject.getConfiguration=="function"?Ar.nativeMediaKeySystemAccessObject.getConfiguration():null,Lr=new bt(Tr,Rr);Lr.selectedSystemString=Ar.selectedSystemString,Lr.nativeMediaKeySystemAccessObject=Ar.nativeMediaKeySystemAccessObject,zt.trigger(kt.KEY_SYSTEM_ACCESS_COMPLETE,{data:Lr}),an({data:Lr})}).catch(Ar=>{if(Tt+1<Nt.length)Rn(Nt,Tt+1,an,gn);else{const Rr="Key system access denied! ";zt.trigger(kt.KEY_SYSTEM_ACCESS_COMPLETE,{error:Rr+Ar.message}),gn({error:Rr+Ar.message})}})}function $n(Nt,Tt,an,gn,Mn){const rr=Nt[an];ln.debug(`Requesting key system access for system string ${rr}`),navigator.requestMediaKeySystemAccess(rr,Tt).then(Tr=>{gn({nativeMediaKeySystemAccessObject:Tr,selectedSystemString:rr})}).catch(Tr=>{an+1<Nt.length?$n(Nt,Tt,an+1,gn,Mn):Mn(Tr)})}function Pn(Nt){if(!Nt||!Nt.session)return Promise.resolve;const Tt=Nt.session;return Tt.removeEventListener("keystatuseschange",Nt),Tt.removeEventListener("message",Nt),Tt.close()}function zn(Nt){for(let Tt=0;Tt<un.length;Tt++)if(un[Tt]===Nt){un.splice(Tt,1);break}}function er(Nt,Tt){const an={session:Nt,keyId:Tt.keyId,normalizedKeyId:Tt&&Tt.keyId&&typeof Tt.keyId=="string"?Tt.keyId.replace(/-/g,"").toLowerCase():"",initData:Tt.initData,sessionId:Tt.sessionId,sessionType:Tt.sessionType,hasTriggeredKeyStatusMapUpdate:!1,handleEvent:function(gn){switch(gn.type){case"keystatuseschange":this._onKeyStatusesChange(gn);break;case"message":this._onKeyMessage(gn)}},_onKeyStatusesChange:function(gn){zt.trigger(kt.KEY_STATUSES_CHANGED,{data:this});const Mn=[];gn.target.keyStatuses.forEach(function(){Mn.push(wn(arguments))}),zt.trigger(kt.INTERNAL_KEY_STATUSES_CHANGED,{parsedKeyStatuses:Mn,sessionToken:an})},_onKeyMessage:function(gn){let Mn=ArrayBuffer.isView(gn.message)?gn.message.buffer:gn.message;zt.trigger(kt.INTERNAL_KEY_MESSAGE,{data:new it(this,Mn,void 0,gn.messageType)})},getKeyId:function(){return this.keyId},getSessionId:function(){return Nt.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return Nt.expiration},getKeyStatuses:function(){return Nt.keyStatuses},getUsable:function(){let gn=!1;return Nt.keyStatuses.forEach(function(){wn(arguments).status===r.default.MEDIA_KEY_STATUSES.USABLE&&(gn=!0)}),gn}};return Nt.addEventListener("keystatuseschange",an),Nt.addEventListener("message",an),Nt.closed.then(()=>{zn(an),ln.debug("DRM: Session closed.  SessionID = "+an.getSessionId()),zt.trigger(kt.KEY_SESSION_CLOSED,{data:an.getSessionId()})}),un.push(an),an}function wn(Nt){let Tt,an;return Nt&&Nt.length>0&&(Nt[0]&&(typeof Nt[0]=="string"?Tt=Nt[0]:an=Nt[0]),Nt[1]&&(typeof Nt[1]=="string"?Tt=Nt[1]:an=Nt[1])),{status:Tt,keyId:an}}return en={closeKeySession:function(Nt){Pn(Nt).catch(function(Tt){zn(Nt),zt.trigger(kt.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+Nt.getSessionId()+") "+Tt.name})})},createKeySession:function(Nt){if(!dn||!Lt)throw new Error("Can not create sessions until you have selected a key system");const Tt=Lt.createSession(Nt.sessionType),an=er(Tt,Nt),gn=dn.systemString===r.default.CLEARKEY_KEYSTEM_STRING&&(Nt.initData||Nt.protData&&Nt.protData.clearkeys)?r.default.INITIALIZATION_DATA_TYPE_KEYIDS:r.default.INITIALIZATION_DATA_TYPE_CENC;Tt.generateRequest(gn,Nt.initData).then(function(){ln.debug("DRM: Session created.  SessionID = "+an.getSessionId()),zt.trigger(kt.KEY_SESSION_CREATED,{data:an})}).catch(function(Mn){zn(an),zt.trigger(kt.KEY_SESSION_CREATED,{data:null,error:new p.default(g.default.KEY_SESSION_CREATED_ERROR_CODE,g.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+Mn.name)})})},getAllInitData:function(){const Nt=[];for(let Tt=0;Tt<un.length;Tt++)un[Tt].initData&&Nt.push(un[Tt].initData);return Nt},getSessionTokens:function(){return un},loadKeySession:function(Nt){if(!dn||!Lt)throw new Error("Can not load sessions until you have selected a key system");const Tt=Nt.sessionId;for(let Mn=0;Mn<un.length;Mn++)if(Tt===un[Mn].sessionId)return void ln.warn("DRM: Ignoring session ID because we have already seen it!");const an=Lt.createSession(Nt.sessionType),gn=er(an,Nt);gn.hasTriggeredKeyStatusMapUpdate=!0,an.load(Tt).then(function(Mn){Mn?(ln.debug("DRM: Session loaded.  SessionID = "+gn.getSessionId()),zt.trigger(kt.KEY_SESSION_CREATED,{data:gn})):(zn(gn),zt.trigger(kt.KEY_SESSION_CREATED,{data:null,error:new p.default(g.default.KEY_SESSION_CREATED_ERROR_CODE,g.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+Tt+")")}))}).catch(function(Mn){zn(gn),zt.trigger(kt.KEY_SESSION_CREATED,{data:null,error:new p.default(g.default.KEY_SESSION_CREATED_ERROR_CODE,g.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+Tt+")! "+Mn.name)})})},removeKeySession:function(Nt){Nt.session.remove().then(function(){ln.debug("DRM: Session removed.  SessionID = "+Nt.getSessionId()),zt.trigger(kt.KEY_SESSION_REMOVED,{data:Nt.getSessionId()})},function(Tt){zt.trigger(kt.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+Nt.getSessionId()+"). "+Tt.name})})},requestKeySystemAccess:function(Nt){return new Promise((Tt,an)=>{Rn(Nt,0,Tt,an)})},reset:function(){const Nt=un.length;let Tt;if(Nt!==0){const an=function(gn){zn(gn),un.length===0&&(Pt?(Pt.removeEventListener("encrypted",Kn),Pt.setMediaKeys(null).then(function(){zt.trigger(kt.TEARDOWN_COMPLETE)})):zt.trigger(kt.TEARDOWN_COMPLETE))};for(let gn=0;gn<Nt;gn++)Tt=un[gn],function(Mn){Pn(Tt),an(Mn)}(Tt)}else zt.trigger(kt.TEARDOWN_COMPLETE)},selectKeySystem:function(Nt){return new Promise((Tt,an)=>{Nt.nativeMediaKeySystemAccessObject.createMediaKeys().then(gn=>(dn=Nt.keySystem,Lt=gn,Pt?Pt.setMediaKeys(Lt):Promise.resolve())).then(()=>{Tt(dn)}).catch(function(){an({error:"Error selecting keys system ("+Nt.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(Nt){Pt!==Nt&&(Pt&&(Pt.removeEventListener("encrypted",Kn),Pt.setMediaKeys&&Pt.setMediaKeys(null)),Pt=Nt,Pt&&(Pt.addEventListener("encrypted",Kn),Pt.setMediaKeys&&Lt&&Pt.setMediaKeys(Lt)))},setServerCertificate:function(Nt){return new Promise((Tt,an)=>{Lt.setServerCertificate(Nt).then(function(){ln.info("DRM: License server certificate successfully updated."),zt.trigger(kt.SERVER_CERTIFICATE_UPDATED),Tt()}).catch(gn=>{an(gn),zt.trigger(kt.SERVER_CERTIFICATE_UPDATED,{error:new p.default(g.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,g.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+gn.name)})})})},stop:function(){let Nt;for(let Tt=0;Tt<un.length;Tt++)Nt=un[Tt],Nt.getUsable()||(Pn(Nt),zn(Nt))},updateKeySession:function(Nt,Tt){const an=Nt.session;Kt.isClearKey(dn)&&(Tt=Tt.toJWK()),an.update(Tt).then(()=>{zt.trigger(kt.KEY_SESSION_UPDATED)}).catch(function(gn){zt.trigger(kt.KEY_ERROR,{error:new p.default(g.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+gn.name,Nt)})})}},ln=Jt.getLogger(en),dn=null,Pt=null,Lt=null,un=[],Kt=qe(Gt).getInstance(),Kn={handleEvent:function(Nt){if(Nt.type==="encrypted"&&Nt.initData){let Tt=ArrayBuffer.isView(Nt.initData)?Nt.initData.buffer:Nt.initData;zt.trigger(kt.NEED_KEY,{key:new He(Tt,Nt.initDataType)})}}},en}ht[r.default.PLAYREADY_KEYSTEM_STRING]=[r.default.PLAYREADY_KEYSTEM_STRING,r.default.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],ht[r.default.WIDEVINE_KEYSTEM_STRING]=[r.default.WIDEVINE_KEYSTEM_STRING],ht[r.default.CLEARKEY_KEYSTEM_STRING]=[r.default.CLEARKEY_KEYSTEM_STRING],Ct.__dashjs_factory_name="DefaultProtectionModel";var pn=M.default.getClassFactory(Ct);function Xt(rn){rn=rn||{};const Gt=this.context,zt=rn.eventBus,kt=rn.events,Jt=rn.debug,en=rn.api;let ln,dn,Pt,Lt,un,Kn,Kt,Rn,$n;function Pn(){try{for(let wn=0;wn<Kt.length;wn++)zn(Kt[wn]);Pt&&Pt.removeEventListener(en.needkey,Rn),zt.trigger(kt.TEARDOWN_COMPLETE)}catch(wn){zt.trigger(kt.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+wn.message})}}function zn(wn){const Nt=wn.session;Nt.removeEventListener(en.error,wn),Nt.removeEventListener(en.message,wn),Nt.removeEventListener(en.ready,wn),Nt.removeEventListener(en.close,wn);for(let Tt=0;Tt<Kt.length;Tt++)if(Kt[Tt]===wn){Kt.splice(Tt,1);break}Nt[en.release]()}function er(){let wn=null;const Nt=function(){Pt.removeEventListener("loadedmetadata",wn),Pt[en.setMediaKeys](un),zt.trigger(kt.VIDEO_ELEMENT_SELECTED)};Pt.readyState>=1?Nt():(wn=Nt.bind(this),Pt.addEventListener("loadedmetadata",wn))}return ln={getAllInitData:function(){const wn=[];for(let Nt=0;Nt<Kt.length;Nt++)wn.push(Kt[Nt].initData);return wn},getSessionTokens:function(){return Kt},requestKeySystemAccess:function(wn){return new Promise((Nt,Tt)=>{let an=!1;for(let gn=0;gn<wn.length;gn++){const Mn=wn[gn].ks.systemString,rr=wn[gn].configs;let Tr=null,or=null;for(let Ar=0;Ar<rr.length;Ar++){const Rr=rr[Ar].audioCapabilities,Lr=rr[Ar].videoCapabilities;if(Rr&&Rr.length!==0){Tr=[];for(let ai=0;ai<Rr.length;ai++)window[en.MediaKeys].isTypeSupported(Mn,Rr[ai].contentType)&&Tr.push(Rr[ai])}if(Lr&&Lr.length!==0){or=[];for(let ai=0;ai<Lr.length;ai++)window[en.MediaKeys].isTypeSupported(Mn,Lr[ai].contentType)&&or.push(Lr[ai])}if(!Tr&&!or||Tr&&Tr.length===0||or&&or.length===0)continue;an=!0;const ji=new h(Tr,or),qi=$n.getKeySystemBySystemString(Mn),wa=new bt(qi,ji);zt.trigger(kt.KEY_SYSTEM_ACCESS_COMPLETE,{data:wa}),Nt({data:wa});break}}if(!an){const gn="Key system access denied! -- No valid audio/video content configurations detected!";zt.trigger(kt.KEY_SYSTEM_ACCESS_COMPLETE,{error:gn}),Tt({error:gn})}})},selectKeySystem:function(wn){return new Promise((Nt,Tt)=>{try{un=wn.mediaKeys=new window[en.MediaKeys](wn.keySystem.systemString),Lt=wn.keySystem,Kn=wn,Pt&&er(),Nt(Lt)}catch{Tt({error:"Error selecting keys system ("+Lt.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(wn){Pt!==wn&&(Pt&&Pt.removeEventListener(en.needkey,Rn),Pt=wn,Pt&&(Pt.addEventListener(en.needkey,Rn),un&&er()))},createKeySession:function(wn){if(!Lt||!un||!Kn)throw new Error("Can not create sessions until you have selected a key system");let Nt=null;if(Kn.ksConfiguration.videoCapabilities&&Kn.ksConfiguration.videoCapabilities.length>0&&(Nt=Kn.ksConfiguration.videoCapabilities[0]),Nt===null&&Kn.ksConfiguration.audioCapabilities&&Kn.ksConfiguration.audioCapabilities.length>0&&(Nt=Kn.ksConfiguration.audioCapabilities[0]),Nt===null)throw new Error("Can not create sessions for unknown content types.");const Tt=Nt.contentType,an=un.createSession(Tt,new Uint8Array(wn.initData),wn.cdmData?new Uint8Array(wn.cdmData):null),gn=function(Mn,rr){return{session:Mn,keyId:rr.keyId,normalizedKeyId:rr&&rr.keyId&&typeof rr.keyId=="string"?rr.keyId.replace(/-/g,"").toLowerCase():"",initData:rr.initData,hasTriggeredKeyStatusMapUpdate:!1,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},getKeyStatuses:function(){return{size:0,has:()=>!1,get:()=>{}}},handleEvent:function(Tr){switch(Tr.type){case en.error:let or="KeyError";zt.trigger(kt.KEY_ERROR,{error:new p.default(g.default.MEDIA_KEYERR_CODE,or,this)});break;case en.message:let Ar=ArrayBuffer.isView(Tr.message)?Tr.message.buffer:Tr.message;zt.trigger(kt.INTERNAL_KEY_MESSAGE,{data:new it(this,Ar,Tr.destinationURL)});break;case en.ready:dn.debug("DRM: Key added."),zt.trigger(kt.KEY_ADDED);break;case en.close:dn.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),zt.trigger(kt.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(an,wn);an.addEventListener(en.error,gn),an.addEventListener(en.message,gn),an.addEventListener(en.ready,gn),an.addEventListener(en.close,gn),Kt.push(gn),dn.debug("DRM: Session created.  SessionID = "+gn.getSessionId()),zt.trigger(kt.KEY_SESSION_CREATED,{data:gn})},updateKeySession:function(wn,Nt){const Tt=wn.session;$n.isClearKey(Lt)?Tt.update(new Uint8Array(Nt.toJWK())):Tt.update(new Uint8Array(Nt)),zt.trigger(kt.KEY_SESSION_UPDATED)},closeKeySession:zn,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:Pn,reset:Pn},dn=Jt.getLogger(ln),Pt=null,Lt=null,un=null,Kn=null,Kt=[],$n=qe(Gt).getInstance(),Rn={handleEvent:function(wn){if(wn.type===en.needkey&&wn.initData){const Nt=ArrayBuffer.isView(wn.initData)?wn.initData.buffer:wn.initData;zt.trigger(kt.NEED_KEY,{key:new He(Nt,r.default.INITIALIZATION_DATA_TYPE_CENC)})}}},ln}Xt.__dashjs_factory_name="ProtectionModel_3Feb2014";var fn=M.default.getClassFactory(Xt);function qt(rn){rn=rn||{};const Gt=this.context,zt=rn.eventBus,kt=rn.events,Jt=rn.debug,en=rn.api,ln=rn.errHandler;let dn,Pt,Lt,un,Kn,Kt,Rn,$n,Pn;function zn(){Lt&&Nt();for(let Tt=0;Tt<Rn.length;Tt++)er(Rn[Tt]);zt.trigger(kt.TEARDOWN_COMPLETE)}function er(Tt){try{Lt[en.cancelKeyRequest](un.systemString,Tt.sessionId)}catch(an){zt.trigger(kt.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+Tt.sessionId+") "+an.message})}}function wn(Tt,an){if(an&&Tt){const gn=Tt.length;for(let Mn=0;Mn<gn;Mn++)if(Tt[Mn].sessionId==an)return Tt[Mn];return null}return null}function Nt(){Lt.removeEventListener(en.keyerror,Pn),Lt.removeEventListener(en.needkey,Pn),Lt.removeEventListener(en.keymessage,Pn),Lt.removeEventListener(en.keyadded,Pn)}return dn={getAllInitData:function(){const Tt=[];for(let an=0;an<Kt.length;an++)Tt.push(Kt[an].initData);for(let an=0;an<Rn.length;an++)Tt.push(Rn[an].initData);return Tt},getSessionTokens:function(){return Rn.concat(Kt)},requestKeySystemAccess:function(Tt){return new Promise((an,gn)=>{let Mn=Lt;Mn||(Mn=document.createElement("video"));let rr=!1;for(let Tr=0;Tr<Tt.length;Tr++){const or=Tt[Tr].ks.systemString,Ar=Tt[Tr].configs;let Rr=null,Lr=null;for(let ji=0;ji<Ar.length;ji++){const qi=Ar[ji].videoCapabilities;if(qi&&qi.length!==0){Lr=[];for(let ci=0;ci<qi.length;ci++)Mn.canPlayType(qi[ci].contentType,or)!==""&&Lr.push(qi[ci])}if(!Lr||Rr||Lr&&Lr.length===0)continue;rr=!0;const wa=new h(Rr,Lr),ai=Kn.getKeySystemBySystemString(or),mi=new bt(ai,wa);zt.trigger(kt.KEY_SYSTEM_ACCESS_COMPLETE,{data:mi}),an({data:mi});break}}if(!rr){const Tr="Key system access denied! -- No valid audio/video content configurations detected!";zt.trigger(kt.KEY_SYSTEM_ACCESS_COMPLETE,{error:Tr}),gn({error:Tr})}})},selectKeySystem:function(Tt){return un=Tt.keySystem,Promise.resolve(un)},setMediaElement:function(Tt){if(Lt!==Tt){if(Lt){Nt();for(var an=0;an<Rn.length;an++)er(Rn[an]);Rn=[]}Lt=Tt,Lt&&(Lt.addEventListener(en.keyerror,Pn),Lt.addEventListener(en.needkey,Pn),Lt.addEventListener(en.keymessage,Pn),Lt.addEventListener(en.keyadded,Pn),zt.trigger(kt.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(Tt){if(!un)throw new Error("Can not create sessions until you have selected a key system");if($n||Rn.length===0){const an={sessionId:null,keyId:Tt.keyId,normalizedKeyId:Tt&&Tt.keyId&&typeof Tt.keyId=="string"?Tt.keyId.replace(/-/g,"").toLowerCase():"",initData:Tt.initData,hasTriggeredKeyStatusMapUpdate:!1,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},getKeyStatuses:function(){return{size:0,has:()=>!1,get:()=>{}}}};return Kt.push(an),Lt[en.generateKeyRequest](un.systemString,new Uint8Array(Tt.initData)),an}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(Tt,an){const gn=Tt.sessionId;if(Kn.isClearKey(un))for(let Mn=0;Mn<an.keyPairs.length;Mn++)Lt[en.addKey](un.systemString,an.keyPairs[Mn].key,an.keyPairs[Mn].keyID,gn);else Lt[en.addKey](un.systemString,new Uint8Array(an),new Uint8Array(Tt.initData),gn);zt.trigger(kt.KEY_SESSION_UPDATED)},closeKeySession:er,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:zn,reset:zn},Pt=Jt.getLogger(dn),Lt=null,un=null,Kt=[],Rn=[],Kn=qe(Gt).getInstance(),Pn={handleEvent:function(Tt){let an=null;switch(Tt.type){case en.needkey:let gn=ArrayBuffer.isView(Tt.initData)?Tt.initData.buffer:Tt.initData;zt.trigger(kt.NEED_KEY,{key:new He(gn,r.default.INITIALIZATION_DATA_TYPE_CENC)});break;case en.keyerror:if(an=wn(Rn,Tt.sessionId),an||(an=wn(Kt,Tt.sessionId)),an){let Mn=g.default.MEDIA_KEYERR_CODE,rr="";switch(Tt.errorCode.code){case 1:Mn=g.default.MEDIA_KEYERR_UNKNOWN_CODE,rr+="MEDIA_KEYERR_UNKNOWN - "+g.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:Mn=g.default.MEDIA_KEYERR_CLIENT_CODE,rr+="MEDIA_KEYERR_CLIENT - "+g.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:Mn=g.default.MEDIA_KEYERR_SERVICE_CODE,rr+="MEDIA_KEYERR_SERVICE - "+g.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:Mn=g.default.MEDIA_KEYERR_OUTPUT_CODE,rr+="MEDIA_KEYERR_OUTPUT - "+g.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:Mn=g.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,rr+="MEDIA_KEYERR_HARDWARECHANGE - "+g.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:Mn=g.default.MEDIA_KEYERR_DOMAIN_CODE,rr+="MEDIA_KEYERR_DOMAIN - "+g.default.MEDIA_KEYERR_DOMAIN_MESSAGE}rr+="  System Code = "+Tt.systemCode,zt.trigger(kt.KEY_ERROR,{error:new p.default(Mn,rr,an)})}else Pt.error("No session token found for key error");break;case en.keyadded:an=wn(Rn,Tt.sessionId),an||(an=wn(Kt,Tt.sessionId)),an?(Pt.debug("DRM: Key added."),zt.trigger(kt.KEY_ADDED,{data:an})):Pt.debug("No session token found for key added");break;case en.keymessage:if($n=Tt.sessionId!==null&&Tt.sessionId!==void 0,$n?(an=wn(Rn,Tt.sessionId),!an&&Kt.length>0&&(an=Kt.shift(),Rn.push(an),an.sessionId=Tt.sessionId,zt.trigger(kt.KEY_SESSION_CREATED,{data:an}))):Kt.length>0&&(an=Kt.shift(),Rn.push(an),Kt.length!==0&&ln.error(new p.default(g.default.MEDIA_KEY_MESSAGE_ERROR_CODE,g.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),an){let Mn=ArrayBuffer.isView(Tt.message)?Tt.message.buffer:Tt.message;an.keyMessage=Mn,zt.trigger(kt.INTERNAL_KEY_MESSAGE,{data:new it(an,Mn,Tt.defaultURL)})}else Pt.warn("No session token found for key message")}}},dn}qt.__dashjs_factory_name="ProtectionModel_01b";var Vn=M.default.getClassFactory(qt);const sr=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],wr=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function Zr(){let rn;const Gt=this.context;function zt(kt,Jt){for(let en=0;en<Jt.length;en++){const ln=Jt[en];if(typeof kt[ln[Object.keys(ln)[0]]]=="function")return ln}return null}return rn={createProtectionSystem:function(kt){let Jt=null;const en=qe(Gt).getInstance();en.setConfig({debug:kt.debug,BASE64:kt.BASE64,settings:kt.settings}),en.initialize();let ln=function(dn){const Pt=dn.debug,Lt=Pt.getLogger(rn),un=dn.eventBus,Kn=dn.errHandler,Kt=dn.videoModel?dn.videoModel.getElement():null;return Kt&&Kt.onencrypted===void 0||Kt&&Kt.mediaKeys===void 0?zt(Kt,wr)?(Lt.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),fn(Gt).create({debug:Pt,eventBus:un,events:dn.events,api:zt(Kt,wr)})):zt(Kt,sr)?(Lt.info("EME detected on this user agent! (ProtectionModel_01b)"),Vn(Gt).create({debug:Pt,eventBus:un,errHandler:Kn,events:dn.events,api:zt(Kt,sr)})):(Lt.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Lt.info("EME detected on this user agent! (DefaultProtectionModel"),pn(Gt).create({debug:Pt,eventBus:un,events:dn.events}))}(kt);return ln&&(Jt=Z(Gt).create({BASE64:kt.BASE64,cmcdModel:kt.cmcdModel,constants:kt.constants,customParametersModel:kt.customParametersModel,debug:kt.debug,eventBus:kt.eventBus,events:kt.events,protectionKeyController:en,protectionModel:ln,settings:kt.settings}),kt.capabilities.setEncryptedMediaSupported(!0)),Jt}},rn}Zr.__dashjs_factory_name="Protection";const Fr=dashjs.FactoryMaker.getClassFactory(Zr);Fr.events=Xe.default,Fr.errors=g.default,dashjs.FactoryMaker.updateClassFactory(Zr.__dashjs_factory_name,Fr);var ii=Fr},445:function(o,e,t){t.r(e);var n=t(7252);class r extends n.default{constructor(){super(),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_STATUSES_CHANGED="internalkeyStatusesChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_STATUSES_MAP_UPDATED="keyStatusesMapUpdated",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.LICENSE_REQUEST_SENDING="public_licenseRequestSending",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected",this.KEY_SESSION_UPDATED="public_keySessionUpdated"}}let i=new r;e.default=i},1923:function(o,e,t){t.r(e);var n=t(8748);class r extends n.default{constructor(){super(),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --"}}let i=new r;e.default=i},559:function(o,e,t){t.r(e),t.d(e,{supportsMediaSource:function(){return f}});var n=t(138),r=t(5212),i=t(2861),l=t(7393),c=t(649);function f(){let g="ManagedMediaSource"in window,p="WebKitMediaSource"in window,y="MediaSource"in window;return g||p||y}function h(){let g,p,y,T,b,w;const R=this.context,M=(0,l.default)(R).getInstance();function Y(F,k){let j;k===r.default.VIDEO?j=function(L){const Ee={video:{}};return L&&(L.width&&(Ee.video.width=L.width),L.height&&(Ee.video.height=L.height),L.framerate&&(Ee.video.framerate=parseFloat(L.framerate)),L.hdrMetadataType&&(Ee.video.hdrMetadataType=L.hdrMetadataType),L.colorGamut&&(Ee.video.colorGamut=L.colorGamut),L.transferFunction&&(Ee.video.transferFunction=L.transferFunction)),Ee}(F):k===r.default.AUDIO&&(j=function(L){const Ee={audio:{}};return L.samplerate&&(Ee.audio.samplerate=L.samplerate),Ee}(F)),j[k].contentType=F.codec,j[k].bitrate=parseInt(F.bitrate),j.type="media-source";let oe=F.codec;return F.width&&F.height&&(oe+=';width="'+F.width+'";height="'+F.height+'"'),j.mediaSourceCodecString=oe,function(L,Ee,Be){return Ee&&Ee.keySystemsMetadata&&Ee.keySystemsMetadata.length!==0?Ee.keySystemsMetadata.map(pe=>{const ct={...L};if(pe.ks){ct.keySystemConfiguration={},pe.ks.systemString&&(ct.keySystemConfiguration.keySystem=pe.ks.systemString);let Ye="";pe.ks.systemString===i.default.WIDEVINE_KEYSTEM_STRING&&(Ye=i.default.ROBUSTNESS_STRINGS.WIDEVINE.SW_SECURE_CRYPTO);const Le=pe.protData,Je=Le&&Le.audioRobustness&&Le.audioRobustness.length>0?Le.audioRobustness:Ye,Ge=Le&&Le.videoRobustness&&Le.videoRobustness.length>0?Le.videoRobustness:Ye;Be===r.default.AUDIO?ct.keySystemConfiguration[Be]={robustness:Je}:Be===r.default.VIDEO&&(ct.keySystemConfiguration[Be]={robustness:Ge})}return ct}):[L]}(j,F,k)}function Z(F){if(T&&T.length!==0&&F)return T.find(k=>{const j=ye(F,k,r.default.AUDIO),oe=ye(F,k,r.default.VIDEO),L=ye(F,k,"keySystemConfiguration");return j&&oe&&L})}function ye(F,k,j){return!F[j]&&!k[j]||!(!F[j]||!k[j])&&M.areEqual(F[j],k[j])}function Re(F,k){return(F=F.filter(j=>!(j.schemeIdUri&&k.some(oe=>oe.schemeIdUri===j.schemeIdUri)))).push(...k),F}return g={areKeyIdsExpired:function(F){return!!(y&&F&&F.normalizedKeyIds&&F.normalizedKeyIds.size!==0)&&y.areKeyIdsExpired(F.normalizedKeyIds)},areKeyIdsUsable:function(F){return!(y&&F&&F.normalizedKeyIds&&F.normalizedKeyIds.size!==0)||y.areKeyIdsUsable(F.normalizedKeyIds)},isCodecSupportedBasedOnTestedConfigurations:function(F,k){if(!F||!F.codec||F.isSupported===!1)return!1;const j=Y(F,k).map(oe=>Z(oe)).filter(oe=>oe!=null);return!(j&&j.length>0)||function(oe){return oe.some(L=>L&&L.decodingInfo&&L.decodingInfo.supported)}(j)},isProtectionCompatible:function(F,k){return!k||!(!F.isEncrypted&&k.isEncrypted)},runCodecSupportCheck:function(F,k){if(k!==r.default.AUDIO&&k!==r.default.VIDEO)return Promise.resolve();const j=Y(F,k);return function(oe,L){return p.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(oe.codec&&L===r.default.AUDIO||L===r.default.VIDEO&&oe.codec&&oe.width&&oe.height&&oe.bitrate&&oe.framerate)}(F,k)?function(oe){return new Promise(L=>{if(!oe||oe.length===0)return void L();const Ee=oe.map(Be=>function(pe){return new Promise(ct=>{Z(pe)?ct():navigator.mediaCapabilities.decodingInfo(pe).then(Ye=>{pe.decodingInfo=Ye,T.push(pe),ct()}).catch(Ye=>{pe.decodingInfo={supported:!1},T.push(pe),w.error(Ye),ct()})})}(Be));Promise.allSettled(Ee).then(()=>{L()}).catch(Be=>{w.error(Be),L()})})}(j):(function(oe){if(!oe||!oe.length)return;const L=oe[0];if(Z(L))return;let Ee={supported:!1};("ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(L.mediaSourceCodecString)||"MediaSource"in window&&MediaSource.isTypeSupported(L.mediaSourceCodecString)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(L.mediaSourceCodecString))&&(Ee.supported=!0),L.decodingInfo=Ee,T.push(L)}(j),Promise.resolve())},setConfig:function(F){F&&(F.settings&&(p=F.settings),F.protectionController&&(y=F.protectionController))},setEncryptedMediaSupported:function(F){b=F},setProtectionController:function(F){y=F},supportsChangeType:function(){return!!window.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType},supportsEncryptedMedia:function(){return b},supportsEssentialProperty:function(F){let k=p.get().streaming.capabilities.supportedEssentialProperties;p.get().streaming.capabilities.useMediaCapabilitiesApi&&p.get().streaming.capabilities.filterVideoColorimetryEssentialProperties&&(k=Re(k,[{schemeIdUri:r.default.COLOUR_PRIMARIES_SCHEME_ID_URI},{schemeIdUri:r.default.MATRIX_COEFFICIENTS_SCHEME_ID_URI},{schemeIdUri:r.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI}])),p.get().streaming.capabilities.useMediaCapabilitiesApi&&p.get().streaming.capabilities.filterHDRMetadataFormatEssentialProperties&&(k=Re(k,[{schemeIdUri:r.default.HDR_METADATA_FORMAT_SCHEME_ID_URI}]));try{return F.inArray(k)}catch{return!0}},supportsMediaSource:f},b=!1,T=[],w=(0,c.default)(R).getInstance().getLogger(g),g}h.__dashjs_factory_name="Capabilities",e.default=n.default.getSingletonFactory(h)},7377:function(o,e,t){t.r(e);var n=t(138),r=t(656);function i(){return{customTimeRangeArray:[],length:0,add:function(l,c){let f;for(f=0;f<this.customTimeRangeArray.length&&l>this.customTimeRangeArray[f].start;f++);for(this.customTimeRangeArray.splice(f,0,{start:l,end:c}),f=0;f<this.customTimeRangeArray.length-1;f++)this.mergeRanges(f,f+1)&&f--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(l,c){for(let f=0;f<this.customTimeRangeArray.length;f++)if(l<=this.customTimeRangeArray[f].start&&c>=this.customTimeRangeArray[f].end)this.customTimeRangeArray.splice(f,1),f--;else{if(l>this.customTimeRangeArray[f].start&&c<this.customTimeRangeArray[f].end){this.customTimeRangeArray.splice(f+1,0,{start:c,end:this.customTimeRangeArray[f].end}),this.customTimeRangeArray[f].end=l;break}l>this.customTimeRangeArray[f].start&&l<this.customTimeRangeArray[f].end?this.customTimeRangeArray[f].end=l:c>this.customTimeRangeArray[f].start&&c<this.customTimeRangeArray[f].end&&(this.customTimeRangeArray[f].start=c)}this.length=this.customTimeRangeArray.length},mergeRanges:function(l,c){let f=this.customTimeRangeArray[l],h=this.customTimeRangeArray[c];return f.start<=h.start&&h.start<=f.end&&f.end<=h.end?(f.end=h.end,this.customTimeRangeArray.splice(c,1),!0):h.start<=f.start&&f.start<=h.end&&h.end<=f.end?(f.start=h.start,this.customTimeRangeArray.splice(c,1),!0):h.start<=f.start&&f.start<=h.end&&f.end<=h.end?(this.customTimeRangeArray.splice(l,1),!0):f.start<=h.start&&h.start<=f.end&&h.end<=f.end&&(this.customTimeRangeArray.splice(c,1),!0)},start:function(l){return(0,r.checkInteger)(l),l>=this.customTimeRangeArray.length||l<0?NaN:this.customTimeRangeArray[l].start},end:function(l){return(0,r.checkInteger)(l),l>=this.customTimeRangeArray.length||l<0?NaN:this.customTimeRangeArray[l].end}}}i.__dashjs_factory_name="CustomTimeRanges",e.default=n.default.getClassFactory(i)},7393:function(o,e,t){t.r(e);var n=t(138),r=t(7316);function i(){let l;return l={areEqual:function(c,f){return r(c,f)}},l}i.__dashjs_factory_name="ObjectUtils",e.default=n.default.getSingletonFactory(i)},656:function(o,e,t){t.r(e),t.d(e,{checkInteger:function(){return i},checkIsVideoOrAudioType:function(){return c},checkParameterType:function(){return r},checkRange:function(){return l}});var n=t(5212);function r(f,h){if(typeof f!==h)throw n.default.BAD_ARGUMENT_ERROR}function i(f){if(f===null||isNaN(f)||f%1!=0)throw n.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function l(f,h,g){if(f<h||f>g)throw n.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function c(f){if(typeof f!="string"||f!==n.default.AUDIO&&f!==n.default.VIDEO)throw n.default.BAD_ARGUMENT_ERROR}},1944:function(o,e,t){t.r(e),e.default=class{constructor(n,r,i){this.code=n||null,this.message=r||null,this.data=i||null}}},7568:function(o,e,t){t.r(e),t.d(e,{HTTPRequest:function(){return n},HTTPRequestTrace:function(){return r}});class n{constructor(){this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null,this._resourceTimingValues=null}}class r{constructor(){this.s=null,this.d=null,this.b=[]}}n.GET="GET",n.HEAD="HEAD",n.MPD_TYPE="MPD",n.XLINK_EXPANSION_TYPE="XLinkExpansion",n.INIT_SEGMENT_TYPE="InitializationSegment",n.INDEX_SEGMENT_TYPE="IndexSegment",n.MEDIA_SEGMENT_TYPE="MediaSegment",n.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",n.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",n.DVB_REPORTING_TYPE="DVBReporting",n.LICENSE="license",n.CONTENT_STEERING_TYPE="ContentSteering",n.OTHER_TYPE="other"}},Q0={};function Pi(o){var e=Q0[o];if(e!==void 0)return e.exports;var t=Q0[o]={exports:{}};return ER[o].call(t.exports,t,t.exports,Pi),t.exports}Pi.amdO={},Pi.d=function(o,e){for(var t in e)Pi.o(e,t)&&!Pi.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:e[t]})},Pi.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Pi.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)},Pi.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var ss={};Pi.r(ss),Pi.d(ss,{Constants:function(){return mb.default},Debug:function(){return gb.default},MediaPlayer:function(){return bR.MediaPlayer},MediaPlayerFactory:function(){return hb},MetricsReporting:function(){return db.default},Protection:function(){return fb.default},default:function(){return SR},supportsMediaSource:function(){return pb.supportsMediaSource}});var bR=Pi(5393),db=Pi(4469),fb=Pi(3888),TR=Pi(255);let Z0,qh=function(){const o="application/dash+xml";let e;function t(r,i,l){if(!r||!/^VIDEO$/i.test(r.nodeName))return null;if(r._dashjs_player)return r._dashjs_player;let c,f=r.id||r.name||"video element";if(!(i=i||[].slice.call(r.querySelectorAll("source")).filter(function(h){return h.type==o})[0])&&r.src)(i=document.createElement("source")).src=r.src;else if(!i&&!r.src)return null;return l=l||{},c=(0,TR.default)(l).create(),c.initialize(r,i.src,r.autoplay),e||(e=c.getDebug().getLogger()),e.debug("Converted "+f+" to dash.js player and added content: "+i.src),r._dashjs_player=c,c}function n(r){return/^VIDEO$/i.test(r.nodeName)?r:n(r.parentNode)}return{create:t,createAll:function(r,i){let l=[];r=r||"[data-dashjs-player]";let c=(i=i||document).querySelectorAll(r);for(let h=0;h<c.length;h++){let g=t(c[h],null);l.push(g)}let f=i.querySelectorAll('source[type="'+o+'"]');for(let h=0;h<f.length;h++){let g=t(n(f[h]),null);l.push(g)}return l}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?qh.createAll():Z0=window.setInterval(function(){window.dashjs&&(window.clearInterval(Z0),qh.createAll())},500):window.addEventListener("load",function o(){window.removeEventListener("load",o),qh.createAll()}));var hb=qh,gb=Pi(649),mb=Pi(5212),pb=Pi(559);dashjs.Protection=fb.default,dashjs.MetricsReporting=db.default,dashjs.MediaPlayerFactory=hb,dashjs.Debug=gb.default,dashjs.supportsMediaSource=pb.supportsMediaSource,dashjs.Constants=mb.default;var SR=dashjs;(ss=ss.default).Constants;ss.Debug;ss.MediaPlayer;ss.MediaPlayerFactory;ss.MetricsReporting;ss.Protection;var Am=ss.default;ss.supportsMediaSource;const _R=30,xR=({stream:o,onNext:e,onPrev:t,onBack:n,onShowChannelOverlay:r,isOverlayActive:i})=>{if(!o)return O.jsx("div",{children:"Carregando canal..."});const l=ze.useRef(null),c=ze.useRef(null),f=ze.useRef(null),[h,g]=ze.useState(!1),[p,y]=ze.useState(null),[T,b]=ze.useState("Auto"),[w,R]=ze.useState([]),[M,Y]=ze.useState(!1),[Z,ye]=ze.useState(!1),Re=ze.useRef(null),F=()=>{ye(!0),Re.current&&clearTimeout(Re.current),Re.current=setTimeout(()=>{ye(!1)},3e3)},k=()=>{Re.current&&clearTimeout(Re.current),ye(!1)},j=()=>{const Ee=l.current;Ee&&(M?Ee.pause():Ee.play().catch(Be=>console.error("Erro ao reproduzir:",Be)),Y(!M))};ze.useEffect(()=>((()=>{var Le;const Be=l.current;if(!Be){console.error("Elemento de vídeo não encontrado.");return}Be.pause(),Be.src="",Be.load(),c.current&&(c.current.destroy(),c.current=null),f.current&&(f.current.reset(),f.current=null);const pe=(Le=o.direct_source)==null?void 0:Le.trim();if(!pe){console.error("Nenhuma fonte de vídeo válida para o canal atual.");return}const ct=pe.endsWith(".m3u8"),Ye=pe.endsWith(".mpd");if(R([]),b("Original"),y(null),ct&&Ba.isSupported()){const Je=new Ba({maxBufferLength:_R});c.current=Je,Je.attachMedia(Be),Je.loadSource(pe),Je.on(Ba.Events.MANIFEST_PARSED,()=>{const Ge=Je.levels.map(tt=>`${tt.height}p`);R(Ge),b("Auto"),Be.play().catch(tt=>console.error("Erro ao reproduzir HLS:",tt))}),Je.on(Ba.Events.LEVEL_SWITCHED,(Ge,tt)=>{const Ze=Je.levels[tt.level];y((Ze==null?void 0:Ze.bitrate)??null),b(Ze!=null&&Ze.height?`${Ze.height}p`:"Auto")}),Je.on(Ba.Events.ERROR,(Ge,tt)=>{console.error("HLS error:",tt)}),Be.onplay=()=>Y(!0),Be.onpause=()=>Y(!1)}else if(Ye){const Je=Am.MediaPlayer().create();Je.initialize(Be,pe,!0),f.current=Je,Je.on(Am.MediaPlayer.events.MANIFEST_LOADED,()=>{const tt=Je.getBitrateInfoListFor("video").map(Ze=>Ze.height?`${Ze.height}p`:`${Ze.bandwidth/1e3}kbps`);R(tt),b("Auto"),Be.play().catch(Ze=>console.error("Erro ao reproduzir DASH:",Ze))}),Je.on(Am.MediaPlayer.events.QUALITY_CHANGE_RENDERED,Ge=>{const tt=Je.getQualityFor("video")!==-1?Je.getBitrateInfoListFor("video")[Je.getQualityFor("video")]:null;tt&&(y(tt.bandwidth),b(tt.height?`${tt.height}p`:`${tt.bandwidth/1e3}kbps`))}),Be.onplay=()=>Y(!0),Be.onpause=()=>Y(!1)}else Be.src=pe,Be.load(),Be.onplay=()=>Y(!0),Be.onpause=()=>Y(!1),Be.play().catch(Je=>console.error("Erro ao reproduzir nativo:",Je))})(),()=>{c.current&&c.current.destroy(),f.current&&f.current.reset()}),[o]),ze.useEffect(()=>{const Ee=Be=>{i||(Be.key==="ArrowLeft"?t==null||t():Be.key==="ArrowRight"?e==null||e():Be.key==="ArrowUp"&&(r==null||r()))};return window.addEventListener("keydown",Ee),()=>{window.removeEventListener("keydown",Ee)}},[t,e,r,i]);const oe=()=>{var Be;const Ee=(Be=l.current)==null?void 0:Be.parentElement;Ee&&(document.fullscreenElement?(document.exitFullscreen().catch(pe=>console.error(pe)),g(!1)):(Ee.requestFullscreen().catch(pe=>console.error(pe)),g(!0)))},L=Ee=>{if(c.current){if(Ee==="Auto")c.current.currentLevel=-1;else{const Be=c.current.levels.findIndex(pe=>`${pe.height}p`===Ee);Be!==-1&&(c.current.currentLevel=Be)}b(Ee);return}if(f.current){if(Ee==="Auto")f.current.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!0}}}});else{const Be=f.current,pe=Be.getBitrateInfoListFor("video"),ct=pe.find(Ye=>Ye.height?`${Ye.height}p`===Ee:`${Ye.bandwidth/1e5}kbps`===Ee);ct&&(Be.setQualityFor("video",pe.indexOf(ct)),Be.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!1}}}}))}b(Ee)}};return O.jsxs("div",{className:`video-container ${h?"fullscreen":""}`,onMouseMove:F,onMouseLeave:k,children:[O.jsxs("div",{className:`video-overlay ${Z?"visible":"hidden"}`,children:[O.jsxs("div",{className:"video-info",children:[O.jsx("h2",{children:o.name||"Canal desconhecido"}),p&&O.jsxs("span",{children:[(p/1e3).toFixed(0)," kbps"]}),O.jsx("span",{children:T})]}),O.jsxs("div",{className:"video-controls",children:[O.jsx("button",{onClick:t,children:"⏮️"}),O.jsx("button",{onClick:oe,children:h?" Sair Fullscreen":" Fullscreen"}),O.jsx("button",{onClick:e,children:"⏭️"}),O.jsx("button",{onClick:j,children:M?"❚❚ Pausar":"▶ Reproduzir"}),n&&O.jsx("button",{onClick:n,children:"Voltar"}),w.length>0&&O.jsxs("select",{value:T,onChange:Ee=>L(Ee.target.value),children:[O.jsx("option",{value:"Auto",children:"Auto"}),w.map(Ee=>O.jsx("option",{value:Ee,children:Ee},Ee))]})]})]}),O.jsx("video",{ref:l,className:"video-player",controls:!1,muted:!1},o.stream_id)]})};function wR({connectionId:o,onBack:e,onPlayStream:t,onToggleFavorite:n,favorites:r=[],apiBase:i}){const[l,c]=ze.useState(""),[f,h]=ze.useState([]),[g,p]=ze.useState(!1),[y,T]=ze.useState("all"),[b,w]=ze.useState([]),R=ze.useRef(null),M=[{id:"all",label:"Todos",icon:Ol},{id:"live",label:"TV ao Vivo",icon:as},{id:"movie",label:"Filmes",icon:Md},{id:"series",label:"Séries",icon:Od}];ze.useEffect(()=>{var oe;const j=localStorage.getItem("iptv_recent_searches");j&&w(JSON.parse(j)),(oe=R.current)==null||oe.focus()},[]),ze.useEffect(()=>{if(l.trim().length>=2){const j=setTimeout(()=>{Y(l,y)},500);return()=>clearTimeout(j)}else h([])},[l,y]);const Y=async(j,oe)=>{if(j.trim()){p(!0),h([]);try{let L=[];if(oe==="all"){const Be=["live","movie","series"].map(ct=>fetch(`${i}/search/${o}/${ct}?q=${encodeURIComponent(j)}`).then(Ye=>Ye.json()));(await Promise.all(Be)).forEach(ct=>{ct.success&&ct.streams&&(L=[...L,...ct.streams])})}else{const pe=await(await fetch(`${i}/search/${o}/${oe}?q=${encodeURIComponent(j)}`)).json();pe.success&&pe.streams&&(L=pe.streams)}h(L);const Ee=[j,...b.filter(Be=>Be!==j)].slice(0,10);w(Ee),localStorage.setItem("iptv_recent_searches",JSON.stringify(Ee))}catch(L){console.error("Search error:",L)}finally{p(!1)}}},Z=j=>{c(j)},ye=()=>{w([]),localStorage.removeItem("iptv_recent_searches")},Re=j=>{switch(j){case"live":return O.jsx(as,{className:"w-4 h-4"});case"movie":return O.jsx(Md,{className:"w-4 h-4"});case"series":return O.jsx(Od,{className:"w-4 h-4"});default:return O.jsx(is,{className:"w-4 h-4"})}},F=j=>{switch(j){case"live":return"AO VIVO";case"movie":return"FILME";case"series":return"SÉRIE";default:return"CONTEÚDO"}},k=j=>r.includes(j);return O.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white",children:[O.jsx("header",{className:"bg-black/50 backdrop-blur-sm border-b border-purple-500/30 p-4",children:O.jsx("div",{className:"flex items-center justify-between",children:O.jsxs("div",{className:"flex items-center space-x-4",children:[O.jsxs(vr,{variant:"ghost",size:"sm",onClick:e,className:"text-purple-300 hover:bg-purple-500/20",children:[O.jsx(cc,{className:"w-4 h-4 mr-2"}),"Voltar"]}),O.jsxs("div",{className:"flex items-center space-x-2",children:[O.jsx(Ol,{className:"w-6 h-6 text-purple-400"}),O.jsx("h1",{className:"text-xl font-bold",children:"Buscar Conteúdo"})]})]})})}),O.jsxs("div",{className:"p-6 space-y-6",children:[O.jsx(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm",children:O.jsx(Nr,{className:"p-4",children:O.jsxs("div",{className:"relative",children:[O.jsx(Ol,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),O.jsx(Rd,{ref:R,placeholder:"Digite o nome do canal, filme ou série...",value:l,onChange:j=>c(j.target.value),className:"pl-12 bg-gray-800/50 border-gray-600 text-white placeholder-gray-400 focus:border-purple-500 text-lg py-3"}),l&&O.jsx(vr,{variant:"ghost",size:"sm",onClick:()=>c(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:O.jsx(Tv,{className:"w-4 h-4"})})]})})}),O.jsx("div",{className:"flex flex-wrap gap-2",children:M.map(j=>{const oe=j.icon;return O.jsxs(vr,{variant:y===j.id?"default":"outline",onClick:()=>T(j.id),className:`${y===j.id?"bg-purple-600 text-white":"border-purple-500/50 text-purple-300 hover:bg-purple-500/20"}`,children:[O.jsx(oe,{className:"w-4 h-4 mr-2"}),j.label]},j.id)})}),!l&&b.length>0&&O.jsxs(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm",children:[O.jsx(Ii,{children:O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs(Ai,{className:"flex items-center text-white",children:[O.jsx(Pd,{className:"w-5 h-5 mr-2 text-purple-400"}),"Buscas Recentes"]}),O.jsx(vr,{variant:"ghost",size:"sm",onClick:ye,className:"text-gray-400 hover:text-white",children:"Limpar"})]})}),O.jsx(Nr,{children:O.jsx("div",{className:"flex flex-wrap gap-2",children:b.map((j,oe)=>O.jsx(vr,{variant:"outline",size:"sm",onClick:()=>Z(j),className:"border-gray-600 text-gray-300 hover:bg-gray-700/50",children:j},oe))})})]}),g&&O.jsxs("div",{className:"flex items-center justify-center py-12",children:[O.jsx(ao,{className:"w-8 h-8 animate-spin text-purple-400"}),O.jsx("span",{className:"ml-2 text-gray-300",children:"Buscando..."})]}),f.length>0&&O.jsxs(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm",children:[O.jsx(Ii,{children:O.jsxs(Ai,{className:"text-white",children:["Resultados da Busca",O.jsxs(qa,{variant:"secondary",className:"ml-2 bg-purple-500/20 text-purple-300",children:[f.length," encontrados"]})]})}),O.jsx(Nr,{children:O.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(j=>O.jsx(Cr,{className:"bg-gray-800/50 border-gray-600 hover:bg-gray-700/50 transition-all duration-300 cursor-pointer group",onClick:()=>t(j),children:O.jsx(Nr,{className:"p-4",children:O.jsxs("div",{className:"flex items-start space-x-3",children:[O.jsx("div",{className:"w-16 h-12 bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded overflow-hidden flex-shrink-0",children:j.stream_icon?O.jsx("img",{src:j.stream_icon,alt:j.name,className:"w-full h-full object-cover",onError:oe=>{oe.target.style.display="none"}}):O.jsx("div",{className:"w-full h-full flex items-center justify-center",children:Re(j.stream_type)})}),O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsx("h4",{className:"text-sm font-medium text-white truncate group-hover:text-purple-300 transition-colors",children:j.name}),O.jsxs("div",{className:"flex items-center justify-between mt-2",children:[O.jsx(qa,{variant:"secondary",className:"text-xs bg-purple-500/20 text-purple-300",children:F(j.stream_type)}),O.jsxs("div",{className:"flex items-center space-x-2",children:[O.jsx(vr,{variant:"ghost",size:"sm",onClick:oe=>{oe.stopPropagation(),n(j.stream_id)},className:"w-8 h-8 p-0 hover:bg-gray-600/50",children:O.jsx(Vo,{className:`w-4 h-4 ${k(j.stream_id)?"text-yellow-400 fill-yellow-400":"text-gray-400"}`})}),O.jsx(is,{className:"w-4 h-4 text-purple-400 group-hover:text-purple-300 transition-colors"})]})]})]})]})})},j.stream_id))})})]}),l.trim().length>=2&&!g&&f.length===0&&O.jsxs("div",{className:"text-center py-12",children:[O.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-purple-500/20 to-blue-500/20 rounded-full flex items-center justify-center mb-4",children:O.jsx(Ol,{className:"w-8 h-8 text-purple-400"})}),O.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Nenhum resultado encontrado"}),O.jsx("p",{className:"text-gray-400",children:"Tente usar palavras-chave diferentes ou verifique a ortografia"})]}),!l&&b.length===0&&O.jsxs(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm",children:[O.jsx(Ii,{children:O.jsx(Ai,{className:"text-white",children:"Dicas de Busca"})}),O.jsxs(Nr,{className:"space-y-3 text-gray-300",children:[O.jsxs("div",{className:"flex items-start space-x-3",children:[O.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full mt-2 flex-shrink-0"}),O.jsx("p",{children:"Digite pelo menos 2 caracteres para iniciar a busca"})]}),O.jsxs("div",{className:"flex items-start space-x-3",children:[O.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full mt-2 flex-shrink-0"}),O.jsx("p",{children:"Use filtros para refinar os resultados por tipo de conteúdo"})]}),O.jsxs("div",{className:"flex items-start space-x-3",children:[O.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full mt-2 flex-shrink-0"}),O.jsx("p",{children:"Suas buscas recentes ficam salvas para acesso rápido"})]})]})]})]})]})}function IR({connectionId:o,onBack:e,onPlayChannel:t,apiBase:n}){const[r,i]=ze.useState(new Date),[l,c]=ze.useState([]),[f,h]=ze.useState({}),[g,p]=ze.useState(!1),[y,T]=ze.useState(null),[b,w]=ze.useState([]);ze.useEffect(()=>{R(),Y()},[]),ze.useEffect(()=>{l.length>0&&M()},[r,l]);const R=async()=>{try{p(!0);const L=await(await fetch(`${n}/streams/${o}/live?limit=20`)).json();L.success&&(c(L.streams),L.streams.length>0&&T(L.streams[0]))}catch(oe){console.error("Error loading channels:",oe)}finally{p(!1)}},M=async()=>{try{p(!0);const oe=l.slice(0,10).map(async Be=>{try{const ct=await(await fetch(`${n}/epg/${o}/${Be.stream_id}`)).json();if(ct.success)return{channelId:Be.stream_id,programs:ct.epg}}catch(pe){console.error(`Error loading EPG for channel ${Be.stream_id}:`,pe)}return{channelId:Be.stream_id,programs:[]}}),L=await Promise.all(oe),Ee={};L.forEach(Be=>{Ee[Be.channelId]=Be.programs}),h(Ee)}catch(oe){console.error("Error loading EPG data:",oe)}finally{p(!1)}},Y=()=>{const oe=[];for(let Be=0;Be<24;Be++)oe.push({time:`${Be.toString().padStart(2,"0")}:00`,hour:Be});w(oe)},Z=oe=>oe.toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),ye=oe=>oe?new Date(oe).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):"",Re=oe=>{const L=new Date(r);L.setDate(L.getDate()+oe),i(L)},F=oe=>{if(!oe.start_time||!oe.end_time)return!1;const L=new Date,Ee=new Date(oe.start_time),Be=new Date(oe.end_time);return L>=Ee&&L<=Be},k=(oe,L)=>(f[oe]||[]).filter(Be=>Be.start_time?new Date(Be.start_time).getHours()===L:!1),j=oe=>(f[oe]||[]).find(Ee=>F(Ee));return O.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white",children:[O.jsx("header",{className:"bg-black/50 backdrop-blur-sm border-b border-purple-500/30 p-4",children:O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center space-x-4",children:[O.jsxs(vr,{variant:"ghost",size:"sm",onClick:e,className:"text-purple-300 hover:bg-purple-500/20",children:[O.jsx(cc,{className:"w-4 h-4 mr-2"}),"Voltar"]}),O.jsxs("div",{className:"flex items-center space-x-2",children:[O.jsx(pv,{className:"w-6 h-6 text-purple-400"}),O.jsx("h1",{className:"text-xl font-bold",children:"Guia de Programação (EPG)"})]})]}),O.jsxs("div",{className:"flex items-center space-x-4",children:[O.jsx(vr,{variant:"ghost",size:"sm",onClick:()=>Re(-1),className:"text-purple-300 hover:bg-purple-500/20",children:O.jsx(yv,{className:"w-4 h-4"})}),O.jsx("div",{className:"text-center",children:O.jsx("div",{className:"text-lg font-semibold",children:Z(r)})}),O.jsx(vr,{variant:"ghost",size:"sm",onClick:()=>Re(1),className:"text-purple-300 hover:bg-purple-500/20",children:O.jsx(vv,{className:"w-4 h-4"})})]})]})}),O.jsx("div",{className:"p-6 space-y-6",children:g?O.jsxs("div",{className:"flex items-center justify-center py-12",children:[O.jsx(ao,{className:"w-8 h-8 animate-spin text-purple-400"}),O.jsx("span",{className:"ml-2 text-gray-300",children:"Carregando programação..."})]}):O.jsxs("div",{className:"space-y-6",children:[O.jsxs(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm",children:[O.jsx(Ii,{children:O.jsxs(Ai,{className:"flex items-center text-white",children:[O.jsx(as,{className:"w-5 h-5 mr-2 text-purple-400"}),"Programação Atual"]})}),O.jsx(Nr,{children:O.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.slice(0,6).map(oe=>{const L=j(oe.stream_id);return O.jsx(Cr,{className:"bg-gray-800/50 border-gray-600 hover:bg-gray-700/50 transition-all duration-300 cursor-pointer",onClick:()=>t(oe),children:O.jsx(Nr,{className:"p-4",children:O.jsxs("div",{className:"flex items-start space-x-3",children:[O.jsx("div",{className:"w-12 h-8 bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded overflow-hidden flex-shrink-0",children:oe.stream_icon?O.jsx("img",{src:oe.stream_icon,alt:oe.name,className:"w-full h-full object-cover",onError:Ee=>{Ee.target.style.display="none"}}):O.jsx("div",{className:"w-full h-full flex items-center justify-center",children:O.jsx(as,{className:"w-4 h-4 text-purple-400"})})}),O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsx("h4",{className:"text-sm font-medium text-white truncate",children:oe.name}),L?O.jsxs("div",{className:"mt-1",children:[O.jsx("p",{className:"text-xs text-purple-300 truncate",children:L.title}),O.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[O.jsx(qa,{className:"bg-green-500/20 text-green-300 text-xs",children:"AO VIVO"}),O.jsxs("span",{className:"text-xs text-gray-400",children:[ye(L.start_time)," - ",ye(L.end_time)]})]})]}):O.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Programação não disponível"})]}),O.jsx(is,{className:"w-4 h-4 text-purple-400 flex-shrink-0"})]})})},oe.stream_id)})})})]}),O.jsxs(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm",children:[O.jsx(Ii,{children:O.jsx(Ai,{className:"text-white",children:"Grade de Programação"})}),O.jsx(Nr,{children:O.jsx("div",{className:"overflow-x-auto",children:O.jsxs("div",{className:"min-w-full",children:[O.jsxs("div",{className:"flex border-b border-gray-600 pb-2 mb-4",children:[O.jsx("div",{className:"w-48 flex-shrink-0 text-sm font-medium text-gray-300",children:"Canal"}),b.map(oe=>O.jsx("div",{className:"w-32 flex-shrink-0 text-center text-sm font-medium text-gray-300",children:oe.time},oe.time))]}),O.jsx("div",{className:"space-y-2",children:l.slice(0,10).map(oe=>O.jsxs("div",{className:"flex items-center",children:[O.jsx("div",{className:"w-48 flex-shrink-0 pr-4",children:O.jsxs("div",{className:"flex items-center space-x-2",children:[O.jsx("div",{className:"w-8 h-6 bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded overflow-hidden",children:oe.stream_icon?O.jsx("img",{src:oe.stream_icon,alt:oe.name,className:"w-full h-full object-cover",onError:L=>{L.target.style.display="none"}}):O.jsx("div",{className:"w-full h-full flex items-center justify-center",children:O.jsx(as,{className:"w-3 h-3 text-purple-400"})})}),O.jsx("span",{className:"text-sm text-white truncate",children:oe.name})]})}),b.map(L=>{const Be=k(oe.stream_id,L.hour)[0];return O.jsx("div",{className:"w-32 flex-shrink-0 h-12 border border-gray-700 bg-gray-800/30 p-1",children:Be?O.jsxs("div",{className:`w-full h-full rounded p-1 text-xs cursor-pointer transition-colors ${F(Be)?"bg-purple-600/50 text-white":"bg-gray-700/50 text-gray-300 hover:bg-gray-600/50"}`,title:Be.description||Be.title,children:[O.jsx("div",{className:"truncate font-medium",children:Be.title}),O.jsx("div",{className:"text-xs text-gray-400",children:ye(Be.start_time)})]}):O.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:O.jsx("span",{className:"text-xs",children:"-"})})},`${oe.stream_id}-${L.time}`)})]},oe.stream_id))})]})})})]}),O.jsx(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm",children:O.jsx(Nr,{className:"p-4",children:O.jsxs("div",{className:"flex items-center justify-center space-x-6 text-sm",children:[O.jsxs("div",{className:"flex items-center space-x-2",children:[O.jsx("div",{className:"w-4 h-4 bg-purple-600/50 rounded"}),O.jsx("span",{className:"text-gray-300",children:"Programa Atual"})]}),O.jsxs("div",{className:"flex items-center space-x-2",children:[O.jsx("div",{className:"w-4 h-4 bg-gray-700/50 rounded"}),O.jsx("span",{className:"text-gray-300",children:"Próximos Programas"})]}),O.jsxs("div",{className:"flex items-center space-x-2",children:[O.jsx(Pd,{className:"w-4 h-4 text-purple-400"}),O.jsx("span",{className:"text-gray-300",children:"Horários em GMT-3"})]})]})})})]})})]})}function Gp(o,[e,t]){return Math.min(t,Math.max(e,o))}function Xr(o,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(o==null||o(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function AR(o,e){const t=ze.createContext(e),n=i=>{const{children:l,...c}=i,f=ze.useMemo(()=>c,Object.values(c));return O.jsx(t.Provider,{value:f,children:l})};n.displayName=o+"Provider";function r(i){const l=ze.useContext(t);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${o}\``)}return[n,r]}function Bl(o,e=[]){let t=[];function n(i,l){const c=ze.createContext(l),f=t.length;t=[...t,l];const h=p=>{var M;const{scope:y,children:T,...b}=p,w=((M=y==null?void 0:y[o])==null?void 0:M[f])||c,R=ze.useMemo(()=>b,Object.values(b));return O.jsx(w.Provider,{value:R,children:T})};h.displayName=i+"Provider";function g(p,y){var w;const T=((w=y==null?void 0:y[o])==null?void 0:w[f])||c,b=ze.useContext(T);if(b)return b;if(l!==void 0)return l;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[h,g]}const r=()=>{const i=t.map(l=>ze.createContext(l));return function(c){const f=(c==null?void 0:c[o])||i;return ze.useMemo(()=>({[`__scope${o}`]:{...c,[o]:f}}),[c,f])}};return r.scopeName=o,[n,kR(r,...e)]}function kR(...o){const e=o[0];if(o.length===1)return e;const t=()=>{const n=o.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const l=n.reduce((c,{useScope:f,scopeName:h})=>{const p=f(i)[`__scope${h}`];return{...c,...p}},{});return ze.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}var Wo=globalThis!=null&&globalThis.document?ze.useLayoutEffect:()=>{},RR=hv[" useInsertionEffect ".trim().toString()]||Wo;function hc({prop:o,defaultProp:e,onChange:t=()=>{},caller:n}){const[r,i,l]=CR({defaultProp:e,onChange:t}),c=o!==void 0,f=c?o:r;{const g=ze.useRef(o!==void 0);ze.useEffect(()=>{const p=g.current;p!==c&&console.warn(`${n} is changing from ${p?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=c},[c,n])}const h=ze.useCallback(g=>{var p;if(c){const y=NR(g)?g(o):g;y!==o&&((p=l.current)==null||p.call(l,y))}else i(g)},[c,o,i,l]);return[f,h]}function CR({defaultProp:o,onChange:e}){const[t,n]=ze.useState(o),r=ze.useRef(t),i=ze.useRef(e);return RR(()=>{i.current=e},[e]),ze.useEffect(()=>{var l;r.current!==t&&((l=i.current)==null||l.call(i,t),r.current=t)},[t,r]),[t,n,i]}function NR(o){return typeof o=="function"}var DR=ze.createContext(void 0);function $p(o){const e=ze.useContext(DR);return o||e||"ltr"}function yb(o){const e=ze.useRef({value:o,previous:o});return ze.useMemo(()=>(e.current.value!==o&&(e.current.previous=e.current.value,e.current.value=o),e.current.previous),[o])}function vb(o){const[e,t]=ze.useState(void 0);return Wo(()=>{if(o){t({width:o.offsetWidth,height:o.offsetHeight});const n=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let l,c;if("borderBoxSize"in i){const f=i.borderBoxSize,h=Array.isArray(f)?f[0]:f;l=h.inlineSize,c=h.blockSize}else l=o.offsetWidth,c=o.offsetHeight;t({width:l,height:c})});return n.observe(o,{box:"border-box"}),()=>n.unobserve(o)}else t(void 0)},[o]),e}function Eb(o){const e=o+"CollectionProvider",[t,n]=Bl(e),[r,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=w=>{const{scope:R,children:M}=w,Y=ui.useRef(null),Z=ui.useRef(new Map).current;return O.jsx(r,{scope:R,itemMap:Z,collectionRef:Y,children:M})};l.displayName=e;const c=o+"CollectionSlot",f=Fd(c),h=ui.forwardRef((w,R)=>{const{scope:M,children:Y}=w,Z=i(c,M),ye=Gr(R,Z.collectionRef);return O.jsx(f,{ref:ye,children:Y})});h.displayName=c;const g=o+"CollectionItemSlot",p="data-radix-collection-item",y=Fd(g),T=ui.forwardRef((w,R)=>{const{scope:M,children:Y,...Z}=w,ye=ui.useRef(null),Re=Gr(R,ye),F=i(g,M);return ui.useEffect(()=>(F.itemMap.set(ye,{ref:ye,...Z}),()=>void F.itemMap.delete(ye))),O.jsx(y,{[p]:"",ref:Re,children:Y})});T.displayName=g;function b(w){const R=i(o+"CollectionConsumer",w);return ui.useCallback(()=>{const Y=R.collectionRef.current;if(!Y)return[];const Z=Array.from(Y.querySelectorAll(`[${p}]`));return Array.from(R.itemMap.values()).sort((F,k)=>Z.indexOf(F.ref.current)-Z.indexOf(k.ref.current))},[R.collectionRef,R.itemMap])}return[{Provider:l,Slot:h,ItemSlot:T},b,n]}var bb=["PageUp","PageDown"],Tb=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Sb={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},gc="Slider",[up,LR,PR]=Eb(gc),[_b,CD]=Bl(gc,[PR]),[MR,ug]=_b(gc),xb=ze.forwardRef((o,e)=>{const{name:t,min:n=0,max:r=100,step:i=1,orientation:l="horizontal",disabled:c=!1,minStepsBetweenThumbs:f=0,defaultValue:h=[n],value:g,onValueChange:p=()=>{},onValueCommit:y=()=>{},inverted:T=!1,form:b,...w}=o,R=ze.useRef(new Set),M=ze.useRef(0),Z=l==="horizontal"?OR:FR,[ye=[],Re]=hc({prop:g,defaultProp:h,onChange:Ee=>{var pe;(pe=[...R.current][M.current])==null||pe.focus(),p(Ee)}}),F=ze.useRef(ye);function k(Ee){const Be=qR(ye,Ee);L(Ee,Be)}function j(Ee){L(Ee,M.current)}function oe(){const Ee=F.current[M.current];ye[M.current]!==Ee&&y(ye)}function L(Ee,Be,{commit:pe}={commit:!1}){const ct=VR(i),Ye=KR(Math.round((Ee-n)/i)*i+n,ct),Le=Gp(Ye,[n,r]);Re((Je=[])=>{const Ge=BR(Je,Le,Be);if(HR(Ge,f*i)){M.current=Ge.indexOf(Le);const tt=String(Ge)!==String(Je);return tt&&pe&&y(Ge),tt?Ge:Je}else return Je})}return O.jsx(MR,{scope:o.__scopeSlider,name:t,disabled:c,min:n,max:r,valueIndexToChangeRef:M,thumbs:R.current,values:ye,orientation:l,form:b,children:O.jsx(up.Provider,{scope:o.__scopeSlider,children:O.jsx(up.Slot,{scope:o.__scopeSlider,children:O.jsx(Z,{"aria-disabled":c,"data-disabled":c?"":void 0,...w,ref:e,onPointerDown:Xr(w.onPointerDown,()=>{c||(F.current=ye)}),min:n,max:r,inverted:T,onSlideStart:c?void 0:k,onSlideMove:c?void 0:j,onSlideEnd:c?void 0:oe,onHomeKeyDown:()=>!c&&L(n,0,{commit:!0}),onEndKeyDown:()=>!c&&L(r,ye.length-1,{commit:!0}),onStepKeyDown:({event:Ee,direction:Be})=>{if(!c){const Ye=bb.includes(Ee.key)||Ee.shiftKey&&Tb.includes(Ee.key)?10:1,Le=M.current,Je=ye[Le],Ge=i*Ye*Be;L(Je+Ge,Le,{commit:!0})}}})})})})});xb.displayName=gc;var[wb,Ib]=_b(gc,{startEdge:"left",endEdge:"right",size:"width",direction:1}),OR=ze.forwardRef((o,e)=>{const{min:t,max:n,dir:r,inverted:i,onSlideStart:l,onSlideMove:c,onSlideEnd:f,onStepKeyDown:h,...g}=o,[p,y]=ze.useState(null),T=Gr(e,Z=>y(Z)),b=ze.useRef(void 0),w=$p(r),R=w==="ltr",M=R&&!i||!R&&i;function Y(Z){const ye=b.current||p.getBoundingClientRect(),Re=[0,ye.width],k=Hp(Re,M?[t,n]:[n,t]);return b.current=ye,k(Z-ye.left)}return O.jsx(wb,{scope:o.__scopeSlider,startEdge:M?"left":"right",endEdge:M?"right":"left",direction:M?1:-1,size:"width",children:O.jsx(Ab,{dir:w,"data-orientation":"horizontal",...g,ref:T,style:{...g.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:Z=>{const ye=Y(Z.clientX);l==null||l(ye)},onSlideMove:Z=>{const ye=Y(Z.clientX);c==null||c(ye)},onSlideEnd:()=>{b.current=void 0,f==null||f()},onStepKeyDown:Z=>{const Re=Sb[M?"from-left":"from-right"].includes(Z.key);h==null||h({event:Z,direction:Re?-1:1})}})})}),FR=ze.forwardRef((o,e)=>{const{min:t,max:n,inverted:r,onSlideStart:i,onSlideMove:l,onSlideEnd:c,onStepKeyDown:f,...h}=o,g=ze.useRef(null),p=Gr(e,g),y=ze.useRef(void 0),T=!r;function b(w){const R=y.current||g.current.getBoundingClientRect(),M=[0,R.height],Z=Hp(M,T?[n,t]:[t,n]);return y.current=R,Z(w-R.top)}return O.jsx(wb,{scope:o.__scopeSlider,startEdge:T?"bottom":"top",endEdge:T?"top":"bottom",size:"height",direction:T?1:-1,children:O.jsx(Ab,{"data-orientation":"vertical",...h,ref:p,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const R=b(w.clientY);i==null||i(R)},onSlideMove:w=>{const R=b(w.clientY);l==null||l(R)},onSlideEnd:()=>{y.current=void 0,c==null||c()},onStepKeyDown:w=>{const M=Sb[T?"from-bottom":"from-top"].includes(w.key);f==null||f({event:w,direction:M?-1:1})}})})}),Ab=ze.forwardRef((o,e)=>{const{__scopeSlider:t,onSlideStart:n,onSlideMove:r,onSlideEnd:i,onHomeKeyDown:l,onEndKeyDown:c,onStepKeyDown:f,...h}=o,g=ug(gc,t);return O.jsx(jr.span,{...h,ref:e,onKeyDown:Xr(o.onKeyDown,p=>{p.key==="Home"?(l(p),p.preventDefault()):p.key==="End"?(c(p),p.preventDefault()):bb.concat(Tb).includes(p.key)&&(f(p),p.preventDefault())}),onPointerDown:Xr(o.onPointerDown,p=>{const y=p.target;y.setPointerCapture(p.pointerId),p.preventDefault(),g.thumbs.has(y)?y.focus():n(p)}),onPointerMove:Xr(o.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&r(p)}),onPointerUp:Xr(o.onPointerUp,p=>{const y=p.target;y.hasPointerCapture(p.pointerId)&&(y.releasePointerCapture(p.pointerId),i(p))})})}),kb="SliderTrack",Rb=ze.forwardRef((o,e)=>{const{__scopeSlider:t,...n}=o,r=ug(kb,t);return O.jsx(jr.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...n,ref:e})});Rb.displayName=kb;var cp="SliderRange",Cb=ze.forwardRef((o,e)=>{const{__scopeSlider:t,...n}=o,r=ug(cp,t),i=Ib(cp,t),l=ze.useRef(null),c=Gr(e,l),f=r.values.length,h=r.values.map(y=>Lb(y,r.min,r.max)),g=f>1?Math.min(...h):0,p=100-Math.max(...h);return O.jsx(jr.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...n,ref:c,style:{...o.style,[i.startEdge]:g+"%",[i.endEdge]:p+"%"}})});Cb.displayName=cp;var dp="SliderThumb",Nb=ze.forwardRef((o,e)=>{const t=LR(o.__scopeSlider),[n,r]=ze.useState(null),i=Gr(e,c=>r(c)),l=ze.useMemo(()=>n?t().findIndex(c=>c.ref.current===n):-1,[t,n]);return O.jsx(zR,{...o,ref:i,index:l})}),zR=ze.forwardRef((o,e)=>{const{__scopeSlider:t,index:n,name:r,...i}=o,l=ug(dp,t),c=Ib(dp,t),[f,h]=ze.useState(null),g=Gr(e,Y=>h(Y)),p=f?l.form||!!f.closest("form"):!0,y=vb(f),T=l.values[n],b=T===void 0?0:Lb(T,l.min,l.max),w=jR(n,l.values.length),R=y==null?void 0:y[c.size],M=R?GR(R,b,c.direction):0;return ze.useEffect(()=>{if(f)return l.thumbs.add(f),()=>{l.thumbs.delete(f)}},[f,l.thumbs]),O.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${b}% + ${M}px)`},children:[O.jsx(up.ItemSlot,{scope:o.__scopeSlider,children:O.jsx(jr.span,{role:"slider","aria-label":o["aria-label"]||w,"aria-valuemin":l.min,"aria-valuenow":T,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...i,ref:g,style:T===void 0?{display:"none"}:o.style,onFocus:Xr(o.onFocus,()=>{l.valueIndexToChangeRef.current=n})})}),p&&O.jsx(Db,{name:r??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:T},n)]})});Nb.displayName=dp;var UR="RadioBubbleInput",Db=ze.forwardRef(({__scopeSlider:o,value:e,...t},n)=>{const r=ze.useRef(null),i=Gr(r,n),l=yb(e);return ze.useEffect(()=>{const c=r.current;if(!c)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"value").set;if(l!==e&&g){const p=new Event("input",{bubbles:!0});g.call(c,e),c.dispatchEvent(p)}},[l,e]),O.jsx(jr.input,{style:{display:"none"},...t,ref:i,defaultValue:e})});Db.displayName=UR;function BR(o=[],e,t){const n=[...o];return n[t]=e,n.sort((r,i)=>r-i)}function Lb(o,e,t){const i=100/(t-e)*(o-e);return Gp(i,[0,100])}function jR(o,e){return e>2?`Value ${o+1} of ${e}`:e===2?["Minimum","Maximum"][o]:void 0}function qR(o,e){if(o.length===1)return 0;const t=o.map(r=>Math.abs(r-e)),n=Math.min(...t);return t.indexOf(n)}function GR(o,e,t){const n=o/2,i=Hp([0,50],[0,n]);return(n-i(e)*t)*t}function $R(o){return o.slice(0,-1).map((e,t)=>o[t+1]-e)}function HR(o,e){if(e>0){const t=$R(o);return Math.min(...t)>=e}return!0}function Hp(o,e){return t=>{if(o[0]===o[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(o[1]-o[0]);return e[0]+n*(t-o[0])}}function VR(o){return(String(o).split(".")[1]||"").length}function KR(o,e){const t=Math.pow(10,e);return Math.round(o*t)/t}var YR=xb,WR=Rb,XR=Cb,QR=Nb;function ZR({className:o,defaultValue:e,value:t,min:n=0,max:r=100,...i}){const l=ze.useMemo(()=>Array.isArray(t)?t:Array.isArray(e)?e:[n,r],[t,e,n,r]);return O.jsxs(YR,{"data-slot":"slider",defaultValue:e,value:t,min:n,max:r,className:Qr("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",o),...i,children:[O.jsx(WR,{"data-slot":"slider-track",className:Qr("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:O.jsx(XR,{"data-slot":"slider-range",className:Qr("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:l.length},(c,f)=>O.jsx(QR,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},f))]})}var cg="Switch",[JR,ND]=Bl(cg),[eC,tC]=JR(cg),Pb=ze.forwardRef((o,e)=>{const{__scopeSwitch:t,name:n,checked:r,defaultChecked:i,required:l,disabled:c,value:f="on",onCheckedChange:h,form:g,...p}=o,[y,T]=ze.useState(null),b=Gr(e,Z=>T(Z)),w=ze.useRef(!1),R=y?g||!!y.closest("form"):!0,[M,Y]=hc({prop:r,defaultProp:i??!1,onChange:h,caller:cg});return O.jsxs(eC,{scope:t,checked:M,disabled:c,children:[O.jsx(jr.button,{type:"button",role:"switch","aria-checked":M,"aria-required":l,"data-state":zb(M),"data-disabled":c?"":void 0,disabled:c,value:f,...p,ref:b,onClick:Xr(o.onClick,Z=>{Y(ye=>!ye),R&&(w.current=Z.isPropagationStopped(),w.current||Z.stopPropagation())})}),R&&O.jsx(Fb,{control:y,bubbles:!w.current,name:n,value:f,checked:M,required:l,disabled:c,form:g,style:{transform:"translateX(-100%)"}})]})});Pb.displayName=cg;var Mb="SwitchThumb",Ob=ze.forwardRef((o,e)=>{const{__scopeSwitch:t,...n}=o,r=tC(Mb,t);return O.jsx(jr.span,{"data-state":zb(r.checked),"data-disabled":r.disabled?"":void 0,...n,ref:e})});Ob.displayName=Mb;var nC="SwitchBubbleInput",Fb=ze.forwardRef(({__scopeSwitch:o,control:e,checked:t,bubbles:n=!0,...r},i)=>{const l=ze.useRef(null),c=Gr(l,i),f=yb(t),h=vb(e);return ze.useEffect(()=>{const g=l.current;if(!g)return;const p=window.HTMLInputElement.prototype,T=Object.getOwnPropertyDescriptor(p,"checked").set;if(f!==t&&T){const b=new Event("click",{bubbles:n});T.call(g,t),g.dispatchEvent(b)}},[f,t,n]),O.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...r,tabIndex:-1,ref:c,style:{...r.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Fb.displayName=nC;function zb(o){return o?"checked":"unchecked"}var rC=Pb,iC=Ob;function aC({className:o,...e}){return O.jsx(rC,{"data-slot":"switch",className:Qr("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",o),...e,children:O.jsx(iC,{"data-slot":"switch-thumb",className:Qr("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function sC({userPreferences:o,connectionData:e,onBack:t,onUpdatePreferences:n,onClearData:r,apiBase:i}){var M,Y,Z,ye,Re;const[l,c]=ze.useState({quality_preference:"auto",volume_level:1,subtitle_enabled:!1,subtitle_language:"pt",...o}),[f,h]=ze.useState(!1),[g,p]=ze.useState(e||{});ze.useEffect(()=>{c({quality_preference:"auto",volume_level:1,subtitle_enabled:!1,subtitle_language:"pt",...o})},[o]),ze.useEffect(()=>{p(e||{})},[e]);const y=(F,k)=>{c(j=>({...j,[F]:k}))},T=async()=>{h(!0);try{await n(l)}finally{h(!1)}},b=()=>{c({quality_preference:"auto",volume_level:1,subtitle_enabled:!1,subtitle_language:"pt",favorite_channels:[],recent_channels:[]})},w=[{value:"auto",label:"Automática (Recomendado)"},{value:"4k",label:"4K Ultra HD"},{value:"fullhd",label:"Full HD (1080p)"},{value:"hd",label:"HD (720p)"},{value:"sd",label:"SD (480p)"}],R=[{value:"pt",label:"Português"},{value:"en",label:"English"},{value:"es",label:"Español"},{value:"fr",label:"Français"}];return O.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white",children:[O.jsx("header",{className:"bg-black/50 backdrop-blur-sm border-b border-purple-500/30 p-4",children:O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center space-x-4",children:[O.jsxs(vr,{variant:"ghost",size:"sm",onClick:t,className:"text-purple-300 hover:bg-purple-500/20",children:[O.jsx(cc,{className:"w-4 h-4 mr-2"}),"Voltar"]}),O.jsxs("div",{className:"flex items-center space-x-2",children:[O.jsx(Mm,{className:"w-6 h-6 text-purple-400"}),O.jsx("h1",{className:"text-xl font-bold",children:"Configurações"})]})]}),O.jsxs("div",{className:"flex items-center space-x-2",children:[O.jsxs(vr,{onClick:b,variant:"outline",size:"sm",className:"border-gray-600 text-gray-300 hover:bg-gray-700/50",children:[O.jsx(qS,{className:"w-4 h-4 mr-2"}),"Restaurar Padrões"]}),O.jsxs(vr,{onClick:T,disabled:f,className:"bg-purple-600 hover:bg-purple-700",children:[O.jsx($S,{className:"w-4 h-4 mr-2"}),f?"Salvando...":"Salvar"]})]})]})}),O.jsxs("div",{className:"p-6 space-y-6",children:[O.jsxs(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm",children:[O.jsx(Ii,{children:O.jsxs(Ai,{className:"flex items-center text-white",children:[O.jsx(pp,{className:"w-5 h-5 mr-2 text-purple-400"}),"Informações da Conexão"]})}),O.jsxs(Nr,{className:"space-y-4",children:[O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[O.jsxs("div",{className:"space-y-2",children:[O.jsx(rs,{className:"text-gray-300",children:"Servidor"}),O.jsx("div",{className:"text-white bg-gray-800/50 p-2 rounded",children:g.server_url||"N/A"})]}),O.jsxs("div",{className:"space-y-2",children:[O.jsx(rs,{className:"text-gray-300",children:"Usuário"}),O.jsx("div",{className:"text-white bg-gray-800/50 p-2 rounded",children:g.username||"N/A"})]})]}),g.server_info&&O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t border-gray-600",children:[O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"text-2xl font-bold text-purple-400",children:((M=g.statistics)==null?void 0:M.total_live_channels)||0}),O.jsx("div",{className:"text-sm text-gray-300",children:"Canais"})]}),O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"text-2xl font-bold text-blue-400",children:((Y=g.statistics)==null?void 0:Y.total_vod)||0}),O.jsx("div",{className:"text-sm text-gray-300",children:"Filmes"})]}),O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"text-2xl font-bold text-green-400",children:((Z=g.statistics)==null?void 0:Z.total_series)||0}),O.jsx("div",{className:"text-sm text-gray-300",children:"Séries"})]})]})]})]}),O.jsxs(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm",children:[O.jsx(Ii,{children:O.jsxs(Ai,{className:"flex items-center text-white",children:[O.jsx(FS,{className:"w-5 h-5 mr-2 text-purple-400"}),"Configurações de Vídeo"]})}),O.jsx(Nr,{className:"space-y-6",children:O.jsxs("div",{className:"space-y-2",children:[O.jsx(rs,{className:"text-gray-300",children:"Qualidade Preferida"}),O.jsx("select",{value:l.quality_preference,onChange:F=>y("quality_preference",F.target.value),className:"w-full bg-gray-800/50 text-white border border-gray-600 rounded px-3 py-2",children:w.map(F=>O.jsx("option",{value:F.value,children:F.label},F.value))}),O.jsx("p",{className:"text-xs text-gray-400",children:"A qualidade automática ajusta baseada na sua conexão de internet"})]})})]}),O.jsxs(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm",children:[O.jsx(Ii,{children:O.jsxs(Ai,{className:"flex items-center text-white",children:[O.jsx(r_,{className:"w-5 h-5 mr-2 text-purple-400"}),"Configurações de Áudio"]})}),O.jsx(Nr,{className:"space-y-6",children:O.jsxs("div",{className:"space-y-2",children:[O.jsx(rs,{className:"text-gray-300",children:"Volume Padrão"}),O.jsxs("div",{className:"space-y-2",children:[O.jsx(ZR,{value:[l.volume_level],onValueChange:F=>y("volume_level",F[0]),max:1,step:.1,className:"cursor-pointer"}),O.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[O.jsx("span",{children:"0%"}),O.jsxs("span",{className:"text-purple-300",children:[Math.round(l.volume_level*100),"%"]}),O.jsx("span",{children:"100%"})]})]})]})})]}),O.jsxs(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm",children:[O.jsx(Ii,{children:O.jsxs(Ai,{className:"flex items-center text-white",children:[O.jsx(mS,{className:"w-5 h-5 mr-2 text-purple-400"}),"Configurações de Legendas"]})}),O.jsxs(Nr,{className:"space-y-6",children:[O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("div",{className:"space-y-1",children:[O.jsx(rs,{className:"text-gray-300",children:"Ativar Legendas"}),O.jsx("p",{className:"text-xs text-gray-400",children:"Habilita legendas quando disponíveis"})]}),O.jsx(aC,{checked:l.subtitle_enabled,onCheckedChange:F=>y("subtitle_enabled",F)})]}),l.subtitle_enabled&&O.jsxs("div",{className:"space-y-2",children:[O.jsx(rs,{className:"text-gray-300",children:"Idioma das Legendas"}),O.jsx("select",{value:l.subtitle_language,onChange:F=>y("subtitle_language",F.target.value),className:"w-full bg-gray-800/50 text-white border border-gray-600 rounded px-3 py-2",children:R.map(F=>O.jsx("option",{value:F.value,children:F.label},F.value))})]})]})]}),O.jsxs(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm",children:[O.jsx(Ii,{children:O.jsxs(Ai,{className:"flex items-center text-white",children:[O.jsx(JS,{className:"w-5 h-5 mr-2 text-purple-400"}),"Dados do Usuário"]})}),O.jsx(Nr,{className:"space-y-4",children:O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[O.jsxs("div",{className:"space-y-2",children:[O.jsx(rs,{className:"text-gray-300",children:"Canais Favoritos"}),O.jsx("div",{className:"flex items-center space-x-2",children:O.jsxs(qa,{variant:"secondary",className:"bg-purple-500/20 text-purple-300",children:[((ye=l.favorite_channels)==null?void 0:ye.length)||0," canais"]})})]}),O.jsxs("div",{className:"space-y-2",children:[O.jsx(rs,{className:"text-gray-300",children:"Histórico Recente"}),O.jsx("div",{className:"flex items-center space-x-2",children:O.jsxs(qa,{variant:"secondary",className:"bg-blue-500/20 text-blue-300",children:[((Re=l.recent_channels)==null?void 0:Re.length)||0," itens"]})})]})]})})]}),O.jsxs(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm",children:[O.jsx(Ii,{children:O.jsxs(Ai,{className:"flex items-center text-white",children:[O.jsx(xS,{className:"w-5 h-5 mr-2 text-purple-400"}),"Gerenciamento de Dados"]})}),O.jsxs(Nr,{className:"space-y-4",children:[O.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-800/30 rounded-lg",children:[O.jsxs("div",{className:"space-y-1",children:[O.jsx("h4",{className:"text-white font-medium",children:"Limpar Cache"}),O.jsx("p",{className:"text-xs text-gray-400",children:"Remove dados temporários e melhora a performance"})]}),O.jsxs(vr,{variant:"outline",size:"sm",onClick:async()=>{if(!e||!e.id&&!e.connection_id){alert("Dados de conexão não encontrados para limpar o cache.");return}if(confirm("Tem certeza que deseja limpar o cache local? Isso removerá todos os canais, filmes e séries salvos localmente."))try{const k=i,j=e.id||e.connection_id,L=await(await fetch(`${k}/clear_cache/${j}`,{method:"POST"})).json();L.success?(alert("Cache local limpo com sucesso! A aplicação será recarregada para aplicar as mudanças."),window.location.reload()):alert(`Erro ao limpar o cache: ${L.error}`),m}catch(k){alert(`Erro de conexão ao tentar limpar o cache: ${k.message}`)}},className:"border-gray-600 text-gray-300 hover:bg-gray-700/50",children:[O.jsx(Ey,{className:"w-4 h-4 mr-2"}),"Limpar"]})]}),O.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-900/20 border border-red-500/30 rounded-lg",children:[O.jsxs("div",{className:"space-y-1",children:[O.jsx("h4",{className:"text-white font-medium",children:"Resetar Todas as Configurações"}),O.jsx("p",{className:"text-xs text-gray-400",children:"Remove todos os dados salvos e restaura configurações padrão"})]}),O.jsxs(vr,{variant:"destructive",size:"sm",onClick:()=>{confirm("Tem certeza? Esta ação não pode ser desfeita.")&&r&&r()},children:[O.jsx(Ey,{className:"w-4 h-4 mr-2"}),"Resetar Tudo"]})]})]})]}),O.jsxs(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm",children:[O.jsx(Ii,{children:O.jsxs(Ai,{className:"flex items-center text-white",children:[O.jsx(DS,{className:"w-5 h-5 mr-2 text-purple-400"}),"Informações do Sistema"]})}),O.jsx(Nr,{children:O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[O.jsxs("div",{className:"space-y-1",children:[O.jsx("div",{className:"text-gray-300",children:"Versão"}),O.jsx("div",{className:"text-white",children:"IPTV System v1.0"})]}),O.jsxs("div",{className:"space-y-1",children:[O.jsx("div",{className:"text-gray-300",children:"Navegador"}),O.jsx("div",{className:"text-white",children:navigator.userAgent})]}),O.jsxs("div",{className:"space-y-1",children:[O.jsx("div",{className:"text-gray-300",children:"Resolução"}),O.jsxs("div",{className:"text-white",children:[window.screen.width,"x",window.screen.height]})]}),O.jsxs("div",{className:"space-y-1",children:[O.jsx("div",{className:"text-gray-300",children:"Sistema Operacional"}),O.jsx("div",{className:"text-white",children:navigator.platform})]}),O.jsxs("div",{className:"space-y-1",children:[O.jsx("div",{className:"text-gray-300",children:"Status da Rede"}),O.jsx("div",{className:"text-white",children:navigator.onLine?"Online":"Offline"})]}),O.jsxs("div",{className:"space-y-1",children:[O.jsx("div",{className:"text-gray-300",children:"Tipo de Dispositivo"}),O.jsx("div",{className:"text-white",children:/Mobi|Android/i.test(navigator.userAgent)?"Mobile":"Desktop"})]})]})})]})]})]})}function oC(o,e){return ze.useReducer((t,n)=>e[t][n]??t,o)}var so=o=>{const{present:e,children:t}=o,n=lC(e),r=typeof t=="function"?t({present:n.isPresent}):ze.Children.only(t),i=Gr(n.ref,uC(r));return typeof t=="function"||n.isPresent?ze.cloneElement(r,{ref:i}):null};so.displayName="Presence";function lC(o){const[e,t]=ze.useState(),n=ze.useRef(null),r=ze.useRef(o),i=ze.useRef("none"),l=o?"mounted":"unmounted",[c,f]=oC(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return ze.useEffect(()=>{const h=Rh(n.current);i.current=c==="mounted"?h:"none"},[c]),Wo(()=>{const h=n.current,g=r.current;if(g!==o){const y=i.current,T=Rh(h);o?f("MOUNT"):T==="none"||(h==null?void 0:h.display)==="none"?f("UNMOUNT"):f(g&&y!==T?"ANIMATION_OUT":"UNMOUNT"),r.current=o}},[o,f]),Wo(()=>{if(e){let h;const g=e.ownerDocument.defaultView??window,p=T=>{const w=Rh(n.current).includes(T.animationName);if(T.target===e&&w&&(f("ANIMATION_END"),!r.current)){const R=e.style.animationFillMode;e.style.animationFillMode="forwards",h=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=R)})}},y=T=>{T.target===e&&(i.current=Rh(n.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{g.clearTimeout(h),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:ze.useCallback(h=>{n.current=h?getComputedStyle(h):null,t(h)},[])}}function Rh(o){return(o==null?void 0:o.animationName)||"none"}function uC(o){var n,r;let e=(n=Object.getOwnPropertyDescriptor(o.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?o.ref:(e=(r=Object.getOwnPropertyDescriptor(o,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?o.props.ref:o.props.ref||o.ref)}function ja(o){const e=ze.useRef(o);return ze.useEffect(()=>{e.current=o}),ze.useMemo(()=>(...t)=>{var n;return(n=e.current)==null?void 0:n.call(e,...t)},[])}function cC(o,e){return ze.useReducer((t,n)=>e[t][n]??t,o)}var Vp="ScrollArea",[Ub,DD]=Bl(Vp),[dC,Va]=Ub(Vp),Bb=ze.forwardRef((o,e)=>{const{__scopeScrollArea:t,type:n="hover",dir:r,scrollHideDelay:i=600,...l}=o,[c,f]=ze.useState(null),[h,g]=ze.useState(null),[p,y]=ze.useState(null),[T,b]=ze.useState(null),[w,R]=ze.useState(null),[M,Y]=ze.useState(0),[Z,ye]=ze.useState(0),[Re,F]=ze.useState(!1),[k,j]=ze.useState(!1),oe=Gr(e,Ee=>f(Ee)),L=$p(r);return O.jsx(dC,{scope:t,type:n,dir:L,scrollHideDelay:i,scrollArea:c,viewport:h,onViewportChange:g,content:p,onContentChange:y,scrollbarX:T,onScrollbarXChange:b,scrollbarXEnabled:Re,onScrollbarXEnabledChange:F,scrollbarY:w,onScrollbarYChange:R,scrollbarYEnabled:k,onScrollbarYEnabledChange:j,onCornerWidthChange:Y,onCornerHeightChange:ye,children:O.jsx(jr.div,{dir:L,...l,ref:oe,style:{position:"relative","--radix-scroll-area-corner-width":M+"px","--radix-scroll-area-corner-height":Z+"px",...o.style}})})});Bb.displayName=Vp;var jb="ScrollAreaViewport",qb=ze.forwardRef((o,e)=>{const{__scopeScrollArea:t,children:n,nonce:r,...i}=o,l=Va(jb,t),c=ze.useRef(null),f=Gr(e,c,l.onViewportChange);return O.jsxs(O.Fragment,{children:[O.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),O.jsx(jr.div,{"data-radix-scroll-area-viewport":"",...i,ref:f,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...o.style},children:O.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});qb.displayName=jb;var Ls="ScrollAreaScrollbar",Gb=ze.forwardRef((o,e)=>{const{forceMount:t,...n}=o,r=Va(Ls,o.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=r,c=o.orientation==="horizontal";return ze.useEffect(()=>(c?i(!0):l(!0),()=>{c?i(!1):l(!1)}),[c,i,l]),r.type==="hover"?O.jsx(fC,{...n,ref:e,forceMount:t}):r.type==="scroll"?O.jsx(hC,{...n,ref:e,forceMount:t}):r.type==="auto"?O.jsx($b,{...n,ref:e,forceMount:t}):r.type==="always"?O.jsx(Kp,{...n,ref:e}):null});Gb.displayName=Ls;var fC=ze.forwardRef((o,e)=>{const{forceMount:t,...n}=o,r=Va(Ls,o.__scopeScrollArea),[i,l]=ze.useState(!1);return ze.useEffect(()=>{const c=r.scrollArea;let f=0;if(c){const h=()=>{window.clearTimeout(f),l(!0)},g=()=>{f=window.setTimeout(()=>l(!1),r.scrollHideDelay)};return c.addEventListener("pointerenter",h),c.addEventListener("pointerleave",g),()=>{window.clearTimeout(f),c.removeEventListener("pointerenter",h),c.removeEventListener("pointerleave",g)}}},[r.scrollArea,r.scrollHideDelay]),O.jsx(so,{present:t||i,children:O.jsx($b,{"data-state":i?"visible":"hidden",...n,ref:e})})}),hC=ze.forwardRef((o,e)=>{const{forceMount:t,...n}=o,r=Va(Ls,o.__scopeScrollArea),i=o.orientation==="horizontal",l=fg(()=>f("SCROLL_END"),100),[c,f]=cC("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return ze.useEffect(()=>{if(c==="idle"){const h=window.setTimeout(()=>f("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(h)}},[c,r.scrollHideDelay,f]),ze.useEffect(()=>{const h=r.viewport,g=i?"scrollLeft":"scrollTop";if(h){let p=h[g];const y=()=>{const T=h[g];p!==T&&(f("SCROLL"),l()),p=T};return h.addEventListener("scroll",y),()=>h.removeEventListener("scroll",y)}},[r.viewport,i,f,l]),O.jsx(so,{present:t||c!=="hidden",children:O.jsx(Kp,{"data-state":c==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:Xr(o.onPointerEnter,()=>f("POINTER_ENTER")),onPointerLeave:Xr(o.onPointerLeave,()=>f("POINTER_LEAVE"))})})}),$b=ze.forwardRef((o,e)=>{const t=Va(Ls,o.__scopeScrollArea),{forceMount:n,...r}=o,[i,l]=ze.useState(!1),c=o.orientation==="horizontal",f=fg(()=>{if(t.viewport){const h=t.viewport.offsetWidth<t.viewport.scrollWidth,g=t.viewport.offsetHeight<t.viewport.scrollHeight;l(c?h:g)}},10);return uc(t.viewport,f),uc(t.content,f),O.jsx(so,{present:n||i,children:O.jsx(Kp,{"data-state":i?"visible":"hidden",...r,ref:e})})}),Kp=ze.forwardRef((o,e)=>{const{orientation:t="vertical",...n}=o,r=Va(Ls,o.__scopeScrollArea),i=ze.useRef(null),l=ze.useRef(0),[c,f]=ze.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=Wb(c.viewport,c.content),g={...n,sizes:c,onSizesChange:f,hasThumb:h>0&&h<1,onThumbChange:y=>i.current=y,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:y=>l.current=y};function p(y,T){return EC(y,l.current,c,T)}return t==="horizontal"?O.jsx(gC,{...g,ref:e,onThumbPositionChange:()=>{if(r.viewport&&i.current){const y=r.viewport.scrollLeft,T=J0(y,c,r.dir);i.current.style.transform=`translate3d(${T}px, 0, 0)`}},onWheelScroll:y=>{r.viewport&&(r.viewport.scrollLeft=y)},onDragScroll:y=>{r.viewport&&(r.viewport.scrollLeft=p(y,r.dir))}}):t==="vertical"?O.jsx(mC,{...g,ref:e,onThumbPositionChange:()=>{if(r.viewport&&i.current){const y=r.viewport.scrollTop,T=J0(y,c);i.current.style.transform=`translate3d(0, ${T}px, 0)`}},onWheelScroll:y=>{r.viewport&&(r.viewport.scrollTop=y)},onDragScroll:y=>{r.viewport&&(r.viewport.scrollTop=p(y))}}):null}),gC=ze.forwardRef((o,e)=>{const{sizes:t,onSizesChange:n,...r}=o,i=Va(Ls,o.__scopeScrollArea),[l,c]=ze.useState(),f=ze.useRef(null),h=Gr(e,f,i.onScrollbarXChange);return ze.useEffect(()=>{f.current&&c(getComputedStyle(f.current))},[f]),O.jsx(Vb,{"data-orientation":"horizontal",...r,ref:h,sizes:t,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":dg(t)+"px",...o.style},onThumbPointerDown:g=>o.onThumbPointerDown(g.x),onDragScroll:g=>o.onDragScroll(g.x),onWheelScroll:(g,p)=>{if(i.viewport){const y=i.viewport.scrollLeft+g.deltaX;o.onWheelScroll(y),Qb(y,p)&&g.preventDefault()}},onResize:()=>{f.current&&i.viewport&&l&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:f.current.clientWidth,paddingStart:ng(l.paddingLeft),paddingEnd:ng(l.paddingRight)}})}})}),mC=ze.forwardRef((o,e)=>{const{sizes:t,onSizesChange:n,...r}=o,i=Va(Ls,o.__scopeScrollArea),[l,c]=ze.useState(),f=ze.useRef(null),h=Gr(e,f,i.onScrollbarYChange);return ze.useEffect(()=>{f.current&&c(getComputedStyle(f.current))},[f]),O.jsx(Vb,{"data-orientation":"vertical",...r,ref:h,sizes:t,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":dg(t)+"px",...o.style},onThumbPointerDown:g=>o.onThumbPointerDown(g.y),onDragScroll:g=>o.onDragScroll(g.y),onWheelScroll:(g,p)=>{if(i.viewport){const y=i.viewport.scrollTop+g.deltaY;o.onWheelScroll(y),Qb(y,p)&&g.preventDefault()}},onResize:()=>{f.current&&i.viewport&&l&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:f.current.clientHeight,paddingStart:ng(l.paddingTop),paddingEnd:ng(l.paddingBottom)}})}})}),[pC,Hb]=Ub(Ls),Vb=ze.forwardRef((o,e)=>{const{__scopeScrollArea:t,sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:f,onDragScroll:h,onWheelScroll:g,onResize:p,...y}=o,T=Va(Ls,t),[b,w]=ze.useState(null),R=Gr(e,oe=>w(oe)),M=ze.useRef(null),Y=ze.useRef(""),Z=T.viewport,ye=n.content-n.viewport,Re=ja(g),F=ja(f),k=fg(p,10);function j(oe){if(M.current){const L=oe.clientX-M.current.left,Ee=oe.clientY-M.current.top;h({x:L,y:Ee})}}return ze.useEffect(()=>{const oe=L=>{const Ee=L.target;(b==null?void 0:b.contains(Ee))&&Re(L,ye)};return document.addEventListener("wheel",oe,{passive:!1}),()=>document.removeEventListener("wheel",oe,{passive:!1})},[Z,b,ye,Re]),ze.useEffect(F,[n,F]),uc(b,k),uc(T.content,k),O.jsx(pC,{scope:t,scrollbar:b,hasThumb:r,onThumbChange:ja(i),onThumbPointerUp:ja(l),onThumbPositionChange:F,onThumbPointerDown:ja(c),children:O.jsx(jr.div,{...y,ref:R,style:{position:"absolute",...y.style},onPointerDown:Xr(o.onPointerDown,oe=>{oe.button===0&&(oe.target.setPointerCapture(oe.pointerId),M.current=b.getBoundingClientRect(),Y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",T.viewport&&(T.viewport.style.scrollBehavior="auto"),j(oe))}),onPointerMove:Xr(o.onPointerMove,j),onPointerUp:Xr(o.onPointerUp,oe=>{const L=oe.target;L.hasPointerCapture(oe.pointerId)&&L.releasePointerCapture(oe.pointerId),document.body.style.webkitUserSelect=Y.current,T.viewport&&(T.viewport.style.scrollBehavior=""),M.current=null})})})}),tg="ScrollAreaThumb",Kb=ze.forwardRef((o,e)=>{const{forceMount:t,...n}=o,r=Hb(tg,o.__scopeScrollArea);return O.jsx(so,{present:t||r.hasThumb,children:O.jsx(yC,{ref:e,...n})})}),yC=ze.forwardRef((o,e)=>{const{__scopeScrollArea:t,style:n,...r}=o,i=Va(tg,t),l=Hb(tg,t),{onThumbPositionChange:c}=l,f=Gr(e,p=>l.onThumbChange(p)),h=ze.useRef(void 0),g=fg(()=>{h.current&&(h.current(),h.current=void 0)},100);return ze.useEffect(()=>{const p=i.viewport;if(p){const y=()=>{if(g(),!h.current){const T=bC(p,c);h.current=T,c()}};return c(),p.addEventListener("scroll",y),()=>p.removeEventListener("scroll",y)}},[i.viewport,g,c]),O.jsx(jr.div,{"data-state":l.hasThumb?"visible":"hidden",...r,ref:f,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Xr(o.onPointerDownCapture,p=>{const T=p.target.getBoundingClientRect(),b=p.clientX-T.left,w=p.clientY-T.top;l.onThumbPointerDown({x:b,y:w})}),onPointerUp:Xr(o.onPointerUp,l.onThumbPointerUp)})});Kb.displayName=tg;var Yp="ScrollAreaCorner",Yb=ze.forwardRef((o,e)=>{const t=Va(Yp,o.__scopeScrollArea),n=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&n?O.jsx(vC,{...o,ref:e}):null});Yb.displayName=Yp;var vC=ze.forwardRef((o,e)=>{const{__scopeScrollArea:t,...n}=o,r=Va(Yp,t),[i,l]=ze.useState(0),[c,f]=ze.useState(0),h=!!(i&&c);return uc(r.scrollbarX,()=>{var p;const g=((p=r.scrollbarX)==null?void 0:p.offsetHeight)||0;r.onCornerHeightChange(g),f(g)}),uc(r.scrollbarY,()=>{var p;const g=((p=r.scrollbarY)==null?void 0:p.offsetWidth)||0;r.onCornerWidthChange(g),l(g)}),h?O.jsx(jr.div,{...n,ref:e,style:{width:i,height:c,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...o.style}}):null});function ng(o){return o?parseInt(o,10):0}function Wb(o,e){const t=o/e;return isNaN(t)?0:t}function dg(o){const e=Wb(o.viewport,o.content),t=o.scrollbar.paddingStart+o.scrollbar.paddingEnd,n=(o.scrollbar.size-t)*e;return Math.max(n,18)}function EC(o,e,t,n="ltr"){const r=dg(t),i=r/2,l=e||i,c=r-l,f=t.scrollbar.paddingStart+l,h=t.scrollbar.size-t.scrollbar.paddingEnd-c,g=t.content-t.viewport,p=n==="ltr"?[0,g]:[g*-1,0];return Xb([f,h],p)(o)}function J0(o,e,t="ltr"){const n=dg(e),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-r,l=e.content-e.viewport,c=i-n,f=t==="ltr"?[0,l]:[l*-1,0],h=Gp(o,f);return Xb([0,l],[0,c])(h)}function Xb(o,e){return t=>{if(o[0]===o[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(o[1]-o[0]);return e[0]+n*(t-o[0])}}function Qb(o,e){return o>0&&o<e}var bC=(o,e=()=>{})=>{let t={left:o.scrollLeft,top:o.scrollTop},n=0;return function r(){const i={left:o.scrollLeft,top:o.scrollTop},l=t.left!==i.left,c=t.top!==i.top;(l||c)&&e(),t=i,n=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(n)};function fg(o,e){const t=ja(o),n=ze.useRef(0);return ze.useEffect(()=>()=>window.clearTimeout(n.current),[]),ze.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(t,e)},[t,e])}function uc(o,e){const t=ja(e);Wo(()=>{let n=0;if(o){const r=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(t)});return r.observe(o),()=>{window.cancelAnimationFrame(n),r.unobserve(o)}}},[o,t])}var TC=Bb,SC=qb,_C=Yb;function xC({className:o,children:e,...t}){return O.jsxs(TC,{"data-slot":"scroll-area",className:Qr("relative",o),...t,children:[O.jsx(SC,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),O.jsx(wC,{}),O.jsx(_C,{})]})}function wC({className:o,orientation:e="vertical",...t}){return O.jsx(Gb,{"data-slot":"scroll-area-scrollbar",orientation:e,className:Qr("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",o),...t,children:O.jsx(Kb,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var IC=hv[" useId ".trim().toString()]||(()=>{}),AC=0;function Ld(o){const[e,t]=ze.useState(IC());return Wo(()=>{t(n=>n??String(AC++))},[o]),o||(e?`radix-${e}`:"")}var hg="Collapsible",[kC,Zb]=Bl(hg),[RC,Wp]=kC(hg),Jb=ze.forwardRef((o,e)=>{const{__scopeCollapsible:t,open:n,defaultOpen:r,disabled:i,onOpenChange:l,...c}=o,[f,h]=hc({prop:n,defaultProp:r??!1,onChange:l,caller:hg});return O.jsx(RC,{scope:t,disabled:i,contentId:Ld(),open:f,onOpenToggle:ze.useCallback(()=>h(g=>!g),[h]),children:O.jsx(jr.div,{"data-state":Qp(f),"data-disabled":i?"":void 0,...c,ref:e})})});Jb.displayName=hg;var eT="CollapsibleTrigger",tT=ze.forwardRef((o,e)=>{const{__scopeCollapsible:t,...n}=o,r=Wp(eT,t);return O.jsx(jr.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":Qp(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...n,ref:e,onClick:Xr(o.onClick,r.onOpenToggle)})});tT.displayName=eT;var Xp="CollapsibleContent",nT=ze.forwardRef((o,e)=>{const{forceMount:t,...n}=o,r=Wp(Xp,o.__scopeCollapsible);return O.jsx(so,{present:t||r.open,children:({present:i})=>O.jsx(CC,{...n,ref:e,present:i})})});nT.displayName=Xp;var CC=ze.forwardRef((o,e)=>{const{__scopeCollapsible:t,present:n,children:r,...i}=o,l=Wp(Xp,t),[c,f]=ze.useState(n),h=ze.useRef(null),g=Gr(e,h),p=ze.useRef(0),y=p.current,T=ze.useRef(0),b=T.current,w=l.open||c,R=ze.useRef(w),M=ze.useRef(void 0);return ze.useEffect(()=>{const Y=requestAnimationFrame(()=>R.current=!1);return()=>cancelAnimationFrame(Y)},[]),Wo(()=>{const Y=h.current;if(Y){M.current=M.current||{transitionDuration:Y.style.transitionDuration,animationName:Y.style.animationName},Y.style.transitionDuration="0s",Y.style.animationName="none";const Z=Y.getBoundingClientRect();p.current=Z.height,T.current=Z.width,R.current||(Y.style.transitionDuration=M.current.transitionDuration,Y.style.animationName=M.current.animationName),f(n)}},[l.open,n]),O.jsx(jr.div,{"data-state":Qp(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!w,...i,ref:g,style:{"--radix-collapsible-content-height":y?`${y}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...o.style},children:w&&r})});function Qp(o){return o?"open":"closed"}var NC=Jb,DC=tT,LC=nT,os="Accordion",PC=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Zp,MC,OC]=Eb(os),[gg,LD]=Bl(os,[OC,Zb]),Jp=Zb(),rT=ui.forwardRef((o,e)=>{const{type:t,...n}=o,r=n,i=n;return O.jsx(Zp.Provider,{scope:o.__scopeAccordion,children:t==="multiple"?O.jsx(BC,{...i,ref:e}):O.jsx(UC,{...r,ref:e})})});rT.displayName=os;var[iT,FC]=gg(os),[aT,zC]=gg(os,{collapsible:!1}),UC=ui.forwardRef((o,e)=>{const{value:t,defaultValue:n,onValueChange:r=()=>{},collapsible:i=!1,...l}=o,[c,f]=hc({prop:t,defaultProp:n??"",onChange:r,caller:os});return O.jsx(iT,{scope:o.__scopeAccordion,value:ui.useMemo(()=>c?[c]:[],[c]),onItemOpen:f,onItemClose:ui.useCallback(()=>i&&f(""),[i,f]),children:O.jsx(aT,{scope:o.__scopeAccordion,collapsible:i,children:O.jsx(sT,{...l,ref:e})})})}),BC=ui.forwardRef((o,e)=>{const{value:t,defaultValue:n,onValueChange:r=()=>{},...i}=o,[l,c]=hc({prop:t,defaultProp:n??[],onChange:r,caller:os}),f=ui.useCallback(g=>c((p=[])=>[...p,g]),[c]),h=ui.useCallback(g=>c((p=[])=>p.filter(y=>y!==g)),[c]);return O.jsx(iT,{scope:o.__scopeAccordion,value:l,onItemOpen:f,onItemClose:h,children:O.jsx(aT,{scope:o.__scopeAccordion,collapsible:!0,children:O.jsx(sT,{...i,ref:e})})})}),[jC,mg]=gg(os),sT=ui.forwardRef((o,e)=>{const{__scopeAccordion:t,disabled:n,dir:r,orientation:i="vertical",...l}=o,c=ui.useRef(null),f=Gr(c,e),h=MC(t),p=$p(r)==="ltr",y=Xr(o.onKeyDown,T=>{var j;if(!PC.includes(T.key))return;const b=T.target,w=h().filter(oe=>{var L;return!((L=oe.ref.current)!=null&&L.disabled)}),R=w.findIndex(oe=>oe.ref.current===b),M=w.length;if(R===-1)return;T.preventDefault();let Y=R;const Z=0,ye=M-1,Re=()=>{Y=R+1,Y>ye&&(Y=Z)},F=()=>{Y=R-1,Y<Z&&(Y=ye)};switch(T.key){case"Home":Y=Z;break;case"End":Y=ye;break;case"ArrowRight":i==="horizontal"&&(p?Re():F());break;case"ArrowDown":i==="vertical"&&Re();break;case"ArrowLeft":i==="horizontal"&&(p?F():Re());break;case"ArrowUp":i==="vertical"&&F();break}const k=Y%M;(j=w[k].ref.current)==null||j.focus()});return O.jsx(jC,{scope:t,disabled:n,direction:r,orientation:i,children:O.jsx(Zp.Slot,{scope:t,children:O.jsx(jr.div,{...l,"data-orientation":i,ref:f,onKeyDown:n?void 0:y})})})}),rg="AccordionItem",[qC,ey]=gg(rg),oT=ui.forwardRef((o,e)=>{const{__scopeAccordion:t,value:n,...r}=o,i=mg(rg,t),l=FC(rg,t),c=Jp(t),f=Ld(),h=n&&l.value.includes(n)||!1,g=i.disabled||o.disabled;return O.jsx(qC,{scope:t,open:h,disabled:g,triggerId:f,children:O.jsx(NC,{"data-orientation":i.orientation,"data-state":hT(h),...c,...r,ref:e,disabled:g,open:h,onOpenChange:p=>{p?l.onItemOpen(n):l.onItemClose(n)}})})});oT.displayName=rg;var lT="AccordionHeader",uT=ui.forwardRef((o,e)=>{const{__scopeAccordion:t,...n}=o,r=mg(os,t),i=ey(lT,t);return O.jsx(jr.h3,{"data-orientation":r.orientation,"data-state":hT(i.open),"data-disabled":i.disabled?"":void 0,...n,ref:e})});uT.displayName=lT;var fp="AccordionTrigger",cT=ui.forwardRef((o,e)=>{const{__scopeAccordion:t,...n}=o,r=mg(os,t),i=ey(fp,t),l=zC(fp,t),c=Jp(t);return O.jsx(Zp.ItemSlot,{scope:t,children:O.jsx(DC,{"aria-disabled":i.open&&!l.collapsible||void 0,"data-orientation":r.orientation,id:i.triggerId,...c,...n,ref:e})})});cT.displayName=fp;var dT="AccordionContent",fT=ui.forwardRef((o,e)=>{const{__scopeAccordion:t,...n}=o,r=mg(os,t),i=ey(dT,t),l=Jp(t);return O.jsx(LC,{role:"region","aria-labelledby":i.triggerId,"data-orientation":r.orientation,...l,...n,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...o.style}})});fT.displayName=dT;function hT(o){return o?"open":"closed"}var GC=rT,$C=oT,HC=uT,VC=cT,KC=fT;function YC({...o}){return O.jsx(GC,{"data-slot":"accordion",...o})}function WC({className:o,...e}){return O.jsx($C,{"data-slot":"accordion-item",className:Qr("border-b last:border-b-0",o),...e})}function XC({className:o,children:e,...t}){return O.jsx(HC,{className:"flex",children:O.jsxs(VC,{"data-slot":"accordion-trigger",className:Qr("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",o),...t,children:[e,O.jsx(yS,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function QC({className:o,children:e,...t}){return O.jsx(KC,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...t,children:O.jsx("div",{className:Qr("pt-0 pb-4",o),children:e})})}const ZC=({seriesInfo:o,currentStream:e,onBack:t,onPlayEpisode:n})=>{if(!o||!o.series_info)return O.jsx("div",{className:"min-h-screen bg-slate-900 text-white p-6 flex items-center justify-center",children:O.jsx("p",{children:"Nenhuma informação da série disponível."})});const{info:r,episodes:i}=o.series_info,l=i,c=Object.keys(l).sort((f,h)=>parseInt(f)-parseInt(h));return O.jsxs("div",{className:"min-h-screen bg-slate-900 text-white p-6 relative",style:{backgroundImage:`linear-gradient(to bottom, rgba(15, 23, 42, 0.8), rgba(15, 23, 42, 1)), url(${r.backdrop_path&&r.backdrop_path[0]?r.backdrop_path[0]:e.backdrop_path&&e.backdrop_path[0]?e.backdrop_path[0]:""})`,backgroundSize:"cover",backgroundPosition:"center"},children:[O.jsxs(vr,{onClick:t,className:"mb-4 bg-purple-600 hover:bg-purple-700",children:[O.jsx(cc,{className:"w-4 h-4 mr-2"}),"Voltar para Categorias"]}),O.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-6",children:[O.jsx("div",{className:"flex-shrink-0",children:O.jsx("img",{src:r.cover||e.cover,alt:r.name||e.name,className:"w-48 h-auto rounded-lg shadow-lg"})}),O.jsxs("div",{className:"flex-grow",children:[O.jsx("h2",{className:"text-4xl font-bold mb-2",children:r.name||e.name}),O.jsx("p",{className:"text-lg text-gray-300 mb-2",children:r.plot||e.plot}),O.jsxs("p",{className:"text-sm text-gray-400",children:["Ano: ",r.release_date?r.release_date.substring(0,4):e.year," | Gênero: ",r.genre||e.genre," | Classificação: ",r.rating||e.rating]})]})]}),O.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Temporadas e Episódios"}),O.jsx(xC,{className:"h-[calc(100vh-350px)] pr-4",children:O.jsx(YC,{type:"single",collapsible:!0,className:"w-full",children:c.map(f=>O.jsxs(WC,{value:`season-${f}`,children:[O.jsxs(XC,{className:"text-xl font-semibold",children:["Temporada ",f]}),O.jsx(QC,{children:O.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l[f].sort((h,g)=>parseInt(h.episode_num)-parseInt(g.episode_num)).map(h=>O.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-md overflow-hidden cursor-pointer hover:bg-slate-700 transition-colors",onClick:()=>n(h),children:[O.jsx("img",{src:h.info.movie_image||r.cover||e.cover,alt:h.title,className:"w-full h-32 object-cover"}),O.jsxs("div",{className:"p-4",children:[O.jsx("h4",{className:"text-lg font-semibold mb-1",children:`E${h.episode_num}: ${h.title}`}),O.jsx("p",{className:"text-sm text-gray-400 line-clamp-2",children:h.info.plot})]})]},h.id))})})]},f))})})]})};function JC({favoriteStreams:o=[],onBack:e,onPlayStream:t,onToggleFavorite:n,favorites:r=[]}){const[i,l]=ze.useState("grid"),c=h=>r.includes(h),f=h=>{switch(h){case"live":return O.jsx(as,{className:"w-8 h-8 text-purple-400"});case"movie":return O.jsx(Md,{className:"w-8 h-8 text-purple-400"});case"series":return O.jsx(Od,{className:"w-8 h-8 text-purple-400"});default:return O.jsx(is,{className:"w-8 h-8 text-purple-400"})}};return O.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white",children:[O.jsx("header",{className:"bg-black/50 backdrop-blur-sm border-b border-purple-500/30 p-4 sticky top-0 z-10",children:O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center space-x-4",children:[O.jsxs(vr,{variant:"ghost",size:"sm",onClick:e,className:"text-purple-300 hover:bg-purple-500/20",children:[O.jsx(cc,{className:"w-4 h-4 mr-2"}),"Voltar"]}),O.jsxs("div",{className:"flex items-center space-x-2",children:[O.jsx(Vo,{className:"w-6 h-6 text-yellow-400"}),O.jsx("h1",{className:"text-xl font-bold",children:"Meus Favoritos"})]})]}),O.jsx("div",{className:"flex items-center space-x-4",children:O.jsxs("div",{className:"flex bg-gray-800/50 rounded-lg p-1",children:[O.jsx(vr,{variant:i==="grid"?"default":"ghost",size:"sm",onClick:()=>l("grid"),className:i==="grid"?"bg-purple-600":"text-gray-400",children:O.jsx(Ev,{className:"w-4 h-4"})}),O.jsx(vr,{variant:i==="list"?"default":"ghost",size:"sm",onClick:()=>l("list"),className:i==="list"?"bg-purple-600":"text-gray-400",children:O.jsx(bv,{className:"w-4 h-4"})})]})})]})}),O.jsx("div",{className:"p-6 space-y-6",children:o.length>0?O.jsxs("div",{className:"space-y-4",children:[O.jsx("div",{className:"flex items-center justify-between",children:O.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Todo o Conteúdo",O.jsxs(qa,{variant:"secondary",className:"ml-2 bg-purple-500/20 text-purple-300",children:[o.length," itens"]})]})}),i==="grid"?O.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:o.map(h=>O.jsx(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm hover:bg-black/60 transition-all duration-300 cursor-pointer group",onClick:()=>t(h),children:O.jsxs(Nr,{className:"p-3 space-y-3",children:[O.jsxs("div",{className:"relative aspect-video bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-lg overflow-hidden",children:[h.stream_icon?O.jsx("img",{src:h.stream_icon,alt:h.name,className:"w-full h-full object-cover",onError:g=>{g.target.style.display="none"}}):O.jsx("div",{className:"w-full h-full flex items-center justify-center",children:f(h.stream_type)}),O.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:O.jsx(is,{className:"w-8 h-8 text-white"})}),O.jsx(vr,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 w-8 h-8 p-0 bg-black/50 hover:bg-black/70",onClick:g=>{g.stopPropagation(),n(h.stream_id||h.series_id)},children:O.jsx(Vo,{className:`w-4 h-4 ${c(h.stream_id||h.series_id)?"text-yellow-400 fill-yellow-400":"text-white"}`})})]}),O.jsx("div",{className:"space-y-1",children:O.jsx("h4",{className:"text-sm font-medium text-white truncate",children:h.name})})]})},h.stream_id||h.series_id))}):O.jsx("div",{className:"space-y-2",children:o.map(h=>O.jsx(Cr,{className:"bg-black/40 border-purple-500/30 backdrop-blur-sm hover:bg-black/60 transition-all duration-300 cursor-pointer",onClick:()=>t(h),children:O.jsx(Nr,{className:"p-4",children:O.jsxs("div",{className:"flex items-center space-x-4",children:[O.jsx("div",{className:"w-16 h-12 bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded overflow-hidden flex-shrink-0",children:h.stream_icon?O.jsx("img",{src:h.stream_icon,alt:h.name,className:"w-full h-full object-cover",onError:g=>{g.target.style.display="none"}}):O.jsx("div",{className:"w-full h-full flex items-center justify-center",children:f(h.stream_type)})}),O.jsx("div",{className:"flex-1 min-w-0",children:O.jsx("h4",{className:"text-sm font-medium text-white truncate",children:h.name})}),O.jsxs("div",{className:"flex items-center space-x-2",children:[O.jsx(vr,{variant:"ghost",size:"sm",onClick:g=>{g.stopPropagation(),n(h.stream_id||h.series_id)},className:"w-8 h-8 p-0",children:O.jsx(Vo,{className:`w-4 h-4 ${c(h.stream_id||h.series_id)?"text-yellow-400 fill-yellow-400":"text-gray-400"}`})}),O.jsx(is,{className:"w-5 h-5 text-purple-400"})]})]})})},h.stream_id||h.series_id))})]}):O.jsxs("div",{className:"text-center py-12",children:[O.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-yellow-500/20 to-orange-500/20 rounded-full flex items-center justify-center mb-4",children:O.jsx(Vo,{className:"w-8 h-8 text-yellow-400"})}),O.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Nenhum favorito encontrado"}),O.jsx("p",{className:"text-gray-400",children:"Adicione canais, filmes ou séries aos seus favoritos para vê-los aqui."})]})})]})}const eN=({channels:o,currentIndex:e,onSelectChannel:t,onClose:n,show:r,categories:i,currentCategoryId:l})=>{const[c,f]=ze.useState(e),[h,g]=ze.useState(l),[p,y]=ze.useState("channels"),T=ze.useRef(null),b=ze.useRef(null),w=ze.useRef(null),R=o.filter(Y=>Y.category_id===h),M=ze.useCallback(()=>{w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{n()},5e3)},[n]);return ze.useEffect(()=>(r?(M(),window.addEventListener("mousemove",M),window.addEventListener("keydown",M)):(w.current&&clearTimeout(w.current),window.removeEventListener("mousemove",M),window.removeEventListener("keydown",M)),()=>{w.current&&clearTimeout(w.current),window.removeEventListener("mousemove",M),window.removeEventListener("keydown",M)}),[r,M]),ze.useEffect(()=>{f(e)},[e]),ze.useEffect(()=>{i.length>0&&!h&&g(l||i[0].category_id)},[i,l,h]),ze.useEffect(()=>{const Y=Z=>{switch(M(),Z.key){case"ArrowUp":if(Z.preventDefault(),p==="categories"){const ye=i.findIndex(F=>F.category_id===h),Re=ye>0?ye-1:i.length-1;g(i[Re].category_id),f(0)}else f(ye=>ye>0?ye-1:R.length-1);break;case"ArrowDown":if(Z.preventDefault(),p==="categories"){const ye=i.findIndex(F=>F.category_id===h),Re=ye<i.length-1?ye+1:0;g(i[Re].category_id),f(0)}else f(ye=>ye<R.length-1?ye+1:0);break;case"ArrowLeft":Z.preventDefault(),p==="channels"&&y("categories");break;case"ArrowRight":Z.preventDefault(),p==="categories"?y("channels"):R[c]&&t(R[c].stream_id);break;case"Enter":Z.preventDefault(),p==="channels"&&R[c]&&t(R[c].stream_id);break;case"Escape":Z.preventDefault(),n();break}};return window.addEventListener("keydown",Y),()=>{window.removeEventListener("keydown",Y)}},[i,h,R,c,t,n,p,M]),ze.useEffect(()=>{if(T.current&&c!==null&&p==="channels"){const Y=T.current.children[c];Y&&Y.scrollIntoView({behavior:"smooth",block:"nearest"})}},[c,p]),ze.useEffect(()=>{if(b.current&&h&&p==="categories"){const Y=b.current.querySelector(`.category-item[data-category-id="${h}"]`);Y&&Y.scrollIntoView({behavior:"smooth",block:"nearest"})}},[h,p]),O.jsxs("div",{className:`channel-overlay-backdrop ${r?"active":""}`,children:[" ",O.jsxs("div",{className:"channel-overlay-content",children:[O.jsxs("div",{className:`category-panel ${p==="categories"?"active":""}`,children:[O.jsx("h3",{className:"panel-title",children:"Categorias"}),O.jsx("ul",{className:"category-list",ref:b,children:i.map(Y=>O.jsx("li",{"data-category-id":Y.category_id,className:`category-item ${Y.category_id===h?"highlighted":""}`,onClick:()=>{g(Y.category_id),f(0),y("channels")},children:Y.category_name},Y.category_id))})]}),O.jsxs("div",{className:`channel-panel ${p==="channels"?"active":""}`,children:[O.jsx("h3",{className:"panel-title",children:"Canais"}),O.jsx("ul",{className:"channel-list",ref:T,children:R.map((Y,Z)=>O.jsxs("li",{className:`channel-item ${Z===c?"highlighted":""}`,onClick:()=>t(R[Z].stream_id),children:[Y.stream_icon&&O.jsx("img",{src:Y.stream_icon,alt:Y.name,className:"channel-icon"}),O.jsx("span",{className:"channel-name",children:Y.name})]},Y.stream_id))})]})]})]})};function tN(o,e=globalThis==null?void 0:globalThis.document){const t=ja(o);ze.useEffect(()=>{const n=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var nN="DismissableLayer",hp="dismissableLayer.update",rN="dismissableLayer.pointerDownOutside",iN="dismissableLayer.focusOutside",ev,gT=ze.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),mT=ze.forwardRef((o,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:l,onDismiss:c,...f}=o,h=ze.useContext(gT),[g,p]=ze.useState(null),y=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,T]=ze.useState({}),b=Gr(e,k=>p(k)),w=Array.from(h.layers),[R]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),M=w.indexOf(R),Y=g?w.indexOf(g):-1,Z=h.layersWithOutsidePointerEventsDisabled.size>0,ye=Y>=M,Re=oN(k=>{const j=k.target,oe=[...h.branches].some(L=>L.contains(j));!ye||oe||(r==null||r(k),l==null||l(k),k.defaultPrevented||c==null||c())},y),F=lN(k=>{const j=k.target;[...h.branches].some(L=>L.contains(j))||(i==null||i(k),l==null||l(k),k.defaultPrevented||c==null||c())},y);return tN(k=>{Y===h.layers.size-1&&(n==null||n(k),!k.defaultPrevented&&c&&(k.preventDefault(),c()))},y),ze.useEffect(()=>{if(g)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(ev=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(g)),h.layers.add(g),tv(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=ev)}},[g,y,t,h]),ze.useEffect(()=>()=>{g&&(h.layers.delete(g),h.layersWithOutsidePointerEventsDisabled.delete(g),tv())},[g,h]),ze.useEffect(()=>{const k=()=>T({});return document.addEventListener(hp,k),()=>document.removeEventListener(hp,k)},[]),O.jsx(jr.div,{...f,ref:b,style:{pointerEvents:Z?ye?"auto":"none":void 0,...o.style},onFocusCapture:Xr(o.onFocusCapture,F.onFocusCapture),onBlurCapture:Xr(o.onBlurCapture,F.onBlurCapture),onPointerDownCapture:Xr(o.onPointerDownCapture,Re.onPointerDownCapture)})});mT.displayName=nN;var aN="DismissableLayerBranch",sN=ze.forwardRef((o,e)=>{const t=ze.useContext(gT),n=ze.useRef(null),r=Gr(e,n);return ze.useEffect(()=>{const i=n.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),O.jsx(jr.div,{...o,ref:r})});sN.displayName=aN;function oN(o,e=globalThis==null?void 0:globalThis.document){const t=ja(o),n=ze.useRef(!1),r=ze.useRef(()=>{});return ze.useEffect(()=>{const i=c=>{if(c.target&&!n.current){let f=function(){pT(rN,t,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=f,e.addEventListener("click",r.current,{once:!0})):f()}else e.removeEventListener("click",r.current);n.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function lN(o,e=globalThis==null?void 0:globalThis.document){const t=ja(o),n=ze.useRef(!1);return ze.useEffect(()=>{const r=i=>{i.target&&!n.current&&pT(iN,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function tv(){const o=new CustomEvent(hp);document.dispatchEvent(o)}function pT(o,e,t,{discrete:n}){const r=t.originalEvent.target,i=new CustomEvent(o,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(o,e,{once:!0}),n?X_(r,i):r.dispatchEvent(i)}var km="focusScope.autoFocusOnMount",Rm="focusScope.autoFocusOnUnmount",nv={bubbles:!1,cancelable:!0},uN="FocusScope",yT=ze.forwardRef((o,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:r,onUnmountAutoFocus:i,...l}=o,[c,f]=ze.useState(null),h=ja(r),g=ja(i),p=ze.useRef(null),y=Gr(e,w=>f(w)),T=ze.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;ze.useEffect(()=>{if(n){let w=function(Z){if(T.paused||!c)return;const ye=Z.target;c.contains(ye)?p.current=ye:Go(p.current,{select:!0})},R=function(Z){if(T.paused||!c)return;const ye=Z.relatedTarget;ye!==null&&(c.contains(ye)||Go(p.current,{select:!0}))},M=function(Z){if(document.activeElement===document.body)for(const Re of Z)Re.removedNodes.length>0&&Go(c)};document.addEventListener("focusin",w),document.addEventListener("focusout",R);const Y=new MutationObserver(M);return c&&Y.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",R),Y.disconnect()}}},[n,c,T.paused]),ze.useEffect(()=>{if(c){iv.add(T);const w=document.activeElement;if(!c.contains(w)){const M=new CustomEvent(km,nv);c.addEventListener(km,h),c.dispatchEvent(M),M.defaultPrevented||(cN(mN(vT(c)),{select:!0}),document.activeElement===w&&Go(c))}return()=>{c.removeEventListener(km,h),setTimeout(()=>{const M=new CustomEvent(Rm,nv);c.addEventListener(Rm,g),c.dispatchEvent(M),M.defaultPrevented||Go(w??document.body,{select:!0}),c.removeEventListener(Rm,g),iv.remove(T)},0)}}},[c,h,g,T]);const b=ze.useCallback(w=>{if(!t&&!n||T.paused)return;const R=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,M=document.activeElement;if(R&&M){const Y=w.currentTarget,[Z,ye]=dN(Y);Z&&ye?!w.shiftKey&&M===ye?(w.preventDefault(),t&&Go(Z,{select:!0})):w.shiftKey&&M===Z&&(w.preventDefault(),t&&Go(ye,{select:!0})):M===Y&&w.preventDefault()}},[t,n,T.paused]);return O.jsx(jr.div,{tabIndex:-1,...l,ref:y,onKeyDown:b})});yT.displayName=uN;function cN(o,{select:e=!1}={}){const t=document.activeElement;for(const n of o)if(Go(n,{select:e}),document.activeElement!==t)return}function dN(o){const e=vT(o),t=rv(e,o),n=rv(e.reverse(),o);return[t,n]}function vT(o){const e=[],t=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const r=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||r?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function rv(o,e){for(const t of o)if(!fN(t,{upTo:e}))return t}function fN(o,{upTo:e}){if(getComputedStyle(o).visibility==="hidden")return!0;for(;o;){if(e!==void 0&&o===e)return!1;if(getComputedStyle(o).display==="none")return!0;o=o.parentElement}return!1}function hN(o){return o instanceof HTMLInputElement&&"select"in o}function Go(o,{select:e=!1}={}){if(o&&o.focus){const t=document.activeElement;o.focus({preventScroll:!0}),o!==t&&hN(o)&&e&&o.select()}}var iv=gN();function gN(){let o=[];return{add(e){const t=o[0];e!==t&&(t==null||t.pause()),o=av(o,e),o.unshift(e)},remove(e){var t;o=av(o,e),(t=o[0])==null||t.resume()}}}function av(o,e){const t=[...o],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function mN(o){return o.filter(e=>e.tagName!=="A")}var pN="Portal",ET=ze.forwardRef((o,e)=>{var c;const{container:t,...n}=o,[r,i]=ze.useState(!1);Wo(()=>i(!0),[]);const l=t||r&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return l?Y_.createPortal(O.jsx(jr.div,{...n,ref:e}),l):null});ET.displayName=pN;var Cm=0;function yN(){ze.useEffect(()=>{const o=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",o[0]??sv()),document.body.insertAdjacentElement("beforeend",o[1]??sv()),Cm++,()=>{Cm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Cm--}},[])}function sv(){const o=document.createElement("span");return o.setAttribute("data-radix-focus-guard",""),o.tabIndex=0,o.style.outline="none",o.style.opacity="0",o.style.position="fixed",o.style.pointerEvents="none",o}var ks=function(){return ks=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ks.apply(this,arguments)};function bT(o,e){var t={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&e.indexOf(n)<0&&(t[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(o);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(o,n[r])&&(t[n[r]]=o[n[r]]);return t}function vN(o,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,i;n<r;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return o.concat(i||Array.prototype.slice.call(e))}var Gh="right-scroll-bar-position",$h="width-before-scroll-bar",EN="with-scroll-bars-hidden",bN="--removed-body-scroll-bar-size";function Nm(o,e){return typeof o=="function"?o(e):o&&(o.current=e),o}function TN(o,e){var t=ze.useState(function(){return{value:o,callback:e,facade:{get current(){return t.value},set current(n){var r=t.value;r!==n&&(t.value=n,t.callback(n,r))}}}})[0];return t.callback=e,t.facade}var SN=typeof window<"u"?ze.useLayoutEffect:ze.useEffect,ov=new WeakMap;function _N(o,e){var t=TN(null,function(n){return o.forEach(function(r){return Nm(r,n)})});return SN(function(){var n=ov.get(t);if(n){var r=new Set(n),i=new Set(o),l=t.current;r.forEach(function(c){i.has(c)||Nm(c,null)}),i.forEach(function(c){r.has(c)||Nm(c,l)})}ov.set(t,o)},[o]),t}function xN(o){return o}function wN(o,e){e===void 0&&(e=xN);var t=[],n=!1,r={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:o},useMedium:function(i){var l=e(i,n);return t.push(l),function(){t=t.filter(function(c){return c!==l})}},assignSyncMedium:function(i){for(n=!0;t.length;){var l=t;t=[],l.forEach(i)}t={push:function(c){return i(c)},filter:function(){return t}}},assignMedium:function(i){n=!0;var l=[];if(t.length){var c=t;t=[],c.forEach(i),l=t}var f=function(){var g=l;l=[],g.forEach(i)},h=function(){return Promise.resolve().then(f)};h(),t={push:function(g){l.push(g),h()},filter:function(g){return l=l.filter(g),t}}}};return r}function IN(o){o===void 0&&(o={});var e=wN(null);return e.options=ks({async:!0,ssr:!1},o),e}var TT=function(o){var e=o.sideCar,t=bT(o,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return ze.createElement(n,ks({},t))};TT.isSideCarExport=!0;function AN(o,e){return o.useMedium(e),TT}var ST=IN(),Dm=function(){},pg=ze.forwardRef(function(o,e){var t=ze.useRef(null),n=ze.useState({onScrollCapture:Dm,onWheelCapture:Dm,onTouchMoveCapture:Dm}),r=n[0],i=n[1],l=o.forwardProps,c=o.children,f=o.className,h=o.removeScrollBar,g=o.enabled,p=o.shards,y=o.sideCar,T=o.noIsolation,b=o.inert,w=o.allowPinchZoom,R=o.as,M=R===void 0?"div":R,Y=o.gapMode,Z=bT(o,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),ye=y,Re=_N([t,e]),F=ks(ks({},Z),r);return ze.createElement(ze.Fragment,null,g&&ze.createElement(ye,{sideCar:ST,removeScrollBar:h,shards:p,noIsolation:T,inert:b,setCallbacks:i,allowPinchZoom:!!w,lockRef:t,gapMode:Y}),l?ze.cloneElement(ze.Children.only(c),ks(ks({},F),{ref:Re})):ze.createElement(M,ks({},F,{className:f,ref:Re}),c))});pg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};pg.classNames={fullWidth:$h,zeroRight:Gh};var kN=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function RN(){if(!document)return null;var o=document.createElement("style");o.type="text/css";var e=kN();return e&&o.setAttribute("nonce",e),o}function CN(o,e){o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}function NN(o){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(o)}var DN=function(){var o=0,e=null;return{add:function(t){o==0&&(e=RN())&&(CN(e,t),NN(e)),o++},remove:function(){o--,!o&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},LN=function(){var o=DN();return function(e,t){ze.useEffect(function(){return o.add(e),function(){o.remove()}},[e&&t])}},_T=function(){var o=LN(),e=function(t){var n=t.styles,r=t.dynamic;return o(n,r),null};return e},PN={left:0,top:0,right:0,gap:0},Lm=function(o){return parseInt(o||"",10)||0},MN=function(o){var e=window.getComputedStyle(document.body),t=e[o==="padding"?"paddingLeft":"marginLeft"],n=e[o==="padding"?"paddingTop":"marginTop"],r=e[o==="padding"?"paddingRight":"marginRight"];return[Lm(t),Lm(n),Lm(r)]},ON=function(o){if(o===void 0&&(o="margin"),typeof window>"u")return PN;var e=MN(o),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},FN=_T(),sc="data-scroll-locked",zN=function(o,e,t,n){var r=o.left,i=o.top,l=o.right,c=o.gap;return t===void 0&&(t="margin"),`
  .`.concat(EN,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(c,"px ").concat(n,`;
  }
  body[`).concat(sc,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(c,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Gh,` {
    right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat($h,` {
    margin-right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Gh," .").concat(Gh,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat($h," .").concat($h,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(sc,`] {
    `).concat(bN,": ").concat(c,`px;
  }
`)},lv=function(){var o=parseInt(document.body.getAttribute(sc)||"0",10);return isFinite(o)?o:0},UN=function(){ze.useEffect(function(){return document.body.setAttribute(sc,(lv()+1).toString()),function(){var o=lv()-1;o<=0?document.body.removeAttribute(sc):document.body.setAttribute(sc,o.toString())}},[])},BN=function(o){var e=o.noRelative,t=o.noImportant,n=o.gapMode,r=n===void 0?"margin":n;UN();var i=ze.useMemo(function(){return ON(r)},[r]);return ze.createElement(FN,{styles:zN(i,!e,r,t?"":"!important")})},gp=!1;if(typeof window<"u")try{var Ch=Object.defineProperty({},"passive",{get:function(){return gp=!0,!0}});window.addEventListener("test",Ch,Ch),window.removeEventListener("test",Ch,Ch)}catch{gp=!1}var Xu=gp?{passive:!1}:!1,jN=function(o){return o.tagName==="TEXTAREA"},xT=function(o,e){if(!(o instanceof Element))return!1;var t=window.getComputedStyle(o);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!jN(o)&&t[e]==="visible")},qN=function(o){return xT(o,"overflowY")},GN=function(o){return xT(o,"overflowX")},uv=function(o,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=wT(o,n);if(r){var i=IT(o,n),l=i[1],c=i[2];if(l>c)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},$N=function(o){var e=o.scrollTop,t=o.scrollHeight,n=o.clientHeight;return[e,t,n]},HN=function(o){var e=o.scrollLeft,t=o.scrollWidth,n=o.clientWidth;return[e,t,n]},wT=function(o,e){return o==="v"?qN(e):GN(e)},IT=function(o,e){return o==="v"?$N(e):HN(e)},VN=function(o,e){return o==="h"&&e==="rtl"?-1:1},KN=function(o,e,t,n,r){var i=VN(o,window.getComputedStyle(e).direction),l=i*n,c=t.target,f=e.contains(c),h=!1,g=l>0,p=0,y=0;do{var T=IT(o,c),b=T[0],w=T[1],R=T[2],M=w-R-i*b;(b||M)&&wT(o,c)&&(p+=M,y+=b),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!f&&c!==document.body||f&&(e.contains(c)||e===c));return(g&&Math.abs(p)<1||!g&&Math.abs(y)<1)&&(h=!0),h},Nh=function(o){return"changedTouches"in o?[o.changedTouches[0].clientX,o.changedTouches[0].clientY]:[0,0]},cv=function(o){return[o.deltaX,o.deltaY]},dv=function(o){return o&&"current"in o?o.current:o},YN=function(o,e){return o[0]===e[0]&&o[1]===e[1]},WN=function(o){return`
  .block-interactivity-`.concat(o,` {pointer-events: none;}
  .allow-interactivity-`).concat(o,` {pointer-events: all;}
`)},XN=0,Qu=[];function QN(o){var e=ze.useRef([]),t=ze.useRef([0,0]),n=ze.useRef(),r=ze.useState(XN++)[0],i=ze.useState(_T)[0],l=ze.useRef(o);ze.useEffect(function(){l.current=o},[o]),ze.useEffect(function(){if(o.inert){document.body.classList.add("block-interactivity-".concat(r));var w=vN([o.lockRef.current],(o.shards||[]).map(dv),!0).filter(Boolean);return w.forEach(function(R){return R.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),w.forEach(function(R){return R.classList.remove("allow-interactivity-".concat(r))})}}},[o.inert,o.lockRef.current,o.shards]);var c=ze.useCallback(function(w,R){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!l.current.allowPinchZoom;var M=Nh(w),Y=t.current,Z="deltaX"in w?w.deltaX:Y[0]-M[0],ye="deltaY"in w?w.deltaY:Y[1]-M[1],Re,F=w.target,k=Math.abs(Z)>Math.abs(ye)?"h":"v";if("touches"in w&&k==="h"&&F.type==="range")return!1;var j=uv(k,F);if(!j)return!0;if(j?Re=k:(Re=k==="v"?"h":"v",j=uv(k,F)),!j)return!1;if(!n.current&&"changedTouches"in w&&(Z||ye)&&(n.current=Re),!Re)return!0;var oe=n.current||Re;return KN(oe,R,w,oe==="h"?Z:ye)},[]),f=ze.useCallback(function(w){var R=w;if(!(!Qu.length||Qu[Qu.length-1]!==i)){var M="deltaY"in R?cv(R):Nh(R),Y=e.current.filter(function(Re){return Re.name===R.type&&(Re.target===R.target||R.target===Re.shadowParent)&&YN(Re.delta,M)})[0];if(Y&&Y.should){R.cancelable&&R.preventDefault();return}if(!Y){var Z=(l.current.shards||[]).map(dv).filter(Boolean).filter(function(Re){return Re.contains(R.target)}),ye=Z.length>0?c(R,Z[0]):!l.current.noIsolation;ye&&R.cancelable&&R.preventDefault()}}},[]),h=ze.useCallback(function(w,R,M,Y){var Z={name:w,delta:R,target:M,should:Y,shadowParent:ZN(M)};e.current.push(Z),setTimeout(function(){e.current=e.current.filter(function(ye){return ye!==Z})},1)},[]),g=ze.useCallback(function(w){t.current=Nh(w),n.current=void 0},[]),p=ze.useCallback(function(w){h(w.type,cv(w),w.target,c(w,o.lockRef.current))},[]),y=ze.useCallback(function(w){h(w.type,Nh(w),w.target,c(w,o.lockRef.current))},[]);ze.useEffect(function(){return Qu.push(i),o.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:y}),document.addEventListener("wheel",f,Xu),document.addEventListener("touchmove",f,Xu),document.addEventListener("touchstart",g,Xu),function(){Qu=Qu.filter(function(w){return w!==i}),document.removeEventListener("wheel",f,Xu),document.removeEventListener("touchmove",f,Xu),document.removeEventListener("touchstart",g,Xu)}},[]);var T=o.removeScrollBar,b=o.inert;return ze.createElement(ze.Fragment,null,b?ze.createElement(i,{styles:WN(r)}):null,T?ze.createElement(BN,{gapMode:o.gapMode}):null)}function ZN(o){for(var e=null;o!==null;)o instanceof ShadowRoot&&(e=o.host,o=o.host),o=o.parentNode;return e}const JN=AN(ST,QN);var AT=ze.forwardRef(function(o,e){return ze.createElement(pg,ks({},o,{ref:e,sideCar:JN}))});AT.classNames=pg.classNames;var eD=function(o){if(typeof document>"u")return null;var e=Array.isArray(o)?o[0]:o;return e.ownerDocument.body},Zu=new WeakMap,Dh=new WeakMap,Lh={},Pm=0,kT=function(o){return o&&(o.host||kT(o.parentNode))},tD=function(o,e){return e.map(function(t){if(o.contains(t))return t;var n=kT(t);return n&&o.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",o,". Doing nothing"),null)}).filter(function(t){return!!t})},nD=function(o,e,t,n){var r=tD(e,Array.isArray(o)?o:[o]);Lh[t]||(Lh[t]=new WeakMap);var i=Lh[t],l=[],c=new Set,f=new Set(r),h=function(p){!p||c.has(p)||(c.add(p),h(p.parentNode))};r.forEach(h);var g=function(p){!p||f.has(p)||Array.prototype.forEach.call(p.children,function(y){if(c.has(y))g(y);else try{var T=y.getAttribute(n),b=T!==null&&T!=="false",w=(Zu.get(y)||0)+1,R=(i.get(y)||0)+1;Zu.set(y,w),i.set(y,R),l.push(y),w===1&&b&&Dh.set(y,!0),R===1&&y.setAttribute(t,"true"),b||y.setAttribute(n,"true")}catch(M){console.error("aria-hidden: cannot operate on ",y,M)}})};return g(e),c.clear(),Pm++,function(){l.forEach(function(p){var y=Zu.get(p)-1,T=i.get(p)-1;Zu.set(p,y),i.set(p,T),y||(Dh.has(p)||p.removeAttribute(n),Dh.delete(p)),T||p.removeAttribute(t)}),Pm--,Pm||(Zu=new WeakMap,Zu=new WeakMap,Dh=new WeakMap,Lh={})}},rD=function(o,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(o)?o:[o]),r=eD(o);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live]"))),nD(n,r,t,"aria-hidden")):function(){return null}},yg="Dialog",[RT,PD]=Bl(yg),[iD,ls]=RT(yg),CT=o=>{const{__scopeDialog:e,children:t,open:n,defaultOpen:r,onOpenChange:i,modal:l=!0}=o,c=ze.useRef(null),f=ze.useRef(null),[h,g]=hc({prop:n,defaultProp:r??!1,onChange:i,caller:yg});return O.jsx(iD,{scope:e,triggerRef:c,contentRef:f,contentId:Ld(),titleId:Ld(),descriptionId:Ld(),open:h,onOpenChange:g,onOpenToggle:ze.useCallback(()=>g(p=>!p),[g]),modal:l,children:t})};CT.displayName=yg;var NT="DialogTrigger",aD=ze.forwardRef((o,e)=>{const{__scopeDialog:t,...n}=o,r=ls(NT,t),i=Gr(e,r.triggerRef);return O.jsx(jr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":ry(r.open),...n,ref:i,onClick:Xr(o.onClick,r.onOpenToggle)})});aD.displayName=NT;var ty="DialogPortal",[sD,DT]=RT(ty,{forceMount:void 0}),LT=o=>{const{__scopeDialog:e,forceMount:t,children:n,container:r}=o,i=ls(ty,e);return O.jsx(sD,{scope:e,forceMount:t,children:ze.Children.map(n,l=>O.jsx(so,{present:t||i.open,children:O.jsx(ET,{asChild:!0,container:r,children:l})}))})};LT.displayName=ty;var ig="DialogOverlay",PT=ze.forwardRef((o,e)=>{const t=DT(ig,o.__scopeDialog),{forceMount:n=t.forceMount,...r}=o,i=ls(ig,o.__scopeDialog);return i.modal?O.jsx(so,{present:n||i.open,children:O.jsx(lD,{...r,ref:e})}):null});PT.displayName=ig;var oD=Fd("DialogOverlay.RemoveScroll"),lD=ze.forwardRef((o,e)=>{const{__scopeDialog:t,...n}=o,r=ls(ig,t);return O.jsx(AT,{as:oD,allowPinchZoom:!0,shards:[r.contentRef],children:O.jsx(jr.div,{"data-state":ry(r.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),Ul="DialogContent",MT=ze.forwardRef((o,e)=>{const t=DT(Ul,o.__scopeDialog),{forceMount:n=t.forceMount,...r}=o,i=ls(Ul,o.__scopeDialog);return O.jsx(so,{present:n||i.open,children:i.modal?O.jsx(uD,{...r,ref:e}):O.jsx(cD,{...r,ref:e})})});MT.displayName=Ul;var uD=ze.forwardRef((o,e)=>{const t=ls(Ul,o.__scopeDialog),n=ze.useRef(null),r=Gr(e,t.contentRef,n);return ze.useEffect(()=>{const i=n.current;if(i)return rD(i)},[]),O.jsx(OT,{...o,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Xr(o.onCloseAutoFocus,i=>{var l;i.preventDefault(),(l=t.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Xr(o.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&i.preventDefault()}),onFocusOutside:Xr(o.onFocusOutside,i=>i.preventDefault())})}),cD=ze.forwardRef((o,e)=>{const t=ls(Ul,o.__scopeDialog),n=ze.useRef(!1),r=ze.useRef(!1);return O.jsx(OT,{...o,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,c;(l=o.onCloseAutoFocus)==null||l.call(o,i),i.defaultPrevented||(n.current||(c=t.triggerRef.current)==null||c.focus(),i.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:i=>{var f,h;(f=o.onInteractOutside)==null||f.call(o,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const l=i.target;((h=t.triggerRef.current)==null?void 0:h.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),OT=ze.forwardRef((o,e)=>{const{__scopeDialog:t,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:i,...l}=o,c=ls(Ul,t),f=ze.useRef(null),h=Gr(e,f);return yN(),O.jsxs(O.Fragment,{children:[O.jsx(yT,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:i,children:O.jsx(mT,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":ry(c.open),...l,ref:h,onDismiss:()=>c.onOpenChange(!1)})}),O.jsxs(O.Fragment,{children:[O.jsx(hD,{titleId:c.titleId}),O.jsx(mD,{contentRef:f,descriptionId:c.descriptionId})]})]})}),ny="DialogTitle",dD=ze.forwardRef((o,e)=>{const{__scopeDialog:t,...n}=o,r=ls(ny,t);return O.jsx(jr.h2,{id:r.titleId,...n,ref:e})});dD.displayName=ny;var FT="DialogDescription",fD=ze.forwardRef((o,e)=>{const{__scopeDialog:t,...n}=o,r=ls(FT,t);return O.jsx(jr.p,{id:r.descriptionId,...n,ref:e})});fD.displayName=FT;var zT="DialogClose",UT=ze.forwardRef((o,e)=>{const{__scopeDialog:t,...n}=o,r=ls(zT,t);return O.jsx(jr.button,{type:"button",...n,ref:e,onClick:Xr(o.onClick,()=>r.onOpenChange(!1))})});UT.displayName=zT;function ry(o){return o?"open":"closed"}var BT="DialogTitleWarning",[MD,jT]=AR(BT,{contentName:Ul,titleName:ny,docsSlug:"dialog"}),hD=({titleId:o})=>{const e=jT(BT),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return ze.useEffect(()=>{o&&(document.getElementById(o)||console.error(t))},[t,o]),null},gD="DialogDescriptionWarning",mD=({contentRef:o,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${jT(gD).contentName}}.`;return ze.useEffect(()=>{var i;const r=(i=o.current)==null?void 0:i.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(n))},[n,o,e]),null},pD=CT,yD=LT,vD=PT,ED=MT,bD=UT;function TD({...o}){return O.jsx(pD,{"data-slot":"dialog",...o})}function SD({...o}){return O.jsx(yD,{"data-slot":"dialog-portal",...o})}function _D({className:o,...e}){return O.jsx(vD,{"data-slot":"dialog-overlay",className:Qr("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",o),...e})}function xD({className:o,children:e,...t}){return O.jsxs(SD,{"data-slot":"dialog-portal",children:[O.jsx(_D,{}),O.jsxs(ED,{"data-slot":"dialog-content",className:Qr("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",o),...t,children:[e,O.jsxs(bD,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[O.jsx(Tv,{}),O.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function wD(){const[o,e]=ze.useState("dashboard"),[t,n]=ze.useState(!1),[r,i]=ze.useState(null),[l,c]=ze.useState(null),[f,h]=ze.useState(null),[g,p]=ze.useState(!1),[y,T]=ze.useState(null),[b,w]=ze.useState(null),[R,M]=ze.useState(0),[Y,Z]=ze.useState(!1),[ye,Re]=ze.useState(!1),[F,k]=ze.useState(null),[j,oe]=ze.useState("live"),[L,Ee]=ze.useState(null),[Be,pe]=ze.useState([]),[ct,Ye]=ze.useState({favorite_channels:[],recent_channels:[],quality_preference:"auto",volume_level:1,subtitle_enabled:!1,subtitle_language:"pt"}),Le="https://iptvsmart.vercel.app";ze.useEffect(()=>{Je()},[]),ze.useEffect(()=>{r&&r.id&&Ge(r.id)},[r]),ze.useEffect(()=>{r&&r.id&&(async()=>(p(!0),await Me(r.id),p(!1)))()},[r]);const Je=async()=>{try{const et=await(await fetch(`${Le}/connections`)).json();if(et.success&&et.connections.length>0){const qe=et.connections[0];i(qe),e("dashboard")}}catch{console.log("No existing connection found")}},Ge=async Ue=>{p(!0),T(null);try{const qe=await(await fetch(`${Le}/manifest/${Ue}`)).json();qe.success?h(qe.manifest):T(qe.error||"Erro ao carregar manifest.")}catch(et){console.error("Error loading manifest:",et),T("Erro de conexão ao carregar manifest.")}finally{p(!1)}},tt=async()=>{if(r){p(!0),T(null);try{const Ue=r.connection_id||r.id,qe=await(await fetch(`${Le}/request_sync/${Ue}`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();qe.success?(alert("Sincronização solicitada com sucesso! Os dados devem aparecer em breve."),Re(!1),setTimeout(()=>{},5e3)):T(qe.error||"Erro ao solicitar sincronização.")}catch{T("Erro de conexão ao solicitar sincronização.")}finally{p(!1)}}},Ze=async Ue=>{p(!0),T(null);try{const qe=await(await fetch(`${Le}/auth`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({server_url:Ue.server_url,username:Ue.username,password:Ue.password})})).json();if(qe.success){const Xe={...qe,id:qe.id||qe.connection_id};i(Xe),e("dashboard"),n(!1)}else T(qe.error||"Erro na autenticação")}catch{T("Erro de conexão com o servidor")}finally{p(!1)}},Me=async Ue=>{try{const qe=await(await fetch(`${Le}/dashboard/${Ue}`)).json();qe.success?(c(qe.dashboard),qe.dashboard.is_sync_needed?Re(!0):Re(!1),i(Xe=>({...Xe,server_info:qe.dashboard.server_info,user_info:qe.dashboard.user_info}))):T(qe.error||"Falha ao carregar dados do dashboard.")}catch(et){console.error("Error loading dashboard data:",et),T("Erro de rede ao carregar dados do dashboard.")}},$e=async()=>{if(ct.favorite_channels.length===0){pe([]);return}p(!0);try{const et=await(await fetch(`${Le}/streams/details`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({stream_ids:ct.favorite_channels})})).json();et.success&&pe(et.streams||[])}catch(Ue){console.error("Error loading favorite streams:",Ue)}finally{p(!1)}},mt=(Ue,et={})=>{switch(Ue){case"live":case"movies":case"series":oe(Ue==="movies"?"movie":Ue),k(null),e("category_browser");break;case"dashboard":e("dashboard");break;case"settings":e("settings");break;case"epg":e("epg");break;case"favorites":$e(),e("favorites");break;default:e(Ue)}},Dt=async Ue=>{!r||!Ue||(k(Ue.category_id),oe(Ue.stream_type))},Pe=async(Ue,et=0)=>{p(!0),T(null);try{const qe=Ue.si||Ue.series_id;if(!qe){T("ID do stream não encontrado."),p(!1);return}if(Ue.st==="series"){const He=await(await fetch(`${Le}/series_info/${r.connection_id||r.id}/${parseInt(qe)}`)).json();He.success?(Ee(He),w(Ue),e("series_detail")):T(He.error||"Erro ao buscar detalhes da série")}else{const He=await(await fetch(`${Le}/stream-url/${r.id}/${qe}?type=${Ue.st}`)).json();if(He.success){const it=`${Le}/proxy?url=${encodeURIComponent(He.direct_source)}`,bt={...Ue,direct_source:it,category:Ue.ci};w(bt),M(et),console.log("Stream object for player:",bt),e("player")}else T(He.error||"Erro ao obter URL do stream")}}catch(qe){console.error("Error in handlePlayStream:",qe),T("Ocorreu um erro ao tentar reproduzir o conteúdo.")}finally{p(!1)}},Fe=async Ue=>{p(!0),T(null);try{const et=Ue.i,qe="movie",He=await(await fetch(`${Le}/stream-url/${r.id}/${et}?type=${qe}`)).json();if(He.success){const it={...Ue,direct_source:He.direct_source,stream_type:qe,name:Ue.n,stream_icon:Ue.ic||b.c};w(it),e("player")}else T(He.error||"Erro ao obter URL do episódio")}catch(et){console.error("Error in handlePlayEpisode:",et),T("Ocorreu um erro ao tentar reproduzir o episódio.")}finally{p(!1)}},ut=async Ue=>{const et=ct.favorite_channels,Xe=et.includes(Ue)?et.filter(He=>He!==Ue):[...et,Ue];await W({favorite_channels:Xe})},W=async Ue=>{try{(await fetch(`${Le}/preferences`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ue)})).json().success&&Ye(Xe=>({...Xe,...Ue}))}catch(et){console.error("Error updating preferences:",et)}},Q=()=>{e("search")},P=Ue=>{var Xe;const qe=(((Xe=streams[j+"_"+(F||"all")])==null?void 0:Xe.streams)||[])[Ue];qe&&Pe(qe,Ue)},H=Ue=>{var it;let et=null,qe=-1,Xe=j,He=F;for(const bt in streams){const ht=((it=streams[bt])==null?void 0:it.streams)||[],Ct=ht.findIndex(pn=>pn.si===Ue);if(Ct!==-1){et=ht[Ct],qe=Ct;const pn=bt.split("_");Xe=pn[0],He=pn[1];break}}et&&(oe(Xe),k(He),Pe(et,qe)),Z(!1)},be=()=>{Z(!1)},ue=()=>{var Ue;switch(o){case"dashboard":return O.jsxs(O.Fragment,{children:[O.jsx(rx,{dashboardData:l,connectionData:r,onNavigate:mt,onSearch:Q,onPlayChannel:Pe,onManageConnection:()=>n(!0),connectionStatus:r?"active":"inactive"}),ye&&O.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:O.jsxs(Fv,{className:"w-full max-w-md bg-purple-900 border-purple-700 text-white",children:[O.jsx(WS,{className:"h-4 w-4"}),O.jsx(ex,{children:"Dados não encontrados!"}),O.jsx(zv,{children:"Parece que não há dados de canais, filmes ou séries para esta conexão. Deseja tentar sincronizar agora?"}),O.jsx(vr,{onClick:tt,disabled:g,className:"mt-4 w-full bg-purple-600 hover:bg-purple-700",children:g?"Sincronizando...":"Sincronizar Agora"}),y&&O.jsx("p",{className:"text-red-400 text-sm mt-2",children:y})]})}),O.jsx(TD,{open:t,onOpenChange:n,children:O.jsx(xD,{className:"p-0 bg-transparent border-0",children:O.jsx(tx,{onLogin:Ze,isLoading:g,error:y})})})]});case"category_browser":const et=f?f.categories[j]||[]:[];return O.jsx(yx,{connectionData:r,contentType:j,categories:et,onBack:()=>mt("dashboard"),onSelectCategory:Dt,onPlayStream:Pe,onToggleFavorite:ut,isLoading:g,favorites:ct.favorite_channels});case"player":const qe=((Ue=streams[j+"_"+(F||"all")])==null?void 0:Ue.streams)||[];return O.jsxs(O.Fragment,{children:[O.jsx(xR,{stream:b,onNext:()=>{const Xe=(R+1)%qe.length;P(Xe)},onPrev:()=>{const Xe=(R-1+qe.length)%qe.length;P(Xe)},onBack:()=>e("category_browser"),onShowChannelOverlay:()=>Z(!0),isOverlayActive:Y}),Y&&O.jsx(eN,{channels:Object.values(streams).flatMap(Xe=>Xe.streams||[]),currentIndex:R,onSelectChannel:H,onClose:be,show:Y,categories:categories[j]||[],currentCategoryId:F})]});case"series_detail":return O.jsx(ZC,{seriesInfo:L,currentStream:b,onBack:()=>e("category_browser"),onPlayEpisode:Fe});case"favorites":return O.jsx(JC,{favoriteStreams:Be,onBack:()=>mt("dashboard"),onPlayStream:Pe,onToggleFavorite:ut,favorites:ct.favorite_channels});case"search":return O.jsx(wR,{connectionId:(r==null?void 0:r.connection_id)||(r==null?void 0:r.id),onBack:()=>mt("dashboard"),onPlayStream:Pe,onToggleFavorite:ut,favorites:ct.favorite_channels,apiBase:Le});case"epg":return O.jsx(IR,{connectionId:(r==null?void 0:r.connection_id)||(r==null?void 0:r.id),onBack:()=>mt("dashboard"),onPlayChannel:Pe,apiBase:Le});case"settings":return O.jsx(sC,{userPreferences:ct,connectionData:r,onBack:()=>mt("dashboard"),onUpdatePreferences:W,onClearData:()=>{localStorage.clear(),window.location.reload()},apiBase:Le});default:return O.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:O.jsxs("div",{className:"text-center text-white",children:[O.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Tela em Desenvolvimento"}),O.jsx("button",{onClick:()=>mt("dashboard"),className:"px-6 py-2 bg-purple-600 rounded-lg hover:bg-purple-700 transition-colors",children:"Voltar ao Dashboard"})]})})}};return O.jsx("div",{className:"App",style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:ue()})}sS.createRoot(document.getElementById("root")).render(O.jsx(ze.StrictMode,{children:O.jsx(wD,{})}))});export default ID();
